<h2>ZF-11302: Setting class on a select option</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Improvement</dd>

    <dt>Created:</dt>
    <dd>2011-04-18T17:16:40.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2012-10-16T21:12:21.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.12.1 (18/Dec/12)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Matthieu Larcher (mattso)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_View</li>
            <li>FixForZF1.12.1</li>
            <li>View_Helper</li>
            <li>zf-crteam-review</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
        <li><a href="/issues/secure/attachment/13835/FormSelect.patch">FormSelect.patch</a></li>
            <li><a href="/issues/secure/attachment/13834/FormSelect.php">FormSelect.php</a></li>
            <li><a href="/issues/secure/attachment/13837/FormSelectTest.patch">FormSelectTest.patch</a></li>
            <li><a href="/issues/secure/attachment/13836/FormSelectTest.php">FormSelectTest.php</a></li>
            <li><a href="/issues/secure/attachment/13838/FormSelect_fixed.diff">FormSelect_fixed.diff</a></li>
        </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>Adding the possibility to pass a class to options in Zend_View_Helper_FormSelect</p>

<p>When dynamically creating a select in a form, it can be useful to set a specific class on each option tag you create.
A typical use case would be to be able to restrict the options available through javascript according to this class.</p>

<p>The list of classes to use for each element would be passed through attribs in the form of an array associating the value of the option to the desired class.
That would look something like this :</p>

<pre class="highlight"><code>
foreach ($locations as $location) {
    $form-&gt;location_id-&gt;addMultiOption($location-&gt;id, $location-&gt;name);

    $optionClasses = $form-&gt;location_id-&gt;getAttrib('optionClasses');
    $optionClasses = (!$optionClasses) ? array() : $optionClasses;
    $optionClasses[$location-&gt;id] = 'dept_' . $location-&gt;department-&gt;code . ' postCode_' . $location-&gt;postCode;

    $form-&gt;location_id-&gt;setAttrib('optionClasses', $optionClasses);
}
</code></pre>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Matthieu Larcher (mattso) on 2011-04-18T18:15:00.000+0000</p> 
        <div class="body">
            <p>the updated FormSelect file</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthieu Larcher (mattso) on 2011-04-18T18:18:11.000+0000</p> 
        <div class="body">
            <p>the patch</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthieu Larcher (mattso) on 2011-04-18T18:45:28.000+0000</p> 
        <div class="body">
            <p>The test</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthieu Larcher (mattso) on 2011-04-18T18:58:21.000+0000</p> 
        <div class="body">
            <p>the patch for the test</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthieu Larcher (mattso) on 2011-04-18T21:35:02.000+0000</p> 
        <div class="body">
            <p>The files I posted allow for the described behaviour.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthew Weier O'Phinney (matthew) on 2011-04-18T21:46:11.000+0000</p> 
        <div class="body">
            <p>Re-opening as the patches have not been applied against the repository.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Kai Uwe (kaiuwe) on 2011-04-19T06:21:00.000+0000</p> 
        <div class="body">
            <p>@Matthieu</p>

<p>Please review the patch file "FormSelect.patch" because there is no need to replace all of the code.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthieu Larcher (mattso) on 2011-04-19T08:50:44.000+0000</p> 
        <div class="body">
            <p>Here's the fixed patch file. Looks like tortoissvn went crazy on the previous one, I created this one through smartsvn.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Kai Uwe (kaiuwe) on 2011-04-20T06:16:03.000+0000</p> 
        <div class="body">
            <p>Code tags added.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthieu Larcher (mattso) on 2012-10-15T21:31:48.000+0000</p> 
        <div class="body">
            <p>Is there any reason why this ticket is still opened when I provided the required patch and test when opening it ?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthew Weier O'Phinney (matthew) on 2012-10-16T15:13:58.000+0000</p> 
        <div class="body">
            <p>We don't resolve issues unless (a) a fix is in, (b) the patch provided in the issue has been <em>applied</em> and/or (c) we decide we can't use the patch or will not address the issue.</p>

<p>Please don't close this again.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthew Weier O'Phinney (matthew) on 2012-10-16T15:30:43.000+0000</p> 
        <div class="body">
            <p>Merged to trunk and 1.12 release branch.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthieu Larcher (mattso) on 2012-10-16T21:12:21.000+0000</p> 
        <div class="body">
            <p>Thank you for taking the time to handle this.</p>

        </div>
    </div>
    </div>

