<h2>ZF-6624: CLONE -Improvement for Zend_View -&gt; Make hidden field optional</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Improvement</dd>

    <dt>Created:</dt>
    <dd>2009-05-12T09:25:09.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2012-05-29T20:43:09.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.11.12 (22/Jun/12)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Ian Lewis (electricowl)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Frank Brückner (frosch)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_View</li>
            <li>FixForZF1.12</li>
            <li>zf-crteam-priority</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
        <li><a href="/issues/browse/ZF-7847">ZF-7847</a></li>
        </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
        <li><a href="/issues/secure/attachment/15054/FormCheckbox.php.patch">FormCheckbox.php.patch</a></li>
            <li><a href="/issues/secure/attachment/15055/FormCheckboxTest.php.patch">FormCheckboxTest.php.patch</a></li>
        </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>Zend_View_Helper_FormCheckbox automatically adds a hidden field preceding a checkbox as long as it does not have the form name[].</p>

<p>This is not desirable as a default as there are many situations where it will get in the way and cause issues with web applications. Particualrly those using JavaScript.</p>

<p>I suggest adding an attribute such as:
'useHiddenField' =&gt; true 
which will enable the field for those who need it.</p>

<p>if (isset($attribs['useHiddenField']) &amp;&amp; $attribs['useHiddenField']) {
    if (!strstr($name, '[]')) {
        $xhtml = $this-&gt;_hidden($name, $checkedOptions['unCheckedValue']);
    }
}</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Wim Joris (oxidiser) on 2010-12-30T06:17:01.000+0000</p> 
        <div class="body">
            <p>I had a problem where some browsers put the order wrong so the input element containing the actual value got ignored and the value of the hidden field was passed through. Not exactly the wanted behavior if you ask me.</p>

<p>I needed to extend the Zend_View_Helper_FormCheckbox class and overload the formCheckbox() method to remove the hidden field to fix this problem.</p>

<p>I would appreciate this behavior being optional as well.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Emmanuel Bouton (goten4) on 2011-09-23T22:13:39.000+0000</p> 
        <div class="body">
            <p>I'd appreciate too such an option, because I'm using jquerymobile in my app and it enhances certain native form controls into rich touch-friendly components (especially checkboxes). I don't know exactly what is done by jquerymobile but when this behavior is enabled, the checkbox always returns 0. When I disable jquerymobile, it works perfectly !</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Ian Lewis (electricowl) on 2012-02-16T16:35:46.000+0000</p> 
        <div class="body">
            <p>Has anything been done on this issue?</p>

<p>I hate modifying library code in my applications...</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Frank Brückner (frosch) on 2012-05-04T15:49:42.000+0000</p> 
        <div class="body">
            <p>Patch and unit test added.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Rob Allen (rob) on 2012-05-29T20:43:09.000+0000</p> 
        <div class="body">
            <p>Fixed in SVN r24825.</p>

        </div>
    </div>
    </div>

