<h2>ZF-9193: &quot;Invalid mode for clean() method&quot;;</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2010-02-16T12:15:17.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2010-03-01T04:48:46.000+0000</dd>

    <dt>Status:</dt>
    <dd>Closed</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Ray Heinz (rayheinz)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Marc Bennewitz (private) (mabe)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Cache</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
        <li><a href="/issues/secure/attachment/12747/File.php">File.php</a></li>
        </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>I installed Nuance Regional Free Shipping Module onto Magento and now I can not login to magento do to this error.</p>

<p>a:5:{i:0;s:31:"Invalid mode for clean() method";i:1;s:2552:"#0 C:\xampp\htdocs\iphones\app\code\core\Zend\Cache\Backend\File.php(532): Zend_Cache::throwException('Invalid mode fo...')</p>

<h1>1 C:\xampp\htdocs\iphones\app\code\core\Zend\Cache\Backend\File.php(538): Zend_Cache_Backend_File-&gt;_clean('C:\xampp\htdocs...', 'matchingAnyTag', Array)</h1>

<h1>2 C:\xampp\htdocs\iphones\app\code\core\Zend\Cache\Backend\File.php(279): Zend_Cache_Backend_File-&gt;_clean('C:\xampp\htdocs...', 'matchingAnyTag', Array)</h1>

<h1>3 C:\xampp\htdocs\iphones\lib\Zend\Cache\Core.php(452): Zend_Cache_Backend_File-&gt;clean('matchingAnyTag', Array)</h1>

<h1>4 C:\xampp\htdocs\iphones\lib\Varien\Cache\Core.php(100): Zend_Cache_Core-&gt;clean('matchingAnyTag', Array)</h1>

<h1>5 C:\xampp\htdocs\iphones\app\code\core\Mage\Core\Model\Cache.php(374): Varien_Cache_Core-&gt;clean('matchingAnyTag', Array)</h1>

<h1>6 C:\xampp\htdocs\iphones\app\code\core\Mage\Core\Model\App.php(1088): Mage_Core_Model_Cache-&gt;clean(Array)</h1>

<h1>7 C:\xampp\htdocs\iphones\app\code\core\Mage\Adminhtml\Model\Url.php(155): Mage_Core_Model_App-&gt;cleanCache(Array)</h1>

<h1>8 C:\xampp\htdocs\iphones\app\code\core\Mage\Admin\Model\Session.php(75): Mage_Adminhtml_Model_Url-&gt;renewSecretUrls()</h1>

<h1>9 C:\xampp\htdocs\iphones\app\code\core\Mage\Admin\Model\Observer.php(55): Mage_Admin_Model_Session-&gt;login('admin', 'wrubuP7U', Object(Mage_Core_Controller_Request_Http))</h1>

<h1>10 C:\xampp\htdocs\iphones\app\code\core\Mage\Core\Model\App.php(1207): Mage_Admin_Model_Observer-&gt;actionPreDispatchAdmin(Object(Varien_Event_Observer))</h1>

<h1>11 C:\xampp\htdocs\iphones\app\Mage.php(416): Mage_Core_Model_App-&gt;dispatchEvent('controller_acti...', Array)</h1>

<h1>12 C:\xampp\htdocs\iphones\app\code\core\Mage\Core\Controller\Varien\Action.php(497): Mage::dispatchEvent('controller_acti...', Array)</h1>

<h1>13 C:\xampp\htdocs\iphones\app\code\core\Mage\Adminhtml\Controller\Action.php(130): Mage_Core_Controller_Varien_Action-&gt;preDispatch()</h1>

<h1>14 C:\xampp\htdocs\iphones\app\code\core\Mage\Core\Controller\Varien\Action.php(407): Mage_Adminhtml_Controller_Action-&gt;preDispatch()</h1>

<h1>15 C:\xampp\htdocs\iphones\app\code\core\Mage\Core\Controller\Varien\Router\Standard.php(254): Mage_Core_Controller_Varien_Action-&gt;dispatch('index')</h1>

<h1>16 C:\xampp\htdocs\iphones\app\code\core\Mage\Core\Controller\Varien\Front.php(177): Mage_Core_Controller_Varien_Router_Standard-&gt;match(Object(Mage_Core_Controller_Request_Http))</h1>

<h1>17 C:\xampp\htdocs\iphones\app\code\core\Mage\Core\Model\App.php(304): Mage_Core_Controller_Varien_Front-&gt;dispatch()</h1>

<h1>18 C:\xampp\htdocs\iphones\app\Mage.php(596): Mage_Core_Model_App-&gt;run(Array)</h1>

<h1>19 C:\xampp\htdocs\iphones\index.php(65): Mage::run()</h1>

<h1>20 {main}";s:3:"url";s:6:"/admin";s:11:"script_name";s:10:"/index.php";s:4:"skin";s:5:"admin";}</h1>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Ray Heinz (rayheinz) on 2010-02-16T15:35:21.000+0000</p> 
        <div class="body">
            <p>File from error</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Ray Heinz (rayheinz) on 2010-02-16T15:49:12.000+0000</p> 
        <div class="body">
            <p>So from the link I should take the top code, and add ANY to the name. Correct?</p>

<p>This was the only one that had the name "Matching tag".</p>

<p>case Zend_Cache::CLEANING_MODE_MATCHING_TAG:
             $matching = (bool)array_intersect($tags, $metadatas['tags']);
//                        $matching = true;
//                        foreach ($tags as $tag) {
//                            if (!in_array($tag, $metadatas['tags'])) {
//                                $matching = false;
//                                break;
//                            }
//                        }
                        if ($matching) {
                            $result = ($result) &amp;&amp; ($this-&gt;remove($id));
                        }
                        break;</p>

<p>Copy and add ANY</p>

<p>case Zend_Cache::CLEANING_MODE_MATCHING_ANY_TAG:
            $matching = (bool)array_intersect($tags, $metadatas['tags']);
//                        $matching = true;
//                        foreach ($tags as $tag) {
//                            if (!in_array($tag, $metadatas['tags'])) {
//                                $matching = false;
//                                break;
//                            }
//                        }
                        if ($matching) {
                            $result = ($result) &amp;&amp; ($this-&gt;remove($id));
                        }
                        break;</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Satoru Yoshida (satoruyoshida) on 2010-02-20T05:25:05.000+0000</p> 
        <div class="body">
            <p>I think the Zend_Cache that You use is 1.6.x or more previous version.</p>

<p>I will be happy if You would try to reproduce with latest version.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Ray Heinz (rayheinz) on 2010-02-20T09:40:40.000+0000</p> 
        <div class="body">
            <p>Server has been restored from s bsckup, so I can't test it for you. Thanks</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Marc Bennewitz (private) (mabe) on 2010-03-01T04:48:45.000+0000</p> 
        <div class="body">
            <p>The cleaning mode (Zend_Cache::CLEANING_MODE_MATCHING_ANY_TAG = 'matchingAnyTag') wasn't available within zf v1.6.x.</p>

<p>This sounds me like a version mix of zf.
Please check your installation and/or upgrade to the current stable release.</p>

        </div>
    </div>
    </div>

