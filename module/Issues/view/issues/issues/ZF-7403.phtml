<h2>ZF-7403: unable to prevent the escaping of options using Zend_Form_Element_Multiselect</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2009-07-28T00:58:32.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2010-03-16T02:02:20.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Andrew Coghlan (acoghlan@churchworks.com)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Matthew Weier O'Phinney (matthew)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Form</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
        <li><a href="/issues/browse/ZF-5081">ZF-5081</a></li>
            <li><a href="/issues/browse/ZF-8722">ZF-8722</a></li>
            <li><a href="/issues/browse/ZF-9400">ZF-9400</a></li>
            <li><a href="/issues/browse/ZF-9388">ZF-9388</a></li>
        </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>I have a set of options that is tree-like in nature - in this case personnel in an organisation.  I need to display the tree structure in a multi select field, which would be easy to do by simply appending spaces according to the depth of each individual node.  I have prepared my options array so that it looks as follows:</p>

<p>array(
'1' =&gt; 'level 0 node',
'2' =&gt; '&amp;nbsp;&amp;nbsp;level 1 node',
'3' =&gt; '&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;level 2 node'
)</p>

<p>Incase that doesnt come out - I have used the &amp;nbsp; character twice to indent each level - 2 spaces to indent level 1, 4 spaces to indent level 2 and so on.</p>

<p>I have added the setAttrib('escape', false) clause to my multiselect, but while following the code through it became clear that the escape value never gets passed to the actual viewhelper, so my options come out escaped - i.e. instead of seeing spaces, I see a series of &amp;nbsp; next to each option in the multi select list.</p>

<p>To be clear; I can successfully set the escape value to false (as it's true by default), but that does not get passed through to the ViewHelper.</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Steve Hollis (stevehollis) on 2009-11-19T12:07:18.000+0000</p> 
        <div class="body">
            <p>See related issue. Not an issue.</p>

        </div>
    </div>
    </div>

