<h2>ZF-7865: Zend_Soap_Client doesn't work with content-type application/soap+xml</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2009-09-17T03:18:33.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2012-11-20T21:37:32.000+0000</dd>

    <dt>Status:</dt>
    <dd>Open</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
        None
                    </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Soap_Client</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
        <li><a href="/issues/browse/ZF-5286">ZF-5286</a></li>
        </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>I'm trying to connect with the affili.net webservices to query for certain products. When querying any method I just receive the following exception:</p>

<p>PHP Fatal error:  Uncaught SoapFault exception: [HTTP] Cannot process the message because the content type 'application/soap+xml; charset=utf-8; action="http://affilinet.framework.webservices/Svc/ProductServiceContract/SearchProducts"' was not the expected type 'text/xml; charset=utf-8'. in /usr/local/zend/share/ZendFramework/library/Zend/Soap/Client.php:937
Stack trace:</p>

<h1>0 [internal function]: SoapClient-&gt;__doRequest('&lt;?xml version="...', '<a href="https://api.aff">https://api.aff</a>...', '<a href="http://affiline">http://affiline</a>...', 2)</h1>

<h1>1 /usr/local/zend/share/ZendFramework/library/Zend/Soap/Client.php(937): call_user_func(Array, '&lt;?xml version="...', '<a href="https://api.aff">https://api.aff</a>...', '<a href="http://affiline">http://affiline</a>...', 2)</h1>

<h1>2 [internal function]: Zend_Soap_Client-&gt;_doRequest(Object(Zend_Soap_Client_Common), '&lt;?xml version="...', '<a href="https://api.aff">https://api.aff</a>...', '<a href="http://affiline">http://affiline</a>...', 2, 0)</h1>

<h1>3 /usr/local/zend/share/ZendFramework/library/Zend/Soap/Client/Common.php(70): call_user_func(Array, Object(Zend_Soap_Client_Common), '&lt;?xml version="...', '<a href="https://api.aff">https://api.aff</a>...', '<a href="http://affiline">http://affiline</a>...', 2, 0)</h1>

<h1>4 [internal function in /usr/local/zend/share/ZendFramework/library/Zend/Soap/Client.php on line 937</h1>

<p>The documentation of the service can be found here: <a href="http://developer.affili.net/DesktopDefault.aspx/tabid-93">http://developer.affili.net/DesktopDefault.aspx/â€¦</a></p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Ingo Reinhart (ireinhart) on 2009-09-25T07:57:14.000+0000</p> 
        <div class="body">
            <p>Is a dup, show <a href="http://framework.zend.com/issues/browse/ZF-5286">http://framework.zend.com/issues/browse/ZF-5286</a></p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Artem Stepin (nemesis2010) on 2010-06-10T06:34:23.000+0000</p> 
        <div class="body">
            <p>I'm currently sitting on the same problem ... is there any solution for this "affili.net" issue?</p>

<p>EDIT:</p>

<p>ok i get the simple solution:</p>

<pre class="highlight"><code> 
$this-&gt;_soapClient-&gt;setSoapVersion(SOAP_1_1);
</code></pre>

        </div>
    </div>
    </div>

