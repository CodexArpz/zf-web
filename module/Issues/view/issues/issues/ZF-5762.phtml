<h2>ZF-5762: &quot;Zend_Cache_Exception: cache_dir must be a directory&quot; exception</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Unit Tests: Problem</dd>

    <dt>Created:</dt>
    <dd>2009-02-12T10:45:19.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2009-04-05T00:28:24.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Fabien MARTY (fab)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Cache</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>{panel}
1) testGetWithAnExistingCacheId(Zend_Cache_FileBackendTest)
Zend_Cache_Exception: cache_dir must be a directory
/home/cawa/ZendFramework/svn/framework/branches/release-1.7/library/Zend/Cache.php:208
/home/cawa/ZendFramework/svn/framework/branches/release-1.7/library/Zend/Cache/Backend/File.php:153
/home/cawa/ZendFramework/svn/framework/branches/release-1.7/library/Zend/Cache/Backend/File.php:120
{panel}</p>

<p>The problem is not stable. Two Unit tests passes in the same environment may give different results (with or without this error).</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Fabien MARTY (fab) on 2009-02-12T14:05:52.000+0000</p> 
        <div class="body">
            <p>what is your operating system ?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Alexander Veremyev (alexander) on 2009-02-20T10:10:10.000+0000</p> 
        <div class="body">
            <p>Fedora 8, but if I'm correct I saw the same behavior on Windows (moreover error appears more often there). I could try to track it down.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Fabien MARTY (fab) on 2009-03-04T10:57:44.000+0000</p> 
        <div class="body">
            <p>I can't reproduce this.</p>

<p>Here is the code to get the tmpDir for unit tests :</p>

<pre class="highlight"><code>
public function getTmpDir($date = true)
    {
        $suffix = '';
        if ($date) {
            $suffix = date('mdyHis');
        }
        if (is_writeable($this-&gt;_root)) {
            return $this-&gt;_root . DIRECTORY_SEPARATOR . 'zend_cache_tmp_dir_' . $suffix;
        } else {
            if (getenv('TMPDIR')){
                return getenv('TMPDIR') . DIRECTORY_SEPARATOR . 'zend_cache_tmp_dir_' . $suffix;
            } else {
                die("no writable tmpdir found");
            }
        }
    }
</code></pre>

<p>what is your TMPDIR environnement variable ?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Fabien MARTY (fab) on 2009-04-05T00:28:23.000+0000</p> 
        <div class="body">
            <p>I close this issue due to lack of activity</p>

<p>I still can't reproduce this.</p>

<p>Please reopen if you have more details</p>

<p>Regards</p>

        </div>
    </div>
    </div>

