<h2>ZF-4734: Create a Zend_Filter_StringTruncate</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>New Feature</dd>

    <dt>Created:</dt>
    <dd>2008-10-28T13:37:30.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2009-12-07T15:11:15.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.10.0 (27/Jan/10)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Bradley Holt (bradley.holt)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Thomas Weidner (thomas)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Filter</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>Please create a Zend_Filter_StringTruncate class that will truncate a given string to a certain number of characters or words.</p>

<p>For example, I want to truncate the following:</p>

<p>The quick brown fox jumped over the lazy sleeping dog.</p>

<p>to 30 characters:</p>

<p>The quick brown fox jumped ove</p>

<p>or to 30 characters, but the closest whole word:</p>

<p>The quick brown fox jumped</p>

<p>or to 6 words (instead of characters):</p>

<p>The quick brown fox jumped over</p>

<p>This is a common filter that is needed and many developers end up implementing their own PHP code for this. It would be nice to have a standard way of truncating strings within ZF.</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Bruno Friedmann (brunofriedmann) on 2008-10-29T04:45:02.000+0000</p> 
        <div class="body">
            <p>Please get it directly ready for utf-8 string
php5 ( mb present or not ) php6 ready.</p>

<p>If I want to substr to 10 chars the 
ça aide chaque développeur à se faire son opinion ....</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Goran Juric (gog) on 2008-10-29T09:57:23.000+0000</p> 
        <div class="body">
            <p>This filter should take two optional parameters:</p>

<p>1.) A string to append to the truncated string, something like '…', ' more', etc. (this one should be null by default)
2.) option to append 1.) to the strings that wasn't truncated as well</p>

<p>Maybe combine the url view helper, so 1.) can be a link?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Bradley Holt (bradley.holt) on 2008-10-29T10:08:37.000+0000</p> 
        <div class="body">
            <p>I agree with Bruno that this should treat UTF-8 double byte characters as single characters. Goran, those two optional parameters are good ideas as well.</p>

<p>Also, I am now questioning the usefulness of being able to truncate based on word count. I would not be disappointed if that were not a feature of this filter.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Goran Juric (gog) on 2008-10-29T14:46:29.000+0000</p> 
        <div class="body">
            <p>Agree about the wordcount. Strings are truncated because you need to fit them in a given space. Word count in this case means nothing at all.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Luke Barton (ziro) on 2008-12-10T06:24:11.000+0000</p> 
        <div class="body">
            <p>I think the wordcount and round to nearest word end features should be considered. If you're going to implement something, it would be nice to have those features too.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Ralph Schindler (ralph) on 2009-01-11T21:48:11.000+0000</p> 
        <div class="body">
            <p>anyone have any code for this?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Thomas Weidner (thomas) on 2009-01-11T23:03:57.000+0000</p> 
        <div class="body">
            <p>Ralph: You can find a WordCount filter for files under Zend_Filter_File_WordCount in trunk.
Extract the file handling and you have a WordCount filter.</p>

<p>Of course we should then also change the file filter also to use the new WordCount Filter.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Thomas Weidner (thomas) on 2009-01-11T23:07:54.000+0000</p> 
        <div class="body">
            <p>Regarding mbstring...</p>

<p>We clearly have to use iconv as it's installed per default in PHP. This practice is also used in most other ZF classes.</p>

<p>We are only allowed to use mbstr* when there is no other way. Most things can be solved by using binaryaware string functions and iconv.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Thomas Weidner (thomas) on 2009-07-09T04:51:05.000+0000</p> 
        <div class="body">
            <p>Proposal waiting for recommendation from the devteam since 15.04.2009</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Thomas Weidner (thomas) on 2009-12-07T15:11:15.000+0000</p> 
        <div class="body">
            <p>Closing as "Needs Proposal".</p>

<p>The related proposal has already been written.
See here for details and vote for it: <a href="http://framework.zend.com/wiki/display/ZFPROP/Zend_Filter_StringTruncate+-+Thomas+Weidner">http://framework.zend.com/wiki/display/…</a></p>

        </div>
    </div>
    </div>

