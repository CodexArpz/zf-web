<h2>ZF-5418: Improve Zend_Captcha usage example</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Docs:  Improvement</dd>

    <dt>Created:</dt>
    <dd>2009-01-06T17:13:11.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2010-05-27T01:38:04.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.8.4 (23/Jun/09)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Stanislav Malyshev (stas)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Captcha</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
        <li><a href="/issues/secure/attachment/11696/captcha-example.php">captcha-example.php</a></li>
        </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>It is not very clear from the Zend_Captcha documentation exactly how to validate submitted CAPTCHAs when using Zend_Captcha as a standalone component (i.e. without Zend_Form).</p>

<p>The code example on: <a href="http://framework.zend.com/manual/en/zend.captcha.operation.html">http://framework.zend.com/manual/en/â€¦</a> shows the following:</p>

<pre class="highlight"><code>
// On subsequent request:
// Assume captcha setup as before, and $value is the submitted value:
if ($captcha-&gt;isValid($_POST['foo'], $_POST)) {
    // Validated!
}
</code></pre>

<p>Without delving into the source code users have no way of knowing that $_POST['foo'] should be a key/value array containing the keys id (id of the generated captcha), and input (the string the user entered into a form). The comment also references the variable $value, which is never set or used (I believe this is leftover from before the 1.7 changes made as a result of issue #ZF-3995)</p>

<p>It would be useful if this example was extended to be a working example that included a basic HTML form showing the markup required.</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Tim Fountain (tfountain) on 2009-01-06T17:16:02.000+0000</p> 
        <div class="body">
            <p>Here's a working example based on the one currently in the docs.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Stanislav Malyshev (stas) on 2009-06-17T15:31:32.000+0000</p> 
        <div class="body">
            <p>thanks, I've changes the docs</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Kevin (kevin.p) on 2010-05-27T01:38:02.000+0000</p> 
        <div class="body">
            <p>Hi!
The issue still exists, the docu was never updated</p>

<p>The lines 12-14 say:
echo "</p>

";
echo $captcha-&gt;render($view);
echo "

<p>";</p>

<p>But they lack the most important info:</p>

<p><br /></p>

<p>The full example for the form is then:</p>

<p>echo "</p>

";
echo $captcha-&gt;render($view);
echo '';
echo '';
echo "

<p>";</p>

<p>Please update the documentation, it took me two hours yesterday to figure that out.</p>

        </div>
    </div>
    </div>

