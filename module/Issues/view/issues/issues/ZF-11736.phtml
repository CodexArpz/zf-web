<h2>ZF-11736: Warning and incorrect url generation in the Url view helper when using an array of values and a route. </h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2011-09-13T02:43:31.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2011-09-13T02:43:31.000+0000</dd>

    <dt>Status:</dt>
    <dd>Open</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Ben Scholzen (dasprid)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Controller_Router</li>
            <li>Zend_View</li>
            <li>Zend_Controller_Router_Route</li>
            <li>Zend_View_Helper_Url</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>When calling the URL view helper with a parameter that is an array of values
the default route is handling the data properly,
but a warning is raised and an incorrect URL is built if using a router.</p>

<p>See the following example:</p>

<p>$front = Zend_Controller_Front::getInstance();
$front-&gt;getRouter()-&gt;addRoute(
    'simpleroute',
    new Zend_Controller_Router_Route('test/*', array()));
echo $this-&gt;view-&gt;url(array('param' =&gt; 1), 'default');
echo $this-&gt;view-&gt;url(array('param' =&gt; array(1, 2, 3)), 'default');
echo $this-&gt;view-&gt;url(array('param' =&gt; 1), 'simpleroute');
echo $this-&gt;view-&gt;url(array('param' =&gt; array(1, 2, 3)), 'simpleroute');</p>

<p>Result is:
.../index/index/param/1/lang/en
.../index/index/param/1/param/2/param/3/lang/en
.../test/param/1/lang/en
Warning: urlencode() expects parameter 1 to be string, array given in [...]/Zend/Controller/Router/Route.php on line 403 .../test/param//lang/en</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>
    <p class="comments">No comments to display</p>
    
</div>

