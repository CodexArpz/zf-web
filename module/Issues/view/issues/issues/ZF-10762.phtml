<h2>ZF-10762: Bug when using addMonth(), year is not changed if the desired month is January but it is for Februari</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2010-12-01T05:54:03.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2010-12-04T23:07:25.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Antoine Gomez (antoineg)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Thomas Weidner (thomas)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Date</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>Hello,</p>

<p>Here is a problem with Zend_date and addMonth() :</p>

<p>$Zend_Date = Zend_Date::now();</p>

<p>Zend_Debug::dump($Zend_Date-&gt;toString('YYYY-MM-dd HH:mm:ss'));
$Zend_Date-&gt;addMonth(1);
Zend_Debug::dump($Zend_Date-&gt;toString('YYYY-MM-dd HH:mm:ss'));
$Zend_Date-&gt;addMonth(1);
Zend_Debug::dump($Zend_Date-&gt;toString('YYYY-MM-dd HH:mm:ss'));</p>

<p>Output :</p>

<p>string(19) "2010-12-01 14:51:43"
string(19) "2010-01-01 14:51:43"
string(19) "2011-02-01 14:51:43"</p>

<p>So when we are in December and add 1 month it roll back to January the same year and if we add a second month it goes Februari the next year.</p>

<p>I already red an issue with addMonth() and the answer was it was not an issue. In this case I think there is an issue.
Because I have no time to wait, I need this for a production e-commerce, I will upgrade my Zend Framework version and hoping this will be patched.</p>

<p>Regards</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Antoine Gomez (antoineg) on 2010-12-01T06:19:51.000+0000</p> 
        <div class="body">
            <p>After some other tests :</p>

<p>addDay(31) do the same.</p>

<p>It seems to be fine when we are on the 3rd December. Same error for 2nd.</p>

<p>So :</p>

<p>addDay(33) works or
addDay(2) and addMonth(1)</p>

<p>We are in 2011.</p>

<p>If I replace YYYY with yyyy it is working for 1st and 2nd December.
What's the difference between these constants ?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Thomas Weidner (thomas) on 2010-12-04T23:03:54.000+0000</p> 
        <div class="body">
            <p>According to the manual and the FAQ "YYYY" is the Calendar (ISO) Year and "yyyy" the real year.
Look at the end or the beginning of your calendar to see the difference.</p>

<p>Btw:
When you want to debug a date it's always necessary to use getIso() which also outputs the used timezone and to give the used locale.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Thomas Weidner (thomas) on 2010-12-04T23:07:25.000+0000</p> 
        <div class="body">
            <p>Closing as non issue.
Please see manual and FAQ or wait for ZF 2.0.</p>

        </div>
    </div>
    </div>

