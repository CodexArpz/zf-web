<h2>ZF-5010: Zend_Validate_EmailAddress fails to reject certain invalid email addresses</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2008-11-20T10:08:18.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2008-12-21T06:39:27.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.7.2 (23/Dec/08)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Thomas Weidner (thomas)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Validate</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>According to RFC 2822 (Section 3.2.4) - [<a href="http://www.ietf.org/rfc/rfc2822.txt">http://www.ietf.org/rfc/rfc2822.txt</a>],
The local part of an e-mail address may consist of alphabetic and numeric characters, and the following characters: !, #, $, %, &amp;, ', *, +, -, /, =, ?, ^, _, `, {, |, } and ~, possibly with dot separators (.), inside, but not at the start, end or next to another dot separator:
{quote}dot-atom-text   =       1<em>atext *("." 1</em>atext){quote}</p>

<p>The expression used in Zend_Validate_EmailAddress misses the "next to another dot separator" part.  For example, the following e-mail address validates:</p>

<p>Abc..123@example.com</p>

<p>Further, according to RFC 2821 (Section 4.5.3.1) - [<a href="http://www.ietf.org/rfc/rfc2821.txt">http://www.ietf.org/rfc/rfc2821.txt</a>],
{quote}The maximum total length of a user name or other local-part is 64 characters.{quote}</p>

<p>An email address with 65 characters in the local part validates.</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Thomas Weidner (thomas) on 2008-12-08T12:22:49.000+0000</p> 
        <div class="body">
            <p>The second is no longer true.</p>

<p>Email addresses with more than 64 chars in the local part and more then 255 chars in the hostname part are no longer valid.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Thomas Weidner (thomas) on 2008-12-14T12:30:18.000+0000</p> 
        <div class="body">
            <p>Fixed with r13253</p>

        </div>
    </div>
    </div>

