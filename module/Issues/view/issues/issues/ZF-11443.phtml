<h2>ZF-11443: Zend_Controller_Router_Route_Chain does not implement getDefault and getDefaults</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Improvement</dd>

    <dt>Created:</dt>
    <dd>2011-06-05T11:53:37.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2013-02-06T09:56:41.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.12.2 (25/Feb/13)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Frank Brückner (frosch)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Controller_Router</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
        <li><a href="/issues/browse/ZF-11545">ZF-11545</a></li>
            <li><a href="/issues/browse/ZF-11442">ZF-11442</a></li>
            <li><a href="/issues/browse/ZF-6823">ZF-6823</a></li>
        </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>Zend_Controller_Router_Route_Chain does not implement getDefault and getDefaults.
All other shipped Route implementations provide this, and I see no reason for not providing these on Chain as well.</p>

<p>Note: getDefault and getDefaults are not required by Zend_Controller_Router_Route_Interface.</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Môshe van der Sterre (môshevds) on 2011-06-05T13:32:44.000+0000</p> 
        <div class="body">
            <p>See also: <a href="http://pastie.org/2022410">http://pastie.org/2022410</a></p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Kai Uwe (kaiuwe) on 2011-06-05T21:47:39.000+0000</p> 
        <div class="body">
            <p>There are two mistakes in your code:
* Coding style: <a href="http://framework.zend.com/manual/en/coding-standard.coding-style.html#coding-standard.coding-style.functions-and-methods">"As with classes, the brace should always be written on the line underneath the function name."</a> ("getDefault" and "getDefaults")
* In the method "getDefault" the variable "$default" is undefined</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Môshe van der Sterre (môshevds) on 2011-06-06T00:51:25.000+0000</p> 
        <div class="body">
            <p>You are right about the potentially undefined variable, thanks.
The style is also wrong in the other Route implementations, that is where I copy-pasted the line from.</p>

<p>At first I implemented the function to return the default from the least specific (first added/first matching) route. I changed that to most specific at the last moment (to match the behaviour of the Chain), hence the missing $default definition.</p>

<p>The <a href="http://framework.zend.com/manual/en/zend.controller.router.html#zend.controller.router.routes.chain">documentation</a> notes the parameter priority as 'the outer route has the higher priority'. I'm not sure how to interpret that in combination with the actual behaviour, maybe it is an documentation error.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Frank Brückner (frosch) on 2011-09-07T17:45:04.000+0000</p> 
        <div class="body">
            <p>Fix and unit test from Môshe tested and added.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Adam Lundrigan (adamlundrigan) on 2011-12-01T12:03:52.000+0000</p> 
        <div class="body">
            <p>@[~môshevds]:
You will need to sign and submit a CLA before we can apply your suggested improvement.
See here: <a href="http://framework.zend.com/wiki/display/ZFPROP/Contributor+License+Agreement">http://framework.zend.com/wiki/display/…</a></p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Frank Brückner (frosch) on 2012-03-21T21:16:13.000+0000</p> 
        <div class="body">
            <p>Can we add the patch to version 1.12?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Frank Brückner (frosch) on 2013-02-06T09:56:41.000+0000</p> 
        <div class="body">
            <p>Fixed on trunk (25248) and release-1.12 (25249)</p>

<p>(I deleted the patches from Môshe and written a new implementation.)</p>

        </div>
    </div>
    </div>

