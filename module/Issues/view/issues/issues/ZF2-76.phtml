<h2>ZF2-76: Zend\View\Helper\Partial clears variables in the view if cloned from</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2011-10-07T11:12:41.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2011-12-23T00:54:14.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
                mario (mario)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Ralph Schindler (ralph)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend\View</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>Page is setup
layout
-&gt;render('header.phtml')
-&gt;content
-&gt;render('footer.phtml')</p>

<p>content
-&gt;partial('table.phtml, $data)</p>

<p>When this renders view assigned variables will no longer be available in header.phtml or anywhere else, removing the call to partial will keep everything in tact. Further removing $view-&gt;vars()-&gt;clear(); from Zend\View\Helper\Partial will keep everything in tact. Obviously it's supposed to remove the variables from the cloned view and only give access to the passed variables, however it appears like it clears also the variables in the view object it originally cloned.</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by mario (mario) on 2011-10-07T11:21:24.000+0000</p> 
        <div class="body">
            <p>Replacing 
$view-&gt;vars()-&gt;clear();
with
$view-&gt;setVars(new \Zend\View\Variables());
seems to work as expected.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Michiel Staessen (mstaessen) on 2011-12-22T22:03:16.000+0000</p> 
        <div class="body">
            <p>Whe had this issue and sent this PR for it (<a href="https://github.com/zendframework/zf2/pull/577">https://github.com/zendframework/zf2/pull/577</a>).</p>

<p>This issue is probably already fixed.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Evan Coury (evan.pro) on 2011-12-23T00:54:14.000+0000</p> 
        <div class="body">
            <p>Confirmed that this has been resolved.</p>

        </div>
    </div>
    </div>

