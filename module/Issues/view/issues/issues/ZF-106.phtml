<h2>ZF-106: PHP allowed memory exhausted fatal error (TRAC#112)</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2006-06-21T21:55:42.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2007-07-05T14:43:09.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>0.7.0 (18/Jan/07)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Zend Framework (zend_framework)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Alexander Veremyev (alexander)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Search_Lucene</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
        <li><a href="/issues/browse/ZF-88">ZF-88</a></li>
        </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p><a href="http://framework.zend.com/developer/ticket/112">http://framework.zend.com/developer/ticket/112</a></p>

<p>In playing around with the Lucene_Search tool, I ran into a PHP Fatal error when trying to load large amounts of data (actually, not all that much data, but around 200,000 varchar(100) text fields): PHP FATAL ERROR: Allowed memory size of 104857600 bytes exhausted (tried to allocated 119 bytes) in Zend/Search/Lucene/Analysis/Analyzer/Common/Text.php on line 65. and PHP FATAL ERROR: Allowed memory size of 104857600 bytes exhausted (tried to allocated 64 bytes) in Zend/Search/Lucene/Index/SegmentWriter.php on line 480.</p>

<p>I am curios if there are any known restrictions on the amount of data you can use when building the Lucene search documents?</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Zend Framework (zend_framework) on 2006-06-21T21:56:10.000+0000</p> 
        <div class="body">
            <p>06/03/06 14:49:59: Modified by jefftulsa@gmail.com</p>

<p>Actually, this is just a limitation on the memory of my box for building a large index. So, it looks like I will have to create multiple segments to achive my needs. On the Lucene site, it indicates there should be an ImageWriter-&gt;optimize() function to help optimze indexes, yet if I call this on the Zend_Search_Lucene object, it appears as if this is not a valid method. Is this scheduled to be ported over?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Jayson Minard (jayson) on 2006-07-09T00:40:34.000+0000</p> 
        <div class="body">
            <p>another one of the memory related issues, assign to the version where you think these will be fixed.  I put it in 0.3.0 as a placeholder.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Elisamuel Resto (user00265) on 2006-07-30T21:58:13.000+0000</p> 
        <div class="body">
            <p>This was the same ticket from <a href="http://framework.zend.com/issues/browse/ZF-88">ZF-88</a> that was ported over by the Alexander Veremyev, aparently this was ported over after that, closing duplicate.</p>

        </div>
    </div>
    </div>

