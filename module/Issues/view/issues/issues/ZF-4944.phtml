<h2>ZF-4944: Problem of Zend_Date::addDay</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2008-11-14T01:40:45.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2008-11-14T02:20:11.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Thomas Weidner (thomas)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Date</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>I found a problem of Zend_Date:</p>

<p>[code]
&lt;?php
require_once 'Zend/Date.php';</p>

<p>date_default_timezone_set('Asia/Taipei');</p>

<p>$today = new Zend_Date();
$today-&gt;setDate('2008-11-21');</p>

<p>$expireDateTime = clone $today;
$expireDateTime-&gt;addDay(40);</p>

<p>echo $expireDateTime-&gt;toString('YYYY-MM-dd');</p>

<p>// expect : 2008-12-31
// actual : 2009-12-31
[/code]</p>

<p>When I used addDay method to add $today to year 2001~2008, month 12, and day 29~31, the year would be wrong.</p>

<p>For Example:</p>

<p>2008-11-09 + 50(days) = 2009-12-29 (wrong)
2008-11-01 + 50(days) = 2008-12-21 (right)
2007-11-21 + 40(days) = 2008-12-31 (wrong)
2007-11-11 + 50(days) = 2008-12-31 (wrong)
2009-11-11 + 50(days) = 2009-12-31 (right)
2009-11-21 + 40(days) = 2008-12-31 (right)
2000-11-21 + 40(days) = 2000-12-31 (right)
2001-11-21 + 40(days) = 2002-12-31 (wrong)
...</p>

<p>Is this a bug? Or missing out something?</p>

<p>Please forget my poor english.</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Jace Ju (jaceju) on 2008-11-14T02:12:39.000+0000</p> 
        <div class="body">
            <p>Sorry, this is my bad.</p>

<p>Please see <a href="http://www.nabble.com/Re%3A-Problem-of-Zend_Date%3A%3AaddDay-p20497421.html">http://nabble.com/Re%3A-Problem-of-Zend_Date%3A%3Aâ€¦</a></p>

        </div>
    </div>
    </div>

