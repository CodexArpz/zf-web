<h2>ZF-5708: Zend_Http_Client does not have method to clean headers</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Improvement</dd>

    <dt>Created:</dt>
    <dd>2009-02-06T10:15:50.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2009-11-24T16:51:37.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.10.0 (27/Jan/10)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                PÃ¡draic Brady (padraic)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Http_Client</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>Currently, there's no method that would reset the state of Zend_Http_Client , particularly that would clean all headers. While one can set and clean specific headers with setHeaders() and reset some state parts with resetParams(), full reset is impossible. This makes it very hard to reuse same client with same settings for multiple requests, and since many classes in Zend_Service_* still do so, it leads to various bugs.</p>

<p>We need to add either cleanup method or make resetParams() clean all headers, or have setHeaders somehow extended to clean all headers except for those set.</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Till Klampaeckel (till) on 2009-02-24T07:24:44.000+0000</p> 
        <div class="body">
            <p>This other method should probably clear last_request and last_response as well, or what are you after? Would you also clear the entire "configuration" (e.g. uri, method, proxy, ...)?</p>

<p>I could do a patch if you gave me some feedback.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Stanislav Malyshev (stas) on 2009-11-24T16:51:36.000+0000</p> 
        <div class="body">
            <p>Fixed - now resetParameters(true) will reset headers and last_*</p>

        </div>
    </div>
    </div>

