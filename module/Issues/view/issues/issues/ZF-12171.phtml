<h2>ZF-12171: My batch stops without error and exception only when i launch it with crontab</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2012-04-25T16:04:24.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2012-04-25T18:06:27.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Ryan Mauger (bittarman)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Http_Client</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>Hello,</p>

<p>I have a very strange problem with my batch. It works perfectly when i launch it manually but it stops without any notice, error or exception in the "foreach" when i launch the batch by crontab (i am on Ubuntu).</p>

<p>Algo of my batch:
1째) Get a list of uri from database (Mysql)
2째) Foreach on the uris:
   2.1째) Download the file (pdf) from the URI (i use Zend_Http_Client to download the file)
   2.2째) Insert the pdf file in the database (in binary)</p>

<p>I have try to comment the lines where i download the file (the lines with Zend_Http_Client) and i have no more problem with the foreach. So, i think that the problem is cause by the composant Zend_Http_Client.</p>

<p>//Initialisation
        $this-&gt;_httpClient = new Zend_Http_Client();</p>

<pre><code>    $config = array('maxredirects'    =&gt; 5,
                    'timeout' =&gt; 10, 
                    'strictredirects' =&gt; false,
                    'useragent'       =&gt; 'Zend_Http_Client',
                    'keepalive'       =&gt; false);
    $this-&gt;_httpClient-&gt;setConfig($config)
</code></pre>

<p>// the request in the foreach
        $this-&gt;_httpClient-&gt;setUri($uri);
        $response = $this-&gt;_httpClient-&gt;request('GET');</p>

<p>Thank you for help and sorry for my very bad english!</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Ryan Mauger (bittarman) on 2012-04-25T18:06:27.000+0000</p> 
        <div class="body">
            <p>I'm closing this as an incomplete because of the lack of an error message.</p>

<p>Please re-run your script, setting error_reporting to -1, and display_errors on, so that any errors are caught (and rule out things like timeouts, out of memory etc)</p>

<p>If you have an error message after that, which relates to Zend_Http_Client, please re-open, and add further information.</p>

        </div>
    </div>
    </div>

