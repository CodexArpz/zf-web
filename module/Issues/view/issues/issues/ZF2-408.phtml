<h2>ZF2-408: Segment route bug</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2012-07-18T22:51:00.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2012-10-08T20:16:36.000+0000</dd>

    <dt>Status:</dt>
    <dd>Closed</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
                David Windell (outeredge)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Ben Scholzen (dasprid)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend\Mvc\Router</li>
            <li>routing</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
        <li><a href="/issues/browse/ZF2-407">ZF2-407</a></li>
            <li><a href="/issues/browse/ZF2-437">ZF2-437</a></li>
        </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>We have this Segment route configured;</p>

<pre class="highlight"><code> 
/contact[/:action[/:mode]][/page/:page]
</code></pre>

<p>Which works OK for:</p>

<pre class="highlight"><code>
but NOT for: </code></pre>

<p>I assume this is a bug in the Segment route?</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Ben Scholzen (dasprid) on 2012-07-19T11:16:44.000+0000</p> 
        <div class="body">
            <p>Could you please be more specific than just "doesn't work"?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by David Windell (outeredge) on 2012-07-19T11:37:00.000+0000</p> 
        <div class="body">
            <p>Sorry, it results in a 404 Error (The requested controller was unable to dispatch the request.)</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Ben Scholzen (dasprid) on 2012-07-19T13:06:46.000+0000</p> 
        <div class="body">
            <p>Could you please post the complete route definition, including options?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by David Windell (outeredge) on 2012-07-19T13:15:24.000+0000</p> 
        <div class="body">
            <pre class="highlight"><code>
                 'child_routes' =&gt; array(
                    'admin' =&gt; array(
                        'type' =&gt; 'Literal',
                        'options' =&gt; array(
                            'route'    =&gt; '/admin',
                            'defaults' =&gt; array(
                                'controller' =&gt; 'Application\Controller\AdminController',
                                'action'    =&gt; 'index'
                            ),
                        ),
                        'may_terminate' =&gt; true,
                        'child_routes' =&gt; array(
                            'contact' =&gt; array(
                                'type' =&gt; 'Segment',
                                'options' =&gt; array(
                                    'route'    =&gt; '/contact[/:action[/:mode]][/page/:page]',
                                    'constraints' =&gt; array(
                                        'mode' =&gt; 'all',
                                        'id' =&gt; '[1-9][0-9]*',
                                        'page' =&gt; '[1-9][0-9]*',
                                    ),
                                    'defaults' =&gt; array(
                                        'controller' =&gt; 'Application\Controller\ContactController',
                                        'action'     =&gt; 'list',
                                    ),
                                ),
                            ),
</code></pre>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Ben Scholzen (dasprid) on 2012-07-19T13:22:16.000+0000</p> 
        <div class="body">
            <p>I seeâ€¦ I think I know where this bug comes from (it is already reported). Will look into it somewhen around this week.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Ralph Schindler (ralph) on 2012-10-08T20:16:36.000+0000</p> 
        <div class="body">
            <p>This issue has been closed on Jira and moved to GitHub for issue tracking.  To continue following the resolution of this issues, please visit: <a href="https://github.com/zendframework/zf2/issues/2504">https://github.com/zendframework/zf2/issues/2504</a></p>

        </div>
    </div>
    </div>

