<h2>ZF-6409: Amf server fails with Exception &quot;Duplicate method registered:&quot;</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2009-04-24T05:05:48.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2011-05-24T02:38:48.000+0000</dd>

    <dt>Status:</dt>
    <dd>Open</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Wade Arnold (wadearnold)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Amf</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
        <li><a href="/issues/secure/attachment/11926/ZF-6409.tar.gz">ZF-6409.tar.gz</a></li>
        </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>The Amf_Server throws an Exception with Message "Duplicate method registered:" in Zend_Amf_Server line 595</p>

<p>This happens, if a AMF request contains at least two bodies, where the first body calls ClassA::funcA and the second calls a nonexistent method of the same class eg. ClassA::nonexistentFunc .
The Exception is misleading and something like "Function xy is not defined" should be thrown.</p>

<p>Regards
Stefan</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Wade Arnold (wadearnold) on 2009-05-11T20:54:17.000+0000</p> 
        <div class="body">
            <p>Can you please supply sample code for this issue. I can not reproduce it.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Stefan Klug (stefanklug) on 2009-05-13T10:56:04.000+0000</p> 
        <div class="body">
            <p>Testcase showing the problem</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Stefan Klug (stefanklug) on 2009-05-13T11:03:01.000+0000</p> 
        <div class="body">
            <p>I've attached a testcase, showing the problem.
You'll have to adjust the path to the ZendFramework in amfgateway.php to get it to run. Then simply open test.swf in a webbrowser and hit the button TWO times.
I had to hit the exute button twice, to get flash to send the two requests in one AMF Message.
A charles log of my session is also in the archive.
The last amf request is the one with the wrong exception message.</p>

<p>BTW. Is there any infrastructure available to easy developing of such small testcases? In the Zend Unittests I've only found tests based on recorded amf messages, but no mxlm...</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Sean Thayne (seant23) on 2011-05-24T02:38:48.000+0000</p> 
        <div class="body">
            <p>Had this same issue affect me today.</p>

        </div>
    </div>
    </div>

