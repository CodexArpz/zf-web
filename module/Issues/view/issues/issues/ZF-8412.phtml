<h2>ZF-8412: Unhelpful error message if configuration is wrong</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Improvement</dd>

    <dt>Created:</dt>
    <dd>2009-11-27T19:56:49.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2011-01-01T07:26:37.000+0000</dd>

    <dt>Status:</dt>
    <dd>Open</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Stanislav Malyshev (stas)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Matthew Weier O'Phinney (matthew)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Application</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
        <li><a href="/issues/secure/attachment/13472/ZF-8412-unittest-rtuin.patch">ZF-8412-unittest-rtuin.patch</a></li>
        </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>If I put in application.ini (generated by standard zf create project) the following line:</p>

<p>resources.frontcontroller.blah = 1</p>

<p>(note the lowercase 'c' in frontcontroller) then I get this error:</p>

<p>PHP Fatal error:  Uncaught exception 'Zend_Application_Bootstrap_Exception' with message 'No default controller directory registered with front controller' in C:\Projects\framework\library\Zend\Application\Bootstrap\Bootstrap.php:71
Stack trace:</p>

<h1>0 C:\Projects\framework\library\Zend\Application.php(366): Zend_Application_Bootstrap_Bootstrap-&gt;run()</h1>

<p>Now, I understand this is probably caused by some problem parsing configuration that can't be properly displayed - however it would be much nicer if I could get it from the error message, since "No default controller directory" give little hint what is really wrong there.</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Matthew Weier O'Phinney (matthew) on 2009-11-28T06:15:05.000+0000</p> 
        <div class="body">
            <p>Options that the FrontController resource doesn't understand are simply ignored, and no error messages raised. What you're encountering is spelled out in the error message: you haven't specified any controller directories in your configuration.</p>

<p>We could update the documentation for the FrontController bootstrap resource to indicate that you must minimally have the following:</p>

<pre class="highlight"><code>
resources.frontcontroller.controllerDirectory = APPLICATION_PATH "/controllers"
</code></pre>

<p>Would that solve the issue for you? (BTW, Zend_Tool sets this for you when you create a project...)</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Stanislav Malyshev (stas) on 2009-11-28T19:41:13.000+0000</p> 
        <div class="body">
            <p>No, that's not right. The directive you quoted IS present in the config file. Also, as I noted, everything works just fine if I remove the "bad" directive - so, obviously, FC has everything it needs for normal function in the .ini file, absent the "bad" directive.</p>

<p>The error apprears ONLY when the bad directive is ADDED to otherwise working setup.</p>

<p>And yes, I used Zend_Tool to generate it, as I noted (zf create project).</p>

<p>Another thing - if I use frontController in the name (with capital C) the "blah" directive just does nothing and only case where error appears is if I write frontcontroller with lowercase 'c'.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Richard Tuin (richardtuin) on 2010-11-20T06:09:07.000+0000</p> 
        <div class="body">
            <p>Added a Unit Test to prove this is not an issue in the current revision.</p>

<p>I hope this helps resolving this issue.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Ramon Henrique Ornelas (ramon) on 2011-01-01T07:26:35.000+0000</p> 
        <div class="body">
            <p>@rtuin
The problem mentioned by @stas is this.</p>

<pre class="highlight"><code>
resources.frontController.controllerDirectory = "/var/www/test/controllers"
resources.frontcontroller.blah = 1
</code></pre>

<p>In this case should be done merged of arrays, before of the called Zend_Application_Bootstrap_BootstrapAbstract::registerPluginResource() line 142.</p>

<p>Greetings
Ramon</p>

        </div>
    </div>
    </div>

