<h2>ZF-4293: Zend_Controller_Request_Http getQuery should not look directly at the $_GET superglobal</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2008-09-15T03:30:01.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2010-06-30T07:06:26.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Matthew Weier O'Phinney (matthew)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Controller</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>The getQuery method in Zend_Controller_Request_Http is looking at the $_GET global which is not set with any get parameters because of the URL format</p>

<p>Take the url:</p>

<p>/controller/action/param/value</p>

<p>if you print_r($request-&gt;getQuery()) it outputs Array ( )</p>

<p>If you change the url to:</p>

<p>/controller/action?param=value the output is Array ( [param] =&gt; value )</p>

<p>Either the $_GET superglobal needs to be set with values by the route or this method needs to look at another source for the get string.  I would suggest that seeing as you could write the controller to have any form of url that the logic needs to go somewhere around there.</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Chris (bjelleklang) on 2010-06-30T05:09:47.000+0000</p> 
        <div class="body">
            <p>This also applies to 1.10. Very frustrating if you're new to the framework (like myself).</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthew Weier O'Phinney (matthew) on 2010-06-30T07:06:24.000+0000</p> 
        <div class="body">
            <p>getQuery() is used to retrieve values set in the query string portion of the URL -- everything after a "?", and populated in $_GET.</p>

<p>The parameters you would like getQuery() to return are not part of the query string; they are part of the path. We will not alter getQuery() to retrieve them. They are artifacts generated by routing, which takes the path information and transforms it into request parameters; these parameters are considered "local" or "user" parameters. Both the getParam() and getUserParam() methods will already retrieve them.</p>

        </div>
    </div>
    </div>

