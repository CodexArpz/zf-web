<h2>ZF-11860: Zend_Form -&gt; Zend_Form_SubForm -&gt; Zend_Form_Element::setBelongsTo - Zend_Form loses one array notation if element in subform belongs to an array</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2011-10-28T15:56:23.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2011-10-28T17:40:19.000+0000</dd>

    <dt>Status:</dt>
    <dd>Open</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Joni Järvinen (johnny@jonijarvinen.com)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Christian Albrecht (alab)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Form</li>
            <li>setBelongsTo</li>
            <li>zend_form</li>
            <li>zend_form_element</li>
            <li>zend_form_subform</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>I came across an annoying bug in Zend Framework and have been trying to find an answer through several forums.</p>

<p>The problem is that when I have a form and add a subform in it and add subform into that form and then add an element into the last subform which belongs to an array; Zend_Form loses one array from the middle.</p>

<pre class="highlight"><code>
$form = new Zend_Form();

$subForm1 = new Zend_Form_SubForm();

$subForm2 = new Zend_Form_SubForm();

$element = new \Zend_Form_Element_Text('textElement');
$element-&gt;setBelongsTo('textThingsInArray');

$subForm2-&gt;addElement($element);

$subForm1-&gt;addSubForm($subForm2, 'subForm2');
$form-&gt;addSubForm($subForm1, 'subForm1');

echo $form-&gt;render();
</code></pre>

<pre class="highlight"><code>
</code></pre>

<pre class="highlight"><code>
</code></pre>

<p>If this is intentional it's totally wrong in my opinion; If elements in the subform belong to an array it doesn't mean that an element could not belong to some array itself and the elements array would then belong to the subforms belongsto array.</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Frank Brückner (frosch) on 2011-10-28T17:40:19.000+0000</p> 
        <div class="body">
            <p>Code tags added.</p>

        </div>
    </div>
    </div>

