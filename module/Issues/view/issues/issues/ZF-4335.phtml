<h2>ZF-4335: Route_Regex::assemble ignoring $encode</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2008-09-20T01:04:46.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2008-11-13T14:10:19.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.7.0 (17/Nov/08)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Paul Tomlin (ptomli)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Felix De Vliegher (felixdv)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Controller</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>When using assemble with the regex router, parameters are not encoded when the $encode param to assemble is true. $encode is not referenced at all in assemble. I've not been able to tell if this is intentional or not, so presuming it's a bug.</p>

<p>Patch:</p>

<h1>Index: library/Zend/Controller/Router/Route/Regex.php</h1>

<p>--- library/Zend/Controller/Router/Route/Regex.php  (revision 11434)
+++ library/Zend/Controller/Router/Route/Regex.php  (working copy)
@@ -169,6 +169,12 @@
         $mergedData = $this-&gt;_arrayMergeNumericKeys($mergedData, $matchedValuesMapped);
         $mergedData = $this-&gt;_arrayMergeNumericKeys($mergedData, $dataValuesMapped);</p>

<ul><li>if ($encode) {</li>
<li>foreach ($mergedData as $key =&gt; &amp;$value) {</li>
<li>$value = urlencode($value);</li>
<li>}</li>
<li>}</li>
<li><pre><code> ksort($mergedData);

 $return = @vsprintf($this-&gt;_reverse, $mergedData);
</code></pre></li>
</ul>
    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Felix De Vliegher (felixdv) on 2008-11-08T07:35:32.000+0000</p> 
        <div class="body">
            <p>Fixed in revision 12434.
ZF-4335: (felixdv) Route_Regex::assemble() is ignoring $encode.</p>

<p>Thanks for reporting this bug!</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Wil Sinclair (wil) on 2008-11-13T14:10:19.000+0000</p> 
        <div class="body">
            <p>Changing issues in preparation for the 1.7.0 release.</p>

        </div>
    </div>
    </div>

