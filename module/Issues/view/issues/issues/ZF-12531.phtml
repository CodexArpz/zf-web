<h2>ZF-12531: Zend_Validate_Iban is missing a lot of countries</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2013-02-27T19:19:40.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2013-03-12T14:36:24.000+0000</dd>

    <dt>Status:</dt>
    <dd>In Progress</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Simon Stücher (billomat)
            </dd>

    <dt>Assignee:</dt>
    <dd>
        None
                    </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Validate</li>
            <li>iban</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
        <li><a href="/issues/secure/attachment/15320/Validate.diff">Validate.diff</a></li>
        </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>Zend_Validate_Iban only implements regexes for 39 countries, but there are 62. The remaining 23 countries should also be implemented.</p>

<p>See <a href="http://www.swift.com/dsp/resources/documents/IBAN_Registry.pdf">http://swift.com/dsp/resources/…</a></p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Markus Möller (derlangemarkus) on 2013-02-28T07:07:40.000+0000</p> 
        <div class="body">
            <p>Unfortunately I didn't find a way to submit a bugfix yet.</p>

<p>Just replace the $_ibanregex in Zend_Validate_Iban with these lines:</p>

<pre><code>protected $_ibanregex = array(
    'AD' =&gt; '/^AD[0-9]{2}[0-9]{8}[A-Z0-9]{12}$/',
    'AE' =&gt; '/^AE[0-9]{2}[0-9]{3}[0-9]{16}$/',
    'AL' =&gt; '/^AL[0-9]{2}[0-9]{8}[A-Z0-9]{16}$/',
    'AT' =&gt; '/^AT[0-9]{2}[0-9]{5}[0-9]{11}$/',
    'AZ' =&gt; '/^AZ[0-9]{2}[0-9]{4}[A-Z0-9]{20}$/',
    'BA' =&gt; '/^BA[0-9]{2}[0-9]{6}[0-9]{10}$/',
    'BE' =&gt; '/^BE[0-9]{2}[0-9]{3}[0-9]{9}$/',
    'BG' =&gt; '/^BG[0-9]{2}[A-Z]{4}[0-9]{4}[0-9]{2}[A-Z0-9]{8}$/',
    'BH' =&gt; '/^BH[0-9]{2}[A-Z]{4}[A-Z0-9]{14}$/',
    'BR' =&gt; '/^BR[0-9]{2}[0-9]{8}[0-9]{5}[0-9]{10}[A-Z]{1}[A-Z0-9]{1}$/',
    'CH' =&gt; '/^CH[0-9]{2}[0-9]{5}[A-Z0-9]{12}$/',
    'CR' =&gt; '/^CR[0-9]{2}[0-9]{3}[0-9]{14}$/',
    'CS' =&gt; '/^CS[0-9]{2}[0-9]{3}[0-9]{15}$/',
    'CY' =&gt; '/^CY[0-9]{2}[0-9]{8}[A-Z0-9]{16}$/',
    'CZ' =&gt; '/^CZ[0-9]{2}[0-9]{4}[0-9]{16}$/',
    'DE' =&gt; '/^DE[0-9]{2}[0-9]{8}[0-9]{10}$/',
    'DK' =&gt; '/^DK[0-9]{2}[0-9]{4}[0-9]{10}$/',
    'DO' =&gt; '/^DO[0-9]{2}[A-Z0-9]{4}[0-9]{20}$/',
    'EE' =&gt; '/^EE[0-9]{2}[0-9]{4}[0-9]{12}$/',
    'ES' =&gt; '/^ES[0-9]{2}[0-9]{8}[0-9]{12}$/',
    'FR' =&gt; '/^FR[0-9]{2}[0-9]{10}[A-Z0-9]{11}[0-9]{2}$/',
    'FI' =&gt; '/^FI[0-9]{2}[0-9]{6}[0-9]{8}$/',
    'FO' =&gt; '/^FO[0-9]{2}[0-9]{4}[0-9]{9}[0-9]{1}$/',
    'GB' =&gt; '/^GB[0-9]{2}[A-Z]{4}[0-9]{14}$/',
    'GE' =&gt; '/^GE[0-9]{2}[A-Z]{2}[0-9]{16}$/',
    'GI' =&gt; '/^GI[0-9]{2}[A-Z]{4}[A-Z0-9]{15}$/',
    'GL' =&gt; '/^GL[0-9]{2}[0-9]{4}[0-9]{9}[0-9]{1}$/',
    'GR' =&gt; '/^GR[0-9]{2}[0-9]{7}[A-Z0-9]{16}$/',
    'GT' =&gt; '/^GT[0-9]{2}[A-Z0-9]{4}[A-Z0-9]{20}$/',
    'HR' =&gt; '/^HR[0-9]{2}[0-9]{7}[0-9]{10}$/',
    'HU' =&gt; '/^HU[0-9]{2}[0-9]{7}[0-9]{1}[0-9]{15}[0-9]{1}$/',
    'IE' =&gt; '/^IE[0-9]{2}[A-Z0-9]{4}[0-9]{6}[0-9]{8}$/',
    'IL' =&gt; '/^IL[0-9]{2}[0-9]{3}[0-9]{3}[0-9]{13}$/',
    'IS' =&gt; '/^IS[0-9]{2}[0-9]{4}[0-9]{18}$/',
    'IT' =&gt; '/^IT[0-9]{2}[A-Z]{1}[0-9]{10}[A-Z0-9]{12}$/',
    'KW' =&gt; '/^KW[0-9]{2}[A-Z]{4}[0-9]{3}[0-9]{22}$/',
    'KZ' =&gt; '/^KZ[A-Z]{2}[0-9]{2}[0-9]{3}[A-Z0-9]{13}$/',
    'LB' =&gt; '/^LB[0-9]{2}[0-9]{4}[A-Z0-9]{20}$/',
    'LI' =&gt; '/^LI[0-9]{2}[0-9]{5}[A-Z0-9]{12}$/',
    'LU' =&gt; '/^LU[0-9]{2}[0-9]{3}[A-Z0-9]{13}$/',
    'LT' =&gt; '/^LT[0-9]{2}[0-9]{5}[0-9]{11}$/',
    'LV' =&gt; '/^LV[0-9]{2}[A-Z]{4}[A-Z0-9]{13}$/',
    'MC' =&gt; '/^MC[0-9]{2}[0-9]{5}[0-9]{5}[A-Z0-9]{11}[0-9]{2}$/',
    'MD' =&gt; '/^MD[0-9]{2}[A-Z0-9]{20}$/',
    'ME' =&gt; '/^ME[0-9]{2}[0-9]{3}[0-9]{13}[0-9]{2}$/',
    'MK' =&gt; '/^MK[0-9]{2}[A-Z]{3}[A-Z0-9]{10}[0-9]{2}$/',
    'MR' =&gt; '/^MR13[0-9]{5}[0-9]{5}[0-9]{11}[0-9]{2}$/',
    'MU' =&gt; '/^MU[0-9]{2}[A-Z]{4}[0-9]{2}[0-9]{2}[0-9]{12}[0-9]{3}[A-Z]{2}$/',
    'MT' =&gt; '/^MT[0-9]{2}[A-Z]{4}[0-9]{5}[A-Z0-9]{18}$/',
    'NL' =&gt; '/^NL[0-9]{2}[A-Z]{4}[0-9]{10}$/',
    'NO' =&gt; '/^NO[0-9]{2}[0-9]{4}[0-9]{7}$/',
    'PK' =&gt; '/^PK[0-9]{2}[A-Z]{4}[0-9]{16}$/',
    'PL' =&gt; '/^PL[0-9]{2}[0-9]{8}[0-9]{16}$/',
    'PS' =&gt; '/^PS[0-9]{2}[A-Z]{4}[0-9]{21}$/',
    'PT' =&gt; '/^PT[0-9]{2}[0-9]{8}[0-9]{13}$/',
    'RO' =&gt; '/^RO[0-9]{2}[A-Z]{4}[A-Z0-9]{16}$/',
    'RS' =&gt; '/^RS[0-9]{2}[0-9]{3}[0-9]{13}[0-9]{2}$/',
    'SA' =&gt; '/^SA[0-9]{2}[0-9]{2}[A-Z0-9]{18}$/',
    'SE' =&gt; '/^SE[0-9]{2}[0-9]{3}[0-9]{17}$/',
    'SI' =&gt; '/^SI[0-9]{2}[0-9]{5}[0-9]{8}[0-9]{2}$/',
    'SK' =&gt; '/^SK[0-9]{2}[0-9]{4}[0-9]{16}$/',
    'SM' =&gt; '/^SM[0-9]{2}[A-Z]{1}[0-9]{5}[0-9]{5}[A-Z0-9]{12}$/',
    'TN' =&gt; '/^TN[0-9]{2}[0-9]{5}[0-9]{15}$/',
    'TR' =&gt; '/^TR[0-9]{2}[0-9]{5}[A-Z0-9]{17}$/',
    'VG' =&gt; '/^VG[0-9]{2}[A-Z]{4}[0-9]{16}$/'
);
</code></pre>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Simon Stücher (billomat) on 2013-03-12T13:58:08.000+0000</p> 
        <div class="body">
            <p>Patch attached.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Simon Stücher (billomat) on 2013-03-12T14:07:15.000+0000</p> 
        <div class="body">
            <p>Not quite shure if I can commit the patch by myself and how the workflow is.
Seems that Thomas is responsible for the Validate Component. Can you manage this?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Frank Brückner (frosch) on 2013-03-12T14:36:24.000+0000</p> 
        <div class="body">
            <p>@[~billomat]
Thomas no longer works for the ZF project.</p>

        </div>
    </div>
    </div>

