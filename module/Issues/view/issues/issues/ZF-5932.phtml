<h2>ZF-5932: $event-&gt;when looks for an array, not a string</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Docs:  Problem</dd>

    <dt>Created:</dt>
    <dd>2009-03-03T14:15:40.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2009-03-04T17:29:15.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.7.7 (16/Mar/09)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Zachary Burnham (zburnham)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Trevor Johns (tjohns)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Gdata</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
        <li><a href="/issues/secure/attachment/11781/zf-5932.patch">zf-5932.patch</a></li>
        </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>The setWhen method of Zend_Gdata_Kind_EventEntry expects an array as its argument.  The document is inconsistent between examples in 22.5.4.1 and 22.5.4.2; of the three examples given, two treat as an array and one as a single instance.  Patch:</p>

<h1>Index: Zend_Gdata_Calendar.xml</h1>

<p>--- Zend_Gdata_Calendar.xml (revision 14213)
+++ Zend_Gdata_Calendar.xml (working copy)
@@ -582,7 +582,7 @@
 $when-&gt;endTime="2007-12-05T15:00:00:00-08:00";</p>

<p>// Apply the when property to an event
-$event-&gt;when = $when;
+$event-&gt;when = array($when);
 ]]&gt;
             
             </p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Trevor Johns (tjohns) on 2009-03-03T14:45:17.000+0000</p> 
        <div class="body">
            <p>Hi Zachary, many thanks for the patch, it's much appreciated!</p>

<p>However, before I can apply it, you'll need to have a signed Contributor License Agreement (CLA) on file with the Zend Framework project. Instructions on doing this and an FAQ are here:</p>

<p><a href="http://framework.zend.com/community/contribute">http://framework.zend.com/community/contribute</a></p>

<p>Would you be okay with this? Please let me know if you have any questions.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Zachary Burnham (zburnham) on 2009-03-03T16:11:03.000+0000</p> 
        <div class="body">
            <p>I have no problem with the Agreement.  I'll fax it back to you shortly.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Trevor Johns (tjohns) on 2009-03-03T16:28:31.000+0000</p> 
        <div class="body">
            <p>Great!</p>

<p>Please follow up on this issue to let me know once the CLA has been received by Zend. I don't work there, so I won't get notified otherwise. :)</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Zachary Burnham (zburnham) on 2009-03-04T08:31:43.000+0000</p> 
        <div class="body">
            <p>I faxed the CLA to Zend last night.  I don't know if there's other confirmation to be obtained, and I haven't heard anything from them.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Zachary Burnham (zburnham) on 2009-03-04T17:07:07.000+0000</p> 
        <div class="body">
            <p>The CLA has been received and processed.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Trevor Johns (tjohns) on 2009-03-04T17:20:30.000+0000</p> 
        <div class="body">
            <p>I had to rebuild the patch, because Jira treated spaces and such as formatting, causing me to get the following error:</p>

<pre class="literal">
$ patch -p0 &lt; ~/Desktop/zf-5932.patch 
patching file Zend_Gdata_Calendar.xml
patch: **** malformed patch at line 6: $when-&gt;endTime="2007-12-05T15:00:00:00-08:00"
</pre>

<p>I've attached the re-built patch that fixes this.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Trevor Johns (tjohns) on 2009-03-04T17:29:15.000+0000</p> 
        <div class="body">
            <p>Commited to trunk as r14225.
Merged to release-1.7 as r14226.
Marking as fixed for next mini release.</p>

<pre class="literal">
commit 48d6b58aea687124fe0fca1e4d7abf5023842a0b
Author: tjohns 
Date:   Thu Mar 5 01:25:31 2009 +0000

    ZF-5932: Fix problem in Zend_Gdata_Calendar documentation: $event-&gt;when looks
    for an array, not a string.
    
    Patch by: zburnham
    
    git-svn-id: <a href="http://framework.zend.com/svn/framework/standard/trunk@14225">http://framework.zend.com/svn/framework/…</a> 44c647ce-9c0f-0

commit a1898cabce1a621da61e7933985a2fd5dcbcae7b
Author: tjohns 
Date:   Thu Mar 5 01:27:36 2009 +0000

    Merge r14225 from trunk to release-1.7.
    
    ZF-5932: Fix problem in Zend_Gdata_Calendar documentation: $event-&gt;when looks
    for an array, not a string.
    
    Patch by: zburnham
    
    git-svn-id: <a href="http://framework.zend.com/svn/framework/standard/branches/release-1.7@14226">http://framework.zend.com/svn/framework/…</a> 
</pre>

<p>Thanks again for the patch, Zachary!</p>

        </div>
    </div>
    </div>

