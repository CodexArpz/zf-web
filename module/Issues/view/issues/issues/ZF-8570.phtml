<h2>ZF-8570: NTP / SNTP results vary by 103 seconds</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2009-12-17T08:15:40.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2010-03-13T14:10:27.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.10.3 (01/Apr/10)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Thomas Weidner (thomas)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_TimeSync</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>Hi,</p>

<p>I'm using the time server at time.nrc.ca to sync our time. It implements both sntp and ntp protocals. Calling the ntp method results in an offset of 103 seconds while calling it via sntp results in 0. Below is the output from both calls:</p>

<pre class="highlight"><code>
Zend_Date Object
(
    [_locale:private] =&gt; en_CA
    [_fractional:private] =&gt; 0
    [_precision:private] =&gt; 3
    [_unixTimestamp:private] =&gt; 1261066537
    [_timezone:private] =&gt; America/Toronto
    [_offset:private] =&gt; 18000
    [_syncronised:private] =&gt; 103
    [_dst:protected] =&gt; 1
)
Array
(
    [leap] =&gt; 0 - no warning
    [version] =&gt; 3
    [mode] =&gt; symetric passive
    [ntpid] =&gt; 49.51.50.0
    [stratum] =&gt; secondary reference
    [rootdelay] =&gt; 0
    [rootdelayfrac] =&gt; 0
    [rootdispersion] =&gt; 0
    [rootdispersionfrac] =&gt; 0
    [roundtrip] =&gt; -103
    [offset] =&gt; 103.000000032
)
</code></pre>

<pre class="highlight"><code>
Zend_Date Object
(
    [_locale:private] =&gt; en_CA
    [_fractional:private] =&gt; 0
    [_precision:private] =&gt; 3
    [_unixTimestamp:private] =&gt; 1261066498
    [_timezone:private] =&gt; America/Toronto
    [_offset:private] =&gt; 18000
    [_syncronised:private] =&gt; 0
    [_dst:protected] =&gt; 1
)
Array
(
    [offset] =&gt; 0
)
</code></pre>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Thomas Weidner (thomas) on 2010-03-13T14:10:25.000+0000</p> 
        <div class="body">
            <p>Implemented V3 calculation with r21481</p>

        </div>
    </div>
    </div>

