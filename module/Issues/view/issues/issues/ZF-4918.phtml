<h2>ZF-4918: Problems in Zend_Form_Element_File while setting Decorators</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2008-11-12T00:05:57.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2008-11-13T15:02:49.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.7.0 (17/Nov/08)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Ahsan Shahzad (zendguru)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Thomas Weidner (thomas)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Form</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>I am using ZF 1.7 and i found a problem in it (also found same problem in 1.6.2 but not in 1.6.1);
when i try to set decorators (using setDecorators) for file element in my Form (using Zend_Form_Element_File ) it Throws following exception.</p>

<p>Warning: Exception caught by form: Unknown file Stack Trace: #0 C:\wamp\www\company\library\Zend\Form\Element\File.php(357): Zend_File_Transfer_Adapter_Abstract-&gt;getFilters('product_image') #1 C:\wamp\www\company\library\Zend\Form\Element.php(524): Zend_Form_Element_File-&gt;getFilters() #2 C:\wamp\www\company\library\Zend\Form\Element.php(541): Zend_Form_Element-&gt;_filterValue(NULL, NULL) #3 C:\wamp\www\company\library\Zend\Form\Decorator\ViewHelper.php(201): Zend_Form_Element-&gt;getValue() #4 C:\wamp\www\company\library\Zend\Form\Decorator\ViewHelper.php(231): Zend_Form_Decorator_ViewHelper-&gt;getValue(Object(Zend_Form_Element_File)) #5 C:\wamp\www\company\library\Zend\Form\Element.php(1905): Zend_Form_Decorator_ViewHelper-&gt;render('') #6 C:\wamp\www\company\library\Zend\Form\Decorator\FormElements.php(100): Zend_Form_Element-&gt;render() #7 C:\wamp\www\company\library\Zend\Form.php(2596): Zend_Form_Decorator_FormElements-&gt;render('') #8 C:\wamp\www\company\library\Zend\Form.php(2611): Zend_Form-&gt;render() #9 C: in C:\wamp\www\company\library\Zend\Form.php on line 2616</p>

<p>I face this problem only in versions 1.6.2 and 1.7, whereas it  goes fine for version 1.6.1 of Zend Framework.
I heard that someone has fixed it but no Luck i got on it!</p>

<p>Following is my Code snippet of form:</p>

<p>class ProductForm extends Zend_Form
{
    $decorator = array(
                         'ViewHelper',
                        array('Description',array('tag'=&gt;'','escape'=&gt;false)),
                        'Errors',
                    array(array('data'=&gt;'HtmlTag'), array('tag' =&gt; 'td')),
                        array('Label', array('tag' =&gt; 'td')),
                    array(array('row'=&gt;'HtmlTag'),array('tag'=&gt;'tr'))
                      );
    public function __construct($options = null, $pCatg = 0)
    {
        parent::__construct($options);
        $this-&gt;setName('productcategory');
        $this-&gt;setAction("");
        $this-&gt;setAttrib('enctype', 'multipart/form-data');</p>

<pre><code>    $prodImg = new Zend_Form_Element_File('product_image');
    $prodImg-&gt;setLabel('Product Image');
                -&gt;setDecorators($this-&gt;decorator);
}
</code></pre>

<p>}</p>

<p>Please check it,</p>

<p>Thanks
Ahsan Shahzad</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Thomas Weidner (thomas) on 2008-11-12T04:56:05.000+0000</p> 
        <div class="body">
            <p>Is there a reason why you deleted the "FILE" decorator ?</p>

<p>Images don't work when you erase the image decorator, and files do not work when you delete the file decorator.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Thomas Weidner (thomas) on 2008-11-13T15:02:22.000+0000</p> 
        <div class="body">
            <p>Closed due to non-response</p>

        </div>
    </div>
    </div>

