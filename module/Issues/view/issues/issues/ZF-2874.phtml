<h2>ZF-2874: Zend_Service_Flickr_OfflineTest errors</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Unit Tests: Problem</dd>

    <dt>Created:</dt>
    <dd>2008-03-13T08:45:07.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2008-09-02T10:39:04.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.6.0 (02/Sep/08)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Darby Felton (darby)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Joakim Nygård (jokke)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Service_Flickr</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>Results from PHP 5.2.5 on linux:</p>

<pre class="literal">
$ phpunit --verbose Zend_Service_Flickr_OfflineTest
PHPUnit 3.2.15 by Sebastian Bergmann.

Zend_Service_Flickr_OfflineTest
............E...E..


Time: 0 seconds

There were 2 errors:

1) testGroupPoolGetPhotosBasic(Zend_Service_Flickr_OfflineTest)
DOMDocument::loadXML(): Extra content at the end of the document in Entity, line: 16
/home/darby/framework/trunk/library/Zend/Service/Flickr.php:240
/home/darby/framework/trunk/tests/Zend/Service/Flickr/OfflineTest.php:374

2) testGroupPoolGetPhotosExceptionGroupIdInvalid(Zend_Service_Flickr_OfflineTest)
DOMDocument::loadXML(): Extra content at the end of the document in Entity, line: 5
/home/darby/framework/trunk/library/Zend/Service/Flickr.php:240
/home/darby/framework/trunk/tests/Zend/Service/Flickr/OfflineTest.php:485

FAILURES!
Tests: 19, Errors: 2.
</pre>

<p>I can also reproduce these errors with PHP 5.1.4 on WinXP.</p>

<p>This issue affects trunk and does not affect the release-1.5 branch as of SVN r8805.</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Darby Felton (darby) on 2008-03-13T08:49:02.000+0000</p> 
        <div class="body">
            <p>Assigning to [~jokke] for review</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Thomas Weidner (thomas) on 2008-03-15T16:30:14.000+0000</p> 
        <div class="body">
            <p>Here is the failure from within WindowsXP</p>

<pre class="highlight"><code>
   Zend Framework - Zend_Service_Flickr
    Zend_Service_Flickr_OfflineTest
    ............
Warning: DOMDocument::loadXML(): Extra content at the end of the document in Ent
ity, line: 16 in C:\Voxtronic\3rdParty\Zend Framework\library\Zend\Service\Flick
r.php on line 240

Call Stack:
    0.0019     178528   1. {main}() C:\Voxtronic\3rdParty\php\PEAR\PHPUnit\TextU
I\Command.php:0
    0.8232    7736064   2. PHPUnit_TextUI_Command::main() C:\Voxtronic\3rdParty\
php\PEAR\PHPUnit\TextUI\Command.php:528
   89.0193  120745864   3. PHPUnit_TextUI_TestRunner-&gt;doRun() C:\Voxtronic\3rdPa
rty\php\PEAR\PHPUnit\TextUI\Command.php:112
   89.0479  120752528   4. PHPUnit_Framework_TestSuite-&gt;run() C:\Voxtronic\3rdPa
rty\php\PEAR\PHPUnit\TextUI\TestRunner.php:298
   89.1433  120754800   5. PHPUnit_Framework_TestSuite-&gt;run() C:\Voxtronic\3rdPa
rty\php\PEAR\PHPUnit\Framework\TestSuite.php:633
 2041.1628  343545656   6. PHPUnit_Framework_TestSuite-&gt;run() C:\Voxtronic\3rdPa
rty\php\PEAR\PHPUnit\Framework\TestSuite.php:633
 2043.8100  345878048   7. PHPUnit_Framework_TestSuite-&gt;run() C:\Voxtronic\3rdPa
rty\php\PEAR\PHPUnit\Framework\TestSuite.php:633
 2043.8102  345879904   8. PHPUnit_Framework_TestSuite-&gt;run() C:\Voxtronic\3rdPa
rty\php\PEAR\PHPUnit\Framework\TestSuite.php:633
 2044.3026  346211176   9. PHPUnit_Framework_TestSuite-&gt;runTest() C:\Voxtronic\3
rdParty\php\PEAR\PHPUnit\Framework\TestSuite.php:650
 2044.3026  346211176  10. PHPUnit_Framework_TestCase-&gt;run() C:\Voxtronic\3rdPar
ty\php\PEAR\PHPUnit\Framework\TestSuite.php:670
 2044.3026  346211176  11. PHPUnit_Framework_TestResult-&gt;run() C:\Voxtronic\3rdP
arty\php\PEAR\PHPUnit\Framework\TestCase.php:351
 2044.3030  346213400  12. PHPUnit_Framework_TestCase-&gt;runBare() C:\Voxtronic\3r
dParty\php\PEAR\PHPUnit\Framework\TestResult.php:597
 2044.3070  346248480  13. PHPUnit_Framework_TestCase-&gt;runTest() C:\Voxtronic\3r
dParty\php\PEAR\PHPUnit\Framework\TestCase.php:373
 2044.3071  346249912  14. ReflectionMethod-&gt;invoke() C:\Voxtronic\3rdParty\php\
PEAR\PHPUnit\Framework\TestCase.php:445
 2044.3071  346249912  15. Zend_Service_Flickr_OfflineTest-&gt;testGroupPoolGetPhot
osBasic() C:\Voxtronic\3rdParty\Zend Framework\tests\Zend\Service\Flickr\Offline
Test.php:0
 2044.3802  346266296  16. Zend_Service_Flickr-&gt;groupPoolGetPhotos() C:\Voxtroni
c\3rdParty\Zend Framework\tests\Zend\Service\Flickr\OfflineTest.php:374
 2044.5418  346279192  17. DOMDocument-&gt;loadXML() C:\Voxtronic\3rdParty\Zend Fra
mework\library\Zend\Service\Flickr.php:240


Fatal error: Call to a member function getAttribute() on a non-object in C:\Voxt
ronic\3rdParty\Zend Framework\library\Zend\Service\Flickr.php on line 577

Call Stack:
    0.0019     178528   1. {main}() C:\Voxtronic\3rdParty\php\PEAR\PHPUnit\TextU
I\Command.php:0
    0.8232    7736064   2. PHPUnit_TextUI_Command::main() C:\Voxtronic\3rdParty\
php\PEAR\PHPUnit\TextUI\Command.php:528
   89.0193  120745864   3. PHPUnit_TextUI_TestRunner-&gt;doRun() C:\Voxtronic\3rdPa
rty\php\PEAR\PHPUnit\TextUI\Command.php:112
   89.0479  120752528   4. PHPUnit_Framework_TestSuite-&gt;run() C:\Voxtronic\3rdPa
rty\php\PEAR\PHPUnit\TextUI\TestRunner.php:298
   89.1433  120754800   5. PHPUnit_Framework_TestSuite-&gt;run() C:\Voxtronic\3rdPa
rty\php\PEAR\PHPUnit\Framework\TestSuite.php:633
 2041.1628  343545656   6. PHPUnit_Framework_TestSuite-&gt;run() C:\Voxtronic\3rdPa
rty\php\PEAR\PHPUnit\Framework\TestSuite.php:633
 2043.8100  345878048   7. PHPUnit_Framework_TestSuite-&gt;run() C:\Voxtronic\3rdPa
rty\php\PEAR\PHPUnit\Framework\TestSuite.php:633
 2043.8102  345879904   8. PHPUnit_Framework_TestSuite-&gt;run() C:\Voxtronic\3rdPa
rty\php\PEAR\PHPUnit\Framework\TestSuite.php:633
 2044.3026  346211176   9. PHPUnit_Framework_TestSuite-&gt;runTest() C:\Voxtronic\3
rdParty\php\PEAR\PHPUnit\Framework\TestSuite.php:650
 2044.3026  346211176  10. PHPUnit_Framework_TestCase-&gt;run() C:\Voxtronic\3rdPar
ty\php\PEAR\PHPUnit\Framework\TestSuite.php:670
 2044.3026  346211176  11. PHPUnit_Framework_TestResult-&gt;run() C:\Voxtronic\3rdP
arty\php\PEAR\PHPUnit\Framework\TestCase.php:351
 2044.3030  346213400  12. PHPUnit_Framework_TestCase-&gt;runBare() C:\Voxtronic\3r
dParty\php\PEAR\PHPUnit\Framework\TestResult.php:597
 2044.3070  346248480  13. PHPUnit_Framework_TestCase-&gt;runTest() C:\Voxtronic\3r
dParty\php\PEAR\PHPUnit\Framework\TestCase.php:373
 2044.3071  346249912  14. ReflectionMethod-&gt;invoke() C:\Voxtronic\3rdParty\php\
PEAR\PHPUnit\Framework\TestCase.php:445
 2044.3071  346249912  15. Zend_Service_Flickr_OfflineTest-&gt;testGroupPoolGetPhot
osBasic() C:\Voxtronic\3rdParty\Zend Framework\tests\Zend\Service\Flickr\Offline
Test.php:0
 2044.3802  346266296  16. Zend_Service_Flickr-&gt;groupPoolGetPhotos() C:\Voxtroni
c\3rdParty\Zend Framework\tests\Zend\Service\Flickr\OfflineTest.php:374
 2044.5424  346279280  17. Zend_Service_Flickr::_checkErrors() C:\Voxtronic\3rdP
arty\Zend Framework\library\Zend\Service\Flickr.php:242
</code></pre>

<p>under PHP 525 and Windows XP, Trunk SVN 8843</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Joakim Nygård (jokke) on 2008-03-17T13:31:16.000+0000</p> 
        <div class="body">
            <p>Unit test files was corrupted for some reason. Fixed in r8886</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Wil Sinclair (wil) on 2008-03-21T16:59:10.000+0000</p> 
        <div class="body">
            <p>I'm assuming this fix is merged to the 1.5 release branch. Please update if this is not the case.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Darby Felton (darby) on 2008-04-02T08:33:42.000+0000</p> 
        <div class="body">
            <p>r8886 was not merged to release-1.5 branch yet. [~jokke], please merge this revision and then update this issue as fixed for next mini release.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Joakim Nygård (jokke) on 2008-05-09T07:40:19.000+0000</p> 
        <div class="body">
            <p>Merged to release-1.5 branch in r9433</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Wil Sinclair (wil) on 2008-09-02T10:39:04.000+0000</p> 
        <div class="body">
            <p>Updating for the 1.6.0 release.</p>

        </div>
    </div>
    </div>

