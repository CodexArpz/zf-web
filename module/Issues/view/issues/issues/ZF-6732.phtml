<h2>ZF-6732: Zend_Search_Lucene_Query - section 54.5.4 - incorrect search query displayed</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Docs:  Problem</dd>

    <dt>Created:</dt>
    <dd>2009-05-19T13:50:08.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2010-01-21T09:36:45.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.10.0 (27/Jan/10)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Chris Williams (cdub)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Jordan Ryan Moore (jordanryanmoore)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Search_Lucene</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
        <li><a href="/issues/secure/attachment/12653/ZF-6732.patch">ZF-6732.patch</a></li>
        </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>I'm actually looking for Zend to generate a query similar to the one shown in this section (specifically the author part):</p>

<pre class="literal">
+(word1 word2 word3) author:(word4 word5) -word6
</pre>

<p>Instead, when I run this sample code, I get the following:</p>

<pre class="literal">
+(word1 word2 word3) (author:word4 author:word5) -word6
</pre>

<p>Notice that the "author" term is not on the outside of the parens as the example shows. My code is also behaving this way but I'd prefer that it work the way the example shows. I'd really like the ability to create a more streamlined query string but if that's not possible, the documentation should probably be changed.</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Christopher Thomas (cwt137) on 2010-01-21T06:06:23.000+0000</p> 
        <div class="body">
            <p>The correct section is 46.5.4. Confirmed the typo by running the Lucene search code underneath query. Attached is a patch.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Alexander Veremyev (alexander) on 2010-01-21T09:36:45.000+0000</p> 
        <div class="body">
            <p>Specifying field name as a default field name for all subqueries is a query parser feature.</p>

<p>Field name has to be seet at term object creation time if query is constructed using API (null means "any field").</p>

<p>So updated doc example is more correct even queries are the same.</p>

        </div>
    </div>
    </div>

