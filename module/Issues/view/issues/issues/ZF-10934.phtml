<h2>ZF-10934: HTTP-Client discards selected request method when following redirects.</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2011-01-11T02:36:36.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2012-08-31T08:55:59.000+0000</dd>

    <dt>Status:</dt>
    <dd>Open</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Joseph Hopfgartner (joehopf)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Shahar Evron (shahar)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Http_Client</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>To reproduce the error, use the HTTP Client to do a HEAD request to a url that contains a Header-Location redirect.</p>

<p>The HTTP Client then follows the redirects until the maximum redirect count is reached, but sets all variables according to the new url, included the method hardcoded to GET (not to HEAD).</p>

<p>$m = $this-&gt;method;<br />
$this-&gt;resetParameters();
$this-&gt;setMethod($m);</p>

<p>instead of</p>

<p>$this-&gt;setMethod(self::GET);</p>

<p>fixes the problem.</p>

<p>Additionally, if the file at the source is too big, so that an error occours, it is not displayed when doing a HEAD request that gets converted to GET. The client script just terminates with no error or message, even with maximum error reporting and display errors.</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>
    <p class="comments">No comments to display</p>
    
</div>

