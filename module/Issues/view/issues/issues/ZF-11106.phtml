<h2>ZF-11106: Harcoded white space with value of '1' instead of 'barThinWidth'</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2011-02-22T11:27:05.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2012-11-21T08:09:30.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.11.4 (03/Mar/11)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Mickael Perraud (mikaelkael)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Barcode</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
        <li><a href="/issues/browse/ZF-11105">ZF-11105</a></li>
            <li><a href="/issues/browse/ZF-12142">ZF-12142</a></li>
        </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
        <li><a href="/issues/secure/attachment/13643/incorrect+code128+barcode.jpg">incorrect code128 barcode.jpg</a></li>
        </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>In Code25 and Code39, whitespaces between characters are hardcoded with value of '1' instead of 'barThinWidth'. If you do this:</p>

<pre class="highlight"><code>
$barcode-&gt;setBarThinWidth(2);
$barcode-&gt;setBarThickWidth(6);
</code></pre>

<p>This leads to smaller barcode but not smaller image =&gt; textual characters are not centered</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Mickael Perraud (mikaelkael) on 2011-02-22T12:52:02.000+0000</p> 
        <div class="body">
            <p>Fixed with r23755, merged to 1.11 branch with r23756</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Stefan Koopmanschap (stefan) on 2011-02-23T01:48:03.000+0000</p> 
        <div class="body">
            <p>I am still running into trouble with the Code128 barcode that I'm using throughout my application. I am also using Leitcode and Identcode and these seem not to be affected at the moment, it seems to just be Code128 for me at the moment.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Stefan Koopmanschap (stefan) on 2011-02-23T01:50:00.000+0000</p> 
        <div class="body">
            <p>I applied the <a href="http://framework.zend.com/code/revision.php?repname=Zend+Framework&amp;isdir=1&amp;rev=23755">http://framework.zend.com/code/revision.php/…</a> patch to my local ZF installation and generated some barcodes. This is still the result.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Mickael Perraud (mikaelkael) on 2011-02-23T02:48:49.000+0000</p> 
        <div class="body">
            <p>Argh! :(</p>

<p>I omit line 232 in Code128.php:</p>

<pre class="highlight"><code>
                $barcodeTable[] = array($c, 1, 0, 1);
</code></pre>

<p>should be:</p>

<pre class="highlight"><code>
                $barcodeTable[] = array($c, $this-&gt;_barThinWidth, 0, 1);
</code></pre>

<p>I will patch it this evening</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Mickael Perraud (mikaelkael) on 2011-02-23T12:30:48.000+0000</p> 
        <div class="body">
            <p>New patch with r23760 and merged in 1.11 branch with r23761</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Stefan Koopmanschap (stefan) on 2011-02-24T01:25:13.000+0000</p> 
        <div class="body">
            <p>I can confirm that the implemented fix indeed solves the problem.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by nike shox (nike shox) on 2012-11-21T08:09:30.000+0000</p> 
        <div class="body">
            <p>words <a href="http://www.nikeshoxsko.biz">http://www.nikeshoxsko.biz</a> Brandon RichardThis last Torsdag, foret Florida-baserte sneakerheads opp <a href="http://www.nikeshoxsko.biz">http://www.nikeshoxsko.biz</a> i hopetall utenfor Niketown Miami for en attract armbånd for fredagens limited utgivelse of the etterlengtede "Miami Nights" Nike LeBron <a href="http://www.nikeshoxsko.biz">http://www.nikeshoxsko.biz</a> Low.</p>

        </div>
    </div>
    </div>

