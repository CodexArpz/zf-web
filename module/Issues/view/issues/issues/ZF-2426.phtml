<h2>ZF-2426: New Zend_View placeholders allow duplicates...</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Improvement</dd>

    <dt>Created:</dt>
    <dd>2008-01-13T00:09:09.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2010-08-22T16:00:16.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.5.0 (17/Mar/08)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Travis Elkins (chidera)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Matthew Weier O'Phinney (matthew)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_View</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
        <li><a href="/issues/browse/ZF-2690">ZF-2690</a></li>
        </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>Hi,</p>

<p>I have just recently begun to use one of the more recent snapshots so that I could start to use Zend_Layout and the new, related functionality.  It's great so far, by the way.</p>

<p>But, I've got a problem with some of it....</p>

<p>I have only observed it when using one of the new "concrete placeholder implementations": HeadScript.  Whenever I append a new file, it's possible that two entries are added.  That really bugs me.</p>

<p>What I'm trying to do is to take advantage of the new features by only adding script files when and where I need them, without concern for what's already included.  On the positive side, it works great in that I'm getting what I need quite simply.  But, when I look at the source, I sometimes see duplicate entries.  That is, one view script will need somefile.js, and so it calls ```  Now, when the request completes and I view the source, I see two references listed for somefile.js.  :-|</p>

<p>Can one prevent this?  I've poked around a bit through the few examples "out and about" as well as the snapshot docs, the source, and php.net's ArrayObject documentation (which is a little on the light side).  I wasn't able to find anything, but perhaps I've missed it.</p>

<p>Is it bad...?  I have to admit, I don't know what it would mean to have the same file referenced more than once.  Is there a need for this?  Will the browser see that it's already fetched the first one and then ignore the second?  Or will it go after both?</p>

<p>So...I would prefer to see HeadScript automatically ignore duplicates.  If that's the default and there's good reason to allow duplicates sometimes, then that could be configurable.  Or, the opposite: duplicates are allowed by default, but ignoring them could be configurable.</p>

<p>What does everyone else think about the whole thing...?</p>

<p>Take care...</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Travis Elkins (chidera) on 2008-01-13T00:11:52.000+0000</p> 
        <div class="body">
            <p>I just looked at what I submitted and I must have inadvertently introduced some strikethrough markup.  It wasn't intended, so please ignore the fact that some text has strikethrough format.</p>

<p>Sorry.  :-|</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Andries Seutens (andries) on 2008-01-28T06:48:45.000+0000</p> 
        <div class="body">
            <p>I've edit the issue to get rid of the strikethrough markup.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Andries Seutens (andries) on 2008-01-28T08:02:06.000+0000</p> 
        <div class="body">
            <p>Assigned to Matthew, he will have a better idea what to do with this. I personally would suggest adding an extra parameter or a new method to append unique.</p>

<p>This would only inject the headScript element when the filename is unique and each of the attributes matches.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Bart Dens (dancet) on 2008-01-31T00:39:21.000+0000</p> 
        <div class="body">
            <p>I would love to have a fix for this as well, as this is sort of a blocking issue for me. I'm using ExtJS and have a method that is loading dependencies, but all these scripts are loaded for each extjs element I'm including...</p>

<p>If wanted, I can have a look at this issue as well.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthew Weier O'Phinney (matthew) on 2008-02-01T11:26:00.000+0000</p> 
        <div class="body">
            <p>Updating version to next minor release, as this functionality won't even be released until then.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthew Weier O'Phinney (matthew) on 2008-02-20T11:05:55.000+0000</p> 
        <div class="body">
            <p>Fix committed to trunk.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Sergio Vaccaro (hujuice) on 2010-08-22T15:57:59.000+0000</p> 
        <div class="body">
            <p>The issue is still there.</p>

<p>In the postDispatch function of a plugin I would write:</p>

<pre class="highlight"><code>

In this way, if I have a forward, the plugin is executed twice (or more) and I've a double (or more):
</code></pre>

<p>Regards,
Sergio</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Sergio Vaccaro (hujuice) on 2010-08-22T16:00:15.000+0000</p> 
        <div class="body">
            <p>More...
the workaround will be horrible code... :)</p>

<p>Sergio</p>

        </div>
    </div>
    </div>

