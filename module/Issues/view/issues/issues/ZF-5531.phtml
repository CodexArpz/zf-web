<h2>ZF-5531: CLONE -Concurrent adding and committing throws 'Zend_Search_Lucene_Exception' File XXX.del is not readable.</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2009-01-12T11:27:12.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2009-04-01T05:49:11.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.7.4 (02/Feb/09)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Sebastian Utz (su)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Alexander Veremyev (alexander)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Search_Lucene</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
        <li><a href="/issues/browse/ZF-2448">ZF-2448</a></li>
            <li><a href="/issues/browse/ZF-4283">ZF-4283</a></li>
            <li><a href="/issues/browse/ZF-3514">ZF-3514</a></li>
        </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>I am still getting this error using the current trunk, rev 13605.</p>

<p>my system information:
Kernel 2.6.18-6-686 32bit
PHP 5.2.6
Apache 2.2.9
Ext3 Local mounted FS</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Jurrien Stutterheim (norm2782) on 2009-01-13T07:36:26.000+0000</p> 
        <div class="body">
            <p>Upped priority to critical</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Jurrien Stutterheim (norm2782) on 2009-01-13T07:38:08.000+0000</p> 
        <div class="body">
            <p>Added link to older issues</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Mark Henderson (markh) on 2009-01-18T23:52:22.000+0000</p> 
        <div class="body">
            <p>We're experiencing this issue too and are hoping that 1.7.3 fixes it, as 1.7.2 is definitely still broken.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Mark Henderson (markh) on 2009-01-21T08:11:17.000+0000</p> 
        <div class="body">
            <p>We're still getting this error in 1.7.3, but slightly less frequently. Here's the trace:</p>

<p>Error occurred in Search while trying to findHits. Reason: File '/var/www/htdocs/mobilize/tenants/0002/tmp/search/index-group-669/_4qc_1.del' is not readable
Type of Exception thrown: Zend_Search_Lucene_Exception
Code: 0
File: /usr/share/php/ZendFramework-1.7.3-minimal/library/Zend/Search/Lucene/Storage/File/Filesystem.php
Line: 59
Trace: #0 /usr/share/php/ZendFramework-1.7.3-minimal/library/Zend/Search/Lucene/Storage/Directory/Filesystem.php(358): Zend_Search_Lucene_Storage_File_Filesy</p>

<h1>1 /usr/share/php/ZendFramework-1.7.3-minimal/library/Zend/Search/Lucene/Index/SegmentInfo.php(370): Zend_Search_Lucene_Storage_Directory_Filesystem-&gt;getFile</h1>

<h1>2 /usr/share/php/ZendFramework-1.7.3-minimal/library/Zend/Search/Lucene.php(467): Zend_Search_Lucene_Index_SegmentInfo-&gt;__construct(Object(Zend_Search_Lucen</h1>

<h1>3 /usr/share/php/ZendFramework-1.7.3-minimal/library/Zend/Search/Lucene.php(537): Zend_Search_Lucene-&gt;_readSegmentsFile()</h1>

<h1>4 /usr/share/php/ZendFramework-1.7.3-minimal/library/Zend/Search/Lucene.php(208): Zend_Search_Lucene-&gt;__construct('/var/www/htdocs...', false)</h1>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Alexander Veremyev (alexander) on 2009-01-30T08:23:44.000+0000</p> 
        <div class="body">
            <p>Fixed.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by JÃ¼rgen Mangler (juergen.mangler@univie.ac.at) on 2009-01-30T09:40:42.000+0000</p> 
        <div class="body">
            <p>I'm skeptical, this bug has been marked fixed every single last 500 releases :-) Let's see if this time its finally really fixed.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Mark Henderson (markh) on 2009-02-03T16:30:32.000+0000</p> 
        <div class="body">
            <p>We're still testing under load, but it seems to be fixed for us too.  Thank you!</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by old of Satoru Yoshida (yoshida@zend.co.jp) on 2009-04-01T05:49:11.000+0000</p> 
        <div class="body">
            <p>correct fix version</p>

        </div>
    </div>
    </div>

