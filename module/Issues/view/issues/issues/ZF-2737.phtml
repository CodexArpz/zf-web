<h2>ZF-2737: Zend_View_Helper_PartialLoop loop counter</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Improvement</dd>

    <dt>Created:</dt>
    <dd>2008-02-27T06:50:32.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2010-06-15T09:36:36.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.7.0 (17/Nov/08)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Jon Whitcraft (sidhighwind)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_View</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>I think it will be nice to have a counter in PartialLoop, in order to perform certain operations.</p>

<p>For instance:
1. To create a zebra striped table
2. To present an ordered list not using "ol" tags.</p>

<p>Any toughts?</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Matthew Weier O'Phinney (matthew) on 2008-03-06T09:53:15.000+0000</p> 
        <div class="body">
            <p>Scheduling for mini release following 1.5.0 final release</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Wil Sinclair (wil) on 2008-03-21T17:05:26.000+0000</p> 
        <div class="body">
            <p>This issue should have been fixed for the 1.5 release.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Wil Sinclair (wil) on 2008-03-25T20:33:30.000+0000</p> 
        <div class="body">
            <p>Please categorize/fix as needed.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Ramon de la Fuente (fuentez) on 2008-04-14T07:57:53.000+0000</p> 
        <div class="body">
            <p>To add A simple partialCounter variable:</p>

<p>Added to Zend_View_Helper_Partial on line 75 below  $view = $this-&gt;cloneView();</p>

<pre><code>    if ( isset($this-&gt;partialCounter) ) {
        $view-&gt;partialCounter = $this-&gt;partialCounter;
    }
</code></pre>

<p>Added to Zend_View_Helper_Partialloop:</p>

<pre><code>public $partialCounter = 0;
</code></pre>

<p>And Changed the foreach loop in Zend_View_Helper_Partialloop on line 68 to
        foreach ($model as $item) {
            $this-&gt;partialCounter++;</p>

<pre><code>        $content .= $this-&gt;partial($name, $module, $item);
    }
</code></pre>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Ramon de la Fuente (fuentez) on 2008-04-14T08:02:39.000+0000</p> 
        <div class="body">
            <p>To add A simple partialCounter variable:</p>

<p>Added to Zend_View_Helper_Partial on line 75 below $view = $this-&gt;cloneView();</p>

<pre class="highlight"><code>
        if ( isset($this-&gt;partialCounter) ) {
            $view-&gt;partialCounter = $this-&gt;partialCounter;
        }
</code></pre>

<p>Added to Zend_View_Helper_Partialloop:</p>

<pre class="highlight"><code>
        public $partialCounter = 0;
</code></pre>

<p>And Changed the foreach loop in Zend_View_Helper_Partialloop on line 68 to:</p>

<pre class="highlight"><code>
        public $partialCounter = 0;

        foreach ($model as $item) {
            $this-&gt;partialCounter++;

            $content .= $this-&gt;partial($name, $module, $item);
        }
</code></pre>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Wil Sinclair (wil) on 2008-04-18T13:11:53.000+0000</p> 
        <div class="body">
            <p>This doesn't appear to have been fixed in 1.5.0. Please update if this is not correct.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Ralph Schindler (ralph) on 2008-04-22T09:48:27.000+0000</p> 
        <div class="body">
            <p>Updating project management info.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Bert Van Hauwaert (becoded) on 2008-06-07T12:58:10.000+0000</p> 
        <div class="body">
            <p>While adding the counter, it would be useful to add a total variable too.
Then it will be possible to determine if it is the last index or not.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by bullfrogblues (gerardroche) on 2008-10-11T17:37:33.000+0000</p> 
        <div class="body">
            <p>This should be a must for the release.</p>

<p>e.g. if you need/require zebra striped tables/lists you can't use this.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by bullfrogblues (gerardroche) on 2008-10-11T17:48:22.000+0000</p> 
        <div class="body">
            <p>There could be a default class value</p>

<p>e.g. echo $this-&gt;loopClass (or equivalent $this-&gt;loopDefaultClass etc.) which would return "odd" or "even" depending on loop count as default.</p>

<p>In your list/table then instead of
</p>

you could have simply 


Don't know if this is too much to ask, but at least the loop count should be a must for the next release.

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Jon Whitcraft (sidhighwind) on 2008-11-11T17:35:50.000+0000</p> 
        <div class="body">
            <p>This has been added in with r12577</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Francois (frankyz) on 2008-11-11T22:50:31.000+0000</p> 
        <div class="body">
            <p>@Jon Whitcraft:
the short way to say: thank you! :)</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Wil Sinclair (wil) on 2008-11-13T14:10:00.000+0000</p> 
        <div class="body">
            <p>Changing issues in preparation for the 1.7.0 release.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Paul Court (gargoyle) on 2010-06-15T09:36:34.000+0000</p> 
        <div class="body">
            <p>I have some issues with the way that this has been implemented, the partial class is being used to set parameters in the view that are created in the partialLoop extension of the class. I have a working copy of my own version of partialLoop that does not require changes to partial to make it work.</p>

<p>Bittarman has kindly offered to mentor me next week so that I can figure out how to get my proposed changes into the system for review.</p>

<p>Just wanted to make a note of my intentions incase anyone here already has some other ideas - and so I don't forget, or get lazy and not do it ;-)</p>

        </div>
    </div>
    </div>

