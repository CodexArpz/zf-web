<h2>ZF-11162: Zend_Http_Client::setUri mutates argument</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2011-03-11T00:32:55.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2011-08-01T11:00:51.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.11.10 (04/Aug/11)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Enrico Zimuel (zimuel)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Http_Client</li>
            <li>Zend_Uri</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
        <li><a href="/issues/secure/attachment/13770/zend-http-client.patch">zend-http-client.patch</a></li>
            <li><a href="/issues/secure/attachment/13771/zend-http-client.test">zend-http-client.test</a></li>
        </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>Zend_Http_Client::setUri (and therefore the constructor) mutates the passed Zend_Uri_Http object by changing the port number if it is not set to the default. Furthermore, setting parameters etc, will mutate the originally passed argument too. Imho this shouldn't be the case, the passed argument should be const, and if Zend_Http_Client wishes to adopt the instance, it should be cloned.</p>

<p>I'll be providing a patch and a test here.</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Gerard van Helden (drm) on 2011-03-11T00:34:44.000+0000</p> 
        <div class="body">
            <p>Test &amp; patch</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Enrico Zimuel (zimuel) on 2011-08-01T10:48:38.000+0000</p> 
        <div class="body">
            <p>Committed in trunk (24334)</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Enrico Zimuel (zimuel) on 2011-08-01T11:00:51.000+0000</p> 
        <div class="body">
            <p>Solved in branches/release-1.11 (commit 24335)</p>

        </div>
    </div>
    </div>

