<h2>ZF-7378: HTTPS certificate validation should be enabled by default</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Improvement</dd>

    <dt>Created:</dt>
    <dd>2009-07-24T03:03:07.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2012-11-20T20:53:00.000+0000</dd>

    <dt>Status:</dt>
    <dd>Closed</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Thomas Gelf (tgelf)
            </dd>

    <dt>Assignee:</dt>
    <dd>
        None
                    </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Http_Client</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>Please note that this ticket is for ZF2.0. We should pass up the chance to change default settings, as a new major release allows us to break BC ;-) Pleas see ZF-4838 for farther details.</p>

<p>Regards,
Thomas Gelf</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Shahar Evron (shahar) on 2009-07-24T03:25:32.000+0000</p> 
        <div class="body">
            <p>It is of course arguable whether this is the right thing to do. I don't really know - however keep in mind that PHP's default behavior (of SSL streams) is <em>not</em> to verify such things.</p>

<p>Then again, we can discuss this when the time comes :)</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Thomas Gelf (tgelf) on 2009-07-24T03:42:44.000+0000</p> 
        <div class="body">
            <p>Let me re-post some older comments:</p>

<blockquote>
  <p>Unfortunately switching validation on per default is not an option as
  it would break currently working applications. I would suggest to change
  this with ZF 2.0 - as other libs / languages I know (CURL, Java, C# etc)
  are doing so out of the box. And in my believes this is the only correct
  way of using HTTPS. If someone wants to do insecure things he is free to
  do so, but he has to explicitly switch checks off.</p>
</blockquote>

<p>(see <a href="http://www.nabble.com/Validating-SSL-server-certs---using-CA-certs-p20225319.html">http://nabble.com/Validating-SSL-server-certs---usâ€¦</a> for full post)</p>

<blockquote>
  <p>I don't know which Zend_Service_Whatever-Classes are based on HTTPS
  (a quick grep showed Amazon_Ec2, Delicious, ReCaptcha), probably all of
  them are using Zend_Http_Client - with insecure defaults. And I'm pretty
  sure others will follow.</p>
  
  <p>Therefore I strongly suggest changing default settings with ZF 2.0. Many
  developers just don't realize that self-signed certificates lead HTTPS ad
  absurdum - and also not verifying signed ones does. If someone insists on
  using useless certificates he can do so. But he needs to be made aware of
  doing something REALLY bad (and shall be forced into explicitely allowing
  this in his own code).</p>
</blockquote>

<p>I do NOT think it is arguable what the default setting should look like. Other
languages / frameworks behave correct, even cURL (also in PHP) does so.
And I don't think taking PHP's scary defaults as a reference would be a good
idea.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Rob Allen (rob) on 2012-11-20T20:53:00.000+0000</p> 
        <div class="body">
            <p>Bulk change of all issues last updated before 1st January 2010 as "Won't Fix".</p>

<p>Feel free to re-open and provide a patch if you want to fix this issue.</p>

        </div>
    </div>
    </div>

