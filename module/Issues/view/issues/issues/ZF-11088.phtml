<h2>ZF-11088: Zend_Form addError() is not working correctly</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2011-02-18T06:03:26.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2011-02-19T09:54:10.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Michelangelo van Dam (dragonbe)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Form</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
        <li><a href="/issues/browse/ZF-5150">ZF-5150</a></li>
        </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <pre class="literal">
$form-&gt;getElement('nobaru')-&gt;addError('My custom error');

if ($form-&gt;isValid($this-&gt;getRequest()-&gt;getPost())) {                
    // OK
} else {
    // Should not be empty array
    $zf = $form-&gt;getMessages();
}
</pre>

<p><em>getMessages()</em> will return empty array even though the element has been marked as failed, however, the custom error message will be displayed if the element failed another validation defined when creating the element in another class extended from Zend_Form</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by aurorius (aurorius) on 2011-02-18T06:05:27.000+0000</p> 
        <div class="body">
            <p>I don't think the previous issue has been fixed, so, I'm opening new issue for the problem</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Michelangelo van Dam (dragonbe) on 2011-02-19T09:54:09.000+0000</p> 
        <div class="body">
            <p>This issue is a non-issue since custom error messages should be retrieved using $form-&gt;getErrorMessages().</p>

<p>The only moment $form-&gt;getMessages() returns the custom error message is exactly when validation failures occur, which is indeed the case.</p>

        </div>
    </div>
    </div>

