<h2>ZF-1404: PostgreSQL: DROP IF EXISTS syntax not supported prior to 8.2</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Unit Tests: Problem</dd>

    <dt>Created:</dt>
    <dd>2007-05-17T14:13:40.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2007-07-05T14:44:11.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.0.0 RC1 (28/May/07)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Bill Karwin (bkarwin)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Db</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>The file /tests/Zend/Db/TestUtil/Pdo/Pgsql.php contains SQL syntax like DROP SEQUENCE IF EXISTS.</p>

<p>The IF EXISTS syntax was introduced in PostgreSQL 8.2.  It is not recognized in earlier versions of PostgreSQL.</p>

<p>Please change the TestUtil class to use a more generic solution for conditional DDL operations.  It is likely that we can use the system catalog.  Query the pg_class relation and find out if tables and sequences exist.  Create or drop these schema objects based on what you find.  This solution works well for TestUtil classes for Oracle and DB2.</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Bill Karwin (bkarwin) on 2007-05-17T14:14:34.000+0000</p> 
        <div class="body">
            <p>Implemented in revision 4840.</p>

        </div>
    </div>
    </div>

