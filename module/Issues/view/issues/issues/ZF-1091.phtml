<h2>ZF-1091: Add isXmlHttpRequest() to Zend_Controller_Request_Http</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>New Feature</dd>

    <dt>Created:</dt>
    <dd>2007-03-19T12:12:59.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2007-07-05T14:43:57.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>0.9.2 (06/Apr/07)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Matthew Ratzloff (mratzloff)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Matthew Weier O'Phinney (matthew)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Controller</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>Per Till Klampaeckel's suggestion, we should add a method to detect whether a request is asynchronous or not.</p>

<pre class="highlight"><code>
public function isXmlHttpRequest()
{
    if ($this-&gt;getHeader('X_REQUESTED_WITH') == 'XMLHttpRequest') {
        return true;
    }
    return false;
}
</code></pre>

<p>Currently this only works for Prototype (and therefore Script.aculo.us as well).  Of course, "only" in this case represents a very large portion of Ajax requests.  However, I think if more frameworks start to use this, we might get others, like YUI, to make it quasi-standard behavior.</p>

<p>The benefit to this is that actions can determine (easily) if they were requested via Ajax or not, which may determine their behavior or output.</p>

<p>An alternate name might be {{isAjaxRequest()}}, however that's more broad and encompasses other things, like Iframe requests, which would not contain this header.</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Bill Karwin (bkarwin) on 2007-03-19T15:53:16.000+0000</p> 
        <div class="body">
            <p>Assign to Matthew.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthew Weier O'Phinney (matthew) on 2007-04-02T11:16:24.000+0000</p> 
        <div class="body">
            <p>Added in revision 4305</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthew Ratzloff (mratzloff) on 2007-04-02T11:23:59.000+0000</p> 
        <div class="body">
            <p>Great!  :-)</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Aaron Heimlich (aheimlich) on 2007-04-02T23:33:24.000+0000</p> 
        <div class="body">
            <p>Just so you guys are aware, <a href="">www.jquery.com</a>" rel="nofollow"&gt;jQuery uses "X-Requested-With: XMLHttpRequest" (<a href="http://dev.jquery.com/browser/trunk/jquery/src/ajax/ajax.js#L643">source</a>)</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthew Weier O'Phinney (matthew) on 2007-04-03T06:28:22.000+0000</p> 
        <div class="body">
            <p>Aaron -- that's good news, as that's what what was implemented in the request. :-)</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthew Ratzloff (mratzloff) on 2007-04-03T10:43:57.000+0000</p> 
        <div class="body">
            <p>I think what he's saying is that in the code comments and documentation you can also include jQuery along with Prototype and Script.aculo.us in the list of JavaScript frameworks that are supported.  :-)</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Aaron Heimlich (aheimlich) on 2007-04-03T10:45:16.000+0000</p> 
        <div class="body">
            <p>Right....I forgot that all of the members of {{$_SERVER}} are uppercase and underscored (I originally thought you were looking for an HTTP header named {{X_REQUESTED_WITH}} instead of a variable in {{$_SERVER}}). That being said, I also noticed that Y!UI uses this too. Dojo doesn't seem to, but it doesn't appear to prevent you from adding it yourself.</p>

        </div>
    </div>
    </div>

