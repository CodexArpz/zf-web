<h2>ZF-10020: [Zend_Translate_Adapter_Array] Not assign messages translation</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2010-06-20T20:41:52.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2010-12-11T14:00:32.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Ramon Henrique Ornelas (ramon)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Thomas Weidner (thomas)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Translate</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
        <li><a href="/issues/secure/attachment/13154/ZF-10020.patch">ZF-10020.patch</a></li>
        </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>If past a array in first parameter Zend_Translate_Adapter_Array::__construct(), it throw the message <em>"The language '%locale%' has to be added before it can be used"</em>, caused by not assign messages translation.</p>

<p>Code Reproduce:</p>

<pre class="highlight"><code>
$t = new Zend_Translate_Adapter_Array(array('message' =&gt; 'Foo'));
</code></pre>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Thomas Weidner (thomas) on 2010-06-21T08:11:11.000+0000</p> 
        <div class="body">
            <p>And how should the array adapter know which language the translation has?
I think that you missed something in your workflow.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Christoph, Ren√© Pardon (renepardon) on 2010-06-21T09:56:30.000+0000</p> 
        <div class="body">
            <p>Hi Ramon,</p>

<p>this is probably no bug! You have to assign a language/locale to the adapter to get it working as expected.
You can pass the locale as second parameter. Zend_Translate_Adapter will then add your array to the assigned locale.</p>

<p>best regards</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Ramon Henrique Ornelas (ramon) on 2010-06-21T10:05:33.000+0000</p> 
        <div class="body">
            <p>Thomas</p>

<p>Before of the release 1.10.3 this code worked correctly.</p>

<pre class="highlight"><code>
new Zend_Translate_Adapter_Array(array('message' =&gt; 'Foo'));
</code></pre>

<p>After of the release 1.10.3 was need of change to</p>

<pre class="highlight"><code>
new Zend_Translate_Adapter_Array(array('content' =&gt; array('message' =&gt; 'Foo')));
</code></pre>

<p>Since already Thanks ;).</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Ramon Henrique Ornelas (ramon) on 2010-06-21T11:12:37.000+0000</p> 
        <div class="body">
            <p>Attached patch to parse.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Thomas Weidner (thomas) on 2010-07-04T05:41:04.000+0000</p> 
        <div class="body">
            <p>Patch not accepted.
It erases existing functionallity from Zend_Translate</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Thomas Weidner (thomas) on 2010-12-11T14:00:31.000+0000</p> 
        <div class="body">
            <p>Closing as won't fix.
It erases functionallity.</p>

        </div>
    </div>
    </div>

