<h2>ZF-3151: The ZF is not able to use user-defined autoloaders for user-defined classes</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2008-04-19T10:05:52.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2009-05-14T05:47:51.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.8.2 (27/May/09)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Matthew Weier O'Phinney (matthew)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Loader</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
        <li><a href="/issues/browse/ZF-2533">ZF-2533</a></li>
            <li><a href="/issues/browse/ZF-6611">ZF-6611</a></li>
        </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
        <li><a href="/issues/secure/attachment/11281/patch-zf-v4.dif">patch-zf-v4.dif</a></li>
            <li><a href="/issues/secure/attachment/11251/patch_to_bug_3151-3rd_edition.dif">patch_to_bug_3151-3rd_edition.dif</a></li>
            <li><a href="/issues/secure/attachment/11250/patch_to_bug_3151.dif">patch_to_bug_3151.dif</a></li>
            <li><a href="/issues/secure/attachment/11248/patch_to_bug_3151.dif">patch_to_bug_3151.dif</a></li>
        </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>Some ZF classes load user-defined classes (such as Zend_Db_Table_Abstract::fetchRow()) with Zend_Locale::loadClass(). However, the loadClass() method will not work if the user-defined class is not in the PHP's include_path and/or has an application-specific prefix. User-defined autoloaders would work, but Zend_Locale::loadClass() doesn't use them, even if it couldn't load the requested class.</p>

<p>Zend_Locale::loadClass() should use a third optional parameter, $tryUserAutoloaders = false, for this method to try loading the requested class with user-defined autoloaders if it itself couldn't load the requested class.</p>

<p>I'm going to fix this because I need it for my code to work.</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Gustavo Narea (gustavo) on 2008-04-19T11:02:11.000+0000</p> 
        <div class="body">
            <p>The path to fix the bug.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Gustavo Narea (gustavo) on 2008-04-22T10:17:45.000+0000</p> 
        <div class="body">
            <p>The previous patch was incomplete. This also takes into account other instances where the third optional parameter of loadClass() should be used.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Gustavo Narea (gustavo) on 2008-04-22T11:41:04.000+0000</p> 
        <div class="body">
            <p>Hopefully, this is the final edition of the patch (I've found more code to fix).</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Gustavo Narea (gustavo) on 2008-05-02T12:23:11.000+0000</p> 
        <div class="body">
            <p>I found some more code I had to fix, hence the fourth version of my patch.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthew Weier O'Phinney (matthew) on 2008-11-22T09:10:21.000+0000</p> 
        <div class="body">
            <p>Postponed until 2.0.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthew Weier O'Phinney (matthew) on 2009-05-14T05:47:51.000+0000</p> 
        <div class="body">
            <p>This should now be resolved in trunk and the 1.8 release branch.</p>

        </div>
    </div>
    </div>

