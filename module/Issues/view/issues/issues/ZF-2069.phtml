<h2>ZF-2069: Cache Atrophy</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>New Feature</dd>

    <dt>Created:</dt>
    <dd>2007-10-15T02:21:47.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2008-11-13T14:10:24.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.7.0 (17/Nov/08)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Steven Brown (pooh)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Fabien MARTY (fab)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Cache</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>It would be good to be able to allow cache "atrophy". There are two different forms of atrophy that could be available based on data changes:</p>

<p>a) A minimum and maximum cache expiry are set (say 5 mins, 30 mins), at first the expiry is at the minimum (5 mins), if the data has not changed at the end of the expiry period, the expiry period then increases by the atrophy rate (say 20%) so it is then longer (6 mins). This continues until the maximum expiry period. If the data has changed at an expiry point, the expiry period is reset to the minimum (5 mins) or possibly decreases and the process starts again. This attempts to spend less time refreshing cache that does not change often.</p>

<p>b) A minimum and maximum cache expiry are set (say 5 mins, 30 mins), at first the expiry is at the maximum (30mins), if the data has changed at the end of the expiry period, the expiry period then decreases by the atrophy rate (say 20%) so it is then shorter (24 mins). This continues until the minimum expiry period. If the data has not changed at an expiry point, the expiry period is reset to the maxmimum (30 mins) or possibly increases and the process starts again. This attempts to keep changing data fresher.</p>

<p>There is also another approach based on traffic:</p>

<p>c) Minimum and maximum expiries are set as above, along with traffic levels and an atrophy level. As an item becomes more and more popular the cache expiry gets shorter and shorter to ensure the data is as up-to-date as possible.</p>

<p>d) Same as "c" except the cache expiry is set longer and longer as the item gets more popular. This means the load is being reduced by caching more and more when items are popular, however they become more and more out-of-date.</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Thomas Weidner (thomas) on 2007-10-15T13:41:40.000+0000</p> 
        <div class="body">
            <p>Assigned to Fabien</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Fabien MARTY (fab) on 2008-08-29T13:00:59.000+0000</p> 
        <div class="body">
            <p>something like this is done (just now in SVN trunk) by the TwoLevels backend</p>

<p>can you have a look ?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Fabien MARTY (fab) on 2008-09-27T03:08:57.000+0000</p> 
        <div class="body">
            <p>something like this is done (just now in SVN trunk) by the TwoLevels backend</p>

<p>can you have a look ?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Fabien MARTY (fab) on 2008-10-27T12:11:45.000+0000</p> 
        <div class="body">
            <p>probably fixed by the TwoLevels new backend (no news)</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Wil Sinclair (wil) on 2008-11-13T14:10:24.000+0000</p> 
        <div class="body">
            <p>Changing issues in preparation for the 1.7.0 release.</p>

        </div>
    </div>
    </div>

