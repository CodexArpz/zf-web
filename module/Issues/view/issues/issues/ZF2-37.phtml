<h2>ZF2-37: Belated broker marking of started resources</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Sub-task</dd>

    <dt>Created:</dt>
    <dd>2011-07-18T14:52:09.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2012-05-31T15:50:17.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Evgheni Poleacov (zendmania)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Evgheni Poleacov (zendmania)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Broker</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>Possible be better to mark started application resources before it initialization.</p>

<p>Because happens situation when used "modules" resource and one of bootstrap 
try to load resource "modules" and broker try to init it once more with current 
bootstrap as application instance, before resource "modules" would marked like already is run.</p>

<p>My suggestions to move marking like before resource initialization:
Zend\Application\AbstractBootstrap method _executeResource()</p>

<pre class="highlight"><code>
$broker-&gt;markRun($resourceName);
$return = $plugin-&gt;init();
</code></pre>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Evgheni Poleacov (zendmania) on 2011-07-26T08:20:15.000+0000</p> 
        <div class="body">
            <p>Resolved by commit:
984453a5f5bf44a35bb4571a65dfe45e4f1517c0</p>

        </div>
    </div>
    </div>

