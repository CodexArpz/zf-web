<h2>ZF-2760: Zend_View_Helper_Doctype: doctype not persisting</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2008-02-28T17:02:44.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2008-03-06T09:55:30.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Nick Lo (nicklo)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Matthew Weier O'Phinney (matthew)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_View</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>I am setting the doctype like so:</p>

<pre class="highlight"><code>
class MyApp_Controller_Plugin_Init extends Zend_Controller_Plugin_Abstract 
{
    public function dispatchLoopStartup() 
    {
        $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper('viewRenderer');

        $viewRenderer-&gt;view-&gt;doctype('XHTML1_TRANSITIONAL');
    }
}
</code></pre>

<p>Then attaching that to the front controller in my bootstrap.</p>

<p>If I then try to use just...</p>

<pre class="highlight"><code>
&lt;?php echo $this-&gt;doctype(); ?&gt;
</code></pre>

<p>...in my layout file (using Zend_Layout) it causes issues with the W3C validator, getting a "This page is not Valid (no Doctype found)!" result, whereas re-specifying the doctype in the layout...</p>

<pre class="highlight"><code>
&lt;?php echo $this-&gt;doctype('XHTML1_TRANSITIONAL'); ?&gt;
</code></pre>

<p>...passes validation.</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Carlton Gibson (carlton) on 2008-03-01T06:29:59.000+0000</p> 
        <div class="body">
            <p>I can't recreate this using current trunk (r8496)... My milage is that the doctype helper is working fine.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Nick Lo (nicklo) on 2008-03-02T05:03:01.000+0000</p> 
        <div class="body">
            <p>I can confirm that it's also working fine for me too now. Just to add a few more details: I tested this with both XHTML1_TRANSITIONAL and XHTML1_STRICT and was testing the pages using the Firefox Web Developer Extension "Validate Local HTML". The tested pages were on a local server and a live production server. Clearly there was room for more errors to creep in with the testing process itself so it's probably worth closing this.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthew Weier O'Phinney (matthew) on 2008-03-06T09:55:30.000+0000</p> 
        <div class="body">
            <p>Resolved per community comments.</p>

        </div>
    </div>
    </div>

