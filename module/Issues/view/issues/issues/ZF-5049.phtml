<h2>ZF-5049: Unable to send simultaneous requests </h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2008-11-24T11:47:30.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2009-06-16T14:54:07.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Wade Arnold (wadearnold)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Amf</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
        <li><a href="/issues/browse/ZF-6393">ZF-6393</a></li>
        </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>When trying to send two or more requests at the same time on the same connection object, I receive a Client.Data.Underflow error for each request following the first one.  This is the offending code:</p>

<pre><code>        var responder:Responder= new Responder(this.handleUserFilters,Application.application.faultHandler);
        WebService.call("Web_Service_Model.getUserFilters",responder,filterID);

        var responder2:Responder=new Responder(handleFilterProperties,Application.application.faultHandler);
        WebService.call("Web_Service_model.getFilterProperties",responder2,filterID);
</code></pre>

<p>The second web service call will generate the error.  I have been able to work around the issue by creating a function that makes a new NetConnection object for each call requested, however I know that AMF should be capable of handling simultaneous requests as I am coming over from AMFPHP where such a thing was possible.</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Wade Arnold (wadearnold) on 2008-12-30T10:31:58.000+0000</p> 
        <div class="body">
            <p>Can you submit a complete AS class file for this bug. I am unable to recreate this issue.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Andreas Adam (acadam71) on 2009-05-28T09:14:03.000+0000</p> 
        <div class="body">
            <p>I had this problem to. But now - after using the patch from Stefan Klug - it runs fine.
Wade: Will you integrate the patch from stefan in the next version?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Wade Arnold (wadearnold) on 2009-06-16T14:34:35.000+0000</p> 
        <div class="body">
            <p>Issue is dependent on ZF-6393</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Wade Arnold (wadearnold) on 2009-06-16T14:54:07.000+0000</p> 
        <div class="body">
            <p>resolved by ZF-6393</p>

        </div>
    </div>
    </div>

