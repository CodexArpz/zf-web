<h2>ZF-2396: Zend_Db_Adapter_Pdo_Oci wrong quoting for single-quotes</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2008-01-08T12:23:00.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2008-10-10T14:41:47.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.6.2 (13/Oct/08)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Thorsten Kunz (sunfire)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Mickael Perraud (mikaelkael)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Db</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
        <li><a href="/issues/secure/attachment/11370/oracle_oci.patch">oracle_oci.patch</a></li>
        </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>The _quote function in the Zend_Db_Adapter_Pdo_Oci quotes single-quotes with addcslashes. This is wrong since oracle requires a single-quote to be escaped with another single-quote and not a backslash.
Please use the _quote() function from Zend_Db_Adapter_Oracle for quoting since there is it correct.</p>

<p>Thanks</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Christian MÃ¼nch (cmuench) on 2008-02-07T08:04:32.000+0000</p> 
        <div class="body">
            <p>We tested the resolution in the bug description. This fixes the broken oci adapter.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Thorsten Kunz (sunfire) on 2008-03-18T09:33:40.000+0000</p> 
        <div class="body">
            <p>I wonder why this is not fixed yet? This allows for SQL injection if people use the PDO_OCI adapter and rely on _quote() to work as advertised!
The fix is so easy and already accepted in the regular Oracle adapter so please can someone commit the fix?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by rodolfo (rodolfo) on 2008-07-07T11:44:22.000+0000</p> 
        <div class="body">
            <p>I have problems like this using Zend_Auth_Adapter_DbTable with Oracle Express and I created a patch to this in  Zend_Db_Adapter_Pdo_Oci.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Mickael Perraud (mikaelkael) on 2008-10-04T06:51:24.000+0000</p> 
        <div class="body">
            <p>Fixed in SVN11672 (applies same quoting as Oracle adapter).
Fix test failure testSelectColumnWithColonQuotedParameter.</p>

        </div>
    </div>
    </div>

