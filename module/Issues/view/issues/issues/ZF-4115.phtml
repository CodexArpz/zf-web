<h2>ZF-4115: Zend_Search_Lucene should offer hightlight() method to hightlight any string. Without DOM. </h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Improvement</dd>

    <dt>Created:</dt>
    <dd>2008-08-29T06:59:39.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2009-04-27T17:27:03.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.8.0 (30/Apr/09)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Tomáš Fejfar (tomas.fejfar@gmail.com)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Alexander Veremyev (alexander)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Search_Lucene</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>When using Lucene, I usualy need to hightlight the search therms ONLY in the actual text gathered from query hit. Now the highlightMatches() method expects me to input the whole bunch of HTML including header. Otherwise it can't make the UTF-8 encoding work...</p>

<p>Returning error message:
Warning: DOMDocument::saveHTML(): output conversion failed due to conv error in /srv/.../www/web/library/Zend/Search/Lucene/Document/Html.php on line 339 Warning: DOMDocument::saveHTML(): Bytes: 0x83 0xC2 0xAD 0x20 in /srv/.../www/web/library/Zend/Search/Lucene/Document/Html.php on line 339</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Alexander Veremyev (alexander) on 2009-04-27T17:27:02.000+0000</p> 
        <div class="body">
            <p>Done.</p>

<p>Zend_Search_Lucene_Search_Query class has an additional htmlFragmentHighlightMatches() method now.</p>

<p>encoding also can be specified separately using optional parameters of highlightMatches() and htmlFragmentHighlightMatches()  methods.</p>

        </div>
    </div>
    </div>

