<h2>ZF-296: Zend_Uri_Http validateFragment() and validateQuery() always return true</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2006-08-01T01:17:11.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2007-07-05T14:43:17.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>0.2.0 (29/Oct/06)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Shahar Evron (shahar)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Uri</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>Both Zend_Uri_Http::validateFragment() and Zend_Uri_Http::validateQuery() always return true (except for the exception thrown if preg_match() returns an error)</p>

<p>Shouldn't it 
  return (boolean) $status;
or
  return $status == 1;
instead?</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Shahar Evron (shahar) on 2006-09-13T16:16:18.000+0000</p> 
        <div class="body">
            <p>Should be fixed in revision 1064. Please update and test again.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Gunar Scholz (felix) on 2006-09-14T05:53:03.000+0000</p> 
        <div class="body">
            <p>Looks good.
As mentioned in 
  <a href="http://framework.zend.com/wiki/display/ZFMLGEN/mail/4337">http://framework.zend.com/wiki/display/…</a> 
I also would recommend to remove the exceptions in the validate methods.
(It seems in the past these methods were non-public. Why else starts the text of the exceptions with "Internal error"?)</p>

<p>Trivia:
The use of 
{{return (boolean) $status;}}
versus
{{return $status == 1;}}
should be unified. I recommend the first one. All regexps start with ^ and end with $, so preg_match's result is nothing else than 1 or false.</p>

<p>Please see <a href="http://framework.zend.com/fisheye/browse/Zend_Framework/trunk/library/Zend/Uri/Http.php?r=1064">http://framework.zend.com/fisheye/browse/…</a>
The code needs still some cosmetic changes to comply to the coding standard, i.e. tabs used instead of spaces.</p>

        </div>
    </div>
    </div>

