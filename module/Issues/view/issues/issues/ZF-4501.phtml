<h2>ZF-4501: Unable to query database.</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Docs:  Problem</dd>

    <dt>Created:</dt>
    <dd>2008-10-06T07:49:06.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2009-01-11T21:42:47.000+0000</dd>

    <dt>Status:</dt>
    <dd>Closed</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Ralph Schindler (ralph)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Db_Adapter_Db2</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>I am receiving the following error when I attempt to instantiate an extended Zend_Db_Table_Abstract object.</p>

<p>I am able to use the native db2_connect() methods to connect to the database and perform queries.</p>

<p>Fatal error: Uncaught exception 'Zend_Db_Statement_Db2_Exception' with message 'COLUMNS in SYSCAT type *FILE not found. SQLCODE=-204' in /usr/local/Zend/ZendFramework/library/Zend/Db/Statement/Db2.php:69 Stack trace: #0 /usr/local/Zend/ZendFramework/library/Zend/Db/Statement.php(109): Zend_Db_Statement_Db2-&gt;_prepare('SELECT DISTINCT...') #1 /usr/local/Zend/ZendFramework/library/Zendc/Db/Adapter/Db2.php(215): Zend_Db_Statement-&gt;__construct(Object(ZendC_Db_Adapter_Db2), 'SELECT DISTINCT...') #2 /usr/local/Zend/ZendFramework/library/Zend/Db/Adapter/Abstract.php(429): ZendC_Db_Adapter_Db2-&gt;prepare('SELECT DISTINCT...') #3 /usr/local/Zend/ZendFramework/library/Zendc/Db/Adapter/Db2.php(430): Zend_Db_Adapter_Abstract-&gt;query('SELECT DISTINCT...') #4 /usr/local/Zend/ZendFramework/library/Zend/Db/Table/Abstract.php(604): ZendC_Db_Adapter_Db2-&gt;describeTable('ADDRESSTYPE', NULL) #5 /usr/local/Zend/ZendFramework/library/Zend/Db/Table/Abstract.php(533): Zend_Db_Table_Abstract-&gt;_setupMetadata() #6 /usr/local/Zend/ZendFramework/library/Z in /usr/local/Zend/ZendFramework/library/Zend/Db/Statement/Db2.php on line 69</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Kristof Vansant (lupus) on 2008-11-05T14:00:52.000+0000</p> 
        <div class="body">
            <p><a href="http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/admin/r0001038.htm">http://publib.boulder.ibm.com/infocenter/db2luw/…</a>
maybe telling what version of DB2 you are running would be usefull</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Wil Sinclair (wil) on 2008-11-25T12:35:44.000+0000</p> 
        <div class="body">
            <p>Is this still an issue? Reporter, have you tried resolving this on the mailing list?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Simon Verberne (zedmond) on 2008-12-04T07:33:01.000+0000</p> 
        <div class="body">
            <p>I had circumvented this issue by using the "temporary" Db2 adapter (located in Zendc/Db/Adapter).  Yesterday I upgraded our framework to version 1.7.1 and I am getting this error again.</p>

<p>My ini file looks like this:<br />
db.adapter              = Db2
db.params.username          = MY_USER
db.params.password          = *************
db.params.schema            = MY_SCHEMA
db.params.dbname            = MY_DB</p>

<p>The bootstrap creates the adapter this way:
$config = new Zend_Config_Ini('../application/default/configs/wtu.ini', 'development');
$db = Zend_Db::factory($config-&gt;db);
Zend_Db_Table::setDefaultAdapter($db);</p>

<p>My system info is as follows:
Zend Core Version 2.6.0 
PHP Version 5.2.6 
Zend Engine Version 2.2.0 
Server API apache2handler 
PHP Configuration File /usr/local/Zend/core/etc/php.ini 
Server Name 127.0.0.1 
Server Software Apache/2.2.6 (Unix) Zend Core/2.6.0 PHP/5.2.6 
OS Version OS400 LAB 4 5 0010000907DD 
Server Port 8000</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Ralph Schindler (ralph) on 2008-12-04T07:45:19.000+0000</p> 
        <div class="body">
            <p>Hey Simon,</p>

<p>Can you try this code from standard library trunk:
<a href="http://framework.zend.com/code/changelog/Standard_Library/?cs=12998">http://framework.zend.com/code/changelog/…</a></p>

<p>Specifically the DB2 adapter in there.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Ralph Schindler (ralph) on 2009-01-11T21:42:17.000+0000</p> 
        <div class="body">
            <p>is this still an issue?  have you had a chance to try the adapter in 1.7.2?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Ralph Schindler (ralph) on 2009-01-11T21:42:46.000+0000</p> 
        <div class="body">
            <p>please reopen if this is still an issue</p>

        </div>
    </div>
    </div>

