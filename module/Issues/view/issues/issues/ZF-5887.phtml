<h2>ZF-5887: Zend_Cache_Backend_Memcached::addServer throws exception with older php memcache extensions</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2009-02-26T01:24:05.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2009-03-04T11:18:41.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.8.0 (30/Apr/09)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Markus Hauser (markus08)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Fabien MARTY (fab)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Cache</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>In this issue: <a href="http://framework.zend.com/issues/browse/ZF-5260">http://framework.zend.com/issues/browse/ZF-5260</a> functionality for memcache weight, timeout, retry_interval and status were added.
Now we are running memcache on a Debian 4.0 with PHP memcache extension 2.0.1. In this version the extension only allows 6 parameters and throws an ErrorException if you use more.
As you see, the affected field is the 'status' field in the addServer function. As I did not see how to get the version of the php extension, i created the following patch which is working fine for me. It also should not affect newer versions of the extension, because the default setting in the php extension is true, just like Zend_Cache_Backend_Memcached does.</p>

<p>Patch: <a href="http://www.vivid-planet.com/files/Zend_Cache_Backend_Memcached.php.patch.txt">http://vivid-planet.com/files/â€¦</a></p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Fabien MARTY (fab) on 2009-03-04T11:18:41.000+0000</p> 
        <div class="body">
            <p>I just commited a "compatibility" option into SVN trunk to deal with that kind of problems</p>

<p>For the moment, this option controls only the status parameter like you describe it here.</p>

<p>Many thanks</p>

        </div>
    </div>
    </div>

