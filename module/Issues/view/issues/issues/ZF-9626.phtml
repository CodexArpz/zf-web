<h2>ZF-9626: Zend_Soap_Client requests do not respect the port specified.</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2010-04-06T20:19:24.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2012-10-08T10:11:40.000+0000</dd>

    <dt>Status:</dt>
    <dd>Open</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Simon (_sims_)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Alexander Veremyev (alexander)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Soap_Client</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>Creating the client succeeds:
$this-&gt;client = new Zend_Soap_Client('<a href="http://server.com:10080/path/service.asmx?WSDL">http://server.com:10080/path/service.asmx?WSDL</a>');
A request fails:
$response = $this-&gt;client-&gt;request($query);
with
"Internal Server Error"</p>

<p>However when I pretend I have a proxy:
$this-&gt;client = new Zend_Soap_Client('<a href="http://server.com:10080/path/service.asmx?WSDL',array">http://server.com/path/service.asmx/â€¦</a>('proxy_host' =&gt; 'server.com', 'proxy_port' =&gt; 10080));
The request succeeds:
$response = $this-&gt;client-&gt;request($query);</p>

<p>I think this may be a PHP bug. If so, let me know, and I will report it there. Thanks!</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Jan Pieper (jpieper) on 2010-10-17T14:22:38.000+0000</p> 
        <div class="body">
            <p>Is your client running on the same server using the same port as your server?</p>

<p>I am not able to reproduce this bug so it's quite hard to say whether this is a bug or not.</p>

<p>Are you able to provide some more information?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Stef M (stef_m) on 2012-08-10T07:22:08.000+0000</p> 
        <div class="body">
            <p>Hello, I'm having the same problem. The response: SoapFault-&gt;message = 'Not Found'.
I have used the same solution as Simon (pretend i have a proxy).</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Shamil Nunhuck (shamil) on 2012-10-08T10:11:40.000+0000</p> 
        <div class="body">
            <p>Issue appears to be a bug in PHP: <a href="https://bugs.php.net/bug.php?id=30359">https://bugs.php.net/bug.php?id=30359</a>, apparently was fixed in 5.0, but still persists throughout. As noted above, "fix" is to send the request through a fake proxy.</p>

<p>Will test and confirm whether this matters if the soap client and server are local or remote.</p>

        </div>
    </div>
    </div>

