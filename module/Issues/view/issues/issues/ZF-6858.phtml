<h2>ZF-6858: Zend_Form_File_Element: If file uploaded contains non latin characters (e.g. Arabic, Hebrew), $adapter-&gt;getFileName() returns only file extension.</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2009-05-29T06:57:36.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2009-06-02T05:23:35.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.8.3 (09/Jun/09)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Thomas Weidner (thomas)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Form</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>I have a form with a file element as such:
$image = new Zend_Form_Element_File($image);
    $image-&gt;setLabel('Upload picture')
        -&gt;setRequired(TRUE)
        -&gt;setDestination($full_image_path)
        -&gt;addFilter('StripTags')
        -&gt;addFilter('StringTrim')
        -&gt;addValidator('Size', true, '2MB')
        -&gt;addValidator('Extension', true, 'jpg,jpeg');
    $image-&gt;getValidator('Extension')-&gt;setMessage('Only Jpeg (.jpg, .jpeg) images allowed');
$form-&gt;addElement($image);</p>

<p>Then when I process the form I have the following:
$adapter = $form-&gt;getElement($image)-&gt;getTransferAdapter();
$filename = $adapter-getFileName();
When the name of the file uploaded uses non latin characters then the file name returned is empty with only the file extension (.jpg, for instance). The file is uploaded normally.</p>

<p>Tested with filename containing Hebrew, Arabic, Thai and Russian characters.</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Thomas Weidner (thomas) on 2009-05-29T11:36:32.000+0000</p> 
        <div class="body">
            
&lt;?php echo $form-&gt;render(new Zend_View());?&gt;

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by G Cohen (untitled.no4@gmail.com) on 2009-06-02T02:16:03.000+0000</p> 
        <div class="body">
            <p>Thank you for the detailed answer. I'll have to think of a workaround to this.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Thomas Weidner (thomas) on 2009-06-02T05:23:29.000+0000</p> 
        <div class="body">
            <p>When you know a workaround feel free to give us the information.
Maybe we can include such a workaround also within the framework itself.</p>

        </div>
    </div>
    </div>

