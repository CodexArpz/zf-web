<h2>ZF-9570: captchaOptions in html code  Zend_Form_Element_Captcha</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2010-03-29T13:36:33.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2010-04-14T11:57:06.000+0000</dd>

    <dt>Status:</dt>
    <dd>Closed</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Matthew Weier O'Phinney (matthew)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Form</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
        <li><a href="/issues/browse/ZF-9678">ZF-9678</a></li>
        </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
        <li><a href="/issues/secure/attachment/12963/screenshot-1.jpg">screenshot-1.jpg</a></li>
        </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>Original code:
class Zend_Form_Element_Captcha extends Zend_Form_Element_Xhtml
    public function setOptions(array $options)
    {
        parent::setOptions($options);/* Set parent why ? */
        if (array_key_exists('captcha', $options)) {
            if (array_key_exists('captchaOptions', $options)) {
                $this-&gt;setCaptcha($options['captcha'], $options['captchaOptions']);
                unset($options['captchaOptions']);
            } else {
                $this-&gt;setCaptcha($options['captcha']);
            }
            unset($options['captcha']);
        }</p>

<pre><code>    return $this;
}
</code></pre>

<p>in html code:
captchaoptions="E:\projects\cms\content/font/arial.ttf E:\projects\cms\content/img/captcha/ <a href="http://cms.local/content/img/captcha/">http://cms.local/content/img/captcha/</a> 0 0 pl 300 70"</p>

<p>why ?</p>

<p>http://cms.local/content/img/captcha/ 0 0 pl 300 70" value="55dec9b6ab2073065df9267ff4a9985e" name="captcha[id]"/&gt;
http://cms.local/content/img/captcha/ 0 0 pl 300 70" value="" name="captcha[input]"/&gt;</p>

<p>past my modification:</p>

<pre><code>public function setOptions(array $options)
{
    if (array_key_exists('captcha', $options)) {
        if (array_key_exists('captchaOptions', $options)) {
            $this-&gt;setCaptcha($options['captcha'], $options['captchaOptions']);
            unset($options['captchaOptions']);
        } else {
            $this-&gt;setCaptcha($options['captcha']);
        }
        unset($options['captcha']);
    }
    parent::setOptions($options);/* remove captchaOptions and set Option */
    return $this;
}
</code></pre>

<p>captcha working good.
is it good idea ?</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Christian Albrecht (alab) on 2010-04-05T02:16:12.000+0000</p> 
        <div class="body">
            <p>Finally you found out how to do it - ZF-9571.
This is an Issue Tracker for reporting bugs, for help ask in irc #zftalk. or the <a href="http://n4.nabble.com/Zend-Framework-f634138.html">mailing list</a>, please.
Closing as a Non-issue.</p>

        </div>
    </div>
    </div>

