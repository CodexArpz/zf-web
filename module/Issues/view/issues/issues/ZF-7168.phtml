<h2>ZF-7168: Zend_Application automatic Zend_Session setup with Zend_Db_Table as adapter gives fatal error</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2009-06-30T21:31:19.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2009-09-17T14:41:39.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Alexandre Nault (anault)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Matthew Weier O'Phinney (matthew)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Application</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
        <li><a href="/issues/browse/ZF-6942">ZF-6942</a></li>
        </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>When autoloading resources with Zend_Application with the following setup (application.ini) :</p>

<p>resources.db.adapter               = "pdo_mysql"
resources.db.params.dbname         = "bla"
resources.db.params.password       = "bla"
resources.db.params.username       = "bla"
resources.db.params.host           = "localhost"
resources.db.params.charset        = "utf8"
resources.db.isDefaultTableAdapter = true</p>

<p>resources.session.name = "BLA"
resources.session.use_only_cookies = true
resources.session.saveHandler.class = "Zend_Session_SaveHandler_DbTable"
resources.session.saveHandler.options.name = "session_data"
resources.session.saveHandler.options.primary = "id"
resources.session.saveHandler.options.modifiedColumn = "modified"
resources.session.saveHandler.options.dataColumn = "data"
resources.session.saveHandler.options.lifetimeColumn = "lifetime"
resources.session.saveHandler.options.lifetime = 1800</p>

<p>The application crashes since version 1.8.1 (works with 1.8.0 without a glitch) with the following errors :
 Fatal error: Uncaught exception 'Zend_Db_Table_Exception' with message 'No adapter found for Zend_Session_SaveHandler_DbTable' in /usr/share/php/libzend-framework-php/Zend-cvs-290609/Db/Table/Abstract.php:670 Stack trace: #0 /usr/share/php/libzend-framework-php/Zend-cvs-290609/Db/Table/Abstract.php(655): Zend_Db_Table_Abstract-&gt;_setupDatabaseAdapter() #1 /usr/share/php/libzend-framework-php/Zend-cvs-290609/Session/SaveHandler/DbTable.php(401): Zend_Db_Table_Abstract-&gt;_setup() #2 /usr/share/php/libzend-framework-php/Zend-cvs-290609/Db/Table/Abstract.php(289): Zend_Session_SaveHandler_DbTable-&gt;_setup() #3 /usr/share/php/libzend-framework-php/Zend-cvs-290609/Session/SaveHandler/DbTable.php(205): Zend_Db_Table_Abstract-&gt;__construct(Array) #4 /usr/share/php/libzend-framework-php/Zend-cvs-290609/Application/Resource/Session.php(59): Zend_Session_SaveHandler_DbTable-&gt;__construct(Array) #5 /usr/share/php/libzend-framework-php/Zend-cvs-290609/Application/Resource/ResourceAbstract.php(93): Zend_Application_Resource_Session-&gt;setSave in /usr/share/php/libzend-framework-php/Zend-cvs-290609/Db/Table/Abstract.php on line 670</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Alexandre Nault (anault) on 2009-06-30T21:45:00.000+0000</p> 
        <div class="body">
            <p>date typo on my path to the framework cvs version</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Andrew Stoltz (andyl56) on 2009-07-15T12:36:57.000+0000</p> 
        <div class="body">
            <p>This is a duplicate of ZF-6942</p>

        </div>
    </div>
    </div>

