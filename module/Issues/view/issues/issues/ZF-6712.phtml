<h2>ZF-6712: When using Zend_Form_Element_Multi (radio) - id is generated from value. This causes issues with negative to positive ranges.</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2009-05-18T08:06:53.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2012-11-20T21:37:42.000+0000</dd>

    <dt>Status:</dt>
    <dd>Open</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
        None
                    </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Form</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>It appeas that labels associated with individual radio button items have an id that is generated from the radio-set name (rating) and the value of each individual radio button. In the example below, you will see the values range from negative to positive values. Because of the way the id is generated, we will end up with duplicate elements sharing the same id. This not only breaks validation, but also usability, as clicking on a label no longer selects the expected radio button, as it should do.</p>

<p>There are ways around this from a developers perspective, Bittarman in IRC suggested adding a fixed number to each of the values and subtracting them after form submission. Personally, I find that a dirty hack that should be avoided. I could also choose different values for my radios, but again, the values here match what is expected in the application and the database, writing some means of converting them before saving them seems wrong too.</p>

<p>Perhaps, if we don't change the way the id's are generated by default, we could have an array which keeps a list of the id's already generated for a form and if a new id is generated that matches an existing id, we could append the id, perhaps starting up the alphabet.</p>

<p>[edit]
In fact, because the label's encompass the radio form element, we do not even need the for attribute. Labels automatically point to the encompassed element when selected.</p>

<p>[one more edit!]
I have also just noticed that the main label, set when doing {{$rating-&gt;setLabel('Rating')}} has a for attribute which has a non-existing id set. This also causes validation to fail, so preferably, there should be no for attribute here.</p>

<pre class="highlight"><code>
$rating = new Zend_Form_Element_Radio('rating');
$rating-&gt;setLabel('Rating')-&gt;addMultiOptions(array(
    -2    =&gt;    'very bad',
    -1    =&gt;    'bad',
     0    =&gt;    'indifferent',
     1    =&gt;    'good',
     2    =&gt;    'very good'
));
</code></pre>

<p>Regards,
Steven</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Simon Corless (sico) on 2010-12-09T00:37:15.000+0000</p> 
        <div class="body">
            <p>This is also related to this issue: <a href="http://framework.zend.com/issues/browse/ZF-4191">http://framework.zend.com/issues/browse/ZF-4191</a></p>

<p>You will see in this bug report it's to do with the filter applied to option values when creating the ids/.</p>

<p>I have unfortunately come across this little issue this morning although it appears to have been an issue since the radio elements release.</p>

<p>Simon</p>

        </div>
    </div>
    </div>

