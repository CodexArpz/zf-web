<h2>ZF-4582: Set of GData unit tests errors: 'failed to open stream: No such file or directory'</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Unit Tests: Problem</dd>

    <dt>Created:</dt>
    <dd>2008-10-13T01:52:09.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2009-02-12T15:20:54.000+0000</dd>

    <dt>Status:</dt>
    <dd>Closed</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.7.0 (17/Nov/08)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Wil Sinclair (wil)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Gdata</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>{panel}
1) testToAndFromString(Zend_Gdata_Gbase_ItemFeedTest)
file_get_contents(Zend/Gdata/Gbase/_files/TestDataGbaseItemFeedSample1.xml): failed to open stream: No such file or directory</p>

<p>2) testToAndFromString(Zend_Gdata_Gbase_SnippetFeedTest)
file_get_contents(Zend/Gdata/Gbase/_files/TestDataGbaseSnippetFeedSample1.xml): failed to open stream: No such file or directory</p>

<p>3) testToAndFromString(Zend_Gdata_Spreadsheets_SpreadsheetFeedTest)
file_get_contents(Zend/Gdata/Spreadsheets/_files/TestDataSpreadsheetFeedSample1.xml): failed to open stream: No such file or directory</p>

<p>4) testToAndFromString(Zend_Gdata_Spreadsheets_WorksheetFeedTest)
file_get_contents(Zend/Gdata/Spreadsheets/_files/TestDataWorksheetFeedSample1.xml): failed to open stream: No such file or directory</p>

<p>5) testToAndFromString(Zend_Gdata_Spreadsheets_ListFeedTest)
file_get_contents(Zend/Gdata/Spreadsheets/_files/TestDataListFeedSample1.xml): failed to open stream: No such file or directory</p>

<p>6) testToAndFromString(Zend_Gdata_Docs_DocumentListFeedTest)
file_get_contents(Zend/Gdata/Docs/_files/TestDataDocumentListFeedSample.xml): failed to open stream: No such file or directory
{panel}</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Trevor Johns (tjohns) on 2008-10-13T03:25:32.000+0000</p> 
        <div class="body">
            <p>I wasn't able to reproduce this on my end.</p>

<p>However, I'm going to try replacing the hard-coded pathnames with calls to dirname(<strong>FILE</strong>), or similar, and see if that fixes this problem for Alexander.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Thomas Weidner (thomas) on 2008-10-19T02:11:20.000+0000</p> 
        <div class="body">
            <p>Erased fix-version as issue is not fixed with this release</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Ryan Boyd (rboyd) on 2008-10-19T10:54:59.000+0000</p> 
        <div class="body">
            <p>Hi Thomas,</p>

<p>Can you describe the environment from which you're running these tests?  What directory are you running phpunit from?</p>

<p>When running phpunit from the root of the tests directory, this should work fine:</p>

<p>The function call used in these tests is like this example:
file_get_contents('Zend/Gdata/Gbase/_files/TestDataGbaseItemFeedSample1.xml')</p>

<p>The files exist in the 'tests' directory-- example:
<a href="http://framework.zend.com/svn/framework/standard/tags/release-1.7.0PR/tests/Zend/Gdata/Gbase/_files/TestDataGbaseItemFeedSample1.xml">http://framework.zend.com/svn/framework/â€¦</a></p>

<p>I've always thought that the tests were supposed to be run from the root of the tests directory--- if that's not correct, we can tell file_get_contents to search the include path... but the root of the tests directory will need to be in the include path then too.</p>

<p>Thoughts?</p>

<p>Thanks,
-Ryan</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Alexander Veremyev (alexander) on 2008-11-06T09:38:51.000+0000</p> 
        <div class="body">
            <p>Hi Ryan,</p>

<p>Tests are intended to be started from the root of tests directory. But it's also useful to run tests separately from their own directories sometimes.</p>

<p>So it's a good practice to use absolute paths based on current script directory (like <em>dirname(__FILE__) . '_files/...'</em>)</p>

<p>Tests are passed correctly if they are started from root now. So issue should be closed If you don't plan to change existing code using full pathnames.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Wil Sinclair (wil) on 2008-11-07T11:44:39.000+0000</p> 
        <div class="body">
            <p>Fixed with Rev# 12350</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Trevor Johns (tjohns) on 2009-02-12T15:20:54.000+0000</p> 
        <div class="body">
            <p>Marking as fixed for 1.7.0.</p>

        </div>
    </div>
    </div>

