<h2>ZF-12552: Zend_Service_Rackspace_Files::getObjects() throws exception when listing pseudo-directories</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2013-03-25T14:21:08.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2013-04-05T16:06:53.000+0000</dd>

    <dt>Status:</dt>
    <dd>Closed</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Matt Kynx (kynx)
            </dd>

    <dt>Assignee:</dt>
    <dd>
        None
                    </dd>

    <dt>Tags:</dt>
    <dd><ul>    </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
        <li><a href="/issues/secure/attachment/15423/ZF-12552-test.patch">ZF-12552-test.patch</a></li>
            <li><a href="/issues/secure/attachment/15422/ZF-12552.patch">ZF-12552.patch</a></li>
        </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>According to the Rackspace docs[1] you should be able to get a listing of pseudo-directories by passing 'delimiter' and 'prefix' params to getObjects, something like:</p>

<p>$cf-&gt;getObjects('mycontainer', array('delimiter' =&gt; '/', 'prefix' =&gt; 'path/to/mydir/');</p>

<p>But if you try this you get a Zend_Service_Rackspace_Files_Exception - "You must pass the name of the object in the array (name)".</p>

<p>The problem is that when listing directories the response contains a 'subdir' element, not a 'name' element. The attached patch allows Zend_Service_Rackspace_Files_Object to deal with this correctly.</p>

<p>[1] <a href="http://docs.rackspace.com/files/api/v1/cf-devguide/content/Pseudo-Hierarchical_Folders_Directories-d1e1580.html">http://docs.rackspace.com/files/api/…</a></p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Frank Brückner (frosch) on 2013-03-25T14:24:10.000+0000</p> 
        <div class="body">
            <p>Hi Matt,
can you also add some unit tests?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matt Kynx (kynx) on 2013-03-25T15:22:53.000+0000</p> 
        <div class="body">
            <p>Yeah, will do. I'm also trying to track these issues against ZF2 and tend to do tests there... but it's all becoming a bit of a headache :|</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matt Kynx (kynx) on 2013-03-25T16:29:55.000+0000</p> 
        <div class="body">
            <p>Offline test. Not sure how I'd go about writing an online test. Pointers welcome!</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Ralph Schindler (ralph) on 2013-04-05T16:06:53.000+0000</p> 
        <div class="body">
            <p>This issue has been closed on Jira and moved to GitHub for issue tracking.  To continue following the resolution of this issues, please visit: <a href="https://github.com/zendframework/zf1/issues/68">https://github.com/zendframework/zf1/issues/68</a></p>

        </div>
    </div>
    </div>

