<h2>ZF-10416: BACKUP DATABASE statement on MS SQL 2005 trows an exception</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2010-09-03T13:48:57.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2010-11-19T09:08:58.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Ralph Schindler (ralph)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Db</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>The following statement works fine from MS SQL Managment Studio:
BACKUP DATABASE GlobalTest FILEGROUP = '82' TO DISK = 'F:\GlobalTest\82\US-LWW_ver_1.bak';
It returns:
Processed 28528 pages for database 'GlobalTest', file '82' on file 1.
Processed 2 pages for database 'GlobalTest', file 'GlobalTest_log' on file 1.
BACKUP DATABASE...FILE= successfully processed 28530 pages in 1.300 seconds (179.777 MB/sec).</p>

<p>If the same statement is executed from script it trows Zend_Db_Statement_Exception:
[Microsoft][SQL Server Native Client 10.0][SQL Server]Processed 28528 pages for database 'GlobalTest', file '82' on file 1."</p>

<p>Environment: MS Windows Server 2003 R2, MS SQL Server 2005 Enterprise edition. All service packs are applied.</p>

<p>Thank you!</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Patrick Figel (patf) on 2010-09-14T12:27:34.000+0000</p> 
        <div class="body">
            <p>For some weird reason, Microsoft SQL Server returns those messages as warnings.
By default, SQL Server Driver handles warnings like errors.
To change the behaviour, put the following line in your php.ini:
sqlsrv.WarningsReturnAsErrors = 0
... or use sqlsrv_configure:
sqlsrv_configure("WarningsReturnAsErrors", 0);</p>

<p>This can be marked as "not an issue".</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Misha Krassovski (mkrassovski) on 2010-09-15T10:31:30.000+0000</p> 
        <div class="body">
            <p>Thank you very much!</p>

        </div>
    </div>
    </div>

