<h2>ZF-11543: PDF with Zend_Pdf_Page::drawText() and empty string displays corrupt in PDF Complete</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2011-07-08T16:09:01.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2011-07-08T16:10:31.000+0000</dd>

    <dt>Status:</dt>
    <dd>Open</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Mark van der Gugten (ticketlab)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Dolf Schimmel (Freeaqingme) (freak)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Pdf</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>When drawText() is called with an empty string, the resulting PDF is displayed corrupted when opened with "PDF Complete" ("Error on Page ..."). There is no problem viewing that same file with either Adobe Reader or Foxit Reader.</p>

<p>PDF Complete Corporate Edition 3.5.307</p>

<p>Test code (exception handling removed):</p>

<p>require_once 'Zend/Pdf.php';</p>

<p>$pdf = new Zend_Pdf();
$page1 = $pdf-&gt;newPage(Zend_Pdf_Page::SIZE_A4);
$pdf-&gt;pages[] = $page1;
$font = Zend_Pdf_Font::fontWithName( Zend_Pdf_Font::FONT_HELVETICA );
$page1-&gt;setFont( $font, 36 );
$page1-&gt;drawText( '', 72, 320 );
$str = $pdf-&gt;render();</p>

<p>$strFilename = 'demo.pdf';
header('Content-Type: application/octet-stream');
header( 'Content-Length: ' . strlen($str) );
header( 'Content-disposition: inline; filename="' . $strFilename . '"' );
header('Cache-Control:');
header('Pragma:');
print $str;</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>
    <p class="comments">No comments to display</p>
    
</div>

