<h2>ZF-7902: Zend_Filter_StringTrim does not work when trim string is '/'</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2009-09-20T19:26:28.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2010-03-11T10:28:54.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.10.0 (27/Jan/10)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Thomas Weidner (thomas)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Filter</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
        <li><a href="/issues/browse/ZF-8782">ZF-8782</a></li>
        </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
        <li><a href="/issues/secure/attachment/12260/StringTrim.php.diff">StringTrim.php.diff</a></li>
            <li><a href="/issues/secure/attachment/12881/StringTrimTest.php.diff">StringTrimTest.php.diff</a></li>
        </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>Zend_Filter_StringTrim no longer works (i just upgraded from 1.7.3) when the string you wish to trim is '/'.</p>

<p>I get this warning and Zend_Filter_StringTrim::filter returns 0
Warning: preg_replace() [function.preg-replace]: Unknown modifier ']' in Zend/Filter/StringTrim.php on line 112</p>

<p>How to replicate:
$stringTrim = new Zend_Filter_StringTrim('/');
$stringTrim-&gt;filter('/some/uri/here/');</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Christian Wenz (wenz) on 2009-09-24T01:34:18.000+0000</p> 
        <div class="body">
            <p>The issue is caused by the forward slash also being the delimiter in the regular expression used. I've prepared a patch that escapes the forward slash properly.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Christian Wenz (wenz) on 2009-09-24T01:52:33.000+0000</p> 
        <div class="body">
            <p>Patch for ZF-7902</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Christian Wenz (wenz) on 2009-09-24T01:54:43.000+0000</p> 
        <div class="body">
            <p>(sorry for the duplicate upload, but got a stacktrace on the first try. deleting one of the files.)</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Thomas Weidner (thomas) on 2009-09-24T13:59:26.000+0000</p> 
        <div class="body">
            <p>Fixed with r18399.
Thnx for the patch.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Coen Hyde (coenhyde) on 2010-01-12T02:00:14.000+0000</p> 
        <div class="body">
            <p>This issue still present in version 1.9.7</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Thomas Weidner (thomas) on 2010-01-12T03:54:05.000+0000</p> 
        <div class="body">
            <p>This issue is marked as fixed for the next minor release which is 1.10.
Otherwise "Fix-Version" would point to a defined release where this issue has been solved.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Christian Wenz (wenz) on 2010-03-11T10:28:54.000+0000</p> 
        <div class="body">
            <p>IMHO the test case for this issue does not check for the bug reported here. Attaching a changed test case.</p>

        </div>
    </div>
    </div>

