<h2>ZF-8897: Zend_Cache_Backend_Memcached - getFillingPercentage fails if one memcache server is down</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2010-01-21T14:06:06.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2010-01-24T15:40:24.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.10.0 (27/Jan/10)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Are Pedersen (are)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Marc Bennewitz (private) (mabe)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Cache</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
        <li><a href="/issues/secure/attachment/12677/ZF-8897.diff">ZF-8897.diff</a></li>
        </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>When using Zend_Cache_Backend_TwoLevels and the memcached backend, calls to getFillingPercentage is done.
If using multiple memcached servers and one memcached server is down, the getFillingPercentage throws an exception.
This renders the whole caching mechanism dead...
It should still work as long as some memcached servers are up. The filling percentage stats isn't that important for the functionality.</p>

<p>I propose to just ignore any memcached servers that are down in this call.</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Marc Bennewitz (private) (mabe) on 2010-01-24T08:15:21.000+0000</p> 
        <div class="body">
            <p>Thanks for your report.</p>

<p>The added patch only logs if one server failed and throws exception only if all server failed.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Marc Bennewitz (private) (mabe) on 2010-01-24T15:40:24.000+0000</p> 
        <div class="body">
            <p>fixed in r20588 (trunk) &amp; r20589 (1.10 branch)</p>

<p>-&gt; tests: After adding a not existing memcached server there are some more failed tests. I'm creating a new issue for it.</p>

        </div>
    </div>
    </div>

