<h2>ZF-12524: Zend_Mail imap getContent does not work on SmarterMail servers</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2013-02-19T14:57:02.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2013-04-05T16:06:59.000+0000</dd>

    <dt>Status:</dt>
    <dd>Closed</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
                stephen (farzher)
            </dd>

    <dt>Assignee:</dt>
    <dd>
        None
                    </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Mail</li>
            <li>mail</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p><a href="http://stackoverflow.com/questions/14946968/zend-mail-imap-getcontent-not-working-on-smartermail-server">http://stackoverflow.com/questions/14946968/…</a></p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Frank Brückner (frosch) on 2013-02-19T15:21:25.000+0000</p> 
        <div class="body">
            <p>Which version do you use? In the current version 1.12.1 the line 565 includes only a comment.
Please update your ZF copy, test again and give us a feedback. Thanks.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by stephen (farzher) on 2013-02-19T15:26:41.000+0000</p> 
        <div class="body">
            <p>I'm using 2.1.1
What do you mean 1.12.1 is current? o_O</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by stephen (farzher) on 2013-02-19T15:37:25.000+0000</p> 
        <div class="body">
            <p>I used 1.12.1, I got the same errors, just on different lines.
It still works on mail servers that aren't SmarterMail</p>

<p>A PHP Error was encountered
Severity: Notice
Message: Undefined offset: 0
Filename: Protocol/Imap.php
Line Number: 598</p>

<p>A PHP Error was encountered
Severity: Notice
Message: Undefined variable: data
Filename: Protocol/Imap.php
Line Number: 623</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by stephen (farzher) on 2013-02-19T15:51:48.000+0000</p> 
        <div class="body">
            <p>$tokens[2] is set to an empty array.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Frank Brückner (frosch) on 2013-02-19T15:53:09.000+0000</p> 
        <div class="body">
            <p>Can you debug these lines with errors?</p>

<p>What is the content of {{$tokens}}?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by stephen (farzher) on 2013-02-19T16:03:39.000+0000</p> 
        <div class="body">
            <p>Here's var_dumps for each iteration of tokens (looks like it dumped tokens twice).
First group is on the working server, then dumps for SmarterMail server.
<a href="https://gist.github.com/10836ba166f4054c81bb">https://gist.github.com/10836ba166f4054c81bb</a></p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by stephen (farzher) on 2013-02-19T16:05:15.000+0000</p> 
        <div class="body">
            <p>At the very bottom you see $tokens[2] = empty array, which is I guess unexpected.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by stephen (farzher) on 2013-02-20T22:31:47.000+0000</p> 
        <div class="body">
            <p>Can I do anything else to help?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Ralph Schindler (ralph) on 2013-04-05T16:06:59.000+0000</p> 
        <div class="body">
            <p>This issue has been closed on Jira and moved to GitHub for issue tracking.  To continue following the resolution of this issues, please visit: <a href="https://github.com/zendframework/zf1/issues/55">https://github.com/zendframework/zf1/issues/55</a></p>

        </div>
    </div>
    </div>

