<h2>ZF-1480: add 3 new methods to Zend_Uri_Http</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Improvement</dd>

    <dt>Created:</dt>
    <dd>2007-06-02T09:12:35.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2009-11-19T07:20:36.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.10.0 (27/Jan/10)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Laurent Melmoux (laurent melmoux)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Stefan Gehrig (sgehrig)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Uri</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <ul><li><p>method Zend_Uri_Http::getQueryAsArray()
get the query params in an array</p></li>
<li><p>method Zend_Uri_Http::addQueryParams($params=array())
which add or replace params in the query string</p></li>
<li><p>method Zend_Uri_Http::removeQueryParams($params=array())
which remove params in the query string</p></li>
</ul><pre class="highlight"><code> 

/**
     * Returns the query portion of the URL (after ?)
     *
     * @return array
     */
    public function getQueryAsArray()
    {
        $queryParams = array();
        if($queryString = $this-&gt;getQuery()){
            $temp = explode('&amp;', $queryString);
            foreach($temp as $param){
                list($key, $value) = explode('=', $param);
                $queryParams[$key] = $value;
            }
        }
        return $queryParams;;
    }
    
    
    /**
     * Add or replace params in the query string for the current URI, and return the old query 
     *
     * @param array $queryParams
     * @return string Old query string
     */
    public function addReplaceQuery($queryParams)
    {
        $queryParams = array_merge($this-&gt;getQueryAsArray(), $queryParams);
        return $this-&gt;setQuery($queryParams);
    }
    
    /**
     * Remove params in the query string for the current URI, and return the old query 
     *
     * @param array $queryParams
     * @return string Old query string
     */
    public function addReplaceQuery($queryParams)
    {
        $queryParams = array_diff($this-&gt;getQueryAsArray(), $queryParams);
        return $this-&gt;setQuery($queryParams);
    }
</code></pre>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Shahar Evron (shahar) on 2007-06-05T06:41:45.000+0000</p> 
        <div class="body">
            <p>This should be discussed for post 1.0 features</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Bill Karwin (bkarwin) on 2007-06-07T11:27:13.000+0000</p> 
        <div class="body">
            <p>Assign to Shahar.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Stefan Gehrig (sgehrig) on 2009-11-19T07:20:36.000+0000</p> 
        <div class="body">
            <p>closed in trunk (r19041).</p>

<p>Added</p>

<ul><li>{{Zend_Uri_Http::getQueryAsArray()}}</li>
<li>{{Zend_Uri_Http::addReplaceQueryParameters(array $queryParams)}}</li>
<li>{{Zend_Uri_Http::removeQueryParameters(array $queryParamKeys)}}</li>
</ul>
        </div>
    </div>
    </div>

