<h2>ZF2-155: Message always includes empty CC header if no cc was specified</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2012-02-07T11:35:14.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2012-06-11T13:26:53.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Mario Dees (mariod)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Maks 3w (maks3w)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend\Mail</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>Sending a message that never was assigned a CC address, still will include CC header and show it as empty.</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Mario Dees (mariod) on 2012-02-08T18:24:34.000+0000</p> 
        <div class="body">
            <p>It seems would happen because when SMTP::prepareRecipients does $message-&gt;cc() eventually the Message::getHeader function is called and it's setup if the queried header doesn't exist it creates it, and we would end up with the empty CC header despite no recipients ever being added to the header.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Maks 3w (maks3w) on 2012-06-11T13:26:53.000+0000</p> 
        <div class="body">
            <p>Fixed with <a href="https://github.com/zendframework/zf2/pull/1475">https://github.com/zendframework/zf2/pull/1475</a></p>

        </div>
    </div>
    </div>

