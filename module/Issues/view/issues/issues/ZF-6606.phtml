<h2>ZF-6606: Call to UPPER Db function slowing query</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Performance Improvement</dd>

    <dt>Created:</dt>
    <dd>2009-05-11T06:27:12.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2011-08-04T09:52:53.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Satoru Yoshida (satoruyoshida)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Db_Adapter_Db2</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>On line 414 (and I assume line 394 is the same) of the DescribeTable method of Zend_Db_Adapter_Db2 there are two calls to UPPER.  When this call is made, my queries run substantially slower.  If I remove the call a query taking 15-25 seconds drops to &lt;1 second.</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by old of Satoru Yoshida (yoshida@zend.co.jp) on 2009-05-11T19:10:25.000+0000</p> 
        <div class="body">
            <p>The table name has always capital letter only ?
If not, the change is danger, I think.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Simon Verberne (zedmond) on 2009-05-12T06:33:19.000+0000</p> 
        <div class="body">
            <p>When creating tables with the iSeries Navigator, the tables are always created with all capitals for me.  So, that is not an issue.... yet.  The thing that concerns me more is the difference in the amount of time required to run a script with and without that call to UPPER.</p>

<p>I am relatively new to the iSeries and so may have missed the option to not have the tables named with all capitals.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by old of Satoru Yoshida (yoshida@zend.co.jp) on 2009-05-12T22:13:54.000+0000</p> 
        <div class="body">
            <p>I ensure that I can create table with small letter on i5/OS by following. 
CREATE TABLE TESTLIB."mytable" .....</p>

<p>And I can also create on DB2 for non-i5/OS.
CREATE TABLE "mytable" .....</p>

<p>So, I think this issue should be "Won't Fix" .</p>

        </div>
    </div>
    </div>

