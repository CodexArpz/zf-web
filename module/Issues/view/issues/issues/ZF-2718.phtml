<h2>ZF-2718: Zend_Form_Element_Hidden should render outside other form elements</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Improvement</dd>

    <dt>Created:</dt>
    <dd>2008-02-24T07:09:12.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2012-08-31T09:14:34.000+0000</dd>

    <dt>Status:</dt>
    <dd>Postponed</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Nick Lo (nicklo)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Matthew Weier O'Phinney (matthew)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Form</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
        <li><a href="/issues/browse/ZF-7791">ZF-7791</a></li>
            <li><a href="/issues/browse/ZF-7125">ZF-7125</a></li>
        </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>Zend_Form_Element_Hidden elements should render outside of general form elements; either directly after the form opening tag, or before the form closing tag:</p>

<p>&lt;</p>

<p>form action="make-coffee" ... &gt;
</p>

<p>&lt;</p>

<p>ul&gt;
   </p>&lt;label ...etc

It should also not have decorators like labels or errors.

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Jordan Ryan Moore (jordanryanmoore) on 2008-02-24T11:18:32.000+0000</p> 
        <div class="body">
            <p>There would need to be some parent element, such as a</p>

<p>&lt;</p>

<p>div&gt;, around the hidden . XHTML requires</p>

<p>&lt;</p>

<p>form&gt; children to be block elements, which  is not.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Nick Lo (nicklo) on 2008-02-24T15:26:13.000+0000</p> 
        <div class="body">
            <p>Small further to Jordan's comment: the parent block element should be able to wrap multiple hidden input fields to avoid extraneous markup like:</p>

<div>
    </div>

<div>
    </div>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Wil Sinclair (wil) on 2008-02-25T13:45:04.000+0000</p> 
        <div class="body">
            <p>Unsetting 'fix version' and 'fix version priority' until this issue is reviewed.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthew Weier O'Phinney (matthew) on 2008-03-05T10:12:58.000+0000</p> 
        <div class="body">
            <p>Scheduling for 1.5.0 GA release; demoted to minor improvement.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthew Weier O'Phinney (matthew) on 2008-03-07T21:11:11.000+0000</p> 
        <div class="body">
            <p>I think this is a good idea, but the logistics to get it working are pretty hairy currently. I've added a test in r8689 to cover the desired functionality, but marked it as incomplete; I'll revisit after the 1.5.0 release.</p>

<p>In the meantime, you can group hidden elements inside a display group or even a sub form pretty easily, and provide decorators that will hide the entire group; I suggest doing this until I can work on the functionality.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthew Weier O'Phinney (matthew) on 2008-03-07T21:11:40.000+0000</p> 
        <div class="body">
            <p>Rescheduling for mini release following 1.5.0 GA.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Wil Sinclair (wil) on 2008-03-21T17:05:31.000+0000</p> 
        <div class="body">
            <p>This issue should have been fixed for the 1.5 release.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Wil Sinclair (wil) on 2008-04-18T13:11:57.000+0000</p> 
        <div class="body">
            <p>This doesn't appear to have been fixed in 1.5.0. Please update if this is not correct.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthew Weier O'Phinney (matthew) on 2008-04-22T12:05:02.000+0000</p> 
        <div class="body">
            <p>Scheduling for next minor release.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Bruno Friedmann (brunofriedmann) on 2008-08-15T12:21:36.000+0000</p> 
        <div class="body">
            <p>I've tested with 1.6.0 RC2 
it's not fixed</p>

<p>define in .ini
;   partnerid
user.elements.partnerid.type = "hidden"
user.elements.partnerid.options.label = "label_user_partnerid"
user.elements.partnerid.options.required = true
user.elements.partnerid.options.validators.num.validator = "num"</p>

<p>result</p>

<p></p>Id partenaire


<p>in the middle of the form.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthew Weier O'Phinney (matthew) on 2008-08-15T12:51:04.000+0000</p> 
        <div class="body">
            <p>Bruno -- I'm aware it's not fixed; that's why the bug is not marked as resolved. I will try to get to it for the next release following 1.6.0.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Christopher Manning (manningc) on 2009-02-13T09:00:16.000+0000</p> 
        <div class="body">
            <p>Is there a follow up to this issue why this is still in progress?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthew Weier O'Phinney (matthew) on 2009-02-13T10:16:09.000+0000</p> 
        <div class="body">
            <p>It's not listed as in progress, but I will mark it as postponed.</p>

<p>If forms could not be hierarchical, this would be trivial to resolve; however, because forms can contain sub forms, to an arbitrary depth, and no elements are aware of their parents, fetching all hidden elements and aggregating them in a single place is difficult.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Markus (rockaut) on 2009-05-12T07:28:56.000+0000</p> 
        <div class="body">
            <p>Why not create an fieldset-hidden by default and add all hidden field to this?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Hugo (huhu) on 2009-08-28T06:26:19.000+0000</p> 
        <div class="body">
            <p>Note that it is not adviceable to simply put all hidden input fields either at the beginning or end of a form. To track file upload progress using APC, it is needed to have a hidden input field containing the APC_UPLOAD_PROGRESS identifier right before the file input field(s). If all hidden fields would be aggregated and placed together at one specific location, tracking of the upload progress can or will fail.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Christian Albrecht (alab) on 2010-06-02T17:21:12.000+0000</p> 
        <div class="body">
            <p>Look ma:</p>

<pre class="highlight"><code>
$sub = new Zend_Form_SubForm(array('elementDecorators' =&gt; array('ViewHelper'),
                                   'isArray' =&gt; false,
                                   'decorators' =&gt; array('FormElements',
                                                         array('HtmlTag', array('tag' =&gt; 'dd')))));

$sub-&gt;addElement('hidden', 'first', array('value' =&gt; '1'));
$sub-&gt;addElement('hidden', 'second', array('value' =&gt; '2'));
$sub-&gt;addElement('hidden', 'third', array('value' =&gt; '3'));

$form-&gt;addSubForm($sub, 'sub')

// renders
</code></pre><code>


</code>

        </div>
    </div>
    </div>

