<h2>ZF-10013: [PATCH] Add a Zend_Cache_Backend_Database class</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Patch</dd>

    <dt>Created:</dt>
    <dd>2010-06-18T04:24:09.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2012-02-26T17:29:55.000+0000</dd>

    <dt>Status:</dt>
    <dd>Closed</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>Next Major Release ()</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Colin Guthrie (coling)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Pádraic Brady (padraic)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Cache</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
        <li><a href="/issues/browse/ZF-9286">ZF-9286</a></li>
        </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
        <li><a href="/issues/secure/attachment/13142/Zend_Cache_Backend_Database.patch">Zend_Cache_Backend_Database.patch</a></li>
        </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>Hello,</p>

<p>As noted on <a href="http://framework.zend.com/wiki/pages/viewpage.action?pageId=9437191">http://framework.zend.com/wiki/pages/…</a>, I had a rather urgent need for this class (PHP sans-sqlite2 support but with PDO Sqlite3 support) due to the terrible performance of the File backend with a large number of files.</p>

<p>So here is my implementation. I added unit tests and it passes them all. I am now using this in production and so far it seems fine.</p>

<p>I've only tested it with the PDO Sqlite backend and it may not operate correctly with other database but Sqlite is the most likely candidate here anyway.</p>

<p>Unlike the proposal on the above linked page, I use and identical database schema to Zend_Cache_Backend_Sqlite. This should make it possible to use the same cache files with the new extension (although I've not tested this).</p>

<p>In order to get maximum performance, I've used prepared statements whenever practical.</p>

<p>I've filled in the relevant docs, so you can use this patch immediately</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Colin Guthrie (coling) on 2010-06-18T04:26:01.000+0000</p> 
        <div class="body">
            <p>My patch. I generally import ZF from files into my own SVN vendor branch sans unit tests, so I just did a quick patch against the tarball rather than SVN checkout.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Colin Guthrie (coling) on 2010-06-18T04:29:48.000+0000</p> 
        <div class="body">
            <p>Comically I did the patch in the wrong order, so -R would have been needed to apply it! Here is the a nicer one :D</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Colin Guthrie (coling) on 2010-06-18T04:31:36.000+0000</p> 
        <div class="body">
            <p>Third time lucky, I forgot to fix the require_once's which I had commented out.... last one I promise :)</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Marc Bennewitz (private) (mabe) on 2010-07-20T00:35:15.000+0000</p> 
        <div class="body">
            <p>assigned to Pádraic as he is the proposer of <a href="http://framework.zend.com/wiki/pages/viewpage.action?pageId=9437191">http://framework.zend.com/wiki/pages/…</a></p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Pádraic Brady (padraic) on 2010-10-12T10:31:41.000+0000</p> 
        <div class="body">
            <p>To be done in ZF 2.0 - next major release</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Colin Guthrie (coling) on 2012-02-26T11:01:31.000+0000</p> 
        <div class="body">
            <p>An explanation of why you won't fix would have been nice... Is there an alternative system included in 2.0 that does the same thing?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Adam Lundrigan (adamlundrigan) on 2012-02-26T15:37:52.000+0000</p> 
        <div class="body">
            <p>Apologies, I should have done that.  [~Padraic]'s comment above indicates that it will be fixed in ZF2, and I believe that ZFv1 is in feature freeze with the exception of some new features being backported from ZF2 (EventManager and Di).  If you would like to push for your cache backend to be included in ZF 1.12 please send an email to the zfdev mailing list requesting that and a member of the CR Team should get back to you.  As well, I've flagged this ticket for the CR Team to review.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Colin Guthrie (coling) on 2012-02-26T17:29:55.000+0000</p> 
        <div class="body">
            <p>Many thanks for the clarification :) I was confused about the juxtaposition of the "to be done comment" and the "wont fix" resolution (I would have thought a more positive resolution for this bug would have made more sense, although I do concede the title of the bug report was about a specific class name so I can't really argue that point too far!</p>

<p>Anyway, thanks for your work and again for the additional clarification here.</p>

        </div>
    </div>
    </div>

