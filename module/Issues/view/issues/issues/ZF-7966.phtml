<h2>ZF-7966: Zend_Form isValidPartial problem with validating subforms without a given value</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2009-09-28T10:35:44.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2010-03-18T11:18:21.000+0000</dd>

    <dt>Status:</dt>
    <dd>Closed</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Cristian Bichis (avantis)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Christian Albrecht (alab)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Form</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>On is ValidPartial this code should be removed:</p>

<pre><code>    foreach ($this-&gt;getSubForms() as $key =&gt; $subForm) {
        if (!in_array($key, $validatedSubForms)) {
            if (null !== $translator) {
                $subForm-&gt;setTranslator($translator);
            }

            $valid = $subForm-&gt;isValidPartial($data) &amp;&amp; $valid;
        }
    }
</code></pre>

<p>Sample case:
- in case of subforms added by ajax if a subform is not added his key won't exist into values sent by post by the form. At validation, since his key doesn't exist on post, but the form is actually created, the values pasted to isValidPartial of the subform would be the values of ALL form. This leads to problems.</p>

<p>So i am suggesting to remove this part, as anyway, it doesn't make any sense...</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>
    <p class="comments">No comments to display</p>
    
</div>

