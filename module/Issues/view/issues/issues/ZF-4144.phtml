<h2>ZF-4144: CLONE -Zend_Form_Element_File - No validation / upload when required isn't set (or false)</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2008-08-31T22:53:58.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2008-08-31T23:25:04.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Dung Tran Minh (kusanagi)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Thomas Weidner (thomas)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_File_Transfer</li>
            <li>Zend_Form</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>It is not possible at the moment to create an upload element. When I set required = false, the file is not uploaded and there is no validation. When I set required = true a file is needed. It is not possible to set the form element optional.</p>

<p>Requirements for my form:</p>

<p>Image is optional.
Image are upload -&gt;validate this.
Image not uploaded -&gt; ignore image.</p>

<p>Here's my config ini:</p>

<p>news.create.elements.image.type = "file"
news.create.elements.image.options.label = "Bild"
news.create.elements.image.options.validators.size.validator = "Size"
news.create.elements.image.options.validators.size.options = "20MB"
news.create.elements.image.options.validators.mimetype.validator = "Mimetype"
news.create.elements.image.options.validators.mimetype.options = "image/gif,image/jpeg,image/png"
news.create.elements.image.options.required = false</p>

<p>My php:</p>

<p>$config = Zend_Registry::get ('config');
$form = new My_Form ($config-&gt;news-&gt;create);
$form-&gt;image-&gt;setDestination (ROOT_DIR . '/public/images/neuigkeiten');</p>

<p>if ($this-&gt;_request-&gt;isPost ()) {
    $formData = $this-&gt;_request-&gt;getPost ();</p>

<pre><code>    if ($form-&gt;isValid ($formData)) {
              ...
  } else {
                $form-&gt;populate ($formData);
   }
</code></pre>

<p>}</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Thomas Weidner (thomas) on 2008-08-31T23:25:00.000+0000</p> 
        <div class="body">
            <p>100% duplicate of ZF-4140</p>

        </div>
    </div>
    </div>

