<h2>ZF-10908: fix on zend_cache save failure process</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Patch</dd>

    <dt>Created:</dt>
    <dd>2011-01-04T12:11:49.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2011-01-23T11:15:29.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.11.3 (01/Feb/11)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
                samuel laulhau (lalop)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Marc Bennewitz (private) (mabe)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Cache</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
        <li><a href="/issues/secure/attachment/13593/Core.diff">Core.diff</a></li>
        </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>In the save method, if the backend returns a value positive you assume that the can be corrupted and you attempt to remove the given key in the cache, but this key can be changed by the save method ( to add prefix for example ) and it will be changed a seconde time in the remove method.</p>

<p>That's all</p>

<p>I use zf1.7 and zf1.9, this patch is made using the last zf version in the trunk but the problem affects all version from zf1.7 to the current.</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by samuel laulhau (lalop) on 2011-01-09T02:38:32.000+0000</p> 
        <div class="body">
            <p>oups,
I just see that I haven't attached my patch...
but now I don't find how to upload it.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Ramon Henrique Ornelas (ramon) on 2011-01-09T02:50:46.000+0000</p> 
        <div class="body">
            <p>[~samuel]
Have you signed the CLA? Patches can't be accepted without a signed CLA. Your JIRA profile doesn't have you tagged to the zf-framework-dev group.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by samuel laulhau (lalop) on 2011-01-10T01:22:41.000+0000</p> 
        <div class="body">
            <p>Yes I have.
And I have an email confirming me that the cla is processed and my jira account is added to the contributor group.
But it's the first time I try to use the patch uploader so maybe I never have been in the contributor group.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Ramon Henrique Ornelas (ramon) on 2011-01-10T03:10:46.000+0000</p> 
        <div class="body">
            <p>This case enter in contact with ralphschindler or weierophinney in #zftalk.dev on IRC.</p>

<p>Greetings
Ramon</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by samuel laulhau (lalop) on 2011-01-12T15:00:50.000+0000</p> 
        <div class="body">
            <p>here is the patch.
I hope everything is ok with it.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by samuel laulhau (lalop) on 2011-01-19T13:48:59.000+0000</p> 
        <div class="body">
            <p>Am I supposed to do anything else ?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Marc Bennewitz (private) (mabe) on 2011-01-23T11:15:24.000+0000</p> 
        <div class="body">
            <p>The problem only was on removing an item on a failed save using the already updated cache id but calling remove method of core and not directly of backend.</p>

<p>fixed in r23670 (trunk) &amp; r23671 (1.11 branch)</p>

        </div>
    </div>
    </div>

