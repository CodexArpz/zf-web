<h2>ZF-3071: Add way to check for cache on basis of files</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Improvement</dd>

    <dt>Created:</dt>
    <dd>2008-04-08T10:51:35.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2008-09-02T10:39:43.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.6.0 (02/Sep/08)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Thomas Weidner (thomas)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Translate</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>When adding files afterwards they are always added even if they already exist in the cache.
The cache should check if the file already exists and return imediatly instead of adding the file once more.</p>

<p>from the mailinglist:
Rob,</p>

<p>just use directory or file search.
Calling multiple times addTranslation is really depreciated.
See into the manual for details.</p>

<p>Related to you request.
It is called but not at the place you expected it.
The data is written in the cache.</p>

<p>But when you add a new translation to the adapter using the same language as 
already existing there is no way to detect if the new file which shall be 
added is the same or another one. So we MUST overwrite existing data.
Think of translations which exist in a module based layout.
Each module adds new translations for the same language. When there is no 
way to add a translation because the language already exists, such a model 
would not work anymore.</p>

<p>Therefor when you do not work with a module based layout you should always 
work with directory search.</p>

<p>Greetings
Thomas Weidner, I18N Team Leader
<a href="http://www.thomasweidner.com">http://www.thomasweidner.com</a></p>

<p>----- Original Message ----- 
From: "Rob L" <a href="mailto:roblacy@yahoo.com">roblacy@yahoo.com</a>
To: <a href="mailto:fw-general@lists.zend.com">fw-general@lists.zend.com</a>
Sent: Monday, April 07, 2008 10:45 PM
Subject: [fw-general] Zend_Translate doesn't cache when addTranslation is 
called</p>

<p>&gt;</p>

<blockquote>
  <p>I wrote a custom adapter and am trying to load 13 different languages from
  files. I can't simply read the entire directory because I am using
  non-standard locale names and need full control. So in my bootstrap I call
  the Zend_Translate constructor for my first language and then call
  addTranslation for each of the remaining languages.</p>
  
  <p>All of the languages get cached, but only the Zend_Translate constructor
  actually checks to see if a language has been cached. If you call
  addTranslation directly, it <em>always</em> calls the adapter to load the file.</p>
  
  <p>For now as a workaround, I manually check to see if Zend_Cache already has
  the key 'Zend_Translate_[my adapter here]' cached. But really, Zend should
  simply check the cache for a hit every time addTranslation is called, 
  right?</p>
  
  <h2>Rob</h2>
  
  <p>View this message in context: 
  <a href="http://www.nabble.com/Zend_Translate-doesn%27t-cache-when-addTranslation-is-called-tp16539888p16539888.html">http://nabble.com/Zend_Translate-doesn%27t-cache-wâ€¦</a>
  Sent from the Zend Framework mailing list archive at Nabble.com.</p>
</blockquote>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Thomas Weidner (thomas) on 2008-08-18T08:13:05.000+0000</p> 
        <div class="body">
            <p>Added with r10915</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Wil Sinclair (wil) on 2008-09-02T10:39:43.000+0000</p> 
        <div class="body">
            <p>Updating for the 1.6.0 release.</p>

        </div>
    </div>
    </div>

