<h2>ZF-11100: Zend_Cache_Frontend_File should check to see if file exists first</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2011-02-21T12:02:53.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2011-03-06T03:53:22.000+0000</dd>

    <dt>Status:</dt>
    <dd>Closed</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.11.5 (07/Apr/11)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Dan Berman (panckreous)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Marc Bennewitz (private) (mabe)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Cache</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>$mtime = @filemtime($masterFile); should detect if the file exists first.</p>

<p>Use case:</p>

<p>Deployment tools such as Capistrano create a new directory upon each deploy and then symlink to the latest deploy</p>

<p>for example 
current -&gt; /var/www/website/releases/20110220101853/</p>

<p>Let's say we launch a new ec2 instance, which initiates a new deploy</p>

<p>current then points to a new dir, for example
current -&gt; /var/www/website/releases/20110220101860/</p>

<p>When the new instance is hit, the cache looks to a file that does not exist, and causes an error until we clear out the cache.</p>

<p>What it should do is, instead of just grabbing executing filemtime, is see if the file exists first. If the file does not exist, it should return false so the cache object repopulates it</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Marc Bennewitz (private) (mabe) on 2011-03-02T14:37:06.000+0000</p> 
        <div class="body">
            <p>fixed in r23792 (trunk) &amp; r23793 (1.11 branch)</p>

<p>I'll close this issue next time because 1.11.4 was already tagged.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Marc Bennewitz (private) (mabe) on 2011-03-06T03:53:22.000+0000</p> 
        <div class="body">
            <p>closed</p>

        </div>
    </div>
    </div>

