<h2>ZF-8450: Zend_Db_Adapter_Pdo_Ibm not creates _serverType object in _connect() on i5</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2009-12-03T00:44:08.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2012-11-20T20:52:52.000+0000</dd>

    <dt>Status:</dt>
    <dd>Closed</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
        None
                    </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Db_Adapter_Db2</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>In the _connect method of Zend_Db_Adapter_Pdo_Ibm the _serverType object is not created on i5, because the attribute PDO::ATTR_SERVER_INFO that is returned by the module pdo_ibm.so is 'QSQ', which is not handled in the switch statement. 
A call to the method lastInsertId with a table name causing an exception 'call to member function ... on a non object' in lastSequenceId.</p>

<p>I contacted Zend Support Center, because I thought the value 'QSQ' is wrong, but they told me, that this is wanted, so it can be differentiated between db2 i5 and other db2 flavors.</p>

<p>answer from Zend:
{quote}
The Server attribute on the i5 is 'QSQ'. This is what distinguishes i5 from other flavors of DB2. This should be handled correctly in Zend Framework. Please post this issue on the Zend Framework Issue Tracker:
{quote}</p>

<p>I also checked the newest ZF version 1.9.6, but I found no change.</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Rob Allen (rob) on 2012-11-20T20:52:52.000+0000</p> 
        <div class="body">
            <p>Bulk change of all issues last updated before 1st January 2010 as "Won't Fix".</p>

<p>Feel free to re-open and provide a patch if you want to fix this issue.</p>

        </div>
    </div>
    </div>

