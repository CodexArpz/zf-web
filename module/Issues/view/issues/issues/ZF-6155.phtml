<h2>ZF-6155: Segmentation fault when you use setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EX</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2009-03-29T21:38:14.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2009-08-18T11:20:09.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
                Jonathan Block (block.jon)
            </dd>

    <dt>Assignee:</dt>
    <dd>
                Ralph Schindler (ralph)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Db</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>I just signed up with Amazon EC2. I setup a basic Ubuntu 8 box and then use apt-get to get php running in command line mode.</p>

<p>Zend/Db/Statement/Pdo reports a segmentatioin fault in the _prepare() function on this line:</p>

<p>$this-&gt;_stmt = $this-&gt;_adapter-&gt;getConnection()-&gt;prepare($sql);</p>

<p>I discovered that the segment fault goes away if I open the file named "Zend/Db/Adapter/Pdo/Abstract.php" and then comment out the following line located in the _connect function.</p>

<p>// I have to keep this line commented out or else i get a segmentation fault on the command line when i run my scripts
// setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);</p>

<p>Please advise!</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by julien PAULI (doctorrock83) on 2009-03-30T07:22:05.000+0000</p> 
        <div class="body">
            <p>What PHP/Apache version do you use ?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Dolf Schimmel (Freeaqingme) (freak) on 2009-08-17T17:12:08.000+0000</p> 
        <div class="body">
            <p>Do you have any code that shows how to trigger this segfault + what zf version are you using?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by 123456 (jonblock) on 2009-08-18T11:02:03.000+0000</p> 
        <div class="body">
            <p>Turns out I was using an outdated version of zend framework. I've upgraded to the current release and I no longer get seg faults.</p>

<p>Jon</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Ralph Schindler (ralph) on 2009-08-18T11:20:08.000+0000</p> 
        <div class="body">
            <p>Closing as not an issue, seems to work in at least 1.9</p>

        </div>
    </div>
    </div>

