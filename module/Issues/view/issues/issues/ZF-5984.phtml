<h2>ZF-5984: Zend_Dom_Query Fails Tests</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2009-03-10T11:53:43.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2012-05-29T18:20:14.000+0000</dd>

    <dt>Status:</dt>
    <dd>Closed</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Matthew Weier O'Phinney (matthew)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Dom_Query</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        
    <div>
        <h1>
            <a href="#"><img src="img/icon.png" class="right" alt="Logo" height="79" width="80" border="0" /></a>
            Page Title<br /><span class="subtitle">SubTitle</span>
        </h1>
    </div>

    <ul><li class="current"><a href="#">Home</a></li>
        <li><a href="#">About</a></li>
        <li><a href="#">Misc</a></li>
        <li><a href="#">Wiki</a></li>
    </ul><div>
        <div>
            <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Sed at dui quis magna
            viverra sagittis. Donec sed nibh ut pede pretium ultricies. Mauris viverra
            tempus dui. Donec dolor risus, mollis sed, pulvinar id, faucibus ac, nisl. Duis
            eu erat at erat tempus euismod. Suspendisse sodales lacus vitae libero. Sed
            suscipit commodo enim. Pellentesque erat. Cras orci. Pellentesque non nunc. Cras
            diam libero, feugiat vel, accumsan et, laoreet mattis, purus. Pellentesque
            volutpat hendrerit justo. Cras vehicula. Vestibulum cursus gravida est.
            Curabitur pede. Mauris consectetuer rutrum dolor. Ut a turpis ac metus
            sollicitudin dignissim.</p>

            <p>Praesent blandit, nisi in egestas mattis, lectus tortor vehicula massa, commodo
            vehicula diam lacus consequat lectus. In vitae pede eget leo faucibus
            condimentum. Pellentesque nisi. Ut condimentum elit vitae mi. Morbi neque erat,
            mollis nec, volutpat sed, placerat sit amet, ligula. Morbi eleifend. Morbi
            auctor condimentum ipsum. In ac purus. Sed vitae magna. Sed volutpat vestibulum
            leo. Phasellus id nibh.</p>

            <p>Fusce blandit elementum leo. Proin id erat. In dignissim orci vulputate libero
            cursus volutpat. Ut vitae arcu non nulla sagittis laoreet. Suspendisse sed
            tortor ac risus placerat convallis. Donec nulla ipsum, tempus et, porttitor
            quis, blandit vel, tortor. Donec condimentum. Aliquam felis dui, consectetuer
            ultricies, euismod eu, pretium non, sem. Sed ultricies, tortor non vulputate
            tempor, urna leo sagittis libero, ut feugiat nulla tellus et ligula. Suspendisse
            eget est. Vestibulum interdum mi at felis. Fusce dictum. Fusce a enim at ipsum
            consectetuer molestie. Integer rhoncus. Cum sociis natoque penatibus et magnis
            dis parturient montes, nascetur ridiculus mus. Donec rhoncus mattis arcu.</p>

            <p>Proin id nisi. Vivamus eu risus. Vivamus et enim et turpis volutpat bibendum.
            Nunc nunc ipsum, semper sit amet, pellentesque in, venenatis sit amet, elit.
            Suspendisse potenti. Cras lacinia, nisl vel vulputate pellentesque, lacus tellus
            lobortis ipsum, sed pellentesque neque felis ac orci. Sed pellentesque.
            Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac
            turpis egestas. Etiam lacus enim, facilisis eu, suscipit ac, condimentum ut,
            ante. Aenean convallis mattis enim. Aliquam pretium. Etiam quam. Donec
            tincidunt. Pellentesque id ante ut orci gravida semper. Cum sociis natoque
            penatibus et magnis dis parturient montes, nascetur ridiculus mus. Fusce
            bibendum elit vel sem cursus ultrices. Nunc in purus. Ut consectetuer, nulla ac
            porta hendrerit, ligula eros blandit nulla, at ornare dui odio vel justo. Morbi
            tellus nulla, sodales eget, aliquet ac, varius vitae, pede. Pellentesque
            habitant morbi tristique senectus et netus et malesuada fames ac turpis
            egestas.</p>

            <p>Vestibulum urna. Proin hendrerit neque et tellus. Duis luctus congue sem.
            Aliquam ultricies orci nec enim. Nam velit eros, feugiat posuere, ultricies
            vitae, consequat nec, urna. In ipsum neque, porta sed, ornare nec, cursus et,
            mauris. Nam eget urna. Suspendisse venenatis nulla nec urna lacinia bibendum.
            Morbi tempor lobortis nisl. Nulla ut eros. Fusce id tortor ut diam vulputate
            consectetuer. Nulla vel augue. Nulla ac tellus sed orci pulvinar dictum. Proin
            lobortis. Fusce consequat auctor ante. Donec bibendum fringilla nunc. Donec
            viverra, urna ac auctor dapibus, augue ipsum tristique lacus, sed feugiat nibh
            nibh quis purus. Donec orci est, pharetra laoreet, laoreet id, mattis ut, odio.
            In lacus sem, rutrum tristique, dignissim ac, imperdiet ac, lacus. </p>
        </div>

        <div>
            <div class="navblock">
                
                    Username:<br /><br />
                    Password:<br /><br />
            </div>

            <div class="navblock">
                <ul><li class="foo">Item 1</li>
                    <li class="foo current">Item 2</li>
                    <li class="foo">Item 3</li>
                </ul></div>
        </div>
    </div>

    <div>
        <div class="footerblock first">
            <p class="attribution">
            Â© 2008 - present, <br />
            Zend Framework
            </p>
            <a href="/about">About</a><br /><a href="/contact">Contact</a><br /></div>

        <div class="footerblock last">
            <h4>More:</h4>
            <ul><li>Ohloh profile</li>
                 <li>Facebook</li>
                 <li>Plaxo Pulse</li>
                 <li>LinkedIn</li>
                 <li>del.icious</li>
                 <li>Twitter</li>
                 <li>SlideShare</li>
            </ul></div>
    </div>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Matthew Weier O'Phinney (matthew) on 2009-03-10T13:20:39.000+0000</p> 
        <div class="body">
            <p>It may actually be working as expected.</p>

<p>First, DOMDocument is <em>very</em> forgiving about malformed HTML, and will parse basically anything. So, as far as Zend_Dom_Query is concerned, it received valid documents.</p>

<p>When you call $dom-&gt;query(), you always receive a result. The trick is to find out if the result contains any members. What I cannot tell from your debug statements is whether or not the NodeLists attached to the results contain anything. Can you do the following on each result you receive:</p>

<pre class="highlight"><code>
echo count($result);
</code></pre>

<p>If it's 0 in the first case, than it's doing fine. For the second case, I'd expect a value of 3.</p>

<p>Otherwise... I don't see anything operating incorrectly here -- what were your expectations?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Mark Smith (mark_79_smith) on 2009-03-10T13:45:37.000+0000</p> 
        <div class="body">
            <p>You are right.
When I do:</p>

<pre class="highlight"><code>
foreach ($matches as $result) {
        Zend_Debug::dump($result);
        print count($result);
}
</code></pre>

<p>The response is:</p>

<pre class="highlight"><code>
object(DOMElement)#76 (0) {
}

1

object(DOMElement)#77 (0) {
}

1

object(DOMElement)#78 (0) {
}

1
</code></pre>

<p>To be totally honest, I was confused with the lack of information in the response object.</p>

<p>I expect to recieve an attribute value or element value from each of the matched elements. Is this possible?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Mark Smith (mark_79_smith) on 2009-03-10T13:50:32.000+0000</p> 
        <div class="body">
            <p>Sorry,</p>

<p>I have just Google'd the answer and came across the PHP manual which has all the information I need.</p>

<p>Many Thanks for all your help</p>

        </div>
    </div>
    </div>

