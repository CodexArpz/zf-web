<h2>ZF-2822: Zend_Controller_Action_Helper_Url::simple() doesn't prepend baseUrl in front of URL</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2008-03-07T06:43:56.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2008-11-13T14:10:23.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.7.0 (17/Nov/08)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Andries Seutens (andries)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Controller</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
        <li><a href="/issues/browse/ZF-2821">ZF-2821</a></li>
            <li><a href="/issues/browse/ZF-4387">ZF-4387</a></li>
        </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
        <li><a href="/issues/secure/attachment/11348/Zend_Controller_Action_Helper_Url_ZF-2822.patch">Zend_Controller_Action_Helper_Url_ZF-2822.patch</a></li>
        </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>$urlHelper-&gt;simple('actionname', 'controlerName') returns "controlerName/actionName" which is quite unusable when application root != web server root.</p>

<p>For example:
I'm generating form on <a href="http://example.com/mysite">http://example.com/mysite</a> and in action param I want to put URL to controller "login" and action "go".
To generate propel URL I need to do: $formAction = $baseUrl . $urlHelper-&gt;simple('actionName', 'controllerName').
In my opinion it should work just with helper: $formAction = $urlHelper-&gt;simple('actionName', 'controllerName');</p>

<p>Btw.
$urlHelper-&gt;url('actionname', 'controlerName') works fine with it, and returns "/mysite/controlerName/actionName"</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Wil Sinclair (wil) on 2008-03-25T20:41:12.000+0000</p> 
        <div class="body">
            <p>Please categorize/fix as needed.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthew Weier O'Phinney (matthew) on 2008-04-22T10:38:02.000+0000</p> 
        <div class="body">
            <p>Duplicate of ZF-2821</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Piotr Czachur (zimnyx) on 2008-04-23T03:37:05.000+0000</p> 
        <div class="body">
            <p>Matthew,
why you marked it as duplicate of ZF-2821 ?
ZF-2821 is about making absolute HTTP redirect, and this one is about prepending base url in url generated by $urlHelper-&gt;simple().
Resolwing one doesn't mean other one is resolved.</p>

<p>Regards,
Piotrek</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthew Weier O'Phinney (matthew) on 2008-04-23T06:49:45.000+0000</p> 
        <div class="body">
            <p>My bad -- I meant to mark it as related, not duplicates. I've modified the link now.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthew Weier O'Phinney (matthew) on 2008-05-09T11:12:41.000+0000</p> 
        <div class="body">
            <p>Scheduling for next minor release (new functionality).</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Stephen Crosby (stevecrozz) on 2008-06-27T15:01:09.000+0000</p> 
        <div class="body">
            <p>Here's a patch, I tested where docroot = / and where docroot = /some/path</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Tianon Gravi (admwiggin) on 2008-07-25T10:25:14.000+0000</p> 
        <div class="body">
            <p>This is a <em>one line</em> fix.  All that needs to be done is add "$request-&gt;getBaseUrl()" to the return of the simple() function, as per the patch code.</p>

<p>30 Minutes is <em>too long</em> of an estimate.  Why isn't this fixed yet?</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Stephen Crosby (stevecrozz) on 2008-07-25T10:40:10.000+0000</p> 
        <div class="body">
            <p>@Tianon , I agree, but it seems like Matthew hasn't had the time to do it yet. I've asked about it on the IRC channel and I've been told I should bring it up on the mailing list, but I haven't yet. You could probably speed it up by asking around on the mailing list.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Matthew Weier O'Phinney (matthew) on 2008-07-25T12:03:50.000+0000</p> 
        <div class="body">
            <p>@Tianon: please note that it is scheduled for 1.6.0. While the fix is trivial, it introduces a change in functionality, and we reserve new features for minor revisions.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Tianon Gravi (admwiggin) on 2008-07-26T18:26:02.000+0000</p> 
        <div class="body">
            <p>Oh ok, that makes sense.  Thanks for clarifying.  :)</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Stefan Gehrig (sgehrig) on 2008-09-17T02:42:17.000+0000</p> 
        <div class="body">
            <p>Anything new on this one?
It's still not fixed in trunk rev. 10189 (Version 1.6.1 according to {{Zend_Version::VERSION}}).</p>

<p>It's not a real problem because you can overcome this issue by using {{$this-&gt;_helper-&gt;url-&gt;url(array('action' =&gt; 'actionName', 'controller' =&gt; 'controllerName'))}} but I'd be nice if it worked.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Tianon Gravi (admwiggin) on 2008-09-17T13:13:17.000+0000</p> 
        <div class="body">
            <p>Well, the router in 1.6 implemented an assemble method that all helpers and methods like this are supposed to be using.  I'm not sure why this one wouldn't have been yet (maybe nobody got around to it?).  Now, I believe, this actually classifies as a BUG instead of just a Request for Change.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Andries Seutens (andries) on 2008-11-08T07:42:16.000+0000</p> 
        <div class="body">
            <p>Fixed in svn r12436</p>

<p>PHP Bug hunt day (Andriesss)</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Wil Sinclair (wil) on 2008-11-13T14:10:23.000+0000</p> 
        <div class="body">
            <p>Changing issues in preparation for the 1.7.0 release.</p>

        </div>
    </div>
    </div>

