Index: tests/Zend/View/Helper/Navigation/_files/expected/sitemap/without_whitespace.xml
===================================================================
--- tests/Zend/View/Helper/Navigation/_files/expected/sitemap/without_whitespace.xml	(revision 24503)
+++ tests/Zend/View/Helper/Navigation/_files/expected/sitemap/without_whitespace.xml	(working copy)
@@ -1,66 +1,2 @@
 <?xml version="1.0" encoding="UTF-8"?>
-<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
-  <url>
-    <loc>http://localhost/index</loc>
-  </url>
-  <url>
-    <loc>http://localhost/page1</loc>
-  </url>
-  <url>
-    <loc>http://localhost/page1/page1_1</loc>
-  </url>
-  <url>
-    <loc>http://localhost/page2</loc>
-  </url>
-  <url>
-    <loc>http://localhost/page2/page2_1</loc>
-  </url>
-  <url>
-    <loc>http://localhost/page2/page2_2</loc>
-  </url>
-  <url>
-    <loc>http://localhost/page2/page2_2/page2_2_1</loc>
-  </url>
-  <url>
-    <loc>http://localhost/page2/page2_2/page2_2_2</loc>
-  </url>
-  <url>
-    <loc>http://localhost/page2/page2_3</loc>
-  </url>
-  <url>
-    <loc>http://localhost/page2/page2_3/page2_3_1</loc>
-  </url>
-  <url>
-    <loc>http://localhost/page2/page2_3/page2_3_3</loc>
-  </url>
-  <url>
-    <loc>http://localhost/page2/page2_3/page2_3_3/1</loc>
-  </url>
-  <url>
-    <loc>http://localhost/page2/page2_3/page2_3_3/2</loc>
-  </url>
-  <url>
-    <loc>http://localhost/page3</loc>
-  </url>
-  <url>
-    <loc>http://localhost/page3/page3_1</loc>
-  </url>
-  <url>
-    <loc>http://localhost/page3/page3_2</loc>
-  </url>
-  <url>
-    <loc>http://localhost/page3/page3_2/page3_2_1</loc>
-  </url>
-  <url>
-    <loc>http://localhost/page3/page3_2/page3_2_2</loc>
-  </url>
-  <url>
-    <loc>http://localhost/page3/page3_3</loc>
-  </url>
-  <url>
-    <loc>http://localhost/page3/page3_3/page3_3_2</loc>
-  </url>
-  <url>
-    <loc>http://www.zym-project.com/</loc>
-  </url>
-</urlset>
\ No newline at end of file
+<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"><url><loc>http://localhost/index</loc></url><url><loc>http://localhost/page1</loc></url><url><loc>http://localhost/page1/page1_1</loc></url><url><loc>http://localhost/page2</loc></url><url><loc>http://localhost/page2/page2_1</loc></url><url><loc>http://localhost/page2/page2_2</loc></url><url><loc>http://localhost/page2/page2_2/page2_2_1</loc></url><url><loc>http://localhost/page2/page2_2/page2_2_2</loc></url><url><loc>http://localhost/page2/page2_3</loc></url><url><loc>http://localhost/page2/page2_3/page2_3_1</loc></url><url><loc>http://localhost/page2/page2_3/page2_3_3</loc></url><url><loc>http://localhost/page2/page2_3/page2_3_3/1</loc></url><url><loc>http://localhost/page2/page2_3/page2_3_3/2</loc></url><url><loc>http://localhost/page3</loc></url><url><loc>http://localhost/page3/page3_1</loc></url><url><loc>http://localhost/page3/page3_2</loc></url><url><loc>http://localhost/page3/page3_2/page3_2_1</loc></url><url><loc>http://localhost/page3/page3_2/page3_2_2</loc></url><url><loc>http://localhost/page3/page3_3</loc></url><url><loc>http://localhost/page3/page3_3/page3_3_2</loc></url><url><loc>http://www.zym-project.com/</loc></url></urlset>
\ No newline at end of file
Index: tests/Zend/View/Helper/Navigation/_files/expected/menu/without_whitespace.html
===================================================================
--- tests/Zend/View/Helper/Navigation/_files/expected/menu/without_whitespace.html	(revision 0)
+++ tests/Zend/View/Helper/Navigation/_files/expected/menu/without_whitespace.html	(revision 0)
@@ -0,0 +1 @@
+<ul class="navigation"><li><a title="Go home" href="index">Home</a></li><li><a href="page1">Page 1</a><ul><li><a href="page1/page1_1">Page 1.1</a></li></ul></li><li class="active"><a href="page2">Page 2</a><ul><li><a href="page2/page2_1">Page 2.1</a></li><li class="active"><a href="page2/page2_2">Page 2.2</a><ul><li><a href="page2/page2_2/page2_2_1">Page 2.2.1</a></li><li class="active"><a href="page2/page2_2/page2_2_2">Page 2.2.2</a></li></ul></li><li class="active"><a href="page2/page2_3">Page 2.3</a><ul><li><a href="page2/page2_3/page2_3_1">Page 2.3.1</a></li><li class="active"><a href="page2/page2_3/page2_3_3">Page 2.3.3</a><ul><li class="active"><a href="page2/page2_3/page2_3_3/1">Page 2.3.3.1</a></li><li class="active"><a href="page2/page2_3/page2_3_3/2">Page 2.3.3.2</a></li></ul></li></ul></li></ul></li><li><a href="page3">Page 3</a><ul><li><a href="page3/page3_1">Page 3.1</a></li><li><a href="page3/page3_2">Page 3.2</a><ul><li><a href="page3/page3_2/page3_2_1">Page 3.2.1</a></li><li><a href="page3/page3_2/page3_2_2">Page 3.2.2</a></li></ul></li><li><a href="page3/page3_3">Page 3.3</a><ul><li><a href="page3/page3_3/page3_3_2">Page 3.3.2</a></li></ul></li></ul></li><li><a href="http://www.zym-project.com/">Zym</a></li></ul>
\ No newline at end of file
Index: tests/Zend/View/Helper/Navigation/_files/expected/menu/innerindent0.html
===================================================================
--- tests/Zend/View/Helper/Navigation/_files/expected/menu/innerindent0.html	(revision 0)
+++ tests/Zend/View/Helper/Navigation/_files/expected/menu/innerindent0.html	(revision 0)
@@ -0,0 +1,81 @@
+    <ul class="navigation">
+    <li>
+    <a title="Go home" href="index">Home</a>
+    </li>
+    <li>
+    <a href="page1">Page 1</a>
+    <ul>
+    <li>
+    <a href="page1/page1_1">Page 1.1</a>
+    </li>
+    </ul>
+    </li>
+    <li class="active">
+    <a href="page2">Page 2</a>
+    <ul>
+    <li>
+    <a href="page2/page2_1">Page 2.1</a>
+    </li>
+    <li class="active">
+    <a href="page2/page2_2">Page 2.2</a>
+    <ul>
+    <li>
+    <a href="page2/page2_2/page2_2_1">Page 2.2.1</a>
+    </li>
+    <li class="active">
+    <a href="page2/page2_2/page2_2_2">Page 2.2.2</a>
+    </li>
+    </ul>
+    </li>
+    <li class="active">
+    <a href="page2/page2_3">Page 2.3</a>
+    <ul>
+    <li>
+    <a href="page2/page2_3/page2_3_1">Page 2.3.1</a>
+    </li>
+    <li class="active">
+    <a href="page2/page2_3/page2_3_3">Page 2.3.3</a>
+    <ul>
+    <li class="active">
+    <a href="page2/page2_3/page2_3_3/1">Page 2.3.3.1</a>
+    </li>
+    <li class="active">
+    <a href="page2/page2_3/page2_3_3/2">Page 2.3.3.2</a>
+    </li>
+    </ul>
+    </li>
+    </ul>
+    </li>
+    </ul>
+    </li>
+    <li>
+    <a href="page3">Page 3</a>
+    <ul>
+    <li>
+    <a href="page3/page3_1">Page 3.1</a>
+    </li>
+    <li>
+    <a href="page3/page3_2">Page 3.2</a>
+    <ul>
+    <li>
+    <a href="page3/page3_2/page3_2_1">Page 3.2.1</a>
+    </li>
+    <li>
+    <a href="page3/page3_2/page3_2_2">Page 3.2.2</a>
+    </li>
+    </ul>
+    </li>
+    <li>
+    <a href="page3/page3_3">Page 3.3</a>
+    <ul>
+    <li>
+    <a href="page3/page3_3/page3_3_2">Page 3.3.2</a>
+    </li>
+    </ul>
+    </li>
+    </ul>
+    </li>
+    <li>
+    <a href="http://www.zym-project.com/">Zym</a>
+    </li>
+    </ul>
\ No newline at end of file
Index: tests/Zend/View/Helper/Navigation/_files/expected/menu/innerindent4.html
===================================================================
--- tests/Zend/View/Helper/Navigation/_files/expected/menu/innerindent4.html	(revision 0)
+++ tests/Zend/View/Helper/Navigation/_files/expected/menu/innerindent4.html	(revision 0)
@@ -0,0 +1,81 @@
+    <ul class="navigation">
+        <li>
+            <a title="Go home" href="index">Home</a>
+        </li>
+        <li>
+            <a href="page1">Page 1</a>
+            <ul>
+                <li>
+                    <a href="page1/page1_1">Page 1.1</a>
+                </li>
+            </ul>
+        </li>
+        <li class="active">
+            <a href="page2">Page 2</a>
+            <ul>
+                <li>
+                    <a href="page2/page2_1">Page 2.1</a>
+                </li>
+                <li class="active">
+                    <a href="page2/page2_2">Page 2.2</a>
+                    <ul>
+                        <li>
+                            <a href="page2/page2_2/page2_2_1">Page 2.2.1</a>
+                        </li>
+                        <li class="active">
+                            <a href="page2/page2_2/page2_2_2">Page 2.2.2</a>
+                        </li>
+                    </ul>
+                </li>
+                <li class="active">
+                    <a href="page2/page2_3">Page 2.3</a>
+                    <ul>
+                        <li>
+                            <a href="page2/page2_3/page2_3_1">Page 2.3.1</a>
+                        </li>
+                        <li class="active">
+                            <a href="page2/page2_3/page2_3_3">Page 2.3.3</a>
+                            <ul>
+                                <li class="active">
+                                    <a href="page2/page2_3/page2_3_3/1">Page 2.3.3.1</a>
+                                </li>
+                                <li class="active">
+                                    <a href="page2/page2_3/page2_3_3/2">Page 2.3.3.2</a>
+                                </li>
+                            </ul>
+                        </li>
+                    </ul>
+                </li>
+            </ul>
+        </li>
+        <li>
+            <a href="page3">Page 3</a>
+            <ul>
+                <li>
+                    <a href="page3/page3_1">Page 3.1</a>
+                </li>
+                <li>
+                    <a href="page3/page3_2">Page 3.2</a>
+                    <ul>
+                        <li>
+                            <a href="page3/page3_2/page3_2_1">Page 3.2.1</a>
+                        </li>
+                        <li>
+                            <a href="page3/page3_2/page3_2_2">Page 3.2.2</a>
+                        </li>
+                    </ul>
+                </li>
+                <li>
+                    <a href="page3/page3_3">Page 3.3</a>
+                    <ul>
+                        <li>
+                            <a href="page3/page3_3/page3_3_2">Page 3.3.2</a>
+                        </li>
+                    </ul>
+                </li>
+            </ul>
+        </li>
+        <li>
+            <a href="http://www.zym-project.com/">Zym</a>
+        </li>
+    </ul>
\ No newline at end of file
Index: tests/Zend/View/Helper/Navigation/_files/expected/menu/innerindent8.html
===================================================================
--- tests/Zend/View/Helper/Navigation/_files/expected/menu/innerindent8.html	(revision 0)
+++ tests/Zend/View/Helper/Navigation/_files/expected/menu/innerindent8.html	(revision 0)
@@ -0,0 +1,81 @@
+    <ul class="navigation">
+            <li>
+                    <a title="Go home" href="index">Home</a>
+            </li>
+            <li>
+                    <a href="page1">Page 1</a>
+                    <ul>
+                            <li>
+                                    <a href="page1/page1_1">Page 1.1</a>
+                            </li>
+                    </ul>
+            </li>
+            <li class="active">
+                    <a href="page2">Page 2</a>
+                    <ul>
+                            <li>
+                                    <a href="page2/page2_1">Page 2.1</a>
+                            </li>
+                            <li class="active">
+                                    <a href="page2/page2_2">Page 2.2</a>
+                                    <ul>
+                                            <li>
+                                                    <a href="page2/page2_2/page2_2_1">Page 2.2.1</a>
+                                            </li>
+                                            <li class="active">
+                                                    <a href="page2/page2_2/page2_2_2">Page 2.2.2</a>
+                                            </li>
+                                    </ul>
+                            </li>
+                            <li class="active">
+                                    <a href="page2/page2_3">Page 2.3</a>
+                                    <ul>
+                                            <li>
+                                                    <a href="page2/page2_3/page2_3_1">Page 2.3.1</a>
+                                            </li>
+                                            <li class="active">
+                                                    <a href="page2/page2_3/page2_3_3">Page 2.3.3</a>
+                                                    <ul>
+                                                            <li class="active">
+                                                                    <a href="page2/page2_3/page2_3_3/1">Page 2.3.3.1</a>
+                                                            </li>
+                                                            <li class="active">
+                                                                    <a href="page2/page2_3/page2_3_3/2">Page 2.3.3.2</a>
+                                                            </li>
+                                                    </ul>
+                                            </li>
+                                    </ul>
+                            </li>
+                    </ul>
+            </li>
+            <li>
+                    <a href="page3">Page 3</a>
+                    <ul>
+                            <li>
+                                    <a href="page3/page3_1">Page 3.1</a>
+                            </li>
+                            <li>
+                                    <a href="page3/page3_2">Page 3.2</a>
+                                    <ul>
+                                            <li>
+                                                    <a href="page3/page3_2/page3_2_1">Page 3.2.1</a>
+                                            </li>
+                                            <li>
+                                                    <a href="page3/page3_2/page3_2_2">Page 3.2.2</a>
+                                            </li>
+                                    </ul>
+                            </li>
+                            <li>
+                                    <a href="page3/page3_3">Page 3.3</a>
+                                    <ul>
+                                            <li>
+                                                    <a href="page3/page3_3/page3_3_2">Page 3.3.2</a>
+                                            </li>
+                                    </ul>
+                            </li>
+                    </ul>
+            </li>
+            <li>
+                    <a href="http://www.zym-project.com/">Zym</a>
+            </li>
+    </ul>
\ No newline at end of file
Index: tests/Zend/View/Helper/Navigation/LinksTest.php
===================================================================
--- tests/Zend/View/Helper/Navigation/LinksTest.php	(revision 24555)
+++ tests/Zend/View/Helper/Navigation/LinksTest.php	(working copy)
@@ -713,4 +713,26 @@
 
         $this->assertEquals($expected, $actual);
     }
+    
+    /**
+     * @group ZF-8874
+     */
+    public function testRenderingWithoutWhitespace()
+    {
+        $active = $this->_helper->findOneByLabel('Page 1.1');
+        $newFlag = Zend_View_Helper_Navigation_Links::RENDER_NEXT |
+                   Zend_View_Helper_Navigation_Links::RENDER_PREV;
+        $this->_helper->setRenderFlag($newFlag);
+        $this->_helper->setIndent('  ');
+        $active->active = true;
+        
+        $this->_helper->setFormatOutput(false);
+
+        // build expected and actual result
+        $expected = '<link rel="next" href="page2" title="Page 2">'
+                  . '<link rel="prev" href="page1" title="Page 1">';
+        $actual = $this->_helper->render();
+
+        $this->assertEquals($expected, $actual);
+    }
 }
Index: tests/Zend/View/Helper/Navigation/SitemapTest.php
===================================================================
--- tests/Zend/View/Helper/Navigation/SitemapTest.php	(revision 24555)
+++ tests/Zend/View/Helper/Navigation/SitemapTest.php	(working copy)
@@ -161,7 +161,21 @@
 
         $this->assertEquals($expected, $actual);
     }
+    
+    /**
+     * @group ZF-8874
+     */
+    public function testRenderingWithoutWhitespace()
+    {
+        // Reset format output option
+        $this->_helper->setFormatOutput(false);       
+        
+        $expected = $this->_helper->render();
+        $actual   = $this->_getExpected('sitemap/without_whitespace.xml');
 
+        $this->assertEquals($expected, $actual);
+    }
+
     public function testUseAclRoles()
     {
         $acl = $this->_getAcl();
Index: tests/Zend/View/Helper/Navigation/MenuTest.php
===================================================================
--- tests/Zend/View/Helper/Navigation/MenuTest.php	(revision 24555)
+++ tests/Zend/View/Helper/Navigation/MenuTest.php	(working copy)
@@ -109,6 +109,27 @@
 
         $this->assertEquals($expected, $actual);
     }
+    
+    /**
+     * @group ZF-8874
+     */
+    public function testSetAndGetInnerIndent()
+    {
+        // Test standard
+        $this->assertSame('    ', $this->_helper->getInnerIndent());
+        
+        // Test with format output true
+        $this->_helper->setInnerIndent(0);
+        $this->assertSame('', $this->_helper->getInnerIndent());
+        
+        $this->_helper->setInnerIndent('        ');
+        $this->assertSame('        ', $this->_helper->getInnerIndent());
+        
+        // Test with format output false
+        $this->_helper->setFormatOutput(false);
+        $this->assertSame('', $this->_helper->getInnerIndent());
+        
+    }
 
     public function testRenderSuppliedContainerWithoutInterfering()
     {
@@ -268,14 +289,44 @@
         }
     }
 
+    /**
+     * @group ZF-8874
+     */
+    public function testRenderingWithoutWhitespace()
+    {
+        $this->_helper->setFormatOutput(false);
+        
+        $expected = $this->_getExpected('menu/without_whitespace.html');
+        
+        $this->assertEquals($expected, $this->_helper->render($this->_nav1));
+    }
+    
+    /**
+     * @group ZF-8874
+     */
+    public function testRenderingWithInnerIndent()
+    {
+        $this->_helper->setIndent(4);
+        
+        // Inner indent = 0
+        $this->_helper->setInnerIndent(0);
+        $expected = $this->_getExpected('menu/innerindent0.html');
+        
+        $this->assertEquals($expected, $this->_helper->render($this->_nav1));
+        
+        // Inner indent = 4
+        $this->_helper->setInnerIndent(4);
+        $expected = $this->_getExpected('menu/innerindent4.html');
+        
+        $this->assertEquals($expected, $this->_helper->render($this->_nav1));
+        
+        // Inner indent = 8
+        $this->_helper->setInnerIndent(8);
+        $expected = $this->_getExpected('menu/innerindent8.html');
+        
+        $this->assertEquals($expected, $this->_helper->render($this->_nav1));
+    }
 
-
-
-
-
-
-
-
     public function testSetMaxDepth()
     {
         $this->_helper->setMaxDepth(1);
