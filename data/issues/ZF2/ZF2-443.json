{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF2-443",
    "key": "ZF2-443",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "breakChainOnFailure"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF2-443\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2012-08-09T17:35:41.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=diemuzi",
                "name": "diemuzi",
                "displayName": "Sammie S. Taunton",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2012-08-02T20:42:06.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-08-09T17:35:41.000+0000"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "In my form I have a single text field asking for an email address and attached is this filter -> http:\/\/pastebin.com\/Layp35J3\r\n\r\nWhen the form is submitted with a test email address of test@example.com!\r\nIt fails, which is expected. But it returns multiple errors instead of a single error.\r\n\r\nI've attempted to add the following on the same level of the validator name and option:\r\n\r\n'break_chain_on_failure' => true\r\n'breakChainOnFailure' => true\r\ntrue\r\n\r\nAll three options all result in the same problem, the chain is not broken.\r\n\r\nHere is the JSON return:\r\n{\"form_messages\":{\"primary_email\":{\"emailAddressInvalidHostname\":\"\\u0027example.com!\\u0027 is not a valid hostname for the email address\",\"hostnameUnknownTld\":\"The input appears to be a DNS hostname but cannot match TLD against known list\",\"hostnameInvalidLocalName\":\"The input does not appear to be a valid local network name\"}}}\r\n\r\nIRC: weierophinney, thought perhaps it could have been the 'required' => true statement as the breakonchain would need to be acted upon there too. So I removed that line completely and also tried 'required' => false but the same situation happens."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF2-443\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/6",
                "name": "Closed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=postalservice14",
                "name": "postalservice14",
                "displayName": "John Kelly",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF2",
                "key": "ZF2",
                "name": "Zend Framework 2.0",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10578",
                    "id": 10578,
                    "name": "Zend\\Validator",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51548",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=postalservice14",
                        "name": "postalservice14",
                        "displayName": "John Kelly",
                        "active": true
                    },
                    "body": "You are getting multiple messages from the same validator.  The email validator is failing and giving you 3 errors as to why it failed.  Then it stops the validator chain and does not continue.  I believe this is the correct behavior.\r\n\r\nDoes that make sense?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=postalservice14",
                        "name": "postalservice14",
                        "displayName": "John Kelly",
                        "active": true
                    },
                    "created": "2012-08-07T20:50:59.000+0000",
                    "updated": "2012-08-07T20:50:59.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51549",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=diemuzi",
                        "name": "diemuzi",
                        "displayName": "Sammie S. Taunton",
                        "active": true
                    },
                    "body": "I believe what you mentioned is correct. I'll explain a little further just so we are clear. Firstly I'd like to reference ZF1 just so we are on the same page -> http:\/\/pastebin.com\/6VRGULa8\r\n\r\nNotice all the TRUE statements after each validator. In ZF1 this would break the chain and return only 1 error message, regardless of how many validators exist. Using this example if you entered a value but it did not meet the regex and the stringlength then only the regex error would be displayed. Then if you meet the requirements of the regex then the stringlength error would show.\r\n\r\nSo now in ZF2 I'd like to do the same thing. So using the EmailValidator you mentioned as an example. It is currently returning more than one error for that validator. I would like to only return one error message. Then once the form is submitted again, if there is another check that failed for EmailValidator, it would return only that error.\r\n\r\nSo instead of multiple errors being returned on a formfield, I'd like only one. It would continue this way until all validators are happy.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=diemuzi",
                        "name": "diemuzi",
                        "displayName": "Sammie S. Taunton",
                        "active": true
                    },
                    "created": "2012-08-07T20:59:15.000+0000",
                    "updated": "2012-08-07T20:59:15.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51550",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=postalservice14",
                        "name": "postalservice14",
                        "displayName": "John Kelly",
                        "active": true
                    },
                    "body": "Yeah, I get exactly what you're saying.  Actually ZF1 DOES work this way. Zend_Validate_EmailAddress in the above example would return an array(3) with three error messages and stop the chain.  Just like in ZF2.\r\n\r\nTry running the following test in ZF1 and seeing what the var_dump shows:\r\n\r\n{code:title=tests\/Zend\/ValidateTest.php|borderStyle=solid}\r\n\/**\r\n * Ensures that a validator may break the chain\r\n *\r\n * @return void\r\n *\/\r\npublic function testBreakChainOnFailure2()\r\n{\r\n    $this->_validator->addValidator(new Zend_Validate_StringLength(array(\r\n        'encoding'  => 'UTF-8',\r\n        'min'       => 5,\r\n        'max'       => 320\r\n    )), true);\r\n    $this->_validator->addValidator(new Zend_Validate_EmailAddress(), true);\r\n    $this->assertFalse($this->_validator->isValid('test@example.com!'));\r\n    var_dump($this->_validator->getMessages());\r\n}\r\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=postalservice14",
                        "name": "postalservice14",
                        "displayName": "John Kelly",
                        "active": true
                    },
                    "created": "2012-08-07T21:34:10.000+0000",
                    "updated": "2012-08-07T21:34:10.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51551",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=diemuzi",
                        "name": "diemuzi",
                        "displayName": "Sammie S. Taunton",
                        "active": true
                    },
                    "body": "Well snap, I guess I never even noticed it before. What a game changer haha!\r\n\r\nAlright, before I close this out can you give me an example on the proper way to breakchain the zf2 way? I may be a little confused on the proper syntax \/ area to put this ability. I'm unclear if this goes in the options, attributes, or on a whole new level. I appreciate it and thank you for setting me straight. This was bugging me but now I see my errors =)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=diemuzi",
                        "name": "diemuzi",
                        "displayName": "Sammie S. Taunton",
                        "active": true
                    },
                    "created": "2012-08-07T21:37:45.000+0000",
                    "updated": "2012-08-07T21:37:45.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51554",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=postalservice14",
                        "name": "postalservice14",
                        "displayName": "John Kelly",
                        "active": true
                    },
                    "body": "Hey Sammie, no problem.\r\n\r\nThat's kind of a loaded question. ;-)  As with many things in ZF, there are a few ways to accomplish this.  Take a look at the end-user documentation for breaking validator chains. http:\/\/packages.zendframework.com\/docs\/latest\/manual\/en\/modules\/zend.validator.validator-chains.html\r\n\r\nGood luck!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=postalservice14",
                        "name": "postalservice14",
                        "displayName": "John Kelly",
                        "active": true
                    },
                    "created": "2012-08-08T15:02:09.000+0000",
                    "updated": "2012-08-08T15:02:09.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51555",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=diemuzi",
                        "name": "diemuzi",
                        "displayName": "Sammie S. Taunton",
                        "active": true
                    },
                    "body": "I really don't enjoy reopening an issue but I took your advice and created this -> http:\/\/pastebin.com\/SBbfs5Vx\r\n\r\nI added the TRUE statements to break the chain. But when I enter a single alpha character. I am returning a validator of StringLength is less than 2 characters and also string must be a digit.\r\n\r\nI would have expected to only return the StringLength error due to the break in chain.\r\n\r\nAs an additional test I looked at the ValidatorChain.php file in Zend and changed all the $breakChainOnFailure = false to $breakChainOnFailure = true. This way in case it was a setting on my side it wouldn't matter as now I'm forcing it from the source to breakchain. But the same error situation is happening.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=diemuzi",
                        "name": "diemuzi",
                        "displayName": "Sammie S. Taunton",
                        "active": true
                    },
                    "created": "2012-08-08T17:37:00.000+0000",
                    "updated": "2012-08-08T17:37:00.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51558",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=postalservice14",
                        "name": "postalservice14",
                        "displayName": "John Kelly",
                        "active": true
                    },
                    "body": "Sammie,\r\n\r\nThis really isn't the place to ask questions like this.  As far as I can see, this STILL isn't a bug.\r\n\r\nThe correct way to break chain on failure with your provided code is: http:\/\/pastebin.com\/qchQ3Qwz\r\n\r\nHope that helps.\r\n\r\nJohn",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=postalservice14",
                        "name": "postalservice14",
                        "displayName": "John Kelly",
                        "active": true
                    },
                    "created": "2012-08-09T17:35:26.000+0000",
                    "updated": "2012-08-09T17:35:26.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF2-443\/transitions"
}