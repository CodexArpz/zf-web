{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF2-482",
    "key": "ZF2-482",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Unable to iterate over a database ResultSet twice"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF2-482\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/8",
                "name": "Issue Moved"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2012-10-08T20:14:56.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rob",
                "name": "rob",
                "displayName": "Rob Allen",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2012-08-20T20:20:27.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-10-08T20:14:56.000+0000"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "When you try to iterate over a result set a second time, you get an exception:\r\n\r\nThis result is a forward only result set, calling rewind() after moving forward is not supported' in \/www\/zendframework\/zf2\/library\/Zend\/Db\/Adapter\/Driver\/Pdo\/Result.php on line 149"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/2",
                "name": "Critical"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF2-482\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/6",
                "name": "Closed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                "name": "ralph",
                "displayName": "Ralph Schindler",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF2",
                "key": "ZF2",
                "name": "Zend Framework 2.0",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10520",
                    "id": 10520,
                    "name": "Zend\\Db",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51746",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=maks3w",
                        "name": "maks3w",
                        "displayName": "Maks 3w",
                        "active": true
                    },
                    "body": "Fixed with PR https:\/\/github.com\/zendframework\/zf2\/pull\/2247",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=maks3w",
                        "name": "maks3w",
                        "displayName": "Maks 3w",
                        "active": true
                    },
                    "created": "2012-08-28T22:49:38.000+0000",
                    "updated": "2012-08-28T22:49:38.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51775",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ricardomaia",
                        "name": "ricardomaia",
                        "displayName": "Ricardo Maia",
                        "active": true
                    },
                    "body": "I see the same error here. That issue persists, I believe.\r\nI got a fresh copy from Git master repository, downloaded in september 2.\r\n\r\nI made tests with a database like this:\r\n\r\n1;\"The Tell-Tale Heart\"\r\n2;\"Little Women\"\r\n3;\"The Velveteen Rabbit\"\r\n4;\"Goodnight Moon\"\r\n5;\"Bartholomew and the Oobleck\"\r\n6;\"The Cat in the Hat\"\r\n7;\"Dynamic Anatomy\"\r\n8;\"2001: A Space Odyssey\"\r\n9;\"Dune\"\r\n10;\"The Shining\"\r\n11;\"Franklin in the Dark\"\r\n12;\"Practical PostgreSQL\"\r\n13;\"Programming Python\"\r\n14;\"Learning Python\"\r\n15;\"Perl Cookbook\"\r\n\r\n{code:title=Test code|borderStyle=solid}\r\n$table = new BooksTable($adapter);\r\n$resultSet = $table->fetchAll();\r\n\r\n$current = $resultSet->current();\r\n\r\necho \"After \\$resultSet->current() <br \/>\";\r\necho \"Current key: {$resultSet->key()} <br \/>\";\r\necho \"Current value: {$current->title} <br \/>\";\r\n\r\n$resultSet->next();\r\n$current = $resultSet->current();\r\n\r\necho \"After \\$resultSet->next() <br \/>\";\r\necho \"Current key: {$resultSet->key()} <br \/>\";\r\necho \"Current value: {$current->title} <br \/>\";\r\n\r\n$resultSet->rewind();\r\n$current = $resultSet->current();\r\n\r\necho \"After \\$resultSet->rewind() <br \/>\";\r\necho \"Current key: {$resultSet->key()} <br \/>\";\r\necho \"Current value: {$current->title} <br \/>\";\r\n\r\n$resultSet->next();\r\n$current = $resultSet->current();\r\n\r\necho \"After \\$resultSet->next() <br \/>\";\r\necho \"Current key: {$resultSet->key()} <br \/>\";\r\necho \"Current value: {$current->title} <br \/>\";\r\n\r\n$resultSet->next();\r\n$current = $resultSet->current();\r\n\r\necho \"After \\$resultSet->next() <br \/>\";\r\necho \"Current key: {$resultSet->key()} <br \/>\";\r\necho \"Current value: {$current->title} <br \/>\";\r\n\r\n$resultSet->rewind();\r\n$current = $resultSet->current();\r\n\r\necho \"After \\$resultSet->next() <br \/>\";\r\necho \"Current key: {$resultSet->key()} <br \/>\";\r\necho \"Current value: {$current->title} <br \/>\";\r\n{code}\r\n\r\n{code:title=Output}\r\n  After $resultSet->current()Current key:  \r\n  Current value: The Tell-Tale Heart \r\n  After $resultSet->next()Current key: 1 \r\n  Current value: Little Women \r\n  After $resultSet->rewind()Current key: 0 \r\n  Current value: The Velveteen Rabbit \r\n  After $resultSet->next()Current key: 1 \r\n  Current value: Goodnight Moon \r\n  After $resultSet->next()Current key: 2 \r\n  Current value: Bartholomew and the Oobleck \r\n\r\n  Fatal error: Uncaught exception 'Zend\\Db\\Adapter\\Exception\\RuntimeException' with message 'This result is a forward only result set, calling rewind() after moving forward is not supported' in \/home\/xxxxxxxxxxxxx\/zend-framework\/zf2\/library\/Zend\/Db\/Adapter\/Driver\/Pdo\/Result.php on line 159\r\n\r\n  Zend\\Db\\Adapter\\Exception\\RuntimeException: This result is a forward only result set, calling rewind() after moving forward is not supported in \/home\/xxxxxxxxxxxxx\/zend-framework\/zf2\/library\/Zend\/Db\/Adapter\/Driver\/Pdo\/Result.php on line 159\r\n\r\n  Call Stack:\r\n      0.0003     349320   1. {main}() \/var\/www\/zf-2.0.0rc7\/index.php:0\r\n      0.1675    1595740   2. Zend\\Db\\ResultSet\\AbstractResultSet->rewind() \/var\/www\/zf-2.0.0rc7\/index.php:85\r\n      0.1675    1595740   3. Zend\\Db\\Adapter\\Driver\\Pdo\\Result->rewind() \/home\/xxxxxxxxxxxxx\/zend-framework\/zf2\/library\/Zend\/Db\/ResultSet\/AbstractResultSet.php:228\r\n\r\n{code}\r\n\r\nAt the first time the key value is NULL.\r\nSo, changes on keys almost working, but the values are moving forward only, aparently caused by cursor settings.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ricardomaia",
                        "name": "ricardomaia",
                        "displayName": "Ricardo Maia",
                        "active": true
                    },
                    "created": "2012-09-02T06:39:05.000+0000",
                    "updated": "2012-09-02T06:39:05.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51825",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=koen",
                        "name": "koen",
                        "displayName": "Koen Pieters",
                        "active": true
                    },
                    "body": "I've did a try to fix this error when you use a buffer. That also still had an error in it.\r\n\r\nYou have to change your test code to:\r\n{code}\r\n$table = new BooksTable($adapter);\r\n$resultSet = $table->fetchAll();\r\n\r\n$resultSet->buffer();\r\n\r\n$current = $resultSet->current();\r\n{code}\r\n\r\npull request: https:\/\/github.com\/zendframework\/zf2\/pull\/2314\r\n\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=koen",
                        "name": "koen",
                        "displayName": "Koen Pieters",
                        "active": true
                    },
                    "created": "2012-09-07T13:27:26.000+0000",
                    "updated": "2012-09-07T13:27:26.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/52027",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "This issue has been closed on Jira and moved to GitHub for issue tracking.  To continue following the resolution of this issues, please visit: https:\/\/github.com\/zendframework\/zf2\/issues\/2532",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2012-10-08T20:14:56.000+0000",
                    "updated": "2012-10-08T20:14:56.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF2-482\/transitions"
}