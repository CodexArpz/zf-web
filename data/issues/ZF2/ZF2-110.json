{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF2-110",
    "key": "ZF2-110",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend\\Code\\DocBlockScanner doesn't recognize anymore tags without values"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF2-110\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/8",
                "name": "Issue Moved"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2012-10-08T20:15:36.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mtorromeo",
                "name": "mtorromeo",
                "displayName": "Massimiliano Torromeo",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2011-12-05T17:41:21.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-10-08T20:15:37.000+0000"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Component: Zend\\Code (not listed)\r\n\r\nThe DocBlockScanner doesn't parse anymore tagnames wihout values such as this:\r\n\r\n\/**\r\n * @mytag\r\n *\/\r\n\r\nThey could be useful to tag code elements with custom tags as I was doing in zf 2.0 dev2"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF2-110\/watchers",
                "isWatching": false,
                "watchCount": 3
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/6",
                "name": "Closed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [
                "reflection"
            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=maks3w",
                "name": "maks3w",
                "displayName": "Maks 3w",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF2",
                "key": "ZF2",
                "name": "Zend Framework 2.0",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10726",
                    "id": 10726,
                    "name": "Zend\\Code\\Scanner",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/49705",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "body": "I believe this issue has been rectified already.  I ran this unit test against Zend\\Code\\Scanner\\DocBlockScanner:\r\n{code}\r\n\/**\r\n * @group ZF2-110\r\n *\/\r\npublic function testDocBlockScannerParsesTagsWithNoValuesProperly()\r\n{\r\n    $docComment = <<<EOB\r\n\/**\r\n * @mytag\r\n *\/\r\nEOB;\r\n    $tokenScanner = new DocBlockScanner($docComment);\r\n    $tags = $tokenScanner->getTags();\r\n    $this->assertCount(1, $tags);\r\n    $this->assertArrayHasKey('name', $tags[0]);\r\n    $this->assertEquals('@mytag', $tags[0]['name']);\r\n    $this->assertArrayHasKey('value', $tags[0]);\r\n    $this->assertEquals('', $tags[0]['value']);\r\n}\r\n{code}\r\n\r\nAnd it passed.  I've issued a PR (https:\/\/github.com\/zendframework\/zf2\/pull\/820) to get this test added to the ZF2 test suite.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "created": "2012-02-23T17:44:45.000+0000",
                    "updated": "2012-02-23T17:45:07.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/49714",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mtorromeo",
                        "name": "mtorromeo",
                        "displayName": "Massimiliano Torromeo",
                        "active": true
                    },
                    "body": "It seems I was wrong thinking that the problem was simply about tags without values. I still couldn't get my tags recognized with latest master and I found out that the issue was caused by a bug in the docblock cleaning function.\r\n\r\nThe regular expression used with single quotes failed to recognize tabs (\\t) and also the cleaned docblock was not passed to the scanner.\r\n\r\nHere is the fix:\r\n\r\n{noformat}\r\ndiff --git a\/library\/Zend\/Code\/Reflection\/DocBlockReflection.php b\/library\/Zend\/Code\/Reflection\/DocBlockReflection.php\r\nindex 564ce62..63c35d4 100644\r\n--- a\/library\/Zend\/Code\/Reflection\/DocBlockReflection.php\r\n+++ b\/library\/Zend\/Code\/Reflection\/DocBlockReflection.php\r\n@@ -259,10 +259,10 @@ class DocBlockReflection implements Reflection\r\n         $docComment = $this->docComment; \/\/ localize variable\r\n \r\n         \/\/ create a clean docComment\r\n-        $this->cleanDocComment = preg_replace('#[ \\t]*(?:\\\/\\*\\*|\\*\\\/|\\*)?[ ]{0,1}(.*)?#', '$1', $docComment);\r\n+        $this->cleanDocComment = preg_replace(\"#[ \\t]*(?:\\\/\\*\\*|\\*\\\/|\\*)?[ ]{0,1}(.*)?#\", '$1', $docComment);\r\n         $this->cleanDocComment = ltrim($this->cleanDocComment, \"\\r\\n\"); \/\/ @todo should be changed to remove first and last empty line\r\n \r\n-        $scanner = new DocBlockScanner($docComment);\r\n+        $scanner = new DocBlockScanner($this->cleanDocComment);\r\n         $this->shortDescription = ltrim($scanner->getShortDescription());\r\n         $this->longDescription  = ltrim($scanner->getLongDescription());\r\n         foreach ($scanner->getTags() as $tag) {\r\n{noformat}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mtorromeo",
                        "name": "mtorromeo",
                        "displayName": "Massimiliano Torromeo",
                        "active": true
                    },
                    "created": "2012-02-23T21:30:13.000+0000",
                    "updated": "2012-02-23T21:31:37.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/50651",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=maks3w",
                        "name": "maks3w",
                        "displayName": "Maks 3w",
                        "active": true
                    },
                    "body": "Hi Massimiliano,\r\n\r\n  You can send a Pull Request in Github with your patch. Anyway I tried to proposal but break some tests.\r\n\r\nRegards.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=maks3w",
                        "name": "maks3w",
                        "displayName": "Maks 3w",
                        "active": true
                    },
                    "created": "2012-05-14T16:09:44.000+0000",
                    "updated": "2012-05-14T16:09:44.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/52106",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "This issue has been closed on Jira and moved to GitHub for issue tracking.  To continue following the resolution of this issues, please visit: https:\/\/github.com\/zendframework\/zf2\/issues\/2445",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2012-10-08T20:15:37.000+0000",
                    "updated": "2012-10-08T20:15:37.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF2-110\/transitions"
}