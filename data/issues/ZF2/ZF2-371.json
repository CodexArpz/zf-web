{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF2-371",
    "key": "ZF2-371",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Fieldsets not being populated on submit"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF2-371\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/8",
                "name": "Issue Moved"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2012-10-08T20:15:11.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jgruiz75",
                "name": "jgruiz75",
                "displayName": "Jaime Ruiz",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2012-06-21T16:01:30.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-10-08T20:15:11.000+0000"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Fieldsets within a form are not being populated when the form is submitted.\r\n\r\nFor example, I have the following does not return the expected array with the data values:\r\n\r\nh3. Controller\r\n{code}\r\n\r\n    public function indexAction(){\r\n       $form = new MyForm();\r\n       $request = $this->getRequest();\r\n              if ($request->isPost()) {\r\n                     $form->setData($request->post());\r\n                     if ($form->isValid()) {\r\n                            \/\/Do something\r\n                            print_r($form->getData()); \/\/for debug\r\n                     }\r\n              }\r\n       return array('form' => $form);\r\n    }\r\n{code}\r\n\r\nh3. MyForm.php\r\n\r\n{code}\r\n\r\n    class MyForm extends Form\r\n    {\r\n        public function __construct()\r\n        {\r\n            parent::__construct();\r\n            $this->setName('myForm');\r\n            $this->setAttribute('method', 'post');\r\n            \r\n            $this->add(array(\r\n                        'name' => 'title',\r\n                        'attributes' => array(\r\n                        'type'  => 'text',\r\n                        'label' => 'Title',\r\n                        ),\r\n                     ));\r\n\r\n            $this->add(new MyFieldset('myfieldset'));\r\n            \r\n            \/\/setting InputFilters here\r\n            $inputFilter = new InputFilter();\r\n            $factory = new InputFactory();\r\n           \r\n            $inputFilter->add($factory->createInput(array(\r\n                'name'     => 'title',\r\n                'required' => true,\r\n                'filters'  => array(\r\n                    array('name' => 'StripTags'),\r\n                    array('name' => 'StringTrim'),\r\n                ),\r\n            )));\r\n            \r\n            \/\/Now add fieldset Input filter\r\n            foreach($this->getFieldsets() as $fieldset){\r\n                  $fieldsetInputFilter = $factory->createInputFilter($fieldset->getInputFilterSpecification());\r\n                  $inputFilter->add($fieldsetInputFilter,$fieldset->getName());\r\n            }\r\n\r\n            \/\/Set InputFilter\r\n            $this->setInputFilter($inputFilter);\r\n        }\r\n    }\r\n{code}\r\n\r\nh3. MyFieldset.php\r\n\r\n{code}\r\n\r\n    class MyFieldset extends Fieldset implements InputFilterProviderInterface{\r\n        public function __construct($name)\r\n        {\r\n            parent::__construct($name);\r\n            $factory = new Factory();\r\n        \r\n            $this->add($factory->createElement(array(\r\n                'name' => $name . 'foo',\r\n                'attributes' => array(\r\n                    'type'  => 'text',\r\n                    'label' => 'Foo',\r\n                ),\r\n            )));\r\n        }\r\n        \r\n        public function getInputFilterSpecification(){\r\n            return array(\r\n                'foo' => array(\r\n                    'required' => true,\r\n                    'filters'  => array(\r\n                        array('name' => 'StripTags'),\r\n                        array('name' => 'StringTrim'),\r\n                    ),\r\n                ),\r\n            );\r\n        }\r\n    }\r\n{code}\r\n\r\nI am able to output the form as expected and I end up with two input elements named 'title' and 'myfieldsetfoo' (the name given when outputing with the ViewHelper). So of course when I submit the raw post will show values for 'title' and 'myfieldsetfoo'. However, when I use SetData() the values for the field set are not being populated (although I can see the values in the raw post object). Instead, examining the output of '$form->getData()' I receive:\r\n\r\n{code}\r\n    Array(\r\n       [title] => Test,\r\n       [myfieldset] => Array(\r\n                             [foo] =>\r\n                            )\r\n    )\r\n{code}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF2-371\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/6",
                "name": "Closed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [
                "zend-form",
                "zend-form-fieldset"
            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF2",
                "key": "ZF2",
                "name": "Zend Framework 2.0",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10542",
                    "id": 10542,
                    "name": "Zend\\Form",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51469",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jade",
                        "name": "jade",
                        "displayName": "Ja De",
                        "active": true
                    },
                    "body": "Seems to work with me, form with fieldsets is validated & populated as intended.\r\n\r\nhttps:\/\/github.com\/zendframework\/zf2\/blob\/master\/tests\/Zend\/Form\/FormTest.php shows *how to return fieldset input filter specs*.\r\n\r\nBest regards,\r\nJade",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jade",
                        "name": "jade",
                        "displayName": "Ja De",
                        "active": true
                    },
                    "created": "2012-07-29T23:19:44.000+0000",
                    "updated": "2012-07-29T23:23:01.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51470",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jgruiz75",
                        "name": "jgruiz75",
                        "displayName": "Jaime Ruiz",
                        "active": true
                    },
                    "body": "Jade-\r\nNot sure what you are seeing that is incorrect with the return of the input filter.\r\nPlease advise since i am still seeing an issue\r\n-jaime",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jgruiz75",
                        "name": "jgruiz75",
                        "displayName": "Jaime Ruiz",
                        "active": true
                    },
                    "created": "2012-07-29T23:49:50.000+0000",
                    "updated": "2012-07-29T23:49:50.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/52061",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "This issue has been closed on Jira and moved to GitHub for issue tracking.  To continue following the resolution of this issues, please visit: https:\/\/github.com\/zendframework\/zf2\/issues\/2493",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2012-10-08T20:15:11.000+0000",
                    "updated": "2012-10-08T20:15:11.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF2-371\/transitions"
}