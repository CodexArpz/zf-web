{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF2-343",
    "key": "ZF2-343",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "input type checkbox, doesn't get checked when populating form"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF2-343\/votes",
                "votes": 1,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2012-08-07T18:10:44.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=assisp",
                "name": "assisp",
                "displayName": "Paulo Assis",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2012-06-06T15:36:40.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-08-07T18:10:44.000+0000"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "When populating form elements with setData only the value field gets written. \r\nThis works fine for most input types but not for the checkbox. For this element the value field is the value posted if checked.\r\nIMHO what most people want when populating the element is to check it or not according to the set value.\r\nThis worked just fine with the old form API, but now it doesn't and I can't find any other way of doing this with the current API, I'm guessing this was not intend so I marking it as a bug.\r\nMy solution for now was to write a view helper (formCheckbox) with the value set by a special attribute 'post-value' and adding a 'checked' if (value == post-value).\r\n(I'm implementing a very similar solution for dojo dijits since these are also broken due to the changes in the form API).\r\n\r\nRegards,\r\nPaulo"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF2-343\/watchers",
                "isWatching": false,
                "watchCount": 4
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/6",
                "name": "Closed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF2",
                "key": "ZF2",
                "name": "Zend Framework 2.0",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10542",
                    "id": 10542,
                    "name": "Zend\\Form",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51259",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cgmartin",
                        "name": "cgmartin",
                        "displayName": "Chris Martin",
                        "active": true
                    },
                    "body": "Paulo, do the \"options\" attribute and the \"useHiddenElement\" attribute help at all for your use case?\r\n\r\nAn example of custom values:\r\n{code}\r\n    \/\/ Inside a Form...\r\n    $myCheckboxElement = new Element('mycheckbox');\r\n    $myCheckboxElement->setAttributes(array(\r\n        'id' => 'mycheckbox',\r\n        'type' => 'checkbox',\r\n        'useHiddenElement' => true,\r\n        'options' => array(\r\n            'checkedValue'   => 'customCheckedValue',\r\n            'uncheckedValue' => 'customUncheckedValue',\r\n        ),\r\n    ));\r\n    $this->add($myCheckboxElement);\r\n{code}\r\n\r\nUnchecked would result in a value of: \"customUncheckedValue\".\r\nChecked would result in a value of: \"customCheckedValue\".\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cgmartin",
                        "name": "cgmartin",
                        "displayName": "Chris Martin",
                        "active": true
                    },
                    "created": "2012-07-04T22:21:08.000+0000",
                    "updated": "2012-07-04T22:21:08.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51262",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=assisp",
                        "name": "assisp",
                        "displayName": "Paulo Assis",
                        "active": true
                    },
                    "body": "The problem is that setData only changes the Value attribute, this will work fine in most input elements but not for the checkbox.\r\n\r\nHere is an example:\r\nlet's say you want to store a boolean value in a database, so you write a form with a checkbox (if checked it posts TRUE (1) otherwise it posts FALSE (0), now you store this into the database. Everything works fine here.\r\nBut now you want to edit that value, so you read the database and set the edit form with setData, now the checkbox will not be checked (although you set the value to TRUE).\r\nThis is even worse if you store FALSE in the database, when populating the edit form the checkbox will be unchecked and the value will change from TRUE to FALSE, so even if you check it it will post FALSE, not TRUE.\r\n\r\nLike I said I solved this by adding a new View Helper for the checkbox element, I can send a pull request with a fix, but I would like to make sure this is a valid solution first.\r\n\r\nRegards,\r\nPaulo\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=assisp",
                        "name": "assisp",
                        "displayName": "Paulo Assis",
                        "active": true
                    },
                    "created": "2012-07-05T09:28:44.000+0000",
                    "updated": "2012-07-05T09:28:44.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51267",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cgmartin",
                        "name": "cgmartin",
                        "displayName": "Chris Martin",
                        "active": true
                    },
                    "body": "\"The problem is that setData only changes the Value attribute, this will work fine in most input elements but not for the checkbox.\"\r\n\r\nI'm failing to see why the \"options\" and \"useHiddenElement\" wouldn't work for you here. In the example I posted above, the custom values are detected just fine from setData and the checkbox reacted as I would expect.\r\n\r\n1. Set up the form\r\n1a. Add a element (type checkbox) with \"options\" attribute specifying the checked\/unchecked values, and set \"userHiddenElement\" to true (to return the unchecked value).\r\n2. Get your data (from database, postback, etc.)\r\n3. Call $form->setData() with your data.\r\n4. The View $this->formCheckbox($form->get('mycheckbox')) renders the correct state.\r\n\r\nWhen using values other than true\/false with a checkbox, it is essentially the same behavior as a Select input with two options (checked\/unchecked). When you set up the form, you give it the two values it should expect for it's two states.\r\n\r\nFor the case when the checked state should produce reversed values (checked => false, unchecked => true):\r\n\r\n{code}\r\n    $myCheckboxElement->setAttributes(array(\r\n        'type' => 'checkbox',\r\n        'useHiddenElement' => true,\r\n        'options' => array(\r\n            'checkedValue'   => false,\r\n            'uncheckedValue' => true,\r\n        ),\r\n    ));\r\n{code}\r\n\r\nhttps:\/\/github.com\/zendframework\/zf2\/blob\/master\/library\/Zend\/Form\/View\/Helper\/FormCheckbox.php#L91-102\r\n\r\nIf I'm missing something here I'd suggest sending a pull request so we can take a look-see at the solution you have in mind. :)\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cgmartin",
                        "name": "cgmartin",
                        "displayName": "Chris Martin",
                        "active": true
                    },
                    "created": "2012-07-05T15:04:59.000+0000",
                    "updated": "2012-07-05T15:04:59.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51269",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=assisp",
                        "name": "assisp",
                        "displayName": "Paulo Assis",
                        "active": true
                    },
                    "body": "\r\nAh!, so when I open this issue (6\/Jun) this view helper was not available (added in the following commit 8\/Jun ):\r\nhttps:\/\/github.com\/zendframework\/zf2\/commit\/f093b2eabe31da99f3c87fadb7a4d6794e558d00\r\n\r\nSo, this fixes it. It works a little bit different from my own solution (I was only adding a new attribute), but it works ;D\r\n\r\nRegards,\r\nPaulo",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=assisp",
                        "name": "assisp",
                        "displayName": "Paulo Assis",
                        "active": true
                    },
                    "created": "2012-07-05T16:25:02.000+0000",
                    "updated": "2012-07-05T16:25:02.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF2-343\/transitions"
}