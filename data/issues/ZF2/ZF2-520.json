{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF2-520",
    "key": "ZF2-520",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Logger exception handler generates a badly formatted log message"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF2-520\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/8",
                "name": "Issue Moved"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2012-10-08T20:14:41.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yonman",
                "name": "yonman",
                "displayName": "Yonni Mendes",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2012-09-04T11:29:12.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-10-08T20:14:42.000+0000"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "ZF2 RC7\r\nSteps to reproduce:\r\nInitialize logging with writer and register the exception handler Logger::registerExceptionHandler\r\nCreate a view script that throws an exception\r\nDispatch the controller\r\nNote that request fails\r\n\r\nExpected\r\nLog will hold a properly formatted exception message with readable trace, e.g.\r\n{code}\r\nERR (3): exception 'Zend\\Form\\Exception\\DomainException' with message 'Zend\\Form\\View\\Helper\\FormLabel::__invoke expects either label ..... Form\/View\/Helper\/FormLabel.php:114\r\nStack trace:\r\n#0 [internal function]: Zend\\Form\\View\\Helper\\FormLabel->__invoke(Object(Zend\\Form\\Element))\r\n#1 \/home\/yonni\/Zend\/workspaces\/DefaultWorkspace\/ZendFramework-minimal-2.0.0rc7\/library\/Zend\/View\/Renderer\/PhpRenderer.php(353): call_user_func_array(Object(Zend\\Form\\View\\Helper\\FormLabel), Array)\r\n#2 \/home\/yonni\/Zend\/workspaces\/DefaultWorkspace\/gui.new\/module\/ZendServer\/src\/ZendServer\/View\/Helper\/Form\/Renderer\/Table.php(36): Zend\\View\\Renderer\\PhpRenderer->__call('FormLabel', Array)\r\n{code}\r\n\r\nActual\r\nLog holds a json_encoded trace which is very difficult to decipher and seems to have gone through multiple character escaping. The entry is one long string, I broke it apart for easier reading\r\n{code}\r\nZend\\Form\\View\\Helper\\FormLabel::__invoke expects ..... neither found {\"file\":\"\\\/home\\\/yonni\\\/Zend\\\/workspaces\\\/DefaultWorkspace\\\/ZendFramework-minimal-2.0.0rc7\\\/library\\\/Zend\\\/Form\\\/View\\\/Helper\\\/FormLabel.php\",\"line\":114,\"trace\":\"[\\\"\r\n{\\\\\\\"function\\\\\\\":\\\\\\\"__invoke\\\\\\\",\\\\\\\"class\\\\\\\":\\\\\\\"Zend\\\\\\\\\\\\\\\\Form\\\\\\\\\\\\\\\\View\\\\\\\\\\\\\\\\Helper\\\\\\\\\\\\\\\\FormLabel\\\\\\\",\\\\\\\"type\\\\\\\":\\\\\\\"->\\\\\\\",\\\\\\\"args\\\\\\\":\\\\\\\"\r\n[\\\\\\\\\\\\\\\"object(Zend\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\Form\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\Element) {}\\\\\\\\\\\\\\\"]\\\\\\\"}\\\",\r\n\\\"{\\\\\\\"file\\\\\\\":\\\\\\\"\\\\\\\\\\\\\\\/home\\\\\\\\\\\\\\\/yonni\\\\\\\\\\\\\\\/Zend\\\\\\\\\\\\\\\/workspaces\\\\\\\\\\\\\\\/DefaultWorkspace\\\\\\\\\\\\\\\/ZendFramework-minimal-2.0.0rc7\\\\\\\\\\\\\\\/library\\\\\\\\\\\\\\\/Zend\\\\\\\\\\\\\\\/View\\\\\\\\\\\\\\\/Renderer\\\\\\\\\\\\\\\/PhpRenderer.php\\\\\\\",\\\\\\\"line\\\\\\\":353,\\\\\\\"function\\\\\\\":\\\\\\\"call_user_func_array\\\\\\\",\\\\\\\"args\\\\\\\":\r\n\\\\\\\"[\\\\\\\\\\\\\\\"object(Zend\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\Form\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\View\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\Helper\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\FormLabel) {}\\\\\\\\\\\\\\\",\r\n\\\\\\\\\\\\\\\"[\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"object(Zend\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\Form\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\Element) {}\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"]\\\\\\\\\\\\\\\"]\\\\\\\"}\\\",\r\n\\\"{\\\\\\\"file\\\\\\\":\\\\\\\"\\\\\\\\\\\\\\\/home\\\\\\\\\\\\\\\/yonni\\\\\\\\\\\\\\\/Zend\\\\\\\\\\\\\\\/workspaces\\\\\\\\\\\\\\\/DefaultWorkspace\\\\\\\\\\\\\\\/gui.new\\\\\\\\\\\\\\\/module\\\\\\\\\\\\\\\/ZendServer\\\\\\\\\\\\\\\/src\\\\\\\\\\\\\\\/ZendServer\\\\\\\\\\\\\\\/View\\\\\\\\\\\\\\\/Helper\\\\\\\\\\\\\\\/Form\\\\\\\\\\\\\\\/Renderer\\\\\\\\\\\\\\\/Table.php\\\\\\\",\\\\\\\"line\\\\\\\":36,\\\\\\\"function\\\\\\\":\\\\\\\"__call\\\\\\\",\\\\\\\"class\\\\\\\":\\\\\\\"Zend\\\\\\\\\\\\\\\\View\\\\\\\\\\\\\\\\Renderer\\\\\\\\\\\\\\\\PhpRenderer\\\\\\\",\\\\\\\"type\\\\\\\":\\\\\\\"->\\\\\\\",\\\\\\\"args\\\\\\\":\\\\\\\"[\\\\\\\\\\\\\\\"FormLabel\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"[\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"object(Zend\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\Form\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\Element) {}\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"]\\\\\\\\\\\\\\\"]\\\\\\\"}\\\",\\\"{\\\\\\\"file\\\\\\\":\\\\\\\"\\\\\\\\\\\\\\\/home\\\\\\\\\\\\\\\/yonni\r\n.....\r\n{code}\r\n\r\nTo resolve this locally I changed the following line (Zend\\Log\\Logger.php:437)\r\n{code}\r\n$logger->log(Logger::ERR, $exception->getMessage(), $extra);\r\n{code}\r\nTo\r\n{code}\r\n$logger->log(Logger::ERR, $exception);\r\n{code}\r\n\r\nEffectively forcing the logger to use its own internal normalization and formatter"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF2-520\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/6",
                "name": "Closed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [
                "ExceptionHandler",
                "Logger"
            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/11184",
                    "id": 11184,
                    "description": "First stable release",
                    "name": "2.0.0",
                    "overdue": true,
                    "userReleaseDate": "06\/Sep\/12",
                    "archived": false,
                    "releaseDate": "2012-09-06",
                    "released": false
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF2",
                "key": "ZF2",
                "name": "Zend Framework 2.0",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10551",
                    "id": 10551,
                    "name": "Zend\\Log",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51855",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=intiilapa",
                        "name": "intiilapa",
                        "displayName": "Beno\u00eet Durand",
                        "active": true
                    },
                    "body": "You can define your own exception handler. I don't think that we use the toString render of an exception, but improve the exception formatter.\r\n\r\nI hope that you have extended your zf2 version instead of change the file. Do you know it's bad (practice)?\r\n\r\nToo many slashes :)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=intiilapa",
                        "name": "intiilapa",
                        "displayName": "Beno\u00eet Durand",
                        "active": true
                    },
                    "created": "2012-09-11T19:12:53.000+0000",
                    "updated": "2012-09-11T19:14:17.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51859",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yonman",
                        "name": "yonman",
                        "displayName": "Yonni Mendes",
                        "active": true
                    },
                    "body": "Naturally, extended outside the framework.\r\nJust to be sure this is clear - the same thing happens when any sort of extras array is passed, not only exceptions",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yonman",
                        "name": "yonman",
                        "displayName": "Yonni Mendes",
                        "active": true
                    },
                    "created": "2012-09-12T06:51:44.000+0000",
                    "updated": "2012-09-12T06:51:44.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/52004",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "This issue has been closed on Jira and moved to GitHub for issue tracking.  To continue following the resolution of this issues, please visit: https:\/\/github.com\/zendframework\/zf2\/issues\/2555",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2012-10-08T20:14:42.000+0000",
                    "updated": "2012-10-08T20:14:42.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF2-520\/transitions"
}