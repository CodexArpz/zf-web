{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF2-557",
    "key": "ZF2-557",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Subform validation"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF2-557\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/8",
                "name": "Issue Moved"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2012-10-08T20:14:31.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=macest",
                "name": "macest",
                "displayName": "Chris Willis",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2012-09-14T13:39:18.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-10-08T20:14:31.000+0000"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Subform validation seems to be broken for Checkbox, Radios, MultiCheckboxes and Selects. All of these seem to be ignoring the required value and they also seem to be adding additional InputFilters as \"subformname[elementname]\" which prevent validation. I believe it has something to do with the attachInputFilterDefaults method on the form class, but can't pinpoint the reason for this behaviour.\r\n\r\nDebug output from code by submitting with nothing filled out:\r\n{code}\r\nPost data:\r\n\r\nZend\\Stdlib\\Parameters Object\r\n(\r\n    [storage:ArrayObject:private] => Array\r\n        (\r\n            [select] => \r\n            [text] => \r\n            [checkbox] => 0\r\n            [textarea] => \r\n            [subform] => Array\r\n                (\r\n                    [select] => \r\n                    [text] => \r\n                    [checkbox] => 0\r\n                    [textarea] => \r\n                )\r\n\r\n            [submit] => Submit\r\n        )\r\n\r\n)\r\n\r\nForm messages:\r\n\r\nArray\r\n(\r\n    [subform] => Array\r\n        (\r\n            [radio] => Array\r\n                (\r\n                    [isEmpty] => Value is required and can't be empty\r\n                )\r\n\r\n            [multicheckbox] => Array\r\n                (\r\n                    [isEmpty] => Value is required and can't be empty\r\n                )\r\n\r\n            [select] => Array\r\n                (\r\n                    [isEmpty] => Value is required and can't be empty\r\n                )\r\n\r\n        )\r\n\r\n)\r\n\r\nInputFilter messages:\r\n\r\nArray\r\n(\r\n    [subform] => Array\r\n        (\r\n            [radio] => Array\r\n                (\r\n                    [isEmpty] => Value is required and can't be empty\r\n                )\r\n\r\n            [multicheckbox] => Array\r\n                (\r\n                    [isEmpty] => Value is required and can't be empty\r\n                )\r\n\r\n            [select] => Array\r\n                (\r\n                    [isEmpty] => Value is required and can't be empty\r\n                )\r\n\r\n            [subform[radio]] => Array\r\n                (\r\n                    [isEmpty] => Value is required and can't be empty\r\n                )\r\n\r\n            [subform[multicheckbox]] => Array\r\n                (\r\n                    [isEmpty] => Value is required and can't be empty\r\n                )\r\n\r\n            [subform[select]] => Array\r\n                (\r\n                    [isEmpty] => Value is required and can't be empty\r\n                )\r\n\r\n            [subform[checkbox]] => Array\r\n                (\r\n                    [isEmpty] => Value is required and can't be empty\r\n                )\r\n\r\n        )\r\n\r\n)\r\n{code}\r\n\r\n{code:title=Controller.php}\r\n\/\/ Main form\r\n$form = new Form();\r\n$form->setInputFilter( $filter = new InputFilter() );\r\n\r\n\/\/ Radio on main form\r\n$form->add( array(\r\n\t'type' => 'Zend\\Form\\Element\\Radio',\r\n\t'name' => 'radio',\r\n\t'options' => array(\r\n\t\t'value_options' => array(\r\n\t\t\t'1' => 'Approve',\r\n\t\t\t'2' => 'Deny',\r\n\t\t),\r\n\t\t'label' => 'Radio',\r\n\t),\r\n) );\r\n\r\n$filter->add( array(\r\n\t'name' => 'radio',\r\n\t'required' => false,\r\n) );\r\n\r\n\/\/ MultiCheckbox on main form\r\n$form->add( array(\r\n\t'type' => 'Zend\\Form\\Element\\MultiCheckbox',\r\n\t'name' => 'multicheckbox',\r\n\t'options' => array(\r\n\t\t'value_options' => array(\r\n\t\t\t'1' => 'Approve',\r\n\t\t\t'2' => 'Deny',\r\n\t\t),\r\n\t\t'label' => 'MultiCheckbox',\r\n\t),\r\n) );\r\n\r\n$filter->add( array(\r\n\t'name' => 'multicheckbox',\r\n\t'required' => false,\r\n) );\r\n\r\n\/\/ Select on main form\r\n$form->add( array(\r\n\t'type' => 'Zend\\Form\\Element\\Select',\r\n\t'name' => 'select',\r\n\t'options' => array(\r\n\t\t'value_options' => array(\r\n\t\t\t'' => 'Select...',\r\n\t\t\t'1' => 'Approve',\r\n\t\t\t'2' => 'Deny',\r\n\t\t),\r\n\t\t'label' => 'Select',\r\n\t),\r\n) );\r\n\r\n$filter->add( array(\r\n\t'name' => 'select',\r\n\t'required' => false,\r\n) );\r\n\r\n\/\/ Text on main form\r\n$form->add( array(\r\n\t'name' => 'text',\r\n\t'options' => array(\r\n\t\t'label' => 'Text',\r\n\t),\r\n) );\r\n\r\n$filter->add( array(\r\n\t'name' => 'text',\r\n\t'required' => false,\r\n) );\r\n\r\n\/\/ Checkbox on main form\r\n$form->add( array(\r\n\t'type' => 'Zend\\Form\\Element\\Checkbox',\r\n\t'name' => 'checkbox',\r\n\t'options' => array(\r\n\t\t'label' => 'Checkbox',\r\n\t),\r\n) );\r\n\r\n$filter->add( array(\r\n\t'name' => 'checkbox',\r\n\t'required' => false,\r\n) );\r\n\r\n\/\/ Textarea on main form\r\n$form->add( array(\r\n\t'type' => 'Zend\\Form\\Element\\Textarea',\r\n\t'name' => 'textarea',\r\n\t'options' => array(\r\n\t\t'label' => 'Textarea',\r\n\t),\r\n) );\r\n\r\n$filter->add( array(\r\n\t'name' => 'textarea',\r\n\t'required' => false,\r\n) );\r\n\r\n\/\/ Subform\r\n$form->add( $subForm = new Form(), array( 'name' => 'subform' ) );\r\n$subForm->setInputFilter( $subFilter = new InputFilter() );\r\n\r\n\/\/ Radio on subform\r\n$subForm->add( array(\r\n\t'type' => 'Zend\\Form\\Element\\Radio',\r\n\t'name' => 'radio',\r\n\t'options' => array(\r\n\t\t'value_options' => array(\r\n\t\t\t'1' => 'Approve',\r\n\t\t\t'2' => 'Deny',\r\n\t\t),\r\n\t\t'label' => 'Radio',\r\n\t),\r\n) );\r\n\r\n$subFilter->add( array(\r\n\t'name' => 'radio',\r\n\t'required' => false,\r\n) );\r\n\r\n\/\/ MultiCheckbox on subform\r\n$subForm->add( array(\r\n\t'type' => 'Zend\\Form\\Element\\MultiCheckbox',\r\n\t'name' => 'multicheckbox',\r\n\t'options' => array(\r\n\t\t'value_options' => array(\r\n\t\t\t'1' => 'Approve',\r\n\t\t\t'2' => 'Deny',\r\n\t\t),\r\n\t\t'label' => 'MultiCheckbox',\r\n\t),\r\n) );\r\n\r\n$subFilter->add( array(\r\n\t'name' => 'multicheckbox',\r\n\t'required' => false,\r\n) );\r\n\r\n\/\/ Select on subform\r\n$subForm->add( array(\r\n\t'type' => 'Zend\\Form\\Element\\Select',\r\n\t'name' => 'select',\r\n\t'options' => array(\r\n\t\t'value_options' => array(\r\n\t\t\t'' => 'Select...',\r\n\t\t\t'1' => 'Approve',\r\n\t\t\t'2' => 'Deny',\r\n\t\t),\r\n\t\t'label' => 'Select',\r\n\t),\r\n) );\r\n\r\n$subFilter->add( array(\r\n\t'name' => 'select',\r\n\t'required' => false,\r\n) );\r\n\r\n\/\/ Text on subform\r\n$subForm->add( array(\r\n\t'name' => 'text',\r\n\t'options' => array(\r\n\t\t'label' => 'Text',\r\n\t),\r\n) );\r\n\r\n$subFilter->add( array(\r\n\t'name' => 'text',\r\n\t'required' => false,\r\n) );\r\n\r\n\/\/ Checkbox on subform\r\n$subForm->add( array(\r\n\t'type' => 'Zend\\Form\\Element\\Checkbox',\r\n\t'name' => 'checkbox',\r\n\t'options' => array(\r\n\t\t'label' => 'Checkbox',\r\n\t),\r\n) );\r\n\r\n$subFilter->add( array(\r\n\t'name' => 'checkbox',\r\n\t'required' => false,\r\n) );\r\n\r\n\/\/ Textarea on subform\r\n$subForm->add( array(\r\n\t'type' => 'Zend\\Form\\Element\\Textarea',\r\n\t'name' => 'textarea',\r\n\t'options' => array(\r\n\t\t'label' => 'Textarea',\r\n\t),\r\n) );\r\n\r\n$subFilter->add( array(\r\n\t'name' => 'textarea',\r\n\t'required' => false,\r\n) );\r\n\r\n\/\/ Submit\r\n$form->add( array(\r\n\t'name' => 'submit',\r\n\t'attributes' => array(\r\n\t\t'value' => 'Submit',\r\n\t),\r\n) );\r\n\r\n\/\/ Process\r\necho 'Post data:<pre>';\r\nprint_r( $this->request->getPost() );\r\necho '<\/pre>';\r\n$form->prepare();\r\nif ( $this->request->isPost() && $form->setData( $this->request->getPost() ) )\r\n{\r\n\tif ( $form->isValid() )\r\n\t{\r\n\t\techo 'Form data:<pre>';\r\n\t\tprint_r( $form->getData() );\r\n\t\techo '<\/pre>';\r\n\t}\r\n\telse\r\n\t{\r\n\t\techo 'Form messages:<pre>';\r\n\t\tprint_r( $form->getMessages() );\r\n\t\techo '<\/pre>';\r\n\t\techo 'InputFilter messages:<pre>';\r\n\t\tprint_r( $filter->getMessages() );\r\n\t\techo '<\/pre>';\r\n\t}\r\n}\r\n\r\nreturn new ViewModel( array( 'form' => $form ) );\r\n{code}\r\n\r\n{code:title=view.phtml}\r\n<?php echo $this->form()->openTag( $form ) ?>\r\n\t<fieldset>\r\n\t\t<?php foreach ( $form->getElements() as $element ): ?>\r\n\t\t\t<?php if ( 'submit' == $element->getName() ) continue ?>\r\n\t\t\t<?php echo $this->formLabel( $element ) ?>\r\n\t\t\t<?php $type = 'form' . $element->getName() ?>\r\n\t\t\t<?php echo $this->{$type}( $element ) ?>\r\n\t\t\t<br\/>\r\n\t\t\t<?php echo $this->formElementErrors( $element ) ?>\r\n\t\t<?php endforeach ?>\r\n\t\t\r\n\t\t<fieldset>\r\n\t\t\t<?php foreach ( $form->get( 'subform' )->getElements() as $element ): ?>\r\n\t\t\t\t<?php echo $this->formLabel( $element ) ?>\r\n\t\t\t\t<?php $type = 'form' . substr( $element->getName(), 8, strlen( $element->getName() ) - 9 ) ?>\r\n\t\t\t\t<?php echo $this->{$type}( $element ) ?>\r\n\t\t\t\t<br\/>\r\n\t\t\t\t<?php echo $this->formElementErrors( $element ) ?>\r\n\t\t\t<?php endforeach ?>\r\n\t\t<\/fieldset>\r\n\t\t\r\n\t\t<?php echo $this->formSubmit( $form->get( 'submit' ) ) ?>\r\n\t<\/fieldset>\r\n<?php echo $this->form()->closeTag() ?>\r\n{code}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF2-557\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/6",
                "name": "Closed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/11184",
                    "id": 11184,
                    "description": "First stable release",
                    "name": "2.0.0",
                    "overdue": true,
                    "userReleaseDate": "06\/Sep\/12",
                    "archived": false,
                    "releaseDate": "2012-09-06",
                    "released": false
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF2",
                "key": "ZF2",
                "name": "Zend Framework 2.0",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10542",
                    "id": 10542,
                    "name": "Zend\\Form",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51982",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "This issue has been closed on Jira and moved to GitHub for issue tracking.  To continue following the resolution of this issues, please visit: https:\/\/github.com\/zendframework\/zf2\/issues\/2583",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2012-10-08T20:14:31.000+0000",
                    "updated": "2012-10-08T20:14:31.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF2-557\/transitions"
}