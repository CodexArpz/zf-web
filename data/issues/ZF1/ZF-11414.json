{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11414",
    "key": "ZF-11414",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Upgrade to PHP 5.3 causes fatal errors"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11414\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gbirch",
                "name": "gbirch",
                "displayName": "Giles Birch",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2011-05-27T14:58:21.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-05-30T18:27:43.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "dbadapter",
                "mysqli",
                "php53"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Upgraded server from PHP 5.2.17 to 5.3.6 on CENTOS 5.6 x86_64, MySQL 5.0.92, Apache 2.2 MPM Event\r\n1. Script sets $db = new Zend_Db_Adapter_Mysqli($dbDSN); \r\n2. A function runs a series of simple queries, all work fine and produce suitable results:\r\n    $sportsemploy = $db->fetchCol('SELECT id FROM employment WHERE sports');\r\n    $nsportsemploy = $db->fetchCol('SELECT id FROM employment WHERE NOT sports');\r\n    $bactivity = $db->fetchCol('SELECT id FROM special_interest WHERE race=\"B\"');\r\n    $wactivity = $db->fetchCol('SELECT id FROM special_interest WHERE race=\"W\"');\r\n\r\n3. Function enters a loop, and the following code results in 500 errors from the server, which I presume to be PHP fatal errors (I can't catch them):\r\n    for ($i = 1; $i <= $numprofiles; $i++) {\r\n      $this->profiles[$i]['race'] = $race = $db->fetchOne('SELECT race FROM name WHERE id = ?', array($this->profiles[$i]['name']));\r\n      $this->profiles[$i]['gender'] = $gender = $db->fetchOne('SELECT gender FROM name WHERE id = ?', array($this->profiles[$i]['name']));\r\n      $this->profiles[$i]['sports'] = $sports = $db->fetchOne('SELECT sports FROM leadership WHERE id = ?', array($this->profiles[$i]['leadership']));\r\n\/\/...\r\n    }\r\n\r\n4. It's not a problem with the loop or the variables therein.  The same error occurs if I replace the for loop with another query against $db, ANY other query.\r\n5. All code works just peachy under PHP 5.2.17 (both before upgrade, and after downgrade)"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11414\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [
                "5.3",
                "PHP"
            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                "name": "ralph",
                "displayName": "Ralph Schindler",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10580",
                    "id": 10580,
                    "description": "Mini Release",
                    "name": "1.11.6",
                    "userReleaseDate": "05\/May\/11",
                    "archived": false,
                    "releaseDate": "2011-05-05",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10131",
                    "id": 10131,
                    "name": "Zend_Db_Adapter_Mysqli",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/46914",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "body": "Do you get any error messages in the Apache log? Is error display enabled in your PHP?  If not, you may want to try turning it on and visiting the page again to see if PHP is raising any errors.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "created": "2011-05-30T16:01:03.000+0000",
                    "updated": "2011-05-30T16:01:03.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/46920",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gbirch",
                        "name": "gbirch",
                        "displayName": "Giles Birch",
                        "active": true
                    },
                    "body": "Can't find any errors in the Apache log (which may, I admit, be because it's improperly configured).  Yes, error reporting is enabled (\"error_reporting(-1);\"), and no, I get no PHP errors--just the crash and the re-direct to 500.shtml.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gbirch",
                        "name": "gbirch",
                        "displayName": "Giles Birch",
                        "active": true
                    },
                    "created": "2011-05-30T18:16:36.000+0000",
                    "updated": "2011-05-30T18:16:36.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/46921",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gbirch",
                        "name": "gbirch",
                        "displayName": "Giles Birch",
                        "active": true
                    },
                    "body": "Sorry, that strikeout was unintentional--should read error_reporting(-1);",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gbirch",
                        "name": "gbirch",
                        "displayName": "Giles Birch",
                        "active": true
                    },
                    "created": "2011-05-30T18:17:30.000+0000",
                    "updated": "2011-05-30T18:17:30.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/46922",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gbirch",
                        "name": "gbirch",
                        "displayName": "Giles Birch",
                        "active": true
                    },
                    "body": "Some additional\/clarifying information in case it is helpful:\r\n1.  If I terminate the function before the loop, no error.\r\n2.  Same behavior occurs whether or not profiler is enabled.\r\n3.  Querying the profiler and returning before the loop does not cause errors (and shows no problems with preceding queries).\r\n4.  When I say that \"ANY other query\" causes a crash, I mean that it crashes even if I simply repeat one of the queries in step 2 before returning.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gbirch",
                        "name": "gbirch",
                        "displayName": "Giles Birch",
                        "active": true
                    },
                    "created": "2011-05-30T18:27:43.000+0000",
                    "updated": "2011-05-30T18:27:43.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11414\/transitions"
}