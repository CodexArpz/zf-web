{
    "expand": "html",
    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-506",
    "key": "ZF-506",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "SSL Handling bug (Not handling buggy servers)"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-506\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/version\/10040",
                    "id": 10040,
                    "description": "Preview Release; MVC maturation, HTTP client, Gdata",
                    "name": "0.6.0",
                    "userReleaseDate": "16\/Dec\/06",
                    "archived": true,
                    "releaseDate": "2006-12-16",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2006-11-21T06:59:56.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=lsaferite",
                "name": "lsaferite",
                "displayName": "Lee Saferite",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2006-11-08T07:49:38.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2007-07-05T14:43:25.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I'm not sure if everyone gets this problem, but I do and it is a serious headache.\n\nApparently there are some buggy servers out there that do not cleanly close an SSL connection.  \n\nThis is from the [PHP Manual|http:\/\/php.net\/file_get_contents]\n{quote}\nWhen using SSL, Microsoft IIS will violate the protocol by closing the connection without sending a close_notify indicator. PHP will report this as \"SSL: Fatal Protocol Error\" when you reach the end of the data. To workaround this, you should lower your error_reporting level not to include warnings. PHP 4.3.7 and higher can detect buggy IIS server software when you open the stream using the https:\/\/ wrapper and will suppress the warning for you. If you are using fsockopen() to create an ssl:\/\/ socket, you are responsible for detecting and suppressing the warning yourself.\n{quote}\n\nThis seems to happen for me in calls to fgets inside Zend_Http_Client, Line 252.\nNow,  to be fair, I am running 0.1.5.\nHowever, as far as I can tell, this would still happen with trunk and incubator.\n\nI'm not sure of the exact fix for it apart from a well placed @, although I personally hate hiding errors\/warnings.\n\nP.S. I'm also running PHP 5.0.4 but the issue seems to be that the ZF code does not handle buggy servers."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-506\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                "name": "shahar",
                "displayName": "Shahar Evron",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/component\/10015",
                    "id": 10015,
                    "name": "Zend_Http_Client",
                    "description": "performs HTTP requests",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/11200",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                        "name": "shahar",
                        "displayName": "Shahar Evron",
                        "active": true
                    },
                    "body": "Hi,\n\nActually, the matter of fact is that this is a problem in PHP, and the HTTP client only uses the PHP built-in ssl:\/\/ stream handler to do HTTPS. I've noticed this problem before, but had no simple and easy way to fix it except for silencing the error.\n\nI will leave this bug open for now and hopefully will try to find a resolution for this issue before 1.0. Until then, any suggestions are welcome.\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                        "name": "shahar",
                        "displayName": "Shahar Evron",
                        "active": true
                    },
                    "created": "2006-11-08T07:59:36.000+0000",
                    "updated": "2006-11-08T07:59:36.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/11201",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=lsaferite",
                        "name": "lsaferite",
                        "displayName": "Lee Saferite",
                        "active": true
                    },
                    "body": "As I mentioned, I think using @ would fix the issue, however I hate the idea.  On the other hand, it is already being used when opening the socket, so why not use it when reading?\n\nIt seems to me that PHP really should handle this problem a bit more gracefully.  Or maybe they should re-write the https wrapper to support writing. (Since the https wrapper handles this problem internally)",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=lsaferite",
                        "name": "lsaferite",
                        "displayName": "Lee Saferite",
                        "active": true
                    },
                    "created": "2006-11-08T08:13:02.000+0000",
                    "updated": "2006-11-08T08:13:02.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/11291",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                        "name": "shahar",
                        "displayName": "Shahar Evron",
                        "active": true
                    },
                    "body": "Can you provide a pulic URL that I can use to reproduce and test this problem?",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                        "name": "shahar",
                        "displayName": "Shahar Evron",
                        "active": true
                    },
                    "created": "2006-11-11T00:58:13.000+0000",
                    "updated": "2006-11-11T00:58:13.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/11489",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "Changing fix version to 0.6.0.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2006-11-13T15:24:57.000+0000",
                    "updated": "2006-11-13T15:24:57.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/11589",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=alexadriaanse",
                        "name": "alexadriaanse",
                        "displayName": "Alex Adriaanse",
                        "active": true
                    },
                    "body": "A URL that triggered this warning for me is https:\/\/records.txdps.state.tx.us\/DPS_WEB\/Sor\/index.aspx?PageIndex=Search&SubmitType=Address .\n\nWould using feof() to check to see if the socket has been closed work?  Essentially, do something like this:\n\n{code}\nwhile (!feof($this->socket) && $buff = fread($this->socket, 8192)) {\n     $response .= $buff;\n}\n{code}\n\nMaking this change seemed to get rid of the warning for me.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=alexadriaanse",
                        "name": "alexadriaanse",
                        "displayName": "Alex Adriaanse",
                        "active": true
                    },
                    "created": "2006-11-18T22:10:17.000+0000",
                    "updated": "2006-11-18T22:10:17.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/11591",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=alexadriaanse",
                        "name": "alexadriaanse",
                        "displayName": "Alex Adriaanse",
                        "active": true
                    },
                    "body": "Never mind, I'm still seeing the warnings after my change, it's just sporadic.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=alexadriaanse",
                        "name": "alexadriaanse",
                        "displayName": "Alex Adriaanse",
                        "active": true
                    },
                    "created": "2006-11-19T01:01:43.000+0000",
                    "updated": "2006-11-19T01:01:43.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/11592",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                        "name": "shahar",
                        "displayName": "Shahar Evron",
                        "active": true
                    },
                    "body": "I've changed lines 169 and 217 to include your change, and I don't get the warning every time - it seems to behave a bit better.\nBut this is not good enough yet. Maybe we need to combine this with a '@'..\n\nI will commit this anyway, it's a bit less warning prone.\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                        "name": "shahar",
                        "displayName": "Shahar Evron",
                        "active": true
                    },
                    "created": "2006-11-19T03:38:14.000+0000",
                    "updated": "2006-11-19T03:38:14.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/11596",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                        "name": "shahar",
                        "displayName": "Shahar Evron",
                        "active": true
                    },
                    "body": "Oddly enough, when I used the sslv2:\/\/ wrapper instead of ssl:\/\/ the problem does not appear. I've committed this change although I am not sure this is a very good idea (in case some servers still use sslv1).\n\nPlease test and let me know.\n",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                        "name": "shahar",
                        "displayName": "Shahar Evron",
                        "active": true
                    },
                    "created": "2006-11-19T06:54:52.000+0000",
                    "updated": "2006-11-19T06:54:52.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/11614",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=alexadriaanse",
                        "name": "alexadriaanse",
                        "displayName": "Alex Adriaanse",
                        "active": true
                    },
                    "body": "The change you made in r1767 seems to have solved this warning for me.  I've tested it a few times and haven't seen the warning so far.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=alexadriaanse",
                        "name": "alexadriaanse",
                        "displayName": "Alex Adriaanse",
                        "active": true
                    },
                    "created": "2006-11-19T18:59:59.000+0000",
                    "updated": "2006-11-19T18:59:59.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/11626",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                        "name": "shahar",
                        "displayName": "Shahar Evron",
                        "active": true
                    },
                    "body": "Seems to be fixed then.\nMarking as resolved unless proven otherwise",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                        "name": "shahar",
                        "displayName": "Shahar Evron",
                        "active": true
                    },
                    "created": "2006-11-21T06:59:56.000+0000",
                    "updated": "2006-11-21T06:59:56.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-506\/transitions"
}