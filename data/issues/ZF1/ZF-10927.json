{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10927",
    "key": "ZF-10927",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Database query result gets truncated"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10927\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/5",
                "name": "Cannot Reproduce"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2011-01-22T08:26:56.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mkrassovski",
                "name": "mkrassovski",
                "displayName": "Misha Krassovski",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2011-01-07T13:45:41.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-02-08T11:10:01.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I'm in the process of creating an application based on ZF 1.10.8. This application utilizes a world border dataset that is stored in a MySQL database table (version 4.1.22). That table  keeps country borders as multi-polygons in the geometry type column. Retrieving borders geometry I found the following problem:\r\nwhen I use Zend_Db_Table the query results gets truncated, I can't get more that 8192b of data. I repeated this task without ZF, just using build-in MySQL access functions (PHP version 5.1.6) and could get data in full. Here is the code:\r\n1. With ZF\r\n{code}\r\nclass Application_Model_DbTable_Borders extends Zend_Db_Table_Abstract\r\n{\r\n\tprotected $_name = 'borders';\r\n\tprotected $_primary = 'OGR_FID';\r\n\tpublic function getAllBorders()\r\n\t{\r\n\t\t$select = $this->select();\r\n\t\t$select->from($this->_name, array('iso2','name', 'AsText(Shape) AS wkt'));\r\n\t\t$select->where('iso2 = ?', 'AT');\r\n\t\t$rowset = $this->fetchAll($select);\r\n\t\tif (count($rowset) == 0) {\r\n\t\t\tthrow new Exception(\"Could not get borders\");\r\n\t\t}\r\n\t\t$wkt = $rowset[0]->wkt;\r\n    \t\t$l = strlen($wkt);\r\n    \t\techo 'L = ' . $l . '<br\/>';\r\n\t\treturn $rowset;\r\n\t}\r\n}\r\n\/\/L = 8192\r\n{code}\r\n\r\n2. Without ZF\r\n{code}\r\n$link = mysql_connect('localhost', '*****', '*****');\r\nif (!$link) {\r\n    die('Could not connect: ' . mysql_error());\r\n}\r\n\r\nif (!mysql_select_db('CO2_Emissions', $link)) {\r\n    die('Could not select database<br \/>');\r\n}\r\n\r\n$sql    = \"SELECT iso2, name, AsText(Shape) AS wkt FROM borders where iso2 = 'AT'\";\r\n$result = mysql_query($sql, $link);\r\n\r\nif (!$result) {\r\n    $error = mysql_error();\r\n    die($error);\r\n}\r\n\r\n$row = mysql_fetch_assoc($result);\r\n$l = strlen($row['wkt']);\r\nmysql_free_result($result);\r\necho 'L = ' . $l;\r\n\r\n\/\/L = 11714\r\n{code}\r\nThank you,\r\nMisha"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10927\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                "name": "ralph",
                "displayName": "Ralph Schindler",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10490",
                    "id": 10490,
                    "description": "Mini Release",
                    "name": "1.10.8",
                    "userReleaseDate": "25\/Aug\/10",
                    "archived": false,
                    "releaseDate": "2010-08-25",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10133",
                    "id": 10133,
                    "name": "Zend_Db_Table",
                    "description": "Lightweight OO interface to database tables and rowsets.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43969",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                        "name": "bittarman",
                        "displayName": "Ryan Mauger",
                        "active": true
                    },
                    "body": "As you note php version 5.1.6 in your description of the problem, could you confirm that you are not using this version with ZF, as the minimum requirement is 5.2.4.\r\n\r\nif you are using < 5.2.4, could you try upgrading, and confirming that this is still the case?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                        "name": "bittarman",
                        "displayName": "Ryan Mauger",
                        "active": true
                    },
                    "created": "2011-01-08T07:01:49.000+0000",
                    "updated": "2011-01-08T07:01:49.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44029",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mkrassovski",
                        "name": "mkrassovski",
                        "displayName": "Misha Krassovski",
                        "active": true
                    },
                    "body": "I'm sorry for the late reply! To make a long story short - I'm in the process of upgrading to something that will be >= 5.2.4. As soon as it will be done, I'll test it again and let you know if the problem remains.\r\n\r\nThank you,\r\nMisha",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mkrassovski",
                        "name": "mkrassovski",
                        "displayName": "Misha Krassovski",
                        "active": true
                    },
                    "created": "2011-01-14T11:58:19.000+0000",
                    "updated": "2011-01-14T11:58:19.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44119",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "I am unable to reproduce.  If you still have this issue after upgrading to 5.2.4+, please feel free to reopen.\r\n\r\nThings to do before-so: make sure that the code you use is consistent with the driver for Zend_Db. For example, if your adapter is using mysqli_* functions, please test that extension.  If you are using Pdo with Mysql, then test that accordingly.\r\n\r\nWhat I think is happening is you are hitting your lob_buffer_size in mysql with whichever extension you are using, perhaps tweak your settings in that regard.\r\n\r\nIf you still have the issue, reopen with some code (SQL data and row included) that we can use to reproduce the issue,\r\n\r\nThanks!\r\nRalph",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2011-01-22T08:21:00.000+0000",
                    "updated": "2011-01-22T08:21:00.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44120",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ramon",
                        "name": "ramon",
                        "displayName": "Ramon Henrique Ornelas",
                        "active": true
                    },
                    "body": "@ralph\r\nI believe that you forgot of close this issue.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ramon",
                        "name": "ramon",
                        "displayName": "Ramon Henrique Ornelas",
                        "active": true
                    },
                    "created": "2011-01-22T08:26:56.000+0000",
                    "updated": "2011-01-22T08:26:56.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44324",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mkrassovski",
                        "name": "mkrassovski",
                        "displayName": "Misha Krassovski",
                        "active": true
                    },
                    "body": "Ok, finally I upgraded everything and after having PHP 5.3.2 and ZF 1.11.3 all started to work as it supposed. Just want to confirm that the issue was due to the incorrect version of PHP and is resolved.\r\nThank you for your help!\r\nMisha",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mkrassovski",
                        "name": "mkrassovski",
                        "displayName": "Misha Krassovski",
                        "active": true
                    },
                    "created": "2011-02-08T11:10:00.000+0000",
                    "updated": "2011-02-08T11:10:00.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10927\/transitions"
}