{
    "expand": "html",
    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-599",
    "key": "ZF-599",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "PostgreSQL: can't connect to PostgreSQL using Zend_Db"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-599\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2007-03-22T11:32:36.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=jmarques",
                "name": "jmarques",
                "displayName": "Jacques Marques",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2006-11-27T05:20:04.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2007-07-05T14:43:30.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": " Hello,\n\n I am using Zend Framework 0.2.0 and I try use Zend_Db class to connect on\n PostgreSQL, but when I try this:\n\n{code}\n               $DB = Zend::registry('DB');\n               $select = $DB->select();\n               $select->from('user', '*');\n               $select->where('user_login = ?', $login);\n               $select->where('user_password= md5(?)', $password);\n\n               $rowsFound = $DB->fetchAll($select);\n{code}\n\n I receive this error message:\n\n{code}\n Fatal error: Uncaught exception 'Zend_Db_Adapter_Exception' with message\n 'SQLSTATE[08006] [7] invalid connection    option \"type\"' in C:\\Arquivos de\n programas\\Apache\n Group\\Apache2\\htdocs\\intellectus\\lib\\ZendFramework-0.2.0\\Zend\\Db\\Adapter\\Pdo\\Abstract.php:103\n Stack trace: #0 C:\\Arquivos de programas\\Apache\n Group\\Apache2\\htdocs\\intellectus\\lib\\ZendFramework-0.2.0\\Zend\\Db\\Adapter\\Abstract.php(412):\n Zend_Db_Adapter_Pdo_Abstract->_connect() #1 C:\\Arquivos de programas\\Apache\n Group\\Apache2\\htdocs\\intellectus\\lib\\ZendFramework-0.2.0\\Zend\\Db\\Adapter\\Abstract.php(443):\n Zend_Db_Adapter_Abstract->quote(false) #2 C:\\Arquivos de programas\\Apache\n Group\\Apache2\\htdocs\\intellectus\\lib\\ZendFramework-0.2.0\\Zend\\Db\\Select.php(322):\n Zend_Db_Adapter_Abstract->quoteInto('usuario_login =...', false) #3\n C:\\Arquivos de programas\\Apache\n Group\\Apache2\\htdocs\\intellectus\\application\\controllers\\UserController.php(34):\n Zend_Db_Select->where('usuario_login =...', false) #4 C:\\Arquivos de\n programas\\Apache Group\\Apache2\\htdocs\\intellectus\\lib\\ZendFramewor in\n C:\\Arquivos de programas\\Apache\n Group\\Apache2\\htdocs\\intellectus\\lib\\ZendFramework-0.2.0\\Zend\\Db\\Adapter\\Pdo\\Abstract.php\n on line 103\n{code}\n\n I could see the problem is because the PDO_PGSQL DSN do not accept type\n option and I fix this putting a condition in _dsn method of\n Zend_Db_Adapter_Abstract class, like this:\n\n{code}\n         \/\/ if its try connect in PostgreSql don't pass type id the DSN\n         if ($this->_pdoType == 'pgsql')\n               unset($dsn['type']);\n{code}\n\n Thanks,\n\nJacques"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-599\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                "name": "bkarwin",
                "displayName": "Bill Karwin",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/version\/10002",
                    "id": 10002,
                    "description": "Preview Release; MVC refactoring and other enhancements and fixes",
                    "name": "0.2.0",
                    "userReleaseDate": "29\/Oct\/06",
                    "archived": true,
                    "releaseDate": "2006-10-29",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/component\/10012",
                    "id": 10012,
                    "name": "Zend_Db",
                    "description": "interfaces, APIs, and adapters for various third-party data stores",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/11690",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "Assigning to Bill Karwin, scheduling for fix by 0.8.0.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2006-11-28T17:48:40.000+0000",
                    "updated": "2006-11-28T17:48:40.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/13576",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=jmarques",
                        "name": "jmarques",
                        "displayName": "Jacques Marques",
                        "active": true
                    },
                    "body": "Hello Bill,\n\nWe are in release 0.9.0 and this issue is open until now, any prevision for solution?\n\nThanks, \n\nJacques",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=jmarques",
                        "name": "jmarques",
                        "displayName": "Jacques Marques",
                        "active": true
                    },
                    "created": "2007-03-20T20:56:10.000+0000",
                    "updated": "2007-03-20T20:56:10.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/13577",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "I have never been able to reproduce this error.  I connect to PostgreSQL frequently.  \n\nCan you tell me how you create the Adapter instance?  You only show how you retrieve the Adapter object from the registry, but you do not show how you create the Adapter object.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2007-03-20T21:13:23.000+0000",
                    "updated": "2007-03-20T21:13:23.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/13604",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=jmarques",
                        "name": "jmarques",
                        "displayName": "Jacques Marques",
                        "active": true
                    },
                    "body": "Hello Bill,\n\nI found what is wrong with my code. I use the Zend_Config_Xml to retrieve the connection parameters, and I follow the ZF Manual sample:\n\n<?xml version=\"1.0\"?>\n<configdata>\n    <production>\n        <webhost>www.example.com<\/webhost>\n        <database>\n            <type>pdo_mysql<\/type>\n            <host>db.example.com<\/host>\n            <username>dbuser<\/username>\n            <password>secret<\/password>\n            <name>dbname<\/name>\n        <\/database>\n    <\/production>\n...\n\nThen in boot strap I to this:\n\n\/\/ Load configurations\n$config = new Zend_Config_Xml('application\/config.xml', 'uniart');\n\n$DB = Zend_Db::factory($config->database->type, $config->database->asArray());\nZend_Registry::set('DB', $DB);\t\nZend_Db_Table::setDefaultAdapter($DB); \n\nThe line:\n\n $DB = Zend_Db::factory($config->database->type, $config->database->asArray());\n\nThis is translate to:\n $DB = Zend_Db::factory('PDO_PGSQL', Array('type' => 'PDO_PGSQL' ,\n                                                                                    'host' => '127.0.0.1',\n                                                                                    'username' => 'postgres',\n                                                                                    'password' => 'consis',\n                                                                                    'dbname' => 'unicart')\n);\n\nAnd the 'type' attribute of the array cause the exception, in MySql this work fine, but in PostreSQL not.\n\nAny sugestion to solve this?\n\nThanks.\n\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=jmarques",
                        "name": "jmarques",
                        "displayName": "Jacques Marques",
                        "active": true
                    },
                    "created": "2007-03-21T20:52:27.000+0000",
                    "updated": "2007-03-21T20:52:27.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/13605",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "How about pushing the legal options down one level in the XML config file?\n\n{code}\n<?xml version=\"1.0\"?>\n<configdata>\n  <production>\n    <webhost>www.example.com<\/webhost>\n    <database>\n      <type>pdo_pgsql<\/type>\n      <options>\n        <host>db.example.com<\/host>\n        <username>dbuser<\/username>\n        <password>secret<\/password>\n        <name>dbname<\/name>\n      <\/options>\n    <\/database>\n  <\/production>\n  ...\n<\/configdata>\n{code}\n\nThen it should be easier to pass only the legal options to the Db factory:\n\n{code}\n$DB = Zend_Db::factory(\n    $config->database->type, \n    $config->database->options->asArray()\n);\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2007-03-21T21:51:00.000+0000",
                    "updated": "2007-03-21T21:51:00.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/13615",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=jmarques",
                        "name": "jmarques",
                        "displayName": "Jacques Marques",
                        "active": true
                    },
                    "body": "Well, this work for me.\n\nThank you for your help.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=jmarques",
                        "name": "jmarques",
                        "displayName": "Jacques Marques",
                        "active": true
                    },
                    "created": "2007-03-22T05:58:54.000+0000",
                    "updated": "2007-03-22T05:58:54.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/13627",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "Hi, I'm resolving this issue as \"not an issue\" because it was based on a problem with usage; the Zend_Db code is working as designed.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2007-03-22T11:32:36.000+0000",
                    "updated": "2007-03-22T11:32:36.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-599\/transitions"
}