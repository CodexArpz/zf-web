{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10692",
    "key": "ZF-10692",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Validate_NotEmpty returns false, but isValid on form returns true"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/8",
                "name": "Docs:  Problem",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10692\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2010-11-20T03:11:57.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=eithed",
                "name": "eithed",
                "displayName": "Pawel Trauth",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-11-17T02:13:22.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-11-20T03:11:57.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Hi there,\r\n\r\nI've an element in the form that doesn't need to be required, but if it is passed on, then it has not to be empty - I thought that notEmpty validator would resolve my problem but I kept encountering an issue where the isValid method for validator would return false as expected, but the isValid method for the form would return true.\r\n\r\nMy code is as follows:\r\n{code}\r\nclass FormCity extends Zend_Form\r\n{\r\n    public function init()\r\n    {\r\n        $city = new Zend_Form_Element_Text('address_city');\r\n        \/\/$city->setAllowEmpty(false);\r\n        $city->addValidator(new Zend_Validate_NotEmpty(Zend_Validate_NotEmpty::STRING));\r\n        \r\n        $this->addElement($city);\r\n    }\r\n    \r\n    public function isValid($values)\r\n    {\r\n        $address_city = $this->getElement('address_city');\r\n        $notempty = $address_city->getValidator('Zend_Validate_NotEmpty');\r\n        var_dump($values['address_city'], $notempty->isValid($values['address_city']), parent::isValid($values));\r\n        exit;\r\n        \r\n        return parent::isValid($values);\r\n    }\r\n}\r\n{code}\r\nThe var_dump for the form gives out: string(0) \"\" bool(false) bool(true). \r\n\r\nI've tried setting breakChainOnFailure to true (without any results), but found to my suprise that if I set setAllowEmpty to false, then indeed I get the results as expected (although why would I need to set it remains a mystery to me). I suspect it's connected to required flag being set to false, allowEmpty flag being set to true, but I would expect the validator to change that.\r\n\r\nCheers"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10692\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "customfield_10000": {
            "name": "Language",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/customFieldOption\/10000",
                "value": "English"
            }
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=richardtuin",
                "name": "richardtuin",
                "displayName": "Richard Tuin",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10451",
                    "id": 10451,
                    "description": "Mini Release",
                    "name": "1.10.4",
                    "userReleaseDate": "28\/Apr\/10",
                    "archived": false,
                    "releaseDate": "2010-04-28",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10029",
                    "id": 10029,
                    "name": "Zend_Form",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43147",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=richardtuin",
                        "name": "richardtuin",
                        "displayName": "Richard Tuin",
                        "active": true
                    },
                    "body": "I believe this is the expected, intended and documented behaviour of Zend_Form_NotEmpty. \r\nTherefore i don't see a reason this has to be fixed.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=richardtuin",
                        "name": "richardtuin",
                        "displayName": "Richard Tuin",
                        "active": true
                    },
                    "created": "2010-11-19T09:03:42.000+0000",
                    "updated": "2010-11-19T09:03:42.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43156",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=eithed",
                        "name": "eithed",
                        "displayName": "Pawel Trauth",
                        "active": true
                    },
                    "body": "Maybe I'm being daft, but I would expect the form to be invalid, when one of the elements in it is invalid, as in this case. But if it's an intended behaviour could you please forward me the link for this being documented? I should explain that I didn't find explanation for this occurence in Zend_Validate_notEmpty, nor in Zend_Validate references.\r\n\r\nThanks!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=eithed",
                        "name": "eithed",
                        "displayName": "Pawel Trauth",
                        "active": true
                    },
                    "created": "2010-11-19T10:50:42.000+0000",
                    "updated": "2010-11-19T10:50:42.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43162",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=richardtuin",
                        "name": "richardtuin",
                        "displayName": "Richard Tuin",
                        "active": true
                    },
                    "body": "Reconsidering this issue. Investigating this at the moment.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=richardtuin",
                        "name": "richardtuin",
                        "displayName": "Richard Tuin",
                        "active": true
                    },
                    "created": "2010-11-19T11:58:47.000+0000",
                    "updated": "2010-11-19T11:58:47.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43163",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=richardtuin",
                        "name": "richardtuin",
                        "displayName": "Richard Tuin",
                        "active": true
                    },
                    "body": "This is the described and intended behaviour, documented in this paragraph of the reference documentation:\r\nhttp:\/\/framework.zend.com\/manual\/en\/zend.form.elements.html#zend.form.elements.validators\r\n\r\n{quote}\r\nUsing the defaults, validating an Element without passing a value, or passing an empty string for it, skips all validators and validates to TRUE.\r\nsetAllowEmpty(false) leaving the two other mentioned flags untouched, will validate against the validator chain you defined for this Element, regardless of the value passed to isValid().\r\n{quote}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=richardtuin",
                        "name": "richardtuin",
                        "displayName": "Richard Tuin",
                        "active": true
                    },
                    "created": "2010-11-19T12:33:28.000+0000",
                    "updated": "2010-11-19T12:33:28.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10692\/transitions"
}