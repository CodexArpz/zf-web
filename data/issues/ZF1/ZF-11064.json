{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11064",
    "key": "ZF-11064",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "logUntranslated cause always write to cache"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11064\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10160",
                    "id": 10160,
                    "description": "Major Release",
                    "name": "Next Major Release",
                    "archived": false,
                    "released": false
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2011-08-26T18:21:14.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thadafinser",
                "name": "thadafinser",
                "displayName": "Martin Keckeis",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2011-02-11T01:36:45.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-08-26T18:21:14.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "When setting the config option \"logUntranslated\" to true, all untranslated are writte to the specified logger like expected.\r\n\r\nBUT in Zend_Translate_Adapter, method setOptions (line 331):\r\nin the foreach the variable $change is set always true, so a write to the cache is performed.\r\n\r\nSee attachments for more information (profiler and patch)"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11064\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/13635",
                    "filename": "translate_log.jpg",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thadafinser",
                        "name": "thadafinser",
                        "displayName": "Martin Keckeis",
                        "active": true
                    },
                    "created": "2011-02-11T01:38:14.000+0000",
                    "size": 51394,
                    "mimeType": "image\/jpeg",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/13635\/translate_log.jpg",
                    "thumbnail": "http:\/\/fw02.zend.com\/issues\/secure\/thumbnail\/13635\/_thumb_13635.png"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/13637",
                    "filename": "translate_logWithFIX.jpg",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thadafinser",
                        "name": "thadafinser",
                        "displayName": "Martin Keckeis",
                        "active": true
                    },
                    "created": "2011-02-11T01:38:33.000+0000",
                    "size": 74082,
                    "mimeType": "image\/jpeg",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/13637\/translate_logWithFIX.jpg",
                    "thumbnail": "http:\/\/fw02.zend.com\/issues\/secure\/thumbnail\/13637\/_thumb_13637.png"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/13636",
                    "filename": "translate_withoutLog.jpg",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thadafinser",
                        "name": "thadafinser",
                        "displayName": "Martin Keckeis",
                        "active": true
                    },
                    "created": "2011-02-11T01:38:14.000+0000",
                    "size": 76602,
                    "mimeType": "image\/jpeg",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/13636\/translate_withoutLog.jpg",
                    "thumbnail": "http:\/\/fw02.zend.com\/issues\/secure\/thumbnail\/13636\/_thumb_13636.png"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/13634",
                    "filename": "Zend_Translate_Adapter.patch",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thadafinser",
                        "name": "thadafinser",
                        "displayName": "Martin Keckeis",
                        "active": true
                    },
                    "created": "2011-02-11T01:38:11.000+0000",
                    "size": 378,
                    "mimeType": "text\/plain",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/13634\/Zend_Translate_Adapter.patch"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10099",
                    "id": 10099,
                    "name": "Zend_Translate",
                    "description": "Provides translation functionality, based on standards such as TMX and Gettext.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44392",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "The method setOptions() is called only once... by the constructor of the translation adapter. See line 177.\r\n\r\nWhen the method is called multiple times within your environment it would mean that you are creating multiple adapters by calling the constructor multiple times.\r\n\r\nThe second thing to mention is that the cache is only written when a option has been changed and this option is not 'locale'. See the lines 340 and 342.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2011-02-16T12:51:34.000+0000",
                    "updated": "2011-02-16T12:51:34.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44513",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Closing as non-reproduceable\r\nFeel free to reopen when you have new informations which allow reproduction of the problem",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2011-02-19T10:43:12.000+0000",
                    "updated": "2011-02-19T10:43:12.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44531",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thadafinser",
                        "name": "thadafinser",
                        "displayName": "Martin Keckeis",
                        "active": true
                    },
                    "body": "The responsible key is \"log\" not locale, that the variable $change is set always to true (see my attached patch).\r\n\r\nThe __construct() is only called only one time.\r\n\r\nThis seems to be the problem:\r\nThe option \"logUntranslated\" is set to true in my options and in this profiler screenshots is a untranslated string.\r\nSo the log writer will write the untranslated string to the logfile (which is a change...), but for the cache nothing has really changed (but it gets written new for nothing).",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thadafinser",
                        "name": "thadafinser",
                        "displayName": "Martin Keckeis",
                        "active": true
                    },
                    "created": "2011-02-21T01:16:30.000+0000",
                    "updated": "2011-02-21T01:16:30.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44539",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "The problem is not that __construct() is called only once.\r\nCalling it multiple times would mean to create multiple instances of Zend_Translate.\r\n\r\nAlso your pictures do not show that the cache is written multiple times.\r\nIt is only written once after __construct() has been called.\r\n\r\nWith actual informations I can not reproduce that the cache is written every time when an untranslated string has been added to the log.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2011-02-22T11:42:03.000+0000",
                    "updated": "2011-02-22T11:42:03.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44545",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thadafinser",
                        "name": "thadafinser",
                        "displayName": "Martin Keckeis",
                        "active": true
                    },
                    "body": "It seems we missunderstood each other.\r\n\r\nThe cache is not written multiple times, it's only writte once per request.\r\n\r\nBUT\r\n\r\nthe write to the cache is not necessary, because the translation content itself has not changed! \r\nWhy should the cache get written, only because a log entry is written somewhere else?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thadafinser",
                        "name": "thadafinser",
                        "displayName": "Martin Keckeis",
                        "active": true
                    },
                    "created": "2011-02-23T01:30:39.000+0000",
                    "updated": "2011-02-23T01:30:39.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48209",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Fixed in ZF2 with [GH-298|https:\/\/github.com\/zendframework\/zf2\/pull\/298]",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2011-08-26T18:21:14.000+0000",
                    "updated": "2011-08-26T18:21:14.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11064\/transitions"
}