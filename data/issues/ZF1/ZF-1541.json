{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1541",
    "key": "ZF-1541",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Character set option for Db adapters"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField",
            "value": {
                "timeoriginalestimate": 4320,
                "timeestimate": 4290,
                "timespent": 30
            }
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1541\/votes",
                "votes": 66,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10241",
                    "id": 10241,
                    "description": "Minor Release",
                    "name": "1.8.0",
                    "userReleaseDate": "30\/Apr\/09",
                    "archived": false,
                    "releaseDate": "2009-04-30",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-04-16T17:58:56.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sk0rp",
                "name": "sk0rp",
                "displayName": "Andrzej Sawoniewicz",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2007-06-11T04:53:26.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-02-18T07:28:27.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Need a possibility to set character encoding for Mysqli \/ Pdo_Mysql adapter (in adapter's constructor)\n( sub-classing adapter makes impossible to use Zend_Db::factory() method )\n\nand then query like (for utf8): 'SET NAMES  utf8' on every connect()\n\n----\n\nh3. Possible Solutions as recorded from comments below\n\nWhen the 'charset' option is available to the Zend_Db::Factory(), do the following in the adapters _connect method:\n||Adapter||Proposed Solution||\n|Mysqli|use mysqli_set_charset|\n|Oracle|use the charset option for oci_connect|\n|Db2|no solution|\n|Pdo_Ibm_Db2|no solution|\n|Pdo_Ibm_Ids|no solution|\n|Pdo_Mssql|no solution,depends on server configuration|\n|Pdo_Mysql|use PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \"utf8''|\n|Pdo_Oci|include charset in DSN|\n|Pdo_Pgsql|use SET NAMES|\n|Pdo_Sqlite|not needed|"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/customFieldOption\/10039",
                "value": "  Should Have"
            }
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1541\/watchers",
                "isWatching": false,
                "watchCount": 50
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=norm2782",
                "name": "norm2782",
                "displayName": "Jurrien Stutterheim",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-1581",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1581",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                },
                {
                    "issueKey": "ZF-4943",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4943",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                },
                {
                    "issueKey": "ZF-2235",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2235",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                },
                {
                    "issueKey": "ZF-6881",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6881",
                    "type": {
                        "name": "Related",
                        "direction": "INBOUND",
                        "description": "is related to"
                    }
                },
                {
                    "issueKey": "ZF-3204",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3204",
                    "type": {
                        "name": "Dependency",
                        "direction": "INBOUND",
                        "description": "is dependecy of"
                    }
                },
                {
                    "issueKey": "ZF-7152",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7152",
                    "type": {
                        "name": "Related",
                        "direction": "INBOUND",
                        "description": "is related to"
                    }
                },
                {
                    "issueKey": "ZF-3840",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3840",
                    "type": {
                        "name": "Dependency",
                        "direction": "INBOUND",
                        "description": "is dependecy of"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/11545",
                    "filename": "charset.diff",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=snover",
                        "name": "snover",
                        "displayName": "C Snover",
                        "active": true
                    },
                    "created": "2008-09-17T07:18:04.000+0000",
                    "size": 2014,
                    "mimeType": "text\/x-diff",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/11545\/charset.diff"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10090",
                    "id": 10090,
                    "description": "Release Candidate 2",
                    "name": "1.0.0 RC2",
                    "userReleaseDate": "08\/Jun\/07",
                    "archived": true,
                    "releaseDate": "2007-06-08",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10012",
                    "id": 10012,
                    "name": "Zend_Db",
                    "description": "interfaces, APIs, and adapters for various third-party data stores",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/15235",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "This is also relevant for OCI adapter and others, but the implementation varies.\n\nmikespook writes:\n\nI used utf8 for my charset with Oracle. \n\nBut, there are no item can set the charset in the param of the Zend_Db::factory().\nAnd you konw, MS Windows  use GB18030 for the charset in China. \nSo when I send a SQL to the Oracle with charset utf8, I got a error. \n\nI make this patch for we can set charset to the Oracle.\n\n{code}\nIndex: Oci.php\n===================================================================\n--- Oci.php    (revision 267)\n+++ Oci.php    (working copy) \n@@ -67,7 +67,12 @@\n             $tns .= '\/';\n         }\n         $tns .= $dsn['dbname'];\n-\n+   \n+        if (isset($dsn['charset']))\n+        {\n+            $tns .= ';charset=' . $dsn['charset']; \n+        }\n+   \n         return $this->_pdoType . ':' . $tns;\n     }\n{code}\n\nSo, we could use:\n\n{code}\n<?php\nrequire_once 'Zend\/Db.php';\n$db = Zend_Db::factory('Pdo_Oci', array(\n    'host'     => '127.0.0.1',\n    'username' => 'webuser',\n    'password' => 'xxxxxxxx',\n    'dbname'   => 'test',\n    'charset'  => 'utf8'\n));\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2007-06-14T18:34:20.000+0000",
                    "updated": "2007-06-14T18:34:20.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/20003",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=harabanar",
                        "name": "harabanar",
                        "displayName": "Helgi Hrafn Halld\u00f3rsson",
                        "active": true
                    },
                    "body": "In the Zend_Db_Adapter_Oracle we have\n\n{noformat}\n        if (isset($this->_config['dbname'])) {\n            $this->_connection = @oci_connect(\n                $this->_config['username'],\n                $this->_config['password'],\n                $this->_config['dbname']);\n        } else {\n            $this->_connection = oci_connect(\n                $this->_config['username'],\n                $this->_config['password']);\n        }\n{noformat}\n\nshouldn't it be something like \n\n{noformat}\n\t\t$charset = (isset($this->_config['charset']))\n\t\t\t? $this->_config['charset']\n\t\t\t: null;\n\n\t\t$dbname = (isset($this->_config['dbname']))\n\t\t\t? $this->_config['dbname']\n\t\t\t: null;\n\n\t\t$this->_connection = oci_connect(\n\t\t\t$this->_config['username'],\n\t\t\t$this->_config['password'],\n\t\t\t$dbname,\n\t\t\t$charset\n\t\t);\n{noformat}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=harabanar",
                        "name": "harabanar",
                        "displayName": "Helgi Hrafn Halld\u00f3rsson",
                        "active": true
                    },
                    "created": "2008-03-19T12:47:22.000+0000",
                    "updated": "2008-03-19T12:47:22.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/20282",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "Please categorize\/fix as needed.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2008-03-25T20:43:50.000+0000",
                    "updated": "2008-03-25T20:43:50.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/20429",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "Resetting 'fix version priority' and 'fix version' to be re-evaluated for next release.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2008-03-25T22:06:47.000+0000",
                    "updated": "2008-03-25T22:06:47.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/20623",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=harabanar",
                        "name": "harabanar",
                        "displayName": "Helgi Hrafn Halld\u00f3rsson",
                        "active": true
                    },
                    "body": "Here is a patch for it to work with Zend_Db_Adapter_Oracle\n\n{noformat}\n Index: Zend\/Db\/Adapter\/Oracle.php\n===================================================================\n--- Zend\/Db\/Adapter\/Oracle.php  (revision 9107)\n+++ Zend\/Db\/Adapter\/Oracle.php  (working copy)\n@@ -102,17 +102,21 @@\n             throw new Zend_Db_Adapter_Oracle_Exception('The OCI8 extension is required for this adapter but the extension is not loaded');\n         }\n \n-        if (isset($this->_config['dbname'])) {\n-            $this->_connection = @oci_connect(\n-                $this->_config['username'],\n-                $this->_config['password'],\n-                $this->_config['dbname']);\n-        } else {\n-            $this->_connection = oci_connect(\n-                $this->_config['username'],\n-                $this->_config['password']);\n-        }\n+        $charset = (isset($this->_config['charset']))\n+            ? $this->_config['charset']\n+            : null;\n \n+        $dbname = (isset($this->_config['dbname']))\n+            ? $this->_config['dbname']\n+            : null;\n+\n+        $this->_connection = oci_connect(\n+            $this->_config['username'],\n+            $this->_config['password'],\n+            $dbname,\n+            $charset\n+        );\n+\n         \/\/ check the connection\n         if (!$this->_connection) {\n             \/**\n{noformat}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=harabanar",
                        "name": "harabanar",
                        "displayName": "Helgi Hrafn Halld\u00f3rsson",
                        "active": true
                    },
                    "created": "2008-04-01T14:53:50.000+0000",
                    "updated": "2008-04-01T14:53:50.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/21924",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gog",
                        "name": "gog",
                        "displayName": "Goran Juric",
                        "active": true
                    },
                    "body": "Here are the patches for Mysqli:\n\n{noformat}\nIndex: Zend\/Db\/Adapter\/Mysqli.php\n===================================================================\n--- Mysqli.php\t(revision 9527)\n+++ Mysqli.php\t(working copy)\n@@ -301,6 +301,9 @@\n             require_once 'Zend\/Db\/Adapter\/Mysqli\/Exception.php';\n             throw new Zend_Db_Adapter_Mysqli_Exception(mysqli_connect_error());\n         }\n+        if (array_key_exists('charset', $this->_config)) {\n+            $this->_connection->query('SET NAMES \\'' . $this->_config['charset'] . '\\'');\n+        }\n     }\n \n     \/**\n{noformat}\n\nand for Pdo_Mysl\n\n{noformat}\nIndex: Zend\/Db\/Adapter\/Pdo\/Abstract.php\n===================================================================\n--- Abstract.php\t(revision 9527)\n+++ Abstract.php\t(working copy)\n@@ -121,7 +121,11 @@\n \n             \/\/ always use exceptions.\n             $this->_connection->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n-\n+            \n+            \/\/ if PDO type is MySQL, and $this->_config['charset'] exists, set names\n+            if ( ('mysql' == $this->_pdoType) && array_key_exists('charset', $this->_config) ) {\n+                $this->_connection->query('SET NAMES \\'' . $this->_config['charset'] . '\\'');\n+            }\n         } catch (PDOException $e) {\n             \/**\n              * @see Zend_Db_Adapter_Exception\n{noformat}\n\nSince the PDO database adapters use base (abstract) method for creating a db connection I've added a check ('mysql' == $this->_pdoType) so the 'set names' query is issued only for PDO_Mysql adapter (I don't know how other databases handle this issue).\n\nI really hope this issue will be fixed in the next minor release, it has been long overdue.\n\nIf there is something else I can do to help, please let me know.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gog",
                        "name": "gog",
                        "displayName": "Goran Juric",
                        "active": true
                    },
                    "created": "2008-05-25T15:00:01.000+0000",
                    "updated": "2008-05-25T15:00:01.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/21925",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gog",
                        "name": "gog",
                        "displayName": "Goran Juric",
                        "active": true
                    },
                    "body": "Please disregard the patch for Pdo_Mysql, haven't really worked with Pdo till now. \"SET NAMES\" do work for Pdo_Mysql adapter!!! You just have to pass it as a driver option...\n\nThe correct way to use it is:\n\n{noformat}\n<?php\n\n$db = new Zend_Db_Adapter_Pdo_Mysql(array(\n    'host'     => 'your_host_or_ip',\n    'username' => 'your_myslq_username0,\n    'password' => 'mysql_pass',\n    'dbname'   => 'your_db_name',\n    'driver_options'  => array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \\'utf8\\'')\n));\n{noformat}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gog",
                        "name": "gog",
                        "displayName": "Goran Juric",
                        "active": true
                    },
                    "created": "2008-05-25T16:43:18.000+0000",
                    "updated": "2008-05-25T16:43:18.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/21933",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=letssurf",
                        "name": "letssurf",
                        "displayName": "James Dempster",
                        "active": true
                    },
                    "body": "On Pdo_Mysql I've always just used $db->query('SET NAMES UTF8'); without any problems.\nI tested it to make sure it works correctly.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=letssurf",
                        "name": "letssurf",
                        "displayName": "James Dempster",
                        "active": true
                    },
                    "created": "2008-05-26T00:47:48.000+0000",
                    "updated": "2008-05-26T00:47:48.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/21937",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gog",
                        "name": "gog",
                        "displayName": "Goran Juric",
                        "active": true
                    },
                    "body": "Ofcourse it does. But if you send a query you are forcing you app to connect to the database. There are times that you don't want to connect to the database if it isn't really needed, that's what lazy loading is for.\n\nThis way, you can use Pdo_Mysql, utf8, and still have lazy loading of the db.\n\nBut this issue is still unresolved because in Mysqli you do have to send \"SET NAMES 'utf8'\" after connecting to the database.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gog",
                        "name": "gog",
                        "displayName": "Goran Juric",
                        "active": true
                    },
                    "created": "2008-05-26T03:05:04.000+0000",
                    "updated": "2008-05-26T03:05:04.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/21945",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=padraic",
                        "name": "padraic",
                        "displayName": "P\u00e1draic Brady",
                        "active": true
                    },
                    "body": "I would love to see this implemented. At the moment managing lazy loading is either something you get creative about, or with a light application simply ignore. Getting it internalised would make life that bit easier.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=padraic",
                        "name": "padraic",
                        "displayName": "P\u00e1draic Brady",
                        "active": true
                    },
                    "created": "2008-05-26T13:36:21.000+0000",
                    "updated": "2008-05-26T13:36:21.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/22097",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=harabanar",
                        "name": "harabanar",
                        "displayName": "Helgi Hrafn Halld\u00f3rsson",
                        "active": true
                    },
                    "body": "any way .. could this at least be fixed in the Oracle Adapter since oci_connect supports charset ? :D",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=harabanar",
                        "name": "harabanar",
                        "displayName": "Helgi Hrafn Halld\u00f3rsson",
                        "active": true
                    },
                    "created": "2008-06-03T02:11:37.000+0000",
                    "updated": "2008-06-03T02:11:37.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/22267",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "All right, this item officially has twice as many votes as the next popular item. If we don't implement it for 1.6 we risk user revolt. :0 Simon, is this something that you'll be able to do. If not, I'll troll for help from the rest of the community.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2008-06-09T17:34:38.000+0000",
                    "updated": "2008-06-09T17:34:38.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/23472",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sorin",
                        "name": "sorin",
                        "displayName": "Sorin Alin Stoiana",
                        "active": true
                    },
                    "body": "For mysqli the correct way is to use mysqli::set_charset ( see http:\/\/www.php.net\/manual\/en\/mysqli.set-charset.php ). \n\nHere's the patch for it: \n\n\n\n{code}\nIndex: library\/Zend\/Db\/Adapter\/Mysqli.php\n===================================================================\n--- library\/Zend\/Db\/Adapter\/Mysqli.php\t(revision 10900)\n+++ library\/Zend\/Db\/Adapter\/Mysqli.php\t(working copy)\n@@ -313,6 +313,16 @@\n             require_once 'Zend\/Db\/Adapter\/Mysqli\/Exception.php';\n             throw new Zend_Db_Adapter_Mysqli_Exception(mysqli_connect_error());\n         }\n+        \n+        if (array_key_exists('charset', $this->_config)) {\n+           if(!$this->_connection->set_charset($this->_config['charset'])) {\n+                \/**\n+                * @see Zend_Db_Adapter_Mysqli_Exception\n+                *\/\n+                require_once 'Zend\/Db\/Adapter\/Mysqli\/Exception.php';\n+                throw new Zend_Db_Adapter_Mysqli_Exception('could not set charset');\n+            }\n+        }\n     }\n \n     \/**\n{code}\n\nThe charset issue is already resolved for Pdo_Oci as far as I see ( SVN trunk ): \n\n{code}\n    \/**\n     * Creates a PDO DSN for the adapter from $this->_config settings.\n     *\n     * @return string\n     *\/\n    protected function _dsn()\n    {\n        \/\/ baseline of DSN parts\n        $dsn = $this->_config;\n\n        ...\n\n        if (isset($dsn['charset']))\n        {\n            $tns .= ';charset=' . $dsn['charset'];\n        }\n\n        return $this->_pdoType . ':' . $tns;\n    }\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sorin",
                        "name": "sorin",
                        "displayName": "Sorin Alin Stoiana",
                        "active": true
                    },
                    "created": "2008-08-13T05:49:53.000+0000",
                    "updated": "2008-08-13T05:49:53.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/23500",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sorin",
                        "name": "sorin",
                        "displayName": "Sorin Alin Stoiana",
                        "active": true
                    },
                    "body": "\nHere's the resulting patch. It implements charset support for Mysql, Oracle, Pdo_Mysql, Pdo_Oracle and Pdo_Pgsql, as well as unit tests for these. \n\n{code}\nIndex: tests\/Zend\/Db\/Adapter\/TestCommon.php\n===================================================================\n--- tests\/Zend\/Db\/Adapter\/TestCommon.php\t(revision 10902)\n+++ tests\/Zend\/Db\/Adapter\/TestCommon.php\t(working copy)\n@@ -45,6 +45,36 @@\n  *\/\n abstract class Zend_Db_Adapter_TestCommon extends Zend_Db_TestSetup\n {\n+\t\/**\n+\t * Test set charset option for adapter\n+\t * CASE: utf8\n+\t *\/\n+\tpublic function testAdapterCharset()\n+\t{\n+\t\t$params = $this->_util->getParams();\n+\t\t\n+\t\t$params['charset'] = 'utf8';\n+\t\t\n+\t\t$db = Zend_Db::factory($this->getDriver(), $params);\n+        $db->getConnection();\n+\t}\n+\t\n+\t\/**\n+\t * Test set charset option for adapter\n+\t * CASE: bad charset\n+\t *\/\n+\tpublic function testAdapterCharsetBad()\n+\t{\n+\t\t$params = $this->_util->getParams();\n+\t\t\n+\t\t$params['charset'] = 'blahblahblah';\n+\t\t\n+\t\t$this->setExpectedException('Zend_Db_Adapter_Exception');\n+\n+\t\t$db = Zend_Db::factory($this->getDriver(), $params);\n+        $db->getConnection();\n+\t}\n+\t\n     \/**\n      * Test AUTO_QUOTE_IDENTIFIERS option\n      * Case: Zend_Db::AUTO_QUOTE_IDENTIFIERS = true\n@@ -55,6 +85,7 @@\n         $params = new Zend_Config($this->_util->getParams());\n \n         $db = Zend_Db::factory($this->getDriver(), $params);\n+        \n         $db->getConnection();\n     }\n \nIndex: tests\/Zend\/Db\/Adapter\/Pdo\/SqliteTest.php\n===================================================================\n--- tests\/Zend\/Db\/Adapter\/Pdo\/SqliteTest.php\t(revision 10902)\n+++ tests\/Zend\/Db\/Adapter\/Pdo\/SqliteTest.php\t(working copy)\n@@ -48,6 +48,16 @@\n         'INTEGER'            => Zend_Db::BIGINT_TYPE,\n         'REAL'               => Zend_Db::FLOAT_TYPE\n     );\n+    \n+    public function testAdapterCharset()\n+\t{\n+        $this->markTestSkipped($this->getDriver() . ' does not support charset');\n+    }\n+    \n+    public function testAdapterCharsetBad()\n+\t{\n+        $this->markTestSkipped($this->getDriver() . ' does not support charset');\n+    }\n \n     \/**\n      * Test AUTO_QUOTE_IDENTIFIERS option\nIndex: tests\/Zend\/Db\/Adapter\/OracleTest.php\n===================================================================\n--- tests\/Zend\/Db\/Adapter\/OracleTest.php\t(revision 10904)\n+++ tests\/Zend\/Db\/Adapter\/OracleTest.php\t(working copy)\n@@ -43,6 +43,41 @@\n         'NUMBER'             => Zend_Db::FLOAT_TYPE,\n     );\n \n+    \/**\n+     * Test set charset option for adapter\n+     * CASE: bad charset\n+     *\/\n+    public function testAdapterCharsetBad()\n+    {\n+        @trigger_error('clearing error buffer', E_USER_NOTICE);\n+        \n+        $params = $this->_util->getParams();\n+        \n+        $params['charset'] = 'blahblahblah';\n+\n+        $db = Zend_Db::factory($this->getDriver(), $params);\n+        $db->getConnection();\n+        \n+        \n+        \/\/ Since oci_connect throws a warning on a bad charset, we have no choice but to \n+        \/\/ use error_get_last()  to detect this warning. \n+        \/\/ \n+        \/\/ Due to the fact that error_get_last() cannot be reset, we also have to use\n+        \/\/ @trigger_error() to \"force\" the reset of the last error message\\\n+        \/\/ \n+        \/\/ This is also the reason that this piece of code was not included in Zend_Db_Adapter_Oracle\n+        \/\/ in order to throw an Exception when seting a bad charset\n+        $last_error = error_get_last();\n+        \n+        if( is_array($last_error) && \n+            $last_error['type'] == 2 && \n+            strpos($last_error['message'], 'Invalid character set name') !== false ) {\n+            \n+        } else {\n+            $this->fail( 'Invalid character set name' );\n+        }\n+    }\n+    \n     public function testAdapterDescribeTablePrimaryAuto()\n     {\n         $this->markTestSkipped('Oracle does not support auto-increment');\nIndex: library\/Zend\/Db\/Adapter\/Oracle.php\n===================================================================\n--- library\/Zend\/Db\/Adapter\/Oracle.php\t(revision 10902)\n+++ library\/Zend\/Db\/Adapter\/Oracle.php\t(working copy)\n@@ -114,17 +114,21 @@\n             throw new Zend_Db_Adapter_Oracle_Exception('The OCI8 extension is required for this adapter but the extension is not loaded');\n         }\n \n-        if (isset($this->_config['dbname'])) {\n-            $this->_connection = @oci_connect(\n-                $this->_config['username'],\n-                $this->_config['password'],\n-                $this->_config['dbname']);\n-        } else {\n-            $this->_connection = oci_connect(\n-                $this->_config['username'],\n-                $this->_config['password']);\n-        }\n+        $charset = (isset($this->_config['charset']))\n+            ? $this->_config['charset']\n+            : null;\n+ \n+        $dbname = (isset($this->_config['dbname']))\n+            ? $this->_config['dbname']\n+            : null;\n \n+        $this->_connection = oci_connect(\n+            $this->_config['username'],\n+            $this->_config['password'],\n+            $dbname,\n+            $charset\n+        );\n+        \n         \/\/ check the connection\n         if (!$this->_connection) {\n             \/**\nIndex: library\/Zend\/Db\/Adapter\/Pdo\/Abstract.php\n===================================================================\n--- library\/Zend\/Db\/Adapter\/Pdo\/Abstract.php\t(revision 10902)\n+++ library\/Zend\/Db\/Adapter\/Pdo\/Abstract.php\t(working copy)\n@@ -72,6 +72,7 @@\n         unset($dsn['username']);\n         unset($dsn['password']);\n         unset($dsn['options']);\n+        unset($dsn['charset']);\n         unset($dsn['driver_options']);\n \n         \/\/ use all remaining parts in the DSN\n@@ -82,6 +83,12 @@\n         return $this->_pdoType . ':' . implode(';', $dsn);\n     }\n \n+    protected function _setCharset( )\n+    {\n+        if ( array_key_exists('charset', $this->_config) ) {\n+            $this->_connection->query('SET NAMES \\'' . $this->_config['charset'] . '\\'');\n+        }\n+    }\n     \/**\n      * Creates a PDO object and connects to the database.\n      *\n@@ -134,6 +141,11 @@\n \n             \/\/ always use exceptions.\n             $this->_connection->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n+            \n+            if ( ('mysql' == $this->_pdoType) || ('pgsql' == $this->_pdoType))\n+            {\n+                $this->_setCharset();\n+            }\n \n         } catch (PDOException $e) {\n             \/**\nIndex: library\/Zend\/Db\/Adapter\/Mysqli.php\n===================================================================\n--- library\/Zend\/Db\/Adapter\/Mysqli.php\t(revision 10902)\n+++ library\/Zend\/Db\/Adapter\/Mysqli.php\t(working copy)\n@@ -313,6 +313,16 @@\n             require_once 'Zend\/Db\/Adapter\/Mysqli\/Exception.php';\n             throw new Zend_Db_Adapter_Mysqli_Exception(mysqli_connect_error());\n         }\n+        \n+        if (array_key_exists('charset', $this->_config)) {\n+           if(!$this->_connection->set_charset($this->_config['charset'])) {\n+                \/**\n+                * @see Zend_Db_Adapter_Mysqli_Exception\n+                *\/\n+                require_once 'Zend\/Db\/Adapter\/Mysqli\/Exception.php';\n+                throw new Zend_Db_Adapter_Mysqli_Exception('could not set charset');\n+            }\n+        }\n     }\n \n     \/**\n\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sorin",
                        "name": "sorin",
                        "displayName": "Sorin Alin Stoiana",
                        "active": true
                    },
                    "created": "2008-08-15T03:43:54.000+0000",
                    "updated": "2008-08-15T03:43:54.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/23537",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "That's great to provide those patches, but I think the interface to supply character set to each respective brand of database is only half the problem.\n\nThe other part of the problem is that a given character set may be known by a different name in each database.  For example, MySQL uses 'utf8' where Oracle uses 'AL32UTF8'.  Oracle even has a charset called 'utf8' but it's different.\nSee http:\/\/decipherinfosys.wordpress.com\/2007\/01\/28\/difference-between-utf8-and-al32utf8-character-sets-in-oracle\/\n\nThis makes it hard to create a set of config parameters that can be used orthogonally for several brands of database.  You'd have to know the different names in each database for any given charset you want to use.\n\nHow would I recommend solving this?  The {{Zend_Db_Adapter}} interface currently supports a config parameter 'driver_options', which is an associative array used for options that are specific to each brand of database.  I would suggest that {{Zend_Db_Adapter}} use 'driver_options'->'charset' for the name of the charset as it is known by the brand of database.  \n\n{code}\n$db = Zend_Db::factory('oracle', array('driver_options'=>array('charset'=>'AL32UTF8')));\n{code}\n\nThen you can implement a charset abstraction layer.   Decide on a set of core charsets that will be supported by {{Zend_Db}}, and define these as {{const}} strings.\n\n{code}\nclass Zend_Db\n{\n  const CHARSET_UTF8 = utf8;\n  . . .\n}\n{code}\n\nThen in each {{Zend_Db_Adapter}} class, create a protected associative array mapping the abstract charset names to native charset names.  If the database doesn't support one, or if you simply don't know what it it's called, leave it out of the mapping array. \n\n{code}\nclass Zend_Db_Adapter_Oracle extends Zend_Db_Adapter_Abstract\n{\n  protected $_charsetMap = array(\n    Zend_Db::CHARSET_UTF8 => 'AL32UTF8'\n  );\n  . . .\n}\n{code}\n\nThen if I pass a config parameter 'charset' => 'utf8' to my Db Adapter factory, it'll perform the mapping and add the entry to the driver_options, where it will get applied using code similar to your patch.\n\n{code}\n$db = Zend_Db::factory('mysqli', array('charset'=>Zend_Db::CHARSET_UTF8));\n{code}\n\nDevelopers can still use uncommon charsets that are not in the set of core abstract charsets supported by Zend_Db's mapping table.  They just need to specify it in the 'driver_options' array by its native name, instead of in the 'charset' parameter.\n{code}\n$db = Zend_Db::factory('oracle', array('driver_options'=>array('charset'=>'BN8BSCII'))); \/\/ Bangladesh BSCII charset\n{code}\n\nYou don't necessarily have to fill out the full set of core charsets in every adapter class.  But you do need to throw an exception if I pass an abstract charset name that isn't supported in the adapter I chose.\n\n{code}\n$db = Zend_Db::factory('pdo_sqlite', array('charset' => Zend_Db::CHARSET_LATIN1));\n\/\/ may throw exception\n{code}\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2008-08-19T10:03:46.000+0000",
                    "updated": "2008-08-19T10:03:46.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24561",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=snover",
                        "name": "snover",
                        "displayName": "C Snover",
                        "active": true
                    },
                    "body": "Since this has been sitting open for so long, I went ahead and took a stab at making a patch. So here it is, against current SVN r11422. Adds charset support to Mysqli, PDO_Mysql, and PDO_Pgsql adapters. A new optional parameter 'charset' is passed to the adapter.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=snover",
                        "name": "snover",
                        "displayName": "C Snover",
                        "active": true
                    },
                    "created": "2008-09-17T07:18:05.000+0000",
                    "updated": "2008-09-17T07:18:05.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24562",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=snover",
                        "name": "snover",
                        "displayName": "C Snover",
                        "active": true
                    },
                    "body": "Whoops. And then there was JIRA not showing me the comment discussion. I feel extremely embarrassed and am going to crawl into a hole now. :)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=snover",
                        "name": "snover",
                        "displayName": "C Snover",
                        "active": true
                    },
                    "created": "2008-09-17T07:22:53.000+0000",
                    "updated": "2008-09-17T07:22:53.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/26909",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=quazardous",
                        "name": "quazardous",
                        "displayName": "David Berlioz",
                        "active": true
                    },
                    "body": "Hi,\n\ndo not forget Zend_Db_Adapter_Oracle : need charset support too !!!\n\nit's ok in PDO_OCI, but PDO_OCI is still unstable and chrashes very often  (try use clob :( u'll see ).\n\ncurrent 1.7.0 code\n{code}\nprotected function _connect()\n{\n...\n        if (isset($this->_config['dbname'])) {\n            $this->_connection = @oci_connect(\n                $this->_config['username'],\n                $this->_config['password'],\n                $this->_config['dbname']);\n        } else {\n            $this->_connection = oci_connect(\n                $this->_config['username'],\n                $this->_config['password']);\n        }\n...\n{code}\n\ncould be\n\n{code}\nprotected function _connect()\n{\n...\n            $this->_connection = @oci_connect(\n                $this->_config['username'],\n                $this->_config['password'],\n                isset($this->_config['dbname'])?$this->_config['dbname']:null,\n                isset($this->_config['charset'])?$this->_config['charset']:null,\n               );\n...\n{code}\n\nbest regards\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=quazardous",
                        "name": "quazardous",
                        "displayName": "David Berlioz",
                        "active": true
                    },
                    "created": "2008-12-03T00:33:50.000+0000",
                    "updated": "2008-12-03T00:33:50.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/26912",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=harabanar",
                        "name": "harabanar",
                        "displayName": "Helgi Hrafn Halld\u00f3rsson",
                        "active": true
                    },
                    "body": "I aggree .. dont forget :D",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=harabanar",
                        "name": "harabanar",
                        "displayName": "Helgi Hrafn Halld\u00f3rsson",
                        "active": true
                    },
                    "created": "2008-12-03T02:52:02.000+0000",
                    "updated": "2008-12-03T02:52:02.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/27819",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "This issue has gone unaddressed for too long. I'm re-assigning to Ralph for re-evaluation and categorization.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2009-01-06T14:27:03.000+0000",
                    "updated": "2009-01-06T14:27:03.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28382",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=joust",
                        "name": "joust",
                        "displayName": "Artur Bodera",
                        "active": true
                    },
                    "body": "A quick solution for charset with Pdo_Mysql:\n{code}\nrequire_once 'Zend\/Db\/Adapter\/Pdo\/Mysql.php';\n\nclass Zend_Db_Adapter_Pdo_Mysql_Charset extends Zend_Db_Adapter_Pdo_Mysql\n{\n\tprotected function _connect(){\n\t\tif ($this->_connection) {\n\t\t\treturn;\n\t\t}\n\t\tparent::_connect();\n\t\tif(array_key_exists('charset',$this->_config) && $this->_config['charset']){\n\t\t\tglobal $logger;\n\t\t\t$logger->debug('Setting db charset to '.$this->_config['charset']);\n\t\t\t$this->_connection->exec('SET NAMES '.$this->_config['charset']);\n\t\t}\n\t}\n}\n\n{code}\n\nThen use something like this:\n{code}\n$db = Zend_Db::factory(Pdo_Mysql_Charset', array(\n\t\t'host'     => '.....', \n\t\t'username' => '....' ,\n\t\t'password' => '....',\n\t\t'dbname'   => '....',\n\t\t'charset'  => 'utf8',\n\t));\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=joust",
                        "name": "joust",
                        "displayName": "Artur Bodera",
                        "active": true
                    },
                    "created": "2009-01-21T15:39:15.000+0000",
                    "updated": "2009-01-21T15:39:15.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28384",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=joust",
                        "name": "joust",
                        "displayName": "Artur Bodera",
                        "active": true
                    },
                    "body": "After cleanup:\n\n{code}\nrequire_once 'Zend\/Db\/Adapter\/Pdo\/Mysql.php';\n\nclass Zend_Db_Adapter_Pdo_Mysql_Charset extends Zend_Db_Adapter_Pdo_Mysql\n{\n\tprotected function _connect(){\n\t\tif ($this->_connection) {\n\t\t\treturn;\n\t\t}\n\t\tparent::_connect();\n\t\tif(array_key_exists('charset',$this->_config) && !empty($this->_config['charset'])){\n\t\t\t$this->_connection->exec('SET NAMES '.$this->_config['charset']);\n\t\t}\n\t}\n}\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=joust",
                        "name": "joust",
                        "displayName": "Artur Bodera",
                        "active": true
                    },
                    "created": "2009-01-21T15:41:13.000+0000",
                    "updated": "2009-01-21T15:41:13.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28702",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=andrey_mysql",
                        "name": "andrey_mysql",
                        "displayName": "Andrey Hristov",
                        "active": true
                    },
                    "body": "Usage of SET NAMES for setting the charset of the connection, the result and the client for MySQL is WRONG, WRONG, WRONG! Opens the door for SQL Injections.\nSET NAMES exists only for the sake of the mysql command line client where there is no way to set the connection's character set when you connect, thus SET NAMES is used. mysql's API, libmysql, has means of setting the character set, for good reasons. Using SET NAMES can lead to security problems with specific character sets...Think - SQL Injection.\nEither use:\nhttp:\/\/bg.php.net\/manual\/en\/function.mysql-set-charset.php\nor\nmysqli_options() on a handle returned from mysqli_init() and this should be done before mysql_real_connect()\n\n$mysql = mysqli_init();\nmysqli_options($mysql, 7, \"utf8\"); \/\/sorry for the magic number but ext\/mysqli doesn't register the value of MYSQL_SET_CHARSET_NAME\n                                                    \/\/ coming from mysql.h as constant. In mysql.h it is 7 and won't change for the time being.\nmysqli_real_connect($mysql, ...);\n\nAndrey",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=andrey_mysql",
                        "name": "andrey_mysql",
                        "displayName": "Andrey Hristov",
                        "active": true
                    },
                    "created": "2009-02-09T03:26:06.000+0000",
                    "updated": "2009-02-09T03:26:06.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29086",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ice-breaker",
                        "name": "ice-breaker",
                        "displayName": "Tobias Petry",
                        "active": true
                    },
                    "body": "Andrey did not provide any information about the problem witht this type of sql injections and while it is hard to find anything on that i provide a source: http:\/\/ilia.ws\/archives\/103-mysql_real_escape_string-versus-Prepared-Statements.html",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ice-breaker",
                        "name": "ice-breaker",
                        "displayName": "Tobias Petry",
                        "active": true
                    },
                    "created": "2009-02-25T08:00:01.000+0000",
                    "updated": "2009-02-25T08:00:01.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29251",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yanick",
                        "name": "yanick",
                        "displayName": "Yanick Rochon",
                        "active": true
                    },
                    "body": "I needed to have UTF-8 encoding on MySQLi driver, here's a quick patch that I'm using to solve this problem. I would hope every implementation would support this option.\n\n{noformat}\nclass Zend_Db_Adapter_Mysqli extends Zend_Db_Adapter_Abstract\n{\n\n    ...\n\n    protected function _connect()\n    {\n\n        ...\n\n        \/\/ line 342 using Zend 1.7.5\n        if (isset($this->_config['charset'])) {\n        \tmysqli_set_charset($this->_connection, $this->_config['charset']);\n        }\n    }\n\n    ...\n\n}\n{noformat}\n\nSorry if I'm repeating code.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yanick",
                        "name": "yanick",
                        "displayName": "Yanick Rochon",
                        "active": true
                    },
                    "created": "2009-03-03T11:24:55.000+0000",
                    "updated": "2009-03-03T11:24:55.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29252",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yanick",
                        "name": "yanick",
                        "displayName": "Yanick Rochon",
                        "active": true
                    },
                    "body": "Well, I've re-read the entire thread, and Sorin Alin Stoiana's solution (13\/Aug\/08 05:49 AM) works great ! Why hasn't it been released with Zend 1.7.5 last feb 16th ?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yanick",
                        "name": "yanick",
                        "displayName": "Yanick Rochon",
                        "active": true
                    },
                    "created": "2009-03-03T11:34:02.000+0000",
                    "updated": "2009-03-03T11:34:02.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29272",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "Collecting the proposed solutions inside the description of the issue.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2009-03-04T09:43:06.000+0000",
                    "updated": "2009-03-04T09:43:06.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29717",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zielun",
                        "name": "zielun",
                        "displayName": "Micha? Zieli?ski",
                        "active": true
                    },
                    "body": "@Ralph: will Db2 adapter hold this issue or it is to be fixed for 1.8 release?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zielun",
                        "name": "zielun",
                        "displayName": "Micha? Zieli?ski",
                        "active": true
                    },
                    "created": "2009-03-25T04:46:00.000+0000",
                    "updated": "2009-03-25T04:46:00.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29718",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zielun",
                        "name": "zielun",
                        "displayName": "Micha? Zieli?ski",
                        "active": true
                    },
                    "body": "bleah... can`t edit my comment. I mean will lack of solution for Db2 adapters prevent this issue from fixing for other adapters?\n(please remove the above comment)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zielun",
                        "name": "zielun",
                        "displayName": "Micha? Zieli?ski",
                        "active": true
                    },
                    "created": "2009-03-25T04:50:48.000+0000",
                    "updated": "2009-03-25T04:50:48.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29982",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=norm2782",
                        "name": "norm2782",
                        "displayName": "Jurrien Stutterheim",
                        "active": true
                    },
                    "body": "Bill: I like the idea of supporting charsets by using the constants. However, I feel like that's a different issue than this one. The focus of this issue should be on supporting setting the charset in the first place. Adding a layer of abstraction on top of that is pretty much a standalone task, even though its implementation would probably rework a part of the code that's being updated for the charset support. Seeing as a lot of people need this feature it might not be worth waiting for a full implementation of the charset abstraction proposal. \n\nSeeing as I need support for this in the Oci8 adapter, I'm going to write a patch for that today. If there's no solution for Db2 (Db2 experts, please comment!) I would like to suggest implementing the suggestions from the table to get this issue resolved.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=norm2782",
                        "name": "norm2782",
                        "displayName": "Jurrien Stutterheim",
                        "active": true
                    },
                    "created": "2009-04-05T15:36:21.000+0000",
                    "updated": "2009-04-05T15:36:21.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29984",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sorin",
                        "name": "sorin",
                        "displayName": "Sorin Alin Stoiana",
                        "active": true
                    },
                    "body": "@Jurrien FYI, the patch I submitted here [#action_23500 ] also provides support for Oci8",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sorin",
                        "name": "sorin",
                        "displayName": "Sorin Alin Stoiana",
                        "active": true
                    },
                    "created": "2009-04-05T16:29:24.000+0000",
                    "updated": "2009-04-05T16:29:24.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29985",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=norm2782",
                        "name": "norm2782",
                        "displayName": "Jurrien Stutterheim",
                        "active": true
                    },
                    "body": "This issue has been resolved for the Pdo_Mysql, Pdo_Pgsql, Mysqli and Oracle drivers in revision 14691 and 14692. At the moment I can only verify that this works on Oracle. Before closing this issue I would like to confirm there are no issues with the patch. Would everybody be so kind to verify that the patch works for Pdo_Mysql, Pdo_Pgsql and Mysqli? You can specify the charset in the adapter config using the 'charset' key.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=norm2782",
                        "name": "norm2782",
                        "displayName": "Jurrien Stutterheim",
                        "active": true
                    },
                    "created": "2009-04-05T18:56:47.000+0000",
                    "updated": "2009-04-05T19:36:31.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29987",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sorin",
                        "name": "sorin",
                        "displayName": "Sorin Alin Stoiana",
                        "active": true
                    },
                    "body": "A more complete patch is [here|#action23500] . It implements charset support for Mysql, Oracle, Pdo_Mysql, Pdo_Oracle and Pdo_Pgsql, as well as unit tests for these. It has been tested with Oracle XE, Oracle Real Application Cluster, Mysql, and Pgsql.\n\nWhy was this patch disregarded? From what I read in the Contributor's Guide, all changes must come with unit tests. \n\nWhile I approve the kind of swift action Jurrien took in solving the issue at hand, I believe we shouldn't compromise when it comes to providing fixes. ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sorin",
                        "name": "sorin",
                        "displayName": "Sorin Alin Stoiana",
                        "active": true
                    },
                    "created": "2009-04-06T01:34:21.000+0000",
                    "updated": "2009-04-06T01:34:21.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30182",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=norm2782",
                        "name": "norm2782",
                        "displayName": "Jurrien Stutterheim",
                        "active": true
                    },
                    "body": "A test was available already, but was marked as skipped. It's enabled in revision 14952 and successfully passes on Mysqli, Pdo_Mysql, Pdo_Oci and Oracle.\nStill looking for someone to test on Pdo_Pgsql.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=norm2782",
                        "name": "norm2782",
                        "displayName": "Jurrien Stutterheim",
                        "active": true
                    },
                    "created": "2009-04-16T17:17:39.000+0000",
                    "updated": "2009-04-16T17:17:39.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30183",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=norm2782",
                        "name": "norm2782",
                        "displayName": "Jurrien Stutterheim",
                        "active": true
                    },
                    "body": "I've installed Postgres for myself and identified and fixed one last issue there. As of revision 14953 I can successfully run the test on Mysql, Pdo_Mysql, Oci8 and Pdo_Pgsql. Pdo_Oci already supported the charset option. Closing issue as \"fixed\". :)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=norm2782",
                        "name": "norm2782",
                        "displayName": "Jurrien Stutterheim",
                        "active": true
                    },
                    "created": "2009-04-16T17:58:52.000+0000",
                    "updated": "2009-04-16T17:58:52.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37434",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=chmuul",
                        "name": "chmuul",
                        "displayName": "Paul Voss",
                        "active": true
                    },
                    "body": "I'm working with Zend Framework Version 1.9.6 here and _cannot_ confirm that this issue has been resolved (using pdo_mysql rev 16942).\r\nMy html output is set to utf-8, the database runs on utf-8 as well (utf8_general_ci) but all special chars are messed up.\r\n\r\nYanick Rochon's hotfix worked for me though. (http:\/\/framework.zend.com\/issues\/browse\/ZF-1541?focusedCommentId=29251&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#action_29251)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=chmuul",
                        "name": "chmuul",
                        "displayName": "Paul Voss",
                        "active": true
                    },
                    "created": "2010-01-06T06:48:49.000+0000",
                    "updated": "2010-01-06T06:48:49.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37436",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "what version on PHP? there was a regression in PHP 5.3.0 that would affect this from working.\r\n\r\n-ralph",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2010-01-06T07:48:36.000+0000",
                    "updated": "2010-01-06T07:48:36.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37437",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=chmuul",
                        "name": "chmuul",
                        "displayName": "Paul Voss",
                        "active": true
                    },
                    "body": "I'm afraid it's 5.3.0... :(\r\n\r\nPHP 5.3.0 (cli) (built: Jul 19 2009 00:34:29) \r\nCopyright (c) 1997-2009 The PHP Group\r\nZend Engine v2.3.0, Copyright (c) 1998-2009 Zend Technologies\r\n\r\nIn fact it's the apache\/php combo that came with MacOS Snow Leopard (MySQL installed with MacPorts).",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=chmuul",
                        "name": "chmuul",
                        "displayName": "Paul Voss",
                        "active": true
                    },
                    "created": "2010-01-06T07:57:31.000+0000",
                    "updated": "2010-01-06T07:57:31.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38535",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=nschlup",
                        "name": "nschlup",
                        "displayName": "Nicola Alexander Schlup",
                        "active": true
                    },
                    "body": "The problem is fixed with PHP 5.3.1.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=nschlup",
                        "name": "nschlup",
                        "displayName": "Nicola Alexander Schlup",
                        "active": true
                    },
                    "created": "2010-02-18T07:28:27.000+0000",
                    "updated": "2010-02-18T07:28:27.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1541\/transitions"
}