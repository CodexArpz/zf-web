{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4976",
    "key": "ZF-4976",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Add new DocumentsList Data API functionality for Folders"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4976\/votes",
                "votes": 1,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10360",
                    "id": 10360,
                    "description": "Minor Release",
                    "name": "1.10.0",
                    "userReleaseDate": "27\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-27",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2010-01-06T18:40:47.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jhartmann",
                "name": "jhartmann",
                "displayName": "Jochen Hartmann",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-11-18T10:05:42.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-01-06T18:40:48.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "File your documents: You can now create new folders in the API, move documents in and out of folders and have full access to nested folders. (Issue 377, Issue 383)"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4976\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tjohns",
                "name": "tjohns",
                "displayName": "Trevor Johns",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-8732",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8732",
                    "type": {
                        "name": "Related",
                        "direction": "INBOUND",
                        "description": "is related to"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/12576",
                    "filename": "DocsFolderSupport.diff",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mromaine",
                        "name": "mromaine",
                        "displayName": "Matthew Romaine",
                        "active": true
                    },
                    "created": "2010-01-05T06:06:49.000+0000",
                    "size": 2823,
                    "mimeType": "application\/octet-stream",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/12576\/DocsFolderSupport.diff"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/12580",
                    "filename": "DocsFolderSupportv2.diff",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mromaine",
                        "name": "mromaine",
                        "displayName": "Matthew Romaine",
                        "active": true
                    },
                    "created": "2010-01-05T19:46:13.000+0000",
                    "size": 2884,
                    "mimeType": "application\/octet-stream",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/12580\/DocsFolderSupportv2.diff"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/12032",
                    "filename": "Gdata.DocFolders.diff",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mromaine",
                        "name": "mromaine",
                        "displayName": "Matthew Romaine",
                        "active": true
                    },
                    "created": "2009-06-20T10:44:48.000+0000",
                    "size": 2118,
                    "mimeType": "application\/octet-stream",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/12032\/Gdata.DocFolders.diff"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10088",
                    "id": 10088,
                    "name": "Zend_Gdata",
                    "description": "Class interface to Google Data API's.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32015",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mromaine",
                        "name": "mromaine",
                        "displayName": "Matthew Romaine",
                        "active": true
                    },
                    "body": "Here's an initial patch that adds folder creation support.\n\nOnce you patch this in, you can also move and delete folders relatively easily with code outside the Gdata library.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mromaine",
                        "name": "mromaine",
                        "displayName": "Matthew Romaine",
                        "active": true
                    },
                    "created": "2009-06-20T10:44:52.000+0000",
                    "updated": "2009-06-20T10:44:52.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32078",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tjohns",
                        "name": "tjohns",
                        "displayName": "Trevor Johns",
                        "active": true
                    },
                    "body": "Hi Matthew,\nThanks for the patch. Unfortunately, before we can accept your contributions, you need to sign and submit the Zend Framework CLA. This can be found here:\n\nhttp:\/\/framework.zend.com\/wiki\/display\/ZFPROP\/Contributor+License+Agreement\n\nOnce this is done and you're added to the *zf-framework-dev* group in JIRA, let me know and I'll process this patch.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tjohns",
                        "name": "tjohns",
                        "displayName": "Trevor Johns",
                        "active": true
                    },
                    "created": "2009-06-22T12:29:50.000+0000",
                    "updated": "2009-06-22T12:29:50.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32138",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mromaine",
                        "name": "mromaine",
                        "displayName": "Matthew Romaine",
                        "active": true
                    },
                    "body": "Hi Trevor,\n\nMy CLA has been accepted and Hilary has added my account to the contributor group.  Please proceed with processing this patch.  Thanks!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mromaine",
                        "name": "mromaine",
                        "displayName": "Matthew Romaine",
                        "active": true
                    },
                    "created": "2009-06-23T23:27:44.000+0000",
                    "updated": "2009-06-23T23:27:44.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32162",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=api.eric",
                        "name": "api.eric",
                        "displayName": "Eric Bidelman",
                        "active": true
                    },
                    "body": "Thanks Matthew.  A couple of suggestions\/comments.\n\n- DOCUMENTS_FOLDER_FEED_URI should not have a trailing '\/folder'\n\n- It would be nice to have an additional (optional) argument $resource_id for creating a folder within another folder.  This is similar to creating documents in folders:\nhttp:\/\/code.google.com\/apis\/documents\/docs\/2.0\/developers_guide_protocol.html#UploadingToFolder\n\npublic function createFolder($folderName, $folderResourceId=null) {\n...\nif ($folderResourceId != null) {\n $uri = self::DOCUMENTS_FOLDER_FEED_URI . '\/' . $folderResourceId;\n} else {\n  $uri = self::DOCUMENTS_LIST_FEED_URI;\n}\nreturn $this->insertEntry($entry, $uri);\n}\n\nYou could additionally allow $folderResourceId to be a full URI (http:\/\/docs.google.com\/feeds\/folders\/private\/full\/folder\/folder%3A1234)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=api.eric",
                        "name": "api.eric",
                        "displayName": "Eric Bidelman",
                        "active": true
                    },
                    "created": "2009-06-24T17:20:04.000+0000",
                    "updated": "2009-06-24T17:20:04.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37389",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mromaine",
                        "name": "mromaine",
                        "displayName": "Matthew Romaine",
                        "active": true
                    },
                    "body": "Hi guys,\r\n\r\nSorry it's taken me so long to get back to this.  I've implemented Eric's suggestions (thanks Eric) and have attached an updated patch.\r\n\r\nWould be great to see this in the next release.\r\n\r\nCheers,\r\nMatt",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mromaine",
                        "name": "mromaine",
                        "displayName": "Matthew Romaine",
                        "active": true
                    },
                    "created": "2010-01-05T06:06:51.000+0000",
                    "updated": "2010-01-05T06:06:51.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37407",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tjohns",
                        "name": "tjohns",
                        "displayName": "Trevor Johns",
                        "active": true
                    },
                    "body": "Hi Matt. Looks good. Just a few comments from me.\r\n\r\nMy comments are preceded with a !. Eric may have additional review comments as well.\r\n\r\n{code:title=Review: DocsFolderSupport.diff|borderStyle=solid}\r\n--- Docs.php\t(revision 20086)\r\n+++ Docs.php\t(working copy)\r\n@@ -37,6 +37,12 @@\r\n require_once 'Zend\/Gdata\/Docs\/DocumentListEntry.php';\r\n \r\n \/**\r\n+ * App Extensions\r\n+ *\/\r\n\r\n! Because of the way phpdoc works, using this style of comment to group\r\n! require_once statements doesn't work. Please stick with the existing\r\n! convention, namely an @see $CLASS_NAME for each require_once.\r\n\r\n+require_once 'Zend\/Gdata\/App\/Extension\/Category.php';\r\n+require_once 'Zend\/Gdata\/App\/Extension\/Title.php';\r\n+\r\n+\/**\r\n  * Service class for interacting with the Google Document List data API\r\n  * @link http:\/\/code.google.com\/apis\/documents\/\r\n  *\r\n@@ -50,19 +56,29 @@\r\n {\r\n \r\n     const DOCUMENTS_LIST_FEED_URI = 'http:\/\/docs.google.com\/feeds\/documents\/private\/full';\r\n+    const DOCUMENTS_FOLDER_FEED_URI = 'http:\/\/docs.google.com\/feeds\/folders\/private\/full';\r\n+    const DOCUMENTS_CATEGORY_SCHEMA = 'http:\/\/schemas.google.com\/g\/2005#kind';\r\n+    const DOCUMENTS_CATEGORY_TERM = 'http:\/\/schemas.google.com\/docs\/2007#folder';\r\n     const AUTH_SERVICE_NAME = 'writely';\r\n \r\n     protected $_defaultPostUri = self::DOCUMENTS_LIST_FEED_URI;\r\n \r\n     private static $SUPPORTED_FILETYPES = array(\r\n+      'TXT'=>'text\/plain',\r\n       'CSV'=>'text\/csv',\r\n+      'TSV'=>'text\/tab-separated-values',\r\n+      'TAB'=>'text\/tab-separated-values',\r\n+      'HTML'=>'text\/html',\r\n+      'HTM'=>'text\/html',\r\n       'DOC'=>'application\/msword',\r\n       'ODS'=>'application\/vnd.oasis.opendocument.spreadsheet',\r\n       'ODT'=>'application\/vnd.oasis.opendocument.text',\r\n       'RTF'=>'application\/rtf',\r\n       'SXW'=>'application\/vnd.sun.xml.writer',\r\n-      'TXT'=>'text\/plain',\r\n-      'XLS'=>'application\/vnd.ms-excel');\r\n+      'XLS'=>'application\/vnd.ms-excel',\r\n+      'XLSX'=>'application\/vnd.ms-excel',\r\n+      'PPT'=>'application\/vnd.ms-powerpoint',\r\n+      'PPS'=>'application\/vnd.ms-powerpoint');\r\n \r\n     \/**\r\n      * Create Gdata_Docs object\r\n@@ -235,6 +251,31 @@\r\n     }\r\n \r\n     \/**\r\n+     * Creates a new folder in Google Docs\r\n+     *\r\n+     * @param string $folderName The folder name to create\r\n+     * @param string $folderResourceId The parent folder to create it in (\"folder%3Amy_parent_folder\")\r\n\r\n! This actually accepts string|null.\r\n\r\n+     *\r\n\r\n! Remove extra newline here.\r\n\r\n+     * @return boolean\r\n+     *\/\r\n+    public function createFolder($folderName, $folderResourceId=null) {\r\n+        $category = new Zend_Gdata_App_Extension_Category(self::DOCUMENTS_CATEGORY_TERM, \r\n+                                                          self::DOCUMENTS_CATEGORY_SCHEMA);\r\n+        $title = new Zend_Gdata_App_Extension_Title($folderName);\r\n+        $entry = new Zend_Gdata_Entry();\r\n+\r\n+        $entry->setCategory(array($category));\r\n+        $entry->setTitle($title);\r\n+\r\n+        $uri = self::DOCUMENTS_LIST_FEED_URI;\r\n+        if ($folderResourceId != null) {\r\n+            $uri = self::DOCUMENTS_FOLDER_FEED_URI . '\/' . $folderResourceId;\r\n+        }\r\n+\r\n+        return $this->insertEntry($entry, $uri);\r\n+    }\r\n+\r\n+    \/**\r\n      * Inserts an entry to a given URI and returns the response as an Entry.\r\n      *\r\n      * @param mixed  $data The Zend_Gdata_Docs_DocumentListEntry or media\r\n\r\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tjohns",
                        "name": "tjohns",
                        "displayName": "Trevor Johns",
                        "active": true
                    },
                    "created": "2010-01-05T13:02:48.000+0000",
                    "updated": "2010-01-05T13:02:48.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37408",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=api.eric",
                        "name": "api.eric",
                        "displayName": "Eric Bidelman",
                        "active": true
                    },
                    "body": "Looks good to me.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=api.eric",
                        "name": "api.eric",
                        "displayName": "Eric Bidelman",
                        "active": true
                    },
                    "created": "2010-01-05T13:09:58.000+0000",
                    "updated": "2010-01-05T13:09:58.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37421",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mromaine",
                        "name": "mromaine",
                        "displayName": "Matthew Romaine",
                        "active": true
                    },
                    "body": "Hi guys,\r\nI've updated the patch file to include your comments.  Hope that makes integration easier.\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mromaine",
                        "name": "mromaine",
                        "displayName": "Matthew Romaine",
                        "active": true
                    },
                    "created": "2010-01-05T19:46:16.000+0000",
                    "updated": "2010-01-05T19:46:16.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37441",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tjohns",
                        "name": "tjohns",
                        "displayName": "Trevor Johns",
                        "active": true
                    },
                    "body": "One last change. I'll just go ahead and make this for you.\r\n\r\n{code}\r\n \/**\r\n+ * @see Zend_Gdata_App_Extension_Category\r\n+ * @see Zend_Gdata_App_Extension_Title\r\n+ *\/\r\n+require_once 'Zend\/Gdata\/App\/Extension\/Category.php';\r\n+require_once 'Zend\/Gdata\/App\/Extension\/Title.php';\r\n{code}\r\n\r\nEach @see line needs to come immediately before it's respective require_once line.\r\n\r\nAs it currently stands, Zend_Gdata_App_Extension_Category will have too \"See Also\" lines in it's documentation, and Zend_Gdata_App_Extension_Title will have none.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tjohns",
                        "name": "tjohns",
                        "displayName": "Trevor Johns",
                        "active": true
                    },
                    "created": "2010-01-06T11:57:35.000+0000",
                    "updated": "2010-01-06T11:57:35.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37460",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tjohns",
                        "name": "tjohns",
                        "displayName": "Trevor Johns",
                        "active": true
                    },
                    "body": "Commited to trunk as r20112. Scheduled for next minor release.\r\nThanks for the patch!\r\n\r\nI've created ZF-8732 to track some additional changes that need to be made to this, but that don't block integration.\r\n\r\n{noformat}\r\ncommit 4e85fb9f4d222d2eb8603a4938625520683a8261\r\nAuthor: tjohns <tjohns@44c647ce-9c0f-0410-b52a-842ac1e357ba>\r\nDate:   Thu Jan 7 02:39:32 2010 +0000\r\n\r\n    ZF-4976: Add createFolder() method to Zend_Gdata_Docs.\r\n    \r\n    Tests and a minor doc changes added by me. All other changes submitted\r\n    via patch.\r\n    \r\n    Patch by: Matthew Romaine (mromaine)\r\n    \r\n    git-svn-id: http:\/\/framework.zend.com\/svn\/framework\/standard\/trunk@20112 44c647ce-9c0f-0410-b52a-842\r\n\r\n library\/Zend\/Gdata\/Docs.php   |   51 ++++++++++++++++++++++++++++++++++++-\r\n tests\/Zend\/Gdata\/DocsTest.php |   55 ++++++++++++++++++++++++++++++++++++++---\r\n 2 files changed, 100 insertions(+), 6 deletions(-)\r\n{noformat}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tjohns",
                        "name": "tjohns",
                        "displayName": "Trevor Johns",
                        "active": true
                    },
                    "created": "2010-01-06T18:40:48.000+0000",
                    "updated": "2010-01-06T18:40:48.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4976\/transitions"
}