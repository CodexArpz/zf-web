{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6148",
    "key": "ZF-6148",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Dijit parsing before store creation results in FilteringSelect and ComboBox."
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6148\/votes",
                "votes": 1,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10340",
                    "id": 10340,
                    "description": "Mini Release",
                    "name": "1.8.4",
                    "userReleaseDate": "23\/Jun\/09",
                    "archived": false,
                    "releaseDate": "2009-06-23",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-06-18T11:22:20.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=denis.baklikov",
                "name": "denis.baklikov",
                "displayName": "Denis Baklikov",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-03-27T20:46:45.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-07-14T07:58:40.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "This issue duplicates #5987.\n\nI have got JavaScript error: *'dojo.data is undefined'* after migrating to ZF 1.7.7.\nIt seems that JavaScript tried to create new instance of dojo.data.ItemFileReadStore, but it is not loaded yet.\n\nItemFileReadStore instance should be created after page load, using dojo.addOnLoad method.\nI think that using *prependOnLoad* (look at the first comment) instead of *addJavascript* (in ComboBox.php line 142).\n\nThe following code was generated by Dojo View helper:\n{code}\ndojo.require(\"dojo.data.ItemFileReadStore\");\ndojo.require(\"dijit.form.FilteringSelect\");\ndojo.require(\"dijit.form.CurrencyTextBox\");\ndojo.require(\"dijit.form.NumberTextBox\");\ndojo.require(\"dijit.form.Textarea\");\ndojo.require(\"dijit.form.Button\");\ndojo.require(\"dijit.Dialog\");\ndojo.require(\"dijit.ColorPalette\");\ndojo.require(\"dojo.parser\");\n\ndojo.addOnLoad(function() {\ndojo.forEach(zendDijits, function(info) {\nvar n = dojo.byId(info.id);\nif (null != n) {\ndojo.attr(n, dojo.mixin({ id: info.id }, info.params));\n}\n});\ndojo.parser.parse();\n});\n\nvar manufacturerStore = new dojo.data.ItemFileReadStore({\"url\":\"\\\/manufacturer\\\/list\"});\nvar modelStore = new dojo.data.ItemFileReadStore({\"url\":\"\\\/model\\\/list\"});\nvar zendDijits = [{\"id\":\"manufacturer\",\"params\":{\"label\":\"Manufacturer\",\"store\":\"manufacturerStore\",\"dijitParams\",........}}];\n{code}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6148\/watchers",
                "isWatching": false,
                "watchCount": 5
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10291",
                    "id": 10291,
                    "description": "Mini Release",
                    "name": "1.7.7",
                    "userReleaseDate": "16\/Mar\/09",
                    "archived": false,
                    "releaseDate": "2009-03-16",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10311",
                    "id": 10311,
                    "name": "Zend_Dojo",
                    "description": "Dojo integration with Zend Framework",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30561",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sulu45",
                        "name": "sulu45",
                        "displayName": "St\u00e9phane Legrand",
                        "active": true
                    },
                    "body": "Hello,\n\nJust to say that i have exactly the same problem. With this code : \n\n$nom = new Zend_Dojo_Form_Element_FilteringSelect('nom');\n      $nom->setLabel('Nom : ');\n      $nom->setAutoComplete(true);\n      $nom->setStoreId('nom');\n      $nom->setStoreType('dojo.data.ItemFileReadStore');\n      $nom->setStoreParams(array('url' => '\/js\/nom.js'));\n      $nom->setAttrib(array('searchAttr' => 'nom'));\n      $nom->setRequired(true);\n      $form->addElement($nom);\n\ni get the same Javascript error : \n\n  dojo.data is undefined\n\nand, of course, an empty select field.\n\nTested with ZF 1.7.8.\n\n\nRegards,\nStephane.\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sulu45",
                        "name": "sulu45",
                        "displayName": "St\u00e9phane Legrand",
                        "active": true
                    },
                    "created": "2009-04-30T09:48:36.000+0000",
                    "updated": "2009-04-30T09:48:36.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31797",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mangelp",
                        "name": "mangelp",
                        "displayName": "Miguel Angel Perez",
                        "active": true
                    },
                    "body": "Hello,\n\nZF 1.8.3 is still affected by this issue despite of #5987 being closed.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mangelp",
                        "name": "mangelp",
                        "displayName": "Miguel Angel Perez",
                        "active": true
                    },
                    "created": "2009-06-12T06:20:00.000+0000",
                    "updated": "2009-06-12T06:20:00.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31960",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Finally have it working correctly. prependOnLoad() does not work, as that method is used by the dojo view helper inernally just prior to rendering to create the dijits -- which means that the dijit creation happens prior to store creation. I did figure it out, however, based on a comment on ZF-5987 by Erik Wahlstrom, and now have an onLoad event that creates the store and assigns it to the dijit's store attribute. I've tested this locally and the solution is solid.\n\nThe changes have been patched to trunk and the 1.8 release branch, and will go out with 1.8.4.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2009-06-18T11:22:06.000+0000",
                    "updated": "2009-06-18T11:22:06.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32410",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jeanfabrice",
                        "name": "jeanfabrice",
                        "displayName": "Jean-Fabrice",
                        "active": true
                    },
                    "body": "this ZF 1.8.4  fix seems to break the following setup, known to work in ZF 1.8.3:\n1\/ store is statically defined in a view :\n<script type='text\/javascript'>\n\/\/<![CDATA[\nvar myStore = new dojo.data.ItemFileReadStore({\n    url: '<?=$this->url( array( 'controller' => 'mycontroller', 'action' => 'autocomplete', 'format' => 'json' ), null, true )?>',\n});\n\/\/]]>\n<\/script>\n\n2\/ filteringselect only sets up store property to targe the statically defined store :\n$element->setDijitParams( array( 'store'      => 'myStore'  ) );\n\nWith this setup and ZF 1.8.4, FilteringSelect appears empty while myStore is populated\n\nWhy am I doing things like this ? Because this is the only way I found to have a filteringselect combo working  when loaded into a dojox.dialog (=dojo.dialog + executescript) with a xhrget request. \n\nJean-fabrice",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jeanfabrice",
                        "name": "jeanfabrice",
                        "displayName": "Jean-Fabrice",
                        "active": true
                    },
                    "created": "2009-07-06T05:25:09.000+0000",
                    "updated": "2009-07-06T05:25:09.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32487",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=holon",
                        "name": "holon",
                        "displayName": "Jean-Marc Rigade",
                        "active": true
                    },
                    "body": "I have the same problem than Jean-Fabrice.\nAll my filtering select are empty.\nI have some \"linked\" filteringselect, when I make change on the first list, the second is affected.\nNow this dont work at all...\n\nAnd I've a lot of filtering select in my webapp, what must I do ????",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=holon",
                        "name": "holon",
                        "displayName": "Jean-Marc Rigade",
                        "active": true
                    },
                    "created": "2009-07-09T02:00:59.000+0000",
                    "updated": "2009-07-09T02:00:59.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32560",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=craineum",
                        "name": "craineum",
                        "displayName": "Kevin Craine",
                        "active": true
                    },
                    "body": "I don't know where else to put this comment,  It probably is a new bug, or there might be a better work around.\n\nIn 1.8.4, doing something like this in a view:\n\necho $this->filteringSelect(\n    'select',\n    '20',\n    array(\n        'store'        => 'store',\n        'storeType'    => 'dojo.data.ItemFileReadStore',\n        'storeParams'  => array('url' => '\/my\/data'))\n);\n\nFails, the 'value' is not set because the store is not loaded when it it parses the input.  With a filteringSelect the input remains a textbox with the value set, but it is not a dojo object, and everything else on the page breaks.  With a comboBox the value and label are set to the identifier value that I am passing instead of the label getting set properly (assuming because combo box allows things not in the store).  I tried putting a 'value' option in the params array, but that doesn't seem to propagate, and even if I test this by hand it still doesn't load properly because of the way things are getting parsed.\n\nAnyone have any idea's?  Besides creating all this stuff by hand?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=craineum",
                        "name": "craineum",
                        "displayName": "Kevin Craine",
                        "active": true
                    },
                    "created": "2009-07-14T07:58:26.000+0000",
                    "updated": "2009-07-14T07:58:26.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6148\/transitions"
}