{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5043",
    "key": "ZF-5043",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "problem supporting array form on ZendX_JQuery_Form_Element_DatePicker "
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5043\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/5",
                "name": "Cannot Reproduce"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-01-07T14:57:05.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rumeau",
                "name": "rumeau",
                "displayName": "Jean Rumeau",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-11-24T07:32:26.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-12-14T07:08:24.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Zend_JQuery_Form_Element_DatePicker seems to have problem with array ID's.\n\nAs Zend_Form_Subform are by default treated as array, any element inside the subform will be an element of the array subform\n{code:html}\n<input id=\"subform[element1]\" type=\"text\" value=\"\" name=\"subform[element1]\" \/>\n{code}\n\nThis cause the datepicker to not work in the above element.\n\nThis can be solved disabling the form as array\n\n{code}\nZend_Form::setIsArray(false);\n{code}\n\nWich suppress the array style:\n\n{code:html}\n<input id=\"element1\" type=\"text\" value=\"\" name=\"element1\" \/>\n{code}\n\nMaking the datepicker to work correctly.\n\nBut i think this must be supported by the form element, as someone would like to keep using the array notation in the forms, to separate subforms."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5043\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=beberlei",
                "name": "beberlei",
                "displayName": "Benjamin Eberlei",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10260",
                    "id": 10260,
                    "description": "Minor Release",
                    "name": "1.7.0",
                    "userReleaseDate": "17\/Nov\/08",
                    "archived": false,
                    "releaseDate": "2008-11-17",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10360",
                    "id": 10360,
                    "name": "ZendX_JQuery",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/26682",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=beberlei",
                        "name": "beberlei",
                        "displayName": "Benjamin Eberlei",
                        "active": true
                    },
                    "body": "Hello,\n\ni need more input on this. I have a subform example http:\/\/www.beberlei.de\/jquery\/demo\/formdemo.php\nwhich doesnt automatically create form arrays.\n\nCan you help me to reproduce it?\n\nI know why it fails when going with subarrays though. You should post me the javascript errors that are generated and i can confirm that jQuery maybe does not like $(\"#subform1[element1]\")",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=beberlei",
                        "name": "beberlei",
                        "displayName": "Benjamin Eberlei",
                        "active": true
                    },
                    "created": "2008-11-25T07:58:53.000+0000",
                    "updated": "2008-11-25T07:58:53.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/27279",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rumeau",
                        "name": "rumeau",
                        "displayName": "Jean Rumeau",
                        "active": true
                    },
                    "body": "The array notation is eliminated when definig the id in the form, but if you create the form element as is, within a subform, it will set the id automatically to subform[elementid]",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rumeau",
                        "name": "rumeau",
                        "displayName": "Jean Rumeau",
                        "active": true
                    },
                    "created": "2008-12-13T09:16:51.000+0000",
                    "updated": "2008-12-13T09:16:51.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/27758",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=norm2782",
                        "name": "norm2782",
                        "displayName": "Jurrien Stutterheim",
                        "active": true
                    },
                    "body": "Relaying a comment for someone who can't comment... same error goes for the slider as well.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=norm2782",
                        "name": "norm2782",
                        "displayName": "Jurrien Stutterheim",
                        "active": true
                    },
                    "created": "2009-01-05T05:42:35.000+0000",
                    "updated": "2009-01-05T05:42:35.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/27848",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=beberlei",
                        "name": "beberlei",
                        "displayName": "Benjamin Eberlei",
                        "active": true
                    },
                    "body": "I am very sorry, i cannot get it to work such that this problem does appear.\n\nCould you please provide a simple test-case that produces array notation using ZendX_JQuery_Form? That would be very nice. I try some more...",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=beberlei",
                        "name": "beberlei",
                        "displayName": "Benjamin Eberlei",
                        "active": true
                    },
                    "created": "2009-01-07T14:43:31.000+0000",
                    "updated": "2009-01-07T14:43:31.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/27849",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=beberlei",
                        "name": "beberlei",
                        "displayName": "Benjamin Eberlei",
                        "active": true
                    },
                    "body": "I know have a testcase of the following sort:\n\n{code}\n    \/**\n     * @group ZF-5043\n     *\/\n    public function testFormWithoutIdButSubformsProducesArrayNotationWhichWontWork()\n    {\n        $view = new Zend_View();\n        $form = new ZendX_JQuery_Form();\n\n        $datePicker = new ZendX_JQuery_Form_Element_DatePicker(\"dp1\");\n\n        $subform = new Zend_Form_SubForm();\n        $subform->addElement($datePicker);\n\n        $form->addSubForm($subform, \"sf1\");\n        $form->setIsArray(true);\n\n        var_dump($form->render($view));\n        var_dump($view->jQuery()->__toString());\n    }\n{code}\n\nit produces the following output:\n\n{code}\n<form enctype=\"application\/x-www-form-urlencoded\" action=\"\" method=\"post\"><dl class=\"zend_form\">\n<dt>&nbsp;<\/dt><dd><fieldset id=\"fieldset-sf1\"><dl>\n<dt>&nbsp;<\/dt>\n<dd>\n<input type=\"text\" name=\"sf1[dp1]\" id=\"sf1-dp1\" value=\"\"><\/dd><\/dl><\/fieldset><\/dd><\/dl><\/form>\"\nstring(353) \"\n<script type=\"text\/javascript\" src=\"http:\/\/ajax.googleapis.com\/ajax\/libs\/jquery\/1.2.6\/jquery.min.js\"><\/script>\n<script type=\"text\/javascript\" src=\"http:\/\/ajax.googleapis.com\/ajax\/libs\/jqueryui\/1.5.2\/jquery-ui.min.js\"><\/script>\n\n<script type=\"text\/javascript\">\n\/\/<!--\n$(document).ready(function() {\n    $(\"#sf1-dp1\").datepicker({});\n});\n\/\/-->\n\n<\/script>\n{code}\n\nIt does produce the sf1-dp1 ID and talks to it correctly in the jQuery helper output. It works in Firefox for me. For me this issue is closed unless a clear testcase is provided that makes this bug reproducable.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=beberlei",
                        "name": "beberlei",
                        "displayName": "Benjamin Eberlei",
                        "active": true
                    },
                    "created": "2009-01-07T14:56:46.000+0000",
                    "updated": "2009-01-07T14:56:46.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43592",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "body": "(I came across this issue when trying to solve the problem of using jQueryUI Date Picker with an array field name, so I thought I would add my solution for posterity)\r\n\r\nYou can fix this problem and still keep the array syntax for the field name (ie: for a date+time picker combination element) by overriding the ID attribute:\r\n{code}\r\n\/\/ Method 1: Direct Creation\r\n$datePicker = new ZendX_JQuery_Form_Element_DatePicker(\"MyCompoundElement[date]\");\r\n$datePicker->setAttrib('id', \"MyCompoundElement-DatePicker\");\r\necho $datePicker->render();\r\n\r\n\/\/ Method 2: Using ZendX_JQuery_View_Helper_DatePicker\r\n\/\/ (from within a view script)\r\necho $this->datePicker(\"MyCompoundElement[date]\", 0, array(), array('id'=>\"MyCompoundElement-DatePicker\"))\r\n{code}\r\nThis will create the following HTML output:\r\n{code}\r\n<dt id=\"MyCompoundElement-DatePicker-label\">&#160;<\/dt>\r\n<dd><input type=\"text\" name=\"MyCompoundElement[date]\" id=\"MyCompoundElement-DatePicker\" value=\"\"><\/dd>\r\n{code}\r\nand (assuming the jQuery helper is set up properly) the following javascript in the document header:\r\n{code}\r\n$(document).ready(function() {\r\n    $(\"#MyCompoundElement-DatePicker\").datepicker({});\r\n});\r\n{code}\r\n\r\nHope this helps,",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "created": "2010-12-14T07:06:56.000+0000",
                    "updated": "2010-12-14T07:08:24.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5043\/transitions"
}