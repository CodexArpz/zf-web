{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5984",
    "key": "ZF-5984",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Dom_Query Fails Tests"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5984\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2012-05-29T18:20:14.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mark_79_smith",
                "name": "mark_79_smith",
                "displayName": "Mark Smith",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-03-10T11:53:43.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-05-29T18:20:14.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "zend_dom_query"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Hello,\n\nIt seems Zend_Dom does not work. i have gone through the tests and it currently does not work as expected.\n\nFor example:\n*1. Providing bogus string as html*\n{code:javascript}\ntry {\n            $this->query = new Zend_Dom_Query();\n            $this->query->setDocument('some bogus');\n            Zend_Debug::dump($this->query->getDocumentType());\n            Zend_Debug::dump($this->query->getDocument());\n            $matches = $this->query->query ( \".foo\" );\n            Zend_Debug::dump ( $matches );\n} catch (Zend_Dom_Exception $e) {\n            var_dump($e->getMessage());\n            exit;\n}\n{code}\nI expected the exception to have been triggered (as there is a test for this), however the following was returned:\n{noformat}\nstring(7) \"docHtml\" \/\/ $this->query->getDocumentType()\n\nstring(10) \"some bogus\" \/\/ $this->query->getDocument()\n\nobject(Zend_Dom_Query_Result)#68 (7) {\n  [\"_count:protected\"] => NULL\n  [\"_cssQuery:protected\"] => string(4) \".foo\"\n  [\"_document:protected\"] => object(DOMDocument)#72 (0) {\n  }\n  [\"_nodeList:protected\"] => object(DOMNodeList)#71 (0) {\n  }\n  [\"_position:protected\"] => int(0)\n  [\"_xpath:protected\"] => NULL\n  [\"_xpathQuery:protected\"] => string(30) \"\/\/*[contains(@class, ' foo ')]\"\n}\n{noformat}\n*2. Providing Xhtml*\n{code:javascript}\ntry {\n            $this->query = new Zend_Dom_Query();\n            $this->query->setDocument(file_get_contents('http:\/\/framework.zend.com\/svn\/framework\/standard\/trunk\/tests\/Zend\/Dom\/_files\/sample.xhtml'));\n            Zend_Debug::dump($this->query->getDocumentType());\n            Zend_Debug::dump($this->query->getDocument());\n            $matches = $this->query->query ( \".foo\" );\n            Zend_Debug::dump ( $matches );\n} catch (Zend_Dom_Exception $e) {\n            var_dump($e->getMessage());\n            exit;\n}\n{code}\nThis should work but instead the following was returned:\n{noformat}\nstring(8) \"docXhtml\"\n\nstring(6456) \"<!DOCTYPE html PUBLIC \"-\/\/W3C\/\/DTD XHTML 1.0 Transitional\/\/EN\" \"http:\/\/www.w3.org\/TR\/xhtml1\/DTD\/xhtml1-transitional.dtd\">\n<html>\n<head>\n    <title>Sample HTML Content for DOM Queries<\/title>\n    <meta http-equiv=\"Content-Type\" content=\"text\/html; charset=utf-8\" \/>\n<\/head>\n<body>\n    <div id=\"header\">\n        <h1>\n            <a href=\"#\"><img src=\"img\/icon.png\" class=\"right\" alt=\"Logo\"\n                height=\"79\" width=\"80\" border=\"0\" \/><\/a>\n            Page Title<br \/>\n            <span class=\"subtitle\">SubTitle<\/span>\n        <\/h1>\n    <\/div>\n\n    <ul id=\"topnav\">\n        <li class=\"current\"><a href=\"#\">Home<\/a><\/li>\n        <li><a href=\"#\">About<\/a><\/li>\n        <li><a href=\"#\">Misc<\/a><\/li>\n        <li><a href=\"#\">Wiki<\/a><\/li>\n    <\/ul>\n\n    <div id=\"main\">\n        <div id=\"content\">\n            <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Sed at dui quis magna\n            viverra sagittis. Donec sed nibh ut pede pretium ultricies. Mauris viverra\n            tempus dui. Donec dolor risus, mollis sed, pulvinar id, faucibus ac, nisl. Duis\n            eu erat at erat tempus euismod. Suspendisse sodales lacus vitae libero. Sed\n            suscipit commodo enim. Pellentesque erat. Cras orci. Pellentesque non nunc. Cras\n            diam libero, feugiat vel, accumsan et, laoreet mattis, purus. Pellentesque\n            volutpat hendrerit justo. Cras vehicula. Vestibulum cursus gravida est.\n            Curabitur pede. Mauris consectetuer rutrum dolor. Ut a turpis ac metus\n            sollicitudin dignissim.<\/p>\n\n            <p>Praesent blandit, nisi in egestas mattis, lectus tortor vehicula massa, commodo\n            vehicula diam lacus consequat lectus. In vitae pede eget leo faucibus\n            condimentum. Pellentesque nisi. Ut condimentum elit vitae mi. Morbi neque erat,\n            mollis nec, volutpat sed, placerat sit amet, ligula. Morbi eleifend. Morbi\n            auctor condimentum ipsum. In ac purus. Sed vitae magna. Sed volutpat vestibulum\n            leo. Phasellus id nibh.<\/p>\n\n            <p>Fusce blandit elementum leo. Proin id erat. In dignissim orci vulputate libero\n            cursus volutpat. Ut vitae arcu non nulla sagittis laoreet. Suspendisse sed\n            tortor ac risus placerat convallis. Donec nulla ipsum, tempus et, porttitor\n            quis, blandit vel, tortor. Donec condimentum. Aliquam felis dui, consectetuer\n            ultricies, euismod eu, pretium non, sem. Sed ultricies, tortor non vulputate\n            tempor, urna leo sagittis libero, ut feugiat nulla tellus et ligula. Suspendisse\n            eget est. Vestibulum interdum mi at felis. Fusce dictum. Fusce a enim at ipsum\n            consectetuer molestie. Integer rhoncus. Cum sociis natoque penatibus et magnis\n            dis parturient montes, nascetur ridiculus mus. Donec rhoncus mattis arcu.<\/p>\n\n            <p>Proin id nisi. Vivamus eu risus. Vivamus et enim et turpis volutpat bibendum.\n            Nunc nunc ipsum, semper sit amet, pellentesque in, venenatis sit amet, elit.\n            Suspendisse potenti. Cras lacinia, nisl vel vulputate pellentesque, lacus tellus\n            lobortis ipsum, sed pellentesque neque felis ac orci. Sed pellentesque.\n            Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac\n            turpis egestas. Etiam lacus enim, facilisis eu, suscipit ac, condimentum ut,\n            ante. Aenean convallis mattis enim. Aliquam pretium. Etiam quam. Donec\n            tincidunt. Pellentesque id ante ut orci gravida semper. Cum sociis natoque\n            penatibus et magnis dis parturient montes, nascetur ridiculus mus. Fusce\n            bibendum elit vel sem cursus ultrices. Nunc in purus. Ut consectetuer, nulla ac\n            porta hendrerit, ligula eros blandit nulla, at ornare dui odio vel justo. Morbi\n            tellus nulla, sodales eget, aliquet ac, varius vitae, pede. Pellentesque\n            habitant morbi tristique senectus et netus et malesuada fames ac turpis\n            egestas.<\/p>\n\n            <p>Vestibulum urna. Proin hendrerit neque et tellus. Duis luctus congue sem.\n            Aliquam ultricies orci nec enim. Nam velit eros, feugiat posuere, ultricies\n            vitae, consequat nec, urna. In ipsum neque, porta sed, ornare nec, cursus et,\n            mauris. Nam eget urna. Suspendisse venenatis nulla nec urna lacinia bibendum.\n            Morbi tempor lobortis nisl. Nulla ut eros. Fusce id tortor ut diam vulputate\n            consectetuer. Nulla vel augue. Nulla ac tellus sed orci pulvinar dictum. Proin\n            lobortis. Fusce consequat auctor ante. Donec bibendum fringilla nunc. Donec\n            viverra, urna ac auctor dapibus, augue ipsum tristique lacus, sed feugiat nibh\n            nibh quis purus. Donec orci est, pharetra laoreet, laoreet id, mattis ut, odio.\n            In lacus sem, rutrum tristique, dignissim ac, imperdiet ac, lacus. <\/p>\n        <\/div>\n\n        <div id=\"subnav\">\n            <div class=\"navblock\">\n                <form action=\"\/login\" method=\"post\">\n                    Username:<br \/>\n                    <input name=\"username\" id=\"username\" type=\"text\" value=\"\" \/><br \/>\n                    Password:<br \/>\n                    <input name=\"password\" id=\"password\" type=\"password\" value=\"\" \/><br \/>\n                    <input name=\"login\" id=\"login\" type=\"submit\" value=\"Login\" \/>\n                <\/form>\n            <\/div>\n\n            <div class=\"navblock\" dojoType=\"FilteringSelect\">\n                <ul>\n                    <li class=\"foo\" dojoType=\"foo bar\">Item 1<\/li>\n                    <li class=\"foo current\">Item 2<\/li>\n                    <li class=\"foo\" dojoType=\"foo bar\">Item 3<\/li>\n                <\/ul>\n            <\/div>\n        <\/div>\n    <\/div>\n\n    <div id=\"footer\">\n        <div class=\"footerblock first\">\n            <p class=\"attribution\">\n            &copy; 2008 - present, <br \/>\n            Zend Framework\n            <\/p>\n            <a href=\"\/about\">About<\/a><br \/>\n            <a href=\"\/contact\">Contact<\/a><br \/>\n        <\/div>\n\n        <div class=\"footerblock last\">\n            <h4>More:<\/h4>\n            <ul>\n                 <li>Ohloh profile<\/li>\n                 <li>Facebook<\/li>\n                 <li>Plaxo Pulse<\/li>\n                 <li>LinkedIn<\/li>\n                 <li>del.icious<\/li>\n                 <li>Twitter<\/li>\n                 <li>SlideShare<\/li>\n            <\/ul>\n        <\/div>\n    <\/div>\n<\/body>\n<\/html>\n\"\n\nobject(Zend_Dom_Query_Result)#86 (7) {\n  [\"_count:protected\"] => NULL\n  [\"_cssQuery:protected\"] => string(4) \".foo\"\n  [\"_document:protected\"] => object(DOMDocument)#72 (0) {\n  }\n  [\"_nodeList:protected\"] => object(DOMNodeList)#83 (0) {\n  }\n  [\"_position:protected\"] => int(0)\n  [\"_xpath:protected\"] => NULL\n  [\"_xpathQuery:protected\"] => string(30) \"\/\/*[contains(@class, ' foo ')]\"\n}\n{noformat}\n\nThis is my first bug report, so please be gentle :)"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5984\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/6",
                "name": "Closed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10290",
                    "id": 10290,
                    "description": "Mini Release",
                    "name": "1.7.6",
                    "userReleaseDate": "02\/Mar\/09",
                    "archived": false,
                    "releaseDate": "2009-03-02",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10310",
                    "id": 10310,
                    "name": "Zend_Dom_Query",
                    "description": "Use CSS selectors to query (X)HTML or XML documents.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29381",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "It may actually be working as expected.\n\nFirst, DOMDocument is _very_ forgiving about malformed HTML, and will parse basically anything. So, as far as Zend_Dom_Query is concerned, it received valid documents.\n\nWhen you call $dom->query(), you always receive a result. The trick is to find out if the result contains any members. What I cannot tell from your debug statements is whether or not the NodeLists attached to the results contain anything. Can you do the following on each result you receive:\n{code}\necho count($result);\n{code}\nIf it's 0 in the first case, than it's doing fine. For the second case, I'd expect a value of 3.\n\nOtherwise... I don't see anything operating incorrectly here -- what were your expectations?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2009-03-10T13:20:39.000+0000",
                    "updated": "2009-03-10T13:20:39.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29382",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mark_79_smith",
                        "name": "mark_79_smith",
                        "displayName": "Mark Smith",
                        "active": true
                    },
                    "body": "You are right.\nWhen I do:\n{code}\nforeach ($matches as $result) {\n       \tZend_Debug::dump($result);\n       \tprint count($result);\n}\n{code}\nThe response is:\n{code}\nobject(DOMElement)#76 (0) {\n}\n\n1\n\nobject(DOMElement)#77 (0) {\n}\n\n1\n\nobject(DOMElement)#78 (0) {\n}\n\n1\n{code}\n\nTo be totally honest, I was confused with the lack of information in the response object.\n\nI expect to recieve an attribute value or element value from each of the matched elements. Is this possible?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mark_79_smith",
                        "name": "mark_79_smith",
                        "displayName": "Mark Smith",
                        "active": true
                    },
                    "created": "2009-03-10T13:45:37.000+0000",
                    "updated": "2009-03-10T13:45:37.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29383",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mark_79_smith",
                        "name": "mark_79_smith",
                        "displayName": "Mark Smith",
                        "active": true
                    },
                    "body": "Sorry,\n\nI have just Google'd the answer and came across the PHP manual which has all the information I need.\n\nMany Thanks for all your help",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mark_79_smith",
                        "name": "mark_79_smith",
                        "displayName": "Mark Smith",
                        "active": true
                    },
                    "created": "2009-03-10T13:50:32.000+0000",
                    "updated": "2009-03-10T13:50:32.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5984\/transitions"
}