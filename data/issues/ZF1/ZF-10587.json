{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10587",
    "key": "ZF-10587",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "oauth requests are not signed correctly when request method not specified."
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10587\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lancehudson",
                "name": "lancehudson",
                "displayName": "Lance Hudson",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-10-21T13:33:53.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-11-20T21:38:05.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I am using oauth to authenticate with Google. I also request a custom urls instead of using the gdata framework to get token info and to revoke it.\r\n\r\nIf I make a request to get token info and do not specify 'GET' when making the request I get a '' error from Google, but it works if I specify 'GET'. It should work either way since GET is the default.\r\n\r\nI have the zend framework 1.10.8 and php 5.3.1 installed. Also the AuthSub part of the message is just a general error message and applies to both oauth and authsub.\r\n\r\n*Fail Case*\r\n{code:none|title=non-working code|borderStyle=solid}\r\n $oauthOptions = array(\r\n        'requestScheme' => Zend_Oauth::REQUEST_SCHEME_HEADER,\r\n        'version' => '1.0',\r\n        'consumerKey' => $CONSUMER_KEY,\r\n        'consumerSecret' => $CONSUMER_SECRET,\r\n        'signatureMethod' => 'HMAC-SHA1',\r\n        'callbackUrl' => $siteurl . '\/wp-admin\/options-general.php?page=gdoc',\r\n        'requestTokenUrl' => 'https:\/\/www.google.com\/accounts\/OAuthGetRequestToken',\r\n        'userAuthorizationUrl' => 'https:\/\/www.google.com\/accounts\/OAuthAuthorizeToken',\r\n        'accessTokenUrl' => 'https:\/\/www.google.com\/accounts\/OAuthGetAccessToken',\r\n        'revokeTokenUrl' => 'https:\/\/www.google.com\/accounts\/accounts\/AuthSubRevokeToken',\r\n        'infoTokenUrl' => 'https:\/\/www.google.com\/accounts\/accounts\/AuthSubTokenInfo'\r\n    );\r\n $httpClient = $accessToken->getHttpClient($oauthOptions);\r\n $httpClient->setUri($oauthOptions['infoTokenUrl']);\r\n $request = $httpClient->request();\r\n{code} \r\n{code:html|title=non-working request and response|borderStyle=solid}\r\nGET \/accounts\/accounts\/AuthSubTokenInfo HTTP\/1.1\r\nHost: www.google.com\r\nConnection: close\r\nAccept-encoding: gzip, deflate\r\nUser-Agent: Zend_Http_Client\r\nAuthorization: OAuth realm=\"\",oauth_consumer_key=\"XXXXXXXXXXXXX\",oauth_nonce=\"dab469aa2b75d97dc58be287e0b79ad5\",oauth_signature_method=\"HMAC-SHA1\",oauth_timestamp=\"1287693001\",oauth_version=\"1.0\",oauth_token=\"1%2Fw_j0EtsMuAFY-QAd-sIHGwQfuFsMzpxdiO5ztMx3cEo\",oauth_signature=\"RNrBwDEU6Hu2f1t6%2FCzAMqv%2BRlk%3D\"\r\n\r\nHTTP\/1.1 401 Invalid AuthSub signature.\r\nContent-type: text\/html; charset=UTF-8\r\nDate: Thu, 21 Oct 2010 20:30:01 GMT\r\nExpires: Thu, 21 Oct 2010 20:30:01 GMT\r\nCache-control: private, max-age=0\r\nX-content-type-options: nosniff\r\nX-xss-protection: 1; mode=block\r\nServer: GSE\r\nConnection: close\r\n\r\n<HTML>\r\n<HEAD>\r\n<TITLE>Invalid AuthSub signature.<\/TITLE>\r\n<\/HEAD>\r\n<BODY BGCOLOR=\"#FFFFFF\" TEXT=\"#000000\">\r\n<H1>Invalid AuthSub signature.<\/H1>\r\n<H2>Error 401<\/H2>\r\n<\/BODY>\r\n<\/HTML>\r\n\r\n{code}\r\n\r\n*working case*\r\n{code:none|title=working code|borderStyle=solid}\r\n $oauthOptions = array(\r\n        'requestScheme' => Zend_Oauth::REQUEST_SCHEME_HEADER,\r\n        'version' => '1.0',\r\n        'consumerKey' => $CONSUMER_KEY,\r\n        'consumerSecret' => $CONSUMER_SECRET,\r\n        'signatureMethod' => 'HMAC-SHA1',\r\n        'callbackUrl' => $siteurl . '\/wp-admin\/options-general.php?page=gdoc',\r\n        'requestTokenUrl' => 'https:\/\/www.google.com\/accounts\/OAuthGetRequestToken',\r\n        'userAuthorizationUrl' => 'https:\/\/www.google.com\/accounts\/OAuthAuthorizeToken',\r\n        'accessTokenUrl' => 'https:\/\/www.google.com\/accounts\/OAuthGetAccessToken',\r\n        'revokeTokenUrl' => 'https:\/\/www.google.com\/accounts\/accounts\/AuthSubRevokeToken',\r\n        'infoTokenUrl' => 'https:\/\/www.google.com\/accounts\/accounts\/AuthSubTokenInfo'\r\n    );\r\n $httpClient = $accessToken->getHttpClient($oauthOptions);\r\n $httpClient->setUri($oauthOptions['infoTokenUrl']);\r\n $request = $httpClient->request('GET');\r\n{code} \r\n{code:html|title=working request and response|borderStyle=solid}\r\nGET \/accounts\/accounts\/AuthSubTokenInfo HTTP\/1.1\r\nHost: www.google.com\r\nConnection: close\r\nAccept-encoding: gzip, deflate\r\nUser-Agent: Zend_Http_Client\r\nAuthorization: OAuth realm=\"\",oauth_consumer_key=\"XXXXXXXXXXXX\",oauth_nonce=\"eb9745d4e9d5ae8db0a3f56d378ca704\",oauth_signature_method=\"HMAC-SHA1\",oauth_timestamp=\"1287693181\",oauth_version=\"1.0\",oauth_token=\"1%2Fw_j0EtsMuAFY-QAd-sIHGwQfuFsMzpxdiO5ztMx3cEo\",oauth_signature=\"iEOjFDEGsc64vDOx%2FbxsTdZBUVk%3D\"\r\n\r\nHTTP\/1.1 200 OK\r\nContent-type: text\/plain; charset=UTF-8\r\nDate: Thu, 21 Oct 2010 20:33:01 GMT\r\nExpires: Thu, 21 Oct 2010 20:33:01 GMT\r\nCache-control: private, max-age=0\r\nX-content-type-options: nosniff\r\nX-xss-protection: 1; mode=block\r\nServer: GSE\r\nConnection: close\r\n\r\nTarget=XXXXXXXXXXXXXXXXX\r\nSecure=true\r\nScope=http:\/\/docs.google.com\/feeds\/\r\nScope2=http:\/\/spreadsheets.google.com\/feeds\/\r\n\r\n{code}\r\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10587\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User"
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10490",
                    "id": 10490,
                    "description": "Mini Release",
                    "name": "1.10.8",
                    "userReleaseDate": "25\/Aug\/10",
                    "archived": false,
                    "releaseDate": "2010-08-25",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10015",
                    "id": 10015,
                    "name": "Zend_Http_Client",
                    "description": "performs HTTP requests",
                    "isAssigneeTypeValid": false
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10473",
                    "id": 10473,
                    "name": "Zend_Oauth",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/42655",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lancehudson",
                        "name": "lancehudson",
                        "displayName": "Lance Hudson",
                        "active": true
                    },
                    "body": "My assumption is the request is changing after it is signed if the method is not specified, or something along those lines?.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lancehudson",
                        "name": "lancehudson",
                        "displayName": "Lance Hudson",
                        "active": true
                    },
                    "created": "2010-10-21T13:37:30.000+0000",
                    "updated": "2010-10-21T13:37:30.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/42669",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                        "name": "shahar",
                        "displayName": "Shahar Evron",
                        "active": true
                    },
                    "body": "Can you print out and paste the value of $client->getLastRequest(); after each call so we can compare the requests?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                        "name": "shahar",
                        "displayName": "Shahar Evron",
                        "active": true
                    },
                    "created": "2010-10-22T08:29:17.000+0000",
                    "updated": "2010-10-22T08:29:17.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/42672",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lancehudson",
                        "name": "lancehudson",
                        "displayName": "Lance Hudson",
                        "active": true
                    },
                    "body": "In each of the two cases they have the print out from getLastRequest(), then following is the response.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lancehudson",
                        "name": "lancehudson",
                        "displayName": "Lance Hudson",
                        "active": true
                    },
                    "created": "2010-10-22T11:58:53.000+0000",
                    "updated": "2010-10-22T11:58:53.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10587\/transitions"
}