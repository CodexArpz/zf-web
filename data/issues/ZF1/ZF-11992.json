{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11992",
    "key": "ZF-11992",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Wrong date in Zend_Date"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11992\/votes",
                "votes": 1,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/11380",
                    "id": 11380,
                    "description": "Mini Release",
                    "name": "Next Mini Release",
                    "archived": false,
                    "released": false
                }
            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=blessed",
                "name": "blessed",
                "displayName": "Volodymyr Labo",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2012-01-12T14:26:07.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2013-03-13T20:55:21.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I have the code:\r\n$days = 12\r\n$today = new Zend_Date(date('Y-m-d'), 'YYYY-MM-dd');\r\n$minusTwoWeeks = $today->subDay($days);\r\necho date('Y-m-d', $minusTwoWeeks->toValue());\r\n\r\nToday is 2012-01-12\r\nSo I receive 2011-12-31 And it is correct.\r\nIf I change $days to 10, I receive 2012-01-02 and it is also correct. But if I change $days to 11 I receive 2011-01-02. The year is incorrect! I tried several times, the result was the same. Then I waited 15 minutes, after that everything became good. 2012-01-01. But why it has changed?"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11992\/watchers",
                "isWatching": false,
                "watchCount": 4
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/4",
                "name": "Reopened"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-12507",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-12507",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                },
                {
                    "issueKey": "ZF-12506",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-12506",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10470",
                    "id": 10470,
                    "description": "Mini Release",
                    "name": "1.10.6",
                    "userReleaseDate": "22\/Jun\/10",
                    "archived": false,
                    "releaseDate": "2010-06-22",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10072",
                    "id": 10072,
                    "name": "Zend_Date",
                    "description": "Zend_Date is the basic library for the handling of all date, time and calendar-related issues.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/49806",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "body": "Can you provide an exact date\/time (down to the second) at which is error occurs?  As you said it didn't recur when you tried again later, we'll need more than just the Ymd to dig deeper. ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "created": "2012-02-26T05:22:35.000+0000",
                    "updated": "2012-02-26T05:22:35.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/50085",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=kassner",
                        "name": "kassner",
                        "displayName": "Rafael Kassner",
                        "active": true
                    },
                    "body": "Just adding some example code that showing the problem http:\/\/pastebin.com\/MFgbuy5f\r\n\r\nThis problem appears only when we use the 1st day of the year.\r\n\r\nIt happens in 1.11.11 and 1.9.6 (don't bother, it was a old Magento Install).\r\n\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=kassner",
                        "name": "kassner",
                        "displayName": "Rafael Kassner",
                        "active": true
                    },
                    "created": "2012-03-20T21:14:29.000+0000",
                    "updated": "2012-03-20T21:14:29.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51084",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Fixed in trunk with r24880; will release with 1.12.0.\r\n\r\nBasically, Zend_Date converts all formats to ISO 8601 standards. This means that \"o\" is used for the year instead of \"Y\". If you look at http:\/\/php.net\/date you'll see an interesting note for \"o\" -- when the day of the week falls within the last _week_ of the previous year, \"o\" will evaluate to the previous year. As such, I've added a regex that will replace \"o\" with \"Y\" when not preceded by an escape, thus giving us the desired behavior.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2012-06-12T20:56:17.000+0000",
                    "updated": "2012-06-12T20:56:17.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/53040",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=pmoolenaar",
                        "name": "pmoolenaar",
                        "displayName": "Peter Moolenaar",
                        "active": true
                    },
                    "body": "Uhm, however that was expected behaviour! See the note just before http:\/\/framework.zend.com\/manual\/1.12\/en\/zend.date.constants.html#zend.date.constants.phpformats\r\n\r\nI've been looking all over for this 'suddenly' altered behaviour. I'm sticking with the manual that states that using uppercase Y's will return me the week-based ISO year.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=pmoolenaar",
                        "name": "pmoolenaar",
                        "displayName": "Peter Moolenaar",
                        "active": true
                    },
                    "created": "2013-01-12T15:42:49.000+0000",
                    "updated": "2013-01-12T15:42:49.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/53050",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=pmoolenaar",
                        "name": "pmoolenaar",
                        "displayName": "Peter Moolenaar",
                        "active": true
                    },
                    "body": "And, I'll add another comment to this one. I'd opened a new bug for this, however that got closed with the remark that the original one should be reopend. So, please do so. This implementation actually breaks my applications and it actually degrades my opinion of the stability of ZF since it doesn't even conform to its own manual anymore!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=pmoolenaar",
                        "name": "pmoolenaar",
                        "displayName": "Peter Moolenaar",
                        "active": true
                    },
                    "created": "2013-01-17T11:14:27.000+0000",
                    "updated": "2013-01-17T11:14:27.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/53051",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "body": "@Peter\r\nCan you help me and provide some examples which I can use for unit test? That would be great.\r\nI am very busy, because I work on the next release (1.12.2) and also on the ZF website.\r\n\r\nThanks in advance.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2013-01-17T11:32:27.000+0000",
                    "updated": "2013-01-17T11:32:27.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/53052",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=pmoolenaar",
                        "name": "pmoolenaar",
                        "displayName": "Peter Moolenaar",
                        "active": true
                    },
                    "body": "Sure, the test is quite simple (adhering to the manual that is :)).\r\n{quote}\r\n$date = new Zend_Date('2012-12-31');\r\necho $date->toString('c'); \/\/ ISO conforming string: 2012-12-31T00:00:00+01:00 (I'm in Europe\/Amsterdam tz)\r\n$calendarYear = $date->get(Zend_Date::YEAR); \/\/ Expect 2012\r\n$isoBasedYear = $date->get(Zend_Date::YEAR_8601); \/\/ Expect 2013\r\necho '<br \/>'.$calendarYear.' vs. '.$isoBasedYear;\r\n{quote}\r\nThe original mentioned problem is the other way around (the first day of 2012 (2012-01-01) falls in the last week of the previous year and should render '2012 vs. 2011'). However it is simply a misinterpretation of how the different tokens work. In the more elaborate example from pastebin he actually tests both uppercase and lowercase y and deduces that, without argumentation, they should actually be the same (with which I obviously disagree :)).",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=pmoolenaar",
                        "name": "pmoolenaar",
                        "displayName": "Peter Moolenaar",
                        "active": true
                    },
                    "created": "2013-01-17T11:48:09.000+0000",
                    "updated": "2013-01-17T11:48:09.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11992\/transitions"
}