{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2205",
    "key": "ZF-2205",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Can't load the language file correctly"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2205\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10140",
                    "id": 10140,
                    "description": "Mini Release",
                    "name": "1.0.3",
                    "userReleaseDate": "30\/Nov\/07",
                    "archived": true,
                    "releaseDate": "2007-11-30",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2007-11-21T07:06:44.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mikespook",
                "name": "mikespook",
                "displayName": "Xing Xing",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2007-11-14T19:58:01.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2007-11-21T07:06:44.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "My codes is:\n\n    public function testGetTextTw()\n    {\n        $t = new Zend_Translate('gettext', '.\/_locale\/', 'zh_TW');\n        $this->assertEquals('n2', $t->_('New'));\n    }\n\n    public function testGetTextCn()\n    {\n        $t = new Zend_Translate('gettext', '.\/_locale\/', 'zh_CN');\n\n        $this->assertEquals('n1', $t->_('New'));\n    }\n\nBut, the testGetTextCn() go into fail: expected string 'n1' but got string 'n2'.\n\nSo, I read the codes in Zend_Translate_Adapter::__construct(). \nthe param variable $local was covered by an other value.\n\nI made this patch:\n\nIndex: Adapter.php\n\n===================================================================\n\n--- Adapter.php\t(revision 6821)\n\n+++ Adapter.php\t(working copy)\n\n@@ -59,7 +59,7 @@\n\n      *\/\n     protected $_options = array(\n         'clear' => false, \/\/ clear previous loaded translation data\n-        'scan'  => null   \/\/ where to find the locale\n+        'scan'  => self::LOCALE_DIRECTORY,   \/\/ where to find the locale\n     );\n \n     \/**\n@@ -79,14 +79,14 @@\n\n      * @param  string|array        $options   Options for the adaptor\n      * @throws Zend_Translate_Exception\n      *\/\n-    public function __construct($data, $locale = null, array $options = array())\n+    public function __construct($data, $defaultLocale = null, array $options = array())\n     {\n-        if ($locale === null) {\n-            $locale = new Zend_Locale();\n+        if ($defaultLocale === null) {\n+            $defaultLocale = new Zend_Locale();\n         }\n-        if ($locale instanceof Zend_Locale) {\n-            $locale = $locale->toString();\n-        }\n+        if ($defaultLocale instanceof Zend_Locale) {\n+            $defaultLocale = $defaultLocale->toString();\n+        }  \n \n         $options = array_merge($this->_options, $options);\n         if (is_string($data) and is_dir($data)) {\n@@ -96,7 +96,7 @@\n\n                 if ($info->isDir()) {\n \n                     $directory = $info->getPath();\n-                    \/\/ pathname as locale\n+                    \/\/ pathname as localeself::LOCALE_DIRECTORY\n                     if (($options['scan'] === self::LOCALE_DIRECTORY) and (Zend_Locale::isLocale((string) $info))) {\n                         $locale = (string) $info;\n                     }\n@@ -126,8 +126,8 @@\n\n                     }\n                     try {\n                         $this->addTranslation((string) $info->getPathname(), $locale, $options);\n-                        if ((array_key_exists($locale, $this->_translate)) and (count($this->_translate[$locale]) > 0)) {\n-                            $this->setLocale($locale);\n+                        if ((array_key_exists($defaultLocale, $this->_translate)) and (count($this->_translate[$defaultLocale]) > 0)) {\n+                            $this->setLocale($defaultLocale);\n                         }\n                     } catch (Zend_Translate_Exception $e) {\n                         \/\/ ignore failed sources while scanning\n@@ -135,9 +135,9 @@\n\n                 }\n             }\n         } else {\n-            $this->addTranslation($data, $locale, $options);\n-            if ((array_key_exists($locale, $this->_translate)) and (count($this->_translate[$locale]) > 0)) {\n-                $this->setLocale($locale);\n+            $this->addTranslation($data, $defaultLocale, $options);\n+            if ((array_key_exists($defaultLocale, $this->_translate)) and (count($this->_translate[$defaultLocale]) > 0)) {\n+                $this->setLocale($defaultLocale);\n             }\n         }\n         $this->_automatic = true;\n\n\nNow, it works fine!\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2205\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10130",
                    "id": 10130,
                    "description": "Mini Release",
                    "name": "1.0.2",
                    "userReleaseDate": "25\/Sep\/07",
                    "archived": true,
                    "releaseDate": "2007-09-25",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10099",
                    "id": 10099,
                    "name": "Zend_Translate",
                    "description": "Provides translation functionality, based on standards such as TMX and Gettext.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/17551",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Not able to reproduce the problem...\n\nFalse initialisation and no translation file for verification given.\nThe given patch also introduces several other problems with tmx, xliff, array and others. Therefor we will not integrate it.\n\nIf you give all data we will look into the problem.\n\nWe need your default locale, the gettext files, the directory structure, the svn version, the OS, and 32\/64bit?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2007-11-15T03:14:39.000+0000",
                    "updated": "2007-11-15T03:14:39.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/17670",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Closing issue as there is no feedback.\n\nThe user just have to give the wished option instead of changing the class.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2007-11-21T07:06:44.000+0000",
                    "updated": "2007-11-21T07:06:44.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2205\/transitions"
}