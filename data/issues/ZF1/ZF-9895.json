{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9895",
    "key": "ZF-9895",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "change behaviour of isValid to no longer throw exceptins, but return generic error instead"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/2",
                "name": "New Feature",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9895\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/2",
                "name": "Won't Fix"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2010-08-12T07:15:30.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                "name": "bittarman",
                "displayName": "Ryan Mauger",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-05-26T14:16:06.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-08-12T07:15:32.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "the isValid method for validators should not thow exceptions, only return true, or false.\r\n\r\nAs such, the behaviour needs to be changed, to catch the exception, and return false, with a generic error set."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9895\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                "name": "bittarman",
                "displayName": "Ryan Mauger",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10140",
                    "id": 10140,
                    "name": "Zend_Validate",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40720",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Most validators do not throw exceptions anyways. The ones that do do so in exceptional circumstances -- missing DB connection, invalid query, etc. I think in these situations, a simple \"false\" return value would be quite a bad idea, as it could return a false negative, which is a potentially worse situation.\r\n\r\nCan you give some examples of where you would want this changed?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2010-05-27T04:04:35.000+0000",
                    "updated": "2010-05-27T04:04:35.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40736",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Actually no validator throws exceptions.\r\nThe idea is that isValid() only returns boolean and you don't need to cover all isValid calls with an catch statement. This was a real pain before 1.5.\r\n\r\nWhen I have a DB validator I can easily check the DB connection when I create the object. No need to throw an exception as this check is done before.\r\n\r\nWhen I attach a query there is no need to throw an exception... I could eighter check the query when I attach it and I could also return an false with the proper error-text. This is already done in several other validators.\r\n\r\nGenerally the idea is that all things which can throw an exception, should be checked before calling isValid() so no exception has to be thrown. In past this way was accepted and I changed all validators to behave this way. I remember that we had this discussion already about 1 year ago.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2010-05-27T12:03:53.000+0000",
                    "updated": "2010-05-27T12:03:53.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40739",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                        "name": "bittarman",
                        "displayName": "Ryan Mauger",
                        "active": true
                    },
                    "body": "There is actually another good reason for swallowing the exception, and producing a generic error fail case.\r\n\r\nThere are some circumstances, such as an overloaded db server, where everything can be done correctly, yet the query still fail.\r\n\r\nBecause of this, with the current nature of how DB exceptions are handled, it is impossible to selectively look for individual types of exception, to identify which ones are actually developer fault, and which are simply exceptional circumstance.\r\n\r\nBecause we cannot reliably check the type of exception raised, it would be incorrect to allow the exception to be raised, as under most circumstances, the developer would probably wish to simply allow the user to try again, rather than switching to a 501 page. This behavior change allows for this. With this consideration in place, I feel that a method to log the exception should be provided, so that debugging is much easier. To this end, I am of the mind that adding isException, and getException methods to allow the developer to test for, extract, and log the exception would be the most suitable case, and where other validators also swallow exceptions to the same end, perhaps this should be made consistent across the entire Zend_Validate namespace.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                        "name": "bittarman",
                        "displayName": "Ryan Mauger",
                        "active": true
                    },
                    "created": "2010-05-27T12:16:13.000+0000",
                    "updated": "2010-05-27T12:16:13.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40749",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=norm2782",
                        "name": "norm2782",
                        "displayName": "Jurrien Stutterheim",
                        "active": true
                    },
                    "body": "Trying to summarize a discussion we just had on IRC.\r\nThe way I see it:\r\n\r\n- A validator should only return a boolean value\r\n- Unless an exception is thrown, for example, by a database operation. In that case, the exception should bubble up to user code can be caught there. It is an exceptional state of the program after all. There is no more need for the result of the validation, as it won't ever return the representative boolean value; the actual validation never occurred. \r\n- Implication of this is that, yes, you do need try\/catch blocks around isValid() calls that can potentially throw exceptions. There is no need to try and hide perfectly normal language behavior and constructs.\r\n- Hiding exceptions by silently discarding them in the background is unwanted. It makes debugging and graceful error handling significantly harder, and it negates the role that exceptions play in the first place.\r\n- Separation of concerns needs to be kept in mind. Validators should validate, database connections should try and make connections to a database, try\/catch blocks should catch exceptions, and logging facilities should log exceptions. Don't try to put this all in the validator.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=norm2782",
                        "name": "norm2782",
                        "displayName": "Jurrien Stutterheim",
                        "active": true
                    },
                    "created": "2010-05-28T03:57:34.000+0000",
                    "updated": "2010-05-28T04:01:34.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40795",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alab",
                        "name": "alab",
                        "displayName": "Christian Albrecht",
                        "active": true
                    },
                    "body": "Although I am able to see the benefits for Form Validation and User Experience,\r\nI am against adding more responsibilities to Zend_Form. Especially since a goal\r\nfor Zend_Form-2.0 is to separate concerns and decouple Zend_Validate from it.\r\n\r\nImho, it would be better to create a Zend_Db_ExceptionLogger Interface and Class\r\nwhich when activated prevents throwing Exceptions - instead logs them, and make \r\nZend_Db return appropriate null|false values.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alab",
                        "name": "alab",
                        "displayName": "Christian Albrecht",
                        "active": true
                    },
                    "created": "2010-05-30T16:17:46.000+0000",
                    "updated": "2010-05-30T16:25:25.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40800",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alab",
                        "name": "alab",
                        "displayName": "Christian Albrecht",
                        "active": true
                    },
                    "body": "Duhh, forget my last sentence in the previous comment, that would \r\nnot give a meaningful Error Message to the user, I figured.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alab",
                        "name": "alab",
                        "displayName": "Christian Albrecht",
                        "active": true
                    },
                    "created": "2010-05-31T01:09:59.000+0000",
                    "updated": "2010-05-31T01:09:59.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/41961",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                        "name": "bittarman",
                        "displayName": "Ryan Mauger",
                        "active": true
                    },
                    "body": "Largely decided that this should not be the case after much debate on IRC.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                        "name": "bittarman",
                        "displayName": "Ryan Mauger",
                        "active": true
                    },
                    "created": "2010-08-12T07:15:31.000+0000",
                    "updated": "2010-08-12T07:15:31.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9895\/transitions"
}