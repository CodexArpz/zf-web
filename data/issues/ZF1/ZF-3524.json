{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3524",
    "key": "ZF-3524",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Updating from a row returned by Zend_Db_Table_Abstract::createRow()"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3524\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/2",
                "name": "Won't Fix"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10440",
                    "id": 10440,
                    "description": "Mini Release",
                    "name": "1.10.3",
                    "userReleaseDate": "01\/Apr\/10",
                    "archived": false,
                    "releaseDate": "2010-04-01",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2010-02-24T09:06:21.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=elazar",
                "name": "elazar",
                "displayName": "Matthew Turland",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-06-26T14:13:08.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-02-24T09:06:21.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Row instances created using Zend_Db_Table_Abstract::createRow() currently cannot be updated using Zend_Db_Table_Row_Abstract::save() because createRow() automatically sets the 'stored' flag passed to Zend_Db_Table_Row_Abstract::__construct() to false.\n\ncreateRow() and the row constructor appear to be the only two entry points for introducing data into a row instance such that it will issue an update query when save() is called. This means there are only two available approaches to issue an update:\n\n1) Call update() on the associated table object with a manually constructed WHERE clause specifying the primary key for the record to be updated. \n\n2) Manually instantiate the row class and passing the 'stored' flag to its constructor so as to avoid the current limitation of createRow.\n\nBoth approaches work, but are more tedious than the alternative of allowing the developer to set the 'stored' flag in the createRow call. I propose adding an additional parameter to createRow() that defaults to false (for backward compatibility). Passing in true would cause createRow() to determine the value it passes in for the 'stored' flag based on the presence of primary key column values in its $data parameter."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/6",
                "name": "N\/A"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3524\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                "name": "ralph",
                "displayName": "Ralph Schindler",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10181",
                    "id": 10181,
                    "description": "Mini Release",
                    "name": " 1.5.2",
                    "userReleaseDate": "15\/May\/08",
                    "archived": true,
                    "releaseDate": "2008-05-15",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10133",
                    "id": 10133,
                    "name": "Zend_Db_Table",
                    "description": "Lightweight OO interface to database tables and rowsets.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28067",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "Please help me to understand a bit better.  When you call createRow(), the row is not stored in the database yet.  When you call save() on the newly created row, it should do the insert, not the update as the row does not yet exist in the database.\n\nSo currently, im just a little confused what the improvement should be.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2009-01-11T21:11:17.000+0000",
                    "updated": "2009-01-11T21:11:17.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28071",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=elazar",
                        "name": "elazar",
                        "displayName": "Matthew Turland",
                        "active": true
                    },
                    "body": "The point is, there's no way to update a row without calling underlying code that issues a SELECT query to retrieve that data. The described change would alleviate the need for this SELECT query in cases where data for the UPDATE query to be issued, including a primary key value to be used in the WHERE clause to identify the row, is already available in the script without having to issue the SELECT first (ex: form submission used to update the existing record).",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=elazar",
                        "name": "elazar",
                        "displayName": "Matthew Turland",
                        "active": true
                    },
                    "created": "2009-01-11T21:22:33.000+0000",
                    "updated": "2009-01-11T21:22:33.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37087",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mluiten",
                        "name": "mluiten",
                        "displayName": "Menno Luiten",
                        "active": true
                    },
                    "body": "I think the proposal is to let createRow(), which currently represents a non-saved, new row, too optionally also represent an existing row. So you can get a workflow like\r\n{code}\r\n$updateRow = $table->createRow(array(), null, true); \/\/ third param represents _stored = true\r\n$updateRow->bug_id = 62;\r\n$updateRow->bug_description = 'Foobar';\r\n$updateRow->save(); \/\/ executes UPDATE on bug_id = 62 to set bug_description to \"Foobar\".\r\n{code}\r\n\r\nAm I correct in this assumption? If so, don't think it fits in the design of Row, since it handles updates etc from 'known values'. Instead a workflow like\r\n{code}\r\n$updateData = $updateWhere = array();\r\n$updateData['bug_description'] = 'Foobar'; \r\n$updateWhere['bug_id = ?'] = 62\r\n\r\n$table->update($updateData, $updateWhere);\r\n{code}\r\nShould work fine as a 'workaround'.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mluiten",
                        "name": "mluiten",
                        "displayName": "Menno Luiten",
                        "active": true
                    },
                    "created": "2009-12-20T04:28:56.000+0000",
                    "updated": "2009-12-20T04:28:56.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38718",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=elazar",
                        "name": "elazar",
                        "displayName": "Matthew Turland",
                        "active": true
                    },
                    "body": "Ralph and I have discussed this and decided it's not a needed changing. Resolving this issue as a result.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=elazar",
                        "name": "elazar",
                        "displayName": "Matthew Turland",
                        "active": true
                    },
                    "created": "2010-02-24T09:06:21.000+0000",
                    "updated": "2010-02-24T09:06:21.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3524\/transitions"
}