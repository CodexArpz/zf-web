{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7195",
    "key": "ZF-7195",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Controller_Action_Helper_ViewRenderer : missing path bug"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7195\/votes",
                "votes": 2,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/2",
                "name": "Won't Fix"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2012-11-20T20:52:41.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=amazium",
                "name": "amazium",
                "displayName": "Jeroen Keppens",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-07-05T04:58:33.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-11-20T20:52:41.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Hi,\n\nI had following error occur after my application threw an exception from one of my modules:\n\nFatal error: Uncaught exception 'Zend_View_Exception' with message 'script 'error\/error.phtml' not found in path (\/mnt\/hgfs\/amazium\/Dmc\/application\/views\/layouts\/:\/mnt\/hgfs\/amazium\/Dmc\/application\/modules\/system\/views\/scripts\/)' in \/mnt\/hgfs\/amazium\/Dmc\/library\/Zend\/View\/Abstract.php:925 Stack trace: #0 \/mnt\/hgfs\/amazium\/Dmc\/library\/Zend\/View\/Abstract.php(828): Zend_View_Abstract->_script('error\/error.pht...') #1 \/mnt\/hgfs\/amazium\/Dmc\/library\/Zend\/Controller\/Action\/Helper\/ViewRenderer.php(903): Zend_View_Abstract->render('error\/error.pht...') #2 \/mnt\/hgfs\/amazium\/Dmc\/library\/Zend\/Controller\/Action\/Helper\/ViewRenderer.php(924): Zend_Controller_Action_Helper_ViewRenderer->renderScript('error\/error.pht...', NULL) #3 \/mnt\/hgfs\/amazium\/Dmc\/library\/Zend\/Controller\/Action\/Helper\/ViewRenderer.php(963): Zend_Controller_Action_Helper_ViewRenderer->render() #4 \/mnt\/hgfs\/amazium\/Dmc\/library\/Zend\/Controller\/Action\/HelperBroker.php(276): Zend_Controller_Action_Helper_ViewRenderer->postDispatch() #5 \/mnt\/hgfs\/amazium\/Dmc\/library\/Zend\/Co in \/mnt\/hgfs\/amazium\/Dmc\/library\/Zend\/View\/Abstract.php on line 925\n\nThe problem was solved by adding an error\/error.phtml file to my module's views script folder. This is not a good solution though since it would mean you have to add this for every module you have. I investigated the issue, and found the problem.\n\nMy Layout path is defined in application.ini as such:\n\nresources.layout.layoutPath                     = APPLICATION_PATH \"\/views\/layouts\"\n\nThis path is added to my views script paths.\n\nWhen the viewrenderer action helper tries to determine the script paths (initView), it uses strstr to determine if a script path already exists:\n\nI have defined my layouts dir as being APPLICATION_PATH \"\/views\/layouts\". This works very well, until you encounter an error in one of your modules. \n\nZend_Controller_Action_Helper_ViewRenderer::initView\n\n        \/\/ Determine if this path has already been registered\n        $currentPaths = $this->view->getScriptPaths();\n        $path         = str_replace(array('\/', '\\\\'), '\/', $path);\n        $pathExists   = false;\n        foreach ($currentPaths as $tmpPath) {\n            echo $tmpPath = str_replace(array('\/', '\\\\'), '\/', $tmpPath);\n            echo \"<br\/>\";\n            if (strstr($tmpPath, $path)) {\n                $pathExists = true;\n                break;\n            }\n        }\n        if (!$pathExists) {\n            $this->view->addBasePath($path, $prefix);\n        }\n\nNow, this is not good! Strstr will not add the path if a subdirectory was added (i.e. the layout path). Strstr will determine that the path exists and don't add the script path. My module will throw an error, the error controller from the default module will be called and the view rendering fails because the default view script path is not in the list of paths.\n\nFor now, I've thrown out the layouts directory out of my views, but this looks like a bug... if it's intended behaviour, please let me know why and ignore the bug report :)\n\nJeroen"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7195\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/6",
                "name": "Closed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User"
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10026",
                    "id": 10026,
                    "name": "Zend_View",
                    "description": "View portion of the ZF MVC",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33025",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jakemcgraw",
                        "name": "jakemcgraw",
                        "displayName": "Jake McGraw",
                        "active": true
                    },
                    "body": "Exact same issue, calling the following from Module_MyController::init() doesn't fix issue either:\n\n$this->_frontController->getPlugin('Zend_Controller_Plugin_ErrorHandler')->setErrorHandlerModule('default');\n\nI guess I'll be moving my layout directory out of my default views directory.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jakemcgraw",
                        "name": "jakemcgraw",
                        "displayName": "Jake McGraw",
                        "active": true
                    },
                    "created": "2009-07-29T10:41:06.000+0000",
                    "updated": "2009-07-29T10:41:06.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/52401",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rob",
                        "name": "rob",
                        "displayName": "Rob Allen",
                        "active": true
                    },
                    "body": "Bulk change of all issues last updated before 1st January 2010 as \"Won't Fix\".\r\n\r\nFeel free to re-open and provide a patch if you want to fix this issue.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rob",
                        "name": "rob",
                        "displayName": "Rob Allen",
                        "active": true
                    },
                    "created": "2012-11-20T20:52:41.000+0000",
                    "updated": "2012-11-20T20:52:41.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7195\/transitions"
}