{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-12445",
    "key": "ZF-12445",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Mail Header Bug for Linux Machines for ZF 2.0"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-12445\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/8",
                "name": "Issue Moved"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2012-10-22T11:55:18.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=nikeshhajari",
                "name": "nikeshhajari",
                "displayName": "Nikesh Hajari",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2012-10-17T15:31:38.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-10-22T11:55:18.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "zend_mail"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Hello,\r\n\r\nI have noticed an issue when sending e-mails the headers show up in the e-mail itself. I looked at the EOL character used in the Zend\\Mail\\Headers class (constant EOL = \\r\\n) which is perfectly for Windows, but when sending an e-mail with this line break I get the following output in the actual email:\r\n\r\nReply-To: My Test Email <test@myemail.com>\r\n\r\nFrom: John Doe <john@stuff.com>\r\n\r\nHello\r\n\r\nWhen the constant is changed to \\n ONLY then the output shows up normal (Just Hello). In other words this \\r character is causing the headers to show up as plain text in the message body.\r\n\r\nMy suggestion is to used the PHP_EOL constant so it is automatically adjusted for each platform automatically.\r\n\r\nhttp:\/\/stackoverflow.com\/questions\/128560\/when-do-i-use-the-php-constant-php-eol\r\n\r\nThanks,\r\nNikesh"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-12445\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/6",
                "name": "Closed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [
                "zend_mail"
            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                "name": "frosch",
                "displayName": "Frank Br\u00fcckner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/11183",
                    "id": 11183,
                    "description": "Minor Release",
                    "name": "Next Minor Release",
                    "archived": false,
                    "released": false
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10160",
                    "id": 10160,
                    "description": "Major Release",
                    "name": "Next Major Release",
                    "archived": false,
                    "released": false
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10018",
                    "id": 10018,
                    "name": "Zend_Mail",
                    "description": "high-level utility to build MIME-compliant messages and send using a mail transport adapter",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/52136",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=nikeshhajari",
                        "name": "nikeshhajari",
                        "displayName": "Nikesh Hajari",
                        "active": true
                    },
                    "body": "Hello,\r\n\r\nI have figured out more. \r\n\r\nChanging line 31 in Zend\\Mail\\Headers from:\r\n\r\nconst EOL = \"\\r\\n\";\r\n\r\nTO\r\n\r\nconst EOL = PHP_EOL;\r\n\r\nwill successfully allow me to send e-mails without the above problem occuring.\r\n\r\nThe following code now works normally:\r\n\r\n\r\n\t\t$m = new \\Zend\\Mail\\Message();\r\n\t\t$m->addFrom('test@me.com', 'Jane Doe')\r\n\t \t  ->addTo('test@you.com', 'John Doe')\r\n\t\t  ->setSubject('Test');\r\n\r\n\r\n\t\t$bodyPart = new \\Zend\\Mime\\Message();\r\n\r\n\t\t$bodyMessage = new \\Zend\\Mime\\Part($html);\r\n\t\t$bodyMessage->type = 'text\/html';\r\n\r\n\t\t$bodyPart->setParts(array($bodyMessage));\r\n\r\n\t\t$m->setBody($bodyPart);\r\n\r\nCurrently, trying to figure out:\r\n\r\nwhen adding ->setEncoding('UTF-8') and HTML message shows shows up as a mime-attachment. \r\n\r\n-Nikesh\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=nikeshhajari",
                        "name": "nikeshhajari",
                        "displayName": "Nikesh Hajari",
                        "active": true
                    },
                    "created": "2012-10-17T16:31:50.000+0000",
                    "updated": "2012-10-17T16:31:50.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/52137",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=nikeshhajari",
                        "name": "nikeshhajari",
                        "displayName": "Nikesh Hajari",
                        "active": true
                    },
                    "body": "Figured It Out:\r\n\r\nThis code here correctly works (UTF-8, HTML E-mail)\r\n\r\n$m = new \\Zend\\Mail\\Message();\r\n\t\t$m->addFrom('sam@test.edu', 'Sam John')\r\n\t \t  ->addTo('john@test.edu', 'John Doe')\r\n\t\t  ->setSubject('Test');\r\n\r\n\t\t$bodyPart = new \\Zend\\Mime\\Message();\r\n\r\n\t\t$bodyMessage = new \\Zend\\Mime\\Part($html);\r\n\t\t$bodyMessage->type = 'text\/html';\r\n\r\n\t\t$bodyPart->setParts(array($bodyMessage));\r\n\r\n\t\t$m->setBody($bodyPart);\r\n\t\t$m->setEncoding('UTF-8');\r\n\r\n\r\nNOTE: If the $m->setEncoding('UTF-8') is called BEFORE setting the body the message will not show up correctly.\r\n\r\nTwo things needs to be fixed:\r\n\r\n1. PHP_EOL compatibility across all systems\r\n2. You should be able to call setEncoding('UTF-8') at anytime before sending the e-mail.\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=nikeshhajari",
                        "name": "nikeshhajari",
                        "displayName": "Nikesh Hajari",
                        "active": true
                    },
                    "created": "2012-10-17T16:49:08.000+0000",
                    "updated": "2012-10-17T16:49:08.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/52142",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "body": "Please report ZF2 issues at https:\/\/github.com\/zendframework\/zf2\/issues",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2012-10-22T11:55:18.000+0000",
                    "updated": "2012-10-22T11:55:18.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-12445\/transitions"
}