{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2900",
    "key": "ZF-2900",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Issue on Zend_Validate_Hostname"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField",
            "value": {
                "timeoriginalestimate": 300,
                "timeestimate": 150,
                "timespent": 150
            }
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2900\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10241",
                    "id": 10241,
                    "description": "Minor Release",
                    "name": "1.8.0",
                    "userReleaseDate": "30\/Apr\/09",
                    "archived": false,
                    "releaseDate": "2009-04-30",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-05-13T12:17:51.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=nios",
                "name": "nios",
                "displayName": "Seokjae Yun",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-03-17T12:04:08.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-06-03T04:00:03.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Exception\n--------------\nfopen(Zend\/Validate\/Hostname\/Net.php): failed to open stream: No such file or directory on Loader.php, Line 160\n\n#0 \/www\/security.playxp.com\/includes\/Zend\/Loader.php(160): Handler::Error(2, 'fopen(Zend\/Vali...', '\/www\/security.p...', 160, Array)\n#1 \/www\/security.playxp.com\/includes\/Zend\/Validate\/Hostname.php(327): Zend_Loader::isReadable('Zend\/Validate\/H...', 'r', true)\n#2 \/www\/security.playxp.com\/includes\/Zend\/Uri\/Http.php(354): Zend_Validate_Hostname->isValid('Zend\/Validate\/H...')\n#3 \/www\/security.playxp.com\/includes\/Zend\/Uri\/Http.php(185): Zend_Uri_Http->validateHost('openid.daum.net')\n#4 \/www\/security.playxp.com\/includes\/Zend\/Uri\/Http.php(96): Zend_Uri_Http->valid()\n#5 \/www\/security.playxp.com\/includes\/Zend\/Uri.php(117): Zend_Uri_Http->__construct()\n#6 \/www\/security.playxp.com\/includes\/Zend\/Http\/Client.php(223): Zend_Uri::factory('http', '\/\/openid.daum.n...')\n#7 \/www\/security.playxp.com\/includes\/Zend\/Http\/Client.php(209): Zend_Http_Client->setUri('http:\/\/openid.d...')\n#8 \/www\/security.playxp.com\/includes\/Zend\/OpenId\/Consumer.php(406): Zend_Http_Client->__construct('http:\/\/openid.d...')\n#9 \/www\/security.playxp.com\/includes\/Zend\/OpenId\/Consumer.php(607): Zend_OpenId_Consumer->_httpRequest('http:\/\/openid.d...', Array)\n#10 \/www\/security.playxp.com\/includes\/Zend\/OpenId\/Consumer.php(694): Zend_OpenId_Consumer->_discovery('http:\/\/openid.d...')\n#11 \/www\/security.playxp.com\/includes\/Zend\/OpenId\/Consumer.php(131): Zend_OpenId_Consumer->_checkId('http:\/\/openid.d...', NULL, NULL)\n#12 \/www\/security.playxp.com\/htdocs\/login.php(23): Zend_OpenId_Consumer->login(false, 'openid.daum.net...', 'http:\/\/security...', 'http:\/\/*.playxp...', NULL, NULL)\n#13 \/www\/security.playxp.com\/htdocs\/processor.php(18): require('\/www\/security.p...')\n#14 {main}\n\n\n\n\nFrontend(login.php) source-code are below...\n\n$consumer = new Zend_OpenId_Consumer();\nif ($consumer->login($strIdentifier, 'http:\/\/security.playxp.com\/openid', 'http:\/\/*.playxp.com') === false)\n{\n\u3000$status = \"OpenID login failed.<br>\";\n}\n\n\n\ninclude_path = .:\/www\/security.playxp.com\/includes\/:\/www\/security.playxp.com\/templates\/\n\n \n\nThe Zend is installed on \/www\/security.playxp.com\/includes\/Zend.\nTested $strIdentifier are \"openid.daum.net\/nios\" and \"nios.myid.net\"."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/1",
                "name": "Blocker"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/customFieldOption\/10037",
                "value": "   Must Have"
            }
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2900\/watchers",
                "isWatching": false,
                "watchCount": 5
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/worklog\/21744",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2900",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yoshida@zend.co.jp",
                        "name": "yoshida@zend.co.jp",
                        "displayName": "old of Satoru Yoshida",
                        "active": true
                    },
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yoshida@zend.co.jp",
                        "name": "yoshida@zend.co.jp",
                        "displayName": "old of Satoru Yoshida",
                        "active": true
                    },
                    "comment": "",
                    "created": "2008-11-07T18:26:10.000+0000",
                    "updated": "2008-11-07T18:26:10.000+0000",
                    "started": "2008-11-07T18:25:00.000+0000",
                    "minutesSpent": 150
                }
            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-3020",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3020",
                    "type": {
                        "name": "Related",
                        "direction": "OUTBOUND",
                        "description": "is related to"
                    }
                },
                {
                    "issueKey": "ZF-5925",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5925",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                },
                {
                    "issueKey": "ZF-3989",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3989",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                },
                {
                    "issueKey": "ZF-4410",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4410",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                },
                {
                    "issueKey": "ZF-4267",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4267",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10171",
                    "id": 10171,
                    "description": "Minor Release Candidate",
                    "name": "1.5.0RC1",
                    "userReleaseDate": "26\/Feb\/08",
                    "archived": true,
                    "releaseDate": "2008-02-26",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10001",
                    "id": 10001,
                    "name": "Zend_Loader",
                    "isAssigneeTypeValid": false
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10140",
                    "id": 10140,
                    "name": "Zend_Validate",
                    "isAssigneeTypeValid": false
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10027",
                    "id": 10027,
                    "name": "Zend_XmlRpc_Client",
                    "description": "remote procedure calling using HTTP as the transport and XML as the encoding",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/25512",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yoshida@zend.co.jp",
                        "name": "yoshida@zend.co.jp",
                        "displayName": "old of Satoru Yoshida",
                        "active": true
                    },
                    "body": "I think there is problem in isValid($value) function in Zend\/Validate\/Hostname.php  .\n\nIf you use a top level domain name that are not in \/Zend\/Validate\/Hostname directory but exists in $_validTlds array , this problem will happen.\n\nI think default php file  should exists in Zend\/Validate\/Hostname directory.\n\nThe default php file  should work if there is not php file to match the top level domain name.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yoshida@zend.co.jp",
                        "name": "yoshida@zend.co.jp",
                        "displayName": "old of Satoru Yoshida",
                        "active": true
                    },
                    "created": "2008-10-29T21:42:46.000+0000",
                    "updated": "2008-10-29T21:42:46.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/25513",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "Can someone please confirm whether this is an active problem or not? The linked case ZF-4110 which appears to be the same issue is marked as closed.\n\nLine 327 in Validate\/Hostname.php is supposed to use Zend_Loader::isReadable() to ensure the class file exists before loading it. This report appears to indicate this isn't working and its trying to load the class file anyway. Which obviously isn't good!\n\nI added a test locally to replicate how Zend_Uri_Http::validateHost() accesses Validate_Hostname and I couldn't replicate this issue at present\n\nAs a note it may be worth wrapping Zend_Loader::loadClass on line 331 of Validate\/Hostname.php within a try\/catch to capture this kind of error. If anyone thinks this is a good idea I can do so.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2008-10-30T03:08:40.000+0000",
                    "updated": "2008-10-30T03:08:40.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/25514",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "I meant the linked case ZF-4410",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2008-10-30T03:09:20.000+0000",
                    "updated": "2008-10-30T03:09:20.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/25515",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yoshida@zend.co.jp",
                        "name": "yoshida@zend.co.jp",
                        "displayName": "old of Satoru Yoshida",
                        "active": true
                    },
                    "body": "Hello, Simon.\nI do not mean this issue is fixed.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yoshida@zend.co.jp",
                        "name": "yoshida@zend.co.jp",
                        "displayName": "old of Satoru Yoshida",
                        "active": true
                    },
                    "created": "2008-10-30T03:36:55.000+0000",
                    "updated": "2008-10-30T03:36:55.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/25516",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "Thanks Satoru,\nI see now case ZF-4410 was closed since it is a duplicate. I'll try to replicate this using your code example.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2008-10-30T03:44:34.000+0000",
                    "updated": "2008-10-30T03:44:34.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/25544",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yoshida@zend.co.jp",
                        "name": "yoshida@zend.co.jp",
                        "displayName": "old of Satoru Yoshida",
                        "active": true
                    },
                    "body": "Solved in SVN r12211. \nIf the file is not found in Zend\/Validate\/Hostname directory,\nZend\/Validate\/Hostname.php does not load additional characters.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yoshida@zend.co.jp",
                        "name": "yoshida@zend.co.jp",
                        "displayName": "old of Satoru Yoshida",
                        "active": true
                    },
                    "created": "2008-10-30T21:47:06.000+0000",
                    "updated": "2008-10-30T21:47:06.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/25546",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "Thanks for solving this Satoru,\n\nFirstly, forgive my possible misunderstanding but I couldn't replicate this issue and I don't understand how enclosing Zend_Loader::isReadable() in a try\/catch statement solves this. \n\nFrom what I can see Zend_Loader::isReadable() doesn't throw any exceptions, it supresses any PHP errors in fopen() and returns a boolean which states whether the file can be opened with fopen() or not. It sounds as if this wasn't working for you and an exception was thrown by Zend_Loader. Is this the case? If so, I wonder if this affects other parts of ZF. I'd suggest we look to fix this in Zend_Loader::isReadable() if that is where the error lies. \n\nFinally, would it be wise to add a unit test to HostnameTest.php to check that this issue is solved for any future changes?\n\nbest wishes,\nSimon\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2008-10-31T03:48:54.000+0000",
                    "updated": "2008-10-31T03:48:54.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/25549",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yoshida@zend.co.jp",
                        "name": "yoshida@zend.co.jp",
                        "displayName": "old of Satoru Yoshida",
                        "active": true
                    },
                    "body": "Hello, Simon.\n\nThank you.  I forgot fopen() happens no exception but warning.\n\nI propose SVN r12214 that I change Zend_Loader::isReadable() to file_exists() in it.\n\nAbout unit test, we should prepare test against Zend\/Validate\/Hostname\/Xxxx.php in HostnameTest.php.\n\nBest Regards,\nSatoru ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yoshida@zend.co.jp",
                        "name": "yoshida@zend.co.jp",
                        "displayName": "old of Satoru Yoshida",
                        "active": true
                    },
                    "created": "2008-10-31T08:01:55.000+0000",
                    "updated": "2008-10-31T08:01:55.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/25550",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "Firstly, I'll re-open this issue at present since it seems as if there is some uncertainty as to whether this is fixed or where the problem lies. Feel free to re-close if you think its right to do so :-)\n\nI'm happy to look into this over the weekend since I wrote the hostname validator so I should be able to fix this (I hope!). I can also see other related\/duplicated issues so I can look into them for further testing.\n\nAnyway..\n\nThanks for the response Satoru, that's what I thought and since the warning is being supressed with @ the function simply returns false on an error.\n\nI believe fopen() is used because it also searches on the include path. file_exists() does not, so this functionality would need to be replicated if this was changed.\n\nHowever, I have struggled a little to replicate this issue so it's a little difficult to suggest how to fix it. \n\nFrom my tests Zend_Loader::isReadable() doesn't raise an exception and works as expected. I haven't tried your code exactly yet (I know I should) but if I trace the code in Zend_OpenID_Consumer it calls Zend_Uri_Http which calls Zend_Validate_Hostname with the ALLOW_ALL option.\n\nif I add test code to test the two domains you mention then these pass the unit test and do not report an error. For example:\n\n{code}\n    public function testFromZendUriHttp ()\n    {\n        $valuesExpected = array(\n            array(Zend_Validate_Hostname::ALLOW_ALL, true, array('openid.daum.net', 'nios.myid.net'))\n        );\n        foreach ($valuesExpected as $element) {\n            $validator = new Zend_Validate_Hostname($element[0]);\n            foreach ($element[2] as $input) {\n                $this->assertEquals($element[1], $validator->isValid($input), implode(\"\\n\", $validator->getMessages()));\n            }\n        }\n    }\n{code}\n\nI'll try to get your test code working, but I'll have to change it to use a public OpenID provider such as www.chi.mp since I obviously don't have an acount at playxp.com\n\nbest wishes,\nSimon",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2008-10-31T08:31:51.000+0000",
                    "updated": "2008-10-31T08:31:51.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/25579",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "Satoru, \n\nCan you please confirm whether you have custom error handling in your test script. If so, I think I know the source of your problem. \n\nIf not, can you post your complete test script since I've not been able to replicate this issue.\n\nIf custom error handling is used then all errors, even those suppressed with an @, are sent to your custom error handler. Since Zend_Loader uses fopen with errors suppressed to check whether a file exists, this is most likely causing the issue in your script. I assume you have custom error handling since Zend_Loader doesn't throw an exception on that line, just a suppressed PHP error.\n\nThe PHP manual states you should check the value of error_reporting(), if this is zero then the error was suppressed with @ and you should take appropriate action (i.e. ignore it).\n\nFrom the manual -\n\n{quote}\n..you are still able to read the current value of error_reporting and act appropriately. Of particular note is that this value will be 0 if the statement that caused the error was prepended by the @ error-control operator\n\nhttp:\/\/uk3.php.net\/set_error_handler\n{quote}\n\nThe @ error supression operator appears to be widely used throughout Zend Framework so I don't recommend the Zend_Loader functionality is changed.\n\nThe solution is to supress error code zero (0) errors from any custom error handling. It may also be wise to add a note in the documentation or a Submit a Bug FAQ page (if there is one) about this since it seems to be tripping people up. \n\nAs far as I can see this affects the following issues: \n* ZF-3020\n* ZF-3829\n* ZF-3989 \n* ZF-4267\n* ZF-4410\n\nI can close all these off if people are happy this is the explanation!\n\nFinally, I recommend the changes made to Zend\/Validate\/Hostname.php in revision 12211  are undone since there the code that was changed seems to be unnecessary since the bug is due to the use of custom error handling, not Zend_Hostname or Zend_Loader\n\nbest wishes,\nSimon",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2008-11-02T07:11:01.000+0000",
                    "updated": "2008-11-02T07:11:01.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/25624",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yoshida@zend.co.jp",
                        "name": "yoshida@zend.co.jp",
                        "displayName": "old of Satoru Yoshida",
                        "active": true
                    },
                    "body": "Hi, Simon.\nThank you for your research and explanation.\n\nI wondered why fopen() with at mark happens in ver. 1.6.1 that is used with ZF-4410.\nBecause I did not find any warning in my tests with ver.1.6.1 and 1.6.2\n\nI understand what causes the warning. \n\nI agree that SVN r12211 is unnecessary and I just change  back the Zend\/Validate\/Hostname.php to same as SVN r10523 .\n\nIf you want, you can close this issue.\n\nBest Wishes\nSatoru Yoshida.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yoshida@zend.co.jp",
                        "name": "yoshida@zend.co.jp",
                        "displayName": "old of Satoru Yoshida",
                        "active": true
                    },
                    "created": "2008-11-03T04:44:47.000+0000",
                    "updated": "2008-11-03T04:44:47.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/25630",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yoshida@zend.co.jp",
                        "name": "yoshida@zend.co.jp",
                        "displayName": "old of Satoru Yoshida",
                        "active": true
                    },
                    "body": "Hi, Simon.\nI just closed the duplicated issues.\n\nAnd ZF-2985.\nBecause I think ZF-2985 also duplicates this issue.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yoshida@zend.co.jp",
                        "name": "yoshida@zend.co.jp",
                        "displayName": "old of Satoru Yoshida",
                        "active": true
                    },
                    "created": "2008-11-03T05:12:54.000+0000",
                    "updated": "2008-11-03T05:12:54.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/25914",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yoshida@zend.co.jp",
                        "name": "yoshida@zend.co.jp",
                        "displayName": "old of Satoru Yoshida",
                        "active": true
                    },
                    "body": "Hi, Simon.\nI wrote some note in phpDoc of Zend_Loader::isReadable in SVN r12399.\n\nI hope if users meet warning message, they could find the note.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yoshida@zend.co.jp",
                        "name": "yoshida@zend.co.jp",
                        "displayName": "old of Satoru Yoshida",
                        "active": true
                    },
                    "created": "2008-11-07T18:24:27.000+0000",
                    "updated": "2008-11-07T18:24:27.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/26221",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "Changing issues in preparation for the 1.7.0 release.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2008-11-13T14:10:12.000+0000",
                    "updated": "2008-11-13T14:10:12.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30920",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=chrispsm%26w",
                        "name": "chrispsm&w",
                        "displayName": "Christian Kissner",
                        "active": true
                    },
                    "body": "I am still seeing this issue in version 1.7.2. Another reporter has a duplicate open reporting it for 1.7.5. It crops up in many places where hostname validation is performed, e.g.  Zend_Validate_EmailAddress, Zend_XmlRpc_Client, ...\n\nTo be clear the issue is that warnings are being generated from the library code and suppressing error display is the wrong solution to fixing this. \n\nInstead loading a non-existent class should be prevented in the first place. The same for sending a hostname (instead of an IP) to inet_pton etc.\n\nWe have a zero-notice policy and this throws many false positives e.g. in our unit tests. So currently we have to use a custom solution to validate emails, send xmlrpc, use Gdata etc. \n\n\nSample code:\n<?php\nerror_reporting(E_ALL ^ E_STRICT ^ E_NOTICE);\nini_set('display_errors', 1);\n$service = new Zend_XmlRpc_Client('http:\/\/www.sikids.com\/services\/xmlrpc');\n$service->call('methodDoesNotExist',array());\n\t\t\n?>\n\nZend\/Validate\/Ip.php (Line 62): [E_WARNING(2)] inet_pton() [<a href='function.inet-pton'>function.inet-pton<\/a>]: Unrecognized address www.sikids.com\nZend\/Loader.php (Line 165): [E_WARNING(2)] fopen(Zend\/Validate\/Hostname\/Com.php) [<a href='function.fopen'>function.fopen<\/a>]: failed to open stream: No such file or directory\n    [filename] => Zend\/Validate\/Hostname\/Com.php\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=chrispsm%26w",
                        "name": "chrispsm&w",
                        "displayName": "Christian Kissner",
                        "active": true
                    },
                    "created": "2009-05-12T19:01:32.000+0000",
                    "updated": "2009-05-12T19:21:10.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30923",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Please note that COM is supported with 1.8 and not with 1.7.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-05-12T23:14:42.000+0000",
                    "updated": "2009-05-12T23:14:42.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30924",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "It looks like Thomas has done some good work to remove the dependency on loading class files that may not exist in the Validate\/Hostname\/ folder in the 1.8 version of Zend_Hostname. \n\nWhen I run the sample code in 1.8.1 I get the expected error:\n\nZend_XmlRpc_Client_FaultException making GET request to \/\n-32601 Server error. Requested method methodDoesNotExist not specified.\n\nI suggest this issue (and any duplicates) are closed marked as fixed in 1.8",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2009-05-13T00:31:56.000+0000",
                    "updated": "2009-05-13T00:31:56.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30939",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Closing issue with corrected fix version.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-05-13T12:17:51.000+0000",
                    "updated": "2009-05-13T12:17:51.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31347",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=evalder",
                        "name": "evalder",
                        "displayName": "EV",
                        "active": true
                    },
                    "body": "Regarding #ZF-2985, I've found that using fopen with error suppression is slower than checking if file exists in include_path. I'm using a custom error handler and know how to suppress the error, but I want to log all errors, including suppressed, and I don't want other other errors than my own to appear in it.\n\nSince the current method of checking whether a file exists in include_path (Zend_Loader::isReadable()) is both slower and generates unnecessary errors in my full log, could someone please take a look at my comments in #ZF-2985, where I describe how to fix this?\nhttp:\/\/framework.zend.com\/issues\/browse\/ZF-2985?focusedCommentId=31049#action_31049\n\nI'm posting here since no-one replied in the other issue, which is marked as duplicate of this (and I can't find how to re-open it).\n\n{code}\npublic static function isReadable($filename)\n{\n\tif ($filename === null || $filename === false || $filename === '' || !is_scalar($filename)) return false;\n\tif (is_readable($filename)) return true;\n\tforeach (explode(PATH_SEPARATOR, get_include_path()) as $path)\n\t{\n\t\tif (is_readable($path . (in_array(substr($path, -1), array('\\\\', '\/')) ? $filename : DIRECTORY_SEPARATOR . $filename))) return true;\n\t}\n\treturn false;\n}\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=evalder",
                        "name": "evalder",
                        "displayName": "EV",
                        "active": true
                    },
                    "created": "2009-05-25T23:34:41.000+0000",
                    "updated": "2009-05-25T23:34:41.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31349",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=evalder",
                        "name": "evalder",
                        "displayName": "EV",
                        "active": true
                    },
                    "body": "I hate it when I post something and just when I read my own comment I discover something that could be improved.. ;-)\n\nI only changed the first if statement. Input validation is simpler than what I did previously: it must be string, but not empty string. Now it's also more accurate compared to is_readable-behaviour for non-string input.\n\n{code}\npublic static function isReadable($filename)\n{\n\tif (($filename = (string)$filename) === '') return false;\n\tif (is_readable($filename)) return true;\n\tforeach (explode(PATH_SEPARATOR, get_include_path()) as $path)\n\t{\n\t\tif (is_readable($path . (in_array(substr($path, -1), array('\\\\', '\/')) ? $filename : DIRECTORY_SEPARATOR . $filename))) return true;\n\t}\n\treturn false;\n}\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=evalder",
                        "name": "evalder",
                        "displayName": "EV",
                        "active": true
                    },
                    "created": "2009-05-26T00:12:32.000+0000",
                    "updated": "2009-05-26T00:12:32.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31350",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Zend_Validate_Hostname does not call Zend_Loader, fopen or isReadable.\nNon of the methods you mentioned is used within this validator.\n\nCan you clearify what your comments have to do with Zend_Validate_Hostname ?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-05-26T02:55:46.000+0000",
                    "updated": "2009-05-26T02:55:46.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31387",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=evalder",
                        "name": "evalder",
                        "displayName": "EV",
                        "active": true
                    },
                    "body": "Nothing that I know of, but #ZF-2985 is for some reason marked as duplicate of this issue, that's why I'm posting here.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=evalder",
                        "name": "evalder",
                        "displayName": "EV",
                        "active": true
                    },
                    "created": "2009-05-27T09:29:23.000+0000",
                    "updated": "2009-05-27T09:29:23.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31388",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Please read the issue and it's description.\n\nYou may note that this issue describes a problem of Zend_Validate_Hostname, which has been fixed and does not occur anymore.\nEven the codelines you refer to do no longer exist. I can't integrate a isReadable method within Zend_Validate_Hostname as it would not solve any problems.\n\nPlease write eigther to the correct issue or, when you don't find one, write a new issue.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-05-27T09:54:01.000+0000",
                    "updated": "2009-05-27T09:54:01.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31389",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=evalder",
                        "name": "evalder",
                        "displayName": "EV",
                        "active": true
                    },
                    "body": "I get all that, but my problem is that the issue I *should* be posting to (2985) is marked as duplicate of this one. I don't have the rights to un-duplicate it or even re-open it. I could create a new one, but that would actually be a duplicate of 2985, which again leads here. Or perhaps I could try #ZF-3249, which \"depends\" on 2985. *sigh* What a mess. Fine, I'll just post a new bug report and hope that noone will bash me for it.\n\nOh, and the codelines I wrote above are not references to existing code, they were my suggested fix. Not for Zend_Validate_Hostname, but for Zend_Loader. Sorry if that wasn't clear.\n\nIn any case, could someone un-duplicate #ZF-2985? Satoru Yoshida apparently seemed to think that it was a duplicate of this, but I guess not.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=evalder",
                        "name": "evalder",
                        "displayName": "EV",
                        "active": true
                    },
                    "created": "2009-05-27T10:28:02.000+0000",
                    "updated": "2009-05-27T10:28:02.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31391",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "body": "Reopened  ZF-2900...",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "created": "2009-05-27T10:46:43.000+0000",
                    "updated": "2009-05-27T10:46:43.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31410",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=evalder",
                        "name": "evalder",
                        "displayName": "EV",
                        "active": true
                    },
                    "body": "I don't think re-opening this issue is relevant, at least for me it's not. I posted a new bug report for my issue: http:\/\/framework.zend.com\/issues\/browse\/ZF-6833.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=evalder",
                        "name": "evalder",
                        "displayName": "EV",
                        "active": true
                    },
                    "created": "2009-05-28T01:04:52.000+0000",
                    "updated": "2009-05-28T01:04:52.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2900\/transitions"
}