{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4373",
    "key": "ZF-4373",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_View_Helper_Action uses incorrect view script path for cross-module requests"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4373\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/2",
                "name": "Won't Fix"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2008-11-07T20:54:46.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=philbrown",
                "name": "philbrown",
                "displayName": "Phil Brown",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-09-24T19:36:27.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2008-11-07T20:54:46.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Here's my basic setup...\n\nI have 3 modules (default and two others) all stored under \"application\/modules\", each containing a \"controllers\" and \"views\" directory.\nThe default module stores the layout (under application\/modules\/default\/views\/layouts\/default.phtml) and is initialised via\n\nZend_Layout::startMvc(array(\n\t'layoutPath' => $root.'\/application\/modules\/default\/views\/layouts',\n\t'layout'     => 'default'\n));\n\nThe layout script contains a call to Zend_View_Helper_Action to render the output from a controller in the default module (a simple FlashMessenger controller - application\/modules\/default\/controllers\/MessagesController.php with view script at application\/modules\/default\/views\/scripts\/messages\/index.phtml)\n\n<?php echo $this->action('index', 'messages', 'default') ?>\n\nhowever when attempting to access a non-default module, I receive this error\n\nZend_View_Exception: script 'messages\/index.phtml' not found in path...\n\nThe paths listed are application\/modules\/default\/views\/layouts\/ and application\/modules\/<module-name>\/views\/scripts\/\n\nI would have thought the Zend_View_Helper_Action would be able to render the requested controller action in any module, provided the module name is supplied to Zend_View_Helper_Action::action() as I have done.\n\n-----\nEdit: Further on this\n\nAs a test, I moved the MessagesController (and view scripts) into one of the modules and called Zend_View_Helper_Action::action() with that module name and it worked as expected. So the issue appears to be that the default view script path is not being added to the view when a default controller action is requested via the helper.\n\nIn case it matters, here is my controller directory setup\n\n$front->setControllerDirectory(array(\n\t\t\t\t'default' => $root.'\/application\/modules\/default\/controllers',\n\t\t\t\t'moda'  => $root.'\/application\/modules\/moda\/controllers',\n\t\t\t\t'modb'  => $root.'\/application\/modules\/modb\/controllers'\n\t\t\t));\n\n-----\nEdit 2:\n\nIt appears the problem is having the layouts folder under the views folder (application\/modules\/default\/views\/layouts). If I move the layouts folder out of the views folder, it works as expected.\n\nI can't find the source of this yet but I'm guessing the \"default\/views\/scripts\" folder is not being added to the view as the \"default\/views\" folder is already in the stack (but not the \"scripts\" folder)"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4373\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10201",
                    "id": 10201,
                    "description": "Mini Release",
                    "name": "1.6.1",
                    "userReleaseDate": "15\/Sep\/08",
                    "archived": false,
                    "releaseDate": "2008-09-15",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10026",
                    "id": 10026,
                    "name": "Zend_View",
                    "description": "View portion of the ZF MVC",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24655",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Assigning to Ralph.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-09-25T06:29:16.000+0000",
                    "updated": "2008-09-25T06:29:16.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/25921",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "In order for render() to find a view script, the view script must be on the viewScriptPath. viewScriptPaths are added each time you enter a controller by the ViewRenderer, but must be manually added to the stack otherwise. This is to ensure two things:\n* To ensure the current module's view script path will be searched first\n* To prevent naming collisions between modules (which may share the same controller and\/or view script names)\nThe partial() view helper allows you to specify a module name from which to render the view script. It accomplishes this by cloning the view object so that it can temporarily add the view script path to it. action() will utilize the new module's view script path due to the fact that the ViewRenderer will be invoked upon dispatching the requested action. However, there is no general cross module support in order to ensure the two bullet points above. If you need this, simply manually add all view script paths for each module during bootstrapping.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-11-07T20:54:34.000+0000",
                    "updated": "2008-11-07T20:54:34.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4373\/transitions"
}