{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5546",
    "key": "ZF-5546",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "CLONE -CLONE -Zend_Db->query() silently dies after I try to insert text with length about 10 kilobytes. I'm using ZF 1.5.2 on Unix. I don't observe this problem on the same version on Windows"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5546\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10260",
                    "id": 10260,
                    "description": "Minor Release",
                    "name": "1.7.0",
                    "userReleaseDate": "17\/Nov\/08",
                    "archived": false,
                    "releaseDate": "2008-11-17",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-01-14T08:30:09.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akat",
                "name": "akat",
                "displayName": "Angelos Katsaris",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-01-14T06:38:52.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-01-14T08:30:09.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "by inserting an large text (greater than 5484 chars in ut8 charset, we uses \"a's\" as test character) into a database field Zend_Db_Statement causes an Apache segmentation fault\nthe script dies in line 187 of Zend_Db_Statement without any exception to be caught\n\n        \/\/ remove 'foo\\'bar'\n        $sql = preg_replace(\"\/$q($qe|[^$q])*$q\/\", '', $sql);\n\nWe are using php 5.4.2 and apache 2.0 and apache 2.2 versions, and all versions are affected even if we use Zend Core php "
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/2",
                "name": "Critical"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/customFieldOption\/10039",
                "value": "  Should Have"
            }
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5546\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/6",
                "name": "Closed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                "name": "ralph",
                "displayName": "Ralph Schindler",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10012",
                    "id": 10012,
                    "name": "Zend_Db",
                    "description": "interfaces, APIs, and adapters for various third-party data stores",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28176",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akat",
                        "name": "akat",
                        "displayName": "Angelos Katsaris",
                        "active": true
                    },
                    "body": "Hi,\n\nI have the same problem, I have create a class to store html content at mysql. I can't store more than 5484 chars at utf-8 and i am getting back  white screen with no errors. The only thing i can see is at the error log at apache (segmentation fault(11)). I am getting this error only at linux not on windows and i have test it on 3 linux servers with the same results.\n\nI have try this at many php versions and nothing happen. Please Help!!!\n\na part of my class...\n\n\t$this->dbconnect();\n\t\t\ttry {\n\n\t\t\t\t\t$sql = \"INSERT INTO categories\n\t\t\t\t\t\t\t\t\t\t\t (catID,\n\t\t\t\t\t\t\t\t\t\t\t  catTitle,\n\t\t\t\t\t\t\t\t\t\t\t  lang,\n\t\t\t\t\t\t\t\t\t\t\t  catDescription,\n\t\t\t\t\t\t\t\t\t\t\t  catContent,\n\t\t\t\t\t\t\t\t\t\t\t  catKeywords,\n\t\t\t\t\t\t\t\t\t\t\t  catGoogleDesc,\n\t\t\t\t\t\t\t\t\t\t\t  catOrder,\n\t\t\t\t\t\t\t\t\t\t\t  catActive,\n\t\t\t\t\t\t\t\t\t\t\t  catHomeActive,\n\t\t\t\t\t\t\t\t\t\t\t  catHomeSection,\n\t\t\t\t\t\t\t\t\t\t\t  catOpenActive,\n\t\t\t\t\t\t\t\t\t\t\t  catHasContents\n\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t  VALUES (\n\t\t\t\t\t\t\t\t\t  \t\t  \".$this->lastID.\",\n\t\t\t\t\t\t\t\t\t\t\t  '\".$titlos.\"',\n\t\t\t\t\t\t\t\t\t\t\t  \".$lang.\",\n\t\t\t\t\t\t\t\t\t\t\t  '\".$description.\"',\n\t\t\t\t\t\t\t\t\t\t\t  '\".$fullcontent.\"',\n\t\t\t\t\t\t\t\t\t\t\t  '\".$googleKeywords.\"',\n\t\t\t\t\t\t\t\t\t\t\t  '\".$googleDesc.\"',\n\t\t\t\t\t\t\t\t\t\t\t  \".$order.\",\n\t\t\t\t\t\t\t\t\t\t\t  \".$active.\",\n\t\t\t\t\t\t\t\t\t\t\t  \".$home_active.\",\n\t\t\t\t\t\t\t\t\t\t\t  \".$home_section.\",\n\t\t\t\t\t\t\t\t\t\t\t  \".$childs.\",\n\t\t\t\t\t\t\t\t\t\t\t  \".$has_contents.\"\n\t\t\t\t\t\t\t\t\t\t\t  )\";\n\n\n\t\t\t\t\t$this->db->query($sql);\n\t\t\t\t}\n\t\t\t\t$this->db->commit();\n\t\t\t} catch (Exception $e) {\n\t\t\t\t$this->db->rollBack();\n\t\t\t\t$this->db->delete('cat_tree', 'catID ='.$this->lastID);\n\t\t\t\t$this->error = true;\n\t\t\t\t$this->errorMessage = $e->getMessage();\n\t\t\t\tcal_public_baseFunctions::logErrors('Query Exception when i try to Add new Page :: storePages.php Class'.$e->getMessage());\n\t\t\t\tcal_public_baseFunctions::logErrors('Query Exception when i try to Add new Page :: Query '.$sql);\n\t\t\t}\n\n\n\t\t$this->dbclose();",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akat",
                        "name": "akat",
                        "displayName": "Angelos Katsaris",
                        "active": true
                    },
                    "created": "2009-01-14T06:49:19.000+0000",
                    "updated": "2009-01-14T06:49:19.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28177",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "Is that a 64 bit machine?\n\nAlso, you could try using the adapter insert method with placeholders, instead of crafting the query yourself:\n\n{code}\n$dbAdapter->insert('categories', array(\n  'catID' => $this->lastID,\n  'catTitle' => $titlos,\n  ...\n));\n{code}\n\nThis would then only quote the sql statement, and bind the parameters afterwards.  Let me know if that helps.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2009-01-14T07:16:59.000+0000",
                    "updated": "2009-01-14T07:16:59.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28179",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akat",
                        "name": "akat",
                        "displayName": "Angelos Katsaris",
                        "active": true
                    },
                    "body": "Thanks that solve my problem!!!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akat",
                        "name": "akat",
                        "displayName": "Angelos Katsaris",
                        "active": true
                    },
                    "created": "2009-01-14T07:49:24.000+0000",
                    "updated": "2009-01-14T07:49:24.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28181",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akat",
                        "name": "akat",
                        "displayName": "Angelos Katsaris",
                        "active": true
                    },
                    "body": "Also if you want to avoid this way you can just execute the query like this.\n\n$sql =\"Insert into categories....\";\n$adapter->getConnection()->exec($sql);",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akat",
                        "name": "akat",
                        "displayName": "Angelos Katsaris",
                        "active": true
                    },
                    "created": "2009-01-14T08:16:17.000+0000",
                    "updated": "2009-01-14T08:16:17.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28182",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "This is a known issue with preg_* functions on 64bit platforms.  The workaround is to use the adapter with bound parameters instead of passing large unbound queries into the query() method.\n\nAnd yes, by passing the adapter itself is definitely an option, but would result in decreasing the inherit benefits of using Zend_Db in the first place.\n\nThanks!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2009-01-14T08:30:09.000+0000",
                    "updated": "2009-01-14T08:30:09.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5546\/transitions"
}