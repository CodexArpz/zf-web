{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10937",
    "key": "ZF-10937",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Remove the ZendView::useStreamWrapper() in the next major release"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10937\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2011-01-21T13:18:09.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=strictcoding",
                "name": "strictcoding",
                "displayName": "Strict Coding",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2011-01-11T11:19:13.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-01-22T10:54:53.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "* using short_open_tag is never a technical requirement, and is against Zend coding standards :\r\nhttp:\/\/framework.zend.com\/manual\/en\/coding-standard.coding-style.html\r\n\r\n* the current implementation is broken, based on simple regexp which does not take the context into account :\r\n\r\n<?php\r\nrequire_once 'Zend\/View\/Stream.php';\r\nstream_wrapper_register('zend.view', 'Zend_View_Stream');\r\necho file_get_contents('zend.view:\/\/test.php');\r\n?>\r\n\r\nThis test.php file :\r\n<? echo htmlspecialchars('<? \/* this is an example of a short_open_tag *\/ ?>'); ?>\r\n\r\nGets rewritten to :\r\n<?php  echo htmlspecialchars('<?php  \/* this is an example of a short_open_tag *\/ ?>'); ?>\r\n\r\nWhich is an undesired behaviour.\r\nNeedless to say that if the script contains binary data embedded with __halt_compiler(), its result is unpredictable. Of course, this scenario is not very likely to happen in a view script, but this implementation is still not a good practice. A good wrapper would parse the file with token_get_all(), with the obvious performance loss that goes with it.\r\n\r\nKeeping in mind that short_open_tag will probably not survive in future versions of PHP, and the bad  \r\n design of a stream wrapper that fully loads an unknown-size file in memory to browse it, I think it's worth planning to remove this feature in the next major release."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10937\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                "name": "freak",
                "displayName": "Dolf Schimmel (Freeaqingme)",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10026",
                    "id": 10026,
                    "name": "Zend_View",
                    "description": "View portion of the ZF MVC",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44002",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                        "name": "bittarman",
                        "displayName": "Ryan Mauger",
                        "active": true
                    },
                    "body": "I would argue that this alone is not a good reason to remove usage of the stream wrappers.\r\n\r\nAlso, I'd argue that the one for __halt_compiler() would actually be completely irrelevant, as using that in a view script would actually break the functionality of Zend_View anyway, and additionally, the fact that the file size is unknown is completely irrelevant, as no checking of the file size is currently in place when the view partial is simply included by zend_view when not run through the stream wrapper, and the fact that it is using a stream instead of something like file_get_contents means that the additional memory overhead is very minimal if any.\r\n\r\nSome people in the community have expressed a desire for an option to automatically escape variables output in a view script, and an excellent implementation of this was posted to the mailing list.\r\n\r\nshort opening tags are not the only use-case for which stream wrappers are suitable, so to remove them for the above reasons would be flawed, and they should only be removed if the templating implemented in Zend\\View moves to a completely different approach, which should also be avoided to ease the transition from ZF1 to ZF2.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                        "name": "bittarman",
                        "displayName": "Ryan Mauger",
                        "active": true
                    },
                    "created": "2011-01-11T11:35:05.000+0000",
                    "updated": "2011-01-11T11:35:05.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44003",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=strictcoding",
                        "name": "strictcoding",
                        "displayName": "Strict Coding",
                        "active": true
                    },
                    "body": "Sorry for the possible misinterpretation. I'm not saying that the concept of Zend_View stream wrappers should be totally avoided, I mean that the current Zend_View_Stream just designed for handling short_open_tag is useless and flawed, as explained above.\r\n\r\nAbout your comments :\r\n* __halt_compiler() only halts the compiler for the current script, and does work in a view\r\n* the file size is theoretically relevant: when Zend_View includes a file, it just passes it to the PHP parser. This is totally different from including the same file with a stream wrapper which loads it into the application memory first; although I obviously agree that for small view scripts, the argument is weak as the difference may be unnoticeable.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=strictcoding",
                        "name": "strictcoding",
                        "displayName": "Strict Coding",
                        "active": true
                    },
                    "created": "2011-01-11T11:55:12.000+0000",
                    "updated": "2011-01-11T11:55:12.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44104",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "body": "Strict Coding (I find it hart to believe that to be your real name), please read the coding guidelines. __halt_compiler() is not to be used inside viewscripts.\r\n\r\n{quote}This is totally different from including the same file with a stream wrapper which loads it into the application memory first; {quote}\r\n\r\nThat's the bonus when using a wrapper.\r\n\r\n=> Closing as not an issue.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "created": "2011-01-21T13:17:32.000+0000",
                    "updated": "2011-01-21T13:17:32.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44126",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=strictcoding",
                        "name": "strictcoding",
                        "displayName": "Strict Coding",
                        "active": true
                    },
                    "body": "Dorf, you may have guessed this is my company name.\r\nSorry for the bad argument about __halt_compiler(), my mistake, it's indeed against the coding standards.\r\n\r\nHowever, closing as *not an issue* without taking the time to comment on the fact that if, for any reason, we have to include the tag in a string, this breaks the behavior, is maybe a bit expeditious?\r\n\r\n<? echo $this->escape('<? \/* this short_open_tag should not be rewritten *\/ ?>'); ?>\r\n\r\nThanks for your answer; we're all here to make this framework better.\r\nBenjamin",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=strictcoding",
                        "name": "strictcoding",
                        "displayName": "Strict Coding",
                        "active": true
                    },
                    "created": "2011-01-22T10:54:52.000+0000",
                    "updated": "2011-01-22T10:54:52.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10937\/transitions"
}