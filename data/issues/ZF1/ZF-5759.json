{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5759",
    "key": "ZF-5759",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Parse once, execute many time the same SQL statement"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5759\/votes",
                "votes": 2,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=w_loche",
                "name": "w_loche",
                "displayName": "Wilfried Loche",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-02-12T06:46:40.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-01-25T10:56:23.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "Optimization",
                "once",
                "parse"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Hi,\n\nThis proposal was announced here: [ZF-5758|http:\/\/framework.zend.com\/issues\/browse\/ZF-5758].\n\nWe have took a look on the SGA Trace\/optimzer of TOAD, and saw that exactly the same query was parsed as many time as it was executed.\nThis is not as optimized as our own framework (... that only support Oracle, this is a fact!), here is our simple proposal that caches allready prepared statements :\n\n{code:title=Cto_Core_Db_Adapter_Oracle.php|borderStyle=solid}\n\/**\n * Adapter Oracle\n *\n * @package Core\n * @subpackage Db\n *\/\nclass Cto_Core_Db_Adapter_Oracle extends Zend_Db_Adapter_Oracle\n{\n\n    \/** @var array array of Zend_Db_Statement_Oracle *\/\n    private $_preparedStmt = array();\n\n    \/**\n     * Returns an SQL statement for preparation.\n     *\n     * @param string $sql The SQL statement with placeholders.\n     * @return Zend_Db_Statement_Oracle\n     *\/\n    public function prepare($sql) {\n\n        if (isset($this->_preparedStmt[md5($sql)])) {\n            return $this->_preparedStmt[md5($sql)];\n        }\n        \n        $stmt = parent::prepare($sql);\n        $this->_preparedStmt[md5($sql)] = $stmt;\n        return $stmt;\n    }\n\n}\n{code}\n\nTo use it, we simply add a new parameter in the config.ini:\n\n{noformat}\n[DB]\nadapter = oracle\nparams.dbname = SPMS11\nparams.username = xxx\nparams.password = xxx\nparams.adapterNamespace = Cto_Core_Db_Adapter\nparams.options.autoQuoteIdentifiers = false\n{noformat}\n\nIs there any reason why not putting it in the main code?\n\nRegads,\nWilfried LOCHE\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/6",
                "name": "N\/A"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5759\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mikaelkael",
                "name": "mikaelkael",
                "displayName": "Mickael Perraud",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-5758",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5758",
                    "type": {
                        "name": "Dependency",
                        "direction": "OUTBOUND",
                        "description": "depends on"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10280",
                    "id": 10280,
                    "description": "Mini Release",
                    "name": "1.7.4",
                    "userReleaseDate": "02\/Feb\/09",
                    "archived": false,
                    "releaseDate": "2009-02-02",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10135",
                    "id": 10135,
                    "name": "Zend_Db_Adapter_Oracle",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28786",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=w_loche",
                        "name": "w_loche",
                        "displayName": "Wilfried Loche",
                        "active": true
                    },
                    "body": "This is a proposed optimization to reduce dramaticaly the number of parsed queries. ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=w_loche",
                        "name": "w_loche",
                        "displayName": "Wilfried Loche",
                        "active": true
                    },
                    "created": "2009-02-12T06:48:43.000+0000",
                    "updated": "2009-02-12T06:48:43.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/49567",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=fxmauricard",
                        "name": "fxmauricard",
                        "displayName": "Fran\u00e7ois-Xavier MAURICARD",
                        "active": true
                    },
                    "body": "In fact it will only consume more memory for something that is just bad writing of the SQL query, and will just cache SQL query for the same HTTP request.\r\n\r\nBut Oracle by itself cache the query and is doing soft-parse when sufficient.\r\nIf you have too many hard-parse it's because you are not using bind variables, or not writing the same query with the same syntax (for exemple \"select * from emp\" is different to \"select * from EMP\").\r\n\r\n\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=fxmauricard",
                        "name": "fxmauricard",
                        "displayName": "Fran\u00e7ois-Xavier MAURICARD",
                        "active": true
                    },
                    "created": "2012-01-25T10:56:23.000+0000",
                    "updated": "2012-01-25T10:56:23.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5759\/transitions"
}