{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10754",
    "key": "ZF-10754",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Missing attribute name in fault type declaration in generated WSDL"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10754\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jboffel",
                "name": "jboffel",
                "displayName": "Jeannie BOFFEL",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-11-28T06:36:17.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-05-06T14:12:56.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "When we try to set a new fault return type in wsdl listed method with Zend_Soap_Wsdl, it failed to add name attribute.\r\n\r\nWhen trying to use addPortOperation with fault argument, it doesn't add the name attribute.\r\nSoapUI failed to load wsdl without name attribute here.\r\n\r\nPossible fix:\r\n\r\n{code}\r\nif (is_string($fault) && (strlen(trim($fault)) >= 1)) {\r\n            $node = $this->_dom->createElement('fault');\r\n            $node->setAttribute('message', $fault);\r\n            \/\/remove tns:\r\n            $node->setAttribute('name', substr(strchr($fault, ':'), 1)); \r\n            $operation->appendChild($node);\r\n        }\r\n{code}\r\n\r\nExisting code:\r\n\r\n{code}\r\nif (is_string($fault) && (strlen(trim($fault)) >= 1)) {\r\n            $node = $this->_dom->createElement('fault');\r\n            $node->setAttribute('message', $fault); \r\n            $operation->appendChild($node);\r\n        }\r\n{code}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10754\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jboffel",
                "name": "jboffel",
                "displayName": "Jeannie BOFFEL",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-10753",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10753",
                    "type": {
                        "name": "Dependency",
                        "direction": "INBOUND",
                        "description": "is dependecy of"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/13945",
                    "filename": "Wsdl.php.patch",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jboffel",
                        "name": "jboffel",
                        "displayName": "Jeannie BOFFEL",
                        "active": true
                    },
                    "created": "2011-05-04T21:43:01.000+0000",
                    "size": 842,
                    "mimeType": "text\/plain",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/13945\/Wsdl.php.patch"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/13947",
                    "filename": "WsdlTest.php.patch",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jboffel",
                        "name": "jboffel",
                        "displayName": "Jeannie BOFFEL",
                        "active": true
                    },
                    "created": "2011-05-04T21:46:58.000+0000",
                    "size": 1965,
                    "mimeType": "text\/plain",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/13947\/WsdlTest.php.patch"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10501",
                    "id": 10501,
                    "description": "Mini Release",
                    "name": "1.11.1",
                    "userReleaseDate": "30\/Nov\/10",
                    "archived": false,
                    "releaseDate": "2010-11-30",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10098",
                    "id": 10098,
                    "name": "Zend_Soap_Wsdl",
                    "description": "Class for accessing SOAP WSDL documents.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/46396",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jboffel",
                        "name": "jboffel",
                        "displayName": "Jeannie BOFFEL",
                        "active": true
                    },
                    "body": "Warning patch including fix for ZF-10755 !",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jboffel",
                        "name": "jboffel",
                        "displayName": "Jeannie BOFFEL",
                        "active": true
                    },
                    "created": "2011-05-04T21:43:01.000+0000",
                    "updated": "2011-05-04T21:43:01.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/46397",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jboffel",
                        "name": "jboffel",
                        "displayName": "Jeannie BOFFEL",
                        "active": true
                    },
                    "body": "Warning test suite file patch include test for ZF-10755",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jboffel",
                        "name": "jboffel",
                        "displayName": "Jeannie BOFFEL",
                        "active": true
                    },
                    "created": "2011-05-04T21:44:23.000+0000",
                    "updated": "2011-05-04T21:44:23.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/46472",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "Patches look good, please provide screenshot of failed validation in soap ui.  Ill then commit it.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2011-05-05T20:00:45.000+0000",
                    "updated": "2011-05-05T20:00:45.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/46479",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jboffel",
                        "name": "jboffel",
                        "displayName": "Jeannie BOFFEL",
                        "active": true
                    },
                    "body": "For this one, it's a little more complicate to show effect.\r\nIn fact, it is not exactly a WSDL standard problem.\r\nSOAP UI can load the WSDL without mistake. However, the SoapServer extension of PHP is making trouble here.\r\nIf it does not find the name attribute, it will return empty answer at any request to the webservice.\r\nSo in fact, SoapServer extension could be changed to be less strict and not ask for the missing name attribute to do the job, or we can patch Zend Framework to handle SoapServer behavior of PHP.\r\nI recommend patch Zend Framework...\r\n\r\nHere a log of SOAP UI before and after the fix :\r\n\r\n{code}\r\nBefore (empty answer):\r\nFri May 06 11:07:57 CEST 2011:DEBUG:>> \"POST \/index\/soapserver HTTP\/1.1[\\r][\\n]\"\r\nFri May 06 11:07:57 CEST 2011:DEBUG:>> \"Accept-Encoding: gzip,deflate[\\r][\\n]\"\r\nFri May 06 11:07:57 CEST 2011:DEBUG:>> \"Content-Type: text\/xml;charset=UTF-8[\\r][\\n]\"\r\nFri May 06 11:07:57 CEST 2011:DEBUG:>> \"SOAPAction: \"http:\/\/www.aaaaaaa.fr\/index\/soapserver#getUserInfos\"[\\r][\\n]\"\r\nFri May 06 11:07:57 CEST 2011:DEBUG:>> \"User-Agent: Jakarta Commons-HttpClient\/3.1[\\r][\\n]\"\r\nFri May 06 11:07:57 CEST 2011:DEBUG:>> \"Host: www.aaaaaaa.fr[\\r][\\n]\"\r\nFri May 06 11:07:57 CEST 2011:DEBUG:>> \"Content-Length: 289[\\r][\\n]\"\r\nFri May 06 11:07:57 CEST 2011:DEBUG:>> \"[\\r][\\n]\"\r\nFri May 06 11:07:57 CEST 2011:DEBUG:>> \"<soapenv:Envelope xmlns:soapenv=\"http:\/\/schemas.xmlsoap.org\/soap\/envelope\/\" xmlns:soap=\"http:\/\/www.aaaaaaa.fr\/index\/soapserver\">[\\r][\\n]\"\r\nFri May 06 11:07:57 CEST 2011:DEBUG:>> \"   <soapenv:Header\/>[\\r][\\n]\"\r\nFri May 06 11:07:57 CEST 2011:DEBUG:>> \"   <soapenv:Body>[\\r][\\n]\"\r\nFri May 06 11:07:57 CEST 2011:DEBUG:>> \"      <soap:getUserInfos>[\\r][\\n]\"\r\nFri May 06 11:07:57 CEST 2011:DEBUG:>> \"         <name><\/name>[\\r][\\n]\"\r\nFri May 06 11:07:57 CEST 2011:DEBUG:>> \"      <\/soap:getUserInfos>[\\r][\\n]\"\r\nFri May 06 11:07:57 CEST 2011:DEBUG:>> \"   <\/soapenv:Body>[\\r][\\n]\"\r\nFri May 06 11:07:57 CEST 2011:DEBUG:>> \"<\/soapenv:Envelope>\"\r\nFri May 06 11:07:57 CEST 2011:DEBUG:<< \"HTTP\/1.1 200 OK[\\r][\\n]\"\r\nFri May 06 11:07:57 CEST 2011:DEBUG:<< \"HTTP\/1.1 200 OK[\\r][\\n]\"\r\nFri May 06 11:07:57 CEST 2011:DEBUG:<< \"Date: Fri, 06 May 2011 09:07:57 GMT[\\r][\\n]\"\r\nFri May 06 11:07:57 CEST 2011:DEBUG:<< \"Server: Apache\/2.2.14 (Win32) DAV\/2 mod_ssl\/2.2.14 OpenSSL\/0.9.8l mod_autoindex_color PHP\/5.3.1[\\r][\\n]\"\r\nFri May 06 11:07:57 CEST 2011:DEBUG:<< \"X-Powered-By: PHP\/5.3.1[\\r][\\n]\"\r\nFri May 06 11:07:57 CEST 2011:DEBUG:<< \"Content-Length: 0[\\r][\\n]\"\r\nFri May 06 11:07:57 CEST 2011:DEBUG:<< \"Content-Type: text\/html[\\r][\\n]\"\r\nFri May 06 11:07:57 CEST 2011:DEBUG:<< \"[\\r][\\n]\"\r\n\r\n\r\n\r\nAfter (we can see the soapfault in the answer, which is what I expected with that request):\r\nFri May 06 11:02:34 CEST 2011:DEBUG:<< \"<?xml version=\"1.0\" encoding=\"UTF-8\"?>[\\n]\"\r\nFri May 06 11:02:34 CEST 2011:DEBUG:<< \"<SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http:\/\/schemas.xmlsoap.org\/soap\/envelope\/\" xmlns:ns1=\"http:\/\/www.aaaaaaa.fr\/index\/soapserver\"><SOAP-ENV:Body><ns1:getUserInfosResponse><return><firstName>Etienne<\/firstName><familyName>Dupont<\/familyName><age>333<\/age><detailsBrotherList><brotherDetail><firstName>Jean<\/firstName><rank>1<\/rank><age>100<\/age><\/brotherDetail><brotherDetail><firstName>Jack<\/firstName><rank>2<\/rank><age>200<\/age><\/brotherDetail><brotherDetail><firstName>Martin<\/firstName><rank>3<\/rank><age>300<\/age><\/brotherDetail><\/detailsBrotherList><\/return><\/ns1:getUserInfosResponse><\/SOAP-ENV:Body><\/SOAP-ENV:Envelope>[\\n]\"\r\nFri May 06 11:02:40 CEST 2011:DEBUG:>> \"POST \/index\/soapserver HTTP\/1.1[\\r][\\n]\"\r\nFri May 06 11:02:40 CEST 2011:DEBUG:>> \"Accept-Encoding: gzip,deflate[\\r][\\n]\"\r\nFri May 06 11:02:40 CEST 2011:DEBUG:>> \"Content-Type: text\/xml;charset=UTF-8[\\r][\\n]\"\r\nFri May 06 11:02:40 CEST 2011:DEBUG:>> \"SOAPAction: \"http:\/\/www.aaaaaaa.fr\/index\/soapserver#getUserInfos\"[\\r][\\n]\"\r\nFri May 06 11:02:40 CEST 2011:DEBUG:>> \"User-Agent: Jakarta Commons-HttpClient\/3.1[\\r][\\n]\"\r\nFri May 06 11:02:40 CEST 2011:DEBUG:>> \"Host: www.aaaaaaa.fr[\\r][\\n]\"\r\nFri May 06 11:02:40 CEST 2011:DEBUG:>> \"Content-Length: 289[\\r][\\n]\"\r\nFri May 06 11:02:40 CEST 2011:DEBUG:>> \"[\\r][\\n]\"\r\nFri May 06 11:02:40 CEST 2011:DEBUG:>> \"<soapenv:Envelope xmlns:soapenv=\"http:\/\/schemas.xmlsoap.org\/soap\/envelope\/\" xmlns:soap=\"http:\/\/www.aaaaaaa.fr\/index\/soapserver\">[\\r][\\n]\"\r\nFri May 06 11:02:40 CEST 2011:DEBUG:>> \"   <soapenv:Header\/>[\\r][\\n]\"\r\nFri May 06 11:02:40 CEST 2011:DEBUG:>> \"   <soapenv:Body>[\\r][\\n]\"\r\nFri May 06 11:02:40 CEST 2011:DEBUG:>> \"      <soap:getUserInfos>[\\r][\\n]\"\r\nFri May 06 11:02:40 CEST 2011:DEBUG:>> \"         <name><\/name>[\\r][\\n]\"\r\nFri May 06 11:02:40 CEST 2011:DEBUG:>> \"      <\/soap:getUserInfos>[\\r][\\n]\"\r\nFri May 06 11:02:40 CEST 2011:DEBUG:>> \"   <\/soapenv:Body>[\\r][\\n]\"\r\nFri May 06 11:02:40 CEST 2011:DEBUG:>> \"<\/soapenv:Envelope>\"\r\nFri May 06 11:02:40 CEST 2011:DEBUG:<< \"HTTP\/1.1 500 Internal Service Error[\\r][\\n]\"\r\nFri May 06 11:02:40 CEST 2011:DEBUG:<< \"HTTP\/1.1 500 Internal Service Error[\\r][\\n]\"\r\nFri May 06 11:02:40 CEST 2011:DEBUG:<< \"Date: Fri, 06 May 2011 09:02:40 GMT[\\r][\\n]\"\r\nFri May 06 11:02:40 CEST 2011:DEBUG:<< \"Server: Apache\/2.2.14 (Win32) DAV\/2 mod_ssl\/2.2.14 OpenSSL\/0.9.8l mod_autoindex_color PHP\/5.3.1[\\r][\\n]\"\r\nFri May 06 11:02:40 CEST 2011:DEBUG:<< \"X-Powered-By: PHP\/5.3.1[\\r][\\n]\"\r\nFri May 06 11:02:40 CEST 2011:DEBUG:<< \"Content-Length: 486[\\r][\\n]\"\r\nFri May 06 11:02:40 CEST 2011:DEBUG:<< \"Connection: close[\\r][\\n]\"\r\nFri May 06 11:02:40 CEST 2011:DEBUG:<< \"Content-Type: text\/xml; charset=utf-8[\\r][\\n]\"\r\nFri May 06 11:02:40 CEST 2011:DEBUG:<< \"[\\r][\\n]\"\r\nFri May 06 11:02:40 CEST 2011:DEBUG:<< \"<?xml version=\"1.0\" encoding=\"UTF-8\"?>[\\n]\"\r\nFri May 06 11:02:40 CEST 2011:DEBUG:<< \"<SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http:\/\/schemas.xmlsoap.org\/soap\/envelope\/\" xmlns:ns1=\"http:\/\/www.aaaaaaa.fr\/index\/soapserver\"><SOAP-ENV:Body><SOAP-ENV:Fault><faultcode>SOAP-ENV:Client<\/faultcode><faultstring>wsGetUserInfos: Fatal error<\/faultstring><detail><ns1:wsGetUserInfosException><code>1<\/code><message>Parameter name missing !<\/message><trace\/><\/ns1:wsGetUserInfosException><\/detail><\/SOAP-ENV:Fault><\/SOAP-ENV:Body><\/SOAP-ENV:Envelope>[\\n]\"\r\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2011-05-06T09:11:03.000+0000",
                    "updated": "2011-05-06T14:12:56.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10754\/transitions"
}