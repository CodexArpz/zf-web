{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3456",
    "key": "ZF-3456",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_View_Helper_Action Issue, duplicated view output"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3456\/votes",
                "votes": 1,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10161",
                    "id": 10161,
                    "description": "Mini Release",
                    "name": "1.5.3",
                    "userReleaseDate": "28\/Jul\/08",
                    "archived": true,
                    "releaseDate": "2008-07-28",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2008-07-25T15:11:58.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jfalvarez",
                "name": "jfalvarez",
                "displayName": "Juan Felipe Alvarez Saldarriaga",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-06-13T09:49:01.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2008-07-25T15:17:10.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Hey!.\n\nA view named \"view-chart.phtml\" execute the action helper, <?= $this->action( \"show-chart-main-panel\", \"diagnostic\", \"platform\", array( \"patient_id\" => $this->intPatientId ) ); ?>, then the view of the second action ( \"show-chart-main-panel\" ) execute another action helper <?= $this->action( \"show-record-image\", \"patient\", \"platform\", array ( 'patient_id' => $this->intPatientId, 'patient_record_id' => $this->intPatientRecordId, 'field_id' => $this->intFieldId ) ); ?>, what's the issue ? the output of \"show-record-image\" appears twice on the \"view-chart.phtml\", any help ?\n\n* view-chart.phtml:\n\n<div>\n    <h3>View Chart:<\/h3>\n\n    <?= $this->action( \"show-chart-main-panel\", \"diagnostic\", \"platform\", array( \"patient_id\" => $this->intPatientId ) ); ?>\n<\/div>\n\n* view-chart.phtml calls \"show-chart-main-panel\" action, this is the view of \"show-chart-main-panel\" action, show-chart-main-panel.phtml:\n\n<div>\n    <h3>Show Cart Main Panel:<\/h3>\n\n    <?= $this->action( \"show-record-image\", \"patient\", \"platform\", array ( 'patient_id' => $this->intPatientId, 'patient_record_id' => $this->intPatientRecordId, 'field_id' => $this->intFieldId ) ); ?>\n<\/div>\n\n* show-record-image.phtml:\n\n<div>\n    <h3>Show Record<\/h3>\n<\/div>\n\nThis is the final result:\n\n<div>\n    <h3>View Chart:<\/h3>\n    <div>\n        <h3>Show Record<\/h3>\n    <\/div>\n    <div>\n        <h3>Show Cart Main Panel:<\/h3>\n        <div>\n            <h3>Show Record<\/h3>\n        <\/div>\n    <\/div>\n<\/div>\n\n\"show-record-image\" string is duplicated, any help ? Thx. "
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/customFieldOption\/10037",
                "value": "   Must Have"
            }
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3456\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                "name": "ralph",
                "displayName": "Ralph Schindler",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-3160",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3160",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/11398",
                    "filename": "ZF-3456-fix.patch",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ptomli",
                        "name": "ptomli",
                        "displayName": "Paul Tomlin",
                        "active": true
                    },
                    "created": "2008-07-19T00:33:00.000+0000",
                    "size": 1998,
                    "mimeType": "text\/plain",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/11398\/ZF-3456-fix.patch"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/11397",
                    "filename": "ZF-3456-test.patch",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ptomli",
                        "name": "ptomli",
                        "displayName": "Paul Tomlin",
                        "active": true
                    },
                    "created": "2008-07-19T00:32:59.000+0000",
                    "size": 2349,
                    "mimeType": "text\/plain",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/11397\/ZF-3456-test.patch"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10181",
                    "id": 10181,
                    "description": "Mini Release",
                    "name": " 1.5.2",
                    "userReleaseDate": "15\/May\/08",
                    "archived": true,
                    "releaseDate": "2008-05-15",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10026",
                    "id": 10026,
                    "name": "Zend_View",
                    "description": "View portion of the ZF MVC",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/22511",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Assigning to Ralph; Ralph, please review and attempt a fix for the next mini release.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-06-16T09:04:27.000+0000",
                    "updated": "2008-06-16T09:04:27.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/22913",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ptomli",
                        "name": "ptomli",
                        "displayName": "Paul Tomlin",
                        "active": true
                    },
                    "body": "I can confirm the issue, and have worked out some vague understanding of the reason, and a solution.\n\nIt appears that nested actions prepend the previous response, or append the current one (depending on your standpoint)\n\nIf C actions B actions A\n\nA results in A\nB results in ABA (should be BA)\nC results in ABACABA (should be CBA)\n\nBlind digging in the code brought me to think this might have something to do with the fact that the request\/response instances used in the helper are cloned in the constructor, and remain the same instances throughout the lifetime of the helper.\n\nExactly how this creates the situation above I have no idea, but creating new clones of the request\/response objects (from the front controller) at the start of the 'action' method, and using them instead of the instance members produces the correct response.\n\nI'd attach a patch, but I think someone who understands the issue would be better placed to produce something suitable.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ptomli",
                        "name": "ptomli",
                        "displayName": "Paul Tomlin",
                        "active": true
                    },
                    "created": "2008-07-17T03:44:19.000+0000",
                    "updated": "2008-07-17T03:44:19.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/22952",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ptomli",
                        "name": "ptomli",
                        "displayName": "Paul Tomlin",
                        "active": true
                    },
                    "body": "A test and example fix. ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ptomli",
                        "name": "ptomli",
                        "displayName": "Paul Tomlin",
                        "active": true
                    },
                    "created": "2008-07-19T00:33:00.000+0000",
                    "updated": "2008-07-19T00:33:00.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/23086",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "Fixed in 1.5.3 at r10440\nFixed in 1.6.0 at r10442",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2008-07-25T15:11:57.000+0000",
                    "updated": "2008-07-25T15:11:57.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3456\/transitions"
}