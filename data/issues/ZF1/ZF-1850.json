{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1850",
    "key": "ZF-1850",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "urlencode()d cookies break IIS application"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1850\/votes",
                "votes": 9,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2010-11-24T03:53:26.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alexadriaanse",
                "name": "alexadriaanse",
                "displayName": "Alex Adriaanse",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2007-08-14T15:49:50.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-11-24T03:53:28.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I am using Zend_Http_Client against a web application that runs on IIS 4.0.  I noticed that I wasn't able to log into this application using Zend_Http_Client, but it worked fine from Firefox.  I was able to narrow the cause of this problem down to the cookie getting urlencode()d where the web server\/application didn't like this.\r\n\r\nAfter logging in, this is the response from the server (sensitive parts are X'ed out):\r\n{noformat}\r\nHTTP\/1.1 302 Object moved\r\nServer: Microsoft-IIS\/4.0\r\nDate: Tue, 14 Aug 2007 20:27:13 GMT\r\nMicrosoftOfficeWebServer: 5.0_Pub\r\nLocation: XXXXXX.asp\r\nContent-Length: 131\r\nContent-Type: text\/html\r\nSet-Cookie: XXXXXX=HID=XXXXXX&UN=XXXXXXX&UID=XXXXX; path=\/\r\nCache-control: private\r\n{noformat}\r\n\r\nIn the subsequent request Zend_Http_Client sends the following:\r\n{noformat}\r\nGET \/XXXXXXX\/XXXXXX.asp HTTP\/1.1\r\nHost: www.XXXXXXX\r\nAccept-encoding: gzip, deflate\r\nUser-agent: Zend_Http_Client\r\nCookie: ASPSESSIONIDXXXXXXXX=XXXXXXXXXXXXXXXXXXXXX;XXXXXX=HID%3DXXXXXX%26UN%3DXXXXXXX%26UID%3DXXXXX;\r\n{noformat}\r\n\r\nNote how the cookie that was sent to us has been urlencode()d in our request.  This web application apparently does not recognize this cookie and thus prevents us from logging in.\r\n\r\nIf I remove the urlencode()ing from Zend_Http_Cookie::__toString(), logging into this application works fine:\r\n\r\n{noformat}\r\n--- Zend\/Http\/Cookie.php        (revision 1597)\r\n+++ Zend\/Http\/Cookie.php        (working copy)\r\n@@ -240,7 +240,7 @@\r\n      *\/\r\n     public function __toString()\r\n     {\r\n-        return $this->name . '=' . urlencode($this->value) . ';';\r\n+        return $this->name . '=' . $this->value . ';';\r\n     }\r\n\r\n     \/**\r\n{noformat}\r\n\r\nThe new request will look like this:\r\n{noformat}\r\nGET \/XXXXXXX\/XXXXXX.asp HTTP\/1.1\r\nHost: www.XXXXXXX\r\nAccept-encoding: gzip, deflate\r\nUser-agent: Zend_Http_Client\r\nCookie: ASPSESSIONIDXXXXXXXX=XXXXXXXXXXXXXXXXXXXXX;XXXXXX=HID=XXXXXX&UN=XXXXXXX&UID=XXXXX;\r\n{noformat}\r\n\r\nBy the way, this (un-urlencode()d) version is also how Firefox sends the cookie to the server.\r\n\r\nI'm not sure if urlencode()ing is required by any RFCs dealing with cookies or whether this is simply a case where IIS or the web application in question is broken.  If we need to keep urlencode() in Zend_Http_Cookie::__toString() then it'd be nice if we could specify an option to turn off urlencode()d cookies for broken web applications.\r\n\r\nThanks."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/5",
                "name": "Trivial"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1850\/watchers",
                "isWatching": false,
                "watchCount": 8
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                "name": "shahar",
                "displayName": "Shahar Evron",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-5407",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5407",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/13451",
                    "filename": "Http.diff",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mpinkston",
                        "name": "mpinkston",
                        "displayName": "Matt Pinkston",
                        "active": true
                    },
                    "created": "2010-11-15T12:49:19.000+0000",
                    "size": 2873,
                    "mimeType": "application\/octet-stream",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/13451\/Http.diff"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/12612",
                    "filename": "zf1850.r20255.doc.patch",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tech13",
                        "name": "tech13",
                        "displayName": "Michael Rehbein",
                        "active": false
                    },
                    "created": "2010-01-13T07:45:25.000+0000",
                    "size": 3595,
                    "mimeType": "text\/x-diff",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/12612\/zf1850.r20255.doc.patch"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/12611",
                    "filename": "zf1850.r20255.patch",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tech13",
                        "name": "tech13",
                        "displayName": "Michael Rehbein",
                        "active": false
                    },
                    "created": "2010-01-13T07:13:32.000+0000",
                    "size": 7074,
                    "mimeType": "text\/x-diff",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/12611\/zf1850.r20255.patch"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10110",
                    "id": 10110,
                    "description": "Mini Release",
                    "name": "1.0.1",
                    "userReleaseDate": "30\/Jul\/07",
                    "archived": true,
                    "releaseDate": "2007-07-30",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10240",
                    "id": 10240,
                    "description": "Minor Release",
                    "name": "1.6.0",
                    "userReleaseDate": "02\/Sep\/08",
                    "archived": false,
                    "releaseDate": "2008-09-02",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10201",
                    "id": 10201,
                    "description": "Mini Release",
                    "name": "1.6.1",
                    "userReleaseDate": "15\/Sep\/08",
                    "archived": false,
                    "releaseDate": "2008-09-15",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10251",
                    "id": 10251,
                    "description": "Mini Release",
                    "name": "1.6.2",
                    "userReleaseDate": "13\/Oct\/08",
                    "archived": false,
                    "releaseDate": "2008-10-13",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10260",
                    "id": 10260,
                    "description": "Minor Release",
                    "name": "1.7.0",
                    "userReleaseDate": "17\/Nov\/08",
                    "archived": false,
                    "releaseDate": "2008-11-17",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10270",
                    "id": 10270,
                    "description": "Mini Release",
                    "name": "1.7.1",
                    "userReleaseDate": "01\/Dec\/08",
                    "archived": false,
                    "releaseDate": "2008-12-01",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10271",
                    "id": 10271,
                    "description": "Mini Release",
                    "name": "1.7.2",
                    "userReleaseDate": "23\/Dec\/08",
                    "archived": false,
                    "releaseDate": "2008-12-23",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10250",
                    "id": 10250,
                    "description": "Mini Release",
                    "name": "1.7.3",
                    "userReleaseDate": "19\/Jan\/09",
                    "archived": false,
                    "releaseDate": "2009-01-19",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10280",
                    "id": 10280,
                    "description": "Mini Release",
                    "name": "1.7.4",
                    "userReleaseDate": "02\/Feb\/09",
                    "archived": false,
                    "releaseDate": "2009-02-02",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10272",
                    "id": 10272,
                    "description": "Mini Release",
                    "name": "1.7.5",
                    "userReleaseDate": "16\/Feb\/09",
                    "archived": false,
                    "releaseDate": "2009-02-16",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10290",
                    "id": 10290,
                    "description": "Mini Release",
                    "name": "1.7.6",
                    "userReleaseDate": "02\/Mar\/09",
                    "archived": false,
                    "releaseDate": "2009-03-02",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10291",
                    "id": 10291,
                    "description": "Mini Release",
                    "name": "1.7.7",
                    "userReleaseDate": "16\/Mar\/09",
                    "archived": false,
                    "releaseDate": "2009-03-16",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10300",
                    "id": 10300,
                    "description": "Mini Release",
                    "name": "1.7.8",
                    "userReleaseDate": "30\/Mar\/09",
                    "archived": false,
                    "releaseDate": "2009-03-30",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10411",
                    "id": 10411,
                    "description": "Security release",
                    "name": "1.7.9",
                    "userReleaseDate": "11\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-11",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10241",
                    "id": 10241,
                    "description": "Minor Release",
                    "name": "1.8.0",
                    "userReleaseDate": "30\/Apr\/09",
                    "archived": false,
                    "releaseDate": "2009-04-30",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10310",
                    "id": 10310,
                    "description": "Mini Release",
                    "name": "1.8.1",
                    "userReleaseDate": "12\/May\/09",
                    "archived": false,
                    "releaseDate": "2009-05-12",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10330",
                    "id": 10330,
                    "description": "Mini Release",
                    "name": "1.8.2",
                    "userReleaseDate": "27\/May\/09",
                    "archived": false,
                    "releaseDate": "2009-05-27",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10331",
                    "id": 10331,
                    "description": "Mini Release",
                    "name": "1.8.3",
                    "userReleaseDate": "09\/Jun\/09",
                    "archived": false,
                    "releaseDate": "2009-06-09",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10340",
                    "id": 10340,
                    "description": "Mini Release",
                    "name": "1.8.4",
                    "userReleaseDate": "23\/Jun\/09",
                    "archived": false,
                    "releaseDate": "2009-06-23",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10410",
                    "id": 10410,
                    "description": "Security release",
                    "name": "1.8.5",
                    "userReleaseDate": "11\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-11",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10320",
                    "id": 10320,
                    "description": "Minor Release",
                    "name": "1.9.0",
                    "userReleaseDate": "31\/Jul\/09",
                    "archived": false,
                    "releaseDate": "2009-07-31",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10350",
                    "id": 10350,
                    "description": "Mini Release",
                    "name": "1.9.1",
                    "userReleaseDate": "11\/Aug\/09",
                    "archived": false,
                    "releaseDate": "2009-08-11",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10361",
                    "id": 10361,
                    "description": "Mini Release",
                    "name": "1.9.2",
                    "userReleaseDate": "25\/Aug\/09",
                    "archived": false,
                    "releaseDate": "2009-08-25",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10362",
                    "id": 10362,
                    "description": "Mini Release",
                    "name": "1.9.3",
                    "userReleaseDate": "22\/Sep\/09",
                    "archived": false,
                    "releaseDate": "2009-09-22",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10370",
                    "id": 10370,
                    "description": "Mini Release",
                    "name": "1.9.4",
                    "userReleaseDate": "13\/Oct\/09",
                    "archived": false,
                    "releaseDate": "2009-10-13",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10380",
                    "id": 10380,
                    "description": "Mini Release",
                    "name": "1.9.5",
                    "userReleaseDate": "27\/Oct\/09",
                    "archived": false,
                    "releaseDate": "2009-10-27",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10390",
                    "id": 10390,
                    "description": "Mini Release",
                    "name": "1.9.6",
                    "userReleaseDate": "24\/Nov\/09",
                    "archived": false,
                    "releaseDate": "2009-11-24",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10400",
                    "id": 10400,
                    "description": "Mini Release",
                    "name": "1.9.7",
                    "userReleaseDate": "11\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-11",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10360",
                    "id": 10360,
                    "description": "Minor Release",
                    "name": "1.10.0",
                    "userReleaseDate": "27\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-27",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10412",
                    "id": 10412,
                    "description": "Mini Release",
                    "name": "1.10.1",
                    "userReleaseDate": "10\/Feb\/10",
                    "archived": false,
                    "releaseDate": "2010-02-10",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10015",
                    "id": 10015,
                    "name": "Zend_Http_Client",
                    "description": "performs HTTP requests",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/16328",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Assigned to Shahar",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2007-08-16T13:32:06.000+0000",
                    "updated": "2007-08-16T13:32:06.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/21562",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=than",
                        "name": "than",
                        "displayName": "Alexander Cheshchevik",
                        "active": true
                    },
                    "body": "The same problem.\n\nFor example:\nReceive:\nSet-Cookie: JSESSIONID=0000j8CydACPu_-J9bE8uTX91YU:12a83ks4k; Path=\/\n\nAnd we have urlencoded session incorrect value:\nCookie: JSESSIONID=0000j8CydACPu_-J9bE8uTX91YU%3A12a83ks4k;\n\nCookie value can contain \":\" and other escaped symbols.\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=than",
                        "name": "than",
                        "displayName": "Alexander Cheshchevik",
                        "active": true
                    },
                    "created": "2008-05-03T00:38:10.000+0000",
                    "updated": "2008-05-03T00:38:10.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/22322",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lsmith",
                        "name": "lsmith",
                        "displayName": "Lukas Smith",
                        "active": true
                    },
                    "body": "I also got bitten by this really nasty bug. Very hard to figure out what's going on. The following bug in PEAR along with the fix might also be worth a look (if clean IP does not scare you off from looking at it):\nhttp:\/\/pear.php.net\/bugs\/bug.php?id=1080\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lsmith",
                        "name": "lsmith",
                        "displayName": "Lukas Smith",
                        "active": true
                    },
                    "created": "2008-06-13T15:08:47.000+0000",
                    "updated": "2008-06-13T15:08:47.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/22506",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lsmith",
                        "name": "lsmith",
                        "displayName": "Lukas Smith",
                        "active": true
                    },
                    "body": "The relevant RFC's fail to discuss encoding of specialchars like semicolon, equal or newline all together: \nhttp:\/\/www.faqs.org\/rfcs\/rfc2109.html \nhttp:\/\/www.faqs.org\/rfcs\/rfc2965 \n\nGeneral consensus on the web seems to be that v0 cookies do not define any encoding. \n\nUsing urlencoding seems to be a popular approach though, supposedly for v1 cookies. That being said in this case the encoding needs to be applied to both the name and the value. \n\nThere are however obviously servers that do not support v1 cookies and which will run into issues with urlencoding. For these there should be an option to skip urlencoding entirely.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lsmith",
                        "name": "lsmith",
                        "displayName": "Lukas Smith",
                        "active": true
                    },
                    "created": "2008-06-16T07:33:20.000+0000",
                    "updated": "2008-06-16T07:33:20.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/22517",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lsmith",
                        "name": "lsmith",
                        "displayName": "Lukas Smith",
                        "active": true
                    },
                    "body": "Ok after some discussion with Dave Kristol (http:\/\/kristol.org\/cookie\/errata.html) it seems obvious that there needs to be another way to set the cookie. Indeed the standard is quite lax about encoding. The idea was that the browser should send back whatever was set and it is the job of the server to be able to interpret whatever it gets back again.\n\nSo when sending a cookie, it should only do whatever encoding that was decoded previously. In many cases urlencoding might be a reasonable default, but in many cases it isnt. So I suggest to do the following:\n\n1) also url encode\/decode the name by default\n2) provide a setRawCookie() method where its up to the user to ensure proper encoding\n3) maybe also provide a method to \"pass along\" a raw cookie in the current request, this method would parse the $_SERVER raw cookie value in a simple a way as possible. Maybe even just pass along the entire cookie in the raw form to prevent any chance of misinterpretation",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lsmith",
                        "name": "lsmith",
                        "displayName": "Lukas Smith",
                        "active": true
                    },
                    "created": "2008-06-16T23:48:41.000+0000",
                    "updated": "2008-06-16T23:48:41.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/22549",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lsmith",
                        "name": "lsmith",
                        "displayName": "Lukas Smith",
                        "active": true
                    },
                    "body": "Zend_Http_Client is also affected by this issue, as there is also code in there that forced urlencode() on cookie values.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lsmith",
                        "name": "lsmith",
                        "displayName": "Lukas Smith",
                        "active": true
                    },
                    "created": "2008-06-18T09:02:54.000+0000",
                    "updated": "2008-06-18T09:02:54.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/22551",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lsmith",
                        "name": "lsmith",
                        "displayName": "Lukas Smith",
                        "active": true
                    },
                    "body": "Here is a solution for just passing through the cookie that was send to PHP. This way when PHP is sitting between the user browser and the original server that set the cookie as a proxy, the cookie is passed through without change to the server that set the cookie.\n\nclass My_Zend_Http_Client extends Zend_Http_Client\n{\n    \/**\n     * Add a cookie to the request. If the client has no Cookie Jar, the cookies\n     * will be added directly to the headers array as \"Cookie\" headers.\n     *\n     * @param Zend_Http_Cookie|string|bool $cookie\n     * @param string|null $value If \"cookie\" is a string, this is the cookie value.\n     * @return Zend_Http_Client\n     *\/\n    public function setCookie($cookie, $value = null)\n    {\n        if ($cookie !== true) {\n            return parent::setCookie($cookie, $value);\n        }\n\n        $this->headers['cookie'] = array('Cookie', $_SERVER['HTTP_COOKIE']);\n        return $this;\n    }\n}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lsmith",
                        "name": "lsmith",
                        "displayName": "Lukas Smith",
                        "active": true
                    },
                    "created": "2008-06-18T09:21:27.000+0000",
                    "updated": "2008-06-18T09:21:27.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/22565",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                        "name": "shahar",
                        "displayName": "Shahar Evron",
                        "active": true
                    },
                    "body": "Because this issue touches both Zend_Http_Cookie, Zend_Http_Client and in a way Zend_Http_Cookiejar - I think an ideal solution would be:\n\n1. Whatever is received from the server (through Zend_Http_Cookiejar, Zend_Http_Cookie::fromString() etc. is stored and sent back just the way it is\n\n2. Any cookies added manually by the user can be either encoded or not - depending on an additional parameter to Zend_Http_Client->setCookie(). By default it will be true (do encoding) in order to maintain BC.\n\nAs a general rule, how does this sound?\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                        "name": "shahar",
                        "displayName": "Shahar Evron",
                        "active": true
                    },
                    "created": "2008-06-18T23:24:26.000+0000",
                    "updated": "2008-06-18T23:24:26.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/22566",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lsmith",
                        "name": "lsmith",
                        "displayName": "Lukas Smith",
                        "active": true
                    },
                    "body": "So to be able to pass through the cookies of the current request without any parsing I could do the following?\n\n$client = new Zend_Http_Client($url, $opts);\n$cookie = Zend_Http_Cookie::fromString($_SERVER['HTTP_COOKIE']);\n$client->setCookie($cookie);\n$response = $client->request();\n\nThat seems like a workable approach to me.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lsmith",
                        "name": "lsmith",
                        "displayName": "Lukas Smith",
                        "active": true
                    },
                    "created": "2008-06-19T00:13:31.000+0000",
                    "updated": "2008-06-19T00:13:31.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/22570",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                        "name": "shahar",
                        "displayName": "Shahar Evron",
                        "active": true
                    },
                    "body": "Yeah - that would work.\n\nIt might also make good sense to add an API to quickly do that - but honestly I think this is quite advanced usage so just to save a line of code I think it's not required.\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                        "name": "shahar",
                        "displayName": "Shahar Evron",
                        "active": true
                    },
                    "created": "2008-06-19T01:34:18.000+0000",
                    "updated": "2008-06-19T01:34:18.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/22571",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lsmith",
                        "name": "lsmith",
                        "displayName": "Lukas Smith",
                        "active": true
                    },
                    "body": "Also, while I am focusing on the encode part. The same situation also needs to be addressed for the decoding stage. The raw cookie needs to be available in the response.\n\nI do not agree that its so advanced. This situation will come up whenever PHP sits as a proxy between a browser and a server, where the server originally set the cookie. In my case its relevant because of a mashup we are doing. The reason why few users get bitten by this issue is that indeed most servers support url encoding. So the scenario is not so obscure, only that it creates problems is. Now if we make this something the user has to do on his own, then you will have all sorts of users fall into this trap over and over again (even if you document this). But if there is a method \"passBrowserCookieToServer()\", then it will be clear for people that do write a proxy what method they should use to send the cookie to the server.\n\nThanks for looking into this!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lsmith",
                        "name": "lsmith",
                        "displayName": "Lukas Smith",
                        "active": true
                    },
                    "created": "2008-06-19T01:46:28.000+0000",
                    "updated": "2008-06-19T01:46:28.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37669",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tech13",
                        "name": "tech13",
                        "displayName": "Michael Rehbein",
                        "active": false
                    },
                    "body": "Attempts to fix both:\r\nhttp:\/\/framework.zend.com\/issues\/browse\/ZF-1850\r\nhttp:\/\/framework.zend.com\/issues\/browse\/ZF-5407\r\n\r\nAdds an option to Zend_Http_Client to override the old behavior\r\n\r\nAdds an optional parameter to Zend_Http_Cookie to override the old behavior and effects how __toString behaves.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tech13",
                        "name": "tech13",
                        "displayName": "Michael Rehbein",
                        "active": false
                    },
                    "created": "2010-01-13T07:13:33.000+0000",
                    "updated": "2010-01-13T07:13:33.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37671",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tech13",
                        "name": "tech13",
                        "displayName": "Michael Rehbein",
                        "active": false
                    },
                    "body": "Matching English documentation changes for previous patch",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tech13",
                        "name": "tech13",
                        "displayName": "Michael Rehbein",
                        "active": false
                    },
                    "created": "2010-01-13T07:45:25.000+0000",
                    "updated": "2010-01-13T07:45:25.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38402",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                        "name": "shahar",
                        "displayName": "Shahar Evron",
                        "active": true
                    },
                    "body": "Thanks for the patch Michael - I've applied it in r. 21018, and it will be merged to the 1.10 release branch soon. \r\n\r\nTo not encode cookies, please set the 'encodecookies' config option to false. \r\n\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                        "name": "shahar",
                        "displayName": "Shahar Evron",
                        "active": true
                    },
                    "created": "2010-02-11T06:27:25.000+0000",
                    "updated": "2010-02-11T06:27:25.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38520",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dvershinin",
                        "name": "dvershinin",
                        "displayName": "Danila V.",
                        "active": true
                    },
                    "body": "Hi, not really fixed. I tested the patch: using http client, still getting encoded cookies even though the \"encodecookies\" option is set.\r\nWhen going through several requests and a cookie is added via CookieJar->addCookie:\r\n\r\npublic function addCookie($cookie, $ref_uri = null)\r\n    {\r\n        if (is_string($cookie)) {\r\n            $cookie = Zend_Http_Cookie::fromString($cookie, $ref_uri);\r\n....\r\n    }\r\n\r\n\r\nThe fromString does not pass the preferred option onto config, thus fromString still gets $encodeValue = true",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dvershinin",
                        "name": "dvershinin",
                        "displayName": "Danila V.",
                        "active": true
                    },
                    "created": "2010-02-17T18:47:57.000+0000",
                    "updated": "2010-02-17T18:47:57.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/42989",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mpinkston",
                        "name": "mpinkston",
                        "displayName": "Matt Pinkston",
                        "active": true
                    },
                    "body": "The encodecookies preference is still not being passed along to cookies that are added to the cookiejar from the response (as pointed out by Danila V.)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mpinkston",
                        "name": "mpinkston",
                        "displayName": "Matt Pinkston",
                        "active": true
                    },
                    "created": "2010-11-15T12:46:26.000+0000",
                    "updated": "2010-11-15T12:46:26.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/42990",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mpinkston",
                        "name": "mpinkston",
                        "displayName": "Matt Pinkston",
                        "active": true
                    },
                    "body": "Here's a patch that passes along the encodecookies value to cookies added to the cookiejar through addCookiesFromResponse.\r\nMy first patch, so I apologize if I missed a step.\r\n\r\nhttp:\/\/framework.zend.com\/issues\/secure\/attachment\/13451\/Http.diff",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mpinkston",
                        "name": "mpinkston",
                        "displayName": "Matt Pinkston",
                        "active": true
                    },
                    "created": "2010-11-15T12:49:24.000+0000",
                    "updated": "2010-11-15T12:56:20.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43031",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                        "name": "shahar",
                        "displayName": "Shahar Evron",
                        "active": true
                    },
                    "body": "The patch looks good, I have two questions:\r\n\r\n1. Have you signed a CLA? \r\n\r\n2. Do you have any unit tests that reproduce the issue you think should be committed along with this patch? ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                        "name": "shahar",
                        "displayName": "Shahar Evron",
                        "active": true
                    },
                    "created": "2010-11-16T12:18:12.000+0000",
                    "updated": "2010-11-16T12:18:12.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43057",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mpinkston",
                        "name": "mpinkston",
                        "displayName": "Matt Pinkston",
                        "active": true
                    },
                    "body": "I did sign a CLA (Feb of 2009).\r\n\r\nI haven't created any unit tests for this issue. (though I will vouch that it works in my real-world scenario)\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mpinkston",
                        "name": "mpinkston",
                        "displayName": "Matt Pinkston",
                        "active": true
                    },
                    "created": "2010-11-17T11:46:07.000+0000",
                    "updated": "2010-11-17T11:46:07.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43302",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                        "name": "shahar",
                        "displayName": "Shahar Evron",
                        "active": true
                    },
                    "body": "Patch applied, unit test added to verify resolution. \r\nCommitted to trunk in r23442, merged into 1.11 branch in 23443.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                        "name": "shahar",
                        "displayName": "Shahar Evron",
                        "active": true
                    },
                    "created": "2010-11-24T03:53:26.000+0000",
                    "updated": "2010-11-24T03:53:26.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1850\/transitions"
}