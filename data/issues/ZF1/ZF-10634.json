{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10634",
    "key": "ZF-10634",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Assertion will not work correctly with deny rule"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10634\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/4",
                "name": "Incomplete"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2010-11-18T08:01:13.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=richardzedd",
                "name": "richardzedd",
                "displayName": "richard zeddicus",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-11-03T01:45:31.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-12-06T21:27:01.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "First, define ACL (with assertion):\r\n\r\nclass MyAcls extends Zend_Acl\r\n{\r\n   public function initAcl()\r\n   {\r\n      $this->add(new Zend_Acl_Resource('R1'))\r\n           ->add(new Zend_Acl_Resource('R11'), 'R1')\r\n           ->add(new Zend_Acl_Resource('R12'), 'R1')\r\n           ->add(new Zend_Acl_Resource('R2'))\r\n           ->add(new Zend_Acl_Resource('R21'), 'R2')\r\n           ->add(new Zend_Acl_Resource('R22'), 'R2')\r\n           ->add(new Zend_Acl_Resource('R3'))\r\n           ->add(new Zend_Acl_Resource('R31'), 'R3')\r\n           ->add(new Zend_Acl_Resource('R32'), 'R3')\r\n           ->add(new Zend_Acl_Resource('R4'))\r\n           ->add(new Zend_Acl_Resource('R41'), 'R4')\r\n           ->add(new Zend_Acl_Resource('R42'), 'R4')\r\n           ->add(new Zend_Acl_Resource('R5'))\r\n           ->add(new Zend_Acl_Resource('R51'), 'R5')\r\n           ->add(new Zend_Acl_Resource('R52'), 'R5')\r\n           ->add(new Zend_Acl_Resource('R6'))\r\n           ->add(new Zend_Acl_Resource('R61'), 'R6')\r\n           ->add(new Zend_Acl_Resource('R62'), 'R6');\r\n           \r\n      \r\n      $this->addRole(new Zend_Acl_Role('admin'));\r\n \r\n      $assert = new MyAclAssert();\r\n        \r\n      $this->allow(null, 'R1', null, $assert)\r\n           ->deny('admin', 'R11', null, $assert)\r\n           ->deny('admin', 'R12', null, $assert);\r\n           \r\n      $this->allow(null, 'R2', null, $assert)\r\n           ->deny('admin', 'R21', null, $assert)\r\n           ->deny('admin', 'R22', null, $assert);\r\n           \r\n      $this->deny(null, 'R3', null, $assert)\r\n           ->allow('admin', 'R31', null, $assert)\r\n           ->allow('admin', 'R32', null, $assert);\r\n           \r\n      $this->deny(null, 'R4', null, $assert)\r\n           ->allow('admin', 'R41', null, $assert)\r\n           ->allow('admin', 'R42', null, $assert);\r\n\r\n      $this->deny(null, 'R5', null, $assert)\r\n           ->deny('admin', 'R51', null, $assert)\r\n           ->deny('admin', 'R52', null, $assert);\r\n           \r\n      $this->allow(null, 'R6', null, $assert)\r\n           ->allow('admin', 'R61', null, $assert)\r\n           ->allow('admin', 'R62', null, $assert);\r\n\r\n   }\r\n\r\n    public function getRoles()\r\n    {\r\n        if (method_exists($this->_getRoleRegistry(), 'getRoles')) {\r\n            return parent::getRoles();\r\n        } else {\r\n            return array('admin');\r\n        }\r\n    }\r\n\r\n    public function getResources()\r\n    {\r\n        return array_keys($this->_resources);\r\n    }\r\n  \r\n  \r\n    public function test()\r\n    {\r\n      foreach ($this->getRoles() as $role) {\r\n        echo \"with role : '$role'\\n\";\r\n        foreach ($this->getResources() as $resource) {\r\n          echo \"acces on $resource is : \" . ($this->isAllowed($role, $resource) ? '1':'0').\"\\n\";\r\n        }\r\n      }\r\n    }\r\n }\r\n\r\n\r\nclass MyAclAssert implements Zend_Acl_Assert_Interface\r\n  {\r\n      public function assert(Zend_Acl $acl, \r\n                             Zend_Acl_Role_Interface $role = null,\r\n                             Zend_Acl_Resource_Interface $resource = null, \r\n                             $privilege = null)\r\n      {\r\n          switch ($resource->getResourceId()) {\r\n              case 'R5':\r\n              case 'R3':\r\n              case 'R1':\r\n                  return true;\r\n                  \r\n              case 'R6':\r\n              case 'R4':    \r\n              case 'R2':\r\n                  return false;\r\n   \r\n              case 'R11':\r\n              case 'R21':\r\n              case 'R31':\r\n              case 'R41':\r\n              case 'R51':\r\n              case 'R61':\r\n                  return true;\r\n                  \r\n              case 'R12':\r\n              case 'R22':\r\n              case 'R32':\r\n              case 'R42':\r\n              case 'R52':\r\n              case 'R62':\r\n                  return false;\r\n                  \r\n              \r\n              default:\r\n                  if (null === $resource) {\r\n                      return true;\r\n                  }\r\n                  \r\n                  if ($acl->hasParent($resource)) {\r\n                      return $this->assert($acl, $role, $acl->getParentOf($resource), $privilege);\r\n                  }\r\n                  \r\n                  return true;\r\n          }\r\n      }\r\n  }\r\n\r\nNow test this rule :\r\n$acl = new MyAcls();\r\n$acl->initAcl();\r\n$acl->test();\r\n\r\nbefore and for 1.9.0, the result is:\r\n> with role : 'admin'\r\n> acces on R1 is : 1\r\n> acces on R11 is : 0\r\n> acces on R12 is : 1\r\n> acces on R2 is : 0\r\n> acces on R21 is : 0\r\n> acces on R22 is : 0\r\n> acces on R3 is : 0\r\n> acces on R31 is : 1\r\n> acces on R32 is : 0\r\n> acces on R4 is : 0\r\n> acces on R41 is : 1\r\n> acces on R42 is : 0\r\n> acces on R5 is : 0\r\n> acces on R51 is : 0\r\n> acces on R52 is : 0\r\n> acces on R6 is : 0\r\n> acces on R61 is : 1\r\n> acces on R62 is : 0\r\n\r\nafter 1.9.0, the result is:\r\n> with role : 'admin'\r\n> acces on R1 is : 1\r\n> acces on R11 is : 0\r\n> acces on R12 is : 0\r\n> acces on R2 is : 0\r\n> acces on R21 is : 0\r\n> acces on R22 is : 0\r\n> acces on R3 is : 0\r\n> acces on R31 is : 1\r\n> acces on R32 is : 0\r\n> acces on R4 is : 0\r\n> acces on R41 is : 1\r\n> acces on R42 is : 0\r\n> acces on R5 is : 0\r\n> acces on R51 is : 0\r\n> acces on R52 is : 0\r\n> acces on R6 is : 0\r\n> acces on R61 is : 1\r\n> acces on R62 is : 0\r\n\r\nThe problem is for resource R12: It's seems the rule is not understood.\r\n\r\n\r\n\r\n\r\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10634\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                "name": "ralph",
                "displayName": "Ralph Schindler",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10350",
                    "id": 10350,
                    "description": "Mini Release",
                    "name": "1.9.1",
                    "userReleaseDate": "11\/Aug\/09",
                    "archived": false,
                    "releaseDate": "2009-08-11",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10361",
                    "id": 10361,
                    "description": "Mini Release",
                    "name": "1.9.2",
                    "userReleaseDate": "25\/Aug\/09",
                    "archived": false,
                    "releaseDate": "2009-08-25",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10362",
                    "id": 10362,
                    "description": "Mini Release",
                    "name": "1.9.3",
                    "userReleaseDate": "22\/Sep\/09",
                    "archived": false,
                    "releaseDate": "2009-09-22",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10370",
                    "id": 10370,
                    "description": "Mini Release",
                    "name": "1.9.4",
                    "userReleaseDate": "13\/Oct\/09",
                    "archived": false,
                    "releaseDate": "2009-10-13",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10380",
                    "id": 10380,
                    "description": "Mini Release",
                    "name": "1.9.5",
                    "userReleaseDate": "27\/Oct\/09",
                    "archived": false,
                    "releaseDate": "2009-10-27",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10390",
                    "id": 10390,
                    "description": "Mini Release",
                    "name": "1.9.6",
                    "userReleaseDate": "24\/Nov\/09",
                    "archived": false,
                    "releaseDate": "2009-11-24",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10400",
                    "id": 10400,
                    "description": "Mini Release",
                    "name": "1.9.7",
                    "userReleaseDate": "11\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-11",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10450",
                    "id": 10450,
                    "description": "Mini Release",
                    "name": "1.9.8",
                    "userReleaseDate": "01\/Apr\/10",
                    "archived": false,
                    "releaseDate": "2010-04-01",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10360",
                    "id": 10360,
                    "description": "Minor Release",
                    "name": "1.10.0",
                    "userReleaseDate": "27\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-27",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10412",
                    "id": 10412,
                    "description": "Mini Release",
                    "name": "1.10.1",
                    "userReleaseDate": "10\/Feb\/10",
                    "archived": false,
                    "releaseDate": "2010-02-10",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10430",
                    "id": 10430,
                    "description": "Mini Release",
                    "name": "1.10.2",
                    "userReleaseDate": "24\/Feb\/10",
                    "archived": false,
                    "releaseDate": "2010-02-24",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10440",
                    "id": 10440,
                    "description": "Mini Release",
                    "name": "1.10.3",
                    "userReleaseDate": "01\/Apr\/10",
                    "archived": false,
                    "releaseDate": "2010-04-01",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10451",
                    "id": 10451,
                    "description": "Mini Release",
                    "name": "1.10.4",
                    "userReleaseDate": "28\/Apr\/10",
                    "archived": false,
                    "releaseDate": "2010-04-28",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10460",
                    "id": 10460,
                    "description": "Mini Release",
                    "name": "1.10.5",
                    "userReleaseDate": "26\/May\/10",
                    "archived": false,
                    "releaseDate": "2010-05-26",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10470",
                    "id": 10470,
                    "description": "Mini Release",
                    "name": "1.10.6",
                    "userReleaseDate": "22\/Jun\/10",
                    "archived": false,
                    "releaseDate": "2010-06-22",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10480",
                    "id": 10480,
                    "description": "Mini Release",
                    "name": "1.10.7",
                    "userReleaseDate": "28\/Jul\/10",
                    "archived": false,
                    "releaseDate": "2010-07-28",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10490",
                    "id": 10490,
                    "description": "Mini Release",
                    "name": "1.10.8",
                    "userReleaseDate": "25\/Aug\/10",
                    "archived": false,
                    "releaseDate": "2010-08-25",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10420",
                    "id": 10420,
                    "description": "Minor Release",
                    "name": "1.11.0",
                    "userReleaseDate": "02\/Nov\/10",
                    "archived": false,
                    "releaseDate": "2010-11-02",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10070",
                    "id": 10070,
                    "name": "Zend_Acl",
                    "description": "Access control list authorization component",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/42928",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "Can you please supply a more simplified script to demonstrate the issue? This is hard to follow with so many R**'s in it.\r\n\r\nThanks, Ralph",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2010-11-10T20:36:09.000+0000",
                    "updated": "2010-11-10T20:36:09.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43071",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "Please add a more concise demonstration of the issue and reopen.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2010-11-18T08:01:13.000+0000",
                    "updated": "2010-11-18T08:01:13.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43174",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=richardzedd",
                        "name": "richardzedd",
                        "displayName": "richard zeddicus",
                        "active": true
                    },
                    "body": "Hello,\r\n\r\nSorry for my bad explain of issue :( and also about I didn't answer before.\r\n\r\nI saw this issue when I would upgrade my zend framework from 1.9.0 to an newer version\r\n\r\nI hope followed demonstration is better:\r\n{code}\r\n<?php\r\nrequire_once 'Zend\/Acl.php';\r\nrequire_once 'Zend\/Acl\/Role.php';\r\nrequire_once 'Zend\/Acl\/Resource.php';\r\n\r\nclass MyAcls extends Zend_Acl\r\n{\r\n    public function initAcl()\r\n    {\r\n        $this->add(new Zend_Acl_Resource('group'))\r\n             ->add(new Zend_Acl_Resource('Public'), 'group');\r\n      \r\n        $this->addRole(new Zend_Acl_Role('admin'));\r\n\r\n        $assert = new MyAclAssert();\r\n        \r\n        $this->allow(null, 'group', null, $assert)\r\n             ->deny('isAdmin', 'Public', null, $assert);\r\n\r\n    }\r\n\r\n    public function getResources()\r\n    {\r\n        return array_keys($this->_resources);\r\n    }\r\n\r\n    public function test()\r\n    {\r\n        foreach ($this->getResources() as $resource) {\r\n            echo \"access to $resource is : \" . ($this->isAllowed('admin', $resource) ? 'on':'off').\"\\n\";\r\n        }\r\n    }\r\n}\r\n\r\nclass MyAclAssert implements Zend_Acl_Assert_Interface\r\n{\r\n    public function assert(Zend_Acl $acl, \r\n                           Zend_Acl_Role_Interface $role = null,\r\n                           Zend_Acl_Resource_Interface $resource = null, \r\n                           $privilege = null)\r\n    {\r\n         switch ($resource->getResourceId()) {\r\n             case 'group':\r\n                 return true;\r\n                  \r\n             case 'Public':\r\n                 return false;\r\n   \r\n             default:\r\n                 return true;\r\n              \r\n         }\r\n    }\r\n}\r\n\r\n$acl = new MyAcls();\r\n$acl->initAcl();\r\n$acl->test();\r\n\r\n{code}\r\n\r\nResults are:\r\n\r\nwith ZendFramework 1.9.0\r\nacces to group is : on\r\nacces to Public is : on\r\n\r\nwith ZendFramework 1.10.8\r\nacces to group is : on\r\nacces to Public is : off\r\n\r\nAs a lot of resources, roles and rules in my acl i'm not enjoy to modify it :(",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2010-11-20T01:42:30.000+0000",
                    "updated": "2010-11-27T10:46:31.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43362",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "Can you explain this line:\r\n\r\n{code}\r\n->deny('isAdmin', 'Public', null, $assert);\r\n{code}\r\n\r\nI am not sure what the reference to 'isAdmin' is.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2010-11-27T11:01:35.000+0000",
                    "updated": "2010-11-27T11:01:35.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43390",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=richardzedd",
                        "name": "richardzedd",
                        "displayName": "richard zeddicus",
                        "active": true
                    },
                    "body": "Effectivly, this line is wrong:\r\n{code}\r\n->deny('isAdmin', 'Public', null, $assert);\r\n{code}\r\n\r\nThe correct line is:\r\n{code}\r\n->deny('admin', 'Public', null, $assert);\r\n{code}\r\n\r\nI changed one of two name of role after copy\/paste and I forgot the second: a stupid mistake...\r\n\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=richardzedd",
                        "name": "richardzedd",
                        "displayName": "richard zeddicus",
                        "active": true
                    },
                    "created": "2010-11-29T07:59:40.000+0000",
                    "updated": "2010-11-29T07:59:40.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43502",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=richardzedd",
                        "name": "richardzedd",
                        "displayName": "richard zeddicus",
                        "active": true
                    },
                    "body": "Hi,\r\n\r\nmy last comment is confusing (it's sample that is wrong not the problem) so to recap, this sample code does not work as expected:\r\n\r\n{code}\r\n<?php\r\nrequire_once 'Zend\/Acl.php';\r\nrequire_once 'Zend\/Acl\/Role.php';\r\nrequire_once 'Zend\/Acl\/Resource.php';\r\n\r\nclass MyAcls extends Zend_Acl\r\n{\r\n    public function initAcl()\r\n    {\r\n        $this->add(new Zend_Acl_Resource('group'))\r\n             ->add(new Zend_Acl_Resource('Public'), 'group');\r\n      \r\n        $this->addRole(new Zend_Acl_Role('admin'));\r\n\r\n        $assert = new MyAclAssert();\r\n        \r\n        $this->allow(null, 'group', null, $assert)\r\n             ->deny('admin', 'Public', null, $assert);\r\n\r\n    }\r\n\r\n    public function getResources()\r\n    {\r\n        return array_keys($this->_resources);\r\n    }\r\n\r\n    public function test()\r\n    {\r\n        foreach ($this->getResources() as $resource) {\r\n            echo \"access to $resource is : \" . ($this->isAllowed('admin', $resource) ? 'on':'off').\"\\n\";\r\n        }\r\n    }\r\n}\r\n\r\nclass MyAclAssert implements Zend_Acl_Assert_Interface\r\n{\r\n    public function assert(Zend_Acl $acl, \r\n                           Zend_Acl_Role_Interface $role = null,\r\n                           Zend_Acl_Resource_Interface $resource = null, \r\n                           $privilege = null)\r\n    {\r\n         switch ($resource->getResourceId()) {\r\n             case 'group':\r\n                 return true;\r\n                  \r\n             case 'Public':\r\n                 return false;\r\n   \r\n             default:\r\n                 return true;\r\n              \r\n         }\r\n    }\r\n}\r\n\r\n$acl = new MyAcls();\r\n$acl->initAcl();\r\n$acl->test();\r\n{code}\r\n\r\nResults are:\r\nwith ZendFramework 1.9.0 (expected)\r\nacces to group is : on\r\nacces to Public is : on\r\n\r\nwith ZendFramework 1.10.8 (unexpected)\r\nacces to group is : on\r\nacces to Public is : off\r\n\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=richardzedd",
                        "name": "richardzedd",
                        "displayName": "richard zeddicus",
                        "active": true
                    },
                    "created": "2010-12-06T21:26:54.000+0000",
                    "updated": "2010-12-06T21:26:54.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10634\/transitions"
}