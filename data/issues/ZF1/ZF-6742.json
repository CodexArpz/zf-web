{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6742",
    "key": "ZF-6742",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "ArrayOfTypeSequence strategy doesn't support complex types"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6742\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10320",
                    "id": 10320,
                    "description": "Minor Release",
                    "name": "1.9.0",
                    "userReleaseDate": "31\/Jul\/09",
                    "archived": false,
                    "releaseDate": "2009-07-31",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-07-21T14:55:45.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=fcrespel",
                "name": "fcrespel",
                "displayName": "Fabien Crespel",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-05-20T05:55:40.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-07-21T14:55:45.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "The {{ArrayOfTypeSequence}} WSDL strategy can only add arrays of *basic xsd types* like int, string, etc. Currently it is not possible to use it with *singular complex types* or *arrays of complex types*.\n\nI know there is also an {{ArrayOfTypeComplex}} strategy, but it uses {{soap-enc:Array}} arrays while {{ArrayOfTypeSequence}} uses a sequence containing an *unbounded element*. The latter is WS-I Basic Profile 1.1 compliant, the former isn't but still commonly used, so it makes sense to have both. Additionally, {{ArrayOfTypeSequence}} supports *multi-dimensional* arrays (like {{MyComplexType[][]}}) while {{ArrayOfTypeComplex}} doesn't.\n\nThe *patch* attached to this issue adds support for complex types in {{ArrayOfTypeSequence}} the same way {{ArrayOfTypeComplex}} does: by extending the {{DefaultComplexType}} strategy and calling {{parent::addComplexType($type)}} when appropriate.\n\nNow, I'm not sure this patch is the best way to do things... Ideally I think there should be 2 kinds of strategies in {{Zend_Soap_Wsdl}}: one for singular complex types, and one for arrays. But as it is, this patch is the easiest solution and it imitates what already exists in {{ArrayOfTypeComplex}}. Comments are welcome :)"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6742\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=beberlei",
                "name": "beberlei",
                "displayName": "Benjamin Eberlei",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-6875",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6875",
                    "type": {
                        "name": "Dependency",
                        "direction": "INBOUND",
                        "description": "is dependecy of"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/12016",
                    "filename": "ArrayOfTypeSequence.php",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=kevinnuut",
                        "name": "kevinnuut",
                        "displayName": "Kevin Nuut",
                        "active": true
                    },
                    "created": "2009-06-16T16:32:08.000+0000",
                    "size": 4958,
                    "mimeType": "image\/",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/12016\/ArrayOfTypeSequence.php"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/12017",
                    "filename": "Zend_Soap_Wsdl_Strategy_ArrayOfTypeSequence-ComplexTypes-v2.diff",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=fcrespel",
                        "name": "fcrespel",
                        "displayName": "Fabien Crespel",
                        "active": true
                    },
                    "created": "2009-06-16T17:35:19.000+0000",
                    "size": 2786,
                    "mimeType": "application\/octet-stream",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/12017\/Zend_Soap_Wsdl_Strategy_ArrayOfTypeSequence-ComplexTypes-v2.diff"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/11937",
                    "filename": "Zend_Soap_Wsdl_Strategy_ArrayOfTypeSequence-ComplexTypes.diff",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=fcrespel",
                        "name": "fcrespel",
                        "displayName": "Fabien Crespel",
                        "active": true
                    },
                    "created": "2009-05-20T05:56:23.000+0000",
                    "size": 1963,
                    "mimeType": "text\/x-patch",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/11937\/Zend_Soap_Wsdl_Strategy_ArrayOfTypeSequence-ComplexTypes.diff"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10241",
                    "id": 10241,
                    "description": "Minor Release",
                    "name": "1.8.0",
                    "userReleaseDate": "30\/Apr\/09",
                    "archived": false,
                    "releaseDate": "2009-04-30",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10310",
                    "id": 10310,
                    "description": "Mini Release",
                    "name": "1.8.1",
                    "userReleaseDate": "12\/May\/09",
                    "archived": false,
                    "releaseDate": "2009-05-12",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10098",
                    "id": 10098,
                    "name": "Zend_Soap_Wsdl",
                    "description": "Class for accessing SOAP WSDL documents.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31476",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=beberlei",
                        "name": "beberlei",
                        "displayName": "Benjamin Eberlei",
                        "active": true
                    },
                    "body": "Assigned to me",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=beberlei",
                        "name": "beberlei",
                        "displayName": "Benjamin Eberlei",
                        "active": true
                    },
                    "created": "2009-05-29T10:42:53.000+0000",
                    "updated": "2009-05-29T10:42:53.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31904",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=kevinnuut",
                        "name": "kevinnuut",
                        "displayName": "Kevin Nuut",
                        "active": true
                    },
                    "body": "I really appreciate that this patch was added.  It has been working great for acheiving WS-I compliance.  Things work great when defining arrays of simpleTypes and complexTypes, such as:\n\n@param string[]\n@param Zend_SomeMadeUpClass[]\n\nHowever, for double nested arrays to work, a patch must be made, such as:\n\n@param string[][]\n@param Zend_SomeMadeUpClass[][]\n\nThe problem is that each array creates a complex type of 'ArrayofString' or 'ArrayofZend_SomeMadeUpClass' with the appropriate 'xsd:string' or 'tns:Zend_SomeMadeUpClass' type, but when complex types of those complex types are made, the setAttribute('type', $childTypeName); on line 136 does not prepend 'tns:' for 'ArrayofString' or 'ArrayofZend_SomeMadeUpClass'.\n\nBasically, I made it so the function prepends 'tns:' when child exists in the context type list.\n\n    protected function _addElementFromWsdlAndChildTypes($arrayType, $childTypeName)\n    {\n        if (!in_array($arrayType, $this->getContext()->getTypes())) {\n            \/\/ IF STATEMENT ADDED FOR PATCH\n            if (in_array($childTypeName, $this->getContext()->getTypes())) {\n                $childTypeName = 'tns:' . $childTypeName;\n            }\n\n            $dom = $this->getContext()->toDomDocument();",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=kevinnuut",
                        "name": "kevinnuut",
                        "displayName": "Kevin Nuut",
                        "active": true
                    },
                    "created": "2009-06-16T16:32:12.000+0000",
                    "updated": "2009-06-16T16:32:12.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31905",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=kevinnuut",
                        "name": "kevinnuut",
                        "displayName": "Kevin Nuut",
                        "active": true
                    },
                    "body": "I also want to add that this makes it possible to do as many array nestings as you like.\n\nI ran tests through SoapUI with tenth level nested arrays of complextypes (because who doesn't want that).",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=kevinnuut",
                        "name": "kevinnuut",
                        "displayName": "Kevin Nuut",
                        "active": true
                    },
                    "created": "2009-06-16T16:36:16.000+0000",
                    "updated": "2009-06-16T16:36:16.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31908",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=fcrespel",
                        "name": "fcrespel",
                        "displayName": "Fabien Crespel",
                        "active": true
                    },
                    "body": "Oh you're right, I hadn't taken that case into account - thanks for testing!\n\nHere is an updated version of my patch with a different fix.\n\nGiven that {{_getTypeNameBasedOnNestingLevel()}} returns a prefixed type when it's singular, I thought it would be better to make its behavior consistent and return a prefixed {{ArrayOf}} type (with \"tns:\").\n\nIn consequence, I added a {{substr()}} to remove any prefix from {{$complexTypeName}} in {{addComplexType()}} (line 40). This way, {{_addElementFromWsdlAndChildTypes()}} is always given the correct parameters without having to check\/modify them.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=fcrespel",
                        "name": "fcrespel",
                        "displayName": "Fabien Crespel",
                        "active": true
                    },
                    "created": "2009-06-16T17:35:20.000+0000",
                    "updated": "2009-06-16T17:35:20.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31912",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=kevinnuut",
                        "name": "kevinnuut",
                        "displayName": "Kevin Nuut",
                        "active": true
                    },
                    "body": "Great work Fabien.  All testing on my end works like a charm with your patch.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=kevinnuut",
                        "name": "kevinnuut",
                        "displayName": "Kevin Nuut",
                        "active": true
                    },
                    "created": "2009-06-16T20:21:31.000+0000",
                    "updated": "2009-06-16T20:21:31.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32807",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=beberlei",
                        "name": "beberlei",
                        "displayName": "Benjamin Eberlei",
                        "active": true
                    },
                    "body": "I applied the patch to trunk, it should be included in version 1.9",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=beberlei",
                        "name": "beberlei",
                        "displayName": "Benjamin Eberlei",
                        "active": true
                    },
                    "created": "2009-07-21T14:55:43.000+0000",
                    "updated": "2009-07-21T14:55:43.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6742\/transitions"
}