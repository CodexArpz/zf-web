{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4276",
    "key": "ZF-4276",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Paginator with Zend_Paginator_Adapter_DbSelect (maybe with others, too) displays all found results on each page"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4276\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/5",
                "name": "Cannot Reproduce"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2008-10-10T13:58:19.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=chameleon",
                "name": "chameleon",
                "displayName": "Benjamin-Timm Broich",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-09-13T02:25:20.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2008-10-10T13:58:19.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I think that there is something wrong with the Zend\/Paginator.php file thats included in ZF 1.6.0.\nIn 1.6.0-RC1 everything works fine, than after updating to RC2 same code does not works like it worked in RC1. After updating to 1.6.0 the error is still there.\n\nThe following code works perfect under RC1:\n\n$select = $db->select()\n\t->from('foo')\n\t->where(\"bar LIKE ?\", \"%baz%\");\n\n$paginator = new Zend_Paginator(new Zend_Paginator_Adapter_DbSelect($select));\n$paginator->setItemCountPerPage(5);\n$paginator->setCurrentPageNumber($page);\n\nNow under 1.6.0 (and RC2) the code does not work anymore. Every page displays always 8 results (the total number of entries found bei the select query). Under RC1 the 5 results set with setItemCountPerPage are successfully displayed, this version works.\n\nI looked at the single version and tried them until the code produces the above mentioned \"error\".\n\nhttp:\/\/framework.zend.com\/code\/browse\/Zend_Framework\/standard\/branches\/release-1.6\/library\/Zend\/Paginator.php?r1=10308&r2=10348\n\nThe file before \"Merge Paginator changes to the release-1.6 branch\" was done works fine, but after that, it does not work anymore.\n\nUPDATE: In 1.6.1 the same error appears again...\n\nUPDATE 2: Can't post any comments? I tried to reverse the function calls, without success, it still does not work (same error as before with the 1.6.1 file)\n\nUPDATE 3: If I copy the working version of Paginator.php back and try to call setCurrentPageNumber first and after that  setItemCountPerPage, it does not work too if that could be a hint? With countperpage first and currentpagenumber as second function it works.\n\nUPDATE 4: The three lines i mentioned above are the only ones I have in my code. This is the line in my view script: <?=$this->paginationControl($this->paginator, 'Sliding', 'pagination.phtml')?>"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4276\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=norm2782",
                "name": "norm2782",
                "displayName": "Jurrien Stutterheim",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10240",
                    "id": 10240,
                    "description": "Minor Release",
                    "name": "1.6.0",
                    "userReleaseDate": "02\/Sep\/08",
                    "archived": false,
                    "releaseDate": "2008-09-02",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10201",
                    "id": 10201,
                    "description": "Mini Release",
                    "name": "1.6.1",
                    "userReleaseDate": "15\/Sep\/08",
                    "archived": false,
                    "releaseDate": "2008-09-15",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10315",
                    "id": 10315,
                    "name": "Zend_Paginator",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24572",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=norm2782",
                        "name": "norm2782",
                        "displayName": "Jurrien Stutterheim",
                        "active": true
                    },
                    "body": "This looks a bit like an issue we've had before the first RC series. Just to gain more insight in where this is going wrong, could you reverse the calls to setItemCountPerPage and setCurrentPageNumber?\nE.g:\n{code}\n$paginator = new Zend_Paginator(new Zend_Paginator_Adapter_DbSelect($select));\n$paginator->setCurrentPageNumber($page);\n$paginator->setItemCountPerPage(5);\n{code}\nInstead of what you described in your original post.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=norm2782",
                        "name": "norm2782",
                        "displayName": "Jurrien Stutterheim",
                        "active": true
                    },
                    "created": "2008-09-18T06:58:20.000+0000",
                    "updated": "2008-09-18T06:58:20.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24654",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=norm2782",
                        "name": "norm2782",
                        "displayName": "Jurrien Stutterheim",
                        "active": true
                    },
                    "body": "Sorry to report that I haven't had the time to thoroughly look at this issue. \nCan you check to make sure you haven't set the default scrollingstyle to All with Zend_Paginator::setDefaultScrollingStyle('All'); ? \nAnd that you're not specifying the All scrollingstyle in the view helper, like so: echo $this->paginationControl($this->paginator, 'All');",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=norm2782",
                        "name": "norm2782",
                        "displayName": "Jurrien Stutterheim",
                        "active": true
                    },
                    "created": "2008-09-25T06:28:32.000+0000",
                    "updated": "2008-09-25T06:28:32.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24806",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cgmartin",
                        "name": "cgmartin",
                        "displayName": "Chris Martin",
                        "active": true
                    },
                    "body": "I am using Zend_Paginator successfully with Zend_Paginator_Adapter_DbSelect and cannot reproduce the reported issue.\n\nUsing: http:\/\/framework.zend.com\/svn\/framework\/standard\/branches\/release-1.6\/ (rev 11673)\n\n{code}\n$postSelect = $this->_db->select()\n                                      ->from(array('c' => 'content'))\n                                      ->join(array('u' => 'user'),\n                                                'u.id = c.author_user_id',\n                                                array('author' => 'u.displayname'))\n                                      ->where('c.content_type_id = ?', 1) \/\/ post type\n                                      ->where('c.publish_date < NOW()')   \/\/ no future posts\n                                      ->order(array('c.publish_date DESC', 'c.created_date DESC'));\n\n$paginator = Zend_Paginator::factory($postSelect);\n$paginator->setCurrentPageNumber($this->_getParam('page'));\n$paginator->setItemCountPerPage(3);\n$paginator->setView($this->view);\n{code}\n\nI have tried reversing the calls to setItemCountPerPage and setCurrentPageNumber, but it displays 3 items per page correctly. The order of these calls does not appear to matter. Changing the setItemCountPerPage to 5 also works as expected.\n\nI have also tried \"Sliding\" and \"All\" scrolling styles, and both worked correctly.\n\nLet me know if I can help with any other tests - it appears to be working fine for me.\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cgmartin",
                        "name": "cgmartin",
                        "displayName": "Chris Martin",
                        "active": true
                    },
                    "created": "2008-10-04T19:18:05.000+0000",
                    "updated": "2008-10-04T19:18:05.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24874",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=norm2782",
                        "name": "norm2782",
                        "displayName": "Jurrien Stutterheim",
                        "active": true
                    },
                    "body": "Could you perhaps zip and attach a minimal use case, including some data? I'm having a hard time reproducing the bug =)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=norm2782",
                        "name": "norm2782",
                        "displayName": "Jurrien Stutterheim",
                        "active": true
                    },
                    "created": "2008-10-08T08:34:42.000+0000",
                    "updated": "2008-10-08T08:34:42.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24900",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=norm2782",
                        "name": "norm2782",
                        "displayName": "Jurrien Stutterheim",
                        "active": true
                    },
                    "body": "Also, could you please post some server specs? PHP & DB version and DB type etc.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=norm2782",
                        "name": "norm2782",
                        "displayName": "Jurrien Stutterheim",
                        "active": true
                    },
                    "created": "2008-10-08T12:51:50.000+0000",
                    "updated": "2008-10-08T12:51:50.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/25013",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=norm2782",
                        "name": "norm2782",
                        "displayName": "Jurrien Stutterheim",
                        "active": true
                    },
                    "body": "Closing issue because I can't seem to reproduce it. Please feel free to reopen it if this is still an issue.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=norm2782",
                        "name": "norm2782",
                        "displayName": "Jurrien Stutterheim",
                        "active": true
                    },
                    "created": "2008-10-10T13:58:19.000+0000",
                    "updated": "2008-10-10T13:58:19.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4276\/transitions"
}