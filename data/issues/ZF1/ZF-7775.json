{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7775",
    "key": "ZF-7775",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Uncaught exception 'ZendX_Console_Process_Exception' with message 'Unable to create SHM segments for process communications'"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7775\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/3",
                "name": "Duplicate"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-12-17T08:04:31.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tuvok",
                "name": "tuvok",
                "displayName": "Tuvok",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-09-04T21:53:56.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-01-04T14:30:35.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Calling ->start()  causes an odd error:\n\n[05-Sep-2009 00:20:43] PHP Fatal error:  Uncaught exception 'ZendX_Console_Process_Exception' with message 'Unable to create SHM segments for process communications' in \/opt\/GR_Encoder\/lib\/ZendX\/Console\/Process\/Unix.php:211\nStack trace:\n#0 \/opt\/GR_Encoder\/lib\/GR_Encoder.php(327): ZendX_Console_Process_Unix->start()\n#1 {main}\n\nAll environmental requirements are met for this to work. I have all required libs and this is already checked for in the code.\n\nThis error is being caused by:\n{code}\nif (!$this->_ipcIsOkay) {\n            require_once 'ZendX\/Console\/Process\/Exception.php';\n            throw new ZendX_Console_Process_Exception('Unable to create SHM segments for process communications');\n}\n{code}\n\nWhich is ultimately:\n{code}\nif ($this->_createIpcSegment() && $this->_createIpcSemaphore()) {\n $this->_ipcIsOkay = true;\n} else {\n $this->_ipcIsOkay = false;\n}\n{code}\n\nAnd for the big finally:\n{code}\n    \/**\n     * Create IPC semaphore\n     *\n     * @throws ZendX_Console_Process_Exception When semaphore can't be created\n     * @return boolean\n     *\/\n    private function _createIpcSemaphore()\n    {\n        $this->_ipcSemFile = realpath(sys_get_temp_dir()) . '\/' . rand() . $this->_name . '.sem';\n        touch($this->_ipcSemFile);\n\n        $semKey = ftok($this->_ipcSemFile, 't');\n        if ($semKey === -1) {\n            require_once 'ZendX\/Console\/Process\/Exception.php';\n            throw new ZendX_Console_Process_Exception('Could not create semaphore');\n        }\n\n        $this->_internalSemKey = @shmop_open($semKey, 'c', 0644, 10);\n\n        if (!$this->_internalSemKey) {\n            @unlink($this->_ipcSemFile);\n            return false;\n        }\n\n        return true;\n    }\n{code}\n\nThe problem is that this isn't happening:\n        $this->_internalSemKey = @shmop_open($semKey, 'c', 0644, 10);\n\nI've removed the @ and changed to error_reporting(E_ALL) with no new news.\n\nI'm on Linux 2.6.21.7-2.fc8xen #1 SMP Fri Feb 15 12:39:36 EST 2008 i686 athlon i386 GNU\/Linux\n\nDoes anyone know the secret ? because I'd like to use this lib. I suspect it may be a system issue related to some junk in \/proc\/... ? I really don't know."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7775\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dasprid",
                "name": "dasprid",
                "displayName": "Ben Scholzen",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-6047",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6047",
                    "type": {
                        "name": "Related",
                        "direction": "OUTBOUND",
                        "description": "is related to"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10361",
                    "id": 10361,
                    "description": "Mini Release",
                    "name": "1.9.2",
                    "userReleaseDate": "25\/Aug\/09",
                    "archived": false,
                    "releaseDate": "2009-08-25",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10374",
                    "id": 10374,
                    "name": "ZendX_Console_Process_Unix",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36983",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=andyl56",
                        "name": "andyl56",
                        "displayName": "Andrew Stoltz",
                        "active": true
                    },
                    "body": "This is caused by some memory leak issues that have existed in this class. See http:\/\/framework.zend.com\/issues\/browse\/ZF-6047#comment_29555_header_letssurf for how to clean up after the mess.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=andyl56",
                        "name": "andyl56",
                        "displayName": "Andrew Stoltz",
                        "active": true
                    },
                    "created": "2009-12-17T08:03:59.000+0000",
                    "updated": "2009-12-17T08:03:59.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37374",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=flo",
                        "name": "flo",
                        "displayName": "Florian Hoenig",
                        "active": false
                    },
                    "body": "I've been looking into this a bit. First of all, you have to cleanly exit the process. Check the issue on isRunning() and fix that first. Then you have to call stop() on the process instance in the parent after all child processes have completed:\r\n\r\n$process1 = new MyProcess();\r\n$process1->start();\r\n\r\nwhile ($process1->isRunning()) {\r\n    echo \"waiting and sleeping...\\n\";\r\n    sleep(1);\r\n}\r\n\r\n$process1->stop();\r\nexit();\r\n\r\nNow you can check \"ipcs -m\" and see that all ipc segments have been free'ed up again.\r\n\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=flo",
                        "name": "flo",
                        "displayName": "Florian Hoenig",
                        "active": false
                    },
                    "created": "2010-01-04T14:30:34.000+0000",
                    "updated": "2010-01-04T14:30:34.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7775\/transitions"
}