{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4111",
    "key": "ZF-4111",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Form_Element_Select auto InArray validator incorrect\/unintended behaviour"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4111\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/2",
                "name": "Won't Fix"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2011-08-14T14:22:17.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=amnuts",
                "name": "amnuts",
                "displayName": "Andrew Collington",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-08-28T15:22:03.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-08-14T14:22:17.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "When creating an element that allows for multiple selections, the InArray validator automatically set returns false when you would expect it to return true....\r\n\r\nIf, for example, Zend_Form_Element_Multiselect were used to produce the following select list:\r\n\r\n<select name=\"feeds[]\" id=\"feeds\" multiple=\"multiple\" size=\"5\">\r\n   <option value=\"http:\/\/localhost\/feed1\" label=\"Feed 1\" selected=\"selected\">Feed 1<\/option>\r\n   <option value=\"http:\/\/localhost\/feed2\" label=\"Feed 2\">Feed 2<\/option>\r\n<\/select> \r\n\r\nand I selected both options, then what would be expected to return on validation would be true as both of the options I'm selecting are in the select list.  However, in the InArray isValid() method, the value and haystack look like:\r\n\r\nValue = array(2) {\r\n[0] => string(22) \"http:\/\/localhost\/feed1\"\r\n[1] => string(22) \"http:\/\/localhost\/feed2\"\r\n}\r\n\r\nHaystack = array(2) {\r\n[0] => string(22) \"http:\/\/localhost\/feed1\"\r\n[1] => string(22) \"http:\/\/localhost\/feed2\"\r\n} \r\n\r\nwhich means that the in_array method is looking for an instance of an array containing feed1 and feed2 in the haystack array, which itself is one-dimensional.\r\n\r\n<?php\r\n\r\n$value = array(\r\n   \"http:\/\/localhost\/feed1\",\r\n   \"http:\/\/localhost\/feed2\"\r\n);\r\n\r\n$haystack = array(\r\n   \"http:\/\/localhost\/feed1\",\r\n   \"http:\/\/localhost\/feed2\"\r\n);\r\n\r\nvar_dump(in_array($value, $haystack, false)); \r\n\r\n\/\/ bool(false)\r\n\r\n?>\r\n\r\nCorrect behaviour for the in_array function, but incorrect\/unintended usage for validating that the options selected are all contained within the select list.\r\n\r\nThis probably relates to ZF-3985."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4111\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [
                "zf-crteam-padraic",
                "zf-crteam-priority"
            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=padraic",
                "name": "padraic",
                "displayName": "P\u00e1draic Brady",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/13606",
                    "filename": "ZF-4111-rtuin.patch",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=richardtuin",
                        "name": "richardtuin",
                        "displayName": "Richard Tuin",
                        "active": true
                    },
                    "created": "2011-01-22T06:37:38.000+0000",
                    "size": 3350,
                    "mimeType": "text\/plain",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/13606\/ZF-4111-rtuin.patch"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10140",
                    "id": 10140,
                    "name": "Zend_Validate",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29215",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=al_the_x",
                        "name": "al_the_x",
                        "displayName": "David Rogers",
                        "active": true
                    },
                    "body": "I'm running into the same or similar issue in my application. I'm constructing a standard Select Element, a la:\n\n<?php\n\n$Form = new Zend_Form(array(\n    'elements' => array(\n        'select' => array('select', array(\n            'multiple' => true,\n            'multiOptions' => array(\n                'option1', 'option2',\n            ),\n        )),\n    ),\n));\n\necho $Form;\n?>\n\nThis produces the desirable effect:\n\n<form action=\"\" method=\"get\">\n    <select name=\"select[]\" multiple=\"multiple\" id=\"select\">\n        <option value=\"0\">option1<\/option>\n        <option value=\"1\">option2<\/option>\n    <\/select>\n<\/form>\n\nSelecting either option and attempting to validate the form always fails, due to the use of in_array() in the InArray Validator, as noted above, however validation works correctly when using the Mutiselect Element. I understand that's preferred solution for this problem, but shouldn't Select have _some_ useful behavior defined for when the \"multiple\" flag \/ attribute is passed? Is there a plan to merge these two elements? Can I help!? Thanks.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=al_the_x",
                        "name": "al_the_x",
                        "displayName": "David Rogers",
                        "active": true
                    },
                    "created": "2009-02-28T17:57:36.000+0000",
                    "updated": "2009-02-28T17:57:36.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44113",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=richardtuin",
                        "name": "richardtuin",
                        "displayName": "Richard Tuin",
                        "active": true
                    },
                    "body": "Added a fix for this issue along with the approperiate unit tests.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=richardtuin",
                        "name": "richardtuin",
                        "displayName": "Richard Tuin",
                        "active": true
                    },
                    "created": "2011-01-22T06:37:39.000+0000",
                    "updated": "2011-01-22T06:37:39.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/47065",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "body": "Does this need to be fixed?  I'm thinking it's more of a design choice than a bug; Zend_Form_Element_Select is for single-select combo boxes and Zend_Form_Element_Multiselect is for multiple-select combo boxes.  The manual page makes that same distinction (http:\/\/framework.zend.com\/manual\/en\/zend.form.standardElements.html#zend.form.standardElements.multiselect).  \r\n\r\nRelated question:  Why is there both Select and Multiselect?  Couldn't the two be merged?\r\n\r\nCould we perhaps emit a friendly warning when Select is passed multiple=true, just to warn that Multiselect is the better choice?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "created": "2011-06-08T23:21:18.000+0000",
                    "updated": "2011-06-08T23:22:21.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/47949",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=padraic",
                        "name": "padraic",
                        "displayName": "P\u00e1draic Brady",
                        "active": true
                    },
                    "body": "Marked as won't fix for the following reasons:\n\n1. This is not a Zend_Validate bug.\n2. Issue is not evidenced when using Zend_Form_Element_Multiselect as is the recommended action.\n3. Associated patch may fix this particular issue but in the wrong component. The problem lies with Zend_Form which is why MultiSelect should be used.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=padraic",
                        "name": "padraic",
                        "displayName": "P\u00e1draic Brady",
                        "active": true
                    },
                    "created": "2011-08-14T14:22:17.000+0000",
                    "updated": "2011-08-14T14:22:17.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4111\/transitions"
}