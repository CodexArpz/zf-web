{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2730",
    "key": "ZF-2730",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Validate_Abstract::setMessgage() does not overwrite the message from the translator."
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2730\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10360",
                    "id": 10360,
                    "description": "Minor Release",
                    "name": "1.10.0",
                    "userReleaseDate": "27\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-27",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-08-29T12:34:44.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=laurent+melmoux",
                "name": "laurent melmoux",
                "displayName": "Laurent Melmoux",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-02-25T11:35:29.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-09-15T10:55:04.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "When I have set a translation object in Zend_Registry() to be used as default translator, sometime I will need to set a Custom Validator Error Message for a specific field.\n\nBut when we call Zend_Validate_Abstract::setMessgage() it does not overwrite the message from the translator.\n\nTo have it working I had to add a property in *Zend_Validate_Abstract* to keep track of the messages template which have been changed by *Zend_Validate_Abstract::setMessgage()*;\n\nAnd use it to see if the translator message should overwrite it, in *Zend_Validate_Abstract:: _createMessage()*:\n\n{code}\nif (null !== ($translator = $this->getTranslator()) && !in_array($messageKey, $this->_messagesOverWriten)) {\n    if ($translator->isTranslated($messageKey)) {\n        $message = $translator->translate($messageKey);\n    }\n}\n{code}\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2730\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10140",
                    "id": 10140,
                    "name": "Zend_Validate",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/21154",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "Please evaluate and categorize\/assign as necessary.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2008-04-18T16:55:02.000+0000",
                    "updated": "2008-04-18T16:55:02.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29330",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "That's correct behaviour. It could be described as:\n\nFirst output Original message ->> but when set then the own message ->> and then when set the translation\n\nExpect you have set own messages and also translation:\nA english user would get you own message and a french user would get the translation of the original message.\n\nSo, having both you would have to change the translation, otherwise your message is inconsistent.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-03-08T12:47:03.000+0000",
                    "updated": "2009-03-08T12:47:03.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29336",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=laurent+melmoux",
                        "name": "laurent melmoux",
                        "displayName": "Laurent Melmoux",
                        "active": true
                    },
                    "body": "What I want to say is that sometime you don't want to display the generic translation but a custom one.\nA use case will make it clearer :\n\nFor exemple with the NotEmpty Validator the original message is :\n* Value is empty, but a non-empty value is required\nThen my translation is :\n* le champs est requis\nBut now let say I want so display something more specific, for exemple \"the terme of use checkbox\" and display\n* vous devez accepter les conditions d'utilisations du site\n\nThe in this specific use case custom message is usefull\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=laurent+melmoux",
                        "name": "laurent melmoux",
                        "displayName": "Laurent Melmoux",
                        "active": true
                    },
                    "created": "2009-03-09T01:20:01.000+0000",
                    "updated": "2009-03-09T01:20:01.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32217",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "To have a \"custom\" translation you would have to extend the default translation instance and add your wished \"custom\" translations.\n\nThen you have to give this \"extended\" translation instance to the validator you want to customize.\nIt's not possible to do \"chained\" translations.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-06-26T11:45:42.000+0000",
                    "updated": "2009-06-26T11:45:42.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32218",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Closing as won't fix due to the previous mentioned reasons.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-06-26T11:47:15.000+0000",
                    "updated": "2009-06-26T11:47:15.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32262",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=laurent+melmoux",
                        "name": "laurent melmoux",
                        "displayName": "Laurent Melmoux",
                        "active": true
                    },
                    "body": " I'm using Zend_Form and if I use your solution all the field will used the custom translation when I just need an one specific field to used it.\n\nAlso the behavior between native language and others language  (with i18n  translation object) is not the same :\nWith Zen_Form and without i18n support you can use custom message  (@see ZF manual > Zend_Form > 23.3.3.1. Custom Error Messages) but as long as you use i18n support by setting the default translator in Zend_Registry() this feature does not work anymore. \nIMHO it should be the same behaviors. Activating  i18n shouldn't change as your application behave.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=laurent+melmoux",
                        "name": "laurent melmoux",
                        "displayName": "Laurent Melmoux",
                        "active": true
                    },
                    "created": "2009-06-29T01:02:41.000+0000",
                    "updated": "2009-06-29T01:02:41.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32264",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "As described before do custom translations by using setTranslator() which is a instance method of the abstract class.\n\n Why should the custom translation be used for all elements?\nThis is only the case when you use the same element multiple times.\n\nThe solution is to use different instances... one with translation-A and one with translation-B.\nWhen you want to use a \"specific\" field then also initiate it as specific field (seperate instance). Simple OOP behaviour.\n\n\n\nAnd why should translation no longer work when setting a custom error message ?\nAll errors are translated as long as you provide their key and their translation.\nWhen you don't want the custom error to be translated use a different key or a different translation.\n\nThis works for the default errors the same as for custom errors.\nThere is no change in behaviour.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-06-29T03:37:27.000+0000",
                    "updated": "2009-06-29T03:37:27.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32270",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=laurent+melmoux",
                        "name": "laurent melmoux",
                        "displayName": "Laurent Melmoux",
                        "active": true
                    },
                    "body": "Thomas,\n\nI probably don't express me very well so let's take an example to illustrate my issue :\n\n\nLet's say I have a form with severals fields where I need to validate the string length.  Most of the time the generic message for Zend_Validate_StringLength string too short is good enough, but  I want a more explicit\/friendly message for my username field.\n\nHere how it works with no i18n setup :\n\n{code}\n$validator = new Zend_Validate_StringLength(8);\n\n\/\/ with generic message output\n\/\/ \"'word' is less than %min% characters long\"\nif (!$validator->isValid('word')) {\n    $messages = $validator->getMessages();\n    echo current($messages);\n}\n\n\/\/ I want a custum message for my username field\n$validator->setMessage(\n    'Your username \\'%value%\\' is too short; it must be at least %min% ' .\n    'characters',\n    Zend_Validate_StringLength::TOO_SHORT);\n\n\/\/ with custom message the output is\n\/\/ \"Your username 'word' is too short; it must be at least 8 characters\"\nif (!$validator->isValid('logme')) {\n    $messages = $validator->getMessages();\n    echo current($messages);\n}\n\n{code}\n\n\nSo here, all is fine. But when I start to use the i18n feature it doesn't work the same :\n\n{code}\n\n$validator = new Zend_Validate_StringLength(8);\n\n$messageTemplates = array('stringLengthTooShort'=>\"La chaine '%value%' est trop courte, fait moins de %min% charact\u00e8res\", 'stringLengthTooLong'=>\"La chaine '%value%' est trop longue, faitplus de %min% charact\u00e8res\");\n$translator = new Zend_Translate('array', $messageTemplates, 'fr_FR');\nZend_Registry::set('Zend_Translate', $translator);\n\n\/\/ default message\n\/\/ La chaine 'unmot' est trop courte, fait moins de 8 charact\u00e8res\nif (!$validator->isValid('unmot')) {\n    $messages = $validator->getMessages();\n    echo current($messages);\n}\n\n\/\/ I want a custom message for my username field\n$validator->setMessage(\n    \"Votre nom d'utilisateur \\'%value%\\' est trop court; il doit faire au moins %min% charact\u00e8res\",\n    Zend_Validate_StringLength::TOO_SHORT);\n\/\/ Then HERE, custom message is not taken into account. The output is steel :\n\/\/ La chaine 'logme' est trop courte, fait moins de 8 charact\u00e8res\n\/\/ While I was expecting\n\/\/ Votre nom d'utilisateur 'logme' est trop court; il doit faire au moins 8 charact\u00e8res\nif (!$validator->isValid('logme')) {\n    $messages = $validator->getMessages();\n    echo current($messages);\n}\n{code}\n\nIt is not possible anymore to set an custom message .",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=laurent+melmoux",
                        "name": "laurent melmoux",
                        "displayName": "Laurent Melmoux",
                        "active": true
                    },
                    "created": "2009-06-29T06:22:18.000+0000",
                    "updated": "2009-06-29T06:22:18.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32271",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Reopened due to new reproducable example.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-06-29T06:38:04.000+0000",
                    "updated": "2009-06-29T06:38:04.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34077",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "After digging a little bit the reason is logical and also the solution is clear.\n\nThere are 2 possibilities to select from:\n1.) A message will ALWAYS be translated.\nDefault behaviour because otherwise you would have to call setMessage based on the users locale.\nWhich means that you do the translation yourself.\n\n2.) A message will ONLY be translated when setMessage is not set.\nThis is problematic as you need to give different messages based on the users locale.\nIn this case you do the translation yourself.\n\nTo select between this 2 different behaviours you have to handle your translation file differently...\n\nUsing the messageKey as source will force the first way.\nUsing the messageContent as source will force the second way.\n\nSo for you this means to change your translation file as follows when you want to override translations and not the content of the templates:\n{code}\n$content = $validator->getMessageTemplates();\n$messageTemplates = array($content['stringLengthTooShort'] =>\"Votre nom d'utilisateur \\'%value%\\' est trop court; il doit faire au moins %min% charact\u00e8res\");\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-08-29T12:30:16.000+0000",
                    "updated": "2009-08-29T12:30:16.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34078",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Closing as not an issue due the previous described reasons.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-08-29T12:34:43.000+0000",
                    "updated": "2009-08-29T12:34:43.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34447",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=laurent+melmoux",
                        "name": "laurent melmoux",
                        "displayName": "Laurent Melmoux",
                        "active": true
                    },
                    "body": "Thomas, \n\nI'm still thinking that the correct behavior should be 2) A message will ONLY be translated when setMessage is not set. :-)\n\nRight now if you use the validators in a i18n context (with an application wide locale within your registry) Zend_Validate::setMessage() is not working at all which means you have a behavior's change  bettween the \"default\"  and the localised context. And this is the same with Zend_Form_Element::addErrorMessage() and co.\n\nTo set custom message depending on the user local it is easy to do something $validator->setMessage($customMessages[$locale]['stringLengthTooShort']);\n\nAlso about your exemple, what should I do with $messageTemplates ?\n\nThanks.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=laurent+melmoux",
                        "name": "laurent melmoux",
                        "displayName": "Laurent Melmoux",
                        "active": true
                    },
                    "created": "2009-09-14T09:19:58.000+0000",
                    "updated": "2009-09-14T09:19:58.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34449",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "I still don't get the point about your problem of things which already work.\n$messageTemplates in my example is just a variable... name it $something or $dontknow... it's just a variable.\n\nAs described before translation does already work for case 2 when things are handled like described.\n\n{code}\n\/\/ example translation for case 2\n\/\/ this is already described above\nreturn array(\n    \"'%value%' is less than %min% characters long\" => \"my translation %min% for %value%\",\n    \"'%value%' is greater than %max% characters long\" => \"other translation\");\n{code} ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-09-14T10:57:49.000+0000",
                    "updated": "2009-09-14T10:57:49.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34457",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=laurent+melmoux",
                        "name": "laurent melmoux",
                        "displayName": "Laurent Melmoux",
                        "active": true
                    },
                    "body": "Pardon me if I'm not really clear. \n\nI'm mostly using  Zend_Validate with Zend_Form in an Automated CRUD  and  I'm creating them with a config object, then if I want a custom message I can simply do :\n\n{code}\nuser.login.elements.username.options.validators.emailAddressInvalidFormat.options.messages.emailAddressInvalidFormat=  \"Votre login doit \u00eatre un email valid\";\n{code}\n\nI really like this feature because I have no additional code to write and I don't really want to rewrite everything by hand only to add a custom message. :-(\n\n\nTo illustrate this here is 2 simples working examples :\n\nWith no translator, here the custom message is as expected :\n\n{code}\ndate_default_timezone_set('Europe\/Berlin');\n\nrequire_once 'Zend\/Loader\/Autoloader.php';\n$autoloader = Zend_Loader_Autoloader::getInstance();\n$autoloader->registerNamespace('Mmx_');\n\n\n$form = new Zend_Form();\n\n$username = new Zend_Form_Element_Text('username');\n$username->setLabel('Utilisateur')\n         ->addValidator('NotEmpty')\n         ->addValidator('EmailAddress', false, array('messages'=>array('emailAddressInvalidFormat' => \"Votre login doit \u00eatre un email valid\")))\n         ->addFilter('StringToLower');\n         \n$password = new Zend_Form_Element_Text('password');     \n$password->setLabel('Password')\n         ->addValidator('NotEmpty')\n         ->addValidator('StringLength',false, array(6, 20))\n         ->addValidator('Alnum')\n         ->addFilter('StringTrim')\n         ->addFilter('StringToLower');\n         \n$form->addElement($username)\n     ->addElement($password)\n     ->addElement(new Zend_Form_Element_Submit('login'));\n\n\n$view = new Zend_View();\n$view->addHelperPath($rootPath. '\/library\/Zend\/View\/Helper', 'Zend_View_Helper');\n$form->setView($view);\n\necho \"Try invalid data: \\n\";\necho $form->isValid(array('username' => 'FOOBAR', 'password' => 'short')) ? \"Form is validated\\n\" : \"Form did not validate.\\n\";\necho $form->render($view), \"\\n\\n\";\n{code}\n\nBut when I'm using a translator within the form my custom message is not display :\n\n{code}\ndate_default_timezone_set('Europe\/Berlin');\n\nrequire_once 'Zend\/Loader\/Autoloader.php';\n$autoloader = Zend_Loader_Autoloader::getInstance();\n$autoloader->registerNamespace('Mmx_');\n\n$messageTemplates = array(\n    \/\/Empty\n    'isEmpty'     => 'Le champ est requis !',\n    'notEmptyInvalid' => 'Le champ est requis !',\n    \/\/EmailAdress\n    'emailAddressInvalidFormat'          => \"L'adresse email n'est pas valide\",\n    'emailAddressInvalidHostname'  => \"'%hostname%' n'est pas un nom de domaine valide\",\n    \/\/StringLength\n    'stringLengthTooShort'          => \"Minimum %min% caract\u00e8res\",\n    'stringLengthTooLong'           => \"Maximum %max% caract\u00e8res\",\n    \/\/Alpha\n    'notAlpha'    => \"Lettres alphabetiques uniquement\",\n    'stringEmpty' => \"Ne peut \u00eatre vide\"\n);\n\n$locale = new Zend_Locale('fr');\nZend_Registry::set('Zend_Locale', $locale);\n$translator = new Zend_Translate('array', $messageTemplates, $locale);\n\n$form = new Zend_Form();\n\n$username = new Zend_Form_Element_Text('username');\n$username->setLabel('Utilisateur')\n         ->addValidator('NotEmpty')\n         ->addValidator('EmailAddress', false, array('messages'=>array('emailAddressInvalidFormat' => \"Votre login doit \u00eatre un email valid\")))\n         ->addFilter('StringToLower');\n         \n$password = new Zend_Form_Element_Text('password');     \n$password->setLabel('Password')\n         ->addValidator('NotEmpty')\n         ->addValidator('StringLength',false, array(6, 20))\n         ->addValidator('Alnum')\n         ->addFilter('StringTrim')\n         ->addFilter('StringToLower');\n         \n$form->addElement($username)\n     ->addElement($password)\n     ->addElement(new Zend_Form_Element_Submit('login'));\n\n$form->setTranslator($translator);\n\n$view = new Zend_View();\n$view->addHelperPath($rootPath. '\/library\/Zend\/View\/Helper', 'Zend_View_Helper');\n\n\n\n$form->setView($view);\n\necho \"Try invalid data: \\n\";\necho $form->isValid(array('username' => 'FOOBAR', 'password' => 'short')) ? \"Form is validated\\n\" : \"Form did not validate.\\n\";\necho $form->render($view), \"\\n\\n\";\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=laurent+melmoux",
                        "name": "laurent melmoux",
                        "displayName": "Laurent Melmoux",
                        "active": true
                    },
                    "created": "2009-09-15T02:38:41.000+0000",
                    "updated": "2009-09-15T02:38:41.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34471",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "There is no solution to this usecase:\n\nYou changed the messageTemplate of the validator and you added translation to the form.\nNow the form translates returned messages.\nHow should the validator know what should be translated and what not? The validator has no connection to the form.\n\nI see no way how this should be integrated.\n\nEighter change your translation as mentioned before or handle it different in this case.\n(You can disable translation on a element).",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-09-15T10:54:57.000+0000",
                    "updated": "2009-09-15T10:54:57.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2730\/transitions"
}