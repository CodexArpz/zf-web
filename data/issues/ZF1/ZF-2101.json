{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2101",
    "key": "ZF-2101",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Can't execute multiple stored procedures with Pdo_Mysql"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField",
            "value": {
                "timeoriginalestimate": 7200,
                "timeestimate": 7200
            }
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2101\/votes",
                "votes": 4,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10160",
                    "id": 10160,
                    "description": "Major Release",
                    "name": "Next Major Release",
                    "archived": false,
                    "released": false
                }
            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=darby",
                "name": "darby",
                "displayName": "Darby Felton",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2007-10-26T08:22:20.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-05-07T17:24:45.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Patrick Calkins writes:\r\n\r\n{quote}\r\nCode:\r\n\r\n{code}\r\n$pdoParams = array(\r\n    PDO::MYSQL_ATTR_USE_BUFFERED_QUERY => true\r\n);\r\n\r\n$params = array(\r\n    'host'           => '127.0.0.1',\r\n    'username'       => 'webuser',\r\n    'password'       => 'xxxxxx',\r\n    'dbname'         => 'test',\r\n    'driver_options' => $pdoParams\r\n);\r\n\r\n$db = Zend_Db::factory('Pdo_Mysql', $params);\r\n\r\n\/\/ Stored procedure returns a single row\r\n$stmt = $db->prepare('CALL get_customer_by_id(:customerId)');\r\n$stmt->bindParam('customerId', $customerId, PDO::PARAM_INT);\r\n$stmt->execute();\r\n$result = $stmt->fetchAll();\r\nprint_r($result);\r\n\r\n$stmt->closeCursor();\r\n\r\n\/\/ Stored procedure returns a single row\r\n$stmt = $db->prepare('CALL get_address_by_id(:customerId)');\r\n$stmt->bindParam('customerId', $customerId, PDO::PARAM_INT);\r\n$stmt->execute();\r\n$result = $stmt->fetchAll();\r\nprint_r($result);\r\n{code}\r\n\r\nThis will consistently throw this error: 'SQLSTATE[HY000]: General error:\r\n2014 Cannot execute queries while other unbuffered queries are active.\r\nConsider using PDOStatement::fetchAll(). Alternatively, if your code is only\r\never going to run against mysql, you may enable query buffering by setting\r\nthe PDO::MYSQL_ATTR_USE_BUFFERED_QUERY attribute.'\r\n\r\nIf you insert $stmt->nextRowset(); before $stmt->closeCursor(); it will\r\nthrow this error: 'SQLSTATE[HYC00]: Optional feature not implemented'\r\n\r\nThis appears to be a bug, and I haven't found any more info as to its status\r\nlately. Is this correct??\r\n{quote}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/6",
                "name": "N\/A"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2101\/watchers",
                "isWatching": false,
                "watchCount": 6
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/10000",
                "name": "Postponed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                "name": "ralph",
                "displayName": "Ralph Schindler",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-2097",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2097",
                    "type": {
                        "name": "Related",
                        "direction": "OUTBOUND",
                        "description": "is related to"
                    }
                },
                {
                    "issueKey": "ZF-3343",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3343",
                    "type": {
                        "name": "Dependency",
                        "direction": "OUTBOUND",
                        "description": "depends on"
                    }
                },
                {
                    "issueKey": "ZF-348",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-348",
                    "type": {
                        "name": "Related",
                        "direction": "OUTBOUND",
                        "description": "is related to"
                    }
                },
                {
                    "issueKey": "ZF-5576",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5576",
                    "type": {
                        "name": "Related",
                        "direction": "INBOUND",
                        "description": "is related to"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10130",
                    "id": 10130,
                    "description": "Mini Release",
                    "name": "1.0.2",
                    "userReleaseDate": "25\/Sep\/07",
                    "archived": true,
                    "releaseDate": "2007-09-25",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10012",
                    "id": 10012,
                    "name": "Zend_Db",
                    "description": "interfaces, APIs, and adapters for various third-party data stores",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/17352",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=darby",
                        "name": "darby",
                        "displayName": "Darby Felton",
                        "active": true
                    },
                    "body": "Good unit tests that execute multiple stored procedures would hopefully expose the problem.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=darby",
                        "name": "darby",
                        "displayName": "Darby Felton",
                        "active": true
                    },
                    "created": "2007-10-26T08:23:14.000+0000",
                    "updated": "2007-10-26T08:23:14.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/20103",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "This issue should have been fixed for the 1.5 release.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2008-03-21T17:05:32.000+0000",
                    "updated": "2008-03-21T17:05:32.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/20320",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "Please categorize\/fix as needed.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2008-03-25T20:43:55.000+0000",
                    "updated": "2008-03-25T20:43:55.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/20967",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "This doesn't appear to have been fixed in 1.5.0. Please update if this is not correct.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2008-04-18T13:11:53.000+0000",
                    "updated": "2008-04-18T13:11:53.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/21951",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=peptolab",
                        "name": "peptolab",
                        "displayName": "Simon Mundy",
                        "active": true
                    },
                    "body": "Resolved in r9539",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=peptolab",
                        "name": "peptolab",
                        "displayName": "Simon Mundy",
                        "active": true
                    },
                    "created": "2008-05-26T23:24:12.000+0000",
                    "updated": "2008-05-26T23:24:12.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/22524",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "I think perhaps this issue needs to be merged into the 1.5 branch.  Can someone from the community check to see that this works as they expect in their application (the fix is in trunk)?\n\n-Ralph",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2008-06-17T08:36:40.000+0000",
                    "updated": "2008-06-17T08:36:40.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/23957",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "Updating for the 1.6.0 release.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2008-09-02T10:38:59.000+0000",
                    "updated": "2008-09-02T10:38:59.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28183",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=brian3f",
                        "name": "brian3f",
                        "displayName": "Brian Fisher",
                        "active": true
                    },
                    "body": "I've just tested this in version 1.7.2 and I'm still getting the error.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=brian3f",
                        "name": "brian3f",
                        "displayName": "Brian Fisher",
                        "active": true
                    },
                    "created": "2009-01-14T09:11:55.000+0000",
                    "updated": "2009-01-14T09:11:55.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28310",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jsimone",
                        "name": "jsimone",
                        "displayName": "John Simone",
                        "active": true
                    },
                    "body": "It seems to be, at least partially, related to MySql version. Specifically I have the issue with 5.1.3 while a few co-workers and our integration server have no issues running the same code with MySql 5.0.45.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jsimone",
                        "name": "jsimone",
                        "displayName": "John Simone",
                        "active": true
                    },
                    "created": "2009-01-19T12:41:16.000+0000",
                    "updated": "2009-01-19T12:41:16.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32843",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=scips",
                        "name": "scips",
                        "displayName": "S\u00e9bastien Barbieri",
                        "active": true
                    },
                    "body": "This issue is present for those who are not using Zend Server CE. If you install Zend Server CE (which replace php5 PDO lib right?), the issue disapear, don't seems to be linked to ZF itself.\n\nCould someone double check this? Because I'm going insane.\n\nThanks.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=scips",
                        "name": "scips",
                        "displayName": "S\u00e9bastien Barbieri",
                        "active": true
                    },
                    "created": "2009-07-22T06:46:26.000+0000",
                    "updated": "2009-07-22T06:46:26.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32847",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "It seems like the same version of ZF on different versions of PHP showing different behaviors is PHP (PDO) specific, how can we solve this in ZF?\n\nDo you have any PDO code (non-zf) that can demonstrate this problem running on all PHP platforms?\n\n-ralph",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2009-07-22T12:13:52.000+0000",
                    "updated": "2009-07-22T12:13:52.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32851",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=1730",
                        "name": "1730",
                        "displayName": "Oliver Kastler",
                        "active": true
                    },
                    "body": "I use to add this to the Db\/Adapter\/Pdo\/Abstract.php _connect() method, inside the try\/catch block:\n$this->_connection->setAttribute(PDO::ATTR_EMULATE_PREPARES, true);\n\nThat solves this issue for me, I had to put that into place for the last one or two years, into every new update...",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=1730",
                        "name": "1730",
                        "displayName": "Oliver Kastler",
                        "active": true
                    },
                    "created": "2009-07-22T14:10:30.000+0000",
                    "updated": "2009-07-22T14:10:30.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32854",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=scips",
                        "name": "scips",
                        "displayName": "S\u00e9bastien Barbieri",
                        "active": true
                    },
                    "body": "\t$this->dbh = new PDO($this->options['dsn'], $this->options['username'], $this->options['password'], array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES '.$this->options['charset']));\n\t$this->dbh->setAttribute(PDO::MYSQL_ATTR_USE_BUFFERED_QUERY, true);\n\t$this->dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, true);\n        $sth = $this->dbh->prepare($_stored_proc_1);\n                $sth->bindValue('I_bind', $value, PDO::PARAM_STR);\n            $sth->execute();\n            $object = $sth->fetchAll(PDO::FETCH_ASSOC);\n            $sth->closeCursor();\n        $sth = $this->dbh->prepare($_stored_proc_2);\n                $sth->bindValue('I_bind', $value, PDO::PARAM_STR);\n            $sth->execute();\n            $object = $sth->fetchAll(PDO::FETCH_ASSOC);\n            $sth->closeCursor();\n\nThe code above causes the issue\n\nwith any PHP version windows\/linux\/mac os x (WAMP 2.0f \/ ubuntu 9.4 default PHP5 \/ macport default PHP 5 ) but not with the PHP provided with Zend Server CE on linux, I still have to test it on windows and mac ... I don't think I'll do that this week, probably next week.\n\nHowever I'm pretty sure it's not ZF related at all... I'll post this in PHP 5 bugs if you can confirm\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=scips",
                        "name": "scips",
                        "displayName": "S\u00e9bastien Barbieri",
                        "active": true
                    },
                    "created": "2009-07-23T01:26:20.000+0000",
                    "updated": "2009-07-23T01:26:20.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32855",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=scips",
                        "name": "scips",
                        "displayName": "S\u00e9bastien Barbieri",
                        "active": true
                    },
                    "body": "Seems already there: #44081 http:\/\/bugs.php.net\/bug.php?id=44081",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=scips",
                        "name": "scips",
                        "displayName": "S\u00e9bastien Barbieri",
                        "active": true
                    },
                    "created": "2009-07-23T01:40:04.000+0000",
                    "updated": "2009-07-23T01:40:04.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44427",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "I am postponing this issue to be addressed with ZF 2.0.\r\n\r\nIt seems there are too many moving parts involved here to provide a backwards compability way to ensure that ZF's Db Abstraction works the same in both PHP 5.2 and PHP 5.3.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2011-02-17T14:28:58.000+0000",
                    "updated": "2011-02-17T14:28:58.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2101\/transitions"
}