{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10549",
    "key": "ZF-10549",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Currency with exchange service results in incorrect currency-symbol when adding currencies"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10549\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mverboeket",
                "name": "mverboeket",
                "displayName": "Micha Verboeket",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-10-11T09:33:13.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-11-20T21:37:45.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "{code}\r\n\/\/Precondition: the locale is set to 'nl_NL', which has EUR as currency\r\n\r\n\/\/original currency+value (USD0.0)\r\n$currency = new Zend_Currency(\r\n    array(\r\n        'value'    => 0.0,\r\n        'currency' => 'USD',\r\n    )\r\n);\r\n$currency->setService(Zend_Registry::get('ZFCustom_Currency_ExchangeService')); \r\n\r\n\r\n$currency2 = new Zend_Currency(\r\n    array(\r\n        'value'    => 250,\r\n        'currency' => 'EUR',\r\n    )\r\n);\r\n$currency->add($currency2);\/\/EUR250 exchanged to USD347.08\r\n\r\necho $currency.'<br>'; \/\/prints '\u20ac 347,08'\r\necho $currency->toCurrency(null, array('currency' => 'USD')).'<br>'; \/\/prints 'US$ 347,08'\r\n{code}\r\n\r\nAs can be seen in above example code, the original currency of $currency (USD) is ignored as the euro-sign is printed while the exchange rate is applied on the value. This is incorrect, if it prints euro then it should be the value 250. The expected result is be the original currency (USD) for $currency.\r\n\r\nThe second echo is the currency+value that is expected (US$ 347,08), but this is only to show the expected result for this example.\r\n\r\nWhat is clear is that the behavior of Zend_Currency is incorrect in this scenario.\r\nMaybe the locale is the problem here but I am not sure. \r\n\r\nIt is important to have control on the currency and locale seperately as most real case scenario's will not change the currency while locale does (e.g. English translations of the website)."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10549\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User"
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10490",
                    "id": 10490,
                    "description": "Mini Release",
                    "name": "1.10.8",
                    "userReleaseDate": "25\/Aug\/10",
                    "archived": false,
                    "releaseDate": "2010-08-25",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10071",
                    "id": 10071,
                    "name": "Zend_Currency",
                    "description": "Zend_Currency is a Class which handles all Currency related functions and is locale aware.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/42492",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mverboeket",
                        "name": "mverboeket",
                        "displayName": "Micha Verboeket",
                        "active": true
                    },
                    "body": "I found some sort of workaround by changing the first codeline:\r\n{code}\r\n$currency = new Zend_Currency(\r\n    array(\r\n        'value'    => 0.0,\r\n        'currency' => 'USD',\r\n    )\r\n);\r\n...\r\n{code}\r\nto this:\r\n{code}\r\n$currency = new Zend_Currency('USD');\r\n...\r\n{code}\r\n\r\nBut it still is unexpected behavior. My initial code example used the example from the manual on http:\/\/framework.zend.com\/manual\/en\/zend.currency.exchange.html (version 1.10 manual) so I assume this would be the correct way to use it.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mverboeket",
                        "name": "mverboeket",
                        "displayName": "Micha Verboeket",
                        "active": true
                    },
                    "created": "2010-10-11T10:37:00.000+0000",
                    "updated": "2010-10-11T10:37:00.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10549\/transitions"
}