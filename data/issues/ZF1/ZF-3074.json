{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3074",
    "key": "ZF-3074",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Db_Adapter_Abstract update and delete function improvements"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField",
            "value": {
                "timeoriginalestimate": 60,
                "timeestimate": 60
            }
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3074\/votes",
                "votes": 5,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2010-11-19T06:09:00.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=at465",
                "name": "at465",
                "displayName": "Andy Thompson",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-04-08T13:57:29.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-11-23T21:57:06.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Currently, there is no way to specify additional bind parameters for the where clause of the functions update and delete. This leads to a mess of $adapter->quoteInto()'s on complex where conditions.\r\n\r\nCould the Zend_Db_Adapter_Abstract be extended to include an additional optional array parameter which would include the bind parameters for the where clause?\r\n\r\nI have had to fork the entire Zend_Db namespace in order to implement this myself, as without this feature, these two helper functions become fairly unusable.\r\n\r\nI will try to include a patch file of the changes needed if the tracker will let me."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/customFieldOption\/10039",
                "value": "  Should Have"
            }
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3074\/watchers",
                "isWatching": false,
                "watchCount": 5
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                "name": "bittarman",
                "displayName": "Ryan Mauger",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-3129",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3129",
                    "type": {
                        "name": "Related",
                        "direction": "INBOUND",
                        "description": "is related to"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/11213",
                    "filename": "Zend_Db_Adapter_Abstract-1.5.1-helperparam.diff",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=at465",
                        "name": "at465",
                        "displayName": "Andy Thompson",
                        "active": true
                    },
                    "created": "2008-04-08T13:58:30.000+0000",
                    "size": 1591,
                    "mimeType": "application\/octet-stream",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/11213\/Zend_Db_Adapter_Abstract-1.5.1-helperparam.diff"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/11579",
                    "filename": "zf-trunk-r11898-dbhelpers.diff",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=at465",
                        "name": "at465",
                        "displayName": "Andy Thompson",
                        "active": true
                    },
                    "created": "2008-10-12T07:50:39.000+0000",
                    "size": 8116,
                    "mimeType": "text\/x-diff",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/11579\/zf-trunk-r11898-dbhelpers.diff"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/11654",
                    "filename": "zf-trunk-r12791-dbtablehelpers.diff",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=at465",
                        "name": "at465",
                        "displayName": "Andy Thompson",
                        "active": true
                    },
                    "created": "2008-11-24T02:19:51.000+0000",
                    "size": 3568,
                    "mimeType": "text\/x-diff",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/11654\/zf-trunk-r12791-dbtablehelpers.diff"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10174",
                    "id": 10174,
                    "description": "Mini Release",
                    "name": "1.5.1",
                    "userReleaseDate": "25\/Mar\/08",
                    "archived": true,
                    "releaseDate": "2008-03-25",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10012",
                    "id": 10012,
                    "name": "Zend_Db",
                    "description": "interfaces, APIs, and adapters for various third-party data stores",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/20757",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=at465",
                        "name": "at465",
                        "displayName": "Andy Thompson",
                        "active": true
                    },
                    "body": "Here's the patch. As you can see there is not much work needed to implement this.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=at465",
                        "name": "at465",
                        "displayName": "Andy Thompson",
                        "active": true
                    },
                    "created": "2008-04-08T13:58:30.000+0000",
                    "updated": "2008-04-08T13:58:30.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/20761",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=at465",
                        "name": "at465",
                        "displayName": "Andy Thompson",
                        "active": true
                    },
                    "body": "Sorry, I just noticed my patch has a slight problem in it. The $params array_merge should be typecasted to array as the array_merge will fail on a null parameter.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=at465",
                        "name": "at465",
                        "displayName": "Andy Thompson",
                        "active": true
                    },
                    "created": "2008-04-08T15:59:04.000+0000",
                    "updated": "2008-04-08T15:59:04.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/25086",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=at465",
                        "name": "at465",
                        "displayName": "Andy Thompson",
                        "active": true
                    },
                    "body": "I have signed the CLA, and been confirmed.\n\nI've included a patch of the changes from the current trunk (r11898) needed (a bit better written this time), along with added tests for the extra parameters.\n\nI've run the tests using the pdo_mysql and mysqli adapters.\n\nIs there anything else I can do to speed up getting this fix into the next minor release?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=at465",
                        "name": "at465",
                        "displayName": "Andy Thompson",
                        "active": true
                    },
                    "created": "2008-10-12T07:50:41.000+0000",
                    "updated": "2008-10-12T07:50:41.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/26558",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=at465",
                        "name": "at465",
                        "displayName": "Andy Thompson",
                        "active": true
                    },
                    "body": "If you can't complete this, can you assign it to someone who can? It is a trivial change that should take a miniscule amount of time, especially when I have done the tests which have passed for me. It shouldn't still be incomplete over 6 months after the issue was opened.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=at465",
                        "name": "at465",
                        "displayName": "Andy Thompson",
                        "active": true
                    },
                    "created": "2008-11-21T13:02:17.000+0000",
                    "updated": "2008-11-21T13:02:17.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/26610",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "I will look into this issue tomorrow, after I read through the patch and understand the feature request, I'll email you back to start a discourse.\n\n-ralph",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2008-11-23T17:22:41.000+0000",
                    "updated": "2008-11-23T17:22:41.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/26615",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=at465",
                        "name": "at465",
                        "displayName": "Andy Thompson",
                        "active": true
                    },
                    "body": "Ok, thanks.\n\nI've had a look through the issue tracker, and there appears to be several duplicate requests, although some requesting a different format:\n\nZF-3129 - Same request, bind parameters are additional function arguments.\nZF-2863 - Alternative notation of an associative $where array\nZF-651 - Suggests Zend_Db_Table_Abstract update\/delete improvements as well\n\nI'll include a patch containing changes to Zend_Db_Table_Abstract as well (they just pass through the bind parameters).\n\nI've made two test cases for that as well. I wasn't sure whether to expand on these tests, as the adapter tests cover them. I wasn't able to see if these tests worked, as for some reason my test setup ignores the tests\/Zend\/Db\/Table\/TestCommon.php tests.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=at465",
                        "name": "at465",
                        "displayName": "Andy Thompson",
                        "active": true
                    },
                    "created": "2008-11-24T02:18:27.000+0000",
                    "updated": "2008-11-24T02:18:27.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28014",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "Will evaluate within 2 weeks with the rest of the Zend_Db issues i have marked.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2009-01-10T11:53:53.000+0000",
                    "updated": "2009-01-10T11:53:53.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32384",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=at465",
                        "name": "at465",
                        "displayName": "Andy Thompson",
                        "active": true
                    },
                    "body": "Have any decisions been made on this issue? Would you like me to submit a new patch based on the latest trunk?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=at465",
                        "name": "at465",
                        "displayName": "Andy Thompson",
                        "active": true
                    },
                    "created": "2009-07-04T08:09:03.000+0000",
                    "updated": "2009-07-04T08:09:03.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33069",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=at465",
                        "name": "at465",
                        "displayName": "Andy Thompson",
                        "active": true
                    },
                    "body": "Please, is there anything else that needs doing to get this under way? I've done the patch and the tests.\n\nIs there any decision that needs to be discussed?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=at465",
                        "name": "at465",
                        "displayName": "Andy Thompson",
                        "active": true
                    },
                    "created": "2009-07-30T13:21:22.000+0000",
                    "updated": "2009-07-30T13:21:22.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33073",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=at465",
                        "name": "at465",
                        "displayName": "Andy Thompson",
                        "active": true
                    },
                    "body": "Ok, I just noticed since ZF 1.8, _whereExpr has been updated to allow associative arrays, which the ZF-2863 issue mentions, so I guess I'll have to go with that. Could all these issues be closed as they no longer apply?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=at465",
                        "name": "at465",
                        "displayName": "Andy Thompson",
                        "active": true
                    },
                    "created": "2009-07-30T13:42:57.000+0000",
                    "updated": "2009-07-30T13:42:57.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33124",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=at465",
                        "name": "at465",
                        "displayName": "Andy Thompson",
                        "active": true
                    },
                    "body": "On second thoughts, trying to apply the associative array method of where expression doesn't fit all situations, e.g.\n\n{code:SQL}\nUPDATE table SET field = \"value\" WHERE condition1 = \"5\" OR condition2 = \"9\"\n{code}\n\nThere would be no way to do this, as the _whereExpr always joins the conditions with AND.\n\nThe way I've suggested will allow for simple quoting into where conditions of any complexity, and conform to the same style as query()\n\ne.g. for the above\n{code}\n$db->update('table', array('field' => 'value'), 'condition1 = ? OR condition2 = ?', array(5,9));\n{code}\n\nI'm not suggesting removing the _whereExpr associative array, but adding this will allow more advanced updating.\n\nOr ideally maybe something like:\n\n{code}\n$select = $db->select()->where('condition1 = ?, 5)->orWhere('condition2 = ?', 9);\n$db->update('table', array('field' => 'value'), $select);\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=at465",
                        "name": "at465",
                        "displayName": "Andy Thompson",
                        "active": true
                    },
                    "created": "2009-08-01T06:20:18.000+0000",
                    "updated": "2009-08-01T06:21:51.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43135",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                        "name": "bittarman",
                        "displayName": "Ryan Mauger",
                        "active": true
                    },
                    "body": "This has been available for some time now with the following syntax\r\n{code}\r\n$db->update('table', $data, array('foo  = ?' => $bar, 'baz = ?' => $bat));\r\n{code}\r\n{code}\r\n$db->delete('table', array('foo  = ?' => $bar, 'baz = ?' => $bat));\r\n{code}\r\n\r\nThese bindings can also be used with Zend_Db_Expr\r\n\r\nclosing as no longer an issue.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                        "name": "bittarman",
                        "displayName": "Ryan Mauger",
                        "active": true
                    },
                    "created": "2010-11-19T06:09:01.000+0000",
                    "updated": "2010-11-19T06:09:01.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43289",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mjh_ca",
                        "name": "mjh_ca",
                        "displayName": "Marc Hodgins",
                        "active": true
                    },
                    "body": "Removing fix version.  Issues marked 'not an issue' don't need a fix version -- it makes them appear in the JIRA changelog and\/or roadmap.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mjh_ca",
                        "name": "mjh_ca",
                        "displayName": "Marc Hodgins",
                        "active": true
                    },
                    "created": "2010-11-23T21:57:06.000+0000",
                    "updated": "2010-11-23T21:57:06.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3074\/transitions"
}