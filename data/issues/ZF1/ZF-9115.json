{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9115",
    "key": "ZF-9115",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Rest_Route $request->getUserParams() returns all params"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9115\/votes",
                "votes": 1,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/5",
                "name": "Cannot Reproduce"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10580",
                    "id": 10580,
                    "description": "Mini Release",
                    "name": "1.11.6",
                    "userReleaseDate": "05\/May\/11",
                    "archived": false,
                    "releaseDate": "2011-05-05",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2011-04-29T02:52:18.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=stanzapub",
                "name": "stanzapub",
                "displayName": "Oren Sol",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-02-08T03:04:12.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-05-03T14:37:37.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "on 1.9.5, my calls to $request->getUserParams() return an array with 'action', 'controller', 'module' and all other extra data that was pushed to the request with $request->setParam(). \r\non 1.10.0, any call to getUserParams() returns ALL params."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9115\/watchers",
                "isWatching": false,
                "watchCount": 3
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mfacenet",
                "name": "mfacenet",
                "displayName": "Shawn Stratton",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/13926",
                    "filename": "zf-9115.patch",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mfacenet",
                        "name": "mfacenet",
                        "displayName": "Shawn Stratton",
                        "active": true
                    },
                    "created": "2011-04-29T03:02:23.000+0000",
                    "size": 1051,
                    "mimeType": "text\/x-patch",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/13926\/zf-9115.patch"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10360",
                    "id": 10360,
                    "description": "Minor Release",
                    "name": "1.10.0",
                    "userReleaseDate": "27\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-27",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10011",
                    "id": 10011,
                    "name": "Zend_Controller",
                    "description": "front controller, including router and dispatcher",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38353",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "I simply cannot reproduce the issue. Once routing is complete, getUserParams() is returning all parameters matched\/set during routing, as well as any others I push into the request object.\r\n\r\nCan you provide some (minimal) code that reproduces the issue for you?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2010-02-08T08:08:16.000+0000",
                    "updated": "2010-02-08T08:08:45.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38369",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=stanzapub",
                        "name": "stanzapub",
                        "displayName": "Oren Sol",
                        "active": true
                    },
                    "body": "Matthew,\r\n\r\nI am sorry but there was a mistake in my bug report. It is not that getUserParams returns an empty array, on the contrary - it returns with ALL params in the request object and not only the user params. That is - I get $_GET and $_PUT params as well in the array that getUserParams returns.\r\n\r\nMaybe also important to note (since you mentioned routing) - this is happening in a REST app, after Zend_Rest_Route routing.\r\n\r\nI tested it now with 1.9.5 and here is a var_export of getUserParams:\r\narray (\r\n  'module' => 'rest',\r\n  'controller' => 'auth',\r\n  'action' => 'index',\r\n  'format' => 'json',\r\n)\r\n\r\nI switch to 1.10.0 and the var_export is:\r\narray (\r\n  'module' => 'rest',\r\n  'controller' => 'auth',\r\n  'action' => 'index',\r\n  'oauth_consumer_key' => '58affc12bf8fa63f0214a6af808b15de',\r\n  'oauth_nonce' => 'e6d1710ace54fb5db6b7ccde2ab434aa',\r\n  'oauth_signature_method' => 'HMAC-SHA1',\r\n  'oauth_timestamp' => '1265701227',\r\n  'oauth_token' => 'bdca6efb043178ef172612dd1e173dde',\r\n  'oauth_version' => '1.0',\r\n  'oauth_signature' => 'BsmrI93dTGUQCr\/OGsudyRV+A5Y=',\r\n  'format' => 'json',\r\n)\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=stanzapub",
                        "name": "stanzapub",
                        "displayName": "Oren Sol",
                        "active": true
                    },
                    "created": "2010-02-08T23:51:48.000+0000",
                    "updated": "2010-02-08T23:51:48.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/41384",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wilmoore",
                        "name": "wilmoore",
                        "displayName": "Wil Moore III (wilmoore)",
                        "active": true
                    },
                    "body": "Hi Oren,\r\n\r\nAs Matthew mentioned, attaching a code snippet or a pastie.org link would be VERY helpful in order to help resolve this.\r\n\r\nThanks.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wilmoore",
                        "name": "wilmoore",
                        "displayName": "Wil Moore III (wilmoore)",
                        "active": true
                    },
                    "created": "2010-07-07T19:17:32.000+0000",
                    "updated": "2010-07-07T19:17:32.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44634",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ota",
                        "name": "ota",
                        "displayName": "Ota Mares",
                        "active": true
                    },
                    "body": "Got the same bug. To reproduce simply call the default route without specifying it and add some GET parameters.\r\n\r\nAs example getUserParams() will return following array for the URI localhost\/?a=1&b=2:\r\n\r\n{noformat}array\r\n  'b' => string '2' (length=1)\r\n  'a' => string '1' (length=1)\r\n  'controller' => string 'index' (length=5)\r\n  'action' => string 'index' (length=5)\r\n  'module' => string 'default' (length=7){noformat} ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ota",
                        "name": "ota",
                        "displayName": "Ota Mares",
                        "active": true
                    },
                    "created": "2011-03-04T06:45:23.000+0000",
                    "updated": "2011-03-04T06:47:35.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/46185",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mfacenet",
                        "name": "mfacenet",
                        "displayName": "Shawn Stratton",
                        "active": true
                    },
                    "body": "Created unit test for this issue\r\n\r\n{code}\r\n\r\n    \/**\r\n     * @group ZF-9115\r\n     *\/\r\n    public function test_request_get_user_params()\r\n    {\r\n        $uri = Zend_Uri::factory('http:\/\/localhost.com\/user\/index?a=1&b=2');\r\n        $request = new Zend_Controller_Request_Http($uri);\r\n        $request->setParam('test', 5);\r\n        $config = array('mod'=>array('user'));\r\n        $this->_invokeRouteMatch($request, $config);\r\n        $this->assertEquals(array(\"test\"=>5), $request->getUserParams());\r\n        $this->assertEquals(array(\"test\"=>5,\"a\"=>1,\"b\"=>2), $request->getParams());\r\n    }\r\n{code}\r\n\r\nCould not reproduce, marking issue as resolved, could not reproduce.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mfacenet",
                        "name": "mfacenet",
                        "displayName": "Shawn Stratton",
                        "active": true
                    },
                    "created": "2011-04-29T02:51:11.000+0000",
                    "updated": "2011-04-29T02:51:11.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/46188",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "body": "Commit to trunk: r23885\r\nCommitted on behalf of Shawn Stratton (mfacenet)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "created": "2011-04-29T03:19:17.000+0000",
                    "updated": "2011-04-29T03:19:54.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/46341",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "Merged to release branch 1.11 in r23968",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2011-05-03T14:37:36.000+0000",
                    "updated": "2011-05-03T14:37:36.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9115\/transitions"
}