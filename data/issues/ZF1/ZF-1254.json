{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1254",
    "key": "ZF-1254",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Improve Zend_Pdf Text-Functions"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/2",
                "name": "New Feature",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1254\/votes",
                "votes": 39,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=nikosams",
                "name": "nikosams",
                "displayName": "Niko Sams",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2007-04-12T04:21:50.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-11-20T21:37:58.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Zend_Pdf currently only has a function drawText to draw Text at a specific position.\nFor real-world usage it is every hard to work with this - as you have to calculate width and height of texts all the time (only possible ZF-313).\n\nIt would be nice to have Features like FPDF where you don't have to manually calculate everytime the y-position of the next line:\n- Write: http:\/\/www.fpdf.org\/en\/doc\/write.htm\n- GetX\/GetY: http:\/\/www.fpdf.org\/en\/doc\/getx.htm http:\/\/www.fpdf.org\/en\/doc\/gety.htm \n- SetX\/SetY: http:\/\/www.fpdf.org\/en\/doc\/setx.htm http:\/\/www.fpdf.org\/en\/doc\/sety.htm\n\nAnother helpful FPDF-feature is helpfull wenn creating tables:\n- Cell: http:\/\/www.fpdf.org\/en\/doc\/cell.htm\n- MultiCell: http:\/\/www.fpdf.org\/en\/doc\/multicell.htm\n\nAdditionally there exists a FPDF-Addon which allows to switch the font in a line - without having to calculate x and y positions:\n- Flowing Block: http:\/\/www.fpdf.de\/downloads\/addons\/65\/\n\n----\nZend_Pdf has has many features fpdf lacks, it would be very nice if we could use Zend_Pdf\n- a much better OO-Interface, fpdf is one big class\n- utf8-support\n- use ttf-fonts directly\n\nthanks,\nniko"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1254\/watchers",
                "isWatching": false,
                "watchCount": 30
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User"
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-7145",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7145",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/12127",
                    "filename": "Cell.php",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=iezzip",
                        "name": "iezzip",
                        "displayName": "Philip Iezzi",
                        "active": true
                    },
                    "created": "2009-08-05T00:04:21.000+0000",
                    "size": 18208,
                    "mimeType": "text\/x-php",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/12127\/Cell.php"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/10943",
                    "filename": "Cell.php",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ljbuesch",
                        "name": "ljbuesch",
                        "displayName": "Logan Buesching",
                        "active": true
                    },
                    "created": "2007-11-29T17:24:31.000+0000",
                    "size": 18210,
                    "mimeType": "text\/plain",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/10943\/Cell.php"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/10831",
                    "filename": "Cell.txt",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ljbuesch",
                        "name": "ljbuesch",
                        "displayName": "Logan Buesching",
                        "active": true
                    },
                    "created": "2007-09-25T12:10:22.000+0000",
                    "size": 11988,
                    "mimeType": "text\/plain",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/10831\/Cell.txt"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10020",
                    "id": 10020,
                    "name": "Zend_Pdf",
                    "description": "pure PHP manipulation engine for composing PDFs",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/14168",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "Assign to Alexander.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2007-04-12T16:06:20.000+0000",
                    "updated": "2007-04-12T16:06:20.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/14771",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alexander",
                        "name": "alexander",
                        "displayName": "Alexander Veremyev",
                        "active": true
                    },
                    "body": "Depends on document representation model, which should be designed before.\n\nPostponed to post-1.0 period\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alexander",
                        "name": "alexander",
                        "displayName": "Alexander Veremyev",
                        "active": true
                    },
                    "created": "2007-05-25T02:48:51.000+0000",
                    "updated": "2007-05-25T02:48:51.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/16966",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ljbuesch",
                        "name": "ljbuesch",
                        "displayName": "Logan Buesching",
                        "active": true
                    },
                    "body": "I have recently created a class that emulates the FPDF cells.  Currently, it is very basic but allows for creating of a cell, positioning the cell, and aligning text inside of the cell.  I have attached a diff that creates the functionality.  A small example is the following:\n\n{code}\n\/\/create and attach the cell to the first page, and center in the X and Y direction\n$cell=new Zend_Pdf_Cell($pdf->pages[0],Zend_Pdf_Cell::POSITION_CENTER_X | Zend_Pdf_Cell::POSITION_CENTER_Y);\n\/\/align the text in the center\n$cell->addText(\"The quick brown fox jumped over the lazy dog.\",Zend_Pdf_Cell::ALIGN_CENTER);\n$cell->newLine();\n\/\/write the cell to the PDF document\n$cell->write();\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ljbuesch",
                        "name": "ljbuesch",
                        "displayName": "Logan Buesching",
                        "active": true
                    },
                    "created": "2007-09-25T12:09:49.000+0000",
                    "updated": "2007-09-25T12:09:49.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/16967",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ljbuesch",
                        "name": "ljbuesch",
                        "displayName": "Logan Buesching",
                        "active": true
                    },
                    "body": "Patch for a cell class that allows simple cell creation and text alignment.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ljbuesch",
                        "name": "ljbuesch",
                        "displayName": "Logan Buesching",
                        "active": true
                    },
                    "created": "2007-09-25T12:10:22.000+0000",
                    "updated": "2007-09-25T12:10:22.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/17744",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ljbuesch",
                        "name": "ljbuesch",
                        "displayName": "Logan Buesching",
                        "active": true
                    },
                    "body": "I have updated the Cell.php file and fixed a few things.  Added borders and word wrapping.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ljbuesch",
                        "name": "ljbuesch",
                        "displayName": "Logan Buesching",
                        "active": true
                    },
                    "created": "2007-11-29T17:24:31.000+0000",
                    "updated": "2007-11-29T17:24:31.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/20016",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ljbuesch",
                        "name": "ljbuesch",
                        "displayName": "Logan Buesching",
                        "active": true
                    },
                    "body": "I have just finished up a proposal using the Zend_Pdf_Cell, any comments are welcome.  The proposal may be viewed at at http:\/\/framework.zend.com\/wiki\/display\/ZFPROP\/Zend_Pdf_Cell+-+Logan+Buesching",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ljbuesch",
                        "name": "ljbuesch",
                        "displayName": "Logan Buesching",
                        "active": true
                    },
                    "created": "2008-03-19T21:50:20.000+0000",
                    "updated": "2008-03-19T21:50:20.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/20418",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "Resetting 'fix version priority' and 'fix version' to be re-evaluated for next release.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2008-03-25T22:06:45.000+0000",
                    "updated": "2008-03-25T22:06:45.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/27060",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=willie",
                        "name": "willie",
                        "displayName": "Willie Alberty",
                        "active": true
                    },
                    "body": "Unassigning Zend_Pdf issues currently assigned to me pending decision on ZF 2.0 release timeframe and potential contribution of comprehensive changeset.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=willie",
                        "name": "willie",
                        "displayName": "Willie Alberty",
                        "active": true
                    },
                    "created": "2008-12-04T22:34:57.000+0000",
                    "updated": "2008-12-04T22:34:57.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/27144",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "Alex, please take a look at this and resolve as necessary.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2008-12-08T17:00:48.000+0000",
                    "updated": "2008-12-08T17:00:48.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33121",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=iezzip",
                        "name": "iezzip",
                        "displayName": "Philip Iezzi",
                        "active": true
                    },
                    "body": "in _wordWrap() I've encountered endless loops resulting in a 500 server error in the following case:\nA word of 1 character length (e.g. \"-\") would be the last word in a cell. This one character would still fit the cell width but we are trying to addText() the word plus a space separator (\" \"), after having calculated the word's width based on the 1-character word. We end up getting stuck in the while-loop.\n\nI can't explain it any smarter as I'm having trouble with this complex recursion. But I got a quick and dirty fix for this:\n\n{code}\n173c173\n< \t\t\t$maxTextSection=$this->_makeTextSection(array_shift($splitSection));\n---\n> \t\t\t$maxTextSection=$this->_makeTextSection(array_shift($splitSection) . ' ');\n175c175\n< \t\t\t\t$this->addText($maxTextSection['text'].' ');\n---\n> \t\t\t\t$this->addText($maxTextSection['text']);\n177c177\n< \t\t\t\t$maxTextSection=$this->_makeTextSection(array_shift($splitSection));\n---\n> \t\t\t\t$maxTextSection=$this->_makeTextSection(array_shift($splitSection) . ' ');\n181c181\n< \t\t\t$this->addText($maxTextSection['text'].' '.$restOfText);\n---\n> \t\t\t$this->addText($maxTextSection['text'].$restOfText);\n{code}\n\nI have updated the attached Cell.php",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=iezzip",
                        "name": "iezzip",
                        "displayName": "Philip Iezzi",
                        "active": true
                    },
                    "created": "2009-08-01T02:39:21.000+0000",
                    "updated": "2009-08-01T02:39:21.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33200",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=iezzip",
                        "name": "iezzip",
                        "displayName": "Philip Iezzi",
                        "active": true
                    },
                    "body": "besides, there was another bug I've fixed long time ago:\n\n{code}\n--- ZF-1254_Cell.php\t2009-08-01 11:26:04.000000000 +0200\n+++ Cell.php\t2009-08-05 09:01:13.000000000 +0200\n@@ -601,7 +601,7 @@\n     \tfor ($x=0;$x<strlen($textSection['text']);$x++) {\n \t\t\t$charArray[]=ord(substr($textSection['text'],$x,1));\n \t\t}\n-    \t$charArray=$textSection['font']->cmap->glyphNumbersForCharacters($charArray);\n+    \t$charArray=$textSection['font']->glyphNumbersForCharacters($charArray);\n     \t\/\/get the lengths\n \t\t$lengths=$textSection['font']->widthsForGlyphs($charArray);\n \t\t$fontGlyphWidth=array_sum($lengths);\n{code}\n\nI've updated the attached Cell.php",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=iezzip",
                        "name": "iezzip",
                        "displayName": "Philip Iezzi",
                        "active": true
                    },
                    "created": "2009-08-05T00:04:21.000+0000",
                    "updated": "2009-08-05T00:04:21.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37500",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gkamp",
                        "name": "gkamp",
                        "displayName": "Gerrit Kamp",
                        "active": true
                    },
                    "body": "I really like the Zend PDF functionality. It's fast and stable. But I think many users would benefit from two key features:\r\n-Allow to parse HTML text (like here: http:\/\/fpdf.org\/en\/tutorial\/tuto6.htm)\r\n-Allow to create tables (like above).\r\n\r\nAre these types of functionality scheduled to be included in the core framework anytime soon? Without it, most PDF documents will look rather basic.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gkamp",
                        "name": "gkamp",
                        "displayName": "Gerrit Kamp",
                        "active": true
                    },
                    "created": "2010-01-07T14:40:41.000+0000",
                    "updated": "2010-01-07T14:40:41.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37927",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=petermoolenaar",
                        "name": "petermoolenaar",
                        "displayName": "Peter Moolenaar",
                        "active": true
                    },
                    "body": "There is a proposal which has some very nice features related to this as well.\r\nhttp:\/\/framework.zend.com\/wiki\/display\/ZFPROP\/Zend_Pdf+text+drawing+improvements+-+Nico+Edtinger\r\n\r\nMaybe an idea to implement that one?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=petermoolenaar",
                        "name": "petermoolenaar",
                        "displayName": "Peter Moolenaar",
                        "active": true
                    },
                    "created": "2010-01-22T03:48:57.000+0000",
                    "updated": "2010-01-22T03:48:57.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1254\/transitions"
}