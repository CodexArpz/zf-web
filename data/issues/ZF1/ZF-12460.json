{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-12460",
    "key": "ZF-12460",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Invalid bind-variable name(mysqli)"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-12460\/votes",
                "votes": 2,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/8",
                "name": "Issue Moved"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2013-04-05T16:07:11.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=samius05@gmail.com",
                "name": "samius05@gmail.com",
                "displayName": "Milan Krupa",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2012-11-06T12:40:18.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2013-04-05T16:07:11.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "Exception",
                "NeedsPatch",
                "Zend_Db_Statement",
                "mysqli"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "If there is an escaped newline ({{&#92;&#92;n}}), followed by datetime (and probably by anything containing colon) in the query,\r\nZend_Db_Statement throws exception Invalid bind-variable name.\r\n\r\nIt is caused by {{Zend_Db_Statement::stripQuoted}}, which adjusts sql for example to\r\n{code}\r\nSELECT * FROM  WHERE (data LIKE 'foo\\nbar2012-01-01 9:45:12')\r\n{code}\r\ninstead of\r\n{code}\r\nSELECT * FROM  WHERE (data LIKE ) AND (datetime > )\r\n{code}\r\n\r\nExample of failing code:\r\n{code}\r\n$sql    = \"SELECT * FROM `example` WHERE (data LIKE 'foo\\\\nbar') AND (datetime > '2012-01-01 9:45:12')\";\r\n$result = $db->fetchAll($sql);\r\n{code}\r\nAnd this is the example table:\r\n{code}\r\nCREATE TABLE `example` (\r\n `id` int(11),\r\n `data` text,\r\n `datetime` datetime\r\n);\r\n{code}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-12460\/watchers",
                "isWatching": false,
                "watchCount": 4
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/6",
                "name": "Closed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                "name": "ralph",
                "displayName": "Ralph Schindler",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10510",
                    "id": 10510,
                    "description": "Minor Release",
                    "name": "1.12.0",
                    "userReleaseDate": "27\/Aug\/12",
                    "archived": false,
                    "releaseDate": "2012-08-27",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10012",
                    "id": 10012,
                    "name": "Zend_Db",
                    "description": "interfaces, APIs, and adapters for various third-party data stores",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/52181",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rob",
                        "name": "rob",
                        "displayName": "Rob Allen",
                        "active": true
                    },
                    "body": "Does this work when you do:\r\n\r\n{code}\r\n$result = $db->fetchAll(\"SELECT * FROM `example` WHERE (`data` LIKE ?) AND (`datetime` > ?)\", 'foo\\\\nbar', '2012-01-01 9:45:12');\r\n{code}\r\n\r\n?\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rob",
                        "name": "rob",
                        "displayName": "Rob Allen",
                        "active": true
                    },
                    "created": "2012-11-06T19:53:31.000+0000",
                    "updated": "2012-11-06T19:53:31.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/52205",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=samius05@gmail.com",
                        "name": "samius05@gmail.com",
                        "displayName": "Milan Krupa",
                        "active": true
                    },
                    "body": "Thanks, it works, and it could be a quick solution.\r\nactually, it should be:\r\n{code}\r\n$result = $db->fetchAll(\"SELECT * FROM `example` WHERE (`data` LIKE ?) AND (`datetime` > ?)\", array('foo\\\\nbar', '2012-01-01 9:45:12'));\r\n{code}\r\nJust for the record, using param binding via {{Zend_Db_Select}} does NOT work again:\r\n{code}\r\n$select = $db->select()\r\n             ->from('example')\r\n             ->where('data LIKE ?', 'foo\\\\nbar')\r\n             ->where('datetime > ?', '2012-01-01 9:45:12');\r\n$db->fetchAll($select);\r\n{code}\r\n\r\n\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=samius05@gmail.com",
                        "name": "samius05@gmail.com",
                        "displayName": "Milan Krupa",
                        "active": true
                    },
                    "created": "2012-11-07T09:22:08.000+0000",
                    "updated": "2012-11-07T09:22:08.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/53271",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=luinnar",
                        "name": "luinnar",
                        "displayName": "Mateusz Ju\u015bci\u0144ski",
                        "active": true
                    },
                    "body": "It's probably regression to ZF-3025.\r\n\r\nI have the same problem on ZF 1.12.2. The following code will throw an error \"Invalid bind-variable name ':2'\"\r\n\r\n{code}$sQuery = $oDb->quote(serialize(array('a' => 1, 'b' => 2)));\r\n$sQuery = 'INSERT INTO test VALUES('. $sQuery .')';\r\n\r\n$oDb->query($sQuery);{code}\r\n\r\nPlease see last comment: http:\/\/framework.zend.com\/issues\/browse\/ZF-3025?focusedCommentId=51297&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-51297",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=luinnar",
                        "name": "luinnar",
                        "displayName": "Mateusz Ju\u015bci\u0144ski",
                        "active": true
                    },
                    "created": "2013-03-04T10:18:00.000+0000",
                    "updated": "2013-03-04T10:18:00.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/53509",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "This issue has been closed on Jira and moved to GitHub for issue tracking.  To continue following the resolution of this issues, please visit: https:\/\/github.com\/zendframework\/zf1\/issues\/30",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2013-04-05T16:07:11.000+0000",
                    "updated": "2013-04-05T16:07:11.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-12460\/transitions"
}