{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1504",
    "key": "ZF-1504",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "_redirect doesn't prependBase when called direct"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1504\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/3",
                "name": "Duplicate"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2007-06-12T08:03:29.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=paulmenheere",
                "name": "paulmenheere",
                "displayName": "Paul Menheere",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2007-06-06T09:34:46.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2007-07-05T14:44:16.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "When you call a script without adding the action. ( e.g. Controller 'foo'  thus \/foo )\n\nand if you in that controller do a : \n$this->_redirect('login');\n\nit redirects to '\/login'\n\nhowever if you call '\/foo\/index' it redirects correctly ( '\/foo\/login' )"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1504\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10023",
                    "id": 10023,
                    "description": "Release Candidate 1",
                    "name": "1.0.0 RC1",
                    "userReleaseDate": "28\/May\/07",
                    "archived": true,
                    "releaseDate": "2007-05-28",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10011",
                    "id": 10011,
                    "name": "Zend_Controller",
                    "description": "front controller, including router and dispatcher",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/14993",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "Assigning to Matthew.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2007-06-07T11:22:05.000+0000",
                    "updated": "2007-06-07T11:22:05.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/15101",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "I'm not sure I understand the issue. Your subject indicates that this is an issue with prependBase(), but the description looks like you've simply misunderstood how _redirect() is supposed to function. Could you clearly spell out the code you have called, the expected result, and the actual result?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2007-06-11T15:07:35.000+0000",
                    "updated": "2007-06-11T15:07:35.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/15120",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bate",
                        "name": "bate",
                        "displayName": "Marco Kaiser",
                        "active": true
                    },
                    "body": "Hi Matthew,\n\nno the problem is, if you use the internal action method _redirect\n    \/**\n     * Redirect to another URL\n     *\n     * Proxies to {@link Zend_Controller_Action_Helper_Redirector::gotoUrl()}. \n     *\n     * @param string $url\n     * @param array $options Options to be used when redirecting\n     * @return void\n     *\/\nyou can pass an options array. One option is prependBase to enable\/disable prepending Base for new redirect url.\nStack:\n\n$this->_redirect(...)\n\nZend_Controller_Action_Helper_Redirector.php\npublic function gotoUrl($url, array $options = array())\n\n    \/**\n     * Set a redirect URL string\n     * \n     * By default, emits a 302 HTTP status header, prepends base URL as defined \n     * in request object if url is relative, and halts script execution by \n     * calling exit().\n     *\n     * $options is an optional associative array that can be used to control \n     * redirect behaviour. The available option keys are:\n     * - exit: boolean flag indicating whether or not to halt script execution when done\n     * - prependBase: boolean flag indicating whether or not to prepend the base URL when a relative URL is provided\n     * - code: integer HTTP status code to use with redirect. Should be between 300 and 307.\n     *\n     * _redirect() sets the Location header in the response object. If you set \n     * the exit flag to false, you can override this header later in code \n     * execution.\n     *\n     * If the exit flag is true (true by default), _redirect() will write and \n     * close the current session, if any.\n     *\n     * @param  string $url \n     * @param  array $options\n     * @return void\n     *\/\n    public function setGotoUrl($url, array $options = array())\n\n\nLine 297 the prepend base value is checked but never used. Same for exit value.\n\n\nLine 295:\n-                 $exit = ($options['exit']) ? true : false;\n+                $this->_exit = ($options['exit']) ? true : false;\n\nLine 298:\n-                $prependBase = ($options['prependBase']) ? true : false;\n+               $this->_prependBase = ($options['prependBase']) ? true : false;\n\njust for your notice. :)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bate",
                        "name": "bate",
                        "displayName": "Marco Kaiser",
                        "active": true
                    },
                    "created": "2007-06-12T05:15:27.000+0000",
                    "updated": "2007-06-12T05:15:27.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/15121",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=paulmenheere",
                        "name": "paulmenheere",
                        "displayName": "Paul Menheere",
                        "active": true
                    },
                    "body": "No actually what happening is:\n\nWhen you use a link in the form of only the controller ('foo')\nthe framwork goes automagically to the indexAction of that controller ( thus: 'foo\/index' )\nbut it won't change the url.\n\nIf in that action you do a redirect to a different action in the same controller ('bar') it should go to '\/foo\/bar' but instead it resolves to '\/bar'\n\nit doesn't append the controller name.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=paulmenheere",
                        "name": "paulmenheere",
                        "displayName": "Paul Menheere",
                        "active": true
                    },
                    "created": "2007-06-12T06:30:55.000+0000",
                    "updated": "2007-06-12T06:30:55.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/15122",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bate",
                        "name": "bate",
                        "displayName": "Marco Kaiser",
                        "active": true
                    },
                    "body": "Yes that true, Paul. Sorry my problem sound similar but is a bit different. :)\n\nMatthew should i open a new bug or would this be also fixed?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bate",
                        "name": "bate",
                        "displayName": "Marco Kaiser",
                        "active": true
                    },
                    "created": "2007-06-12T07:22:25.000+0000",
                    "updated": "2007-06-12T07:22:25.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/15123",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=paulmenheere",
                        "name": "paulmenheere",
                        "displayName": "Paul Menheere",
                        "active": true
                    },
                    "body": "try this one ;)\n\nhttp:\/\/framework.zend.com\/issues\/browse\/ZF-1460",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=paulmenheere",
                        "name": "paulmenheere",
                        "displayName": "Paul Menheere",
                        "active": true
                    },
                    "created": "2007-06-12T07:45:12.000+0000",
                    "updated": "2007-06-12T07:45:12.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/15125",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Paul -- please read the documentation on _redirect() and the redirector's setGotoUrl() method (to which _redirect() is aliased); _redirect() is supposed to be used with a URI or URI fragment, and does no detection of the current controller. A call to $this->_redirect('foo') will go to '\/foo' on the current host; $this->_redirect('bar') will go to '\/bar'. This is by design. If you want $this->_redirect('bar') to go to the bar action of the current controller ('foo' in your example), you should use the redirector action helper's goto() or direct() methods: $this->_helper->redirector->goto('bar') or $this->_helper->redirector('bar').\n\nThe problem I'm observing is exactly that reported in ZF-1460, and that is the one I will address.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2007-06-12T08:02:52.000+0000",
                    "updated": "2007-06-12T08:02:52.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/15126",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Duplicate of ZF-1460",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2007-06-12T08:03:29.000+0000",
                    "updated": "2007-06-12T08:03:29.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1504\/transitions"
}