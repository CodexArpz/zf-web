{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2992",
    "key": "ZF-2992",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Label decorator sets provided class for label tag instead of block level tag"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2992\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/2",
                "name": "Won't Fix"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2008-04-22T11:32:11.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wojciech",
                "name": "wojciech",
                "displayName": "Wojciech Naruniec",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-03-28T13:48:24.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-09-23T13:40:38.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "When option 'tag' is specified for Label decorator wraps label in that block level tag and if the 'class' option is provided it should set 'class' parameter for this block level tag. It doesn't work properly because it sets class for label element.\n\nSample code:\n{code}\n        $this->setElementDecorators(array(\n            array('ViewHelper'),\n            array('HtmlTag', array('tag' => 'dd', 'class' => 'half')),\n            array('Label', array('tag'=> 'dt', 'class' => 'half')),\n        ));\n{code}\n\nIt should generate:\n\n{code}\n<dt class=\"half\"><label for=\"name\">name<\/label><\/dt>\n<dd class=\"half\"><input type=\"text\" name=\"name\" id=\"name\" value=\"\"><\/dd>\n{code}\n\ninstead of:\n\n{code}\n<dt><label for=\"name\" class=\"half\">name<\/label><\/dt>\n<dd class=\"half\"><input type=\"text\" name=\"name\" id=\"name\" value=\"\"><\/dd>\n{code}\n\nIt's documented in http:\/\/framework.zend.com\/manual\/en\/zend.form.standardDecorators.html#zend.form.standardDecorators.label docs.\n\nFix:\n\n{code}\nIndex: Zend\/Form\/Decorator\/Label.php\n===================================================================\n--- Zend\/Form\/Decorator\/Label.php\t(revision 9083)\n+++ Zend\/Form\/Decorator\/Label.php\t(working copy)\n@@ -296,14 +296,13 @@\n         }\n \n         if (!empty($label)) {\n-            $options['class'] = $class;\n             $label = $view->formLabel($element->getName(), trim($label), $options); \n         }\n \n         if (null !== $tag) {\n             require_once 'Zend\/Form\/Decorator\/HtmlTag.php';\n             $decorator = new Zend_Form_Decorator_HtmlTag();\n-            $decorator->setOptions(array('tag' => $tag));\n+            $decorator->setOptions(array('tag' => $tag, 'class' => $class));\n             $label = $decorator->render($label);\n         }\n{code}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2992\/watchers",
                "isWatching": false,
                "watchCount": 4
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10174",
                    "id": 10174,
                    "description": "Mini Release",
                    "name": "1.5.1",
                    "userReleaseDate": "25\/Mar\/08",
                    "archived": true,
                    "releaseDate": "2008-03-25",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10029",
                    "id": 10029,
                    "name": "Zend_Form",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/20540",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "Please evaluate and categorize as necessary.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2008-03-31T15:27:02.000+0000",
                    "updated": "2008-03-31T15:27:02.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/21325",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "That makes no sense. The Label tag can be generated without a wrapping HTML tag, and your patch would remove the class in such a situation.\n\nThe class associated with the label decorator should, and does, associate the provided class with the label tag itself.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-04-22T11:31:59.000+0000",
                    "updated": "2008-04-22T11:31:59.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/21805",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rumeau",
                        "name": "rumeau",
                        "displayName": "Jean Rumeau",
                        "active": true
                    },
                    "body": "im on this situation too, and as same as the element case i think this should be an option to the label too, because when setting HtmlTag on an element, i can set the class attribute to the new block wich contains the element, but i cant do the same with the label, maybe the Label decorator should provide a solution like HtmlTag does.\n\nim aware that the fix posted here removes the option of setting the class on the label but as the label decorator makes use of the HtmlTag decorator, it should be possible to pass the class to the HtmlTag as an option right?\n\ni think that would be a good solution..",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rumeau",
                        "name": "rumeau",
                        "displayName": "Jean Rumeau",
                        "active": true
                    },
                    "created": "2008-05-17T13:22:48.000+0000",
                    "updated": "2008-05-17T13:22:48.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31862",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ldean",
                        "name": "ldean",
                        "displayName": "Laura Dean",
                        "active": true
                    },
                    "body": "I'm in this situation, too, of wanting to add a class to the tag wrapping the label.  As the OP metioned, the documentation implies that this is possible:\n\nYou may optionally specify a 'tag' option; if provided, it wraps the label in that block-level tag. If the 'tag' option is present, and no label present, the tag is rendered with no content. You can specify the class to use with the tag with the 'class' option or by calling setClass().\n\nIf this is not possible, at least change the documentation...\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ldean",
                        "name": "ldean",
                        "displayName": "Laura Dean",
                        "active": true
                    },
                    "created": "2009-06-15T11:37:55.000+0000",
                    "updated": "2009-06-15T11:37:55.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/41928",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=nicolasd",
                        "name": "nicolasd",
                        "displayName": "Devoir Nicolas",
                        "active": true
                    },
                    "body": "Hello \r\nI would like a precision on one part of the code.\r\nI m working on i18n and I ve got a problem when this decorator is translated :\r\n\r\n{code:none}\r\npublic function getLabel()\r\n    {\r\n        if (null === ($element = $this->getElement())) {\r\n            return '';\r\n        }\r\n\r\n        $label = $element->getLabel();\r\n        $label = trim($label);\r\n\r\n        if (empty($label)) {\r\n            return '';\r\n        }\r\n\r\n        if (null !== ($translator = $element->getTranslator())) {\r\n            $label = $translator->translate($label);\r\n        }\r\n\r\n        $optPrefix = $this->getOptPrefix();\r\n        $optSuffix = $this->getOptSuffix();\r\n        $reqPrefix = $this->getReqPrefix();\r\n        $reqSuffix = $this->getReqSuffix();\r\n        $separator = $this->getSeparator();\r\n\r\n        if (!empty($label)) {\r\n            if ($element->isRequired()) {\r\n                $label = $reqPrefix . $label . $reqSuffix;\r\n            } else {\r\n                $label = $optPrefix . $label . $optSuffix;\r\n            }\r\n        }\r\n\r\n        return $label;\r\n    }\r\n{code} \r\n\r\n{code:none}\r\n$label = $element->getLabel();\r\n{code} => this returns the tranlated value of the label\r\n\r\nthen\r\n\r\n{code:none} \r\nif (null !== ($translator = $element->getTranslator())) {\r\n    $label = $translator->translate($label);\r\n}\r\n{code}\r\n=> this returns the translation of the translated value of the label\r\n\r\nDid I miss something or do I have got a double translation ?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=nicolasd",
                        "name": "nicolasd",
                        "displayName": "Devoir Nicolas",
                        "active": true
                    },
                    "created": "2010-08-09T23:35:46.000+0000",
                    "updated": "2010-08-09T23:35:46.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48502",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tdavis",
                        "name": "tdavis",
                        "displayName": "Toby Davis",
                        "active": true
                    },
                    "body": "This continues to be an issue in version 1.11, is there a work around for adding attributes to the tag wrapped around the label?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tdavis",
                        "name": "tdavis",
                        "displayName": "Toby Davis",
                        "active": true
                    },
                    "created": "2011-09-23T13:25:13.000+0000",
                    "updated": "2011-09-23T13:25:13.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48503",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "body": "@Toby\r\nUse [Zend_Form_Decorator_Label::setTagClass()|http:\/\/framework.zend.com\/apidoc\/core\/_Form_Decorator_Label.html#%5CZend_Form_Decorator_Label::setTagClass()] or [this tutorial in German|http:\/\/www.zfforum.de\/showthread.php?t=7813].",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2011-09-23T13:40:38.000+0000",
                    "updated": "2011-09-23T13:40:38.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2992\/transitions"
}