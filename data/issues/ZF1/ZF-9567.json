{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9567",
    "key": "ZF-9567",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Error: SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry .... for key 'PRIMARY'"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9567\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2010-03-29T12:15:11.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mamayoleksandr",
                "name": "mamayoleksandr",
                "displayName": "Oleksandr_Grygorovych",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-03-29T12:11:11.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-07-23T06:40:25.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "When I try to insert data to mysql database I receive folowing error: Error: SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '72lkl213' for key 'PRIMARY'\r\n\r\n#0 C:\\www\\zf.com\\library\\Zend\\Db\\Statement.php(300): Zend_Db_Statement_Pdo->_execute(Array)\r\n#1 C:\\www\\zf.com\\library\\Zend\\Db\\Adapter\\Abstract.php(468): Zend_Db_Statement->execute(Array)\r\n#2 C:\\www\\zf.com\\library\\Zend\\Db\\Adapter\\Pdo\\Abstract.php(238): Zend_Db_Adapter_Abstract->query('INSERT INTO `ad...', Array)\r\n#3 C:\\www\\zf.com\\library\\Zend\\Db\\Adapter\\Abstract.php(546): Zend_Db_Adapter_Pdo_Abstract->query('INSERT INTO `ad...', Array)\r\n#4 C:\\www\\zf.com\\library\\Zend\\Db\\Table\\Abstract.php(1056): Zend_Db_Adapter_Abstract->insert('admin', Array)\r\n#5 C:\\www\\zf.com\\application\\models\\Admin.php(15): Zend_Db_Table_Abstract->insert(Array)\r\n#6 C:\\www\\zf.com\\application\\controllers\\IndexController.php(82): Admin->insertData(Array)\r\n#7 C:\\www\\zf.com\\library\\Zend\\Controller\\Action.php(513): IndexController->adminAction()\r\n#8 C:\\www\\zf.com\\library\\Zend\\Controller\\Dispatcher\\Standard.php(289): Zend_Controller_Action->dispatch('adminAction')\r\n#9 C:\\www\\zf.com\\library\\Zend\\View\\Helper\\Action.php(131): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http))\r\n#10 [internal function]: Zend_View_Helper_Action->action('admin', 'index')\r\n#11 C:\\www\\zf.com\\library\\Zend\\View\\Abstract.php(340): call_user_func_array(Array, Array)\r\n#12 [internal function]: Zend_View_Abstract->__call('action', Array)\r\n#13 C:\\www\\zf.com\\application\\layouts\\layout.phtml(20): Zend_View->action('admin', 'index')\r\n#14 C:\\www\\zf.com\\library\\Zend\\View.php(108): include('C:\\www\\zf.com\\a...')\r\n#15 C:\\www\\zf.com\\library\\Zend\\View\\Abstract.php(831): Zend_View->_run('C:\\www\\zf.com\\a...')\r\n#16 C:\\www\\zf.com\\library\\Zend\\Layout.php(796): Zend_View_Abstract->render('layout.phtml')\r\n#17 C:\\www\\zf.com\\library\\Zend\\Layout\\Controller\\Plugin\\Layout.php(143): Zend_Layout->render()\r\n#18 C:\\www\\zf.com\\library\\Zend\\Controller\\Plugin\\Broker.php(331): Zend_Layout_Controller_Plugin_Layout->postDispatch(Object(Zend_Controller_Request_Http))\r\n#19 C:\\www\\zf.com\\library\\Zend\\Controller\\Front.php(957): Zend_Controller_Plugin_Broker->postDispatch(Object(Zend_Controller_Request_Http))\r\n#20 C:\\www\\zf.com\\application\\Bootstrap.php(72): Zend_Controller_Front->dispatch()\r\n#21 C:\\www\\zf.com\\public\\index.php(13): Bootstrap->runApp()\r\n#22 {main}\r\n\r\nMy Bootstrap: \r\npublic function _initDb()\r\n                {\r\n                    $db = Zend_Db::factory('Pdo_Mysql',array('host'=>'localhost','username'=>'root','password'=>'m987987987mt',\r\n\r\n            'dbname'=>'insight'));\r\n       Zend_Db_Table_Abstract::setDefaultAdapter($db);\r\n         Zend_Registry::set('data', $db);\r\n                }\r\n\r\ncontroller :\r\n$db = new Admin();\r\n         $data = array('name'=>'72lkl213','password'=>'vSDVQEBQREB');\r\n        \r\n         $db->insert($data);\r\n\r\nThe same operation in pure PHP work ok. I am becoming crazy trying to fix this bug. I don't know what's wrong with my code. Why Zend_Db_Statement_Pdo and Zend_Db_Statement do the same insert twice !!!!!!!!!!. I did not gave such commands. \r\nPlease help, I just don't know what to do.\r\n         "
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/2",
                "name": "Critical"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9567\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                "name": "bittarman",
                "displayName": "Ryan Mauger",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-9569",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9569",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10430",
                    "id": 10430,
                    "description": "Mini Release",
                    "name": "1.10.2",
                    "userReleaseDate": "24\/Feb\/10",
                    "archived": false,
                    "releaseDate": "2010-02-24",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10012",
                    "id": 10012,
                    "name": "Zend_Db",
                    "description": "interfaces, APIs, and adapters for various third-party data stores",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/39643",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "body": "What is the acutal query that is generated, and what is your table definition?\r\n\r\nyou can see the query by putting a try\/catch block around $db->insert(), and then use the profiler to retrieve the query (enable it before inserting).",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "created": "2010-03-29T12:13:16.000+0000",
                    "updated": "2010-03-29T12:13:16.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/39644",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                        "name": "bittarman",
                        "displayName": "Ryan Mauger",
                        "active": true
                    },
                    "body": "Im closing this as not an issue.\r\n\r\nThe problem is not with Zend_Db, but with your actual operation. in your example, the field 'name' is clearly defined in the database table as the primary key, and already exists in the table with that value.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                        "name": "bittarman",
                        "displayName": "Ryan Mauger",
                        "active": true
                    },
                    "created": "2010-03-29T12:15:11.000+0000",
                    "updated": "2010-03-29T12:15:11.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/39645",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mamayoleksandr",
                        "name": "mamayoleksandr",
                        "displayName": "Oleksandr_Grygorovych",
                        "active": true
                    },
                    "body": "No-no. This is the issue, because I tried to use auto_increment column and the Zend Framework twice inserted the same data! I have checked with HeidiSQL. Do you think I did nothing before posting this issue? Please open it and it should be solved. And the error code says you nothing? Don't you see the  \r\n#2 C:\\www\\zf.com\\library\\Zend\\Db\\Adapter\\Pdo\\Abstract.php(238): Zend_Db_Adapter_Abstract->query('INSERT INTO `ad...', Array)\r\n#3 C:\\www\\zf.com\\library\\Zend\\Db\\Adapter\\Abstract.php(546): Zend_Db_Adapter_Pdo_Abstract->query('INSERT INTO `ad...', Array)\r\n\r\ndo the same??? \r\nThe problem is tha insert operation is executed twice. The difference only is when I make name column as primary key I see the ERROR, when I use auto_increment I see TWO THE SAME ROWS!!!!!!!!!!!!!!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mamayoleksandr",
                        "name": "mamayoleksandr",
                        "displayName": "Oleksandr_Grygorovych",
                        "active": true
                    },
                    "created": "2010-03-29T13:07:20.000+0000",
                    "updated": "2010-03-29T13:07:20.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/41685",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=hans.petter@sysco.no",
                        "name": "hans.petter@sysco.no",
                        "displayName": "Hans Petter",
                        "active": true
                    },
                    "body": "Hi Oleksandr\r\nI bumped into the exact same problem. It isn't Zend framework or PHP that's the problem.\r\nTry running the SQL manually, and you will get the same error. Very strange cause there is no constraint violation...!\r\n\r\nWhat I did to fix it was to recreate the whole table. Then everything worked fine! Seemed like the constraint definitions was corrupted in some way.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=hans.petter@sysco.no",
                        "name": "hans.petter@sysco.no",
                        "displayName": "Hans Petter",
                        "active": true
                    },
                    "created": "2010-07-23T06:40:23.000+0000",
                    "updated": "2010-07-23T06:40:23.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9567\/transitions"
}