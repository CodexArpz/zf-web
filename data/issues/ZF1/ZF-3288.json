{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3288",
    "key": "ZF-3288",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Custom User-Agent support in Zend_XmlRpc_Client requests"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField",
            "value": {
                "timeoriginalestimate": 15,
                "timeestimate": 15
            }
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3288\/votes",
                "votes": 1,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10360",
                    "id": 10360,
                    "description": "Minor Release",
                    "name": "1.10.0",
                    "userReleaseDate": "27\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-27",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-08-22T08:54:14.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=micbox",
                "name": "micbox",
                "displayName": "MIkayel Sukiasyan",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-05-18T23:48:37.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-08-22T08:54:14.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "IT IS IMPOSSIBLE TO SET A CUSTOM User-Agent HTTP header with Zend_XmlRpc_Client !!!\n\nAccording to the HTTP specification, the User-Agent field may contain mulitple product tokens and comments identifying the client. By convention, the product tokens are listed in the order of their significance for identifying the application. The token must be organized as follows \"User-Agent: Agent-name\/Protocol version\/Client version\".\n\nIt is a very important feature to be incorporated into Zend_XmlRpc_Client class in order to reach proper client identification for XML-RPC services.\n\nI propose a VERY simple change in Zend_XmlRpc_Client class. The only method concerned is doRequest(). Just an extra optional $userAgent param is added. Everything else remains the same.\n\nBelow is the changed source code:\n\n{code}\n    \/**\n     * Perform an XML-RPC request and return a response.\n     *\n     * @param Zend_XmlRpc_Request $request\n     * @param null|Zend_XmlRpc_Response $response\n     * @param string $userAgent\n     * @return void\n     *\/\n    public function doRequest($request, $response = null, $userAgent = 'Zend_XmlRpc_Client')\n    {\n        $this->_lastRequest = $request;\n\n        iconv_set_encoding('input_encoding', 'UTF-8');\n        iconv_set_encoding('output_encoding', 'UTF-8');\n        iconv_set_encoding('internal_encoding', 'UTF-8');\n\n        $http = $this->getHttpClient();\n        $http->setUri($this->_serverAddress);\n\n        $http->setHeaders(array(\n            'Content-Type: text\/xml; charset=utf-8',\n            \"User-Agent: $userAgent\" \/\/ HERE IS THE CHANGE added by Mikayel Sukiasyan (userAgent param)\n            \/\/'User-Agent: Zend_XmlRpc_Client' \/\/ HERE IS THE PREVIOUS CODE\n        ));\n\n        $xml = $this->_lastRequest->__toString();\n        $http->setRawData($xml);\n        $httpResponse = $http->request(Zend_Http_Client::POST);\n\n        if (! $httpResponse->isSuccessful()) {\n            throw new Zend_XmlRpc_Client_HttpException(\n                                    $httpResponse->getMessage(),\n                                    $httpResponse->getStatus());\n        }\n\n        if ($response === null) {\n            $response = new Zend_XmlRpc_Response();\n        }\n        $this->_lastResponse = $response;\n        $this->_lastResponse->loadXml($httpResponse->getBody());\n    }\n{code}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/customFieldOption\/10039",
                "value": "  Should Have"
            }
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3288\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lars",
                "name": "lars",
                "displayName": "Lars Strojny",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/11691",
                    "filename": "zend_xmlrpc_client-user_agent.diff",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lucidix",
                        "name": "lucidix",
                        "displayName": "Marcus Welz",
                        "active": true
                    },
                    "created": "2008-12-22T14:05:12.000+0000",
                    "size": 1324,
                    "mimeType": "application\/octet-stream",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/11691\/zend_xmlrpc_client-user_agent.diff"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10171",
                    "id": 10171,
                    "description": "Minor Release Candidate",
                    "name": "1.5.0RC1",
                    "userReleaseDate": "26\/Feb\/08",
                    "archived": true,
                    "releaseDate": "2008-02-26",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10176",
                    "id": 10176,
                    "description": "Minor Release Candidate",
                    "name": "1.5.0RC2",
                    "userReleaseDate": "11\/Mar\/08",
                    "archived": true,
                    "releaseDate": "2008-03-11",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10177",
                    "id": 10177,
                    "description": "Minor Release Candidate",
                    "name": "1.5.0RC3",
                    "userReleaseDate": "12\/Mar\/08",
                    "archived": true,
                    "releaseDate": "2008-03-12",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10172",
                    "id": 10172,
                    "description": "Minor Release",
                    "name": "1.5.0",
                    "userReleaseDate": "17\/Mar\/08",
                    "archived": true,
                    "releaseDate": "2008-03-17",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10173",
                    "id": 10173,
                    "description": "GData Package Correction (Patch Level 1)",
                    "name": "1.5.0PL1",
                    "userReleaseDate": "19\/Mar\/08",
                    "archived": true,
                    "releaseDate": "2008-03-19",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10174",
                    "id": 10174,
                    "description": "Mini Release",
                    "name": "1.5.1",
                    "userReleaseDate": "25\/Mar\/08",
                    "archived": true,
                    "releaseDate": "2008-03-25",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10181",
                    "id": 10181,
                    "description": "Mini Release",
                    "name": " 1.5.2",
                    "userReleaseDate": "15\/May\/08",
                    "archived": true,
                    "releaseDate": "2008-05-15",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10027",
                    "id": 10027,
                    "name": "Zend_XmlRpc_Client",
                    "description": "remote procedure calling using HTTP as the transport and XML as the encoding",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/21959",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Changing to Feature Request and downgrading priority to Minor. The user agent string is already present, so there are no violations of the HTTP spec. The request is to be able to _modify_ the user agent. I do not think using the patch makes sense; instead, it should be done via accessors:\n\n{code}\npublic function setUserAgent($userAgent)\n{\n}\n\npublic function getUserAgent()\n{\n}\n{code}\n\nScheduling for next minor release.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-05-27T05:49:37.000+0000",
                    "updated": "2008-05-27T05:49:37.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24290",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Satoru -- please do not work on this issue. There are some good reasons for some of the variables to be private, and I will work with the maintainer, Mike Naberezny, to address the issues reported.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-09-05T10:34:11.000+0000",
                    "updated": "2008-09-05T10:34:11.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24304",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yoshida@zend.co.jp",
                        "name": "yoshida@zend.co.jp",
                        "displayName": "old of Satoru Yoshida",
                        "active": true
                    },
                    "body": "Hi Matthew. I see.   But the issue you say about variables  may be ZF-3415.\nI will reopen ZF-3415 for you.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yoshida@zend.co.jp",
                        "name": "yoshida@zend.co.jp",
                        "displayName": "old of Satoru Yoshida",
                        "active": true
                    },
                    "created": "2008-09-05T21:09:34.000+0000",
                    "updated": "2008-09-05T21:09:34.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33781",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lars",
                        "name": "lars",
                        "displayName": "Lars Strojny",
                        "active": true
                    },
                    "body": "It's now possible to set a custom UA: either set a custom HTTP client object with your custom user agent or do getHttpClient() and set it accordingly. Fixed in r17752",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lars",
                        "name": "lars",
                        "displayName": "Lars Strojny",
                        "active": true
                    },
                    "created": "2009-08-22T08:54:11.000+0000",
                    "updated": "2009-08-22T08:54:11.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3288\/transitions"
}