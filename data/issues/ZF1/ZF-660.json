{
    "expand": "html",
    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-660",
    "key": "ZF-660",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "MVC modules fail need default module setting"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-660\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/version\/10020",
                    "id": 10020,
                    "description": "Preview Release; I18N, Acl, Auth, Session",
                    "name": "0.7.0",
                    "userReleaseDate": "18\/Jan\/07",
                    "archived": true,
                    "releaseDate": "2007-01-18",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2007-01-16T21:34:03.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2006-12-18T13:54:06.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2007-07-05T14:43:34.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "There is no default module setting available currently when using modules with the controller classes. Additionally, if a controller is not found in the module specified, currently the code looks through all controller directories until it finds a match; this is not optimal, and could lead to some controllers being invoked when they shouldn't.\n\nAs an example:\n{code}\nZF_bugs\n|-- core\n|   `-- controllers\n|       |-- indexController.php\n|       `-- reportsController.php\n|-- index.php\n`-- user\n    `-- controllers\n        `-- newsController.php\n\nindex.php\n\n<?\n    require 'Zend.php';\n\n    function __autoload($className) {\n        Zend::loadClass($className);\n    }\n\n    $path = array (\n        'default' => 'E:\\Work\\htdocs\\work\\ZF_Bugs\\core\\controllers',\n        'user'       => 'E:\\Work\\htdocs\\work\\ZF_Bugs\\user\\controllers'\n     );\n\n\n    $front = Zend_Controller_Front::getInstance();\n    $front->throwExceptions(true);\n    $front->setControllerDirectory($path);\n    $front->setParam('useModules', true);\n\n    $router = new Zend_Controller_Router();\n\n    try {\n        $front->setRouter($router);\n        $front->dispatch();\n    } catch (Zend_Exception $e) {\n        echo $e->getMessage();\n        echo \"<pre>\";\n        echo $e->getTraceAsString();\n    }\n?>\n\nreportsController.php\n<?\nclass ReportsController extends Zend_Controller_Action\n{\n    public function indexAction()\n    {\n        echo __METHOD__;\n    }\n\n    public function noRouteAction()\n    {\n        echo __METHOD__;\n    }\n}\n?>\n\nnewsController.php\n\n<?\nclass User_NewsController extends Zend_Controller_Action\n{\n\n    public function indexAction()\n    {\n        echo __METHOD__;\n    }\n\n    public function noRouteAction()\n    {\n        echo __METHOD__;\n    }\n}\n\n?>\n\n\nRequest: http:\/\/zfbugs.home.net\/user\/news\/\nResponse : User_NewsController::indexAction\n\n\nRequest: http:\/\/zfbugs.home.net\/reports\/\nResponse:\n\nFile \"Reports\\IndexController.php\" was not found.\n\n#0 E:\\Work\\library\\Zend.php(81): Zend::loadFile('IndexController...',\n'Reports', true)\n{code}\n\nThere are two ways to deal with this:\n1. Check for the key 'default', and look in that set of directories when no module is specified\n2. Have two separate controller directory arrays, one for directories with no associated module, and one for those with modules.\n\nAs a possible implementation:\n{code}\n\/\/ in Zend_Controller_Front\npublic function addControllerDirectory($path, $module = 'default')\n{\n    \/\/ check for readable path...\n\n    if ('default' == $module) {\n        $this->_controllerDirDefault[] = $path;\n    } else {\n        $this->_controllerDir[(string) $module] = $path;\n    }\n}\n\npublic function getControllerDirectory()\n{\n    return array_merge($this->_controllerDIr, array('default' => $this->_controllerDirDefault));\n}\n\n\n\/\/ in Zend_Controller_Dispatcher()\nif ($module && isset($directories[$module])) {\n    \/\/ normal checking\n} elseif ($module) {\n    \/\/ look in $directories['default']\n} else {\n    \/\/ normal looping through $directories\n}\n{code}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-660\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/version\/10040",
                    "id": 10040,
                    "description": "Preview Release; MVC maturation, HTTP client, Gdata",
                    "name": "0.6.0",
                    "userReleaseDate": "16\/Dec\/06",
                    "archived": true,
                    "releaseDate": "2006-12-16",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/component\/10011",
                    "id": 10011,
                    "name": "Zend_Controller",
                    "description": "front controller, including router and dispatcher",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/11910",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=begemot",
                        "name": "begemot",
                        "displayName": "Andrey K. Korolyov",
                        "active": true
                    },
                    "body": "And in this case do not work method noRouteAction();",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=begemot",
                        "name": "begemot",
                        "displayName": "Andrey K. Korolyov",
                        "active": true
                    },
                    "created": "2006-12-18T17:08:46.000+0000",
                    "updated": "2006-12-18T17:08:46.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12267",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Resolved in revision 2840",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2007-01-16T21:34:03.000+0000",
                    "updated": "2007-01-16T21:34:03.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-660\/transitions"
}