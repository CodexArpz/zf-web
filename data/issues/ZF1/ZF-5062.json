{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5062",
    "key": "ZF-5062",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "action controller render() not working as expected"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5062\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2008-11-26T13:28:43.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akzincdig",
                "name": "akzincdig",
                "displayName": "Ashley Kitson",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-11-25T10:04:28.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2008-11-26T22:46:32.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Like others, I am having problems with rendering alternate scripts in action methods\n\nMy view class is\nclass ZWare_View_Smarty extends Zend_View_Abstract\n\nand behaves perfectly when the action script terminates and renders itself normally, picking up the correct Smarty .tpl file named after the action script.\n\nHowever if I have the following in a controller:\n\tpublic function testAction() {\n\t\t$this->render('processinstall');\n\t}\nand processinstall.tpl exists in the script path\n\nthen I get the following error:\n\nFatal error: Uncaught exception 'Zend_View_Exception' with message 'script '.phtml' not found in path\n\nTracing through the script with a debugger, the call to render() is fine and executes normally.  It is when the function exits that the the error is thrown which suggests that the rendering functionality is being called twice.\n\nIf I substitute $this->render('processinstall');\nwith $this->render('processinstall.tpl');\nfor instance I get:\nFatal error: Uncaught exception 'Zend_View_Exception' with message 'script 'install\/processinstall-tpl.tpl' not found in path\nwhich shows again that the call to render() is working correctly and that indeed processinstall-tpl.tpl doesn't exist.\n\nI originally wrote this bit of code using ZF 1.5 and it worked fine but now doesn't under 1.7.  Unfortunately I am unable to go back as the system is utilising functionality in 1.7 elsewhere. \n\nTracing through the code seems to suggest that if render is called it should set a flag somewhere to stop subsequent renders at function exit but this is not being observed by the controller\/View or whatever.  Is there an explicit method to call that will stop further renders that I can use after *my* render call that I can use to see if that is the problem?\n\nRegards\nAshley"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5062\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/11660",
                    "filename": "Smarty.php",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-11-26T13:27:52.000+0000",
                    "size": 3552,
                    "mimeType": "application\/x-httpd-php",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/11660\/Smarty.php"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-5902",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5902",
                    "type": {
                        "name": "Sub-Task",
                        "direction": "OUTBOUND"
                    }
                }
            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10260",
                    "id": 10260,
                    "description": "Minor Release",
                    "name": "1.7.0",
                    "userReleaseDate": "17\/Nov\/08",
                    "archived": false,
                    "releaseDate": "2008-11-17",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10026",
                    "id": 10026,
                    "name": "Zend_View",
                    "description": "View portion of the ZF MVC",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/26695",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "The action controller's render() method actually proxies to the ViewRenderer, and as such, the argument passed must play by view renderer rules. What this means is that you should pass an action name, minus the suffix -- and that script must exist in the same subdirectory as the current controller.  Additionally, actual rendering does not happen until postDispatch() -- render() simply tells the ViewRenderer which view script will be rendered. The signature of Zend_Controller_Action::render() is as follows:\n\n{code}\n    public function render($action = null, $name = null, $noController = false)\n{code}\n\n$name would be the response segment to render to, and passing a boolean true to $noController will tell the ViewRenderer not to prefix the view script with the controller subdirectory.\n\nIf you want to render a specific view script and capture the content, you should call render() on the *view* object:\n{code}\n$content = $this->view->render('processinstall.tpl');\n{code}\n{code}\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-11-25T10:46:26.000+0000",
                    "updated": "2008-11-25T10:46:26.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/26696",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akzincdig",
                        "name": "akzincdig",
                        "displayName": "Ashley Kitson",
                        "active": true
                    },
                    "body": "I had a brainwave!!\n\nMy controller does not have an action method called processinstallAction(), so on the off chance, I created one (an empty function) and hey presto my call to render() now works and renders what I am expecting! (without trying to render a script associated with the action method itself or a null one.)\n\nOK, so I have a work around for the problem but I now really think that this is a bug.  The documentation (section 10.7.5.2) says \"render() renders a view script\"\n\nIt doesn't say anything about having to have an associated action method for the view script, or that by not having one an error will be thrown.  Having empty methods littered about is not an ideal situation.\n\nIdeally, render() should possibly have a 4th parameter - $lastRender = true; which would allow devs to signify that they don't want any further rendering to happen in this action method by default\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akzincdig",
                        "name": "akzincdig",
                        "displayName": "Ashley Kitson",
                        "active": true
                    },
                    "created": "2008-11-25T11:43:20.000+0000",
                    "updated": "2008-11-25T11:43:20.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/26697",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akzincdig",
                        "name": "akzincdig",
                        "displayName": "Ashley Kitson",
                        "active": true
                    },
                    "body": "Matthew wrote \"The action controller's render() method actually proxies to the ViewRenderer, and as such, the argument passed must play by view renderer rules ........\"\n\nI know.  I understand the calling convention.  What is at issue (not for the first time in ZF) is that the documentation is not specific or detailed enough.  Looking at other issues here, clearly a lot of people expect render() to work exactly in the fashion I am suggesting and myself believed it to work.\n\nThere are two bugs\/issues here\n1\/ documentation does not accurately describe usage of render()\n2\/ the requirement to have an action method() if you want to render a *view* script\n\nIt is not, I believe, an uncommon requirement to want to display a different page template (i.e. view) dependent on the outcome of some processing in a controller.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akzincdig",
                        "name": "akzincdig",
                        "displayName": "Ashley Kitson",
                        "active": true
                    },
                    "created": "2008-11-25T11:53:21.000+0000",
                    "updated": "2008-11-25T11:53:21.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/26698",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akzincdig",
                        "name": "akzincdig",
                        "displayName": "Ashley Kitson",
                        "active": true
                    },
                    "body": "I see you have resolved the issue by providing a somewhat stock answer.  I don't think you are correct to do so and would like my issues addressed please.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akzincdig",
                        "name": "akzincdig",
                        "displayName": "Ashley Kitson",
                        "active": true
                    },
                    "created": "2008-11-25T11:56:10.000+0000",
                    "updated": "2008-11-25T11:56:10.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/26745",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Re-opening as a documentation issue.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-11-26T04:16:57.000+0000",
                    "updated": "2008-11-26T04:16:57.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/26746",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "I will review the relevant documentation and see if updates need to be made. My answer was *not* a stock answer, as suggested, but an accurate description of how the internals work. To my memory, this is documented, but, as noted, I will review and correct the documentation if I find this is not the case.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-11-26T04:18:30.000+0000",
                    "updated": "2008-11-26T04:18:30.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/26752",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akzincdig",
                        "name": "akzincdig",
                        "displayName": "Ashley Kitson",
                        "active": true
                    },
                    "body": "You may have given an accurate description of how the internals work, but unfortunately it didn't address the reported issue and nor have any subsequent items been addressed.\n\nSo you've classified this as a 'trivial' documentation issue.  That's OK to cover the documentation,  What about the problem of having to have an action method (albeit empty) associated with any alternate views script that you want to render.\n\nAs no mention has been made of it, I assume that there must be a 'correct' way of doing what I (and others) are trying to do.  Perhaps a small example of that may help to alleviate the problem, or if it's covered in the documentation perhaps a pointer to it maybe?  It could help others from logging an issue on the same subject.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akzincdig",
                        "name": "akzincdig",
                        "displayName": "Ashley Kitson",
                        "active": true
                    },
                    "created": "2008-11-26T05:42:31.000+0000",
                    "updated": "2008-11-26T05:42:31.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/26755",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "As noted in a private email exchange, I think the issue may be that you are overriding the render() method in an extension of Zend_Controller_Action. render() normally proxies to the ViewRenderer, and thus uses the ViewRenderer's configuration to resolve the requested view script path; if you are not seeing that, then in all liklihood you have custom code interfering. Can you deny or confirm, please?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-11-26T07:41:10.000+0000",
                    "updated": "2008-11-26T07:41:10.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/26766",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akzincdig",
                        "name": "akzincdig",
                        "displayName": "Ashley Kitson",
                        "active": true
                    },
                    "body": "I have sent a copy of the code in question via email,  however, I will confirm for anyone picking up on this issue, that my extension of Zend_Controller_Action does *not* override render()\n\nI do use a custom ViewRenderer:\n$view = new ZWare_View_Smarty($viewConfig);\n$viewRenderer = new Zend_Controller_Action_Helper_ViewRenderer($view);\n$viewRenderer->setViewSuffix('tpl');\nZend_Controller_Action_HelperBroker::addHelper($viewRenderer);\n\nutilising code based on Maurice Fonk's smarty view class that can be found at http:\/\/naneau.nl\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akzincdig",
                        "name": "akzincdig",
                        "displayName": "Ashley Kitson",
                        "active": true
                    },
                    "created": "2008-11-26T12:39:47.000+0000",
                    "updated": "2008-11-26T12:39:47.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/26767",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akzincdig",
                        "name": "akzincdig",
                        "displayName": "Ashley Kitson",
                        "active": true
                    },
                    "body": "Update:\n\nAs an alternative to having an empty action method to ghost for the view script, you can also follow the call to render() with $this->_helper->viewRenderer->setNoRender(true)  e.g.\n\npublic function someAction() {\n\t\t$this->render('other');\n\t\t$this->_helper->viewRenderer->setNoRender(true);\n}\n\nyou do not then write \npublic function otherAction() {}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akzincdig",
                        "name": "akzincdig",
                        "displayName": "Ashley Kitson",
                        "active": true
                    },
                    "created": "2008-11-26T12:42:49.000+0000",
                    "updated": "2008-11-26T12:42:49.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/26768",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "The problem appears to have been in the _run() method of the Smarty wrapper -- it was incorrectly identifying the appropriate template path. \n\nThe ViewRenderer adds a path based on the current module whenever it is initialized by the instantiation of a new controller. The code as presented was pulling the first item on the scriptPath, which was whatever the new path currently was. As a result, and due to poor matching, it was attempting to use this script path to render the appropriate view script.\n\nI've made some modifications to ensure that the file is compared to the script path accurately, and in my testing this attached version of the Smarty wrapper works apropriately with the ViewRenderer -- and with render().\n\nYou may want to contact Maurice to have him update his version.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-11-26T13:27:54.000+0000",
                    "updated": "2008-11-26T13:27:54.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/26769",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Issue was in Smarty wrapper.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-11-26T13:28:43.000+0000",
                    "updated": "2008-11-26T13:28:43.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/26783",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akzincdig",
                        "name": "akzincdig",
                        "displayName": "Ashley Kitson",
                        "active": true
                    },
                    "body": "Confirmed.  Tested locally with amended script OK.  I will update Smarty class developer.  Thanks for help.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akzincdig",
                        "name": "akzincdig",
                        "displayName": "Ashley Kitson",
                        "active": true
                    },
                    "created": "2008-11-26T22:46:29.000+0000",
                    "updated": "2008-11-26T22:46:29.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5062\/transitions"
}