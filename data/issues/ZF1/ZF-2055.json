{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2055",
    "key": "ZF-2055",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "numerical values (e.g. phone number) are not searcheable"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2055\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10241",
                    "id": 10241,
                    "description": "Minor Release",
                    "name": "1.8.0",
                    "userReleaseDate": "30\/Apr\/09",
                    "archived": false,
                    "releaseDate": "2009-04-30",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-03-18T11:29:01.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=s_t_a_l_k_e_r",
                "name": "s_t_a_l_k_e_r",
                "displayName": "Wladimir Schwitin",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2007-10-10T05:30:46.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-03-18T11:29:01.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Numerical values e.g. phone number are not searcheable. The field types \"text\", \"keyword\" and \"unstored\" are tested. The TestCase for PHPUnit exploits the problem:\n\n{code}\n\n<?php\nset_include_path('.' . PATH_SEPARATOR . '\/opt\/lampp\/lib\/php\/' . PATH_SEPARATOR . '..\/application\/library\/');\n\nrequire_once 'PHPUnit\/Extensions\/PerformanceTestCase.php';\nrequire_once 'Zend\/Search\/Lucene.php';\nrequire_once 'Zend\/Search\/Lucene\/Search\/Query\/Boolean.php';\n\n\/**\n * This TestCase tests the search beavior in fields of type \"keyword\",\n * \"text\" and \"unstored\".\n *\/\nclass BugExploitTest extends PHPUnit_Extensions_PerformanceTestCase{\n\tprivate $index = null;\n\t\n\t\/\/ private $numericalValue = 'Zziqwez'; \/\/ found in fields of any type\n\t\/\/ private $numericalValue = 'Hallowe'; \/\/ not found in field of type \"text\". why? \n\tprivate $numericalValue = '12345678'; \/\/ not found\n\t\n\t\/**\n\t* Creates an index and adds a document to it.\n\t*\/\n\tprotected function setUp() {\n\t\ttry{\n\t\t\t$this->index = Zend_Search_Lucene::open(\"\/tmp\/index\");\n\t\t}catch(Exception $e){\n\t\t\t$this->index = Zend_Search_Lucene::create(\"\/tmp\/index\");\n\t\t}\n\t\t\n\t\t$doc = new Zend_Search_Lucene_Document();\t\t\n\t\t$doc->addField(Zend_Search_Lucene_Field::Keyword('keyword', $this->numericalValue));\n\t\t$doc->addField(Zend_Search_Lucene_Field::Text('text', $this->numericalValue));\n\t\t$doc->addField(Zend_Search_Lucene_Field::UnStored('unstored', $this->numericalValue));\n\t\t$this->index->addDocument($doc);\n\t}\n\n\t\/**\n\t* Shuting down the index\n\t*\/ \n\tprotected function tearDown() {\n\t\t$this->index->commit();\n\t\tunset($this->index);\n\t}\n\t\n\t\/**\n\t* Searching in the field of type \"keyword\".\n\t* Our index should have one document at least. \n\t*\/\n\tpublic function testSearchKeyword(){\n\t\t$this->searchInField('keyword');\n\t}\n\t\n\t\/**\n\t* Searching in the field of type \"text\".\n\t* Our index should have two documents at least. \n\t* (tearDown non't deleletes any dokument) \n\t*\/\n\tpublic function testSearchText(){\n\t\t$this->searchInField('text');\n\t}\n\t\n\t\/**\n\t* Searching in the field of type \"unstored\".\n\t* Our index should have two documents at least. \n\t* (tearDown non't deleletes any dokument) \n\t*\/\n\tpublic function testSearchUnStored(){\n\t\t$this->searchInField('unstored');\n\t}\n\t\n\tprivate function searchInField($fieldName){\n\t\t$userQuery = Zend_Search_Lucene_Search_QueryParser::parse($this->numericalValue);\n\t\tZend_Search_Lucene::setDefaultSearchField($fieldName);\n\t\t$hits = $this->index->find($userQuery);\n\t\t\/\/ after adding a document we expect one search result at least\n\t\t$this->assertNotEquals(0, count($hits));\n\t}\n}\n?>\n\n\n{code}\n\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/customFieldOption\/10040",
                "value": " Nice to Have"
            }
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2055\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alexander",
                "name": "alexander",
                "displayName": "Alexander Veremyev",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10130",
                    "id": 10130,
                    "description": "Mini Release",
                    "name": "1.0.2",
                    "userReleaseDate": "25\/Sep\/07",
                    "archived": true,
                    "releaseDate": "2007-09-25",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10021",
                    "id": 10021,
                    "name": "Zend_Search_Lucene",
                    "description": "pure PHP robust, general purpose text search engine",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/17236",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Assigned to Alexander",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2007-10-15T14:05:29.000+0000",
                    "updated": "2007-10-15T14:05:29.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/17357",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mc",
                        "name": "mc",
                        "displayName": "Marc Boeren",
                        "active": true
                    },
                    "body": "The default is to look for text (a-zA-Z) only, you can change this to include numbers by using:\n\n{code}\nZend_Search_Lucene_Analysis_Analyzer::setDefault(\n  new Zend_Search_Lucene_Analysis_Analyzer_Common_TextNum_CaseInsensitive()\n  );\n{\/code}\n\nIf you need more flexibility in searching, try creating your own analzyer based on e.g. Zend_Search_Lucene_Analysis_Analyzer_Common_Text\n\nThat said, the default setting to search for text only is perhaps confusing for first-time users. \n\nI had a slightly different problem. I was trying to search for words_with_underscores in a Keyword field. The keyword field is indexed but not tokenized, so I expected to get an exact match when is did a search for words_with_underscores. Instead, a search for 'words with underscores' was performed yielding no matches, as the keyword field wasn't tokenized. My solution was to create a ...TextCode.... analyzer.\n\nHope this helps!\n\nCiao, Marc.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mc",
                        "name": "mc",
                        "displayName": "Marc Boeren",
                        "active": true
                    },
                    "created": "2007-10-29T11:42:46.000+0000",
                    "updated": "2007-10-29T11:42:46.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/17432",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=s_t_a_l_k_e_r",
                        "name": "s_t_a_l_k_e_r",
                        "displayName": "Wladimir Schwitin",
                        "active": true
                    },
                    "body": "Thanks, Marc, for your helpfull comment. I inserted your code in the setUp block and the test successes!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=s_t_a_l_k_e_r",
                        "name": "s_t_a_l_k_e_r",
                        "displayName": "Wladimir Schwitin",
                        "active": true
                    },
                    "created": "2007-11-07T02:26:25.000+0000",
                    "updated": "2007-11-07T02:26:25.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29544",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alexander",
                        "name": "alexander",
                        "displayName": "Alexander Veremyev",
                        "active": true
                    },
                    "body": "Default text analyzer skips numbers.\n\nSo you can either set another analyzer:\n{code}\nZend_Search_Lucene_Analysis_Analyzer::setDefault(\n   new Zend_Search_Lucene_Analysis_Analyzer_Common_TextNum_CaseInsensitive());\n{code}\nor use Keyword field type.\n\nIn the second case you have to use search API to search through keyword fields:\n{code}\n$subquery1 = Zend_Search_Lucene_Search_QueryParser::parse($queryString);\n\n$term  = new Zend_Search_Lucene_Index_Term('12345678', 'keyword');\n$subquery2 = new Zend_Search_Lucene_Search_Query_Term($term);\n\n$finalQuery = new Zend_Search_Lucene_Search_Query_Boolean();\n$finalQuery->addSubquery(subquery1);\n$finalQuery->addSubquery(subquery2);\n\n$hits  = $index->find($finalQuery);\n{code}\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alexander",
                        "name": "alexander",
                        "displayName": "Alexander Veremyev",
                        "active": true
                    },
                    "created": "2009-03-18T11:28:57.000+0000",
                    "updated": "2009-03-18T11:28:57.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2055\/transitions"
}