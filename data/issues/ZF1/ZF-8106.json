{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8106",
    "key": "ZF-8106",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Null values are transform in string(0) with StringTrim filter."
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8106\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/2",
                "name": "Won't Fix"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10360",
                    "id": 10360,
                    "description": "Minor Release",
                    "name": "1.10.0",
                    "userReleaseDate": "27\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-27",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-10-24T01:59:54.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas963",
                "name": "thomas963",
                "displayName": "thomas",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-10-20T03:16:55.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-10-24T01:59:54.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Hello,\r\n\r\n(i already post this in wrong section, sorry : http:\/\/framework.zend.com\/issues\/browse\/ZF-8099, and thanks for answer, but Zend_Filter_Null was proposed as solution but it is not an efficient resolution of the problem).\r\n\r\nNull value are transformed in empty string when passing thrue the StringTrim filter (and maybe other escaper i didn't test).\r\nThis is problem,especially for database storing, where you need often to keep null type.\r\nFor instance if you need to differentiate null and empty string (and use booth type), after filtering you can not know if original data was null or empty sting as it goes out of the filter as empty string in all case. Even the new Zend_Filter_Null is useless in this case, as it just convert but is unable to know the original type.\r\n\r\nThe problem is in the 1.9.4 version (and 1.9.3 and maybe before...).\r\nStringTrim should remove empty space before and after of the string, as intended, not transform null value in sring. It is a bug.\r\nOr it should be named StringTrimAndNullToEmptyString filter ; )\r\n\r\nHow to recreate:\r\n\r\n------------------------------------------------------\r\n\r\nZend_Loader::loadClass('Zend_Filter_Input');\r\n$filters = array(\r\n'*' => 'StringTrim' \/\/ try to comment and decomment this line\r\n);\r\n\r\n$validators = array(\r\n'date' => array(array('Regex', '\/^[0-9]{4}-[0-9]{2}-[0-9]{2}$\/'), 'allowEmpty' => true),\r\n);\r\n\r\n$datas['date'] = null;\r\n$input = new Zend_Filter_Input($filters, $validators, $datas);\r\n\r\nvar_dump($datas); \/\/ here date is null, so ok.\r\n$datas_valid = $input->getUnescaped(); \/\/ or getEscaped() change nothing\r\nvar_dump($datas_valid); \/\/ here date is string(0) or null, depending the comment or decomment of the stringtrim filter... should always be null !\r\n\/\/ And for my application string(0) give me an SQL error as date can only be date format or null (no date given) comming from a web form.\r\n\r\n------------------------------------------------------\r\n\r\nCheers,\r\nThomas\r\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8106\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10362",
                    "id": 10362,
                    "description": "Mini Release",
                    "name": "1.9.3",
                    "userReleaseDate": "22\/Sep\/09",
                    "archived": false,
                    "releaseDate": "2009-09-22",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10370",
                    "id": 10370,
                    "description": "Mini Release",
                    "name": "1.9.4",
                    "userReleaseDate": "13\/Oct\/09",
                    "archived": false,
                    "releaseDate": "2009-10-13",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10013",
                    "id": 10013,
                    "name": "Zend_Filter",
                    "description": "methods for filtering data",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35446",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "And how do you come to the idea that \"trim\" does not return a string ?\r\n\r\nStringTrim works exactly like PHP's \"trim()\" method except that it adds unicode behaviour.\r\n\r\nA filter which is intented to return an string will always convert any input to string representation. And an empty string is the representation for a null input.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-10-21T12:19:42.000+0000",
                    "updated": "2009-10-21T12:19:42.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35457",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas963",
                        "name": "thomas963",
                        "displayName": "thomas",
                        "active": true
                    },
                    "body": "Hello,\r\n\r\nYes, trim() php function return string type.\r\nSo you are right StringTrim filter should send back a string.\r\n\r\nA solution to my problem would be to create a new filter type, named StingOnlyTrim for exemple, so only the sting type are trimmed. Int or null value are not trimmed (as it is not needed for them). So depending case of use we could use StringTrim (if we want to have in all case String type in output) or StringOnlyTrim (if we want to have only the string type variable trimmed and keep the original data type of the variable).\r\n\r\nAnother solution would be to be able to filter depending the type of the variable:\r\n\r\n$filters = array(\r\n    '*' => Array('StringTrim', TYPE_CHAR); \/\/ we could have TYPE_ALL (by default), TYPE_CHAR, TYPE_INT, TYPE_NULL, etc. \r\n);\r\n\r\nJust ideas ; )\r\n\r\n\r\nThanks. For me problem is resolve. If you think it is you can close it.\r\n\r\nCheers,\r\nThomas.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas963",
                        "name": "thomas963",
                        "displayName": "thomas",
                        "active": true
                    },
                    "created": "2009-10-22T03:31:04.000+0000",
                    "updated": "2009-10-22T03:31:04.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35508",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "The correct solution would be simply to extend Zend_Filter_StringTrim when you are in need of additional behaviour which does not fall under the 80\/20 rule from ZF.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-10-24T01:58:08.000+0000",
                    "updated": "2009-10-24T01:58:08.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35509",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Closing as Wont Fix.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-10-24T01:59:54.000+0000",
                    "updated": "2009-10-24T01:59:54.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8106\/transitions"
}