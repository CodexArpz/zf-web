{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11245",
    "key": "ZF-11245",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Form::loadDefaultDecorators() is called too late in constructor"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11245\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2011-03-31T12:38:30.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=nuxwin",
                "name": "nuxwin",
                "displayName": "Laurent declercq",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2011-03-31T07:03:42.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-04-01T00:10:53.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "Zend_Form",
                "form"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I've a subclass that extends the *Zend_Form* class. In my *My_Class::init()* method, I sets a \"Description\" decorator like this:\r\n\r\n{code:title=My_Class::init()|borderStyle=solid}\r\n    public function init()\r\n    {\r\n        $this->setName('loginForm');\r\n        $this->setElementsBelongTo('loginForm');\r\n\r\n        $this->setDescription('Authentication')\r\n            ->addDecorator('Description', array('placement' => 'prepend'));\r\n\r\n\t\t...\r\n    }\r\n{code}\r\n\r\nUnfortunately, When the Form is rendered, only the part belong to the Description is displayed. I've searched, and it's seem that the call of *Zend_Form::loadDefaultDecorators()* is made too late (just after the init() method) in the constructor because *Zend_Form::loadDefaultDecorators()* load defaults decorators only if no one is already set:\r\n\r\n{code:title=Zend_Form::loadDefaultDecorators()|borderStyle=solid}\r\n    public function loadDefaultDecorators()\r\n    {\r\n        if ($this->loadDefaultDecoratorsIsDisabled()) {\r\n            return $this;\r\n        }\r\n\r\n        $decorators = $this->getDecorators();\r\n        if (empty($decorators)) {\r\n            $this->addDecorator('FormElements')\r\n                 ->addDecorator('HtmlTag', array('tag' => 'dl', 'class' => 'zend_form'))\r\n                 ->addDecorator('Form');\r\n        }\r\n        return $this;\r\n    }\r\n{code}\r\n\r\nThe problem seem to be fixed when the call *Zend_Form::loadDefaultDecorators()* is made before the *Zend_Form::init()* method. Now, maybe it's a wrong way to fix this issue... Of course, I can process like this:\r\n\r\n{code:title=My_Class::init()|borderStyle=solid}\r\n    public function init()\r\n    {\r\n        $this->setName('loginForm');\r\n        $this->setElementsBelongTo('loginForm');\r\n\r\n\t\t\/\/ Force to load Form default decorators\r\n\t\t$this->loadDefaultDecorators();\r\n\r\n        $this->setDescription('Authentication')\r\n            ->addDecorator('Description', array('placement' => 'prepend'));\r\n\r\n\t\t...\r\n    }\r\n{code}\r\n\r\nbut that seem to be a bad workaround since we have now a double call of the *Zend_Form::loadDefaultDecorators()* method.\r\n\r\n\r\nSorry for my poor English, I'm French."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11245\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10540",
                    "id": 10540,
                    "description": "Mini Release",
                    "name": "1.11.4",
                    "userReleaseDate": "03\/Mar\/11",
                    "archived": false,
                    "releaseDate": "2011-03-03",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10029",
                    "id": 10029,
                    "name": "Zend_Form",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/45671",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "This is by design. loadDefaultDecorators() occurs after init() to allow init() to override the default decorators.\r\n\r\nYou can simply call $this->loadDefaultDecorators() in your init() method (as you've done in your last example) if you wish to use those as the base and simply add to them.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2011-03-31T12:38:11.000+0000",
                    "updated": "2011-03-31T12:38:11.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/45771",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=nuxwin",
                        "name": "nuxwin",
                        "displayName": "Laurent declercq",
                        "active": true
                    },
                    "body": "ok, thanks you for the answer here. For me that seem to be wrong and not conform to the default behavior. Indeed, when we use the *Zend_Form* class without extending it, default decorators are always loaded, and if we want not them, we can use the *Zend_Form::setDisableLoadDefaultDecorators()* setter to set the appropriate flag.\r\nTo resume, in case where we use the init() method in subclass, the default behavior is changed. That seem to be an inconsistency in the implementation.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=nuxwin",
                        "name": "nuxwin",
                        "displayName": "Laurent declercq",
                        "active": true
                    },
                    "created": "2011-03-31T22:28:48.000+0000",
                    "updated": "2011-03-31T22:28:48.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/45772",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "setDisableLoadDefaultDecorators() is intended for use cases where you do not wish to use decorators at all. loadDefaultDecorators() is intended for cases where there are no decorators already instantiated (nor disabled) by the end of object construction; its purpose is to allow developers to lazily override via init() or configuration.\r\n\r\nAgain, the behavior is intended and documented; changing it at this time would introduce a very large backwards compatibility break. ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2011-03-31T23:01:49.000+0000",
                    "updated": "2011-03-31T23:01:49.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/45773",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=nuxwin",
                        "name": "nuxwin",
                        "displayName": "Laurent declercq",
                        "active": true
                    },
                    "body": "No problem ; It was just my opinion. I known your competences and I trust you.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=nuxwin",
                        "name": "nuxwin",
                        "displayName": "Laurent declercq",
                        "active": true
                    },
                    "created": "2011-04-01T00:10:53.000+0000",
                    "updated": "2011-04-01T00:10:53.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11245\/transitions"
}