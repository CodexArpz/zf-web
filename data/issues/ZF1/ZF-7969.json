{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7969",
    "key": "ZF-7969",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Where clause with value '\\? does not handle binding of parameters properly"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7969\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-11-05T00:28:41.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lysender",
                "name": "lysender",
                "displayName": "Lysender",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-09-28T18:02:00.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-11-05T00:28:42.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "bind",
                "escape",
                "input",
                "login",
                "parameters",
                "select",
                "where"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I also tried this on ZF 1.9.3 and the bug exists. I have this setup:\n\n1. A table object that extends Zend_Db_Table_Abstract\n2. A model using that table object\n3. A query that goes like this:\n\n$table = $this->_getTable();\n$select = $table->select()\n\t->where('Data_Division = ?', $category)\n\t->where('Name = ?', $name);\n\nWhere $name is a string, and should accept any kind of patterns. It we enter '\\? for name\n\n'\\?\n'\\?\n'\\?\nSingle Quote: Slash: Question Mark\nSingle Quote: Slash: Question Mark\nSingle Quote: Slash: Question Mark\n\nHere is the error:\n\n2009-09-28T18:47:44+08:00 EMERG (0): 112233@10.38.248.110: Application error: SQLSTATE[HY093]: Invalid parameter number: no parameters were bound\n#0 C:\\www\\web_projects\\xxx\\library\\Zend\\Db\\Statement.php(303): Zend_Db_Statement_Pdo->_execute(Array)\n#1 C:\\www\\web_projects\\xxx\\library\\Zend\\Db\\Adapter\\Abstract.php(464): Zend_Db_Statement->execute(Array)\n#2 C:\\www\\web_projects\\xxx\\library\\Zend\\Db\\Adapter\\Pdo\\Abstract.php(232): Zend_Db_Adapter_Abstract->query(Object(Zend_Db_Table_Select), Array)\n#3 C:\\www\\web_projects\\xxx\\library\\Zend\\Db\\Table\\Abstract.php(1393): Zend_Db_Adapter_Pdo_Abstract->query(Object(Zend_Db_Table_Select))\n#4 C:\\www\\web_projects\\xxx\\library\\Zend\\Db\\Table\\Abstract.php(1257): Zend_Db_Table_Abstract->_fetch(Object(Zend_Db_Table_Select))\n#5 C:\\www\\web_projects\\techtuit\\application\\models\\NameMnt.php(67): Zend_Db_Table_Abstract->fetchRow(Object(Zend_Db_Table_Select))\n#6 C:\\www\\web_projects\\xxx\\application\\controllers\\Ts13NameMntController.php(474): Default_Model_NameMnt->nameExists(2, ''\\?', 4)\n#7 C:\\www\\web_projects\\xxx\\application\\controllers\\Ts13NameMntController.php(150): Ts13NameMntController->_checkData(Array, 'ADD')\n#8 C:\\www\\web_projects\\xxx\\library\\Zend\\Controller\\Action.php(512): Ts13NameMntController->ajaxAddAction()\n#9 C:\\www\\web_projects\\xxx\\library\\Zend\\Controller\\Dispatcher\\Standard.php(288): Zend_Controller_Action->dispatch('ajaxAddAction')\n#10 C:\\www\\web_projects\\xxx\\library\\Zend\\Controller\\Front.php(945): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http))\n#11 C:\\www\\web_projects\\xxx\\library\\Zend\\Application\\Bootstrap\\Bootstrap.php(77): Zend_Controller_Front->dispatch()\n#12 C:\\www\\web_projects\\xxx\\library\\Zend\\Application.php(328): Zend_Application_Bootstrap_Bootstrap->run()\n#13 C:\\www\\web_projects\\xxx\\public\\index.php(39): Zend_Application->run()\n#14 {main}\n\nIt seems that binding parameters does not work properly of could be that input is not properly escaped.\nI have tried it also on login, still the same error occurs.\n\nI tried on some ZF made websites like:\n\nhttp:\/\/www.indianapolismotorspeedway.com\/user\/login\nEmail: test@test.com\nPassword: test'\\?\n\nApplication error occurs\n\nIs this a problem with PDO or with ZF?\n\n\/\/ I'm sorry if I don't follow your Issue tracking rules, but I really have to post this. "
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7969\/watchers",
                "isWatching": false,
                "watchCount": 3
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/6",
                "name": "Closed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ramon",
                "name": "ramon",
                "displayName": "Ramon Henrique Ornelas",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-1343",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1343",
                    "type": {
                        "name": "Related",
                        "direction": "OUTBOUND",
                        "description": "is related to"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10330",
                    "id": 10330,
                    "description": "Mini Release",
                    "name": "1.8.2",
                    "userReleaseDate": "27\/May\/09",
                    "archived": false,
                    "releaseDate": "2009-05-27",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10331",
                    "id": 10331,
                    "description": "Mini Release",
                    "name": "1.8.3",
                    "userReleaseDate": "09\/Jun\/09",
                    "archived": false,
                    "releaseDate": "2009-06-09",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10340",
                    "id": 10340,
                    "description": "Mini Release",
                    "name": "1.8.4",
                    "userReleaseDate": "23\/Jun\/09",
                    "archived": false,
                    "releaseDate": "2009-06-23",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10320",
                    "id": 10320,
                    "description": "Minor Release",
                    "name": "1.9.0",
                    "userReleaseDate": "31\/Jul\/09",
                    "archived": false,
                    "releaseDate": "2009-07-31",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10350",
                    "id": 10350,
                    "description": "Mini Release",
                    "name": "1.9.1",
                    "userReleaseDate": "11\/Aug\/09",
                    "archived": false,
                    "releaseDate": "2009-08-11",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10361",
                    "id": 10361,
                    "description": "Mini Release",
                    "name": "1.9.2",
                    "userReleaseDate": "25\/Aug\/09",
                    "archived": false,
                    "releaseDate": "2009-08-25",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10362",
                    "id": 10362,
                    "description": "Mini Release",
                    "name": "1.9.3",
                    "userReleaseDate": "22\/Sep\/09",
                    "archived": false,
                    "releaseDate": "2009-09-22",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10132",
                    "id": 10132,
                    "name": "Zend_Db_Select",
                    "description": "OO interface to building a SELECT SQL query.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35748",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ramon",
                        "name": "ramon",
                        "displayName": "Ramon Henrique Ornelas",
                        "active": true
                    },
                    "body": "Please, post sql creation table.\r\n\r\nTry take the generated string, object Zend_Db_Select.\r\n\r\necho $select; exit;\r\n\r\nTry running on a client bd, the generated string by Zend_Db_Select.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ramon",
                        "name": "ramon",
                        "displayName": "Ramon Henrique Ornelas",
                        "active": true
                    },
                    "created": "2009-11-03T08:25:23.000+0000",
                    "updated": "2009-11-03T08:25:23.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35752",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jenny",
                        "name": "jenny",
                        "displayName": "Jenny",
                        "active": true
                    },
                    "body": "I have seen this error when data contains a single quote and a question mark somewhere after the single quote.\r\n\r\nCREATE TABLE `users` (\r\n  `id` int(11) unsigned NOT NULL auto_increment,\r\n  `user_name` varchar(64) NOT NULL,\r\n  `email` varchar(255) NOT NULL,\r\n  `password` varchar(64) NOT NULL,\r\n  `active` tinyint(1) NOT NULL default '1',\r\n  PRIMARY KEY  (`id`),\r\n  UNIQUE KEY `user_name` (`user_name`)\r\n) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8\r\n;\r\n\r\n$user_name = \"te'st?name\";\r\n$password = \"bobo\";\r\n\r\n$select = $this->_table->select();\r\n$select->from($this->_name, '*');\r\n$select->where('user_name = ?', $user_name);\r\n$select->where('password = ?', md5($password));\r\n\r\n$stmt = $select->query(); \/\/ Exception thrown at this point.\r\n\r\nIf I echo the $select I get the following:\r\n\r\nSELECT `users`.* FROM `users` WHERE (user_name = 'te\\'st?name') AND (password = 'ca2cd2bcc63c4d7c8725577442073dde')\r\n\r\nThe MySQL query log shows that this statement is never sent to the server.  But the query is well-formed and MySQL will execute it properly if I run it manually.\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jenny",
                        "name": "jenny",
                        "displayName": "Jenny",
                        "active": true
                    },
                    "created": "2009-11-03T09:56:01.000+0000",
                    "updated": "2009-11-03T09:56:01.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35759",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ramon",
                        "name": "ramon",
                        "displayName": "Ramon Henrique Ornelas",
                        "active": true
                    },
                    "body": "Try call\r\n \r\n$this->_table->fetchAll($select);\r\n\r\nhttp:\/\/framework.zend.com\/manual\/en\/zend.db.table.html",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ramon",
                        "name": "ramon",
                        "displayName": "Ramon Henrique Ornelas",
                        "active": true
                    },
                    "created": "2009-11-03T12:49:01.000+0000",
                    "updated": "2009-11-03T12:49:01.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35760",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ramon",
                        "name": "ramon",
                        "displayName": "Ramon Henrique Ornelas",
                        "active": true
                    },
                    "body": "Try call\r\n \r\n$this->_table->fetchAll($select);\r\n\r\nhttp:\/\/framework.zend.com\/manual\/en\/zend.db.table.html",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ramon",
                        "name": "ramon",
                        "displayName": "Ramon Henrique Ornelas",
                        "active": true
                    },
                    "created": "2009-11-03T13:03:28.000+0000",
                    "updated": "2009-11-03T13:03:28.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35761",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jenny",
                        "name": "jenny",
                        "displayName": "Jenny",
                        "active": true
                    },
                    "body": "I get the same error either way since they both use a Statement.\r\n\r\nThe initial exception is a PDOException being thrown by the PDOStatement object within the Zend_Db_Statement_Pdo::_execute() method.  So I suppose this is a PDO bug.  The query produced by the Zend_Db_Select object is valid SQL.\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jenny",
                        "name": "jenny",
                        "displayName": "Jenny",
                        "active": true
                    },
                    "created": "2009-11-03T13:53:45.000+0000",
                    "updated": "2009-11-03T13:53:45.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35762",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jenny",
                        "name": "jenny",
                        "displayName": "Jenny",
                        "active": true
                    },
                    "body": "The servers on which I have seen this error are both using PHP 5.2.6.  I have since tested on a server with 5.2.10, and this bug does not occur.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jenny",
                        "name": "jenny",
                        "displayName": "Jenny",
                        "active": true
                    },
                    "created": "2009-11-03T14:27:52.000+0000",
                    "updated": "2009-11-03T14:27:52.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35763",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lysender",
                        "name": "lysender",
                        "displayName": "Lysender",
                        "active": true
                    },
                    "body": "I have recently tried it on PHP 5.2.10 (Zend Server CE) and the error does not occur. So therefore it is a PDO issue. I have upgraded our server already. Tnx",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lysender",
                        "name": "lysender",
                        "displayName": "Lysender",
                        "active": true
                    },
                    "created": "2009-11-03T16:17:43.000+0000",
                    "updated": "2009-11-03T16:17:43.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7969\/transitions"
}