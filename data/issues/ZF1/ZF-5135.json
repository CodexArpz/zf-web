{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5135",
    "key": "ZF-5135",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend Loader can't find my extended Zend_Controller_Action"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5135\/votes",
                "votes": 3,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-11-25T00:32:40.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jdunmore",
                "name": "jdunmore",
                "displayName": "James Dunmore",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-12-02T04:05:35.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-11-25T00:32:40.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Hi,\n\nIn my controllers, I have created a \"Base controller\" where by my base controller extends Zend_Controller_Action, sets up properties for my view (in the constructor) then my controllers extend this class.\n\nFor example:\n{code:php}\n\/\/ in \/application\/controllers\nabstract class SupportbaseController extends Zend_Controller_Action\n{\n\/\/etc\n}}\n\nthen I can do\nclass IndexController extends SupportbaseController\n{\n\/\/etc\n}\n\n{code}\n\nThis works fine in 1.6.2, but in 1.7.1 I get:\n{quote}\nWARNING (Zend_Loader::include_once(SupportbaseController.php) [function.Zend-Loader-include-once]: failed to open stream: No such file or directory) in \/xxxxxxxxxx\/Zend\/Loader.php at line 83\n{quote}\n\nIf I manually require the file, it all works fine, so it looks like it can work out that \"SupportBase\" is a controller (i.e. it is looking in the root, rather than the application\/controller directory)\n\nI accept that I could have done something wrong, or trying to do something that ZF isn't designed to to (but the documentation isn't too clear is it) - and this works fine in 1.6.2.\n\n\nThanks,\nJames."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/1",
                "name": "Blocker"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5135\/watchers",
                "isWatching": false,
                "watchCount": 5
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bate",
                "name": "bate",
                "displayName": "Marco Kaiser",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10270",
                    "id": 10270,
                    "description": "Mini Release",
                    "name": "1.7.1",
                    "userReleaseDate": "01\/Dec\/08",
                    "archived": false,
                    "releaseDate": "2008-12-01",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10011",
                    "id": 10011,
                    "name": "Zend_Controller",
                    "description": "front controller, including router and dispatcher",
                    "isAssigneeTypeValid": false
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10001",
                    "id": 10001,
                    "name": "Zend_Loader",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28246",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ultra_blue",
                        "name": "ultra_blue",
                        "displayName": "Greg Gomez",
                        "active": true
                    },
                    "body": "I'm having the same issue, and I was able to work around it the same way James did.\n\nAre we really in error here or is it a coder error? In other words, am I doing something wrong that used to be ok?\n\nThanks!\nGreg\n\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ultra_blue",
                        "name": "ultra_blue",
                        "displayName": "Greg Gomez",
                        "active": true
                    },
                    "created": "2009-01-15T13:19:42.000+0000",
                    "updated": "2009-01-15T13:19:42.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28247",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Is '.' on your include_path? If not, add it.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2009-01-15T15:17:45.000+0000",
                    "updated": "2009-01-15T15:17:45.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28249",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ultra_blue",
                        "name": "ultra_blue",
                        "displayName": "Greg Gomez",
                        "active": true
                    },
                    "body": "Hi, Matthew:\n\nThanks for taking the time to reply!\n\nYeah, '.' is on our path. First thing in bootstrap's set_include_path(), in fact.\n\nThanks,\nGreg\n\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ultra_blue",
                        "name": "ultra_blue",
                        "displayName": "Greg Gomez",
                        "active": true
                    },
                    "created": "2009-01-15T15:27:19.000+0000",
                    "updated": "2009-01-15T15:27:19.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28836",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zeff",
                        "name": "zeff",
                        "displayName": "Sebastian Matusiak",
                        "active": true
                    },
                    "body": "Hello James,\n\nI experienced same problems when switching from version 1.6 to 1.7.\nMy workaround is to append the path of my controller directory to the include path.\n\nSay, your directory structure is:\n\n\/application\n\t\/models\n\t\/controllers\n\t...\n\/library\n\t\/Zend\n\t...\n\/public\n\tindex.php\n\nSo, in your index.php you would have something like that:\n...\ndefine('INDEX_PATH', realpath(dirname(__FILE__)));\n$paths = array(\n\tINDEX_PATH . '\/..\/library',\n\tINDEX_PATH . '\/..\/application\/models',\n\tINDEX_PATH . '\/..\/application\/controllers',\n\tget_include_path()\n);\nset_include_path(implode(PATH_SEPARATOR, $paths));\n...\n\nAs with version 1.6 it worked without this explicit inclusion of controllers directory to the include path.\n\nRegards,\nSebastian.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zeff",
                        "name": "zeff",
                        "displayName": "Sebastian Matusiak",
                        "active": true
                    },
                    "created": "2009-02-15T06:15:23.000+0000",
                    "updated": "2009-02-15T06:15:23.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28852",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jdunmore",
                        "name": "jdunmore",
                        "displayName": "James Dunmore",
                        "active": true
                    },
                    "body": "Hi Sebastian,\n\nYes, I've applied something very slightly different, but on a similar principle; the thing that is bugging me is that it works in 1.6, and not in 1.7, which does imply an undocumented change (or at least something changed to start working how it should, in which case I've done something wrong).\n\nAlthough set_include_path at run time is an expensive operation (compared to it being set in php.ini)\n\nMatthew  - yes \".\" is on my include path as well - any other help would be appreciated (again, is this a ZF fault, or something that (now more than one person) has done incorrectly)\n\nThanks.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jdunmore",
                        "name": "jdunmore",
                        "displayName": "James Dunmore",
                        "active": true
                    },
                    "created": "2009-02-16T07:06:47.000+0000",
                    "updated": "2009-02-16T07:06:47.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29339",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=aqls",
                        "name": "aqls",
                        "displayName": "James Lyttelton",
                        "active": true
                    },
                    "body": "Same issue here.\nIn Zend\/Controller\/Dispatcher\/Standard.php\nin ZF version 1.6 lines 341 to 349\nthe loadClass() method uses Zend_Loader::loadFile()\nwith this code:\n\n        $dir         = dirname($loadFile);\n        $file        = basename($loadFile);\n\n        try {\n            Zend_Loader::loadFile($file, $dir, true);\n        } catch (Zend_Exception $e) {\n            require_once 'Zend\/Controller\/Dispatcher\/Exception.php';\n            throw new Zend_Controller_Dispatcher_Exception('Cannot load controller class \"' . $className . '\" from file \"' . $file . '\" in directory \"' . $dir . '\"');\n        }\n\nin ZF version 1.7 lines 337 to 340\nthe loadClass() method now uses include_once()\nwith this code:\n\n        if (!include_once $loadFile) {\n            require_once 'Zend\/Controller\/Dispatcher\/Exception.php';\n            throw new Zend_Controller_Dispatcher_Exception('Cannot load controller class \"' . $className . '\" from file \"' . $loadFile . \"'\");\n        }\n\n\nMy temporary patch to get it working for me is to comment out the new 'include_once()' code in the new Standard.php (directly above) and paste in the old 'Zend_Loader' code (also above). I'm not sure of the best way to work around this in the bootstrap.\n\nThe relevant Zend_Loader::loadFile code is as follows:\n    public static function loadFile($filename, $dirs = null, $once = false)\n    {\n        self::_securityCheck($filename);\n\n        \/**\n         * Search in provided directories, as well as include_path\n         *\/\n        $incPath = false;\n        if (!empty($dirs) && (is_array($dirs) || is_string($dirs))) {\n            if (is_array($dirs)) {\n                $dirs = implode(PATH_SEPARATOR, $dirs);\n            }\n            $incPath = get_include_path();\n            set_include_path($dirs . PATH_SEPARATOR . $incPath);\n        }\n\n        \/**\n         * Try finding for the plain filename in the include_path.\n         *\/\n        if ($once) {\n            include_once $filename;\n        } else {\n            include $filename;\n        }\n\n        \/**\n         * If searching in directories, reset include_path\n         *\/\n        if ($incPath) {\n            set_include_path($incPath);\n        }\n\n        return true;\n    }",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=aqls",
                        "name": "aqls",
                        "displayName": "James Lyttelton",
                        "active": true
                    },
                    "created": "2009-03-09T08:35:18.000+0000",
                    "updated": "2009-03-09T08:35:18.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29341",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jdunmore",
                        "name": "jdunmore",
                        "displayName": "James Dunmore",
                        "active": true
                    },
                    "body": "Hi James,\n\nThanks for finding that - brilliant; I concur; I've been through the source of Zend\/Controller\/Dispatcher\/Standard.php, and the lines you mention have changed from:\n\nZend_Loader::loadFile($file, $dir, true);\n\nto\n\ninclude_once $loadFile\n\n\nI think the key point is that in 1.7.1, previous to the new include_once, it doesn't utilise as much of the following (that 1.6 with Zend_Loader::loadFile did)\n\n{code:php} \n$dispatchDir = $this->getDispatchDirectory();\n332         $loadFile    = $dispatchDir . DIRECTORY_SEPARATOR . $this->classToFilename($className);\n333         $dir         = dirname($loadFile);\n334         $file        = basename($loadFile);\n{code}\n\nSo there is a change, which has caused code to break - what we (still) need to establish is should we now write code in a certain way to now reflect this change?\n\n\nThanks.\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jdunmore",
                        "name": "jdunmore",
                        "displayName": "James Dunmore",
                        "active": true
                    },
                    "created": "2009-03-09T09:37:17.000+0000",
                    "updated": "2009-03-09T09:37:17.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36265",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bate",
                        "name": "bate",
                        "displayName": "Marco Kaiser",
                        "active": true
                    },
                    "body": "With 1.7+ release there was a BC break. You have to Namespace you classes like MyApp_SupportController\r\nto get it working with the new introduced autoloader mechanism. Otherwise you have to add it to the include path.\r\n\r\nIf not true, please provide a working setup with path and application layout.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bate",
                        "name": "bate",
                        "displayName": "Marco Kaiser",
                        "active": true
                    },
                    "created": "2009-11-20T05:25:05.000+0000",
                    "updated": "2009-11-20T05:25:05.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5135\/transitions"
}