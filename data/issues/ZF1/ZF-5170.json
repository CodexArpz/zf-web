{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5170",
    "key": "ZF-5170",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Db_Adapter_Pdo_Mssql memory leak?"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5170\/votes",
                "votes": 1,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-09-17T17:34:34.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mkliewe",
                "name": "mkliewe",
                "displayName": "Michael Kliewe",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-12-05T16:33:09.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-09-17T17:34:33.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "mssql"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Hello,\n\nI have a problem with Zend_Db when using a mssql-database.\nI'm working several month with Zend Framework now, and was writing a kind of \"windows service\" in php (with php cli as service or scheduled task). This script runs very long (many days\/weeks) in a loop. But I experienced memory problems with Zend_Db.\n\nWith each SQL-Query the Zend_Db object seems to grow a bit, depending on the select-result-size!!! Even with only one result row, the script-memory-usage grows. If I do INSERTs or UPDATES, all works fine, but when doing SELECTs, the script-memory-usage grows and grows. And my script runs many days and has 100.000 selects a day, which results in >100MB memory usage growth per day. So I have to restart the script every day ;-(\n\nZend_Db seems to cache that results or so, I don't know. Zend_Db_Profiler is disabled of cause.\n\nI did a few tests, tested PEAR-MDB2 and also Zend_Db Pdo_Sqlite-Adapter . With these two methods I didn't experience a memory growth.\n\nI will attach my test files, so you can check it on your own. You will need PEAR MDB2 installed to run it (or you disable that part).\nI will also attach my results (results.txt), where you can see, that sqlite and mdb2 don't grow, but mssql does!\n\nI cannot use Zend_Db with that bug. Please fix it soon!\n\nMichael"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/6",
                "name": "N\/A"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5170\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                "name": "ralph",
                "displayName": "Ralph Schindler",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/11672",
                    "filename": "memleak.zip",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mkliewe",
                        "name": "mkliewe",
                        "displayName": "Michael Kliewe",
                        "active": true
                    },
                    "created": "2008-12-05T16:34:40.000+0000",
                    "size": 13314,
                    "mimeType": "application\/zip",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/11672\/memleak.zip"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10270",
                    "id": 10270,
                    "description": "Mini Release",
                    "name": "1.7.1",
                    "userReleaseDate": "01\/Dec\/08",
                    "archived": false,
                    "releaseDate": "2008-12-01",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10012",
                    "id": 10012,
                    "name": "Zend_Db",
                    "description": "interfaces, APIs, and adapters for various third-party data stores",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/27093",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mkliewe",
                        "name": "mkliewe",
                        "displayName": "Michael Kliewe",
                        "active": true
                    },
                    "body": "zip archive with my test script and results.txt, where you can see the problem with mssql-adapter",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mkliewe",
                        "name": "mkliewe",
                        "displayName": "Michael Kliewe",
                        "active": true
                    },
                    "created": "2008-12-05T16:34:44.000+0000",
                    "updated": "2008-12-05T16:34:44.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34301",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gotys",
                        "name": "gotys",
                        "displayName": "Petr Gottvald",
                        "active": true
                    },
                    "body": "I ran into the same exact issue yesterday. It doesn't seem Zend_Db was written with memory leaks in mind. Running a PHP Daemon using Zend_Db is impossible right now. I am examining the source codes of Zend_Framework right now and will report if I find something.\n\nSomeone please fix this!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gotys",
                        "name": "gotys",
                        "displayName": "Petr Gottvald",
                        "active": true
                    },
                    "created": "2009-09-08T00:51:17.000+0000",
                    "updated": "2009-09-08T00:51:17.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34304",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gotys",
                        "name": "gotys",
                        "displayName": "Petr Gottvald",
                        "active": true
                    },
                    "body": "Well, I think I solved my problem . It was much easier then I thought. My memory kept leaking with when I had the Query Profiler turned on. I turned it off, now memory stopped leaking. Let me know if this solved your issue as well.\n\nPetr",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gotys",
                        "name": "gotys",
                        "displayName": "Petr Gottvald",
                        "active": true
                    },
                    "created": "2009-09-08T02:05:25.000+0000",
                    "updated": "2009-09-08T02:05:25.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5170\/transitions"
}