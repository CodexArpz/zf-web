{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3162",
    "key": "ZF-3162",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "AjaxContext requires format parameter even when only one format is allowed (This is redundant.)"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField",
            "value": {
                "timeoriginalestimate": 60,
                "timeestimate": 60
            }
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3162\/votes",
                "votes": 3,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=carlton",
                "name": "carlton",
                "displayName": "Carlton Gibson",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-04-22T03:14:03.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-08-31T08:40:35.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "With the Action Helper, AjaxContext you _often_ only provide one alternate context format. The switch to this context is triggered via the detection of the isXmlHttpRequest() member of the request object. However, currently one also has to supply a format parameter with the request. This seems redundant. \r\n\r\nI copy a thread from the MVC list below. This shows that it is fairly trivial to extend AjaxContext to automatically check is there is just one context and if so use it.  \r\n\r\nMy thought though is that it may be nice to work this feature into the base ContextSwitch class. The idea would be that the first context format given would be the default, which would be applied if no format string was given, whereas the later formats would require you to provide the format parameter. \r\n\r\n{quote}\r\nOn 16 Apr 2008, at 21:25, Taylor Barstow wrote:\r\n\r\nOn Apr 11, 2008, at 10:10 AM, Taylor Barstow wrote:\r\n\r\nWhen using the AjaxContext helper, it seems odd to me that I have to add ?format=X to my URIs in order to trigger the context switch, especially if I have only specified one possible format.\r\n\r\nShouldn't the X-Requested-With: XMLHttpRequest header be enough?  Is there any way that I can trigger the context switch without passing the format parameter when there is only one possible format?\r\n\r\nTo follow up on this, I looked further into it and you can actually make this happen yourself:\r\n\r\nclass MyController extends Zend_Controller_Action {\r\n\r\n     public $ajaxable = array('index' => array('html'));\r\n\r\n     public function init() {\r\n          $this->_helper->ajaxContext->initContext('html');\r\n     }\r\n\r\n}\r\n\r\nBIG CAVEAT: You would only want to do this if you only have one context format for the entire controller.\r\n\r\nI hope this helps someone else\r\n\r\nTaylor\r\n\r\n\r\nFollowing on from this suggestion, I think the following should allow us to forgo specifying the format parameter whilst still allowing multiple contexts within a single controller.\r\n\r\n(I wasn't able to find a feature request for this sort of change to AjaxContext. Do people think it is worth filing one?)\r\n\r\nRegards,\r\nCarlton\r\n\r\n<?php\r\n\/**\r\n * Removes need to specify format param when providing unique ajax context.\r\n *\/\r\nclass My_Controller_Action_Helper_UniqueAjaxContext extends Zend_Controller_Action_Helper_AjaxContext\r\n{\r\n    \/**\r\n     * Automatically initialise unique AjaxContext on a per action basis.\r\n     *\/\r\n    public function initContext($format = null)\r\n    {\r\n        $action = $request->getActionName();\r\n        $context = $this->getActionContexts($action)\r\n\r\n        \/\/check in case multiple contexts DO exist\r\n        if(count($context) === 1)\r\n        {\r\n            $format = $context[0];\r\n        }\r\n        return parent::initContext($format);\r\n}\r\n{quote}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/customFieldOption\/10039",
                "value": "  Should Have"
            }
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3162\/watchers",
                "isWatching": false,
                "watchCount": 4
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10174",
                    "id": 10174,
                    "description": "Mini Release",
                    "name": "1.5.1",
                    "userReleaseDate": "25\/Mar\/08",
                    "archived": true,
                    "releaseDate": "2008-03-25",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10011",
                    "id": 10011,
                    "name": "Zend_Controller",
                    "description": "front controller, including router and dispatcher",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/21661",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Scheduling for next minor release",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-05-09T11:17:03.000+0000",
                    "updated": "2008-05-09T11:17:03.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/25703",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Actually, it doesn't make sense to add this to ContextSwitch, as you should still be able to access the action directly, with no context switching. AjaxContext makes more sense, however, as it only kicks into action if isXmlHttpRequest() is true.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-11-05T11:44:25.000+0000",
                    "updated": "2008-11-05T11:44:25.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/25741",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=carlton",
                        "name": "carlton",
                        "displayName": "Carlton Gibson",
                        "active": true
                    },
                    "body": "It was a long time ago that this came up but I think the idea was that it would be nice to accommodate future extensions of ContextSwitch, perhaps RestContext or SoapContext. If these were to kick in via something like a isSoapRequest() method then they could equally use the functionality if it were embedded in ContextSwitch. \n\n(It's possible that this is a YAGNI suspect, at best... :-)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=carlton",
                        "name": "carlton",
                        "displayName": "Carlton Gibson",
                        "active": true
                    },
                    "created": "2008-11-06T00:04:24.000+0000",
                    "updated": "2008-11-06T00:04:24.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/27025",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "Matthew, could you please figure out how we should resolve this one and mark it as such? If you want to leave it for the community, feel free, but give some instruction in a comment on how to implement it.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2008-12-04T15:20:38.000+0000",
                    "updated": "2008-12-04T15:20:38.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35716",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=regilero",
                        "name": "regilero",
                        "displayName": "Regis Leroy",
                        "active": true
                    },
                    "body": "I think this is redondant and not bug-free. I add some bugs with few jQuery plugins where the XmlHttpRequest wasn't set. having the format setted, and this gives an error response no view script found.\r\nI think AjaxRequest plugin should purpose an option:\r\n->disableIsXmlHttpRequestCheck()\r\nActivating this option the format parameter would become the only necessary option\r\nOn the contrary we could imagine\r\n->ignoreFormatParameter()\r\nand activated the first (and only) AjaxContext defined for this action. And maybe throw an Exception if two contexts have been defined.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=regilero",
                        "name": "regilero",
                        "displayName": "Regis Leroy",
                        "active": true
                    },
                    "created": "2009-11-02T04:51:39.000+0000",
                    "updated": "2009-11-02T04:51:39.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3162\/transitions"
}