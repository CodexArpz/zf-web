{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10761",
    "key": "ZF-10761",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Add FirePhp 'Collapsed' option for GROUP_START message type"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10761\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10520",
                    "id": 10520,
                    "description": "Mini Release",
                    "name": "1.11.2",
                    "userReleaseDate": "30\/Dec\/10",
                    "archived": false,
                    "releaseDate": "2010-12-30",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2010-12-17T10:39:02.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cstrosser",
                "name": "cstrosser",
                "displayName": "Chris Strosser",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-11-30T14:50:34.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-12-17T10:39:04.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "The option that allows users to initialize the FirePHP console with items initially collapsed is currently not available. Users who use the FirePHP extensively for debugging, and viewing a variety of data will find it difficult to maneuver through data without closing unnecessary grouped items. The addition of this feature to the Zend Framework, which most likely already exists within the FirePHPCore class (see: http:\/\/www.firephp.org\/HQ\/Use.html), makes the FirePHP interface more usable in the context of ZF.\r\n\r\n(Not sure I have permissions to upload, so here is the patch - inline.)\r\n\r\n{code}\r\nIndex: library\/Zend\/Wildfire\/Plugin\/FirePhp.php\r\n===================================================================\r\n--- library\/Zend\/Wildfire\/Plugin\/FirePhp.php\t(revision 23462)\r\n+++ library\/Zend\/Wildfire\/Plugin\/FirePhp.php\t(working copy)\r\n@@ -322,12 +322,13 @@\r\n     \/**\r\n      * Starts a group in the Firebug Console\r\n      *\r\n-     * @param string $title The title of the group\r\n+     * @param  string  $title    The title of the group\r\n+     * @param  array   $options  OPTIONAL Setting 'Collapsed' to true will initialize group collapsed instead of expanded\r\n      * @return TRUE if the group instruction was added to the response headers or buffered.\r\n      *\/\r\n-    public static function group($title)\r\n+    public static function group($title, $options = array())\r\n     {\r\n-        return self::send(null, $title, self::GROUP_START);\r\n+        return self::send(null, $title, self::GROUP_START, $options);\r\n     }\r\n \r\n     \/**\r\n@@ -487,7 +488,13 @@\r\n             unset($meta['File']);\r\n             unset($meta['Line']);\r\n         }\r\n-\r\n+        \r\n+        if ($meta['Type'] == self::GROUP_START) {\r\n+            if (isset($options['Collapsed']) && $options['Collapsed']) {\r\n+                $meta['Collapsed'] = 'true';\r\n+            }\r\n+        }\r\n+\r\n         if ($meta['Type'] == self::DUMP) {\r\n \r\n           return $firephp->_recordMessage(self::STRUCTURE_URI_DUMP,\r\n\t\r\n{code}\r\n\r\n{code}\r\nIndex: tests\/Zend\/Wildfire\/WildfireTest.php\r\n===================================================================\r\n--- tests\/Zend\/Wildfire\/WildfireTest.php\t(revision 23462)\r\n+++ tests\/Zend\/Wildfire\/WildfireTest.php\t(working copy)\r\n@@ -604,7 +604,28 @@\r\n \r\n         $this->assertTrue($this->_response->verifyHeaders($headers));\r\n     }\r\n+    \r\n+    public function testMessageGroupsWithCollapsedOption()\r\n+    {\r\n+        $this->_setupWithFrontController();\r\n \r\n+        Zend_Wildfire_Plugin_FirePhp::group('Test Group', array('Collapsed' => true));\r\n+        Zend_Wildfire_Plugin_FirePhp::send('Test Message');\r\n+        Zend_Wildfire_Plugin_FirePhp::groupEnd();\r\n+\r\n+        $this->_controller->dispatch();\r\n+\r\n+        $headers = array();\r\n+        $headers['X-Wf-Protocol-1'] = 'http:\/\/meta.wildfirehq.org\/Protocol\/JsonStream\/0.2';\r\n+        $headers['X-Wf-1-Structure-1'] = 'http:\/\/meta.firephp.org\/Wildfire\/Structure\/FirePHP\/FirebugConsole\/0.1';\r\n+        $headers['X-Wf-1-Plugin-1'] = 'http:\/\/meta.firephp.org\/Wildfire\/Plugin\/ZendFramework\/FirePHP\/1.6.2';\r\n+        $headers['X-Wf-1-1-1-1'] = '69|[{\"Type\":\"GROUP_START\",\"Label\":\"Test Group\",\"Collapsed\":\"true\"},null]|';\r\n+        $headers['X-Wf-1-1-1-2'] = '31|[{\"Type\":\"LOG\"},\"Test Message\"]|';\r\n+        $headers['X-Wf-1-1-1-3'] = '27|[{\"Type\":\"GROUP_END\"},null]|';\r\n+\r\n+        $this->assertTrue($this->_response->verifyHeaders($headers));\r\n+    }\r\n+\r\n     public function testMessageComparison()\r\n     {\r\n         $label = 'Message';\r\n{code}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10761\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cadorn",
                "name": "cadorn",
                "displayName": "Christoph Dorn",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10501",
                    "id": 10501,
                    "description": "Mini Release",
                    "name": "1.11.1",
                    "userReleaseDate": "30\/Nov\/10",
                    "archived": false,
                    "releaseDate": "2010-11-30",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10330",
                    "id": 10330,
                    "name": "Zend_Wildfire",
                    "description": "Supports the Wildfire protocol and provide a log writer to add Wildfire debugging messages to response.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43405",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ramon",
                        "name": "ramon",
                        "displayName": "Ramon Henrique Ornelas",
                        "active": true
                    },
                    "body": "This patch break BC should be used func_get_arg(s).",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ramon",
                        "name": "ramon",
                        "displayName": "Ramon Henrique Ornelas",
                        "active": true
                    },
                    "created": "2010-12-01T00:27:06.000+0000",
                    "updated": "2010-12-01T00:27:06.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43409",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cstrosser",
                        "name": "cstrosser",
                        "displayName": "Chris Strosser",
                        "active": true
                    },
                    "body": "In what way does it break BC? We are only adding a parameter to group(), which shouldn't affect anything b\/c the original function only uses one parameter, $title. What are you seeing?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cstrosser",
                        "name": "cstrosser",
                        "displayName": "Chris Strosser",
                        "active": true
                    },
                    "created": "2010-12-01T08:38:55.000+0000",
                    "updated": "2010-12-01T08:38:55.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43421",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cadorn",
                        "name": "cadorn",
                        "displayName": "Christoph Dorn",
                        "active": true
                    },
                    "body": "This patch should be fine. We'll need a unit test as well that verifies the header output with the option set.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cadorn",
                        "name": "cadorn",
                        "displayName": "Christoph Dorn",
                        "active": true
                    },
                    "created": "2010-12-02T12:09:30.000+0000",
                    "updated": "2010-12-02T12:09:30.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43441",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cstrosser",
                        "name": "cstrosser",
                        "displayName": "Chris Strosser",
                        "active": true
                    },
                    "body": "Added patch for WildfireTest.php unit test.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cstrosser",
                        "name": "cstrosser",
                        "displayName": "Chris Strosser",
                        "active": true
                    },
                    "created": "2010-12-03T08:21:15.000+0000",
                    "updated": "2010-12-03T08:21:15.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43442",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cadorn",
                        "name": "cadorn",
                        "displayName": "Christoph Dorn",
                        "active": true
                    },
                    "body": "*looks* good to me. Have not tested. Thanks!\r\n\r\nThese patches can be applied by anyone. I'll try and get to it next week.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cadorn",
                        "name": "cadorn",
                        "displayName": "Christoph Dorn",
                        "active": true
                    },
                    "created": "2010-12-03T08:37:17.000+0000",
                    "updated": "2010-12-03T08:37:17.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43666",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cadorn",
                        "name": "cadorn",
                        "displayName": "Christoph Dorn",
                        "active": true
                    },
                    "body": "Committed:\r\n\r\nhttp:\/\/framework.zend.com\/code\/revision.php?repname=Zend+Framework&path=%2F&rev=23531&peg=23531\r\nhttp:\/\/framework.zend.com\/code\/revision.php?repname=Zend+Framework&path=%2F&rev=23532&peg=23532",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cadorn",
                        "name": "cadorn",
                        "displayName": "Christoph Dorn",
                        "active": true
                    },
                    "created": "2010-12-17T10:38:11.000+0000",
                    "updated": "2010-12-17T10:38:11.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10761\/transitions"
}