{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9215",
    "key": "ZF-9215",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Service_Twitter::userFriends() uses deprecated pagination parameter"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9215\/votes",
                "votes": 4,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=elazar",
                "name": "elazar",
                "displayName": "Matthew Turland",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-02-19T15:16:19.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-06-14T23:38:48.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "The {{userFriends()}} method of the {{Zend_Service_Twitter}} class accepts an array of options as its only parameter. The {{'page'}} parameter is included in the request made to the Twitter API. As of the date of this issue being filed, this parameter is deprecated. According to the documentation for the API method [statuses\/friends|http:\/\/apiwiki.twitter.com\/Twitter-REST-API-Method:-statuses%C2%A0friends], {{'cursor'}} is the current preferred pagination parameter. (Yes, it's inconsistent with the parameter of the same nature in other methods, such as [statuses\/friends_timeline|http:\/\/apiwiki.twitter.com\/Twitter-REST-API-Method:-statuses-friends_timeline].)\r\n\r\nA patch to {{userFriends()}} is required to properly paginate results from this method, which has been attached to this issue. Additionally, the documentation for {{Zend_Service_Twitter}} should be updated to reflect the different usage of the current parameter versus the deprecated one. An example of this is shown below.\r\n\r\n{code:java}\r\n$twitter = new Zend_Service_Twitter('username', 'password');\r\n$cursor = -1; \r\ndo {\r\n    $response = $twitter->user->friends(array('cursor' => $cursor));\r\n    $cursor = (int) $response->next_cursor;\r\n} while (count($response->user) == 100);\r\n{code}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9215\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=padraic",
                "name": "padraic",
                "displayName": "P\u00e1draic Brady",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/12773",
                    "filename": "Twitter.php.diff",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=elazar",
                        "name": "elazar",
                        "displayName": "Matthew Turland",
                        "active": true
                    },
                    "created": "2010-02-19T15:16:56.000+0000",
                    "size": 501,
                    "mimeType": "text\/x-patch",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/12773\/Twitter.php.diff"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10412",
                    "id": 10412,
                    "description": "Mini Release",
                    "name": "1.10.1",
                    "userReleaseDate": "10\/Feb\/10",
                    "archived": false,
                    "releaseDate": "2010-02-10",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10370",
                    "id": 10370,
                    "name": "Zend_Service_Twitter",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38602",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=elazar",
                        "name": "elazar",
                        "displayName": "Matthew Turland",
                        "active": true
                    },
                    "body": "Attached {{Twitter.php.diff}} patch to {{userFriends()}}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=elazar",
                        "name": "elazar",
                        "displayName": "Matthew Turland",
                        "active": true
                    },
                    "created": "2010-02-19T15:16:56.000+0000",
                    "updated": "2010-02-19T15:17:28.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/41099",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tomshaw",
                        "name": "tomshaw",
                        "displayName": "Tom Shaw",
                        "active": true
                    },
                    "body": "I've got both the friends and follower methods to work by removing the integer cast. Twitter is using an eighteen or nineteen digit cursor number.\r\n\r\n    \/**\r\n     * User friends\r\n     *\r\n     * @param  int|string $id Id or username of user for whom to fetch friends\r\n     * @throws Zend_Http_Client_Exception if HTTP request fails or times out\r\n     * @return Zend_Rest_Client_Result\r\n     *\/\r\n    public function userFriends(array $params = array())\r\n    {\r\n        $this->_init();\r\n        $path = '\/statuses\/friends';\r\n        $_params = array();\r\n\r\n        foreach ($params as $key => $value) {\r\n            switch (strtolower($key)) {\r\n                case 'id':\r\n                    $path .= '\/' . $value;\r\n                    break;\r\n                case 'cursor':\r\n                    $_params['cursor'] = $value;\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n        $path .= '.xml';\r\n        $response = $this->_get($path, $_params);\r\n        return new Zend_Rest_Client_Result($response->getBody());\r\n    }\r\n    \r\n    \/**\r\n     * User followers\r\n     *\r\n     * @param  int|string $id Id or username of user for whom to fetch followers\r\n     * @throws Zend_Http_Client_Exception if HTTP request fails or times out\r\n     * @return Zend_Rest_Client_Result\r\n     *\/\r\n    public function userFollowers(array $params = array())\r\n    {\r\n        $this->_init();\r\n        $path = '\/statuses\/followers';\r\n        $_params = array();\r\n\r\n        foreach ($params as $key => $value) {\r\n            switch (strtolower($key)) {\r\n                case 'id':\r\n                    $path .= '\/' . $value;\r\n                    break;\r\n                case 'cursor':\r\n                    $_params['cursor'] = $value;\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n        $path .= '.xml';\r\n        $response = $this->_get($path, $_params);\r\n        return new Zend_Rest_Client_Result($response->getBody());\r\n    }",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tomshaw",
                        "name": "tomshaw",
                        "displayName": "Tom Shaw",
                        "active": true
                    },
                    "created": "2010-06-19T09:42:00.000+0000",
                    "updated": "2010-06-19T09:42:00.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/46571",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thorsten_suckow",
                        "name": "thorsten_suckow",
                        "displayName": "Thorsten Suckow-Homberg",
                        "active": true
                    },
                    "body": "Yap, needs a fix. Noone taking care of the Twitter API anymore?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thorsten_suckow",
                        "name": "thorsten_suckow",
                        "displayName": "Thorsten Suckow-Homberg",
                        "active": true
                    },
                    "created": "2011-05-12T19:33:53.000+0000",
                    "updated": "2011-05-12T19:33:53.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/47196",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jc.meillaud",
                        "name": "jc.meillaud",
                        "displayName": "Jean-Christophe Meillaud",
                        "active": true
                    },
                    "body": "The fix is not that hard to add, what happens ?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jc.meillaud",
                        "name": "jc.meillaud",
                        "displayName": "Jean-Christophe Meillaud",
                        "active": true
                    },
                    "created": "2011-06-14T23:38:48.000+0000",
                    "updated": "2011-06-14T23:38:48.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9215\/transitions"
}