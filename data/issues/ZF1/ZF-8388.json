{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8388",
    "key": "ZF-8388",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Binding problem"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8388\/votes",
                "votes": 2,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10412",
                    "id": 10412,
                    "description": "Mini Release",
                    "name": "1.10.1",
                    "userReleaseDate": "10\/Feb\/10",
                    "archived": false,
                    "releaseDate": "2010-02-10",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2010-02-09T06:07:16.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=primolan",
                "name": "primolan",
                "displayName": "Rodrigo Novelo Primolan",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-11-25T02:03:04.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-02-09T06:07:16.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Hello!\r\n\r\nAgain a problem with {{Zend_Auth_Adapter_Ldap}}. In ZF's version 1.9.5 the problem was retrieving LDAP's object after user authenticated.\r\n\r\nIn ZF's version 1.9.6, {{Zend_Auth_Adapter_Ldap}} has a calling to bind without parameters, and that just don't do the job.\r\n\r\n{{Zend_Auth_Adapter_Ldap}}\r\n{code}\r\n#323 $ldap->bind();\r\n{code}\r\n\r\nWhen commenting this line, {{Zend_Auth_Adapter_Ldap}} works!"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/1",
                "name": "Blocker"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8388\/watchers",
                "isWatching": false,
                "watchCount": 4
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sgehrig",
                "name": "sgehrig",
                "displayName": "Stefan Gehrig",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10390",
                    "id": 10390,
                    "description": "Mini Release",
                    "name": "1.9.6",
                    "userReleaseDate": "24\/Nov\/09",
                    "archived": false,
                    "releaseDate": "2009-11-24",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10280",
                    "id": 10280,
                    "name": "Zend_Auth_Adapter_Ldap",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37129",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=valorin",
                        "name": "valorin",
                        "displayName": "Stephen Rees-Carter",
                        "active": true
                    },
                    "body": "I have the same problem - commenting out that line solved it for me as well.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=valorin",
                        "name": "valorin",
                        "displayName": "Stephen Rees-Carter",
                        "active": true
                    },
                    "created": "2009-12-21T19:40:01.000+0000",
                    "updated": "2009-12-21T19:40:01.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37157",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sgehrig",
                        "name": "sgehrig",
                        "displayName": "Stefan Gehrig",
                        "active": true
                    },
                    "body": "I'll have a look into this. As far as I can remember, there has been a problem that required rebinding with the default user\/password to retrieve user account information or check group membership status.\r\n\r\nCould you please check if the most recent version from the SVN trunk shows the same behaviour?\r\n\r\nAs I workaround could you please try setting a username\/password in the {{Zend_Auth_Ldap}} configuration with which {{Zend_Ldap}} would be able to access the user account object?\r\n\r\nWhich LDAP server are you authenticating against?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sgehrig",
                        "name": "sgehrig",
                        "displayName": "Stefan Gehrig",
                        "active": true
                    },
                    "created": "2009-12-23T02:40:38.000+0000",
                    "updated": "2009-12-23T02:40:38.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37158",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=primolan",
                        "name": "primolan",
                        "displayName": "Rodrigo Novelo Primolan",
                        "active": true
                    },
                    "body": "Yes, there was a problem and it was mentioned by me.\r\n\r\nThe problem was to order the object LDAP after authentication. After verification, the problem remained, being resolved as explained in the description of this error.\r\n\r\nI'm authenticating users on the Microsoft Active Directory.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=primolan",
                        "name": "primolan",
                        "displayName": "Rodrigo Novelo Primolan",
                        "active": true
                    },
                    "created": "2009-12-23T02:49:26.000+0000",
                    "updated": "2009-12-23T02:49:26.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37549",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=valorin",
                        "name": "valorin",
                        "displayName": "Stephen Rees-Carter",
                        "active": true
                    },
                    "body": "I am also trying to authenticate against Microsoft Active Directory, and the latest version in SVN trunk still has the same problem.\r\n\r\nMy configuration is:\r\n\r\nserver.host                   = \"ahq.net.au\"\r\nserver.password               = \"********\"\r\nserver.accountDomainName      = \"ahq.net.au\"\r\nserver.accountCanonicalForm   = 4\r\nserver.baseDn                 = \"DC=ahq,DC=net,DC=au\"\r\n\r\nIs this simply a case of us using the wrong configuration, or is there a bug that needs to be fixed?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=valorin",
                        "name": "valorin",
                        "displayName": "Stephen Rees-Carter",
                        "active": true
                    },
                    "created": "2010-01-10T17:02:55.000+0000",
                    "updated": "2010-01-10T17:02:55.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37555",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=primolan",
                        "name": "primolan",
                        "displayName": "Rodrigo Novelo Primolan",
                        "active": true
                    },
                    "body": "Maybe it's a problem with your configuration.\r\n\r\nThe problem with this component is about retrieving information after authentication (connecting, at least for me, is ok).\r\n\r\nTry the workaround described here.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=primolan",
                        "name": "primolan",
                        "displayName": "Rodrigo Novelo Primolan",
                        "active": true
                    },
                    "created": "2010-01-11T02:24:29.000+0000",
                    "updated": "2010-01-11T02:24:29.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37581",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=valorin",
                        "name": "valorin",
                        "displayName": "Stephen Rees-Carter",
                        "active": true
                    },
                    "body": "Yes, the work-around works fine for me (i.e. commenting out that line)..\r\n\r\nThe error I am getting when I use the latest version is:\r\n\r\nobject(Zend_Auth_Result)#113 (3) {\r\n  [\"_code:protected\"] => int(0)\r\n  [\"_identity:protected\"] => string(6) \"s.rees\"\r\n  [\"_messages:protected\"] => array(6) {\r\n    [0] => string(30) \"An unexpected failure occurred\"\r\n    [1] => string(227) \"0x1 (Operations error; 00000000: LdapErr: DSID-0C090627, comment: In order to perform this operation a successful bind must be completed on the connection., data 0, vece): searching: (&(objectClass=user)(sAMAccountName=s.rees))\"\r\n    [2] => string(109) \"host=ahq.net.au,password=*****,accountDomainName=ahq.net.au,accountCanonicalForm=4,baseDn=DC=ahq,DC=net,DC=au\"\r\n    [3] => string(294) \"\/var\/www\/development\/workspaces\/s.rees\/library\/Zend\/Ldap.php(916): 0x1 (Operations error; 00000000: LdapErr: DSID-0C090627, comment: In order to perform this operation a successful bind must be completed on the connection., data 0, vece): searching: (&(objectClass=user)(sAMAccountName=s.rees))\"\r\n    [4] => string(1681) \"#0 \/var\/www\/development\/workspaces\/s.rees\/library\/Zend\/Ldap.php(631): Zend_Ldap->search('(&(objectClass=...', 'DC=ahq,DC=net,D...', 1, Array)\r\n#1 \/var\/www\/development\/workspaces\/s.rees\/library\/Zend\/Ldap.php(503): Zend_Ldap->_getAccount('s.rees', Array)\r\n#2 \/var\/www\/development\/workspaces\/s.rees\/library\/Zend\/Ldap.php(570): Zend_Ldap->_getAccountDn('s.rees@ahq.net....')\r\n#3 \/var\/www\/development\/workspaces\/s.rees\/library\/Zend\/Auth\/Adapter\/Ldap.php(324): Zend_Ldap->getCanonicalAccountName('s.rees@ahq.net....', 1)\r\n#4 \/var\/www\/development\/workspaces\/s.rees\/library\/Zend\/Auth.php(117): Zend_Auth_Adapter_Ldap->authenticate()\r\n#5 \/var\/www\/development\/workspaces\/s.rees\/domsys08\/webapp\/application\/controllers\/IndexController.php(500): Zend_Auth->authenticate(Object(Zend_Auth_Adapter_Ldap))\r\n#6 \/var\/www\/development\/workspaces\/s.rees\/domsys08\/webapp\/application\/controllers\/IndexController.php(342): IndexController->loginAsStaff('s.rees', '*****')\r\n#7 \/var\/www\/development\/workspaces\/s.rees\/domsys08\/webapp\/application\/controllers\/IndexController.php(279): IndexController->doLogin(Object(Zend_Form))\r\n#8 \/var\/www\/development\/workspaces\/s.rees\/library\/Zend\/Controller\/Action.php(513): IndexController->loginAction()\r\n#9 \/var\/www\/development\/workspaces\/s.rees\/library\/Zend\/Controller\/Dispatcher\/Standard.php(289): Zend_Controller_Action->dispatch('loginAction')\r\n#10 \/var\/www\/development\/workspaces\/s.rees\/library\/Zend\/Controller\/Front.php(946): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http))\r\n#11 \/var\/www\/development\/workspaces\/s.rees\/domsys08\/webapp\/html\/index.php(99): Zend_Controller_Front->dispatch()\r\n#12 {main}\"\r\n    [5] => string(257) \"s.rees authentication failed: 0x1 (Operations error; 00000000: LdapErr: DSID-0C090627, comment: In order to perform this operation a successful bind must be completed on the connection., data 0, vece): searching: (&(objectClass=user)(sAMAccountName=s.rees))\"\r\n  }\r\n}\r\n\r\nI don't really understand LDAP, so I am not sure what is happening...",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=valorin",
                        "name": "valorin",
                        "displayName": "Stephen Rees-Carter",
                        "active": true
                    },
                    "created": "2010-01-11T15:23:55.000+0000",
                    "updated": "2010-01-11T15:23:55.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37599",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=primolan",
                        "name": "primolan",
                        "displayName": "Rodrigo Novelo Primolan",
                        "active": true
                    },
                    "body": "You must bind username and password before every search to perform it.\r\n\r\nTry:\r\n\r\n{code}\r\n$ldap->bind($username, $password);\r\n$ldap->search(...)\r\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=primolan",
                        "name": "primolan",
                        "displayName": "Rodrigo Novelo Primolan",
                        "active": true
                    },
                    "created": "2010-01-12T02:29:47.000+0000",
                    "updated": "2010-01-12T02:29:47.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38372",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sgehrig",
                        "name": "sgehrig",
                        "displayName": "Stefan Gehrig",
                        "active": true
                    },
                    "body": "Should be fixed in trunk (r21008) and in 1.10-release branch (r21009)\r\n\r\nAt least we're not re-authenticating with an empty {{$ldap->bind()}}. This requires the authenticated user to be allowed to retrieve its own LDAP entry (should be no problem), but this also requires the authenticated user to be able to check its own group membership status if the group membership feature is used.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sgehrig",
                        "name": "sgehrig",
                        "displayName": "Stefan Gehrig",
                        "active": true
                    },
                    "created": "2010-02-09T06:07:16.000+0000",
                    "updated": "2010-02-09T06:07:16.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8388\/transitions"
}