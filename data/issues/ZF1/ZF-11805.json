{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11805",
    "key": "ZF-11805",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Navigation_Page error messages don't contain enough information"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11805\/votes",
                "votes": 1,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10510",
                    "id": 10510,
                    "description": "Minor Release",
                    "name": "1.12.0",
                    "userReleaseDate": "27\/Aug\/12",
                    "archived": false,
                    "releaseDate": "2012-08-27",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2012-05-31T23:44:20.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=monk.e.boy",
                "name": "monk.e.boy",
                "displayName": "monk e boy",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2011-10-07T13:42:43.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-05-31T23:44:21.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Using a navigation.ini file, it is really easy to typo or make a mistake.\r\n\r\nIn Zend_Navigation_Page the exception 'Invalid argument: Unable to determine class to instantiate' on line 235 is really hard to fix. It should show the line that caused the error and why (e.g. no parent page, no container named 'blah' or something)\r\n\r\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11805\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [
                "FixForZF1.12",
                "state:patch-ready-for-review",
                "zf-crteam-padraic",
                "zf-crteam-priority",
                "zf-crteam-review"
            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                "name": "frosch",
                "displayName": "Frank Br\u00fcckner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-11372",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11372",
                    "type": {
                        "name": "Related",
                        "direction": "OUTBOUND",
                        "description": "is related to"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/14734",
                    "filename": "Page.php.patch",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2011-11-14T20:44:00.000+0000",
                    "size": 764,
                    "mimeType": "text\/x-diff",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/14734\/Page.php.patch"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/14735",
                    "filename": "PageTest.php.patch",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2011-11-14T20:44:00.000+0000",
                    "size": 1450,
                    "mimeType": "text\/x-diff",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/14735\/PageTest.php.patch"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/14736",
                    "filename": "Zend_Navigation-Containers.xml.patch",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2011-11-14T22:42:49.000+0000",
                    "size": 13046,
                    "mimeType": "text\/x-diff",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/14736\/Zend_Navigation-Containers.xml.patch"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10880",
                    "id": 10880,
                    "description": "Mini Release",
                    "name": "1.11.9",
                    "userReleaseDate": "14\/Jul\/11",
                    "archived": false,
                    "releaseDate": "2011-07-14",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10406",
                    "id": 10406,
                    "name": "Zend_Navigation",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48640",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "body": "{quote}\u2026why (e.g. no parent page, no container named 'blah' or something){quote}\r\nThis has nothing to do with parent page or container.\r\n{code:titel=Possible improvement}\r\nthrow new Zend_Navigation_Exception(\r\n   'Invalid argument: Unable to determine class to instantiate '\r\n   . '(URI page takes a option uri; MVC pages are defined using '\r\n   . 'MVC parameters like action, controller, module, route or params)'\r\n);\r\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2011-10-07T14:23:54.000+0000",
                    "updated": "2011-10-07T14:23:54.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48641",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "body": "Another idea:\r\n{code}\r\nrequire_once 'Zend\/Navigation\/Exception.php';\r\n\r\n$message = 'Invalid argument: Unable to determine class to instantiate';\r\nif (isset($options['label'])) {\r\n    $message .= ' (Label: ' . $options['label'] . ')';\r\n}            \r\n\r\nthrow new Zend_Navigation_Exception($message);\r\n{code}\r\n{code:title=Output|borderStyle=solid}\r\nFatal error:\r\nUncaught exception 'Zend_Navigation_Exception' with message 'Invalid argument: Unable to determine class to instantiate (Label: Home)' in \u2026\r\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2011-10-07T14:38:36.000+0000",
                    "updated": "2011-10-07T14:38:36.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48659",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=monk.e.boy",
                        "name": "monk.e.boy",
                        "displayName": "monk e boy",
                        "active": true
                    },
                    "body": "I find moving or renaming pages and missing one of the children (my navigation.ini file is 800+ lines long) is the most common error, e.g:\r\n\r\n  sales.pages.discounts.pages.category.pages.cms.pages.intro.label = Edit\r\n\r\nthen somewhere 'discounts' gets renamed to 'offers' then the above line throws:\r\n\r\n  Invalid argument: Unable to determine class to instantiate\r\n\r\nbecause 'discounts' no longer exists... your solution would show the word 'Edit' which would be useful. Could we show the .ini file line number? Or anything more to help hunt down the offending change?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=monk.e.boy",
                        "name": "monk.e.boy",
                        "displayName": "monk e boy",
                        "active": true
                    },
                    "created": "2011-10-10T14:36:52.000+0000",
                    "updated": "2011-10-10T14:36:52.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48660",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=monk.e.boy",
                        "name": "monk.e.boy",
                        "displayName": "monk e boy",
                        "active": true
                    },
                    "body": "OK I just re-read my comment and it makes no sense - lol, say I have this:\r\n\r\nsales.pages.discounts.label = Offers\r\nsales.pages.discounts.module = admin\r\nsales.pages.discounts.controller = offer\r\nsales.pages.discounts.action = index\r\n\r\n... 100s of lines of ini file ...\r\n\r\nsales.pages.discounts.pages.category.pages.cms.pages.intro.label = Edit\r\nsales.pages.discounts.pages.category.pages.cms.pages.intro.module = admin\r\nsales.pages.discounts.pages.category.pages.cms.pages.intro.controller = cms\r\nsales.pages.discounts.pages.category.pages.cms.pages.intro.action = editor\r\n\r\nThen someone renames:\r\n\r\nsales.pages.offers.label = Offers\r\nsales.pages.offers.module = admin\r\nsales.pages.offers.controller = offer\r\nsales.pages.offers.action = index\r\n\r\n... then the following lines now throw errors:\r\n\r\nsales.pages.discounts.pages.category.pages.cms.pages.intro.label = Edit\r\nsales.pages.discounts.pages.category.pages.cms.pages.intro.module = admin\r\nsales.pages.discounts.pages.category.pages.cms.pages.intro.controller = cms\r\nsales.pages.discounts.pages.category.pages.cms.pages.intro.action = editor\r\n\r\nThe app is run and we get that cryptic error message:\r\n\r\n'Invalid argument: Unable to determine class to instantiate'\r\n\r\nand the first place we start looking is in the lines of code we changed (which are correct and have no errors)\r\n\r\nI assume that yaml navigation files don't have this problem?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=monk.e.boy",
                        "name": "monk.e.boy",
                        "displayName": "monk e boy",
                        "active": true
                    },
                    "created": "2011-10-10T14:43:16.000+0000",
                    "updated": "2011-10-10T14:43:16.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48662",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "body": "Hi monk e boy,\r\nthanks for your feedback, but unfortunately there is no way to get the line number from the config file.\r\nAll Zend_Config objects are converted to arrays and so there is no relation to the config file.\r\n\r\n{code:title=Zend_Navigation_Container::addPages()}\r\npublic function addPages($pages)\r\n{\r\n    if ($pages instanceof Zend_Config) {\r\n        $pages = $pages->toArray();\r\n    }\r\n\r\n    \/\/ \u2026\r\n\r\n    foreach ($pages as $page) {\r\n        $this->addPage($page);\r\n    }\r\n\r\n    \/\/ \u2026\r\n}\r\n{code}\r\n\r\n{code:title=Zend_Navigation_Page::addPage()}\r\npublic static function factory($options)\r\n{\r\n    if ($options instanceof Zend_Config) {\r\n        $options = $options->toArray();\r\n    }\r\n\r\n    \/\/ \u2026\r\n\r\n    $hasUri = isset($options['uri']);\r\n    $hasMvc = isset($options['action']) || isset($options['controller']) ||\r\n              isset($options['module']) || isset($options['route']);\r\n\r\n    if ($hasMvc) {\r\n        require_once 'Zend\/Navigation\/Page\/Mvc.php';\r\n        return new Zend_Navigation_Page_Mvc($options);\r\n    } elseif ($hasUri) {\r\n        require_once 'Zend\/Navigation\/Page\/Uri.php';\r\n        return new Zend_Navigation_Page_Uri($options);\r\n    } else {\r\n        require_once 'Zend\/Navigation\/Exception.php';\r\n        \r\n        $message = 'Invalid argument: Unable to determine class to instantiate';\r\n        if (isset($options['label'])) {\r\n            $message .= ' (Label: ' . $options['label'] . ')';\r\n        }            \r\n        \r\n        throw new Zend_Navigation_Exception($message);\r\n    }\r\n}\r\n{code}\r\n\r\n{quote}I assume that yaml navigation files don't have this problem?{quote}\r\nThis is only the syntax, because nothing needs to be written multiple times.\r\n\r\nExample:\r\n{code:title=INI-File}\r\nsales.pages.discounts.pages.category.pages.cms.pages.intro.label = Edit\r\nsales.pages.discounts.pages.category.pages.cms.pages.intro.module = admin\r\nsales.pages.discounts.pages.category.pages.cms.pages.intro.controller = cms\r\nsales.pages.discounts.pages.category.pages.cms.pages.intro.action = editor\r\n{code}\r\n{code:title=YAML-File}\r\nsales:\r\n    pages:\r\n        discounts:\r\n            pages:\r\n                category:\r\n                    pages:\r\n                        cms:\r\n                            pages:\r\n                                intro:\r\n                                    label: Edit\r\n                                    module: admin\r\n                                    controller: cms\r\n                                    action: editor\r\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2011-10-10T15:15:00.000+0000",
                    "updated": "2011-10-10T15:15:00.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48668",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=monk.e.boy",
                        "name": "monk.e.boy",
                        "displayName": "monk e boy",
                        "active": true
                    },
                    "body": "Would be brilliant if your last comment was in the documentation :) the yaml file looks a lot nicer for our front end devs to use.\r\n\r\nThanks for all your help :)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=monk.e.boy",
                        "name": "monk.e.boy",
                        "displayName": "monk e boy",
                        "active": true
                    },
                    "created": "2011-10-11T10:55:12.000+0000",
                    "updated": "2011-10-11T10:55:12.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48669",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "body": "Tasks for this issue:\r\n\r\n* Extend the exception message ({{Zend_Navigation_Page::factory()}})\r\n* Add examples for INI, JSON and YAML to docs\r\n* Update xml example in the docs (syntax highlighting)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2011-10-11T15:04:18.000+0000",
                    "updated": "2011-11-14T22:41:36.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/49092",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "body": "Fix and unit test added.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2011-11-14T20:44:00.000+0000",
                    "updated": "2011-11-14T20:44:00.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/49093",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "body": "Patch for docs.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2011-11-14T22:42:49.000+0000",
                    "updated": "2011-11-14T22:42:49.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/50923",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "body": "Fixed in trunk (1.12.0): r24854",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "created": "2012-05-31T23:44:20.000+0000",
                    "updated": "2012-05-31T23:44:20.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11805\/transitions"
}