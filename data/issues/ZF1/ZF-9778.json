{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9778",
    "key": "ZF-9778",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Imposible create full rest modules using Zend_Config"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9778\/votes",
                "votes": 3,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gtux",
                "name": "gtux",
                "displayName": "Grover Campos Ancajima",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-04-30T14:08:21.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-03-22T23:18:29.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "At the Zend_Controller documentation, in Zend_Rest_Route usage section says literaly:\r\n\r\nTo enable Zend_Rest_Route for specific modules, construct it with an array of module names as the 3rd constructor argument: \r\n\r\n{code:title=Zend_Rest_Route|borderStyle=solid}\r\n$front     = Zend_Controller_Front::getInstance();\r\n$restRoute = new Zend_Rest_Route($front, array(), array('product'));\r\n$front->getRouter()->addRoute('rest', $restRoute);\r\n{code}\r\n\r\nIt then specifies that you can create a route using Zend_Config and the controllers of some module can be configured by specifying as follow:\r\n\r\n{code:title=Zend_Rest_Route2|borderStyle=solid}\r\nroutes.rest.type = Zend_Rest_Route\r\nroutes.rest.defaults.controller = object\r\nroutes.rest.mod = project,user\r\n{code}\r\n\r\nWhen I tried to configure a RESTful module using Zend_Config, I figured that could be used as follows:\r\n\r\n{code:title=Zend_Config for Zend_Rest_Route|borderStyle=solid}\r\nroutes.rest.mod2 =\r\n\/\/ or \r\nroutes.rest.mod3[] =\r\n{code}\r\n\r\nBut this fails, the error is in the getInstance method of Zend_Rest_Route:\r\n\r\n{code:title=Zend_Rest_Route::getInstance|borderStyle=solid}\r\nforeach ($config as $key => $values) {\r\n  if ($key == 'type') {\r\n    \/\/ do nothing\r\n  } elseif ($key == 'defaults') {\r\n    $defaultsArray = $values->toArray();\r\n  } else {\r\n    $restfulConfigArray[$key] = explode(',', $values);\r\n  }\r\n}\r\n{code}\r\n\r\nIn the else part of code should have a validation, since the value of the variable $value is an array or an empty string, and in these cases this fails. To be consistent in building RESTful modules using Zend_Config, the code should be:\r\n\r\n{code:title=Zend_Rest_Route::getInstance|borderStyle=solid}\r\nforeach ($config as $key => $values) {\r\n  if ($key == 'type') {\r\n    \/\/ do nothing\r\n  } elseif ($key == 'defaults') {\r\n    $defaultsArray = $values->toArray();\r\n  } else {\r\n    if (!empty($values)) {\r\n      $restfulConfigArray[$key] = explode(',', $values);\r\n    } else {\r\n      $restfulConfigArray[] = $key;\r\n    }\r\n  }\r\n}\r\n{code}\r\n\r\nSorry for my bad english."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9778\/watchers",
                "isWatching": false,
                "watchCount": 4
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/4",
                "name": "Reopened"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lcrouch",
                "name": "lcrouch",
                "displayName": "Luke Crouch",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-10971",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10971",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10430",
                    "id": 10430,
                    "description": "Mini Release",
                    "name": "1.10.2",
                    "userReleaseDate": "24\/Feb\/10",
                    "archived": false,
                    "releaseDate": "2010-02-24",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10440",
                    "id": 10440,
                    "description": "Mini Release",
                    "name": "1.10.3",
                    "userReleaseDate": "01\/Apr\/10",
                    "archived": false,
                    "releaseDate": "2010-04-01",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10451",
                    "id": 10451,
                    "description": "Mini Release",
                    "name": "1.10.4",
                    "userReleaseDate": "28\/Apr\/10",
                    "archived": false,
                    "releaseDate": "2010-04-28",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10422",
                    "id": 10422,
                    "name": "Zend_Rest_Route",
                    "description": "Includes both Zend_Rest_Route and Zend_Rest_Controller",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40329",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "body": "Are you instantiating this through zend_app?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "created": "2010-04-30T14:13:45.000+0000",
                    "updated": "2010-04-30T14:13:45.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40330",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gtux",
                        "name": "gtux",
                        "displayName": "Grover Campos Ancajima",
                        "active": true
                    },
                    "body": "Well, yes, is a normal plain zend project from zf tool.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gtux",
                        "name": "gtux",
                        "displayName": "Grover Campos Ancajima",
                        "active": true
                    },
                    "created": "2010-04-30T14:26:55.000+0000",
                    "updated": "2010-04-30T14:26:55.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40331",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "body": "Please beware that Zend_Rest is explicitely not supported with zend_app. Therefore closing as wont-fix.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "created": "2010-04-30T16:21:58.000+0000",
                    "updated": "2010-04-30T16:21:58.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40356",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gtux",
                        "name": "gtux",
                        "displayName": "Grover Campos Ancajima",
                        "active": true
                    },
                    "body": "Not really understand the answer given, leaves me the feeling that you had no interest in studying (or even reading) what I'm exposing.\r\n\r\n* First, Please tell me explicitly: where does it say in the Zend_Rest_Route's documentation that can not be used with Zend_Application?.\r\n\r\n* Secondly, I would understand why in the documentation specifies how to use the Zend_Rest_Route using Zend_Config or instancing an object. Please see [http:\/\/framework.zend.com\/manual\/en\/zend.controller.router.html#zend.rest.route_usage] and [http:\/\/framework.zend.com\/manual\/en\/zend.controller.router.html#zend.rest.route_config]? All that in order to use it with Zend_Application, if I'm not wrong. \r\n\r\n* Thirdly, if Zend_Rest_Route can not be used by Zend_Application, then why is within Zend_Controller's documentation: [http:\/\/framework.zend.com\/manual\/en\/zend.controller.router.html#zend.controller.router.routes.rest]?\r\n\r\n* And last question if Zend_Rest_Route can not be used by Zend_Application, what else can be used Zend_Rest_Route?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gtux",
                        "name": "gtux",
                        "displayName": "Grover Campos Ancajima",
                        "active": true
                    },
                    "created": "2010-05-03T12:46:01.000+0000",
                    "updated": "2010-05-03T12:46:01.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40357",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "body": "I'm sorry I wasn't clear on this before.\r\n\r\nThe zend_rest component wasn't designed to be used with zend_application (that may be because it was developed before zend_app was, not sure about that).  Also, its design differs quite a lot from the other type of routes there are. Though there are plans to make it work more in line with the other routes, that isn't possible for the moment because it would break backwards compatibility.\r\n\r\nYou can configure Zend_Rest_Route through Zend_Application. You would however have to either write your own init method, or write a custom resource plugin. \r\n\r\nTo answer your questions in short:\r\n\r\n* It may not have been described, nor has it been described that it can be used with zend_app.\r\n* The assumption is wrong. You dont have to use zend_app_resource_route in order to set up zend_rest with zend_config.\r\n* Zend_Controller is a different component than Zend_App. Zend_App complements Zend_Controller , not the other way around.\r\n* It's just PHP, you can use lots of code with zend_rest_route, including your own. Just not zend_app_resource_route...\r\n\r\nIf there are any questions left, feel free to ask them.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "created": "2010-05-03T13:06:23.000+0000",
                    "updated": "2010-05-03T13:06:23.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40361",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gtux",
                        "name": "gtux",
                        "displayName": "Grover Campos Ancajima",
                        "active": true
                    },
                    "body": "I would like to expose the bug from a different point of view, because apparently I was not clear before.\r\n\r\nIn documentation about Zend_Controller, in Zend_Rest_Route section specifies how to use Zend_Rest_Route. It teaches how to get an instantiate of Zend_Rest_Route and add it to Zend_Controller_Front, and it also indicates how that can be added to an application using Zend_Config so it can be instantiated automatically from the bootstrap.\r\n\r\nSo far everything works right, unless, in the form which Zend_Rest_Route is programmed, it not cover the ability to specify that a complete module can be RESTful using Zend_Config.\r\n\r\nObviously this can be achieved from other forms, such as writing an init method in the Bootstrap itself (either the application's Bootstrap or specific module's Bootstrap), or through a custom plugin to give some examples.\r\n\r\nWhat I propose is that it may be possible to use Zend_Config to specify, in a simple way, that a complete module be RESTful style only changing a few lines in Zend_Rest_Route component, and take advantage of the simplicity of using a configuration file for the entire application using the tools that currently exist in Zend Framework and not give the job to the developers having to re-engineering to achieve this.\r\n\r\nThe code that I'm talking about is in getInstance method of Zend_Rest_Route:\r\n\r\n{code}\r\nforeach ($config as $key => $values) {\r\n  if ($key == 'type') {\r\n    \/\/ do nothing\r\n  } elseif ($key == 'defaults') {\r\n    $defaultsArray = $values->toArray();\r\n  } else {\r\n    if (!empty($values)) {\r\n      $restfulConfigArray[$key] = explode(',', $values);\r\n    } else {\r\n      $restfulConfigArray[] = $key;\r\n    }\r\n  }\r\n}\r\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gtux",
                        "name": "gtux",
                        "displayName": "Grover Campos Ancajima",
                        "active": true
                    },
                    "created": "2010-05-03T13:43:16.000+0000",
                    "updated": "2010-05-03T13:43:16.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40363",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "body": "In that case I'm reopening it, but only if it can be fixed without touching code in zend_app.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "created": "2010-05-03T13:49:28.000+0000",
                    "updated": "2010-05-03T13:49:28.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40365",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=groovecoder",
                        "name": "groovecoder",
                        "displayName": "Luke Crouch",
                        "active": true
                    },
                    "body": "It may be possible. I'm looking to do a slew of fixes and improvements before ZF 2.0 soon so I'll look at this at the same time.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=groovecoder",
                        "name": "groovecoder",
                        "displayName": "Luke Crouch",
                        "active": true
                    },
                    "created": "2010-05-03T14:54:40.000+0000",
                    "updated": "2010-05-03T14:54:40.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40816",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=petermoolenaar",
                        "name": "petermoolenaar",
                        "displayName": "Peter Moolenaar",
                        "active": true
                    },
                    "body": "Is there any thought on this making the 1.10 branch? Or should I use other means than Zend_Config to get this to work in the next couple of months.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=petermoolenaar",
                        "name": "petermoolenaar",
                        "displayName": "Peter Moolenaar",
                        "active": true
                    },
                    "created": "2010-06-01T03:51:31.000+0000",
                    "updated": "2010-06-01T03:51:31.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40831",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lcrouch",
                        "name": "lcrouch",
                        "displayName": "Luke Crouch",
                        "active": true
                    },
                    "body": "I'm planning a Zend_Rest workday in the next week or two. I've been cautious about it since we don't know how much of Zend_Rest will translate into 2.0. But I should be able to fix it soon.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lcrouch",
                        "name": "lcrouch",
                        "displayName": "Luke Crouch",
                        "active": true
                    },
                    "created": "2010-06-02T06:18:18.000+0000",
                    "updated": "2010-06-02T06:18:18.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/45575",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rafeca",
                        "name": "rafeca",
                        "displayName": "Rafael Oleza Alomar",
                        "active": true
                    },
                    "body": "This bug is still happening on 1.11.4: From Zend_Config it's not possible to enable Zend_Rest_Route for a specific module.\r\n\r\nThe solution proposed by Grover Campos Ancajima is clean, easy to implement and it has no drawback. Is there any chance to have it implemented for the next version of ZF 1.11?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rafeca",
                        "name": "rafeca",
                        "displayName": "Rafael Oleza Alomar",
                        "active": true
                    },
                    "created": "2011-03-22T23:18:29.000+0000",
                    "updated": "2011-03-22T23:18:29.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9778\/transitions"
}