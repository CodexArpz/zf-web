{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2563",
    "key": "ZF-2563",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Allow array notation in form element names"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField",
            "value": {
                "timeoriginalestimate": 60,
                "timeestimate": 60
            }
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2563\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10172",
                    "id": 10172,
                    "description": "Minor Release",
                    "name": "1.5.0",
                    "userReleaseDate": "17\/Mar\/08",
                    "archived": true,
                    "releaseDate": "2008-03-17",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2008-02-06T08:49:17.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-02-04T12:01:08.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-11-09T01:40:54.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "A common pattern used by those developing forms is to assign elements as array keys:\n\n{code}\n<input name=\"data[username]\" value=\"\" \/>\n{code}\n\nThis is done to group related data, as well as on forms that may have repeated\nsets of form data (e.g., a 'todo' application, that might create a new set of\ndata for each todo item).\n\nCurrently, this is not supported in Zend_Form, and the support within Zend_View_Helper_FormElement is slightly buggy.\n\nIn Zend_View_Helper_FormElement *can* create names with array notation without a problem. However, since the name is used as the id when no id is present, this causes invalid ids. Additionally, it does not currently look to see if the provided value is an array, nor if the element's name exists in the array, leading to errors and buggy output.\n\nWithin Zend_Form, we cannot allow names with array notation due to the fact that we overload; array notation will cause interpreter issues with PHP. \n\nThe solution to this is to use sub forms. My proposal is to add a 'belongsTo'\nproperty to Zend_Form_Element. SubForms, when rendering, would then set the\n'belongsTo' property of each element. Decorators that need to be array-aware\nwould then build the name using the value of this property:\n\n{code}\n$name = $element->getBelongsTo() . '['\n      . $element->getName()\n      . ']';\n{code}\n\nAdditionally, it could set the id, if not previously set, by concatenating the\nbelongsTo property and the name with a dot separator:\n\n{code}\n$id = $element->getBelongsTo() . '.'\n    . $element->getName();\n{code}\n\nFinally, the value would be passed by the decorator based on the element value,\nthus bypassing the issues in Zend_View_Helper_FormElement.\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/customFieldOption\/10039",
                "value": "  Should Have"
            }
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2563\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10029",
                    "id": 10029,
                    "name": "Zend_Form",
                    "isAssigneeTypeValid": false
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10026",
                    "id": 10026,
                    "name": "Zend_View",
                    "description": "View portion of the ZF MVC",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/18830",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "This is now checked into the repo in r7793.\n\nUsage is as follows:\n\n{code}\n$foo = new Zend_Form_SubForm();\n$foo->setElementsBelongTo('foo')\n    ->setElements(array(\n        'bar' => 'text',\n        'baz' => 'text'\n    ));\necho $foo;\n{code}\n\nwhich results in HTML something like:\n\n{code}\n<input type=\"text\" name=\"foo[bar]\" id=\"foo.bar\" value=\"\" \/>\n<input type=\"text\" name=\"foo[baz]\" id=\"foo.baz\" value=\"\" \/>\n{code}\n\nWhen data is submitted from such a form, the 'foo' key will be passed to the subform, which will use that array in its own isValid() call -- effectively namespacing the elements.\n\nPlease give this a try and comment on any issues.\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-02-04T16:11:04.000+0000",
                    "updated": "2008-02-04T16:11:04.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/18886",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "I've verified that all works as expected; labels are created with the appropriate ids, validation works as expected, and getValues() retrieves values as expected. As an example, I've created [a sample controller and login form|http:\/\/paste2.org\/p\/13127] showing potential usage.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-02-06T08:49:17.000+0000",
                    "updated": "2008-02-06T08:49:17.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35858",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=umpirsky",
                        "name": "umpirsky",
                        "displayName": "Sasa Stamenkovic",
                        "active": true
                    },
                    "body": "With\r\n\r\narray(\r\n\t\t    'ViewHelper',\r\n\t\t\tarray(array('td' => 'HtmlTag'), array('tag' => 'td', 'style' => 'width: 360px;')),\r\n\t\t\tarray('Label', array('tag' => 'td', 'requiredSuffix' => ' *')),\r\n\t\t\tarray(array('tr' => 'HtmlTag'), array('tag' => 'tr')),\r\n\t\t\tarray(array('tbody' => 'HtmlTag'), array('tag' => 'tbody')),\r\n\t\t    array(array('table' => 'HtmlTag'), array('tag' => 'table', 'class' => 'tiny')),\r\n\t\t    array(array('separator' => 'HtmlTag'), array('tag' => 'div', 'class' => 'separator'))\r\n\t\t)\r\n\r\nelement decorators, I get duplicated label (td) ids. I have 3 subforms under main form rendered on the page.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=umpirsky",
                        "name": "umpirsky",
                        "displayName": "Sasa Stamenkovic",
                        "active": true
                    },
                    "created": "2009-11-09T01:40:52.000+0000",
                    "updated": "2009-11-09T01:40:52.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2563\/transitions"
}