{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7911",
    "key": "ZF-7911",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Db_Statement::_stripQuoted seems not to be complete"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7911\/votes",
                "votes": 3,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10510",
                    "id": 10510,
                    "description": "Minor Release",
                    "name": "1.12.0",
                    "userReleaseDate": "27\/Aug\/12",
                    "archived": false,
                    "releaseDate": "2012-08-27",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2012-05-09T21:26:32.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vdelau",
                "name": "vdelau",
                "displayName": "Vincent de Lau",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-09-21T08:50:27.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-05-12T03:24:15.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "While investigating http:\/\/framework.zend.com\/issues\/browse\/ZF-5063, I noted that there were some inconsistencies in Zend_Db_Statement::_stripQuoted. I'll repeat what I've mailed to the list:\r\n\r\nLast week we ran in an issue with a segfault caused by the preg_replace\r\nstatements in Zend_Db_Statements::_stripQuoted (issues ZF-5063[1] and\r\nZF-7585[2]). While trying to find a work-around, I discovered that this\r\nfunction is broken. The fix for issue ZF-3025[3] seems to be applied wrong\r\n(r9727).\r\n\r\nThe fix for my issue could be to modify the regular expression. Instead of\r\nthe repetition, my replacement relies on assertions. During initial testing\r\n(running a 1MB query) it seems that this would not rely on the stack too\r\nmuch, reducing the chance of a segfault. This would need to be tested\r\nfurther. In the patch below, I restored the original replacement of quoted\r\nidentifiers that was lost in r9727.\r\n\r\nHowever, there are still some issues:\r\n- In my regexp, I assume that a quote can be escaped by repeating the quote\r\nor by prefixing it with a backslash. A backslash itself can be escaped by\r\nrepeating it. I'm not sure if these are safe assumptions for all RDBMS's.\r\n- The patch should be tested thoroughly, although I'm quite confident about\r\nit.\r\n- MySQL accepts both single and double quotes for values. This is not\r\naccounted for, nor was it in the old version. I'm not sure how this is for\r\nother RDBMS's. Would it be safe to strip out all quote style: single ('),\r\ndouble (\") and backtick (`)? I could imagine that for most systems this\r\nwould be OK. Individual adapters could always override the default function\r\nand provide their own. "
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7911\/watchers",
                "isWatching": false,
                "watchCount": 8
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [
                "FixForZF1.12",
                "state:need-feedback",
                "zf-caretaker-adamlundrigan",
                "zf-crteam-review"
            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                "name": "ralph",
                "displayName": "Ralph Schindler",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-3025",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3025",
                    "type": {
                        "name": "Related",
                        "direction": "OUTBOUND",
                        "description": "is related to"
                    }
                },
                {
                    "issueKey": "ZF-5063",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5063",
                    "type": {
                        "name": "Related",
                        "direction": "OUTBOUND",
                        "description": "is related to"
                    }
                },
                {
                    "issueKey": "ZF-10209",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10209",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                },
                {
                    "issueKey": "ZF-7585",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7585",
                    "type": {
                        "name": "Related",
                        "direction": "INBOUND",
                        "description": "is related to"
                    }
                },
                {
                    "issueKey": "ZF-8399",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8399",
                    "type": {
                        "name": "Related",
                        "direction": "INBOUND",
                        "description": "is related to"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/13462",
                    "filename": "ZF-7911-improved.patch",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2010-11-17T09:07:41.000+0000",
                    "size": 1651,
                    "mimeType": "text\/x-patch",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/13462\/ZF-7911-improved.patch"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/15021",
                    "filename": "ZF-7911.patch",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mcleod@spaceweb.nl",
                        "name": "mcleod@spaceweb.nl",
                        "displayName": "Bart McLeod",
                        "active": true
                    },
                    "created": "2012-04-14T22:25:07.000+0000",
                    "size": 6482,
                    "mimeType": "text\/plain",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/15021\/ZF-7911.patch"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/12242",
                    "filename": "ZF-7911.patch",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vdelau",
                        "name": "vdelau",
                        "displayName": "Vincent de Lau",
                        "active": true
                    },
                    "created": "2009-09-21T08:51:29.000+0000",
                    "size": 1654,
                    "mimeType": "text\/plain",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/12242\/ZF-7911.patch"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/14692",
                    "filename": "ZF-7911_aal.patch",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "created": "2011-10-17T00:50:53.000+0000",
                    "size": 4236,
                    "mimeType": "text\/x-patch",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/14692\/ZF-7911_aal.patch"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10361",
                    "id": 10361,
                    "description": "Mini Release",
                    "name": "1.9.2",
                    "userReleaseDate": "25\/Aug\/09",
                    "archived": false,
                    "releaseDate": "2009-08-25",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10012",
                    "id": 10012,
                    "name": "Zend_Db",
                    "description": "interfaces, APIs, and adapters for various third-party data stores",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34771",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vdelau",
                        "name": "vdelau",
                        "displayName": "Vincent de Lau",
                        "active": true
                    },
                    "body": "Initial patch, doesn't cover all problems mentioned in the issue.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vdelau",
                        "name": "vdelau",
                        "displayName": "Vincent de Lau",
                        "active": true
                    },
                    "created": "2009-09-21T08:51:29.000+0000",
                    "updated": "2009-09-21T08:51:29.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34772",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vdelau",
                        "name": "vdelau",
                        "displayName": "Vincent de Lau",
                        "active": true
                    },
                    "body": "Both issues are related to this function. Fixing this issue should also fix these.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vdelau",
                        "name": "vdelau",
                        "displayName": "Vincent de Lau",
                        "active": true
                    },
                    "created": "2009-09-21T08:59:17.000+0000",
                    "updated": "2009-09-21T08:59:17.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34809",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "Lets work together on this.  I need to see some unit tests to understand what use cases are triggering the bad behavior.\n\nThe other issue described I feel like might be a PHP problem itself.  Lets discuss in #zftalk.dev when you're available.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2009-09-22T09:47:15.000+0000",
                    "updated": "2009-09-22T09:47:15.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34993",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vdelau",
                        "name": "vdelau",
                        "displayName": "Vincent de Lau",
                        "active": true
                    },
                    "body": "First a specification: The function should strip all locations where prepared statement parameters (? and :name) should be ignored. The obvious places where this could occur are within strings and identifiers. Identifiers with strange characters are usually also quoted. The quotes used can vary per SQL dialect. Common quotes include 'single' and \"double\" quotes and `backticks`. To include the quote character in a string, they usally can be escaped. This can be done by repeating the quote or by prefixing it with an escape character. This escape character is usually a backslash (\\).\n\nh4. Some research:\nfor MySQL:\n- identifiers can be escaped with backticks, escape can only be done by doubling the backtick. A backslash is not treated as a specials character.\n- strings should be escaped with single or double quotes, escaping can be done by doubling and escaping with a backslash\n\ncommon other dialects (SQL-92?):\n- identifiers can be escaped with double quotes, escaping is done by doubling\n- strings should be escaped with single quotes, escaping is done by doubling\n\nh4. Assumptions\nI think it would be save to generalize in saying that string enclosed in either single quotes, double quotes and backticks are to be stripped. A doubled quote character, or a character prefixed with a backslash should not be considered the ending quote. What happens if a dialect doesn't support a quoting style?\n\n- If doubling is not a valid escape, the whole sequence would be invalid, but stripped not the less: ['a''b']\n- If a backslash is not a valid escape, it will just be stripped. Again, it may fail for incorrect queries: ['a\\'b']\n- If a specific quoting style is not supported, it should not appear in the query.\n\nh4. Test case\nI've taken a quick look at the unit tests, but unfortunately can not spend enough time to create them. I'll provide some information and test cases so that someone else can maybe create unit tests for them.\n\nThis test set is as it would work for MySQL. Other RDBMS might have other conventions. To avoid confusion, I'm enclosing the strings in [] brackets.\n{noformat}\nin: [SELECT * FROM table]\nout: [SELECT * FROM table]\n\nin: [SELECT * FROM `table`]\nout: [SELECT * FROM ]\n\nin: [SELECT * FROM `strange:table`]\nout: [SELECT * FROM ]\n\nin: [SELECT * FROM `strange`table`]\nout: [SELECT * FROM table`] (bad query)\n\nin: [SELECT * FROM `strange``table`]\nout: [SELECT * FROM ]\n\nin: [SELECT * FROM `strange```table`]\nout: [SELECT * FROM table`] (bad query)\n\nin: [SELECT * FROM `strange\\`table`]\nout: [SELECT * FROM ]\n\nin: [SELECT * FROM `strange\\``table`]\nout: [SELECT * FROM table`] (bad query)\n\nin: [SELECT * FROM `strange\\```table`]\nout: [SELECT * FROM ]\n\nin: [SELECT 'value' AS identifier]\nout: [SELECT  AS identifier]\n\nin: [SELECT 'strange:value' AS identifier]\nout: [SELECT  AS identifier]\n\nin: [SELECT 'strange'value' AS identifier]\nout: [SELECT value' AS identifier] (bad query)\n\nin: [SELECT 'strange''value' AS identifier]\nout: [SELECT  AS identifier]\n\nin: [SELECT 'strange'''value' AS identifier]\nout: [SELECT value' AS identifier] (bad query)\n\nin: [SELECT 'strange\\'value' AS identifier]\nout: [SELECT  AS identifier]\n\nin: [SELECT 'strange\\''value' AS identifier]\nout: [SELECT value' AS identifier] (bad query)\n\nin: [SELECT 'strange'''value' AS identifier]\nout: [SELECT  AS identifier]\n\nin: [SELECT \"value\" AS identifier]\nout: [SELECT  AS identifier]\n\nin: [SELECT \"strange:value\" AS identifier]\nout: [SELECT  AS identifier]\n\nin: [SELECT \"strange\"value\" AS identifier]\nout: [SELECT value\" AS identifier] (bad query)\n\nin: [SELECT \"strange\"\"value\" AS identifier]\nout: [SELECT  AS identifier]\n\nin: [SELECT \"strange\"\"\"value\" AS identifier]\nout: [SELECT value\" AS identifier] (bad query)\n\nin: [SELECT \"strange\\\"value\" AS identifier]\nout: [SELECT  AS identifier]\n\nin: [SELECT \"strange\\\"\"value\" AS identifier]\nout: [SELECT value\" AS identifier] (bad query)\n\nin: [SELECT \"strange\"\"\"value\" AS identifier]\nout: [SELECT  AS identifier]\n{noformat}\n\nh4. References\n\nhttp:\/\/dev.mysql.com\/doc\/refman\/5.1\/en\/string-syntax.html\nhttp:\/\/dev.mysql.com\/doc\/refman\/5.1\/en\/identifiers.html\nhttp:\/\/publib.boulder.ibm.com\/infocenter\/rbhelp\/v6r3\/topic\/com.ibm.redbrick.doc6.3\/sqlrg\/sqlrg16.htm\nhttp:\/\/msdn.microsoft.com\/en-us\/library\/ms179899(SQL.90).aspx\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vdelau",
                        "name": "vdelau",
                        "displayName": "Vincent de Lau",
                        "active": true
                    },
                    "created": "2009-09-30T02:48:05.000+0000",
                    "updated": "2009-09-30T02:48:05.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43051",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Modified and improved patch; may not solve all issues, but completes the majority. (Patch from xenforo.)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2010-11-17T09:07:43.000+0000",
                    "updated": "2010-11-17T09:07:43.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48610",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "body": "As far as I can tell, the patch was never committed.  Is there any particular reason?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "created": "2011-10-05T14:26:20.000+0000",
                    "updated": "2011-10-05T14:26:20.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48616",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vdelau",
                        "name": "vdelau",
                        "displayName": "Vincent de Lau",
                        "active": true
                    },
                    "body": "Initially, I think this was not committed because there are no unit tests. ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vdelau",
                        "name": "vdelau",
                        "displayName": "Vincent de Lau",
                        "active": true
                    },
                    "created": "2011-10-05T15:41:41.000+0000",
                    "updated": "2011-10-05T15:41:41.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48704",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "body": "A couple of observations:\r\n* The patch attached by Matthew does not handle the case where values are quoted using double-quotes.  Does that need to be added?\r\n* The patch attached by Matthew makes the assumption that backslash is only escaping method.  Is that a safe assumption?\r\n* It appears that this case is not handled properly:  \r\n  {code}\r\nIN: SELECT 'strange\\'''value' AS identifier\r\nOUT: SELECT AS identifier\r\n{code}\r\n  My expectation is that it would behave the same as:\r\n  {code}\r\nIN: SELECT 'strange\\'value' AS identifier\r\nOUT: SELECT AS identifier\r\n{code}\r\nas it also has an even number of unescaped quotes, however with Matthew's patch applied it works like this:\r\n  {code}\r\nIN: SELECT 'strange\\'''value' AS identifier\r\nOUT: SELECT value' AS identifier\r\n{code}\r\n\r\nI've attached a patch with a first try at implementing a unit test to cover the \"Test Case\" part of Vincent's 30\/Sep\/09 post. ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "created": "2011-10-17T00:50:25.000+0000",
                    "updated": "2011-10-17T00:51:40.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/49474",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=joernh",
                        "name": "joernh",
                        "displayName": "Joern Heissler",
                        "active": true
                    },
                    "body": "See my comment in ZF-5063. It's MySQL-specific, though.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=joernh",
                        "name": "joernh",
                        "displayName": "Joern Heissler",
                        "active": true
                    },
                    "created": "2012-01-11T19:29:33.000+0000",
                    "updated": "2012-01-11T19:29:33.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/50028",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mcleod@spaceweb.nl",
                        "name": "mcleod@spaceweb.nl",
                        "displayName": "Bart McLeod",
                        "active": true
                    },
                    "body": "I am building a unit test using the input from Vincent de Lau, also using his research. I think that since he states that a backtick in MySQL can only be escaped with a backtick, the following example input \/ output pair is wrong:\r\n{code}\r\nin: [SELECT * FROM `strange\\`table`]\r\nout: [SELECT * FROM ]\r\n{code}\r\n\r\nI would expect:\r\n{code}\r\nin: [SELECT * FROM `strange\\`table`]\r\nout: [SELECT * FROM `strange\\]\r\n{code}\r\nbecause only the last pair of backticks matches. The backslash in this case has no special meaning.\r\n\r\nBut of course, I can be wrong.\r\nWhat I currently get when unit testing is:\r\n{code}\r\nin: [SELECT * FROM `strange\\`table`]\r\nout: [SELECT * FROM table`]\r\n{code}\r\nThis probably makes even more sense, since if we do not consider the backtick a special character, the first two backticks match and the last one doesn't.\r\n\r\nA similar thing happens with the next example:\r\n{code}\r\nin: [SELECT * FROM `strange\\``table`]\r\nout: [SELECT * FROM table`]\r\n{code}\r\nSince now we have a real backtick escape sequence (``), the second and third backtick that form the sequence should not be considered and so the first and last backticks match, so the input \/ output would be:\r\n{code}\r\nin: [SELECT * FROM `strange\\``table`]\r\nout: [SELECT * FROM]\r\n{code}\r\nMaybe the 4th and 5th example are just accidentally swapped, yet the sixth example shows a similar behavior, the current implementation does this, contrary to the example given, and it makes sense:\r\n{code}\r\nin: [SELECT * FROM `strange\\```table`]\r\nout: [SELECT * FROM table`]\r\n{code}\r\nThe fourth backtick in this case isn't escaped, so it matches the first and the last one remains.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mcleod@spaceweb.nl",
                        "name": "mcleod@spaceweb.nl",
                        "displayName": "Bart McLeod",
                        "active": true
                    },
                    "created": "2012-03-13T22:22:29.000+0000",
                    "updated": "2012-03-13T22:30:34.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/50031",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mcleod@spaceweb.nl",
                        "name": "mcleod@spaceweb.nl",
                        "displayName": "Bart McLeod",
                        "active": true
                    },
                    "body": "I finally ended up with these expected input \/ output scenario's and I had to change quite a bit inside the function to make these all pass:\r\n{code}\r\nin: [SELECT * FROM `strange`table1`]\r\nout: [SELECT * FROM table1`]\r\n    \r\nin: [SELECT * FROM `strange``table2`]\r\nout: [SELECT * FROM ]\r\n    \r\nin: [SELECT * FROM `strange```table3`]\r\nout: [SELECT * FROM table3`]\r\n    \r\nin: [SELECT * FROM `strange\\`table4`]\r\nout: [SELECT * FROM table4`]\r\n    \r\nin: [SELECT * FROM `strange\\``table5`]\r\nout: [SELECT * FROM ]\r\n    \r\nin: [SELECT * FROM `strange\\```table6`]\r\nout: [SELECT * FROM table6`]\r\n    \r\nin: [SELECT 'value7' AS identifier]\r\nout: [SELECT  AS identifier]\r\n    \r\nin: [SELECT 'strange:value8' AS identifier]\r\nout: [SELECT  AS identifier]\r\n    \r\nin: [SELECT 'strange'value9' AS identifier]\r\nout: [SELECT value9' AS identifier]\r\n    \r\nin: [SELECT 'strange''value10' AS identifier]\r\nout: [SELECT  AS identifier]\r\n    \r\nin: [SELECT 'strange'''value11' AS identifier]\r\nout: [SELECT value11' AS identifier]\r\n    \r\nin: [SELECT 'strange\\'value12' AS identifier]\r\nout: [SELECT  AS identifier]\r\n    \r\nin: [SELECT 'strange\\''value13' AS identifier]\r\nout: [SELECT value13' AS identifier]\r\n    \r\nin: [SELECT 'strange'''value14' AS identifier]\r\nout: [SELECT value14' AS identifier]\r\n    \r\nin: [SELECT \"value15\" AS identifier]\r\nout: [SELECT  AS identifier]\r\n    \r\nin: [SELECT \"strange:value16\" AS identifier]\r\nout: [SELECT  AS identifier]\r\n    \r\nin: [SELECT \"strange\"value17\" AS identifier]\r\nout: [SELECT value17\" AS identifier]\r\n    \r\nin: [SELECT \"strange\"\"value18\" AS identifier]\r\nout: [SELECT  AS identifier]\r\n    \r\nin: [SELECT \"strange\"\"\"value19\" AS identifier]\r\nout: [SELECT value19\" AS identifier]\r\n    \r\nin: [SELECT \"strange\\\"value20\" AS identifier]\r\nout: [SELECT  AS identifier]\r\n    \r\nin: [SELECT \"strange\\\"\"value21\" AS identifier]\r\nout: [SELECT value21\" AS identifier]\r\n    \r\nin: [SELECT \"strange\"\"\"value22\" AS identifier]\r\nout: [SELECT value22\" AS identifier]\r\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mcleod@spaceweb.nl",
                        "name": "mcleod@spaceweb.nl",
                        "displayName": "Bart McLeod",
                        "active": true
                    },
                    "created": "2012-03-13T23:00:49.000+0000",
                    "updated": "2012-03-13T23:00:49.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/50042",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mcleod@spaceweb.nl",
                        "name": "mcleod@spaceweb.nl",
                        "displayName": "Bart McLeod",
                        "active": true
                    },
                    "body": "Added a test case, not yet in the patch, but this passes as well:\r\n{code}\r\nin: [SELECT 'strange\\'''value23' AS identifier]\r\nout: [SELECT  AS identifier]\r\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mcleod@spaceweb.nl",
                        "name": "mcleod@spaceweb.nl",
                        "displayName": "Bart McLeod",
                        "active": true
                    },
                    "created": "2012-03-14T21:53:01.000+0000",
                    "updated": "2012-03-14T21:53:01.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/50300",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mcleod@spaceweb.nl",
                        "name": "mcleod@spaceweb.nl",
                        "displayName": "Bart McLeod",
                        "active": true
                    },
                    "body": "Added a patch that adds most recent unit test and hopefully better implementation. It still segfaults, but this should be complete. Please review.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mcleod@spaceweb.nl",
                        "name": "mcleod@spaceweb.nl",
                        "displayName": "Bart McLeod",
                        "active": true
                    },
                    "created": "2012-04-14T22:25:07.000+0000",
                    "updated": "2012-04-14T22:25:07.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/50569",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mcleod@spaceweb.nl",
                        "name": "mcleod@spaceweb.nl",
                        "displayName": "Bart McLeod",
                        "active": true
                    },
                    "body": "I committed the patch that contains all tests proposed here and updated code for _stripQuoted that satisfies all of those tests. The seqfault issue still exists above 9,000 characters. I will try to get this resolved using issue ZF-5063.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mcleod@spaceweb.nl",
                        "name": "mcleod@spaceweb.nl",
                        "displayName": "Bart McLeod",
                        "active": true
                    },
                    "created": "2012-05-09T21:26:32.000+0000",
                    "updated": "2012-05-09T21:26:32.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7911\/transitions"
}