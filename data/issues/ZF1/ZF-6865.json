{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6865",
    "key": "ZF-6865",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Navigation view helper support for multiple instances"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField",
            "value": {
                "timeoriginalestimate": 0,
                "timeestimate": 0
            }
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6865\/votes",
                "votes": 8,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/2",
                "name": "Won't Fix"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-10-16T15:36:49.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=syncer",
                "name": "syncer",
                "displayName": "Mina R Waheeb",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-05-30T07:29:09.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-05-11T15:16:27.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "Zend_Navigation",
                "Zend_View_Helper_Navigation"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Current implementation of Zend_Navigation view helper only support to handle one instance of Zend_Navigation. Its should serve multiple of navigation instances, similar to placeholder concept. most of the websites contains more than one navigation. \n\nlets say\n\n{code} \n$main = new Zend_Navigation();\n$sidebar = new Zend_Navigation();\n$view->navigation($main);  \/\/ sets the default\n$view->navigation(\"sidebar\", $sidebar); \/\/sets the sidebar view\n\/\/etc .. for footer, rightclick menu :)\n\/\/easy after that access the navigation in the view\n$this->navigation(\"sidebar\") ; \/\/access the side bar navigation\n$this->navigation(); \/\/ access the default navigation\n{code} \n\nThanks"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6865\/watchers",
                "isWatching": false,
                "watchCount": 7
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=robinsk",
                "name": "robinsk",
                "displayName": "Robin Skoglund",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10330",
                    "id": 10330,
                    "description": "Mini Release",
                    "name": "1.8.2",
                    "userReleaseDate": "27\/May\/09",
                    "archived": false,
                    "releaseDate": "2009-05-27",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10406",
                    "id": 10406,
                    "name": "Zend_Navigation",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31823",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=robinsk",
                        "name": "robinsk",
                        "displayName": "Robin Skoglund",
                        "active": true
                    },
                    "body": "This sounds interesting. Does anyone else have any comments?\n\nWhat you're requesting needs modifications in the proxy helper that might not be backwards compatible. By the way, is this feature intended for all helpers, or just the proxy helper?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=robinsk",
                        "name": "robinsk",
                        "displayName": "Robin Skoglund",
                        "active": true
                    },
                    "created": "2009-06-13T04:42:39.000+0000",
                    "updated": "2009-06-13T04:42:39.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31831",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=syncer",
                        "name": "syncer",
                        "displayName": "Mina R Waheeb",
                        "active": true
                    },
                    "body": "We can achieve this with backwards compatible by change the type check in the proxy view helper method signature like the below prototype\n\n{code}\npublic function navigation(Zend_Navigation_Container $container = null)\n\/\/ to\npublic function navigation($container = null, Zend_Navigation_Container $nav = null)\n\/\/ and add new array to navigation proxy view helper $containers\n\/\/ if $nav is null then \n\/\/    if $container is a string then call setContainer(containers[$container])\n\/\/    if $container is Zend_Navigation_Container then call  setContainer($container)\n\/\/ else\n\/\/    $container must be string then store $nav in the $containers array \n\/\/    then call setContainer(containers[$container])\n{code}\n\nI believe by this way there is no need to change all the helpers because the mechanism to change the container already exist. ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=syncer",
                        "name": "syncer",
                        "displayName": "Mina R Waheeb",
                        "active": true
                    },
                    "created": "2009-06-13T10:50:06.000+0000",
                    "updated": "2009-06-13T10:50:06.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31844",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=chetzoff",
                        "name": "chetzoff",
                        "displayName": "John John",
                        "active": true
                    },
                    "body": "Because of the mentioned problem, at the moment I have to refuse to use this component, because on my site I have 3 menus with different content. Hope that this issue will be resolved  as fast as possible  in the next version.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=chetzoff",
                        "name": "chetzoff",
                        "displayName": "John John",
                        "active": true
                    },
                    "created": "2009-06-14T08:42:42.000+0000",
                    "updated": "2009-06-14T08:42:42.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31845",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=syncer",
                        "name": "syncer",
                        "displayName": "Mina R Waheeb",
                        "active": true
                    },
                    "body": "more readable prototype \\\\\n\n{code}\npublic function navigation($container = 'default', Zend_Navigation_Container $navigation = null) {\n    if($navigation != null) {\n         $this->_containers[$container] = $navigation;\n    } elseif ($container instanceof Zend_Navigation_Container) {\n         $this->_containers['default'] = $navigation = $container;\n    } elseif (isset($this->_containers[$container])) {\n         $navigation = $this->_containers[$container];\n    } elseif($container == 'default') {\n         \/\/ Maybe better modify getContainer to getContainer($id = null)\n         \/\/ to allow multi-navs to be stored in Zend_Registry by resources etc...\n         \/\/ Keys for example: Zend_Navigation_Default, Zend_Navigation_Sidebar, Zend_Navigation_Footer ..\n         $this->_containers[$container] = $navigation = $this->getContainer();\n    } else {\n         $this->_containers[$container] = $navigation = new Zend_Navigation();\n    }\n    if (null !== $navigation) {\n         $this->setContainer($navigation);\n    }\n    return $this;\n}\n{code}\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=syncer",
                        "name": "syncer",
                        "displayName": "Mina R Waheeb",
                        "active": true
                    },
                    "created": "2009-06-14T09:24:40.000+0000",
                    "updated": "2009-06-14T09:24:40.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32385",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=syncer",
                        "name": "syncer",
                        "displayName": "Mina R Waheeb",
                        "active": true
                    },
                    "body": "any news?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=syncer",
                        "name": "syncer",
                        "displayName": "Mina R Waheeb",
                        "active": true
                    },
                    "created": "2009-07-04T10:02:43.000+0000",
                    "updated": "2009-07-04T10:02:43.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33181",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ashleysimons",
                        "name": "ashleysimons",
                        "displayName": "Ashley Simons",
                        "active": true
                    },
                    "body": "I quickly tried creating a custom view helper that extends the pre built view helper (merely calling the navigation method from my custom view helper's appropriate method) to no avail. \n\nSo when I have some time I'll look into both the view helper and zend_navigation to see what methods I'll need to override. However with this line of thought, its hard to be confident about the future compatibility side of things.  \n\nI need multiple instances of zend_navigation, per page on my multiple module project. ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ashleysimons",
                        "name": "ashleysimons",
                        "displayName": "Ashley Simons",
                        "active": true
                    },
                    "created": "2009-08-04T06:39:33.000+0000",
                    "updated": "2009-08-04T06:39:33.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33839",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=websafe",
                        "name": "websafe",
                        "displayName": "Thomas Szteliga",
                        "active": true
                    },
                    "body": "I would like to see this resolved, because i think it is  natural to use Zend_Navigation for site's main navigation and a separate instance of Zend_Navigation for a language selection menu or any other kind of \"menu\" not directly related to site's main navigation. ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=websafe",
                        "name": "websafe",
                        "displayName": "Thomas Szteliga",
                        "active": true
                    },
                    "created": "2009-08-24T06:07:34.000+0000",
                    "updated": "2009-08-24T06:07:34.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33840",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=robinsk",
                        "name": "robinsk",
                        "displayName": "Robin Skoglund",
                        "active": true
                    },
                    "body": "I have not put any work\/thoughts into this issue since my last comment. I'm still awaiting more community feedback on possible solutions and requirements.\n\nTo be honest, this is not exactly a major issue\/drawback with the view helper. You can always store as many container instances you like, e.g. in a registry, and simply render menus for those separately.\n\nExample:\n{code}\n<?php\n$topNav = Zend_Registry::get('myTopNav');\n$sideNav = Zend_Registry::get('mySideNav');\necho $this->navigation()->menu()->renderMenu($topNav);\necho $this->navigation()->menu()->renderMenu($sideNav);\n{code}\n\nIf you want to take it further, you could store the containers in the proxy helper dynamically, and simply do:\n{code}\n<?php\n$proxy = $this->navigation();\necho $proxy->menu($proxy->topNav);\necho $proxy->menu($proxy->sideNav);\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=robinsk",
                        "name": "robinsk",
                        "displayName": "Robin Skoglund",
                        "active": true
                    },
                    "created": "2009-08-24T06:17:56.000+0000",
                    "updated": "2009-08-24T06:19:58.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34477",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tlmarker",
                        "name": "tlmarker",
                        "displayName": "Troy Marker",
                        "active": true
                    },
                    "body": "I have been trying to get two menu to render on the same page, but i am haveing many problems. I tried Mr. Skoglung's example from above, but am not able to get it to work. Here is what I am doing. Being both menus will be the same on through the application i am putting this code in the Bootstrap.php file for the application:\n<code>\nZend_Registry::set('utility',$container->findByLabel('Page 1'));\nZend_Registry::set('main',$container->findByLabel('Page 2'));\n<\/code>\nAnd this code I am putting in the layout script:\n<code>\n<?php echo $this->navigation()->menu()->renderMenu(Zend_Registry::get('utility')); ?>\n<?php echo $this->navigation()->menu()->renderMenu(Zend_Registry::get('main'));  ?>\n<\/code>\nThe container I am using is something I copied out of the online documentation online. For the sake of completeness, I will post it here:\n<code>\n$container = new Zend_Navigation(array(    array(        'label' => 'Page 1',        'uri'   => 'page-1',        'foo'   => 'bar',        'pages' => array(            array(                'label' => 'Page 1.1',                'uri'   => 'page-1.1',                'foo'   => 'bar',            ),            array(                'label' => 'Page 1.2',                'uri'   => 'page-1.2',                'class' => 'my-class',            ),            array(                'type'   => 'uri',                'label'  => 'Page 1.3',                'uri'    => 'page-1.3',                'action' => 'about'            )        )    ),    array(        'label'      => 'Page 2',        'id'         => 'page_2_and_3',        'class'      => 'my-class',        'module'     => 'page2',        'controller' => 'index',        'action'     => 'page1'    ),    array(        'label'      => 'Page 3',        'id'         => 'page_2_and_3',        'module'     => 'page3',        'controller' => 'index'    )));\n<\/code>\n\nOnces I have this working, I would like to add ACL to it to display only certain parts of the menu.\n\nThe above code render the first menu, but not the second. I am at a loss. I have tryin several thing to no avail. Any help would be greatly apreciated.\n\nThank you in advance.\nTroy",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tlmarker",
                        "name": "tlmarker",
                        "displayName": "Troy Marker",
                        "active": true
                    },
                    "created": "2009-09-15T20:36:08.000+0000",
                    "updated": "2009-09-15T20:36:08.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35316",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=robinsk",
                        "name": "robinsk",
                        "displayName": "Robin Skoglund",
                        "active": true
                    },
                    "body": "Closing this issue now to clean up the issue tracker. For general help, consult the mailing lists or IRC.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=robinsk",
                        "name": "robinsk",
                        "displayName": "Robin Skoglund",
                        "active": true
                    },
                    "created": "2009-10-16T15:36:47.000+0000",
                    "updated": "2009-10-16T15:36:47.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36806",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=anybody",
                        "name": "anybody",
                        "displayName": "Julian Pustkuchen",
                        "active": true
                    },
                    "body": "I would be grateful, if you could add the described possibility.\r\n\r\nThe current implementation is not really good and seperated menus are used quite often I think.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=anybody",
                        "name": "anybody",
                        "displayName": "Julian Pustkuchen",
                        "active": true
                    },
                    "created": "2009-12-08T11:46:31.000+0000",
                    "updated": "2009-12-08T11:46:31.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36807",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=anybody",
                        "name": "anybody",
                        "displayName": "Julian Pustkuchen",
                        "active": true
                    },
                    "body": "I'd like to add, that this extension would make sense for example for the use of breadcrumbs.\r\n\r\nNow if you have several navigations, only the one added to the view will work for breadcrumbs. That's not really nice...",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=anybody",
                        "name": "anybody",
                        "displayName": "Julian Pustkuchen",
                        "active": true
                    },
                    "created": "2009-12-08T11:58:20.000+0000",
                    "updated": "2009-12-08T11:58:20.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37012",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=philbrown",
                        "name": "philbrown",
                        "displayName": "Phil Brown",
                        "active": true
                    },
                    "body": "Robin, regarding your example\r\n{code}\r\n<?php\r\n$proxy = $this->navigation();\r\necho $proxy->menu($proxy->topNav);\r\necho $proxy->menu($proxy->sideNav);\r\n{code}\r\n\r\ngiven the absence of __get and __set magic methods in the proxy helper, I can only assume you're directly assigning new, public properties. Don't you think this is a little hacky (it's one of those PHP \"features\" I've never been happy with)? Perhaps you could implement the aforementioned magic methods to manipulate a protected $_namedContainers array for named navigation containers.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=philbrown",
                        "name": "philbrown",
                        "displayName": "Phil Brown",
                        "active": true
                    },
                    "created": "2009-12-17T21:37:16.000+0000",
                    "updated": "2009-12-17T21:37:16.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40430",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=pfeigl",
                        "name": "pfeigl",
                        "displayName": "Philipp Feigl",
                        "active": true
                    },
                    "body": "For anyone else trying to get it accomplished, this seems to be a good way to do it:\r\n{code}\r\n$this->navigation()->menu()->render($navigationContainerObject)\r\n{code}\r\n\r\ncalling render (or even renderMenu) directly with an navigation container does not change the internal navigation object of the view helper and simply renders whatever is provided.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=pfeigl",
                        "name": "pfeigl",
                        "displayName": "Philipp Feigl",
                        "active": true
                    },
                    "created": "2010-05-11T15:16:26.000+0000",
                    "updated": "2010-05-11T15:16:26.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6865\/transitions"
}