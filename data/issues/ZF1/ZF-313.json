{
    "expand": "html",
    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-313",
    "key": "ZF-313",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "TTFBox or TextWidth\/Height function (word wrapping functionality)"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issueType\/2",
                "name": "New Feature",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-313\/votes",
                "votes": 17,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=toby",
                "name": "toby",
                "displayName": "Tobias Plaputta",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2006-08-09T11:08:52.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-11-20T21:38:15.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Problem: \nWhen using the drawText function to write a string that is longer than the page, there is no WordWrap.\nIs there a way to print text wrapped or to find out the width and height of the string that is about to be printed?"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-313\/watchers",
                "isWatching": false,
                "watchCount": 9
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User"
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-1993",
                    "issue": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1993",
                    "type": {
                        "name": "Related",
                        "direction": "INBOUND",
                        "description": "is related to"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/version\/10000",
                    "id": 10000,
                    "description": "Preview Release",
                    "name": "0.1.4",
                    "userReleaseDate": "29\/Jun\/06",
                    "archived": true,
                    "releaseDate": "2006-06-29",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/component\/10020",
                    "id": 10020,
                    "name": "Zend_Pdf",
                    "description": "pure PHP manipulation engine for composing PDFs",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10692",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=willie",
                        "name": "willie",
                        "displayName": "Willie Alberty",
                        "active": true
                    },
                    "body": "I am working on some advanced layout classes that will take care of wrapping long lines for you. This code won't be ready for several more weeks. In the meantime, you may be able to use this function:\n\n{code}\n\/**\n* Returns the total width in points of the string using the specified font and\n* size.\n*\n* This is not the most efficient way to perform this calculation. I'm \n* concentrating optimization efforts on the upcoming layout manager class.\n* Similar calculations exist inside the layout manager class, but widths are\n* generally calculated only after determining line fragments.\n*\n* @param string $string\n* @param Zend_Pdf_Resource_Font $font\n* @param float $fontSize Font size in points\n* @return float\n*\/\nfunction widthForStringUsingFontSize($string, $font, $fontSize)\n{\n    $drawingString = iconv('', 'UTF-16BE', $string);\n    $characters = array();\n    for ($i = 0; $i < strlen($drawingString); $i++) {\n        $characters[] = (ord($drawingString[$i++]) << 8) | ord($drawingString[$i]);\n    }\n    $glyphs = $font->cmap->glyphNumbersForCharacters($characters);\n    $widths = $font->widthsForGlyphs($glyphs);\n    $stringWidth = (array_sum($widths) \/ $font->getUnitsPerEm()) * $fontSize;\n    return $stringWidth;\n}\n\n$font = Zend_Pdf_FontFactory::fontWithName(Zend_Pdf_Const::FONT_HELVETICA);\n$stringWidth = widthForStringUsingFontSize('Hello world!', $font, 12);\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=willie",
                        "name": "willie",
                        "displayName": "Willie Alberty",
                        "active": true
                    },
                    "created": "2006-08-09T18:32:48.000+0000",
                    "updated": "2006-08-09T18:32:48.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10694",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=toby",
                        "name": "toby",
                        "displayName": "Tobias Plaputta",
                        "active": true
                    },
                    "body": "@Wille Alberty: Amazing, this is 100% what I have needed! Thank you very much!",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=toby",
                        "name": "toby",
                        "displayName": "Tobias Plaputta",
                        "active": true
                    },
                    "created": "2006-08-10T05:17:09.000+0000",
                    "updated": "2006-08-10T05:17:09.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/11333",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "Changing fix version to unknown.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2006-11-13T15:09:46.000+0000",
                    "updated": "2006-11-13T15:09:46.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/11508",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "Changing fix version to 0.6.0.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2006-11-13T15:26:52.000+0000",
                    "updated": "2006-11-13T15:26:52.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/14764",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=alexander",
                        "name": "alexander",
                        "displayName": "Alexander Veremyev",
                        "active": true
                    },
                    "body": "Summary is changed to describe problem more clear.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=alexander",
                        "name": "alexander",
                        "displayName": "Alexander Veremyev",
                        "active": true
                    },
                    "created": "2007-05-25T02:22:25.000+0000",
                    "updated": "2007-05-25T02:22:25.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/14765",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=alexander",
                        "name": "alexander",
                        "displayName": "Alexander Veremyev",
                        "active": true
                    },
                    "body": "Depends on other text formatting tasks (canvases, paragraphs and so on)",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=alexander",
                        "name": "alexander",
                        "displayName": "Alexander Veremyev",
                        "active": true
                    },
                    "created": "2007-05-25T02:23:59.000+0000",
                    "updated": "2007-05-25T02:23:59.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/14785",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=alexander",
                        "name": "alexander",
                        "displayName": "Alexander Veremyev",
                        "active": true
                    },
                    "body": "Assignee is changed to postpone issue to post-v1.0 period",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=alexander",
                        "name": "alexander",
                        "displayName": "Alexander Veremyev",
                        "active": true
                    },
                    "created": "2007-05-25T06:34:28.000+0000",
                    "updated": "2007-05-25T06:34:28.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/14786",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=alexander",
                        "name": "alexander",
                        "displayName": "Alexander Veremyev",
                        "active": true
                    },
                    "body": "Postponed to post-v1.0",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=alexander",
                        "name": "alexander",
                        "displayName": "Alexander Veremyev",
                        "active": true
                    },
                    "created": "2007-05-25T06:35:04.000+0000",
                    "updated": "2007-05-25T06:35:04.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/24513",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=saeven",
                        "name": "saeven",
                        "displayName": "Alexandre Lemaire",
                        "active": true
                    },
                    "body": "This only partially alleviates the metrics required for word wrapping though. This may be neat, but the instance where it doesn't help, is where you have a long string, need to word-wrap it, but need to know at which width a line should be cut without cutting words.\n\nPHP inherently offers us the wordwrap function, which allows us to cut a string into an array where lines don't exceed a certain width, taking word composition into consideration.  It's useless in this case though, since a 'max width' is very variable when font glyphs are of variable sizes.\n\nIs there a function in Zend_PDF somewhat akin to the above, which allows us to determine a cut-strategy given:\n- a font\n- a font size\n- a page width (or width-coordinate restriction)\n- a (possibly multi-line) string of text?\n\nThanks.\nAlex\n\n\n\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=saeven",
                        "name": "saeven",
                        "displayName": "Alexandre Lemaire",
                        "active": true
                    },
                    "created": "2008-09-12T14:32:38.000+0000",
                    "updated": "2008-09-12T14:32:38.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/25738",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=remi",
                        "name": "remi",
                        "displayName": "Remi ++",
                        "active": true
                    },
                    "body": "There is a new Zend_Font Component Proposal available for this:\nhttp:\/\/framework.zend.com\/wiki\/display\/ZFPROP\/Zend_Font+-+Karol+Babioch\n\nI would love to see a little bit progress with Zend_Pdf.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=remi",
                        "name": "remi",
                        "displayName": "Remi ++",
                        "active": true
                    },
                    "created": "2008-11-05T22:58:10.000+0000",
                    "updated": "2008-11-05T22:58:10.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/27050",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=willie",
                        "name": "willie",
                        "displayName": "Willie Alberty",
                        "active": true
                    },
                    "body": "Unassigning Zend_Pdf issues currently assigned to me pending decision on ZF 2.0 release timeframe and potential contribution of comprehensive changeset.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=willie",
                        "name": "willie",
                        "displayName": "Willie Alberty",
                        "active": true
                    },
                    "created": "2008-12-04T22:34:53.000+0000",
                    "updated": "2008-12-04T22:34:53.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/27529",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "Alex, could you please look at this issue and mark it 'postponed' if we won't be addressing it before 1.8. Note that it has several votes.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2008-12-19T13:33:40.000+0000",
                    "updated": "2008-12-19T13:33:40.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/38474",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=cryptopia",
                        "name": "cryptopia",
                        "displayName": "James Gordon",
                        "active": true
                    },
                    "body": "A few minor comments that might save people some time:\r\n\r\n1. The following line:\r\n\r\n{{$glyphs = $font->cmap->glyphNumbersForCharacters($characters);}}\r\n\r\n...needs to be changed to this in order to work with later versions of ZF (eg. 1.10.1):\r\n\r\n{{$glyphs = $font->glyphNumbersForCharacters($characters);}}\r\n\r\n2. The following line to test the function:\r\n\r\n{{$font = Zend_Pdf_FontFactory::fontWithName(Zend_Pdf_Const::FONT_HELVETICA);}}\r\n\r\n...needs to be changed to this in order to work with later versions of ZF (eg. 1.10.1):\r\n\r\n{{$font = Zend_Pdf_Font::fontWithName(Zend_Pdf_Font::FONT_HELVETICA);}}\r\n\r\n3. The function won't work with extracted fonts, only standard fonts or fonts loaded from {{ttf}} files.\r\n\r\nOtherwise excellent function (I see it made its way into {{Zend_Barcode_Renderer_Pdf}}). Many thanks!\r\n\r\nJames.\r\n\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=cryptopia",
                        "name": "cryptopia",
                        "displayName": "James Gordon",
                        "active": true
                    },
                    "created": "2010-02-15T21:46:35.000+0000",
                    "updated": "2010-02-15T21:46:35.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-313\/transitions"
}