{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7835",
    "key": "ZF-7835",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Label-Decorator produces invalid id with Array-Notation\/subform and numeric indices "
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/5",
                "name": "Sub-task",
                "subtask": true
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7835\/votes",
                "votes": 2,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2013-02-12T08:22:03.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=kingcrunch",
                "name": "kingcrunch",
                "displayName": "Sebastian Krebs",
                "active": true
            }
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-09-12T09:15:22.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2013-02-12T08:22:04.000+0000"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "When using multiple elements in a subform with numeric names (ids) the label decorator will create an id like \"14-label\", buts thats not valid. Its also not possible to change this behavior, because its hardcoded in Decorator\/Label.php:317\n{code}$decorator->setOptions(array('tag' => $tag,\n  'id'  => $this->getElement()->getName() . '-label'));{code}\nIn the input-tag of the subform-element the name of the subform itself is prepended. This should be also here."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7835\/watchers",
                "isWatching": false,
                "watchCount": 3
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/6",
                "name": "Closed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                "name": "frosch",
                "displayName": "Frank Br\u00fcckner",
                "active": true
            }
        },
        "parent": {
            "name": "parent",
            "type": "issuelinks",
            "value": {
                "issueKey": "ZF-6741",
                "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6741",
                "type": {
                    "name": "Parent",
                    "direction": "INBOUND"
                }
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-7663",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7663",
                    "type": {
                        "name": "Duplicate",
                        "direction": "OUTBOUND",
                        "description": "duplicates"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10361",
                    "id": 10361,
                    "description": "Mini Release",
                    "name": "1.9.2",
                    "userReleaseDate": "25\/Aug\/09",
                    "archived": false,
                    "releaseDate": "2009-08-25",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10029",
                    "id": 10029,
                    "name": "Zend_Form",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34418",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=kingcrunch",
                        "name": "kingcrunch",
                        "displayName": "Sebastian Krebs",
                        "active": true
                    },
                    "body": "This can be a solution: It prepends the Array name (if exists) before the id of the label.\n\nZend\/Form\/Decorator\/Label.php:316-...\n{code}            $id = $this->getElement()->isArray();\n            if (is_null($id)) {\n                $id = $this->getElement()->getName();\n            } else {\n                $id = $id . '-' . $this->getElement()->getName();\n            }\n            $decorator->setOptions(array('tag' => $tag,\n                                         'id'  =>  $id . '-label'));{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=kingcrunch",
                        "name": "kingcrunch",
                        "displayName": "Sebastian Krebs",
                        "active": true
                    },
                    "created": "2009-09-12T09:24:32.000+0000",
                    "updated": "2009-09-12T09:24:32.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35635",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jacktanner",
                        "name": "jacktanner",
                        "displayName": "Jack Tanner",
                        "active": true
                    },
                    "body": "VERIFIED. The current behavior produces invalid XHTML.\r\n\r\nThe right kind of thing to do is to generate the label $id not based on $element->getName but on getFullyQualifiedName, but the array notation uses brackets which are invalid values for id attributes. ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jacktanner",
                        "name": "jacktanner",
                        "displayName": "Jack Tanner",
                        "active": true
                    },
                    "created": "2009-10-30T09:06:43.000+0000",
                    "updated": "2009-10-30T09:06:43.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36247",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=umpirsky",
                        "name": "umpirsky",
                        "displayName": "Sasa Stamenkovic",
                        "active": true
                    },
                    "body": "@Jack Tanner Brackets can be replaced with dashes.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=umpirsky",
                        "name": "umpirsky",
                        "displayName": "Sasa Stamenkovic",
                        "active": true
                    },
                    "created": "2009-11-20T02:17:37.000+0000",
                    "updated": "2009-11-20T02:17:37.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51343",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "body": "Hi Sebastian,\r\ncan you give a short example?\r\nHas the subform a numeric name or the element?\r\n\r\nThanks!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2012-07-13T07:36:50.000+0000",
                    "updated": "2012-07-13T07:36:50.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51344",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=kingcrunch",
                        "name": "kingcrunch",
                        "displayName": "Sebastian Krebs",
                        "active": true
                    },
                    "body": "Sorry, but was 3 years and 3 minor-versions ago...\r\n\r\nBut as far as I can see in my own repot: The element has the numeric name\r\n\r\n    $this->getElement()->getName()",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=kingcrunch",
                        "name": "kingcrunch",
                        "displayName": "Sebastian Krebs",
                        "active": true
                    },
                    "created": "2012-07-13T07:44:13.000+0000",
                    "updated": "2012-07-13T07:44:31.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51346",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "body": "Okay, I'll write an unit test.\r\n\r\nThanks for your very quick answer!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2012-07-13T09:00:59.000+0000",
                    "updated": "2012-07-13T09:00:59.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51347",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "body": "Here is an unit test:\r\n{code}\r\n\/**\r\n * @group ZF-7835\r\n *\/\r\npublic function testRenderingWithSubForm()\r\n{\r\n    \/\/ Form\r\n    $form = new Zend_Form(\r\n        array(\r\n             'view'                         => $this->getView(),\r\n             'decorators'                   => array(\r\n                 'FormElements',\r\n             ),\r\n             'disableLoadDefaultDecorators' => true,\r\n        )\r\n    );\r\n\r\n    \/\/ Element\r\n    $element = new Zend_Form_Element(\r\n        '100',\r\n        array(\r\n             'label'      => 'Foo',\r\n             'decorators' => array(\r\n                 'ViewHelper',\r\n                 array(\r\n                     'Label',\r\n                     array('tag' => 'div')\r\n                 ),\r\n             ),\r\n        )\r\n    );\r\n\r\n    \/\/ SubForm\r\n    $subform = new Zend_Form_SubForm(\r\n        array(\r\n             'decorators' => array(\r\n                 'FormElements',\r\n             ),\r\n        )\r\n    );\r\n    $subform->addElement($element);\r\n    $form->addSubForm($subform, 'bar');\r\n\r\n    \/\/ Test\r\n    $actual   = trim($form->render());\r\n    $expected = '<div id=\"bar-100-label\">'\r\n              . '<label for=\"bar-100\" class=\"optional\">Foo<\/label><\/div>'\r\n              . PHP_EOL\r\n              . PHP_EOL\r\n              . '<input type=\"text\" name=\"bar[100]\" id=\"bar-100\" value=\"\">';\r\n\r\n    $this->assertEquals($expected, $actual);\r\n}\r\n{code}\r\nResult:\r\n{code:borderStyle=solid}\r\nOK (21 tests, 40 assertions)\r\n\r\nProcess finished with exit code 0\r\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2012-07-13T10:17:04.000+0000",
                    "updated": "2012-07-13T10:17:04.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/53119",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "body": "The problem was fixed in a previous version.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2013-02-12T08:22:04.000+0000",
                    "updated": "2013-02-12T08:22:04.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7835\/transitions"
}