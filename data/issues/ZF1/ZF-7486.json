{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7486",
    "key": "ZF-7486",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Cannot redeclare class Zend_Feed_Reader_FeedAbstract"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7486\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-08-05T07:24:14.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthias-sch",
                "name": "matthias-sch",
                "displayName": "Matthias Sch.",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-08-05T05:33:12.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-08-05T07:24:14.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Fatal error:  Cannot redeclare class Zend_Feed_Reader_FeedAbstract in \/......\/library\/Zend\/Feed\/Reader\/FeedAbstract.php on line 49\n\ni use\n$feed = Zend_Feed_Reader::import($link);\n4 times in the script... with different types of feeds (rss\/atom\/...)"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7486\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/6",
                "name": "Closed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=padraic",
                "name": "padraic",
                "displayName": "P\u00e1draic Brady",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10320",
                    "id": 10320,
                    "description": "Minor Release",
                    "name": "1.9.0",
                    "userReleaseDate": "31\/Jul\/09",
                    "archived": false,
                    "releaseDate": "2009-07-31",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10420",
                    "id": 10420,
                    "name": "Zend_Feed_Reader",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33217",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=padraic",
                        "name": "padraic",
                        "displayName": "P\u00e1draic Brady",
                        "active": true
                    },
                    "body": "Thanks for the report! I'll look into immediately and attempt a resolution in the next hour.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=padraic",
                        "name": "padraic",
                        "displayName": "P\u00e1draic Brady",
                        "active": true
                    },
                    "created": "2009-08-05T05:47:48.000+0000",
                    "updated": "2009-08-05T05:47:48.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33218",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthias-sch",
                        "name": "matthias-sch",
                        "displayName": "Matthias Sch.",
                        "active": true
                    },
                    "body": "ok, this happens when using a default cache for caching:\n\n\n\t\tif (! $this->view->birthdays = $this->core->getCache()->load('FEEDFILE', $feeds->feed->birthdays)) {\n\t\t\tif ($this->view->birthdays = $this->core->getFeed($feeds->feed->birthdays))\n\t\t\t\t$this->core->getCache()->save('FEEDFILE', $feeds->feed->birthdays, $this->view->birthdays, 6*60*60);\n\t\t}\n\t\tif (! $this->view->newemp = $this->core->getCache()->load('FEEDFILE', $feeds->feed->newemp)) {\n\t\t\tif ($this->view->newemp = $this->core->getFeed($feeds->feed->newemp))\n\t\t\t\t$this->core->getCache()->save('FEEDFILE', $feeds->feed->newemp, $this->view->newemp, 6*60*60);\n\t\t}\n\t\tif (! $this->view->bernegger = $this->core->getCache()->load('FEEDFILE', $feeds->feed->benews)) {\n\t\t\tif ($this->view->bernegger = $this->core->getFeed($feeds->feed->benews))\n\t\t\t\t$this->core->getCache()->save('FEEDFILE', $feeds->feed->benews, $this->view->bernegger, 1*60*60);\n\t\t}\n\t\tif (! $this->view->itcnews = $this->core->getCache()->load('FEEDFILE', $feeds->feed->itcnews)) {\n\t\t\tif ($this->view->itcnews = $this->core->getFeed($feeds->feed->itcnews))\n\t\t\t\t$this->core->getCache()->save('FEEDFILE', $feeds->feed->itcnews, $this->view->itcnews, 1*60*60);\n\t\t}\n\t\tif (! $this->view->news = $this->core->getCache()->load('FEEDFILE', $usernews)) {\n\t\t\tif ($this->view->news = $this->core->getFeed($usernews))\n\t\t\t\t$this->core->getCache()->save('FEEDFILE', $usernews, $this->view->news, 3*60*60);\n\n\n\nmy cache class is not very special:\n\n\tpublic function __construct() {\n\t\t$frontendOptions = array(\n\t\t\t'automatic_serialization' => true\n\t\t);\n\n\t\t$backendOptions = array(\n\t\t\t'cache_dir' => APP_BASE.'\/temp\/cache\/objects\/'\n\t\t);\n\t\t\n\t\t$this->core = Bemapp_Core::getInstance();\n\t\t$this->cache = Zend_Cache::factory('Core', 'File', $frontendOptions, $backendOptions);\n\t}\n\tpublic function load($prefix, $id) {\n\t\treturn $this->cache->load($this->core->getVersion().'_'.strtoupper($prefix).'_'.md5($id).'_'.sha1($id));\n\t}\n\tpublic function save($prefix, $id, $object, $lifetime) {\n\t\treturn $this->cache->save($object, $this->core->getVersion().'_'.strtoupper($prefix).'_'.md5($id).'_'.sha1($id), array($prefix, md5($id).'_'.sha1($id)), $lifetime);\n\t}\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthias-sch",
                        "name": "matthias-sch",
                        "displayName": "Matthias Sch.",
                        "active": true
                    },
                    "created": "2009-08-05T05:49:43.000+0000",
                    "updated": "2009-08-05T05:49:43.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33219",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=padraic",
                        "name": "padraic",
                        "displayName": "P\u00e1draic Brady",
                        "active": true
                    },
                    "body": "Hi Matthias,\n\nI tried to replicate this, but I could import a stack of feeds in sequence as described without encountering any errors.\n\nCan I ask to confirm that you are using either the downloaded 1.9 release, or a fully updated trunk checkout? This would have occurred during the week leading up to the first preview release when I was renaming\/relocated the Interface\/Abstract classes. As it is, the download\/trunk should never see this happen.\n\nI've added a test case for this into the main tests on trunk just in case it occurs under some other circumstances I'm unaware of.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=padraic",
                        "name": "padraic",
                        "displayName": "P\u00e1draic Brady",
                        "active": true
                    },
                    "created": "2009-08-05T06:07:45.000+0000",
                    "updated": "2009-08-05T06:07:45.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33220",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=padraic",
                        "name": "padraic",
                        "displayName": "P\u00e1draic Brady",
                        "active": true
                    },
                    "body": "Aha! Okay, back to the drawing board with caching enabled! :)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=padraic",
                        "name": "padraic",
                        "displayName": "P\u00e1draic Brady",
                        "active": true
                    },
                    "created": "2009-08-05T06:08:28.000+0000",
                    "updated": "2009-08-05T06:08:28.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33224",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=padraic",
                        "name": "padraic",
                        "displayName": "P\u00e1draic Brady",
                        "active": true
                    },
                    "body": "Okay, testing with cache, even testing the Feed object (not recommended - you can't always serialise DOMDocument which is why we cache the Feed XML internally instead) and still no errors here. Here's the test case (which I'll leave in the tests for future checks by other users in case this is implementation or system specific.\n\n{code}\/**  Test condition for ZF-7486 (Could Not Replicate)  **\/\n    public function testRepeatedFeedImportsWithCacheEnabledDirectOrIndirectDoNotCreateARedeclarationOfAbstractClassFatalError()\n    {\n        if (!defined('TESTS_ZEND_FEED_READER_ONLINE_ENABLED')\n            || !constant('TESTS_ZEND_FEED_READER_ONLINE_ENABLED')\n        ) {\n            $this->markTestSkipped('testRepeatedFeedImportsDoNotCreateARedeclarationOfAbstractClassFatalError() requires a network connection');\n            return;\n        }\n        $frontendOptions = array(\n           'lifetime' => 7200,\n           'automatic_serialization' => true\n        );\n        $backendOptions = array(\n            'cache_dir' => $this->_getTempDirectory()\n        );\n        $cache = Zend_Cache::factory('Core','File',$frontendOptions,$backendOptions);\n        Zend_Feed_Reader::setCache($cache);\n        $feed = Zend_Feed_Reader::import('http:\/\/www.planet-php.net\/rss\/');\n        $cache->save($feed, 'feed1');\n        $feed2 = Zend_Feed_Reader::import('http:\/\/www.planet-php.net\/rdf\/');\n        $cache->save($feed, 'feed2');\n        $feed3 = Zend_Feed_Reader::import('http:\/\/www.planet-php.net\/atom\/');\n        $cache->save($feed, 'feed3');\n        $feed4 = Zend_Feed_Reader::import('http:\/\/www.phpdeveloper.org\/feed');\n        $cache->save($feed, 'feed4');\n        $feedFromCache = $cache->load('feed4');\n        $this->assertTrue($feedFromCache instanceof Zend_Feed_Reader_FeedAbstract);\n    }{code}\n\nWithout additional details on what feeds you're using, or what your custom cache does, I am currently unable to replicate this error. I'm sorry for that - I wish I could so I could fix this if it's something at fault with Zend_Feed_Reader.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=padraic",
                        "name": "padraic",
                        "displayName": "P\u00e1draic Brady",
                        "active": true
                    },
                    "created": "2009-08-05T06:43:26.000+0000",
                    "updated": "2009-08-05T06:43:26.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33227",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthias-sch",
                        "name": "matthias-sch",
                        "displayName": "Matthias Sch.",
                        "active": true
                    },
                    "body": "okay, according to yout hint not to \"manually\" cache the stuff...\ni rewrote my caching-system... now it's working!\n\nthank you!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthias-sch",
                        "name": "matthias-sch",
                        "displayName": "Matthias Sch.",
                        "active": true
                    },
                    "created": "2009-08-05T07:12:22.000+0000",
                    "updated": "2009-08-05T07:12:22.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33230",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=padraic",
                        "name": "padraic",
                        "displayName": "P\u00e1draic Brady",
                        "active": true
                    },
                    "body": "That all that's really important :). If you believe the documentation in this regards needs an improvement, feel free to open a new docs issue for it. I'll add it my own list here also.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=padraic",
                        "name": "padraic",
                        "displayName": "P\u00e1draic Brady",
                        "active": true
                    },
                    "created": "2009-08-05T07:21:43.000+0000",
                    "updated": "2009-08-05T07:21:43.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33231",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=padraic",
                        "name": "padraic",
                        "displayName": "P\u00e1draic Brady",
                        "active": true
                    },
                    "body": "As a last note - once you set the default cache on Zend_Feed_Reader - you can ignore the save() calls from the test example (I added them in case they were the problem). ZFR will do this internally anyway and obey the cache's time to live.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=padraic",
                        "name": "padraic",
                        "displayName": "P\u00e1draic Brady",
                        "active": true
                    },
                    "created": "2009-08-05T07:24:13.000+0000",
                    "updated": "2009-08-05T07:24:13.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7486\/transitions"
}