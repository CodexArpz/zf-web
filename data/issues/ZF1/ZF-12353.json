{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-12353",
    "key": "ZF-12353",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "FlashMessenger Issue with FF 14.0.1, possibly Zend_Session issue "
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-12353\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tridem",
                "name": "tridem",
                "displayName": "Webdevilopers",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2012-07-31T08:54:56.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-08-15T12:19:26.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "firefox",
                "flashMessenger"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I post a form from one controller action to another.\r\nOn the second action I add a message to the flashMessenger and the redirect to the first action.\r\n\r\nI have a plugin that adds the messages to a placeholder in my layout.\r\n\r\nExpected result (working in Chrome and other browsers):\r\n- Form is submitted\r\n- message added\r\n- redirected to my first page\r\n- message appears in layout.\r\n\r\nNow this is what happens in FF 14.0.1:\r\n- Form is submitted\r\n- Message added\r\n- Redirected to an in-between page without layout showing message only\r\n- Redirected to my first page\r\n- Again redirected though the url itself does not change\r\n- No message in layout\r\n\r\nDebugging:\r\nTo test my plugin I print out the messages in the dispatchLoopStartup().\r\nWhen being redirected (the first time!) I see an almost blank HTML page\r\nwhich has nothing in common with my layout. It is simply printing out the message.\r\n\r\nThe the second redirect starts and leads me to my regular layout - message gone.\r\n\r\nI am using FF 14.0.1 and deactivated FireBug. I've been thinking about a problem with the FF auto-refresh feature.\r\n\r\nThe plugin code:\r\n{code}\r\n<?php\r\nclass Plugin_FlashMessenger extends Zend_Controller_Plugin_Abstract\r\n{\r\n\tprotected $_id = 'messages';\r\n\tprotected $_timeout = 1000;\r\n\r\n    \/**\r\n     * @param Zend_Controller_Request_Abstract $request\r\n     *\/\r\n    public function dispatchLoopStartup(Zend_Controller_Request_Abstract $request)\r\n    {\r\n        $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper('viewRenderer');\r\n        $viewRenderer->init();\r\n\r\n        $view = $viewRenderer->view;\r\n\r\n       \t$view->layout()->messages = null;\r\n\r\n        $flashMessenger = Zend_Controller_Action_HelperBroker::getStaticHelper('FlashMessenger');\r\n\r\n        if (count($messages = $flashMessenger->getMessages()) === 0) {\r\n        \treturn;\r\n        }\r\n\r\n        $js = \"$.fx.speeds._default = 1000;\\n\"\r\n            . \"var dialog = $(\\\"\"\r\n            . $this->_id . \"\\\").dialog({\\n\"\r\n            . \"    modal: true,\\n\"\r\n            . \"    hide: \\\"explode\\\"\\n\"\r\n            . \"});\\n\"\r\n            . \"\\n\"\r\n            . \"setTimeout(function() {\\n\"\r\n            . \"    dialog.dialog('destroy');\\n\"\r\n            . \"}, \" . $this->_timeout . \");\";\r\n\r\n        $view->jQuery()->addOnLoad($js);\r\n\r\n        $flashMessengerContent = \"<div id=\\\"\" . $this->_id . \"\\\">\";\r\n\r\n        foreach ($messages as $message) {\r\n            $flashMessengerContent .= $message;\r\n        }\r\n\r\n        $flashMessengerContent .= \"<\/div>\\n\";\r\n\t\techo $flashMessengerContent; \/\/ debugging\r\n        $view->layout()->messages = $flashMessengerContent;\r\n    }\r\n}\r\n?>\r\n\r\n\r\n<html>\r\n<head><\/head>\r\n<body>\r\n<div id=\"messages\">My flashMessage<\/div>\r\n<\/body>\r\n<\/html>\r\n{code}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-12353\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                "name": "ralph",
                "displayName": "Ralph Schindler",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10981",
                    "id": 10981,
                    "description": "Mini Release",
                    "name": "1.11.11",
                    "userReleaseDate": "29\/Sep\/11",
                    "archived": false,
                    "releaseDate": "2011-09-29",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10096",
                    "id": 10096,
                    "name": "Zend_Session",
                    "description": "A standardized interface to common functionality found in or indigenous to site session implementations. ",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51599",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=evangelos",
                        "name": "evangelos",
                        "displayName": "Evangelos Sariyanidi",
                        "active": true
                    },
                    "body": "I have the exact same problem, and I think it's caused by the way that FF handles the sessions.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=evangelos",
                        "name": "evangelos",
                        "displayName": "Evangelos Sariyanidi",
                        "active": true
                    },
                    "created": "2012-08-15T12:19:26.000+0000",
                    "updated": "2012-08-15T12:19:26.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-12353\/transitions"
}