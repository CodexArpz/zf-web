{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2493",
    "key": "ZF-2493",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Cache  testsuite wants to use '\/' dir to store files"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/13",
                "name": "Unit Tests: Problem",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2493\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10172",
                    "id": 10172,
                    "description": "Minor Release",
                    "name": "1.5.0",
                    "userReleaseDate": "17\/Mar\/08",
                    "archived": true,
                    "releaseDate": "2008-03-17",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2008-01-29T15:21:48.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jmut",
                "name": "jmut",
                "displayName": "Julian Davchev",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-01-25T02:50:26.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2008-12-17T13:38:18.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Zend_Cache test suite tries to use weird dir for storing cache... namely '\/'\nI added tmp debug at \/storage\/www\/frameworks\/zendframework\/library\/Zend\/Cache\/Backend\/File.php\nLine 155: \necho \"DIR TO WRITE CACHE TO:\" . $value . \"\\n\";\n\nSince I didn't see configuration for this in TestConfiguration.php   and I execute everything with user owning the zendframework dir I report this issue.\n\nSeems first fiew cases use '\/tmp' ...rest use  '\/'\n\njmut@dexter:\/storage\/www\/frameworks\/zendframework\/tests$ php Zend\/Cache\/AllTests.php\nPHPUnit 3.2.11 by Sebastian Bergmann.\n\nDIR TO WRITE CACHE TO:\/tmp\/\nDIR TO WRITE CACHE TO:\/tmp\/\nDIR TO WRITE CACHE TO:\/\netc etc\n.....\nE..............................................SSS 120 \/ 121\nS\n\nTime: 0 seconds\n\nThere were 30 errors:\n\n1) testConstructorCorrectCall(Zend_Cache_FileBackendTest)\nZend_Cache_Exception: cache_dir is not writable\n\/storage\/www\/frameworks\/zendframework\/library\/Zend\/Cache\/Backend\/File.php:160\n\/storage\/www\/frameworks\/zendframework\/library\/Zend\/Cache\/Backend\/File.php:128\n\/storage\/www\/frameworks\/zendframework\/tests\/Zend\/Cache\/FileBackendTest.php:49\n\/storage\/www\/frameworks\/zendframework\/tests\/Zend\/Cache\/AllTests.php:56\n\/storage\/www\/frameworks\/zendframework\/tests\/Zend\/Cache\/AllTests.php:150\n..................\nFAILURES!\nTests: 121, Errors: 30, Skipped: 4.\n\n\n\nRUNNING SYSTEM:\n#Kernel: 2.6.22.1\n#PHP 5.2.5 (cli) (built: Nov 10 2007 14:12:24)\nwith Xdebug v2.0.2, Copyright (c) 2002-2007, by Derick Rethans\n#Using ZF: rev 7623\n#PHPUnit 3.2.11\n#Slackware current\n#System:\n.\/configure --prefix=\/usr --enable-force-cgi-redirect --enable-fastcgi --enable-pcntl --enable-readline --enable-sigchild --prefix=\/usr --sysconfdir=\/etc --disable-safe-mode --enable-apc --enable-apc-mmap --enable-memory-limit --enable-suhosin --disable-magic-quotes --enable-zend-multibyte --enable-mbregex --enable-tokenizer=shared --with-config-file-scan-dir=\/etc\/php --with-config-file-path=\/etc\/httpd --with-mod_charset --with-layout=PHP --enable-sigchild --enable-xml --with-libxml-dir=\/usr --enable-simplexml --enable-spl --enable-filter --disable-debug --with-openssl=shared --with-pcre-regex=\/usr --with-zlib=shared,\/usr --enable-bcmath=shared --with-bz2=shared,\/usr --enable-calendar=shared --enable-ctype=shared --with-curl=shared --with-curlwrappers --enable-dba=shared --with-gdbm=\/usr --with-db4=\/usr --enable-dbase=shared --enable-exif=shared --enable-ftp=shared --with-gd=shared --with-jpeg-dir=\/usr --with-png-dir=\/usr --with-zlib-dir=\/usr --with-xpm-dir=\/usr --with-freetype-dir=\/usr --with-t1lib=\/usr --enable-gd-native-ttf --enable-gd-jis-conv --with-gettext=shared,\/usr --with-gmp=shared,\/usr --with-iconv=shared --with-imap-ssl=\/usr --with-imap=\/usr\/local\/lib\/c-client --with-ldap=shared --enable-mbstring=shared --with-hash --with-mhash=shared,\/usr --with-mysql=shared,\/usr --with-mysqli=shared,\/usr\/bin\/mysql_config --enable-pdo=shared --with-pdo-mysql=shared,\/usr --with-pdo-sqlite=shared --with-pspell=shared,\/usr --with-mm=\/usr --enable-shmop=shared --with-snmp=shared,\/usr --enable-soap=shared --enable-sockets --with-sqlite=shared --enable-sqlite-utf8 --with-regex=php --enable-sysvmsg --enable-sysvsem --enable-sysvshm --enable-wddx=shared --with-xsl=shared,\/usr --enable-zip=shared --with-tsrm-pthreads --enable-shared=yes --enable-static=no --with-gnu-ld --with-pic --build=i486-slackware-linux"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/6",
                "name": "N\/A"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2493\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/6",
                "name": "Closed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=fab",
                "name": "fab",
                "displayName": "Fabien MARTY",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10028",
                    "id": 10028,
                    "name": "Zend_Cache",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/18607",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=fab",
                        "name": "fab",
                        "displayName": "Fabien MARTY",
                        "active": true
                    },
                    "body": "I can't reproduce this (which version of ZF do you use ?)\n\nin trunk, cache_dir is computed by :\n\n<code>\n$this->_root = dirname(__FILE__);\n$this->_root . DIRECTORY_SEPARATOR . 'zend_cache_tmp_dir';\n<code>",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=fab",
                        "name": "fab",
                        "displayName": "Fabien MARTY",
                        "active": true
                    },
                    "created": "2008-01-26T07:09:15.000+0000",
                    "updated": "2008-01-26T07:09:15.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/18608",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jmut",
                        "name": "jmut",
                        "displayName": "Julian Davchev",
                        "active": true
                    },
                    "body": "Hi,\nI mentioned that I used ZF rev 7623\nNo I updated to 7644 but that matters not.\nMade some debugging and found the problem.\nWill take Zend_Cache_FileBackendTest as example, I guess is the same for the rest.\n\nIn one word, problem is directory is set \n{code}\n        $this->_instance = new Zend_Cache_Backend_File(array(\n            'cache_dir' => $this->_cache_dir,\n        ));  \n{code}\n\nbefore mkdir call is made   (put in other way parent::setUp($notag);  is called last at Zend_Cache_FileBackendTest::setUp())\n\n=========\n\nSo as result .... In Zend\/Cache\/Backend\/File::setCacheDir()\nFollowing snippet will fail as by the time this is executed the $value (hence the directory ....zend_cache_tmp_dir is not existing yet) And it trunkates it to \/   and then the following check is_writable fails... (trying to write to '\/') dir.\n{code}\n        if ($trailingSeparator) {\n            \/\/ add a trailing DIRECTORY_SEPARATOR if necessary\n            $value = rtrim(realpath($value), '\\\\\/') . DIRECTORY_SEPARATOR;\n        }\n{code}\n\n\nOne possible fix is to move @mkdir($this->getTmpDir());    from Zend_Cache_CommonBackendTest at top of setup() on Zend_Cache_FileBackendTest  but that is kind of clumsy. I am sure you'll find better way.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jmut",
                        "name": "jmut",
                        "displayName": "Julian Davchev",
                        "active": true
                    },
                    "created": "2008-01-26T08:09:22.000+0000",
                    "updated": "2008-01-26T08:09:22.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/18609",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jmut",
                        "name": "jmut",
                        "displayName": "Julian Davchev",
                        "active": true
                    },
                    "body": "Here example what happens. Just dir is not created by thte time of settingCacheDir\n{code}\n<?php\n\n\/\/non existing dir\n$value = '\/storage\/www\/frameworks\/zendframework\/tests\/Zend\/Cache\/zend_cache_tmp_dir\/';\n$value = rtrim(realpath($value), '\\\\\/') . DIRECTORY_SEPARATOR;\necho \"Result non existing dir: \" . $value  . \"\\n\";\n\/\/existing dir\n$value = '\/storage\/www\/frameworks\/zendframework\/tests\/Zend\/Cache\/';\n$value = rtrim(realpath($value), '\\\\\/') . DIRECTORY_SEPARATOR;\necho \"Result existing dir: \" . $value  . \"\\n\";\n?>\n\/\/output\n\/\/Result non existing dir: \/\n\/\/Result existing dir: \/storage\/www\/frameworks\/zendframework\/tests\/Zend\/Cache\/\n\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jmut",
                        "name": "jmut",
                        "displayName": "Julian Davchev",
                        "active": true
                    },
                    "created": "2008-01-26T08:17:09.000+0000",
                    "updated": "2008-01-26T08:17:09.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/18684",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=fab",
                        "name": "fab",
                        "displayName": "Fabien MARTY",
                        "active": true
                    },
                    "body": "fixed in SVN trunk, many thanks ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=fab",
                        "name": "fab",
                        "displayName": "Fabien MARTY",
                        "active": true
                    },
                    "created": "2008-01-29T15:21:48.000+0000",
                    "updated": "2008-01-29T15:21:48.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/27410",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "Bookkeeping. Closing and assigning all old unassigned issues. The only unassigned issues should be new and unreviewed.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2008-12-17T13:38:18.000+0000",
                    "updated": "2008-12-17T13:38:18.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2493\/transitions"
}