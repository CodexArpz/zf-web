{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8140",
    "key": "ZF-8140",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Form_Element_Captcha: add static variant of addPrefixPath"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8140\/votes",
                "votes": 5,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=erwind",
                "name": "erwind",
                "displayName": "Erwin Derksen",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-10-24T08:40:02.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-02-17T20:02:39.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I wanted to use the securimage captcha module in combination with the Zend framework. So I implemented a class that extends Zend_Captcha_Base. However, if I wan to use this captcha adapter in a form element I have to write some pretty awkward code:\r\n\r\n{code}\r\n\/\/ somewhere in the init() of a form\r\n$this->addElement('captcha', 'code', array(\r\n\t'label'      => 'Welke code staat hier?',\r\n\t'required'   => true,\r\n\t'autocomplete' => 'off',\r\n\t'captcha'    => 'image',\r\n\t'class'      => 'newline code',\r\n));\r\n$element = $this->getElement('code');\r\n$element\r\n\t->addPrefixPath('My_Captcha', 'My\/Captcha\/', 'captcha')\r\n\t->setCaptcha('Securimage')\r\n\t->clearValidators()\r\n\t->addValidator($element->getCaptcha(), true);\r\n{code}\r\n\r\nThat is:\r\n* I create a captcha form element using a standard captcha as provided by the framework itself\r\n* Now that the element is created, I can:\r\n** call the addPrefixPath method\r\n** change the captcha adapter\r\n** clear validators set in the constructor of the form element\r\n** add a validator for the newly set captcha adapter\r\n\r\nWhy is this awkward:\r\n* On creating the element, I must pass in an adapter, or the constructor will fail\r\n* I can only use the standard adapters, as I cannot call the addPrefixPath method before calling the constructor (obviously).\r\n* So an instance of a captcha adapter is created that I won't use anyway, and is registered as a validator for the element.\r\n* Only then I can create an instance of the requested captcha adapter type.\r\n* But now I must manually delete the already created validator and add one myself.\r\n\r\nIt took me a while to find this out, because I think this behavior is:\r\n* badly documented\r\n* not logical\r\n\r\nTo improve the usability of the captcha form element it would be nice if the addPrefixPath could be called before the captcha adapter instance is created.\r\n\r\nThe reasons why a captcha adapter must be passed in to the constructor are discussed by mr Matthew Weier O'Phinney somewhere on Nabble (can't find the link at this moment, but have seen it before) and seem correct.\r\n\r\nSolutions I can think of:\r\n* make addPrefixPath static\r\n* add a static variant of addPrefixPath besides the instance variant\r\n* have the prefix path be configurable via the options array passed in to the constructor\r\n\r\nNote: Looking at the code of the plugin loader, I got the impression that a solution could be found\/created there as well (lots of statics over there). However, I did not manage to derive at a solution using the current code for the plugin loader."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8140\/watchers",
                "isWatching": false,
                "watchCount": 5
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10361",
                    "id": 10361,
                    "description": "Mini Release",
                    "name": "1.9.2",
                    "userReleaseDate": "25\/Aug\/09",
                    "archived": false,
                    "releaseDate": "2009-08-25",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10029",
                    "id": 10029,
                    "name": "Zend_Form",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36516",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=protezis",
                        "name": "protezis",
                        "displayName": "protezis",
                        "active": false
                    },
                    "body": "I ran into this problem too.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=protezis",
                        "name": "protezis",
                        "displayName": "protezis",
                        "active": false
                    },
                    "created": "2009-11-25T23:46:56.000+0000",
                    "updated": "2009-11-25T23:46:56.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38773",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=moe",
                        "name": "moe",
                        "displayName": "Moe",
                        "active": true
                    },
                    "body": "I also wrote a custom captcha adapter and had this problem as well. It really is very unlogical and hard to figure it out, just as the poster describes. A fix would be appreciated.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=moe",
                        "name": "moe",
                        "displayName": "Moe",
                        "active": true
                    },
                    "created": "2010-02-26T07:22:34.000+0000",
                    "updated": "2010-02-26T07:22:34.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44451",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=kelmadics",
                        "name": "kelmadics",
                        "displayName": "Franz de Leon",
                        "active": true
                    },
                    "body": "Ohh my, I've at this same issue right now!!! I've been spending hours trying to figure why i cant load my custom adapter to the captcha element. It seems like the addPrefixPath is almost useless here and is not documented properly.\r\n\r\nPlease fix",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=kelmadics",
                        "name": "kelmadics",
                        "displayName": "Franz de Leon",
                        "active": true
                    },
                    "created": "2011-02-17T20:02:39.000+0000",
                    "updated": "2011-02-17T20:02:39.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8140\/transitions"
}