{
    "expand": "html",
    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-953",
    "key": "ZF-953",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Improve quoting of schema.table and table.column identifiers"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-953\/votes",
                "votes": 1,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/version\/10022",
                    "id": 10022,
                    "description": "Beta Release; all components feature complete for 1.0",
                    "name": "0.9.0",
                    "userReleaseDate": "17\/Mar\/07",
                    "archived": true,
                    "releaseDate": "2007-03-17",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2007-03-13T15:30:02.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bmonkman",
                "name": "bmonkman",
                "displayName": "Bill Monkman",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2007-02-22T19:39:19.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2007-07-05T14:43:51.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "The changes made in ZF-204 and released in Zend 0.8 introduced a bug where all queries using database schemas in dot notation will fail.\n\nFor example, this query would work fine in 0.7 but produce an error in 0.8:\n\n{code}\n$select->from('some_schema.some_table', '*');\n{code}\n\nIn older versions, where the table would have been represented like this:\n\n{code}\nSELECT FROM some_schema.some_table\n{code}\n\nit is now represented like this:\n\n{code}\nSELECT FROM \"some_schema.some_table\" some_schema.some_table\n{code}\n\nWhich is a problem for two reasons. (I am using Postgres, but I'm assuming this will also be problematic with other databases)\n\nFirstly, having dot notation in the alias is not allowed. \nTo fix this I extended Zend_Db_Select::_join so that if the table supplied is not an array, it is first converted to an array with the correlation field having periods replaced with underscores.\n\nSecondly, Zend_Db_Adapter_Abstract::quoteIdentifier simply adds quotes around the given identifier, which breaks dot notation.\nInstead of \"some_schema.some_table\" it must be \"some_schema\".\"some_table\"\nTo fix this, I extended quoteIdentifier() so that it first splits the identifier on periods, then quotes them and re-joins them.\n\nThese fixes are fine for me as a stopgap, but I don't know if they are feasible for you, as I haven't considered the broader implications.\n\n\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-953\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                "name": "bkarwin",
                "displayName": "Bill Karwin",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/attachment\/10290",
                    "filename": "zend-db-qualified-identifiers.patch",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=jollytoad",
                        "name": "jollytoad",
                        "displayName": "Mark Gibson",
                        "active": true
                    },
                    "created": "2007-03-01T05:29:35.000+0000",
                    "size": 5268,
                    "mimeType": "text\/plain",
                    "content": "http:\/\/framework.zend.com\/issues\/secure\/attachment\/10290\/zend-db-qualified-identifiers.patch"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/version\/10021",
                    "id": 10021,
                    "description": "Preview release; DB, Filter, Log",
                    "name": "0.8.0",
                    "userReleaseDate": "21\/Feb\/07",
                    "archived": true,
                    "releaseDate": "2007-02-21",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/component\/10132",
                    "id": 10132,
                    "name": "Zend_Db_Select",
                    "description": "OO interface to building a SELECT SQL query.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12965",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "Assign to Bill Karwin.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2007-02-25T17:08:14.000+0000",
                    "updated": "2007-02-25T17:08:14.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12980",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=jollytoad",
                        "name": "jollytoad",
                        "displayName": "Mark Gibson",
                        "active": true
                    },
                    "body": "Ah, I just found this after also reporting the issue on the original ZF-204.\nYou may want to check out the additional comments I've left there.\nSorry!",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=jollytoad",
                        "name": "jollytoad",
                        "displayName": "Mark Gibson",
                        "active": true
                    },
                    "created": "2007-02-26T10:09:26.000+0000",
                    "updated": "2007-02-26T10:09:26.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/13063",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=jollytoad",
                        "name": "jollytoad",
                        "displayName": "Mark Gibson",
                        "active": true
                    },
                    "body": "Here is a patch that adds additional behaviour to Zend_Db_Adapter_Abstract::quoteIdentifier() to solve the qualified identifiers issues, ie. 'schema.table' or 'table.column' or even 'database.schema.table'!\n\nIndividual identifier segments, separated by a dots, are quoted when the $qualified argument is set to true. Example:\n\n$adapter->quoteIdentifier('schema.table')\nreturns: \"schema.table\"\n\n$adapter->quoteIdentifier('schema.table', true)\nreturns: \"schema\".\"table\"\n\nI've also adapted Zend_Db_Select to use this mode for table names,\nand also switched the associative array (tableName => correlationName)\nto (correlationName => tableName).\n\n(This was originally posted on ZF-204, but that issue was closed, so I thought\nit more appropriate to post it here, and explain the patch better)\n",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=jollytoad",
                        "name": "jollytoad",
                        "displayName": "Mark Gibson",
                        "active": true
                    },
                    "created": "2007-03-01T05:29:35.000+0000",
                    "updated": "2007-03-01T05:29:35.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/13300",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "This issue is resolved as of revision 3795.\n\nIdentifiers that contain a dot (\".\") character are automatically split on the dot(s), and each piece quoted separately.  Thus identifiers support the \"schema\".\"table\" or \"table\".\"column\" syntax.\n\nIf you have a database design that has table names or column names containing a dot character, this should be a very uncommon case, and it is not recommended.  But you can work around it by using Zend_Db_Expr and quote the identifier yourself.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2007-03-13T15:30:02.000+0000",
                    "updated": "2007-03-13T15:30:02.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/13301",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "Reformat issue.\nChange summary.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2007-03-13T15:31:26.000+0000",
                    "updated": "2007-03-13T15:31:26.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-953\/transitions"
}