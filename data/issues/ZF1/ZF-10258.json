{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10258",
    "key": "ZF-10258",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "json_encode($array) and $this->_helper->json($array) encode french charaset to NULL values"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10258\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2010-11-18T03:32:20.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=christiand",
                "name": "christiand",
                "displayName": "Christian Dub\u00e9",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-08-03T08:04:26.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-01-21T04:50:19.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Consider this action in a controler\r\n\r\n{code}\r\npublic function qryemailbookAction()\r\n{\r\n\t\/\/if ($this->getRequest()->isXmlHttpRequest()) {\r\n\t\t$param = $this->getRequest()->getParam('query');\r\n\r\n\t\t$usr = new Model_DbTable_User();\r\n\t\t$result = $usr->queryEmailBook($query);\r\n\t\tZend_Debug::dump($result); \/\/ dumping PHP array, result from a Zend_Db query\r\n\t\t\r\n\t\t$test = json_encode($result); \/\/ encoding PHP array\r\n\t\tZend_Debug::dump($test); \/\/ dumping encoded result\r\n\t\t\/\/ $this->_helper->json($result);\r\n\t\/\/}\r\n\t$this->_helper->layout->disableLayout();\r\n\t$this->_helper->viewRenderer->setNoRender();\r\n}\r\n{code}\r\n\r\nit will output this: \r\n\r\n{code}\r\narray(1) {\r\n  [0] => array(2) {\r\n    [\"USRNAM\"] => string(14) \"Andr\u00e9 Baker\"\r\n    [\"USREML\"] => string(20) \"abaker@someisp.com\"\r\n  }\r\n}\r\n\r\nstring(49) \"[{\"USRNAM\":null,\"USREML\":\"abaker@someisp.com\"}]\"\r\n{code}\r\n\r\nthe json helper output the same thing"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/1",
                "name": "Blocker"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10258\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dragonbe",
                "name": "dragonbe",
                "displayName": "Michelangelo van Dam",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10480",
                    "id": 10480,
                    "description": "Mini Release",
                    "name": "1.10.7",
                    "userReleaseDate": "28\/Jul\/10",
                    "archived": false,
                    "releaseDate": "2010-07-28",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10016",
                    "id": 10016,
                    "name": "Zend_Json",
                    "description": "serializes native PHP to JSON and decodes JSON to native PHP",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/41962",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=pimlock",
                        "name": "pimlock",
                        "displayName": "Piotr Mlocek",
                        "active": true
                    },
                    "body": "The question here is what encoding are you using in your database (and also what encoding are you using for connection to database, if you are using MySQL, you can check here [http:\/\/dev.mysql.com\/doc\/refman\/5.0\/en\/charset-connection.html]).\r\nIn {{json_encode}} function manual [http:\/\/php.net\/manual\/en\/function.json-encode.php] it's stated that \r\nbq. This function only works with UTF-8 encoded data.\r\n(section *Parameters* -> _value_).\r\n\r\nSo {{null}} is result of converting text, which is not in UTF-8 encoding to json.\r\nI've tested it and it works correctly with UTF-8.\r\n{code}\r\n$text = \"Andr\u00e9 Baker\";\r\n$text = iconv('XXXX', 'UTF-8', $text);\r\n\r\n$test = array(\"USRNAM\" => $text);\r\nvar_dump(json_encode($test));\r\n{code}\r\nWhere {{XXXX}} is encoding you are using (it can be e.g. 'ISO-8859-1'). The output now is correct\r\n{code}\r\nstring(29) \"{\"USRNAM\":\"Andr\\u00e9 Baker\"}\"\r\n{code}\r\nAs you can see, character {{\u00e9}} is encoded as {{\\u00e9}}.\r\n\r\nSo it's not ZF bug in my opinion.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=pimlock",
                        "name": "pimlock",
                        "displayName": "Piotr Mlocek",
                        "active": true
                    },
                    "created": "2010-08-12T08:07:57.000+0000",
                    "updated": "2010-08-12T08:10:38.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43064",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dragonbe",
                        "name": "dragonbe",
                        "displayName": "Michelangelo van Dam",
                        "active": true
                    },
                    "body": "It's a limitation of the PHP function json_encode and requires UTF-8 character sets. Maybe a point to explicitly mention this in the documents, but not a requirement.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dragonbe",
                        "name": "dragonbe",
                        "displayName": "Michelangelo van Dam",
                        "active": true
                    },
                    "created": "2010-11-18T03:32:21.000+0000",
                    "updated": "2010-11-18T03:32:21.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44097",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dgasparri",
                        "name": "dgasparri",
                        "displayName": "Duccio Gasparri",
                        "active": true
                    },
                    "body": "Maybe it will help someone. If text is not valid UTF-8, Zend_Json will return null with no warning issued or explanation given. If you get null results, first check that the input text is indeed valid UTF-8 (and don't trust mb_detect_encoding!)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dgasparri",
                        "name": "dgasparri",
                        "displayName": "Duccio Gasparri",
                        "active": true
                    },
                    "created": "2011-01-21T04:50:12.000+0000",
                    "updated": "2011-01-21T04:50:12.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10258\/transitions"
}