{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7951",
    "key": "ZF-7951",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Add allow bootstrap dependent resources"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/2",
                "name": "New Feature",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7951\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2012-05-29T13:00:14.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=kandy",
                "name": "kandy",
                "displayName": "Kasian Andrii",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-09-24T08:00:58.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-07-28T21:21:16.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Add allow bootstrap dependent resources\nin config \nresources.{resourcename}.dependencies[] = Db\nresources.{resourcename}.dependencies[] = FrontController\nor\n\n{code}\nclass System_Application_Resource_Modules extends Zend_Application_Resource_ResourceAbstract\n{\n\n\tprotected $_dependencies = array('FrontController');\n{code}\n\n{code}\n\/**\n * Class for bootstrap dependent resources\n *\n * @author Andrii Kasian <to.kandy@gmail.com>\n * @package system.application.resource\n *\/\nabstract class System_Application_Resource_ResourceAbstract extends Zend_Application_Resource_ResourceAbstract\n{\n\t * List of dependent resources\n\tprotected $_dependencies = array();\n\n\t * Set list of dependent resources\n\tpublic function setDependencies($dependencies)\n\t{\n\t\t$this->_dependencies =$this->mergeOptions($this->_dependencies, (array) $dependencies);\n\t}\n\n\t\/**\n\t * Get list of dependent resources\n\t * @return array\n\t *\/\n\tpublic function getDependencies()\n\t{\n\t\treturn $this->_dependencies;\n\t}\n\n\n\t\/**\n\t * Add dependent resource\n\t * @param string $dependency\n\t *\/\n\tpublic function addDependency($dependency)\n\t{\n\t\t$this->_dependencies[] = $dependency;\n\t}\n\n\t\/**\n\t * Clear dependent resource\n\t * @param string $dependency\n\t *\/\n\tpublic function clearDependencis($dependency)\n\t{\n\t\t$this->_dependencies = array();\n\t}\n\n\t * Bootstrap dependent resources\n\tpublic function bootstrapDependencies()\n\t{\n\t\tforeach ($this->getDependencies() as $dependency){\n\t\t\t$this->getBootstrap()->bootstrap($dependency);\n\t\t}\n\t}\n\n\tpublic function init()\n\t{\n\t\t$this->bootstrapDependencies();\n\t}\n}\n{code}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7951\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/6",
                "name": "Closed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10390",
                    "id": 10390,
                    "name": "Zend_Application",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34881",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "body": "Could you maybe explain the idea of this? What does it try to accomplish that cannot be done with zend_app already?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "created": "2009-09-24T17:07:15.000+0000",
                    "updated": "2009-09-24T17:07:15.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34915",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=kandy",
                        "name": "kandy",
                        "displayName": "Kasian Andrii",
                        "active": true
                    },
                    "body": "{quote}Zend_Application provides a bootstrapping facility for applications which provides reusable resources, common- and module-based bootstrap classes and dependency checking.{quote}\nIf resource a depend b, and b depend c then I must first write first c, then b and a. \nIt's simple if  dependence static ( in code  $this->getBootstrap()->bootstrap('Dependet resource')), but if dependencies dynamic it's can lead to errors.\n\nFor example: \nI have load acl rules. \nIn config  I write:\n{code}\nresource.acl.adapter = Config\nresource.db.adapter = Pdo_Mysql\n{code}\nThen i have load acl from database\nI change adapter, set to db  \"resource.acl.adapter = Db\" and get error. I need write \"resource.db.adapter = Pdo_Mysql\" before \"resource.acl.adapter\"\nIt is not hard, but program can do better :)  \nExample:\nI write\n{code}\nresource.acl.adapter = Db\nresource.acl.dependencis[] = Db\nresource.db.adapter = Pdo_Mysql\n{code}\nAnd all is beautiful  :))\n\nPS: SORRY, for my bad English\n\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=kandy",
                        "name": "kandy",
                        "displayName": "Kasian Andrii",
                        "active": true
                    },
                    "created": "2009-09-25T12:32:15.000+0000",
                    "updated": "2009-09-25T12:32:15.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34916",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dasprid",
                        "name": "dasprid",
                        "displayName": "Ben Scholzen",
                        "active": true
                    },
                    "body": "Ressources can already define depencies by themself",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dasprid",
                        "name": "dasprid",
                        "displayName": "Ben Scholzen",
                        "active": true
                    },
                    "created": "2009-09-25T12:38:03.000+0000",
                    "updated": "2009-09-25T12:38:03.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34917",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "There is already a mechanism for this built into ZF. Instead of being configuration driven, however, we require that the dependency is called as part of the resource. For example, if you write an ACL resource that depends on the DB resource, it might look like this:\n{code}\nclass My_Resource_Acl extends Zend_Application_Resource_ResourceAbstract\n{\n    public function init()\n    {\n        $this->getBootstrap()->bootstrap('db');\n        $db = $this->getBootstrap()->getResource('db');\n        ....\n    }\n}\n{code}\nBasically, calling the bootstrap() method with the name of a resource is how you enforce dependencies. Using configuration seems to me to add some unnecessary and unwanted magic to the situation; the dependencies should be defined at the resource level, not configuration.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2009-09-25T12:49:50.000+0000",
                    "updated": "2009-09-25T12:49:50.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51468",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=albulescu",
                        "name": "albulescu",
                        "displayName": "Albulescu Cosmin",
                        "active": true
                    },
                    "body": "@Ben Scholzen - Yes Ben, resources can already define dependinces, but the Zend_Application_Resource_Session should bootstrap the multidb resource when session database save handler requested. You can make this from the settings ini for eg, but when you should have session first defined and then multidb is not working.\r\n\r\nMaybe a Zend_Application_Resource_ResourceBootstrapper sould fix this.\r\n\r\nCosmin",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=albulescu",
                        "name": "albulescu",
                        "displayName": "Albulescu Cosmin",
                        "active": true
                    },
                    "created": "2012-07-28T21:21:16.000+0000",
                    "updated": "2012-07-28T21:21:16.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7951\/transitions"
}