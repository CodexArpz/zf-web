{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5150",
    "key": "ZF-5150",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "addError() doesn't work as described."
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5150\/votes",
                "votes": 9,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10362",
                    "id": 10362,
                    "description": "Mini Release",
                    "name": "1.9.3",
                    "userReleaseDate": "22\/Sep\/09",
                    "archived": false,
                    "releaseDate": "2009-09-22",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-09-17T13:31:10.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=hasslarp",
                "name": "hasslarp",
                "displayName": "Bj\u00f6rn Rylander",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-12-03T07:23:43.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-02-18T06:05:26.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Zend_Form_Element::addError() has the following description: \"Add an error message and mark element as failed validation\". This implies that Zend_Form_Element::addError() also sets the element to fail validation. The method Zend_Form_Element::addErrorMessage() on the other hand has the following description: \"Add a custom error message to return in the event of failed validation\" Which seems to be a more accurate description of what Zend_Form_Element::addError() actually does.\nOn another note, Zend_Form::addError() has the same description with the word \"element\" in them, which makes the matter even more confusing.\nAlso, Zend_Form_Element::addError() calls Zend_Form_Element::markAsError() which has the following description: \"Mark the element as being in a failed validation state\".\nThis leads me to believe that addError() was meant to actually make validation fail, but that doesn't seem to be the case."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5150\/watchers",
                "isWatching": false,
                "watchCount": 14
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-11088",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11088",
                    "type": {
                        "name": "Related",
                        "direction": "INBOUND",
                        "description": "is related to"
                    }
                },
                {
                    "issueKey": "ZF-5559",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5559",
                    "type": {
                        "name": "Related",
                        "direction": "INBOUND",
                        "description": "is related to"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10260",
                    "id": 10260,
                    "description": "Minor Release",
                    "name": "1.7.0",
                    "userReleaseDate": "17\/Nov\/08",
                    "archived": false,
                    "releaseDate": "2008-11-17",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10029",
                    "id": 10029,
                    "name": "Zend_Form",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29301",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jedcred",
                        "name": "jedcred",
                        "displayName": "Vahe Oughourlian",
                        "active": true
                    },
                    "body": "Does anyone have a workaround for this issue for the present?  The best I could make up was to make isValid in Form check to see if _errorsExist was true; if so, valid is set to false, else _errorsExist set to !valid.  Otherwise there doesn't seem to be a check that would make sure that a user-set error (called by formObject->setError() and ->markAsError()) was noted.  I haven't tested this with \"regular\" use cases, but I don't see why it shouldn't work unless someone sets the error state of the form independently (as we are trying to do).",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jedcred",
                        "name": "jedcred",
                        "displayName": "Vahe Oughourlian",
                        "active": true
                    },
                    "created": "2009-03-05T15:53:58.000+0000",
                    "updated": "2009-03-05T15:53:58.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29304",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "I can't see a failure.\n\naddError: Adds a error message and marks the element as being failed in any case (also when validation would be successfull)\naddErrorMessage: Adds a error message but the element is only being failed when the validation itself fails\nmarkAsError: Marks the element as being failed\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-03-05T22:58:13.000+0000",
                    "updated": "2009-03-05T22:58:13.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29308",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jedcred",
                        "name": "jedcred",
                        "displayName": "Vahe Oughourlian",
                        "active": true
                    },
                    "body": "By my understanding, if a form is marked as failed, it should not be valid i.e. - isValid should return false.  However, it does not; it returns true no matter if it is marked failed or not; only a validator that has failed causes isValid to return false.  Have I misunderstood the the idea of a \"failed\" form as being \"invalid\" as well?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jedcred",
                        "name": "jedcred",
                        "displayName": "Vahe Oughourlian",
                        "active": true
                    },
                    "created": "2009-03-05T23:25:41.000+0000",
                    "updated": "2009-03-05T23:25:41.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29310",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mehaase",
                        "name": "mehaase",
                        "displayName": "Mark Haase",
                        "active": true
                    },
                    "body": "I've been following this ticket for a while for the very same reason.\n\nI'd like to have some way to easily add an error to a form element without having to write a full-blown validator. \"addError\" sounds like it would do exactly that, but apparently that is not the intention. \n\nThe documentation isn't clear enough for me to figure out what, exactly, \"addError\" is supposed to do. Probably because \"failed\" and \"invalid\" could mean the same thing or different things depending on who you ask.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mehaase",
                        "name": "mehaase",
                        "displayName": "Mark Haase",
                        "active": true
                    },
                    "created": "2009-03-06T05:14:38.000+0000",
                    "updated": "2009-03-06T05:14:38.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29316",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jedcred",
                        "name": "jedcred",
                        "displayName": "Vahe Oughourlian",
                        "active": true
                    },
                    "body": "To be honest the discussion is less about addError() than is about isValid.  isValid checks the validators and sets _errorsExists to true or false solely based upon the validators and with no regard to the previous value of _errorsExists.  This causes a problem because, should one have previously set the form as having an error, it is invalidated by isValid.  Even more interesting is that the function isError (which I discovered yesterday, which returns the value of _errorsExists) is rendered impotent by a call to isValid.  This suggests two scenarios.\n\n1. Every form must be validated by a validator only and no application logic.\n\n2. This is a bug.\n\nWhich is it?  If the former, then why offer the ability to set the error state?  Is it an issue of access by validators?  If so, why not set access privileges to such functions as \"protected\", so as to prevent this issue?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jedcred",
                        "name": "jedcred",
                        "displayName": "Vahe Oughourlian",
                        "active": true
                    },
                    "created": "2009-03-06T12:11:47.000+0000",
                    "updated": "2009-03-06T12:11:47.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29321",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "It's a bug, and I will address it for the next release.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2009-03-07T06:48:28.000+0000",
                    "updated": "2009-03-07T06:48:28.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32989",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=trady2000",
                        "name": "trady2000",
                        "displayName": "Carsten Schmitz",
                        "active": true
                    },
                    "body": "Do you know in which version it will be fixed ?\n\nCause the next release at the time of your postings was 1.8.0\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=trady2000",
                        "name": "trady2000",
                        "displayName": "Carsten Schmitz",
                        "active": true
                    },
                    "created": "2009-07-27T12:12:12.000+0000",
                    "updated": "2009-07-27T12:12:12.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33032",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=trady",
                        "name": "trady",
                        "displayName": "Carsten Schmitz",
                        "active": true
                    },
                    "body": "I'm using ZF 1.8.4. Exists there a workaround for this bug ?\nWill this bug exist anymore in ZF 1.9.0 ?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=trady",
                        "name": "trady",
                        "displayName": "Carsten Schmitz",
                        "active": true
                    },
                    "created": "2009-07-29T13:38:10.000+0000",
                    "updated": "2009-07-29T13:38:10.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34554",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Should now be resolved in trunk and 1.9 release branch. isValid() in both Zend_Form and Zend_Form_Element check to see if the element has been manually marked with errors, and, if so, fails validation.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2009-09-17T13:31:09.000+0000",
                    "updated": "2009-09-17T13:31:09.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36444",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=occy",
                        "name": "occy",
                        "displayName": "Grant Ockwell",
                        "active": true
                    },
                    "body": "Hey guys, Im not 100% sure if this has been resolved or maybe I am miss using the addError() method. Basicly, I've just done this as a quick test. It works as expected if you leave both fields blank. If you fill in the bottom field, and leave the top one blank, the message gets displayed. If you fill in both fields, isValid() fails as expected however the message is never displayed on the form?? If i call markAsError after isValid it gets displayed. if i call markAsError() before isValid, this just makes no difference.\r\n\r\nAll i want to be able to do , is add a custom condition, call addError('message') and have that message display on the form? That to me seams like a pretty easy thing to do but I just cant get it to work. \r\n\r\nI just figure if i call addError, isValid will fail, and the message will be displayed? Its just odd, the custom message only gets displayed if some other kind of validation fails like the required 2nd field??\r\n\r\nAny Ideas or work arounds would be great?\r\n\r\n\r\n    public function testAction() \r\n    {\r\n    \t$fld = new Zend_Form_Element_Text('bork');\r\n    \t$fld->setLabel('Test Field');\r\n    \t$fld->setRequired(true);\r\n    \t\r\n    \t$fld1 = new Zend_Form_Element_Text('zoot');\r\n    \t$fld1->setLabel('Another Field');\r\n    \t$fld1->setRequired(true);\r\n    \t\r\n    \t$form = new Zend_Form();\r\n    \t$form->addElements(array($fld, $fld1, new Zend_Form_Element_Submit('break me')));\r\n    \t    \t\r\n    \tif ($this->_request->isPost()) {\r\n    \t\t\r\n\t    \t$fld->addError('This should be Displayed!!');\r\n\t    \t\r\n\t    \t\r\n    \t\tif ($form->isValid($this->_request->getParams())) {\r\n    \t\t\techo 'this is ok';\r\n    \t\t\tdie;\r\n    \t\t}\r\n    \t\t\r\n    \t\t\/\/ You have to do this or the message wont display!!!!   \r\n    \t\t\/\/$fld->markAsError();\r\n    \t}\r\n    \t\r\n    \t\r\n    \t$this->view->form = $form;\r\n    }\r\n\r\n\r\nThanks Guys",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=occy",
                        "name": "occy",
                        "displayName": "Grant Ockwell",
                        "active": true
                    },
                    "created": "2009-11-23T15:36:46.000+0000",
                    "updated": "2009-11-23T15:36:46.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36445",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=occy",
                        "name": "occy",
                        "displayName": "Grant Ockwell",
                        "active": true
                    },
                    "body": "Hey guys, By overriding the isValid method I can call parent::isValid($data) and then do any custom checks. Any calls to addError() after the parent::isValid actualy makes the form display the error. Still not sure if the above code i posted is a bug or desired?\r\n\r\n        public function isValid($data) \r\n\t{\r\n\t\t$valid = parent::isValid($data);\r\n\t\t\r\n\t\t\/\/ do some custom validation, at least these messages get displayed on the form now.\r\n\t\tif (true) {\r\n\t\t\t$this->getElement('bork')->addError('Monkey Business');\r\n\t\t\t$valid = false;\r\n\t\t}\r\n\t\t\r\n\t\treturn $valid;\r\n\t}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=occy",
                        "name": "occy",
                        "displayName": "Grant Ockwell",
                        "active": true
                    },
                    "created": "2009-11-23T16:06:54.000+0000",
                    "updated": "2009-11-23T16:06:54.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5150\/transitions"
}