{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6506",
    "key": "ZF-6506",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "No mention of isValid context variable in new docs"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/8",
                "name": "Docs:  Problem",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6506\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/2",
                "name": "Won't Fix"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10320",
                    "id": 10320,
                    "description": "Minor Release",
                    "name": "1.9.0",
                    "userReleaseDate": "31\/Jul\/09",
                    "archived": false,
                    "releaseDate": "2009-07-31",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-05-28T10:10:31.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lightflowmark",
                "name": "lightflowmark",
                "displayName": "Mark",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-05-03T11:02:44.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-07-30T13:31:19.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I'm sure there used to be an example of validating that two password fields matched in the docs for Zend_Validate.\n\nIn any event, there is currently no mention at all of the optional second 'context' parameter to isValid().\n\nThis is and will cause problems for new users, as validating fields against each other is a basic requirement.\n\nApologies if this is still here and I've somehow missed it, I've looked twice!\nCheers,\nMark"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6506\/watchers",
                "isWatching": false,
                "watchCount": 3
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "customfield_10000": {
            "name": "Language",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/customFieldOption\/10000",
                "value": "English"
            }
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-7422",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7422",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10241",
                    "id": 10241,
                    "description": "Minor Release",
                    "name": "1.8.0",
                    "userReleaseDate": "30\/Apr\/09",
                    "archived": false,
                    "releaseDate": "2009-04-30",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10140",
                    "id": 10140,
                    "name": "Zend_Validate",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30611",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Can you please explane what you are speaking of ?\n\nZend_Validate->isValid() defines only ONE parameter.\nThere is no additional context parameter within Zend_Validate.\n\nMaybe you've mixed this with a custom class of your own ?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-05-03T11:08:55.000+0000",
                    "updated": "2009-05-03T11:08:55.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30612",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lightflowmark",
                        "name": "lightflowmark",
                        "displayName": "Mark",
                        "active": true
                    },
                    "body": "Perhaps I'm confused about the line between the validation in Zend_Form and Zend_Validate.\n\nThe docs I was thinking of are actually at \nhttp:\/\/framework.zend.com\/manual\/en\/zend.form.elements.html#zend.form.elements.validators\nSee the Note on \"Validation Context\" about 1\/3 of the way down.\n\nNot sure if this should be included in the Zend_Validate docs or not; apologies if not.\n\nM",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lightflowmark",
                        "name": "lightflowmark",
                        "displayName": "Mark",
                        "active": true
                    },
                    "created": "2009-05-03T11:18:20.000+0000",
                    "updated": "2009-05-03T11:18:20.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30614",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "As you already noted this is a feature of Zend_Form and not from Zend_Validate.\nIt allows to use self defined validators and attach data from subforms to them.\n\nZend_Validate does not provide context within the default validators.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-05-03T11:31:13.000+0000",
                    "updated": "2009-05-03T11:31:13.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30615",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Closing as non-issue as mentioned feature is a Zend_Form feature and already mentioned there.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-05-03T11:32:57.000+0000",
                    "updated": "2009-05-03T11:32:57.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30616",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "The Zend_Validate docs should also have a note of this, as validating against other items in the data set is a common paradigm.\n\nI'll take care of this update.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2009-05-03T12:36:52.000+0000",
                    "updated": "2009-05-03T12:36:52.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30618",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "I just checked the complete API.\nThere is no single validation class within Zend_Validate which supports context.\n\nLooking at the code within Zend_Form (which calls isValid of the validator with 2 params) I have the feeling that Zend_Form uses a notation which is actually not supported by Zend_Validate.\n\nThis should also be checked as it could be the reason for this confusion.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-05-03T14:41:18.000+0000",
                    "updated": "2009-05-03T14:41:18.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30621",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "There are no validators within Zend_Validate that _need_ a context, but that does not mean that they cannot support it. isValid() simply requires one argument, a value to validate; extending classes may require additional arguments, provided they are marked as optional (i.e., they have a default value). Zend_Form's use of a $context parameter makes use of this -- and it *is* fully tested.\n\nThe documentation I plan to add is to show how patterns of validating against data sets or additional values, as, as noted, it's a common paradigm, and supported by PHP's definitions of interfaces and methods, but not explicitly defined within the component.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2009-05-03T20:04:46.000+0000",
                    "updated": "2009-05-03T20:04:46.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31430",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rokclimb15",
                        "name": "rokclimb15",
                        "displayName": "Brian Morton",
                        "active": true
                    },
                    "body": "I think there is a related issue here.  The example cited by Matt shows the custom validator extending Zend_Validate_Abstract.  Zend_Validate_Abstract implements Zend_Validate_Interface, which defines the isValid method as having only one argument.  Therefore, it is impossible to utilize $context passed from Zend_Form::isValid while taking advantage of the functionality in Zend_Validate_Abstract.  Someone trying to will receive an error message like this:\n\nFatal error: Declaration of Foo_Validate_Widget::isValid() must be compatible with that of Zend_Validate_Interface::isValid()\n\nI think the solution is to add $context to the isValid definition in Zend_Validate_Interface but make it optional for compatibility.  Having access to context from the Zend_Form is very important in my opinion.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rokclimb15",
                        "name": "rokclimb15",
                        "displayName": "Brian Morton",
                        "active": true
                    },
                    "created": "2009-05-28T09:34:44.000+0000",
                    "updated": "2009-05-28T09:34:44.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31431",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lightflowmark",
                        "name": "lightflowmark",
                        "displayName": "Mark",
                        "active": true
                    },
                    "body": "You don't get this error, actually.  \n\nMy understanding is that the Interface defines the minimal set of parameters you have to implement; as long as any additional parameters are declared as optional, you'll be OK.  This is borne out by my own testing - my context-dependent isValid code works fine as long as it's declared as isValid($value,$context = null)\n\nI agree that adding $context in the Interface and Abstract would help to disambiguate, though.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lightflowmark",
                        "name": "lightflowmark",
                        "displayName": "Mark",
                        "active": true
                    },
                    "created": "2009-05-28T10:03:13.000+0000",
                    "updated": "2009-05-28T10:03:13.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31432",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rokclimb15",
                        "name": "rokclimb15",
                        "displayName": "Brian Morton",
                        "active": true
                    },
                    "body": "You're very correct.  I had not thought to try that.\n\nAs you say, I think it would help.  It would also be nice to get those changes into the PHPDoc so it is clear how this works.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rokclimb15",
                        "name": "rokclimb15",
                        "displayName": "Brian Morton",
                        "active": true
                    },
                    "created": "2009-05-28T10:08:21.000+0000",
                    "updated": "2009-05-28T10:08:21.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31433",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Let me clarify.\n\nWhen you have an interface definition as follows:\n{code}\ninterface Validator\n{\n    public function isValid($value);\n}\n{code}\n\nYou can then define a class that implements it that provides *additional* arguments *provided* they are *conditional*. So, for example, the following will *not* work:\n\n{code}\nclass IsNumeric implements Validator\n{\n    public function isValid($value, $strict)\n    {\n        \/\/ ...\n    }\n}\n{code}\n\nBut this will:\n\n{code}\nclass IsNumeric implements Validator\n{\n    public function isValid($value, $strict = false)\n    {\n        \/\/ ...\n    }\n}\n{code}\n\nThis is exactly how the $context parameter is documented -- you indicate a default value, and check for the $context when you do your validations.\n\nWe cannot change the interface at this point because it would be a backwards compatibility break -- anybody who has implemented the current interface to write their own validators would now have broken code. However, if you use the technique above, using a conditional second argument, there are no issues.\n\nI am once again closing this issue. It's already well documented.\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2009-05-28T10:10:13.000+0000",
                    "updated": "2009-05-28T10:10:13.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6506\/transitions"
}