{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9142",
    "key": "ZF-9142",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Validate::is() no longer loads validator"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9142\/votes",
                "votes": 2,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2010-02-19T12:12:56.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dmuir",
                "name": "dmuir",
                "displayName": "David Muir",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-02-11T03:54:01.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-02-19T12:12:56.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "<?php Zend_Validate::is($email, 'EmailAddress'); ?>\r\nresults in:\r\nFatal error: require() [function.require]: Failed opening required 'EmailAddress.php'\r\n\r\nThe culprit is on line 200:\r\nif (!class_exists($className)) {\r\n\r\nIt should be:\r\nif (!class_exists($className, false)) {\r\n\r\notherwise __autoload gets called\r\n\r\nIt worked in previous versions if Zend_Validate was the only namespace available, but the new version tries to load the className without a namespace first."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9142\/watchers",
                "isWatching": false,
                "watchCount": 3
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10360",
                    "id": 10360,
                    "description": "Minor Release",
                    "name": "1.10.0",
                    "userReleaseDate": "27\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-27",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10412",
                    "id": 10412,
                    "description": "Mini Release",
                    "name": "1.10.1",
                    "userReleaseDate": "10\/Feb\/10",
                    "archived": false,
                    "releaseDate": "2010-02-10",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10140",
                    "id": 10140,
                    "name": "Zend_Validate",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38396",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dmuir",
                        "name": "dmuir",
                        "displayName": "David Muir",
                        "active": true
                    },
                    "body": "Removed \"It is not an issue if there is no __autoload function declared or if spl_autoload is used instead.\" as it is not true.\r\nI still get a fatal error even when spl_autoload is used.\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dmuir",
                        "name": "dmuir",
                        "displayName": "David Muir",
                        "active": true
                    },
                    "created": "2010-02-11T04:39:19.000+0000",
                    "updated": "2010-02-11T04:39:19.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38486",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jakemcgraw",
                        "name": "jakemcgraw",
                        "displayName": "Jake McGraw",
                        "active": true
                    },
                    "body": "I can confirm this bug, occurring in ZF 1.10.0",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jakemcgraw",
                        "name": "jakemcgraw",
                        "displayName": "Jake McGraw",
                        "active": true
                    },
                    "created": "2010-02-16T09:57:20.000+0000",
                    "updated": "2010-02-16T09:57:20.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38488",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "This is unlogical.\r\nclass_exists will never throw an fatal error because of \"require()\".\r\nPlease give a complete stacktrace for reproduction.\r\n\r\nWhen your set autoloader does not load the file, then Zend_Loader tries to load it.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2010-02-16T12:17:45.000+0000",
                    "updated": "2010-02-16T12:17:45.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38489",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jakemcgraw",
                        "name": "jakemcgraw",
                        "displayName": "Jake McGraw",
                        "active": true
                    },
                    "body": "[16-Feb-2010 12:37:34] PHP Warning:  include_once(Int.php) [<a href='function.include-once'>function.include-once<\/a>]: failed to open stream: No such file or directory in \/usr\/share\/pear\/\r\nZend\/Loader.php on line 146\r\n[16-Feb-2010 12:37:34] PHP Stack trace:\r\n[16-Feb-2010 12:37:34] PHP   1. {main}() \/data\/sandboxes\/jmcgraw\/stable\/www.foobar.com\/admin\/campaign\/index.php:0\r\n[16-Feb-2010 12:37:34] PHP   2. require() \/data\/sandboxes\/jmcgraw\/stable\/www.foobar.com\/admin\/campaign\/index.php:3\r\n[16-Feb-2010 12:37:34] PHP   3. Zend_Controller_Front->dispatch() \/data\/sandboxes\/jmcgraw\/stable\/includes\/zend_framework_app\/campaign\/bootstrap\/default.php:227\r\n[16-Feb-2010 12:37:34] PHP   4. Zend_Controller_Dispatcher_Standard->dispatch() \/usr\/share\/pear\/Zend\/Controller\/Front.php:954\r\n[16-Feb-2010 12:37:34] PHP   5. Zend_Controller_Action->__construct() \/usr\/share\/pear\/Zend\/Controller\/Dispatcher\/Standard.php:262\r\n[16-Feb-2010 12:37:34] PHP   6. TargetingController->init() \/usr\/share\/pear\/Zend\/Controller\/Action.php:133\r\n[16-Feb-2010 12:37:34] PHP   7. CampaignSandboxController->init() \/data\/sandboxes\/jmcgraw\/stable\/includes\/zend_framework_app\/campaign\/controllers\/TargetingController.php:72\r\n[16-Feb-2010 12:37:34] PHP   8. CampaignController->init() \/data\/sandboxes\/jmcgraw\/stable\/includes\/zend_framework_app\/campaign\/library\/CampaignSandboxController.php:97\r\n[16-Feb-2010 12:37:34] PHP   9. Zend_Validate::is() \/data\/sandboxes\/jmcgraw\/stable\/includes\/zend_framework_app\/campaign\/library\/CampaignController.php:76\r\n[16-Feb-2010 12:37:34] PHP  10. class_exists() \/usr\/share\/pear\/Zend\/Validate.php:200\r\n[16-Feb-2010 12:37:34] PHP  11. Zend_Loader_Autoloader::autoload() \/usr\/share\/pear\/Zend\/Loader\/Autoloader.php:0\r\n[16-Feb-2010 12:37:34] PHP  12. call_user_func() \/usr\/share\/pear\/Zend\/Loader\/Autoloader.php:130\r\n[16-Feb-2010 12:37:34] PHP  13. Zend_Loader_Autoloader->_autoload() \/usr\/share\/pear\/Zend\/Loader\/Autoloader.php:0\r\n[16-Feb-2010 12:37:34] PHP  14. call_user_func() \/usr\/share\/pear\/Zend\/Loader\/Autoloader.php:474\r\n[16-Feb-2010 12:37:34] PHP  15. Zend_Loader::loadClass() \/usr\/share\/pear\/Zend\/Loader\/Autoloader.php:0\r\n[16-Feb-2010 12:37:34] PHP  16. Zend_Loader::loadFile() \/usr\/share\/pear\/Zend\/Loader.php:94\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jakemcgraw",
                        "name": "jakemcgraw",
                        "displayName": "Jake McGraw",
                        "active": true
                    },
                    "created": "2010-02-16T12:32:39.000+0000",
                    "updated": "2010-02-16T12:32:39.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38490",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Additionally wether Zend_Loader nor Zend_Validate are using the method require.\r\n\r\nThe question is what sort of code you integrated on your side which throws an \"require()\" error. ZF itself only uses require_once. You can check this simply by searching for require within Zend_Validate and Zend_Loader",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2010-02-16T12:45:31.000+0000",
                    "updated": "2010-02-16T12:45:31.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38491",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Thank you for the stacktrace.\r\n\r\nThere is one thing which did not happen before 1.10.\r\nUsing \"class_exists()\" should ONLY return a true or false.\r\n\r\nOtherwise this would mean that class_exists() does no longer wook which is itself an failure.\r\n\r\nIt seems that this is a problem of Zend_Loader.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2010-02-16T13:13:38.000+0000",
                    "updated": "2010-02-16T13:13:38.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38492",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=schlimmer",
                        "name": "schlimmer",
                        "displayName": "Johannes Schlimm",
                        "active": true
                    },
                    "body": "As I already discussed with Matthew Weier O'Phinney in ZF-9082: The documentation [http:\/\/framework.zend.com\/manual\/en\/performance.classloading.html], section \"Strip require_once calls with find and sed\" seems to be wrong (regarding ZF 10.0.0 and ZF 10.0.1). Because all occurrences of require_once(\"Zend\/Loader.php\"); are also being commented out. And it seems that's at least one time too much.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=schlimmer",
                        "name": "schlimmer",
                        "displayName": "Johannes Schlimm",
                        "active": true
                    },
                    "created": "2010-02-16T13:14:29.000+0000",
                    "updated": "2010-02-16T13:14:29.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38493",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jakemcgraw",
                        "name": "jakemcgraw",
                        "displayName": "Jake McGraw",
                        "active": true
                    },
                    "body": "Just wanted to let you know, this issue is NOT present in 1.9.7. We rolled back after upgrading using the zfcampus PEAR channel.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jakemcgraw",
                        "name": "jakemcgraw",
                        "displayName": "Jake McGraw",
                        "active": true
                    },
                    "created": "2010-02-16T13:20:12.000+0000",
                    "updated": "2010-02-16T13:20:12.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38494",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=schlimmer",
                        "name": "schlimmer",
                        "displayName": "Johannes Schlimm",
                        "active": true
                    },
                    "body": "Also please have a look at the documentation of class_exists in the PHP manual [http:\/\/www.php.net\/manual\/de\/function.class-exists.php]. As of PHP 5.0.0 it has a second parameter autoload wich defaults to true. If this second parameter isn't explicitly set to false, class_exists will try to load the class, using whatever is defined to (auto)load classes.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=schlimmer",
                        "name": "schlimmer",
                        "displayName": "Johannes Schlimm",
                        "active": true
                    },
                    "created": "2010-02-16T13:21:45.000+0000",
                    "updated": "2010-02-16T13:21:45.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38495",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Stripping require_once is not the case for this issue.\r\n\r\nRegarding the footprint of class_exists: I knew this. The point is that it's intentionally to look if a autoloader is able to load the class. And only when the autoloader fails, THEN Zend_Validate will use it's set namespace directories. This way was also available within 1.9.7 which you mentioned.\r\n\r\nDisallowing the autoloader to search for the class means also that you must change your own code as you must set the namespace manually instead of letting the autoloader doing his work.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2010-02-16T13:51:07.000+0000",
                    "updated": "2010-02-16T13:51:07.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38504",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dmuir",
                        "name": "dmuir",
                        "displayName": "David Muir",
                        "active": true
                    },
                    "body": "The fatal error was because I was using require in my autoloader. Thanks Johannes for pointing me to Matthew's comment in ZF-9082.\r\n\r\n{quote}\r\nThis way was also available within 1.9.7 which you mentioned.\r\n{quote}\r\n\r\nYes, the problem showed up previously if other namespaces were added to Zend_Validate. But now the problem is worse as it shows up every time (unless the non-namespaced validator actually does exist).\r\n\r\n{code}\r\nrequire 'Zend\/Loader\/Autoloader.php';\r\n$autoloader = Zend_Loader_Autoloader::getInstance();\r\n$autoloader->setFallbackAutoloader(true);\r\n\r\necho Zend_Validate::is('1', 'Int');\r\n{code}\r\n\r\nThe solutions are:\r\n\r\nSuppress warnings (which I'd consider to be a bad idea)\r\n{code}\r\n$autoloader->suppressNotFoundWarnings(true);\r\n{code}\r\n\r\nDon't use Zend_Validate::is() and instead use the validation classes directly\r\n{code}\r\n$validate = new Zend_Validate_Int();\r\n$validate->isValid('1');\r\n{code}\r\n\r\nOr specify the namespace explicitly\r\n{code}\r\nZend_Validate::is('1', 'Zend_Validate_Int'));\r\n{code}\r\nKind of defeats the purpose of using Zend_Validate::is() and is, according to you, exactly what you're trying to avoid by having class_exists call the autoloader.\r\n\r\nI don't really see a way around it though.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dmuir",
                        "name": "dmuir",
                        "displayName": "David Muir",
                        "active": true
                    },
                    "created": "2010-02-16T19:13:05.000+0000",
                    "updated": "2010-02-16T19:13:05.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38591",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Fixed with r21097",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2010-02-19T12:12:56.000+0000",
                    "updated": "2010-02-19T12:12:56.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9142\/transitions"
}