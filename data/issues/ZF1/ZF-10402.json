{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10402",
    "key": "ZF-10402",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "URL formation seems to break Zend_Form_Element_Hash"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10402\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2010-09-03T19:12:59.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=stryks",
                "name": "stryks",
                "displayName": "Peter Sharp",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-08-30T06:51:47.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-09-03T19:13:03.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "This may be my implementation, but if I create a basic form with a hash element, I cannot get the form to validate if the URL has a trailing slash.\r\n\r\nprofile\/login works, but profile\/login\/ produces 'tokens do not match' error.\r\n\r\nStumbled across this when using url() action helper to create the form action URL as it (correctly) inserts a trailing slash.  Zend_Navigation controls do not seem to, though I may have overlooked something there.\r\n\r\n\r\nTo Replicate\r\n------------\r\n\r\napplication\\forms\\Test.php\r\n\r\nclass Application_Form_Test extends Zend_Form\r\n{\r\npublic function init()\r\n\r\n{\r\n$this->setMethod('post'); \r\n$this->addElement('text', 'email', array(\r\n'label' => 'Your Email Address:', \r\n'description' => 'Example description for the field', \r\n'attribs' => array('accesskey' => 'E'), \r\n'required' => true, \r\n'AutoInsertNotEmptyValidator' => false, \r\n'filters' => array('StringTrim'), \r\n'decorators' => Custom_Subclass_Decorators::$element,\r\n));\r\n\r\n$this->addElement('hash', 'csrf', array( \r\n'salt' => 'Test',\r\n'ignore' => true,\r\n));\r\n\r\n$this->addElement('submit', 'submit', array(\r\n'required' => false, \r\n'label' => 'Submit', \r\n)); }\r\n}\r\n\r\n\r\napplication\\controllers\\IndexController.php\r\n\r\n*snip*\r\n\r\n    public function testAction()\r\n    {\r\n        $form = new Application_Form_Test();\r\n        $this->view->form = $form;\r\n\r\n       $request = $this->getRequest();\r\n        if($request->isPost()) {\r\n            if ($form->isValid($request->getPost())) {\r\n\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n*snip*\r\n\r\napplication\\views\\scripts\\index\\test.phtml\r\n\r\n<?php echo $this->form;\r\n\r\n\/index\/test works without any issues while \/index\/test\/ cannot be submitted because of unmatched token.\r\n\r\nSomething odd seems to be going on with the session in the latter case, as is the hash is regenerated and stored in the session after rendering the form, but only where that trailing slash is present."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10402\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alab",
                "name": "alab",
                "displayName": "Christian Albrecht",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10480",
                    "id": 10480,
                    "description": "Mini Release",
                    "name": "1.10.7",
                    "userReleaseDate": "28\/Jul\/10",
                    "archived": false,
                    "releaseDate": "2010-07-28",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10029",
                    "id": 10029,
                    "name": "Zend_Form",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/42146",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=stryks",
                        "name": "stryks",
                        "displayName": "Peter Sharp",
                        "active": true
                    },
                    "body": "Attempted to make it a little more readable",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=stryks",
                        "name": "stryks",
                        "displayName": "Peter Sharp",
                        "active": true
                    },
                    "created": "2010-08-30T06:57:21.000+0000",
                    "updated": "2010-08-30T06:57:21.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/42154",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=stryks",
                        "name": "stryks",
                        "displayName": "Peter Sharp",
                        "active": true
                    },
                    "body": "Found the cause.\r\n\r\nMistakenly had the follwing line in my layout file.\r\n\r\n<link rel=\"SHORTCUT ICON\" href=\"favicon.ico\"><\/link>\r\n\r\nBeing a relative link, it was failing to be found causing a 404, but on pages with forms was triggering both the original request and the failed file to be rewritten to index.php, causing a dual page load which was overwriting my session between browser page loads.\r\n\r\nMight be wrong on the why, but commenting out that line fixes it.\r\n\r\nThis issue can therefore be closed, but it might be worth testing to find a definitive cause and perhaps apply a workaround in the .htaccess file if applicable.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=stryks",
                        "name": "stryks",
                        "displayName": "Peter Sharp",
                        "active": true
                    },
                    "created": "2010-09-01T07:37:56.000+0000",
                    "updated": "2010-09-01T07:37:56.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/42180",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=konrness",
                        "name": "konrness",
                        "displayName": "Konr Ness",
                        "active": true
                    },
                    "body": "Closed as Not an Issue",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=konrness",
                        "name": "konrness",
                        "displayName": "Konr Ness",
                        "active": true
                    },
                    "created": "2010-09-03T19:13:01.000+0000",
                    "updated": "2010-09-03T19:13:01.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10402\/transitions"
}