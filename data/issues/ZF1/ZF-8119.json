{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8119",
    "key": "ZF-8119",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Additional dynamic flexibility for Zend_Filter_File_Rename"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/2",
                "name": "New Feature",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8119\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/2",
                "name": "Won't Fix"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2012-11-20T20:52:44.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jazzslider",
                "name": "jazzslider",
                "displayName": "Adam Jensen",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-10-22T07:38:00.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-11-20T20:52:44.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "There seems to have been a lot of forum traffic asking about these kinds of features over the past year, but I didn't find an issue for any of it so I thought I'd go ahead and post...\r\n\r\nOne of the most common needs in file upload forms is the ability to dynamically rename files to match certain conventions.  The current Rename filter is a step in the right direction, but I think there are three specific features missing that would really help make it sing, especially when used in conjunction with the file upload form element (since you typically don't know the name of the uploaded file when you build your form...that information is only available after the form has been submitted, and using it there leads to controller bloat).\r\n\r\n1. It should be possible to tell the filter to preserve the original extension of the file (the reason for this will become clear with the other two features...not too useful on its own).  For example, the code below would turn the uploaded file \"My File.jpg\" into \"renamed-file.jpg\":\r\n\r\n{code}\r\n$form->addElement('file', 'myfile');\r\n$form->myfile->addFilter('Rename', array(\r\n    'preserveExtension' => true,\r\n    'target' => 'renamed-file',\r\n));\r\n{code}\r\n\r\n2. Instead of having to specify an explicit target filename, the filter should have an additional configuration option by which a chain of other string filters can be applied to the source filename (just the filename itself, not the path).  For example, the code below would turn the uploaded file \"My File.jpg\" into \"MyFile.jpg\" (this is where the preserveExtension option becomes important, b\/c otherwise the Alnum filter would get rid of the dot):\r\n\r\n{code}\r\n$form->addElement('file', 'myfile');\r\n$form->myfile->addFilter('Rename', array(\r\n  'preserveExtension' => true,\r\n  'targetFilters' => array(\r\n    'Alnum',\r\n  ),\r\n));\r\n{code}\r\n\r\n3. Finally, it should also be possible to tell the filter to generate a new unique filename if the renamed file already exists (this is sort of an extension to the existing 'overwrite' option).  This would probably work by simply appending a \"-1\" or a \"-2\" to the filename (especially if 'preserveExtension' were true).  In the following example, if the user uploads \"My File.jpg\" but that file already exists, the filter will automatically rename to \"My File-2.jpg\":\r\n\r\n{code}\r\n$form->addElement('file', 'myfile');\r\n$form->myfile->addFilter('Rename', array(\r\n  'preserveExtension' => true,\r\n  'overwrite' => false,\r\n  'forceUnique' => true, \/\/ not really sure of the name of this...\r\n));\r\n{code}\r\n\r\nThese three features would make it extremely easy for form developers to specify the necessary conventions for storing uploaded files without having to do a lot of extra processing work in the controller where the file is received (that seems to be the only answer currently, based on what I've read in the forums).\r\n\r\nIf I can find the time, I'd be happy to submit some patches for this...just a matter of whether I can fit it into my schedule or not :)  In the meantime, what do you think?"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8119\/watchers",
                "isWatching": false,
                "watchCount": 3
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/6",
                "name": "Closed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User"
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/12330",
                    "filename": "trunk.diff",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jazzslider",
                        "name": "jazzslider",
                        "displayName": "Adam Jensen",
                        "active": true
                    },
                    "created": "2009-10-22T19:44:08.000+0000",
                    "size": 17544,
                    "mimeType": "application\/octet-stream",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/12330\/trunk.diff"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10370",
                    "id": 10370,
                    "description": "Mini Release",
                    "name": "1.9.4",
                    "userReleaseDate": "13\/Oct\/09",
                    "archived": false,
                    "releaseDate": "2009-10-13",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10320",
                    "id": 10320,
                    "name": "Zend_File_Transfer",
                    "isAssigneeTypeValid": false
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10013",
                    "id": 10013,
                    "name": "Zend_Filter",
                    "description": "methods for filtering data",
                    "isAssigneeTypeValid": false
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10029",
                    "id": 10029,
                    "name": "Zend_Form",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35466",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jazzslider",
                        "name": "jazzslider",
                        "displayName": "Adam Jensen",
                        "active": true
                    },
                    "body": "This patch addresses feature #1: the \"preserveExtension\" option.  The other two features aren't implemented yet, but I figured I'd submit what I've got so far.\r\n\r\nThe patch is to be applied in the standard trunk, and was taken against revision 18670.\r\n\r\nThanks!\r\nAdam",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jazzslider",
                        "name": "jazzslider",
                        "displayName": "Adam Jensen",
                        "active": true
                    },
                    "created": "2009-10-22T19:44:10.000+0000",
                    "updated": "2009-10-22T19:44:10.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35469",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Thanks for the patch.\r\nStill it will not be applied.\r\n\r\nThe rename filter is actually been reworked. There ARE several other issues which are all based on slightly different ideas. See ZF-4261 or ZF-7805.\r\n\r\nThe API will be changed so it solves all of this problems.\r\nThe idea behind is to tokenize the filename \/ split it in defined parts, and then be able to apply rules on each of this parts.\r\n\r\nRules could be other filters, a regex, a string, another part, or a predefined rule.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-10-22T23:52:13.000+0000",
                    "updated": "2009-10-22T23:52:13.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35476",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jazzslider",
                        "name": "jazzslider",
                        "displayName": "Adam Jensen",
                        "active": true
                    },
                    "body": "Fair enough; I hadn't seen ZF-7805 yet, and it looks like a very flexible solution.\r\n\r\nBased on your comment, however, it sounds as though you or someone else has already started to write the code to make this happen...is that correct?\r\n\r\nI'd love to help, and if ZF-7805 is the intended solution I don't think it would be all that hard to do (just another configuration option called \"callback\" would do it)\u00a0...but if it's already being actively worked on (or if there are other related fixes you have planned that aren't publicly documented), I don't want to duplicate that effort unnecessarily.\r\n\r\nAre there existing patches and\/or commits related to this somewhere else that I haven't seen?  If not, do you think it would be worth my taking a stab at it?  I'd really love to have this functionality available in one of my current projects, even if it doesn't make it into an official release for awhile yet.\r\n\r\nThanks!\r\nAdam",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jazzslider",
                        "name": "jazzslider",
                        "displayName": "Adam Jensen",
                        "active": true
                    },
                    "created": "2009-10-23T04:18:07.000+0000",
                    "updated": "2009-10-23T04:18:07.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/52431",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rob",
                        "name": "rob",
                        "displayName": "Rob Allen",
                        "active": true
                    },
                    "body": "Bulk change of all issues last updated before 1st January 2010 as \"Won't Fix\".\r\n\r\nFeel free to re-open and provide a patch if you want to fix this issue.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rob",
                        "name": "rob",
                        "displayName": "Rob Allen",
                        "active": true
                    },
                    "created": "2012-11-20T20:52:44.000+0000",
                    "updated": "2012-11-20T20:52:44.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8119\/transitions"
}