{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6209",
    "key": "ZF-6209",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Config_Ini ignores first line in .ini file"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6209\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/2",
                "name": "Won't Fix"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-04-05T12:11:37.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frost",
                "name": "frost",
                "displayName": "Frost",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-04-03T14:15:01.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-04-05T12:11:37.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "Zend_Config_Ini",
                "file",
                "first",
                "ignores",
                "ini",
                "line"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "When ini file looks like:\n{quote}\na = b\nc = d\n{quote}\n\nand php code looks like:\n{quote}\n$a = new Zend_Config_Ini\n(\n    APPLICATION_PATH . '\/config\/file.ini'\n);\n\necho $a->a;\n{quote}\n\nnothing is displayed. But when ini file looks like:\n{quote}\n; Foo\na = b\nc = d\n{quote}\n\nabove php code will return:\n{quote}\nb\n{quote}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6209\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/6",
                "name": "Closed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rob",
                "name": "rob",
                "displayName": "Rob Allen",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10300",
                    "id": 10300,
                    "description": "Mini Release",
                    "name": "1.7.8",
                    "userReleaseDate": "30\/Mar\/09",
                    "archived": false,
                    "releaseDate": "2009-03-30",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10010",
                    "id": 10010,
                    "name": "Zend_Config",
                    "description": "property based interface to an array",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29959",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rob",
                        "name": "rob",
                        "displayName": "Rob Allen",
                        "active": true
                    },
                    "body": "I've just tested this and it works for me. \n\nI created this INI file (zf6209.ini) which has two lines in it:\n{{a = b}}\n{{c = d}}\n\nand this test method within the Zend_Config_IniTest class:\n{code}\n    public function testFirstLineOfIniIsLoaded()\n    {\n        $filename = dirname(__FILE__) . '\/_files\/zf6209.ini';\n        $config = new Zend_Config_Ini($filename);\n        $this->assertEquals('b', $config->a);\n    }\n{code}\n\nThis worked as expected.\n\nCan you check this too please?\n\nCan you tell me which line endings you have in your ini file and which PHP version you are using on which OS?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rob",
                        "name": "rob",
                        "displayName": "Rob Allen",
                        "active": true
                    },
                    "created": "2009-04-05T02:26:58.000+0000",
                    "updated": "2009-04-05T02:29:37.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29966",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frost",
                        "name": "frost",
                        "displayName": "Frost",
                        "active": true
                    },
                    "body": "Zend Tests doesn't work for me. I wasted over an hour trying to run it... nevermind.\n\nI prepared\n{code}\nsystem.ini\n{code}\nin UTF-8 on Windows XP using Notepad++. Line endings: [CR][LF].\n\nContent of file.ini:\n{code}\nenvironment = development\ntest = works\n{code}\n\nbootstrap.php:\n{code}\n<?php\n\/\/ \u015bcie\u017cka do aplikacji\ndefined('APPLICATION_PATH')\n    or define('APPLICATION_PATH', dirname(__FILE__));\n\n\/\/ konfiguracje\n$configurations = array\n(\n\t'system',\n\t'application',\n\t'db',\n\t'session',\n);\n\nforeach ($configurations as $configuration)\n{\n\tZend_Registry::set\n\t(\n\t\t'configuration' . ucfirst($configuration),\n\t\tnew Zend_Config_Ini(APPLICATION_PATH . '\/config\/' . $configuration . '.ini')\n\t);\n}\n\n\/* constant test *\/\nif(defined('APPLICATION_ENVIRONMENT'))\n{\n\tdie('Already exists');\n}\n\/* end *\/\n\n\/\/ tryb wy\u015bwietlania strony\ndefined('APPLICATION_ENVIRONMENT')\n    or define('APPLICATION_ENVIRONMENT', Zend_Registry::get('configurationSystem')->get('environment'));\n\n\/* parse_ini_test *\/\n$foo = parse_ini_file (APPLICATION_PATH . '\/config\/system.ini');\n\necho '<pre>';\nprint_r ($foo);\necho '<\/pre>';\n\/* end *\/\n\necho 'Should be \"environment\": '.APPLICATION_ENVIRONMENT.'<br>';\necho 'Should be \"works\": '.Zend_Registry::get('configurationSystem')->get('test');\nexit;\n{code}\n\nWhich displays:\n{code}\nArray\n(\n    [\ufeffenvironment] => development\n    [test] => works\n)\n\nShould be \"environment\":\nShould be \"works\": works\n{code}\n\nphp_info ();\n{code}\nPHP Version 5.2.5\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frost",
                        "name": "frost",
                        "displayName": "Frost",
                        "active": true
                    },
                    "created": "2009-04-05T07:11:46.000+0000",
                    "updated": "2009-04-05T07:11:46.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29967",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frost",
                        "name": "frost",
                        "displayName": "Frost",
                        "active": true
                    },
                    "body": "But... I just noticed that when .ini is in ANSI (not in UTF-8) everything is working fine.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frost",
                        "name": "frost",
                        "displayName": "Frost",
                        "active": true
                    },
                    "created": "2009-04-05T07:16:06.000+0000",
                    "updated": "2009-04-05T07:16:06.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29969",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rob",
                        "name": "rob",
                        "displayName": "Rob Allen",
                        "active": true
                    },
                    "body": "This is a PHP bug (http:\/\/bugs.php.net\/bug.php?id=45991) which presumably will be fixed when 5.3 is released.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rob",
                        "name": "rob",
                        "displayName": "Rob Allen",
                        "active": true
                    },
                    "created": "2009-04-05T07:35:09.000+0000",
                    "updated": "2009-04-05T07:35:09.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29971",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frost",
                        "name": "frost",
                        "displayName": "Frost",
                        "active": true
                    },
                    "body": "But strange is fact that simple parse_ini_file() on UTF-8 ini file works fine, but the same function in Zend_Config_Ini class doesn't.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frost",
                        "name": "frost",
                        "displayName": "Frost",
                        "active": true
                    },
                    "created": "2009-04-05T07:49:57.000+0000",
                    "updated": "2009-04-05T07:49:57.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29975",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rob",
                        "name": "rob",
                        "displayName": "Rob Allen",
                        "active": true
                    },
                    "body": "If I do a Zend_Debug::dump($config->toArray()); then I see:\n{code}\narray(2) {\n  [\"\ufeffa\"] => string(1) \"b\"\n  [\"c\"] => string(1) \"d\"\n}\n{code}\n\nIdeas on how to fix the get() function are welcome!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rob",
                        "name": "rob",
                        "displayName": "Rob Allen",
                        "active": true
                    },
                    "created": "2009-04-05T11:48:08.000+0000",
                    "updated": "2009-04-05T11:48:08.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29976",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rob",
                        "name": "rob",
                        "displayName": "Rob Allen",
                        "active": true
                    },
                    "body": "A little more investigation with var_dump() shows that the key \"a\" is actually a 4 byte string and that the \"c\" key is a 1 byte string. I've no idea why and suspect that it's related to parse_ini_file()  as the following code:\n\n{code}\n$file = parse_ini_file($filename);\nif(array_key_exists('a', $file)) {\n    echo \"found the 'a' key\";\n} else {\n    echo \"didn't find the 'a' key\";\n}\n{code}\n\noutputs: didn't find the 'a' key\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rob",
                        "name": "rob",
                        "displayName": "Rob Allen",
                        "active": true
                    },
                    "created": "2009-04-05T11:56:14.000+0000",
                    "updated": "2009-04-05T11:56:51.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29978",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rob",
                        "name": "rob",
                        "displayName": "Rob Allen",
                        "active": true
                    },
                    "body": "Can't fix at Zend_Config level. Workaround is to use UTF8 files without a BOM marker or to have a comment \/ blank line as first line of file if you must have a BOM marker.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rob",
                        "name": "rob",
                        "displayName": "Rob Allen",
                        "active": true
                    },
                    "created": "2009-04-05T12:11:37.000+0000",
                    "updated": "2009-04-05T12:11:37.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6209\/transitions"
}