{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2015",
    "key": "ZF-2015",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Global entry point for established connection"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField",
            "value": {
                "timeoriginalestimate": 5760,
                "timeestimate": 5760
            }
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/2",
                "name": "New Feature",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2015\/votes",
                "votes": 3,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/2",
                "name": "Won't Fix"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10172",
                    "id": 10172,
                    "description": "Minor Release",
                    "name": "1.5.0",
                    "userReleaseDate": "17\/Mar\/08",
                    "archived": true,
                    "releaseDate": "2008-03-17",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2008-01-15T14:29:35.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=nataniel",
                "name": "nataniel",
                "displayName": "Artur Jedlinski",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2007-09-30T03:23:03.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2008-12-19T11:12:02.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "It is very convinient to use one or two DB connections in whole application - in many different places, like models, controllers, etc. Currently you have to take care yourself to create a global entry point to the adapter you create (for example in bootstrap). As this is the case for 99% of applications using Db I was thinking about a standard solution. My proposal is:\n\n{code:title=Zend\/Db.php}\n\tprotected static $_defaultConnection = 'default';\n\n\t\/**\n\t* Returns current name for default connection.\n\t* Also, the method can be used as a setter for current default.\n\t* @param string $name OPTIONAL\n\t*\/\n\tpublic static function defaultConnection($name = null)\n\t{\n\t\tif ($name !== null)\n\t\t{\n\t\t\tself::$_defaultConnection = $name;\n\t\t}\n\t\t\n\t\treturn self::$_defaultConnection;\n\t}\n\t\n\t\/** (...)\n\t* @param string $name OPTIONAL name of connection to register with Zend_Registry\n\t*\/ (...)\n\tpublic static function factory($adapter, $config = array(), $name = null)\n\t{\n\t\tif ($name === null)\n\t\t{\n\t\t\t$name = self::$_defaultConnection;\n\t\t}\n\t\t\n\t\t\/\/ current code of the method goes here...\n\t\t\/\/ (...)\n\t\t\n\t\t\/\/ register an adapter in global scope\n\t\tZend_Registry::set('db.'.$name, $dbAdapter);\n\t\treturn $dbAdapter;\n\t}\n\n\t\/**\n\t* Checks if there is a connection by $name.\n\t* @param string $name Name of connection to check\n\t* @return bool\n\t*\/\n\tpublic static function hasConnection($name = null)\n\t{\n\t\tif ($name === null)\n\t\t{\n\t\t\t$name = self::$_defaultConnection;\n\t\t}\n\t\t\n\t\treturn Zend_Registry::isRegistered('db.'.$name);\n\t}\n\t\n\t\/**\n\t* Returns a database connection established previously with Zend_Db::factory().\n\t* @return Zend_Db_Adapter_Abstract\n\t* @throws Zend_Db_Exception\n\t*\/\n\tpublic static function getConnection($name = null)\n\t{\n\t\tif ($name === null)\n\t\t{\n\t\t\t$name = self::$_defaultConnection;\n\t\t}\n\t\t\n\t\tif (!self::hasConnection($name))\n\t\t{\n\t\t\trequire_once 'Zend\/Db\/Exception.php';\n\t\t\tthrow new Zend_Db_Exception(\"Connection $name does not exist, use Zend_Db::factory() to establish it.\");\n\t\t}\n\t\t\n\t\treturn Zend_Registry::get('db.'.$name);\n\t}\n{code}\n\nIt would not break backward compatibility if Zend_Registry class exists. There could be a condition *if (class_exists('Zend_Registry'))* to avoid that."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/customFieldOption\/10040",
                "value": " Nice to Have"
            }
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2015\/watchers",
                "isWatching": false,
                "watchCount": 3
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                "name": "wil",
                "displayName": "Wil Sinclair",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10130",
                    "id": 10130,
                    "description": "Mini Release",
                    "name": "1.0.2",
                    "userReleaseDate": "25\/Sep\/07",
                    "archived": true,
                    "releaseDate": "2007-09-25",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10012",
                    "id": 10012,
                    "name": "Zend_Db",
                    "description": "interfaces, APIs, and adapters for various third-party data stores",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/18036",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=darby",
                        "name": "darby",
                        "displayName": "Darby Felton",
                        "active": true
                    },
                    "body": "I'm actually not too keen on adding this functionality to the framework code. Providing global-scope named database connections is trivial, as evidenced by the simplicity of the above implementation, using Zend_Registry or by other means (e.g., Service Locator pattern). Zend_Db can be extended or composed to provide these functions. If such extensions do not work because of a flaw in the class design, please let us know.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=darby",
                        "name": "darby",
                        "displayName": "Darby Felton",
                        "active": true
                    },
                    "created": "2007-12-21T12:28:09.000+0000",
                    "updated": "2007-12-21T12:28:09.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/18038",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=nataniel",
                        "name": "nataniel",
                        "displayName": "Artur Jedlinski",
                        "active": true
                    },
                    "body": "Darby - if zend framework is going to be RAD solution - it should have such a feature. If everybody using the framework has to extend it with all the same trivial code again and again - that's really pointless and zend framework is going to be nice set of poorely related tools, like PEAR, instead of real framework. I thought that with controller\/model\/view components the ZF direction was concreted, but maybe it did not. You should really think why Rails framework for Ruby is so appreciated.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=nataniel",
                        "name": "nataniel",
                        "displayName": "Artur Jedlinski",
                        "active": true
                    },
                    "created": "2007-12-21T14:08:56.000+0000",
                    "updated": "2007-12-21T14:08:56.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/18347",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "I see what your point, but I do think that if we were to add such functionality it would be important that it truly is as easy to use as possible, maybe is initializable by configuration as well as code, and has no 'muddying' effect on the DB or Registry API's for use cases that don't need to continually reuse the same few connections. Basically, I like your idea but I would go farther. :)\nIn any case, this won't be addressed in 1.5 since we'll need to think about it more, so I am closing it for now. Have you already made a proposal to the community on the DB or General list?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2008-01-15T14:29:34.000+0000",
                    "updated": "2008-01-15T14:29:34.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/27486",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "Bookkeeping. Assigning all issues to the person that ultimately closed them.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2008-12-19T11:12:02.000+0000",
                    "updated": "2008-12-19T11:12:02.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2015\/transitions"
}