{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1125",
    "key": "ZF-1125",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Controller_Route_Module::match()"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1125\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10023",
                    "id": 10023,
                    "description": "Release Candidate 1",
                    "name": "1.0.0 RC1",
                    "userReleaseDate": "28\/May\/07",
                    "archived": true,
                    "releaseDate": "2007-05-28",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2007-05-15T13:09:21.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                "name": "gavin",
                "displayName": "Gavin",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2007-03-23T19:38:41.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2007-07-05T14:43:59.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "In Zend_Controller_Route_Module::match():\n\n{code}\n.\n.\nif ($this->_dispatcher && $this->_dispatcher->isValidModule($path[0])) {\n.\n.\n{code}\n\nThere should be a way for userland to define when a module (i.e. \"{{$path[0]}}\") is valid, without having to pre-configure all of their applications' modules via setControllerDirectory(), before calling dispatch() on the front controller.\n\nDisclaimer: This is my opinion, and does not necessarily represent the opinions of anyone else.  There have been very few reports of developers currently using multiple modules in the same application, so I expect very few will be concerned by this issue at the moment.  However, I expect modules will eventually catch on and become more popular as examples of good application designs are published using support for modules in the ZF."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1125\/watchers",
                "isWatching": false,
                "watchCount": 3
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10022",
                    "id": 10022,
                    "description": "Beta Release; all components feature complete for 1.0",
                    "name": "0.9.0",
                    "userReleaseDate": "17\/Mar\/07",
                    "archived": true,
                    "releaseDate": "2007-03-17",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10011",
                    "id": 10011,
                    "name": "Zend_Controller",
                    "description": "front controller, including router and dispatcher",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/13679",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=peptolab",
                        "name": "peptolab",
                        "displayName": "Simon Mundy",
                        "active": true
                    },
                    "body": "This is more out of pure interest (because I'm also a developer who doesn't yet use multiple modules) but what sort of scenario would require the application to dynamically validate\/invalidate modules and module paths?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=peptolab",
                        "name": "peptolab",
                        "displayName": "Simon Mundy",
                        "active": true
                    },
                    "created": "2007-03-23T20:08:11.000+0000",
                    "updated": "2007-03-23T20:08:11.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/13697",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "body": "What sort of scenario should require the application to specify all the module paths for every request?  Note that there is overhead (e.g. directory tests) for every path added.\n\nI suggest that most will have a standard layout, with module dirs grouped under a common parent directory thus making the current approach required for userland code not DRY.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "created": "2007-03-24T23:17:20.000+0000",
                    "updated": "2007-03-24T23:17:20.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/13716",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=martel",
                        "name": "martel",
                        "displayName": "Michal Minicki",
                        "active": true
                    },
                    "body": "Well, as for the overhead you're obviously right, Gavin. But that's not relevant to module route. The problem is the check for directory existence is made too early on in the dispatcher. I guess this check should be made while actually dispatching (to a certain controller, when user has already specified which module and controller he wish to get to). This will make the overhead of specifying modules insignificant as well as will reduce the number of directory existence checks to one (instead of O(n)). And yes, I know the check in addDirectory makes it easier to spot an error since you get the error sooner but let's face it - you are going to write some controllers for the module anyway, so when you write your first one you will certainly check if it works. And  then you will get your error anyway.\n\nNow, to get back on topic. I don't like this check for module existence in the Module route at all. Router is a request filter now which means it takes place before the dispatching process and simply modifies the data dispatcher is going to operate on. So, basically, it shouldn't be asking the dispatcher of anything as it should not be aware of it. This check in the route just seems hackish to my eyes because of this and I would like to get rid of it completely. But that's not my call.\n\nAnd I have to admit I don't get your DRY remark. What does \"Don't Repeat Yourself \" have to do with module directory grouping?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=martel",
                        "name": "martel",
                        "displayName": "Michal Minicki",
                        "active": true
                    },
                    "created": "2007-03-26T15:12:33.000+0000",
                    "updated": "2007-03-26T15:12:33.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/13717",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Martel --\nIf we don't have the check for module existence in the module route, then we can't match \/:controller\/:action\/* versus \/:module\/:controller\/:action\/* -- the latter becomes the only possible route, as the route has no idea if the first path segment is a module or not.\n\nIf we make the module route *not* do this, then it leads to worse hacks in the dispatcher, as the dispatcher then has to determine if a module is valid or not, and, if not, has to reset controller, action, and parameters.\n\nIf you can come up with a better way to do it, be my guest -- I tried a number of options, but this was the cleanest I could find.\n\nGavin --\nWhat alternative do you suggest to isValidModule() other than checking the controller directory module => directory pairs? I cannot determine what you suggest as a plan of action for this issue -- what needs to change?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2007-03-26T15:39:23.000+0000",
                    "updated": "2007-03-26T15:39:23.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/13718",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "body": "Regarding DRY, it should be possible to specify a simple layout pattern once (e.g. \"$applicationDir\/$module\/controllers\"), for those creating applications that consistently follow the same layout.  In this use case, there is no need to write special code (e.g. one line for every module), nor is there a need to test the directories of all the unused modules for every request.\n\nIn the current ZF SVN, without changing either the Dispatcher or the line of code above in {{Zend_Controller_Route_Module::match():}}, it is very difficult to make this portion of developers' applications DRY (if they can use a standard rule with a standard layout as described above).\n\nThe line of code in the issue description above executes before the Dispatcher.\n\nI agree with you regarding finding the errors.\n\n{quote}I don't like this check for module existence in the Module route at all. Router is a request filter now which means it takes place before the dispatching process and simply modifies the data dispatcher is going to operate on. So, basically, it shouldn't be asking the dispatcher of anything as it should not be aware of it. This check in the route just seems hackish to my eyes because of this and I would like to get rid of it completely.{quote}\nI find no reason to disagree with you, so I created this issue documenting how it (the coupling of {{Zend_Controller_Route_Module}} to the Dispatcher) prevents userland code from easily implementing a simple rule\/pattern for where to find controllers.  I would not object at all if the Router did not have this dependency on the Dispatcher (and controller dirs provided to the dispatcher by the front controller).\n\nIf nobody has any reasons to keep this check in the router, then I hope we can obtain consensus approval to remove it.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "created": "2007-03-26T15:53:56.000+0000",
                    "updated": "2007-03-26T15:53:56.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/13719",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Perhaps I'm missing the boat, but: could you please, succinctly, describe the use case in code so I can better understand what you want to do, and why the current solution does not work?\n\nAs for the dependency on the dispatcher, as mentioned previously, without this check, there can be no determination as to whether the first path segment refers to a controller or a module; thus, without it, you would be forced to specify the module in every request -- which is not optimal, and actually negates the basic routing functionality that has been with the framework from day one.\n\nAgain, if anyone can provide a patch that keeps the existing functionality but doesn't utilize the dispatcher or front controller, I'd be happy to consider it.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2007-03-26T16:03:50.000+0000",
                    "updated": "2007-03-26T16:03:50.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/13720",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "body": "If there was \"a way for userland to define when a module (i.e. \"$path[0]\") is valid,\" then we can imagine something like a callback:\n{code}\nuserland:\nisValidModule($moduleName)\n{\n     return is_dir($applicationPath . $moduleName . DIRECTORY_SEPARATOR . 'controllers');\n}\n{code}\n\nThen in a userland front controller plugin with a {{preDispatch()}}:\n\n{code}\n$frontController->setControllerDirectory(array($applicationPath . $moduleName . DIRECTORY_SEPARATOR . 'controllers'))\n{code}\n\nThus, we have DRY and O(1).  There might be some tweaks needed in the Dispatcher or elsewhere to support this.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "created": "2007-03-26T16:30:34.000+0000",
                    "updated": "2007-03-26T16:30:34.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/13721",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "body": "So, the approach above does not work now, because of the line of code in the description of this issue.  That line of code runs before preDispatch(), and chokes, because there are no controller directories set yet.  However, we can not set it sooner, because the router must complete first, in order to learn the module.  Chicken and egg.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "created": "2007-03-26T16:35:34.000+0000",
                    "updated": "2007-03-26T16:35:34.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/13723",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "body": "I was incorrect in thinking that Michael was the author or maintainer of Zend_Controller_Route_Module.\nReassigning to Matthew.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "created": "2007-03-26T16:39:35.000+0000",
                    "updated": "2007-03-26T16:39:35.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/13724",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=martel",
                        "name": "martel",
                        "displayName": "Michal Minicki",
                        "active": true
                    },
                    "body": "{quote}\nRegarding DRY, it should be possible to specify a simple layout pattern once (e.g. \"$applicationDir\/$module\/controllers\"), for those creating applications that consistently follow the same layout. In this use case, there is no need to write special code (e.g. one line for every module), nor is there a need to test the directories of all the unused modules for every request.\n{quote}\n\nThis is the way Mojavi operates (so is Symphony as it's based on Mojavi) and it has some drawbacks. This way you're putting some constraints on the user for starters. And with our current solution user can keep his controllers anywhere he wishes, even outside the application root. This freedom of choice is what the framework is famous for, so I would think twice before removing it.\n\n{quote}\nMartel -\nIf we don't have the check for module existence in the module route, then we can't match \/:controller\/:action\/* versus \/:module\/:controller\/:action\/* - the latter becomes the only possible route, as the route has no idea if the first path segment is a module or not.\n{quote}\n\nMatthew, I know. We talked numerous times about this issue. I guess the decision must be made here - do we wish to keep current behavior or force the user to specify the module every time (even if it's a default one).\n\n{quote}\nI was incorrect in thinking that Michael was the author or maintainer of Zend_Controller_Route_Module.\n{quote}\n\nI heavily modified the class after Matthew created it and committed to svn. I can make all the changes, Gavin. No problem. It's just I don't feel like making decisions on your (I mean Zend's) behalf.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=martel",
                        "name": "martel",
                        "displayName": "Michal Minicki",
                        "active": true
                    },
                    "created": "2007-03-26T17:25:55.000+0000",
                    "updated": "2007-03-26T17:25:55.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/13725",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "body": "I am not voting to remove the existing capabilities. Flexibility is good.  I am only asking everyone to consider supporting the use case above :), because I think most developers will have a common directory layout for their modules.\n\nAh ok, I was out of the loop about who did what to which files.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "created": "2007-03-26T17:33:23.000+0000",
                    "updated": "2007-03-26T17:33:23.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/14112",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=martel",
                        "name": "martel",
                        "displayName": "Michal Minicki",
                        "active": true
                    },
                    "body": "Okay, guys, I think some decision has to be made here. \n\n- Do we provide a way for defining a callback as proposed by Gavin? Should this callback have a default of some sorts? \n- Do we refactor the code to make the directory check O(1)?\n- Or maybe we leave it as is? \n\nI think this matter should be decided prior to framework release, don't you agree? We have a lingering issue which is not even agreed to. \n\nMatthew? ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=martel",
                        "name": "martel",
                        "displayName": "Michal Minicki",
                        "active": true
                    },
                    "created": "2007-04-11T09:19:51.000+0000",
                    "updated": "2007-04-11T09:19:51.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/14155",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Here are the issues as I see them:\n\nh3. Directory check optimizations\nCurrently, it happens during addControllerDirectory() in the front controller. This could be moved to the dispatcher, but the idea was to bail as early as possible should the directory not exist. Moving this to the dispatcher would be 1-2 hours work to implement and test. The benefit is fewer stat calls on directories to determine if they exist.\n\nh3. Router checking for modules\nFirst off, it doesn't query the dispatcher, as Martel suggests, but rather the front controller. As mentioned before, removing the check means that we would not be able to trivially support our use case of \/:controller\/:action\/* as the base URL, and this is a requirement; that route will always be supported.\n\nIf we have the front controller register the controller directory stack with the request object and\/or router object, we risk it getting stale. We either need to keep it as is or come up with another solution.\n\nh3. isValidModule()\nThe current method reads as follows:\n{code}\npublic function isValidModule($module) \n{\n    $controllerDir = $this->getControllerDirectory();\n    return ((null!== $module) && ('default' != $module) && isset($controllerDir[$module]));\n}\n{code}\ngetControllerDirectory() merely returns the controller directory stack from the front controller.\n\nThe methodology is very compact, and could be easily overridden in an extension to do as Gavin suggests.\n\nTo place a plugin hook at this location begs the question of where else they should be placed: isDispatchable() is another good candidate, as are getDefaultControllerClass(), loadClass(), getActionMethod(), getControllerDirectory(), and getControllerClass(). In each of these cases, we'd need to call the plugin hook, and, if a value is returned, return directly instead of continuing processing. This seems like a fragile approach.\n\nh3. Possible solution\nConsidering that all of these issues surround the following questions:\n\n* What makes a valid module?\n* What makes a valid controller?\n* What makes a valid action?\n* How do we load controllers?\n* How can we optimize file system calls?\n\nMy inclination is that we need a new interface to handle these issues which would be used by the dispatcher and router. I'd call it Zend_Controller_Loader_Interface, with a '_Standard' implementation.\n\nThis interface would handle the following:\n\n* Registering and retrieving controller paths\n** setDirectories()\n** getDirectory($module = null)\n** addDirectory($dir, $module = 'default')\n* Offering validation routines:\n** isValidModule($module)\n** isValidController($controller, $module = 'default')\n** isValidAction($action, $controller = 'index', $module = 'default')\n* Handling default values:\n** (set|get)DefaultMethod\n** (set|get)DefaultController()\n** (set|get)DefaultAction()\n* Retrieving the controller class\n* Retrieving the action method\n\nThe front controller's set\/add\/getControllerDirectory() methods would proxy to this object, and the object itself would be passed to each of the router, and dispatcher, and available via an accessor in the front controller. The router would pass it in to each route object as well. An accessor in the front controller would allow passing in an alternative object instance -- for instance, if you wanted to subclass and add your own functionality.\n\nDoing this would streamline the dispatcher quite a bit by moving code not directly related to dispatching into another location that could be subclassed; the dispatcher could continue as normal, only expecting that the paradigm of instantiating a controller and calling a method on it be followed. Additionally, by passing it into the router and route objects, we can have more elegant solutions, particularly in custom route objects.\n\nThe downside is additional overhead of a new class, and added complexity for (advanced) users to learn.\n\nIt also does not directly solve the problem of a callback as suggested by Gavin. However, by subclassing the loader, he'd be able to introduce the functionality he desires.\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2007-04-12T12:02:06.000+0000",
                    "updated": "2007-04-12T12:02:06.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/14160",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mben",
                        "name": "mben",
                        "displayName": "Marc Bennewitz (GIATA mbH)",
                        "active": true
                    },
                    "body": "{code}\npublic function isValidModule($module) \n{\n    $controllerDir = $this->getControllerDirectory();\n    return ((null!== $module) && ('default' != $module) && isset($controllerDir[$module]));\n}\n{code}\nWhy the default module is not valid ?\n\nhttp:\/\/host\/basePath\/index\/index\n    -> moduleName = 'default'\n    -> ControllerName = 'index'\n    -> ActionName = 'index'\n\nbut\n\nhttp:\/\/host\/basePath\/default\/index\/index\n    -> throw exception \"Invalid controller specified (default)\"\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mben",
                        "name": "mben",
                        "displayName": "Marc Bennewitz (GIATA mbH)",
                        "active": true
                    },
                    "created": "2007-04-12T14:38:35.000+0000",
                    "updated": "2007-04-12T14:38:35.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/14191",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "body": "If there are too many complications to adding support for a one-liner in preDispatch():\n{code}\n$frontController->setControllerDirectory(array($moduleName => Zend_Registry::get('applicationDir') . $moduleName . DIRECTORY_SEPARATOR . 'controllers'));\n\n\/\/ or another one-liner in the form of a userland callback, where error checking is done in controller code, and not userland:\n\ngetModuleDirectory($moduleName)\n{\n   return Zend_Registry::get('appDir') . $moduleName . DIRECTORY_SEPARATOR . 'controllers';\n} \n{code}\n\nthen adding hard-coded support for a particular layout (named by the community as \"Conventional Modular Layout\"), would suffice for many who always precisely follow the directory organization assumed below:\n\n{code}\n\/\/ assumes that each module's controllers are found in these subdirectories:\n\/\/  Zend_Registry::get('applicationDir') . $moduleName . DIRECTORY_SEPARATOR . 'controllers'\n$frontController->setModuleDirectory(Zend_Registry::get('applicationDir'));\n{code}\n\nThis eliminates the need for developers to iterate through all modules every request, setting directories in the bootstrap, before \"{{Zend_Controller_Front::dispatch()}}\". ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "created": "2007-04-13T16:40:51.000+0000",
                    "updated": "2007-04-13T16:40:51.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/14617",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Per internal discussion, resolved by performing the following:\n\n* controller directory validation moved to dispatcher, during class loading process (saves on stat calls)\n* added addModuleDirectory() method to front controller; allows specifying a directory with modules; directory names become module names, controllers subdirectory becomes module controller directory path. Customize the controllers subdirectory name using setModuleControllerDirectoryName().\n\nRevision 4806 commits all changes, as well as documentation and tests.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2007-05-15T13:09:21.000+0000",
                    "updated": "2007-05-15T13:09:21.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1125\/transitions"
}