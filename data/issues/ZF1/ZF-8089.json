{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8089",
    "key": "ZF-8089",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "MimeType recognition broken in ZF 1.9.4"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8089\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10360",
                    "id": 10360,
                    "description": "Minor Release",
                    "name": "1.10.0",
                    "userReleaseDate": "27\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-27",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-10-18T01:52:51.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jacktanner",
                "name": "jacktanner",
                "displayName": "Jack Tanner",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-10-17T19:36:13.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-10-18T09:15:28.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "When I upload a file and test it against a Zend_Validate_File_MimeType validator, in ZF 1.9.4 I get\r\n\r\nNotice: finfo::finfo(): Warning: description `8-bit ISDN mu-law compressed (CCITT G.721 ADPCM voice data enco' truncated in \/var\/www\/ZendFramework-1.9.4-minimal\/library\/Zend\/Validate\/File\/MimeType.php on line 298\r\n\r\nNotice: finfo::finfo(): Warning: description `8-bit ISDN mu-law compressed (CCITT G.721 ADPCM voice data enco' truncated in \/var\/www\/ZendFramework-1.9.4-minimal\/library\/Zend\/Validate\/File\/MimeType.php on line 298\r\n\r\nNotice: finfo::finfo(): Warning: <= not supported in \/var\/www\/ZendFramework-1.9.4-minimal\/library\/Zend\/Validate\/File\/MimeType.php on line 298\r\n\r\nNotice: finfo::finfo(): Warning: <= not supported in \/var\/www\/ZendFramework-1.9.4-minimal\/library\/Zend\/Validate\/File\/MimeType.php on line 298\r\n\r\nNotice: finfo::finfo(): Warning: <= not supported in \/var\/www\/ZendFramework-1.9.4-minimal\/library\/Zend\/Validate\/File\/MimeType.php on line 298\r\n\r\nNotice: finfo::finfo(): Warning: >= not supported in \/var\/www\/ZendFramework-1.9.4-minimal\/library\/Zend\/Validate\/File\/MimeType.php on line 298\r\n\r\nWarning: finfo::finfo(): Failed to load magic database at '\/usr\/share\/file\/magic'. in \/var\/www\/ZendFramework-1.9.4-minimal\/library\/Zend\/Validate\/File\/MimeType.php on line 298\r\n\r\nWarning: finfo::file(): The invalid fileinfo object. in \/var\/www\/ZendFramework-1.9.4-minimal\/library\/Zend\/Validate\/File\/MimeType.php on line 304\r\n\r\nCopying the ZF 1.9.3PL1 file Zend\/Validate\/File\/MimeType.php into the 1.9.4 tree allows uploads to validate correctly."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8089\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10370",
                    "id": 10370,
                    "description": "Mini Release",
                    "name": "1.9.4",
                    "userReleaseDate": "13\/Oct\/09",
                    "archived": false,
                    "releaseDate": "2009-10-13",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10321",
                    "id": 10321,
                    "name": "Zend_Validate_File",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35372",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "body": "What php version,  Linux- distribution & version are you using? Besides, what is the mimetype of the file you're trying to upload?\r\n\r\nHonestly I personally expect this to be a problem with your local installation, given the error you get about \/usr\/share\/file\/magic",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "created": "2009-10-17T19:47:51.000+0000",
                    "updated": "2009-10-17T19:47:51.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35375",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "There were several errors from people who did not set the mimetype database.\r\n\r\nSeveral distributions need to have the database set, and this always lead to problems.\r\n\r\nWe added a automatic recognition for the database.\r\n\r\nAs you did not set the database yourself, the validator tries to load it automatically. But it seems that the database it finds within your distribution, is broken.\r\n\r\nThis is the reason why you are getting this failure.\r\n\r\nSo there are 2 solutions for you as this is no ZF problem:\r\n\r\n*) Repair the broken database at '\/usr\/share\/file\/magic'. As you can see all failures are related to this single file.\r\n\r\n*) Set the database you want to use manually by giving the related option to the validator.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-10-18T01:51:10.000+0000",
                    "updated": "2009-10-18T01:51:10.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35376",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Closing as non-issue.\r\nThe found mimetype database is broken.\r\n\r\nPS: But you could also use the ini settings or the environment settings to set the correct database to load.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-10-18T01:52:52.000+0000",
                    "updated": "2009-10-18T01:52:52.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35382",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jacktanner",
                        "name": "jacktanner",
                        "displayName": "Jack Tanner",
                        "active": true
                    },
                    "body": "Just FYI, I believe that this is a bug in PHP itself, not ZF. I intend to test again with PHP 5.3.x trunk, but until I get to do that, here are some findings.\r\n\r\nThe file that fails validation via finfo is validated correctly by \/usr\/bin\/file, so\r\n\/usr\/share\/file\/magic is NOT broken. Moreover, if I call finfo::__construct and omit the second parameter (magic file), the filetype is detected correctly even by finfo. If I specify the second parameter, I get the same error as in my bug report.\r\n\r\nThe OS is CentOS 5.3. \/usr\/share\/file\/magic is unmodified from the latest RPM, file-4.17-15.el5_3.1\r\n\r\n$ file -v\r\nfile-4.17\r\nmagic file from \/usr\/share\/file\/magic\r\n\r\n$ file -i a1_draft1_20091017224258\r\na1_draft1_20091017224258: application\/msword application\/msword\r\n\r\nPHP is 5.3.0, as distributed by Remi Collet in an extremely popular CentOS add-on repository, php-5.3.0-2.el5.remi.2 . It is compiled with '--with-mime-magic=\/usr\/share\/file\/magic'.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jacktanner",
                        "name": "jacktanner",
                        "displayName": "Jack Tanner",
                        "active": true
                    },
                    "created": "2009-10-18T09:15:26.000+0000",
                    "updated": "2009-10-18T09:15:26.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8089\/transitions"
}