{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8882",
    "key": "ZF-8882",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Propagate option 'disableTranslator' from Zend_Form_Element to it's validators"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8882\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10412",
                    "id": 10412,
                    "description": "Mini Release",
                    "name": "1.10.1",
                    "userReleaseDate": "10\/Feb\/10",
                    "archived": false,
                    "releaseDate": "2010-02-10",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2010-01-27T12:46:59.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=j4pp13",
                "name": "j4pp13",
                "displayName": "Jasper N. Brouwer",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-01-20T04:25:56.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-01-27T12:47:00.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "When setting the option 'disableTranslator' to true in any Zend_Form_Element, it isn't being propagated to its validators. At least not to Zend_Validate_NotEmpty (I haven't tested other validators yet).\r\n\r\nI don't know if this is done deliberate or not, but I would expect setting 'disableTranslator' to true will cause the entire Zend_Form_Element not to translate anything (including validators and other plugins that are loaded).\r\n\r\nI think the source of this problem lies in the way the option 'disableTranslator' is handled by Zend_Form_Element:\r\nBy setting it to true, the translator passed to the validators will be 'null' (in stead of an instance of Zend_Translate(_Adapter)).\r\nBut when the validator tries to use its translator (which is 'null'), it will load the default translator and things will still be translated.\r\n\r\nIn my opinion we need to propagate the option 'disableTranslator' itself (not simulate it by passing 'null' as translator as it doesn't completely disable translation).\r\n\r\n\r\nI've tried to work around this \"problem\" by setting the option 'autoInsertNotEmptyValidator' to false and manually prepend Zend_Validate_NotEmpty (with 'disableTranslator' in its options) to Zend_Form_Element-s validators.\r\nThis way the option 'disableTranslator' will be set on Zend_Validate_NotEmpty itself (and doesn't have to be propagated from Zend_Form_Element).\r\n\r\nThis also has no effect! (Zend_Validate_NotEmpty will still translate error-messages.)\r\n\r\nI've figured out the source of this second \"problem\": Zend_Validate_NotEmpty doesn't have a constructor:\r\nWhen the Zend_Form_Element loads its validators, it will instantiate them using the options as constructor-arguments. But because Zend_Validate_NotEmpty doesn't have a constructor, no options will be set.\r\n\r\n\r\nI've worked around this second \"problem\" by creating a My_Validate_NotEmpty (which extends Zend_Validate_NotEmpty). I've put a constructor in it which takes 'disableTranslator' as an argument and sets the option.\r\n\r\nAt first glance this seems like a neat solution, no hacks in existing Zend Framework files were needed and the adjustment I made in My_Validate_NotEmpty is very very small.\r\n\r\nBut I do think this solution defeats the whole purpose of the option 'disableTranslator' in Zend_Form_Element."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8882\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10400",
                    "id": 10400,
                    "description": "Mini Release",
                    "name": "1.9.7",
                    "userReleaseDate": "11\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-11",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10029",
                    "id": 10029,
                    "name": "Zend_Form",
                    "isAssigneeTypeValid": false
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10140",
                    "id": 10140,
                    "name": "Zend_Validate",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38042",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=j4pp13",
                        "name": "j4pp13",
                        "displayName": "Jasper N. Brouwer",
                        "active": true
                    },
                    "body": "I've also tested this in the latest stable release: 1.9.7\r\n\r\nThis \"problem\" also exists between Zend_Form_Element_Multi and it's 'multiOptions'.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=j4pp13",
                        "name": "j4pp13",
                        "displayName": "Jasper N. Brouwer",
                        "active": true
                    },
                    "created": "2010-01-26T06:33:42.000+0000",
                    "updated": "2010-01-26T06:33:42.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38070",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Fixed with r20705",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2010-01-27T12:47:00.000+0000",
                    "updated": "2010-01-27T12:47:00.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8882\/transitions"
}