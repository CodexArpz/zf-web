{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5063",
    "key": "ZF-5063",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Segmentaion fault on preg_replace in Zend_Db_Statement"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5063\/votes",
                "votes": 19,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10510",
                    "id": 10510,
                    "description": "Minor Release",
                    "name": "1.12.0",
                    "userReleaseDate": "27\/Aug\/12",
                    "archived": false,
                    "releaseDate": "2012-08-27",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2012-05-16T22:15:43.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=asgerhallas",
                "name": "asgerhallas",
                "displayName": "Asger Hallas",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-11-25T12:55:05.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-05-16T22:15:43.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "This seems not to exactly be a Zend Framework bug, but more likely PHP or PRCE lib bug, but I'll post it here for your opinion.\r\n\r\nOn line 190 of Zend_Db_Statement is the following preg_replace:\r\n\r\n$sql = preg_replace(\"\/$q($qe|\\\\\\\\{2}|[^$q])*$q\/\", '', $sql);\r\n\r\nWhen the sql passed is longer than about 4100 characters the process dies with the following error in the log:\r\n\r\n[notice] child pid 7426 exit signal Segmentation fault (11)\r\n\r\nI can drill it down to be this part of the regex that fails: \/([^'])*\/\r\n\r\nThe content in the sql i UTF8 encoded text - all characters are ascii though. I don't know if that might be of any help. \r\n\r\nIt seems to be somewhat related to this filed php bug:\r\n\r\nhttp:\/\/bugs.php.net\/bug.php?id=46551\r\n\r\nI'm using PHP 5.2.6-0.dotdeb.1 with Suhosin-Patch 0.9.6.2 (cli) (built: May  2 2008 10:24:03) on a debian-server. I will upgrade to latest snapshot tomorrow to see if that helps."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5063\/watchers",
                "isWatching": false,
                "watchCount": 18
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [
                "state:need-feedback",
                "zf-caretaker-adamlundrigan",
                "zf-crteam-padraic",
                "zf-crteam-priority",
                "zf-crteam-review"
            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mcleod@spaceweb.nl",
                "name": "mcleod@spaceweb.nl",
                "displayName": "Bart McLeod",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-3025",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3025",
                    "type": {
                        "name": "Related",
                        "direction": "OUTBOUND",
                        "description": "is related to"
                    }
                },
                {
                    "issueKey": "ZF-10209",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10209",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                },
                {
                    "issueKey": "ZF-7585",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7585",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                },
                {
                    "issueKey": "ZF-8399",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8399",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                },
                {
                    "issueKey": "ZF-7911",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7911",
                    "type": {
                        "name": "Related",
                        "direction": "INBOUND",
                        "description": "is related to"
                    }
                },
                {
                    "issueKey": "ZF-11249",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11249",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/12241",
                    "filename": "ZF-5063.patch",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vdelau",
                        "name": "vdelau",
                        "displayName": "Vincent de Lau",
                        "active": true
                    },
                    "created": "2009-09-21T08:43:11.000+0000",
                    "size": 735,
                    "mimeType": "text\/plain",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/12241\/ZF-5063.patch"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/14965",
                    "filename": "ZF-7911-ZF-5063.patch",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mcleod@spaceweb.nl",
                        "name": "mcleod@spaceweb.nl",
                        "displayName": "Bart McLeod",
                        "active": true
                    },
                    "created": "2012-03-13T23:41:48.000+0000",
                    "size": 5128,
                    "mimeType": "text\/plain",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/14965\/ZF-7911-ZF-5063.patch"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/14693",
                    "filename": "ZF-7911_ungreedy.patch",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "created": "2011-10-17T01:22:36.000+0000",
                    "size": 1653,
                    "mimeType": "text\/x-patch",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/14693\/ZF-7911_ungreedy.patch"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10251",
                    "id": 10251,
                    "description": "Mini Release",
                    "name": "1.6.2",
                    "userReleaseDate": "13\/Oct\/08",
                    "archived": false,
                    "releaseDate": "2008-10-13",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10260",
                    "id": 10260,
                    "description": "Minor Release",
                    "name": "1.7.0",
                    "userReleaseDate": "17\/Nov\/08",
                    "archived": false,
                    "releaseDate": "2008-11-17",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10270",
                    "id": 10270,
                    "description": "Mini Release",
                    "name": "1.7.1",
                    "userReleaseDate": "01\/Dec\/08",
                    "archived": false,
                    "releaseDate": "2008-12-01",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10271",
                    "id": 10271,
                    "description": "Mini Release",
                    "name": "1.7.2",
                    "userReleaseDate": "23\/Dec\/08",
                    "archived": false,
                    "releaseDate": "2008-12-23",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10250",
                    "id": 10250,
                    "description": "Mini Release",
                    "name": "1.7.3",
                    "userReleaseDate": "19\/Jan\/09",
                    "archived": false,
                    "releaseDate": "2009-01-19",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10280",
                    "id": 10280,
                    "description": "Mini Release",
                    "name": "1.7.4",
                    "userReleaseDate": "02\/Feb\/09",
                    "archived": false,
                    "releaseDate": "2009-02-02",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10272",
                    "id": 10272,
                    "description": "Mini Release",
                    "name": "1.7.5",
                    "userReleaseDate": "16\/Feb\/09",
                    "archived": false,
                    "releaseDate": "2009-02-16",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10290",
                    "id": 10290,
                    "description": "Mini Release",
                    "name": "1.7.6",
                    "userReleaseDate": "02\/Mar\/09",
                    "archived": false,
                    "releaseDate": "2009-03-02",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10291",
                    "id": 10291,
                    "description": "Mini Release",
                    "name": "1.7.7",
                    "userReleaseDate": "16\/Mar\/09",
                    "archived": false,
                    "releaseDate": "2009-03-16",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10300",
                    "id": 10300,
                    "description": "Mini Release",
                    "name": "1.7.8",
                    "userReleaseDate": "30\/Mar\/09",
                    "archived": false,
                    "releaseDate": "2009-03-30",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10411",
                    "id": 10411,
                    "description": "Security release",
                    "name": "1.7.9",
                    "userReleaseDate": "11\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-11",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10241",
                    "id": 10241,
                    "description": "Minor Release",
                    "name": "1.8.0",
                    "userReleaseDate": "30\/Apr\/09",
                    "archived": false,
                    "releaseDate": "2009-04-30",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10310",
                    "id": 10310,
                    "description": "Mini Release",
                    "name": "1.8.1",
                    "userReleaseDate": "12\/May\/09",
                    "archived": false,
                    "releaseDate": "2009-05-12",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10330",
                    "id": 10330,
                    "description": "Mini Release",
                    "name": "1.8.2",
                    "userReleaseDate": "27\/May\/09",
                    "archived": false,
                    "releaseDate": "2009-05-27",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10331",
                    "id": 10331,
                    "description": "Mini Release",
                    "name": "1.8.3",
                    "userReleaseDate": "09\/Jun\/09",
                    "archived": false,
                    "releaseDate": "2009-06-09",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10340",
                    "id": 10340,
                    "description": "Mini Release",
                    "name": "1.8.4",
                    "userReleaseDate": "23\/Jun\/09",
                    "archived": false,
                    "releaseDate": "2009-06-23",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10410",
                    "id": 10410,
                    "description": "Security release",
                    "name": "1.8.5",
                    "userReleaseDate": "11\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-11",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10320",
                    "id": 10320,
                    "description": "Minor Release",
                    "name": "1.9.0",
                    "userReleaseDate": "31\/Jul\/09",
                    "archived": false,
                    "releaseDate": "2009-07-31",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10350",
                    "id": 10350,
                    "description": "Mini Release",
                    "name": "1.9.1",
                    "userReleaseDate": "11\/Aug\/09",
                    "archived": false,
                    "releaseDate": "2009-08-11",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10361",
                    "id": 10361,
                    "description": "Mini Release",
                    "name": "1.9.2",
                    "userReleaseDate": "25\/Aug\/09",
                    "archived": false,
                    "releaseDate": "2009-08-25",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10362",
                    "id": 10362,
                    "description": "Mini Release",
                    "name": "1.9.3",
                    "userReleaseDate": "22\/Sep\/09",
                    "archived": false,
                    "releaseDate": "2009-09-22",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10370",
                    "id": 10370,
                    "description": "Mini Release",
                    "name": "1.9.4",
                    "userReleaseDate": "13\/Oct\/09",
                    "archived": false,
                    "releaseDate": "2009-10-13",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10380",
                    "id": 10380,
                    "description": "Mini Release",
                    "name": "1.9.5",
                    "userReleaseDate": "27\/Oct\/09",
                    "archived": false,
                    "releaseDate": "2009-10-27",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10390",
                    "id": 10390,
                    "description": "Mini Release",
                    "name": "1.9.6",
                    "userReleaseDate": "24\/Nov\/09",
                    "archived": false,
                    "releaseDate": "2009-11-24",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10400",
                    "id": 10400,
                    "description": "Mini Release",
                    "name": "1.9.7",
                    "userReleaseDate": "11\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-11",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10450",
                    "id": 10450,
                    "description": "Mini Release",
                    "name": "1.9.8",
                    "userReleaseDate": "01\/Apr\/10",
                    "archived": false,
                    "releaseDate": "2010-04-01",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10360",
                    "id": 10360,
                    "description": "Minor Release",
                    "name": "1.10.0",
                    "userReleaseDate": "27\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-27",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10412",
                    "id": 10412,
                    "description": "Mini Release",
                    "name": "1.10.1",
                    "userReleaseDate": "10\/Feb\/10",
                    "archived": false,
                    "releaseDate": "2010-02-10",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10430",
                    "id": 10430,
                    "description": "Mini Release",
                    "name": "1.10.2",
                    "userReleaseDate": "24\/Feb\/10",
                    "archived": false,
                    "releaseDate": "2010-02-24",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10440",
                    "id": 10440,
                    "description": "Mini Release",
                    "name": "1.10.3",
                    "userReleaseDate": "01\/Apr\/10",
                    "archived": false,
                    "releaseDate": "2010-04-01",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10451",
                    "id": 10451,
                    "description": "Mini Release",
                    "name": "1.10.4",
                    "userReleaseDate": "28\/Apr\/10",
                    "archived": false,
                    "releaseDate": "2010-04-28",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10460",
                    "id": 10460,
                    "description": "Mini Release",
                    "name": "1.10.5",
                    "userReleaseDate": "26\/May\/10",
                    "archived": false,
                    "releaseDate": "2010-05-26",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10470",
                    "id": 10470,
                    "description": "Mini Release",
                    "name": "1.10.6",
                    "userReleaseDate": "22\/Jun\/10",
                    "archived": false,
                    "releaseDate": "2010-06-22",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10480",
                    "id": 10480,
                    "description": "Mini Release",
                    "name": "1.10.7",
                    "userReleaseDate": "28\/Jul\/10",
                    "archived": false,
                    "releaseDate": "2010-07-28",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10490",
                    "id": 10490,
                    "description": "Mini Release",
                    "name": "1.10.8",
                    "userReleaseDate": "25\/Aug\/10",
                    "archived": false,
                    "releaseDate": "2010-08-25",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10420",
                    "id": 10420,
                    "description": "Minor Release",
                    "name": "1.11.0",
                    "userReleaseDate": "02\/Nov\/10",
                    "archived": false,
                    "releaseDate": "2010-11-02",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10501",
                    "id": 10501,
                    "description": "Mini Release",
                    "name": "1.11.1",
                    "userReleaseDate": "30\/Nov\/10",
                    "archived": false,
                    "releaseDate": "2010-11-30",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10520",
                    "id": 10520,
                    "description": "Mini Release",
                    "name": "1.11.2",
                    "userReleaseDate": "30\/Dec\/10",
                    "archived": false,
                    "releaseDate": "2010-12-30",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10530",
                    "id": 10530,
                    "description": "Mini Release",
                    "name": "1.11.3",
                    "userReleaseDate": "01\/Feb\/11",
                    "archived": false,
                    "releaseDate": "2011-02-01",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10540",
                    "id": 10540,
                    "description": "Mini Release",
                    "name": "1.11.4",
                    "userReleaseDate": "03\/Mar\/11",
                    "archived": false,
                    "releaseDate": "2011-03-03",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10012",
                    "id": 10012,
                    "name": "Zend_Db",
                    "description": "interfaces, APIs, and adapters for various third-party data stores",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/26714",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=asgerhallas",
                        "name": "asgerhallas",
                        "displayName": "Asger Hallas",
                        "active": true
                    },
                    "body": "I guess it has something to do with this: http:\/\/bugs.debian.org\/cgi-bin\/bugreport.cgi?bug=476419",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=asgerhallas",
                        "name": "asgerhallas",
                        "displayName": "Asger Hallas",
                        "active": true
                    },
                    "created": "2008-11-25T13:50:26.000+0000",
                    "updated": "2008-11-25T13:50:26.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28081",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "This appears to be an issue within php itself and not an issue in ZF.  Also appears to have been fixed in php.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2009-01-11T21:53:50.000+0000",
                    "updated": "2009-01-11T21:53:50.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31995",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tech13",
                        "name": "tech13",
                        "displayName": "Michael Rehbein",
                        "active": false
                    },
                    "body": "It appears that it is actually an issue with pcre, which has been flagged as \"won't fix\".\n\nSee: http:\/\/bugs.exim.org\/show_bug.cgi?id=797\n\nRaising the process stack limit helps handle larger queries, but doesn't \"fix\" the issue.\n\n\/\/ simple \"query\" that triggers segfault.\n$sql = str_pad(\"'\", 6000, 'a');\n\n\/\/ should throw invalid sql, actually segfaults\n$dbAdapter->query($sql);\n\nIs there another way to write code to prevent large queries from segfaulting php since there doesn't appear to be a fix coming for the pcre library?\n\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tech13",
                        "name": "tech13",
                        "displayName": "Michael Rehbein",
                        "active": false
                    },
                    "created": "2009-06-19T14:25:15.000+0000",
                    "updated": "2009-06-19T14:25:15.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34768",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vdelau",
                        "name": "vdelau",
                        "displayName": "Vincent de Lau",
                        "active": true
                    },
                    "body": "This issue can be fixed or better, worked around by changing the regexp slightly. Basically, the (..|..|[^.])* will 'eat' every character between quotes one-by-one, incrementing the stack every character. Adding a + sign after the negated character class will eat as much characters as it can, significantly reducing the stack usage.\n\nI've attached a patch that will fix this issue, and also will correct http:\/\/framework.zend.com\/issues\/browse\/ZF-3025",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vdelau",
                        "name": "vdelau",
                        "displayName": "Vincent de Lau",
                        "active": true
                    },
                    "created": "2009-09-21T08:40:54.000+0000",
                    "updated": "2009-09-21T08:40:54.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34769",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vdelau",
                        "name": "vdelau",
                        "displayName": "Vincent de Lau",
                        "active": true
                    },
                    "body": "submitted patch also fix a wrong fix for issue ZF-3025",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vdelau",
                        "name": "vdelau",
                        "displayName": "Vincent de Lau",
                        "active": true
                    },
                    "created": "2009-09-21T08:41:51.000+0000",
                    "updated": "2009-09-22T01:34:37.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34994",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vdelau",
                        "name": "vdelau",
                        "displayName": "Vincent de Lau",
                        "active": true
                    },
                    "body": "I'd really like to see this fix in 1.9.4 when ZF-7911 is not ready yet.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vdelau",
                        "name": "vdelau",
                        "displayName": "Vincent de Lau",
                        "active": true
                    },
                    "created": "2009-09-30T02:51:15.000+0000",
                    "updated": "2009-09-30T02:51:15.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/39488",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=patrick.schwisow",
                        "name": "patrick.schwisow",
                        "displayName": "Patrick Schwisow",
                        "active": true
                    },
                    "body": "The patch works, why hasn't this fix made it to production in the last six months?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=patrick.schwisow",
                        "name": "patrick.schwisow",
                        "displayName": "Patrick Schwisow",
                        "active": true
                    },
                    "created": "2010-03-23T10:37:44.000+0000",
                    "updated": "2010-03-23T10:37:44.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/41213",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bholub",
                        "name": "bholub",
                        "displayName": "Brian Holub",
                        "active": true
                    },
                    "body": "this cost me a couple hours. please bump up the priority on this one (the patch works), the seg fault might not be ZF's... fault.. but it's extremely painful.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bholub",
                        "name": "bholub",
                        "displayName": "Brian Holub",
                        "active": true
                    },
                    "created": "2010-06-27T12:04:31.000+0000",
                    "updated": "2010-06-27T12:04:31.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/45484",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dkreuer",
                        "name": "dkreuer",
                        "displayName": "Daniel Kreuer",
                        "active": true
                    },
                    "body": "This Issue still exists in ZF.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dkreuer",
                        "name": "dkreuer",
                        "displayName": "Daniel Kreuer",
                        "active": true
                    },
                    "created": "2011-03-11T00:28:12.000+0000",
                    "updated": "2011-03-11T00:28:12.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/46579",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=kipelovets",
                        "name": "kipelovets",
                        "displayName": "Georgy Korshunov",
                        "active": true
                    },
                    "body": "the patch doesn't work for me. also it's not correct though adding '+' after $qe means 'last character of $qe repeated one or more times'. this would be better: $sql = preg_replace(\"\/$d(($de)+|(\\\\\\\\{2})+|([^$d])+)*$d\/\", '', $sql);\r\nand the best solution for me is just making the pattern ungreedy. \r\ni'm not an expert in PCRE, but as i read on wikipedia, the PCRE engine would work faster with ungreedy patterns. and with this pattern greediness actually doesn't matter",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=kipelovets",
                        "name": "kipelovets",
                        "displayName": "Georgy Korshunov",
                        "active": true
                    },
                    "created": "2011-05-13T20:12:45.000+0000",
                    "updated": "2011-05-13T20:12:45.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48595",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mkrassovski",
                        "name": "mkrassovski",
                        "displayName": "Misha Krassovski",
                        "active": true
                    },
                    "body": "Guys, does anybody know how to fight this problem? I have RHE6, ZF 1.11.3, and issue is still there.\r\nPublished patch fixes nothing as well as others published in [ZF-7911|http:\/\/framework.zend.com\/issues\/browse\/ZF-7911]\r\nToday is 10\/3\/2011, meaning it has been in the air for almost 3 years now!!!!!!\r\n ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mkrassovski",
                        "name": "mkrassovski",
                        "displayName": "Misha Krassovski",
                        "active": true
                    },
                    "created": "2011-10-03T21:35:08.000+0000",
                    "updated": "2011-10-03T21:35:08.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48608",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=kipelovets",
                        "name": "kipelovets",
                        "displayName": "Georgy Korshunov",
                        "active": true
                    },
                    "body": "@Misha Krassovski\r\nbesides patches published here, there are two workarounds that worked perfectly for me:\r\n1) make the pattern ungreedy by adding \/U (more at http:\/\/php.net\/manual\/en\/reference.pcre.pattern.modifiers.php)\r\nhere you need to change ZF code, but it will help with all your queries\r\n2) use the adapter directly with those queries that fail, i.e:\r\n        $db->getAdapter()->getConnection()->exec($query);",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=kipelovets",
                        "name": "kipelovets",
                        "displayName": "Georgy Korshunov",
                        "active": true
                    },
                    "created": "2011-10-05T09:09:28.000+0000",
                    "updated": "2011-10-05T09:09:28.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48612",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "body": "Are there any known side-effects to switching the preg_replace call to ungreedy?  That seems like the simplest solution, assuming we can come up with a test to prove it actually solves the issue.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "created": "2011-10-05T14:37:26.000+0000",
                    "updated": "2011-10-05T14:37:26.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48615",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vdelau",
                        "name": "vdelau",
                        "displayName": "Vincent de Lau",
                        "active": true
                    },
                    "body": "The problem with this issue, is that it is not something that can reliably be unit tested. The segfault will only appear on certain systems when enough data is passed, where 'enough' depends on the system and how PHP and PCRE are build.\r\n\r\nThe patch that I suggested for this issue has been (and probably still is) in production. The patch would probably not fix the problem entirely, if enough data is passed, the query might still fail. I feel that if ZF-7911 is solved properly, this issue will go away or become even more unlikely.\r\n\r\nIn the mean time, I've got a new job where ZF is not used (yet).",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vdelau",
                        "name": "vdelau",
                        "displayName": "Vincent de Lau",
                        "active": true
                    },
                    "created": "2011-10-05T15:33:38.000+0000",
                    "updated": "2011-10-05T15:33:50.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48709",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "body": "Could someone here who is experiencing this issue please try the patch i've attached (ZF-7911_ungreedy.patch) and report back the result?\r\nIt's a modified version of the fix suggested in ZF-7911, with the addition of the ungreedy modifier as suggested here by [~kipelovets]",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "created": "2011-10-17T01:22:18.000+0000",
                    "updated": "2011-10-17T01:22:18.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48715",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=kipelovets",
                        "name": "kipelovets",
                        "displayName": "Georgy Korshunov",
                        "active": true
                    },
                    "body": "[~adamlundrigan], it worked for me",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=kipelovets",
                        "name": "kipelovets",
                        "displayName": "Georgy Korshunov",
                        "active": true
                    },
                    "created": "2011-10-17T11:24:14.000+0000",
                    "updated": "2011-10-17T11:24:14.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48736",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dvirazulay",
                        "name": "dvirazulay",
                        "displayName": "Dvir Azulay",
                        "active": true
                    },
                    "body": "Just casting my opinion on this - I've also wasted a couple of hours banging my head with this issue a few good months ago when it appeared on the zf-based product I was working on, but it only happened on my local env (which was Windows XP) and not on our linux production env. Nevertheless, important and really annoying issue that takes a while to drill down to.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dvirazulay",
                        "name": "dvirazulay",
                        "displayName": "Dvir Azulay",
                        "active": true
                    },
                    "created": "2011-10-18T20:17:20.000+0000",
                    "updated": "2011-10-18T20:17:20.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/49408",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tilman",
                        "name": "tilman",
                        "displayName": "Tilman",
                        "active": true
                    },
                    "body": "I just ran into this issue with a very long query (inserting a PHP serialized array) with ZF 1.11.11 on PHP 5.3.3 and PHP 5.3.6. I tried out the ungreedy patch. I can't tell if the code in _stripQuoted() is now still doing what it is supposed to do, but the segmentation fault on preg_replace did go away.\r\n\r\nThis is a 3 year old bug, and knowing from experience now, it is pretty nasty once you run into it. I don't even remember running into segfault issues with PHP before. It took me a while to find the culprit and then this bug report. \r\n\r\nIf the maintainers are not willing to fix the problem, at least put a disclaimer in the manual of Zend_Db, that one should refrain from using Zend_Db_Statement, if they need to run certain long queries.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tilman",
                        "name": "tilman",
                        "displayName": "Tilman",
                        "active": true
                    },
                    "created": "2012-01-03T21:49:29.000+0000",
                    "updated": "2012-01-03T21:49:29.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/49473",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=joernh",
                        "name": "joernh",
                        "displayName": "Joern Heissler",
                        "active": true
                    },
                    "body": "I agree that the bug is in libpcre, but with a different regex, the probability of segfault can be reduced.\r\nThe below fix is mysql specific and also addresses ZF-7911.\r\nlibpcre still goes into a recursion, but the depth seems to be only a fraction of the original.\r\nA proper fix would be in the libpcre. Or ZF has to write its own FSM. But doing it in pure php is probably slow.\r\n\r\n{code:java}\r\nclass Company_Db_Statement_Pdo_Mysql extends Zend_Db_Statement_Pdo\r\n{\r\n    \/* remove \"foo\"\"b\\ar\\\"b\\\\az\" and 'foo''b\\ar\\'b\\\\az' style quoted strings from sql queries. `backticks` are not touched. Specific for mysql syntax.\r\n     * for `foo``bar` style quotes, that regex part could be added (not tested):\r\n     *    `([^`]+|``)*?`(?!`)\r\n     *\/\r\n    protected function _stripQuoted($sql)\r\n    {\r\n        $regex = \"\/\\\"([^\\\\\\\\\\\"]+|\\\\\\\\.|\\\"\\\")*?\\\"(?!\\\")|'([^\\\\\\\\']+|\\\\\\\\.|'')*?'(?!')\/\";\r\n        return preg_replace($regex, '', $sql);\r\n    }\r\n}\r\n\r\n$db = Zend_Db::factory('PDO_MYSQL', $config->params);\r\n$db->setStatementClass('Company_Db_Statement_Pdo_Mysql');\r\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=joernh",
                        "name": "joernh",
                        "displayName": "Joern Heissler",
                        "active": true
                    },
                    "created": "2012-01-11T19:27:34.000+0000",
                    "updated": "2012-01-11T19:27:34.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/50032",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mcleod@spaceweb.nl",
                        "name": "mcleod@spaceweb.nl",
                        "displayName": "Bart McLeod",
                        "active": true
                    },
                    "body": "Added a patch that tries to solve the following:\r\n- adds unit tests as proposed by Vincent de Lau with some supposed improvements where they seemed wrong\r\n- completes the _stripQuoted function, as it was quite incomplete if tested against the new unit test\r\n- used the U modifier in the regexes that need it to avoid the segfault that I could reproduce over and over again\r\n\r\nPlease review and give your opinion. If I get no complaints I will commit in about two weeks from now.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mcleod@spaceweb.nl",
                        "name": "mcleod@spaceweb.nl",
                        "displayName": "Bart McLeod",
                        "active": true
                    },
                    "created": "2012-03-13T23:41:48.000+0000",
                    "updated": "2012-03-13T23:41:48.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/50039",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=joernh",
                        "name": "joernh",
                        "displayName": "Joern Heissler",
                        "active": true
                    },
                    "body": "> If I get no complaints\r\n\r\nSELECT '`'`?`;\r\n\r\nexpected result: SELECT ;\r\nI get: SELECT '?`;\r\n\r\nAlso, \\ has no special meaning within `` style quotes in mysql. i.e. `\\` or `\\\\` are both valid and different.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=joernh",
                        "name": "joernh",
                        "displayName": "Joern Heissler",
                        "active": true
                    },
                    "created": "2012-03-14T20:33:59.000+0000",
                    "updated": "2012-03-14T20:33:59.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/50040",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=joernh",
                        "name": "joernh",
                        "displayName": "Joern Heissler",
                        "active": true
                    },
                    "body": "`\\` or `\\ \\` (without the blank) are both valid and different.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=joernh",
                        "name": "joernh",
                        "displayName": "Joern Heissler",
                        "active": true
                    },
                    "created": "2012-03-14T20:36:38.000+0000",
                    "updated": "2012-03-14T20:36:38.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/50041",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mcleod@spaceweb.nl",
                        "name": "mcleod@spaceweb.nl",
                        "displayName": "Bart McLeod",
                        "active": true
                    },
                    "body": "Joern, can you be more specific. It's good that you complain \/ comment. I'm just the other developer trying to fix something that has been broken for many years. I don't expect it to be fixed overnight.\r\n\r\nFrom what I have understood from the research of Vincent de Lau, is that no attempt is made to validate or improve the query. The query is assumed to be correct and identifiers are stripped, so that the query can be parsed. Quoted identifiers have to be stripped as well.\r\n\r\nFrom the research of others I have understood that a backtick can't be escaped with a backslash, only with an extra backtick. Please use [] to quote strings in comments here, as Vincent did, to avoid confusion.\r\n\r\nWhen complaining about expected results, please do so in a format that I can readily use in the unit test.\r\n\r\nIn your case, this would be:\r\nExpected:\r\n{code}\r\nin: [SELECT '`'`?`;]\r\nout: [SELECT ;]\r\n{code}\r\nActual:\r\n{code}\r\nin: [SELECT '`'`?`;]\r\nout: [SELECT '?`;]\r\n{code}\r\n\r\nI can explain why you get what you do not expect: the two mathing backticks are stripped first. What remains is the actual output. Why is this wrong? Can you explain that? If so, I'll by happy to fix it.\r\n\r\nEither way, it doesn't segfault anymore, while it covers the most obvious use cases. I will welcome edge cases to be solved in separate issues if needed. Maybe we should even add an adapter specific way to override the order and format of the regexes if needed, but it seems to me that solving the segfault issue and the common use cases would already help a lot of people.\r\n\r\nI find it hard to find a realistic use case for the format you supplied, do you know of any?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mcleod@spaceweb.nl",
                        "name": "mcleod@spaceweb.nl",
                        "displayName": "Bart McLeod",
                        "active": true
                    },
                    "created": "2012-03-14T21:30:59.000+0000",
                    "updated": "2012-03-14T21:36:38.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/50045",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=joernh",
                        "name": "joernh",
                        "displayName": "Joern Heissler",
                        "active": true
                    },
                    "body": "I'll try to make a more realistic example. Not sure if anyone would actually do it, but it looks like someone might. I hope that now it is obvious why the actual output is wrong.\r\n\r\nExpected:\r\n{code}\r\nin: [SELECT '?`' `x`, col `y` FROM t WHERE u = ?;]\r\nout: [SELECT  , col  FROM t WHERE u = ?;]\r\n{code}\r\nActual:\r\n{code}\r\nin: [SELECT '?`' `x`, col `y` FROM t WHERE u = ?;]\r\nout: [SELECT '?xy` FROM t WHERE u = ?;]\r\n{code}\r\n\r\nHere is another unrealistic use case which segfaults:\r\n{code}\r\n<?php\r\n\r\n$regex = \"\/'(\\\\\\\\'|[^'])*'\/U\";\r\n$sql = \"'\";\r\nfor ($i = 0; $i < 1000000; ++$i) $sql .= \"\\\\x\";\r\n$sql .= \"'\";\r\n$sql = preg_replace($regex, '', $sql);\r\n{code}\r\n\r\nI wish I could come up with a perfect solution myself, but everything I try is either deadly slow, segfaults, would require libpcre changes or would require making a C module for stripping quotes :-)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=joernh",
                        "name": "joernh",
                        "displayName": "Joern Heissler",
                        "active": true
                    },
                    "created": "2012-03-14T22:28:52.000+0000",
                    "updated": "2012-03-14T22:28:52.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/50049",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mcleod@spaceweb.nl",
                        "name": "mcleod@spaceweb.nl",
                        "displayName": "Bart McLeod",
                        "active": true
                    },
                    "body": "Thanks for your explanation and the excellent formatting of your code examples.\r\n\r\nI still have trouble understanding, because I think the query is wrong and we do not attempt to validate the query. In this input:\r\n{code}[SELECT '?`' `x`, col `y` FROM t WHERE u = ?;]\r\n{code}\r\nthe first backtick is not allowed in my opinion and that's why is goes 'wrong' with the output. Or should a backtick not be considered a quote if inside single quotes and that is what I'm missing? Why would one want a single backtick inside the single quotes? I still find it very, very hard to imagine a use case for that.\r\n\r\nI could imagine something like this:\r\n{code}\r\n[INSERT INTO `pcre` (`test`) VALUES ('In MySQL, the backtick (`) is used to quoted identifiers')]\r\n{code}\r\nWill I be in trouble with this?:\r\n{code}\r\n[INSERT INTO `pcre` (`test`) VALUES ('In MySQL, the backtick (`) is used to quoted identifiers, and here is another backtick: ` ...ooops')]\r\n{code}\r\nI admit that I will have to look deeper into examples like these and make sure I am confident about how these should be formatted to be valid queries and then what the expected output should be. Any help is still appreciated. Even if it doesn't get perfect, It would help if it would improve, or?\r\n\r\nYour segfaulting examples worries me, although it is unrealistic. Maybe I should not be worried, in php you can't do everything either. Like allocating memory inside an infinite loop will certainly crash php.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mcleod@spaceweb.nl",
                        "name": "mcleod@spaceweb.nl",
                        "displayName": "Bart McLeod",
                        "active": true
                    },
                    "created": "2012-03-15T07:56:21.000+0000",
                    "updated": "2012-03-15T08:00:02.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/50050",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=joernh",
                        "name": "joernh",
                        "displayName": "Joern Heissler",
                        "active": true
                    },
                    "body": "{quote}\r\nThanks for your explanation and the excellent formatting of your code examples.\r\n{quote}\r\nI'm trying my best to learn the formatting language of this bug tracker :-)\r\n\r\n{quote}\r\nOr should a backtick not be considered a quote if inside single quotes and that is what I'm missing? Why would one want a single backtick inside the single quotes? I still find it very, very hard to imagine a use case for that.\r\n{quote}\r\n\r\nInside quotes (whatever the type) all other quotes lose their special meaning and are just ordinary characters. So '?`' is a string consisting of a question mark and a backtick. My query would return two columns, named x and y, where the value of the former is always '?`' and the latter's value comes from the database:\r\n\r\n{noformat}\r\nmysql> create table t (u int unsigned not null, col varchar(20) not null);\r\nQuery OK, 0 rows affected (0.00 sec)\r\n\r\nmysql> insert into t values (10,'ten'), (20,'twenty'), (42,'fortytwo');\r\nQuery OK, 3 rows affected (0.00 sec)\r\nRecords: 3  Duplicates: 0  Warnings: 0\r\n\r\nmysql> SELECT '?`' `x`, col `y` FROM t WHERE u = 20;\r\n+----+--------+\r\n| x  | y      |\r\n+----+--------+\r\n| ?` | twenty |\r\n+----+--------+\r\n1 row in set (0.00 sec)\r\n{noformat}\r\n\r\nAnd your two queries are perfectly valid in mysql:\r\n{noformat}\r\nmysql> create table pcre (test varchar(255));\r\nQuery OK, 0 rows affected (0.02 sec)\r\n\r\nmysql> INSERT INTO `pcre` (`test`) VALUES ('In MySQL, the backtick (`) is used to quoted identifiers');\r\nQuery OK, 1 row affected (0.00 sec)\r\n\r\nmysql> INSERT INTO `pcre` (`test`) VALUES ('In MySQL, the backtick (`) is used to quoted identifiers, and here is another backtick: ` ...ooops');\r\nQuery OK, 1 row affected (0.00 sec)\r\n\r\nmysql> select * from pcre;\r\n+----------------------------------------------------------------------------------------------------+\r\n| test                                                                                               |\r\n+----------------------------------------------------------------------------------------------------+\r\n| In MySQL, the backtick (`) is used to quoted identifiers                                           |\r\n| In MySQL, the backtick (`) is used to quoted identifiers, and here is another backtick: ` ...ooops |\r\n+----------------------------------------------------------------------------------------------------+\r\n2 rows in set (0.00 sec)\r\n{noformat}\r\n\r\nOf course my examples appear to be unrealistic. But they can get very real when user-provided data is sent to the database and people can cause your application to segfault (resulting in DoS) or worse. I believe that with unrealistic code this bug can allow a user to at least inject random data into the database or tamper with SELECT results.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=joernh",
                        "name": "joernh",
                        "displayName": "Joern Heissler",
                        "active": true
                    },
                    "created": "2012-03-15T09:59:55.000+0000",
                    "updated": "2012-03-15T09:59:55.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/50052",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mcleod@spaceweb.nl",
                        "name": "mcleod@spaceweb.nl",
                        "displayName": "Bart McLeod",
                        "active": true
                    },
                    "body": "Thank you very much. You just clarified a key point I missed: the fact that inside any type of quotes all other quotes lose their meaning entirely. It is obvious, but I overlooked it's importance for this function completely. I'll have to redo my homework. It will have to wait for a while, but in any case, I won't commit my patches until I have give it additional attention.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mcleod@spaceweb.nl",
                        "name": "mcleod@spaceweb.nl",
                        "displayName": "Bart McLeod",
                        "active": true
                    },
                    "created": "2012-03-15T11:30:36.000+0000",
                    "updated": "2012-03-15T11:30:36.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/50061",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mcleod@spaceweb.nl",
                        "name": "mcleod@spaceweb.nl",
                        "displayName": "Bart McLeod",
                        "active": true
                    },
                    "body": "By changing the order by which the quoted identifiers and values are stripped, I now have your use cases - and mine - convered by the unit test. So, maybe I solved the related ZF-7911 issue.\r\n\r\nAs far as the segfault is concerned: I tested that with 9000 chars. It segfaulted. I added the Ungreedy modifier, it stopped segfaulting. But if I try with only a few more characters, like 9500, it segfaults just the same, even with the \/U modifier. No sophisticated string needs to be inserted to reproduce it: I just insert 9500 times the [a] character:\r\n{code}\r\n$db = Zend_Db_Table::getDefaultAdapter();\r\n$value = str_repeat('a', 9500);\r\n$query = \"INSERT INTO `pcre` (`test`) VALUES ('$value')\";\r\n$db->query($query);\r\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mcleod@spaceweb.nl",
                        "name": "mcleod@spaceweb.nl",
                        "displayName": "Bart McLeod",
                        "active": true
                    },
                    "created": "2012-03-16T22:05:29.000+0000",
                    "updated": "2012-03-16T22:06:49.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/50587",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mcleod@spaceweb.nl",
                        "name": "mcleod@spaceweb.nl",
                        "displayName": "Bart McLeod",
                        "active": true
                    },
                    "body": "I commited some changes to trunk using issue ZF-7911. This does not mean everything is fixed and fine now. However, my fix adds a test that should cover what has been asked for here and in ZF-7911.\r\n\r\nToday I did another commit with a slightly changed regex. While the old regex would segfault near 9,500 characters, the new regex segfaults near 65,000 characters. It's still not good, but we are improving.\r\n\r\nI also want to point everyone at this new bugreport in the PCRE library, there is some usefull information in there, that we might be able to use in order to get regular errors from PCRE instead of segfaults and to allow us to increase the memory limit of PCRE based on the memory limit we set for php:\r\n\r\nhttp:\/\/bugs.exim.org\/show_bug.cgi?id=1233\r\n\r\nI would appreciate help from anyone who has experience compiling php. What I would like to do is change it so that:\r\n- PCRE uses heap instead of stack\r\n- PCRE is configured with a memory limit based on the memory limit of php, so that if we increase the memory limit for php, we also increase the memory limit for PCRE and so that we get regular errors instead of segfaults.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mcleod@spaceweb.nl",
                        "name": "mcleod@spaceweb.nl",
                        "displayName": "Bart McLeod",
                        "active": true
                    },
                    "created": "2012-05-10T22:42:57.000+0000",
                    "updated": "2012-05-10T22:46:03.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/50661",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mcleod@spaceweb.nl",
                        "name": "mcleod@spaceweb.nl",
                        "displayName": "Bart McLeod",
                        "active": true
                    },
                    "body": "I committed a new regex a while ago, that passes all unit tests added in ZF-7911. With this regex, you can use a query of around 65,000 characters if you use the default settings of php.\r\n\r\nIn addition, by asking the PCRE developers, I found there is a setting you can put in php.ini. \r\npcre.recursion_limit and pcre.backtrack_limit\r\n\r\nI experimented with those, and I found that if I set the pcre.recursion_limit to 1000, which is a very low value, compared to the default of 100k, it 'just works' (all the unit tests pass). You get a regular memory_limit exceeded php error if you use too long a query, but you can increase the memory_limit until you get a MySQL has gone away error (because the maximum packet size was exceeded). In either case, it is no longer Zend_Db_Statement that is the problem. I could insert 100k utf8 characters before MySQL gave up.\r\n\r\nSee also:\r\nhttp:\/\/bugs.exim.org\/show_bug.cgi?id=1233\r\n\r\nIf you still experience problems even with the new regex and tweaked settings, feel free to reopen this issue.\r\n\r\nNote that if you set the recursion limit to low, to 10 for example, the resulting replacement string will be empty and you will have no query anymore. In that case, the unit tests will not pass.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mcleod@spaceweb.nl",
                        "name": "mcleod@spaceweb.nl",
                        "displayName": "Bart McLeod",
                        "active": true
                    },
                    "created": "2012-05-16T22:15:43.000+0000",
                    "updated": "2012-05-16T22:15:43.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5063\/transitions"
}