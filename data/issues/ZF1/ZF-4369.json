{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4369",
    "key": "ZF-4369",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Config_Xml extend bug"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4369\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/3",
                "name": "Duplicate"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-03-21T13:16:53.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=448191",
                "name": "448191",
                "displayName": "John Kleijn",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-09-24T05:41:40.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-03-21T13:16:53.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Zend_Config_Xml doesn't handle deep nested overriding properties correctly:\n\n{code:xml} \n<?xml version=\"1.0\"?>\n<application>\n    <production>\n    \t<errors debug=\"false\"\/>\n    \t<content encoding=\"utf8\" language=\"en_ENG\"\/>\n    \t<file-system>\n    \t\t<module-base-dir relative=\"1\" path=\"modules\"\/>\n    \t<\/file-system>\n        <system>\n        \t<import-default helpers-filters=\"1\" plugins=\"1\"\/>\n        \t<libs>\n        \t\t<foo>\n        \t\t\t<controller-plugins prefix=\"Foo_Controller_Plugin\">\n       \t\t\t\t\t<plugin name=\"TransformView\">\n       \t\t\t\t\t\t<default-layout>modules\/default\/views\/scripts\/layout.xsl<\/default-layout>\n       \t\t\t\t\t<\/plugin>\n       \t\t\t\t\t<plugin name=\"Doctrine\">\n       \t\t\t\t\t\t<connection>default<\/connection>\n       \t\t\t\t\t\t<dsn>mysql:\/\/******@localhost\/foobarred<\/dsn>\n\t\t\t\t\t\t\t<attributes>\n\t\t\t\t                <model_loading>conservative<\/model_loading>\n\t\t\t\t            <\/attributes>\n       \t\t\t\t\t<\/plugin>\n       \t\t\t\t\t<plugin name=\"Acl\">\n       \t\t\t\t\t\t<store>session<\/store>\n       \t\t\t\t\t<\/plugin>\n       \t\t\t\t\t<plugin name=\"Locale\"\/>\n       \t\t\t\t\t<plugin name=\"Mail\">\n       \t\t\t\t\t\t<transport>sendmail<\/transport>\n       \t\t\t\t\t<\/plugin>\n       \t\t\t\t\t<plugin name=\"Cache\"\/>\n       \t\t\t\t\t<plugin name=\"DoctrineAuth\"\/>\n        \t\t\t<\/controller-plugins>\n        \t\t\t<view-helpers prefix=\"Foo_View_Helper\"><\/view-helpers>\n        \t\t\t<view-filters prefix=\"Foo_View_Filter\"><\/view-filters>\n        \t\t<\/foo>\n        \t\t<zend>\n        \t\t\t<view-helpers prefix=\"Zend_Dojo_View_Helper\"><\/view-helpers>\n        \t\t<\/zend>\n        \t<\/libs>\n        <\/system>\n    <\/production>\n    <staging extends=\"production\">\n\t\t<system>\n        \t<libs>\n        \t\t<foo>\n        \t\t\t<controller-plugins>\n       \t\t\t\t\t<plugin name=\"Doctrine\">\n       \t\t\t\t\t\t<dsn>mysql:\/\/******@localhost\/beta_foobarred<\/dsn>\n       \t\t\t\t\t<\/plugin>\n        \t\t\t<\/controller-plugins>\n        \t\t<\/foo>\n        \t<\/libs>\n        <\/system>\n    <\/staging>\n    <development extends=\"staging\">\n    \t<errors debug=\"true\"\/>\n\t\t<system>\n        \t<libs>\n        \t\t<foo>\n        \t\t\t<controller-plugins>\n        \t\t\t\t<plugin name=\"Mail\">\n       \t\t\t\t\t\t<transport>smtp<\/transport>\n       \t\t\t\t\t\t<host>*****<\/host>\n\t\t\t\t    \t\t<options>\n\t\t\t\t    \t\t\t<auth>****<\/auth>\n\t\t\t\t\t\t\t\t<username>*****<\/username>\n\t\t\t\t\t\t\t\t<password>*****<\/password>\n\t\t\t\t\t\t\t\t<port>*****<\/port>\n\t\t\t\t    \t\t<\/options>\n\t\t\t\t    \t\t<system>\n\t\t\t\t\t\t\t\t<name>foobarred.net<\/name>\n\t\t\t\t\t\t\t\t<email>info@foobarred.net<\/email>\n\t\t\t\t\t\t\t\t<template>modules\/default\/views\/helpertemplates\/mail.phtml<\/template>\n\t\t\t\t    \t\t<\/system>    \t\n\t\t\t\t    \t<\/plugin>\n        \t\t\t<\/controller-plugins>\n        \t\t<\/foo>\n        \t<\/libs>\n        <\/system>\n    <\/development>\n<\/application>\n{code} \n\nproduces:\n\n{noformat}\narray(4) {\n  [\"errors\"]=>\n  array(1) {\n    [\"debug\"]=>\n    string(4) \"true\"\n  }\n  [\"content\"]=>\n  array(2) {\n    [\"encoding\"]=>\n    string(4) \"utf8\"\n    [\"language\"]=>\n    string(6) \"en_ENG\"\n  }\n  [\"file-system\"]=>\n  array(1) {\n    [\"module-base-dir\"]=>\n    array(2) {\n      [\"relative\"]=>\n      string(1) \"1\"\n      [\"path\"]=>\n      string(7) \"modules\"\n    }\n  }\n  [\"system\"]=>\n  array(2) {\n    [\"import-default\"]=>\n    array(2) {\n      [\"helpers-filters\"]=>\n      string(1) \"1\"\n      [\"plugins\"]=>\n      string(1) \"1\"\n    }\n    [\"libs\"]=>\n    array(2) {\n      [\"foo\"]=>\n      array(3) {\n        [\"controller-plugins\"]=>\n        array(2) {\n          [\"prefix\"]=>\n          string(21) \"Foo_Controller_Plugin\"\n          [\"plugin\"]=>\n          array(13) {\n            [0]=>\n            array(2) {\n              [\"name\"]=>\n              string(13) \"TransformView\"\n              [\"default-layout\"]=>\n              string(40) \"modules\/default\/views\/scripts\/layout.xsl\"\n            }\n            [1]=>\n            array(4) {\n              [\"name\"]=>\n              string(8) \"Doctrine\"\n              [\"connection\"]=>\n              string(7) \"default\"\n              [\"dsn\"]=>\n              string(34) \"mysql:\/\/******@localhost\/foobarred\"\n              [\"attributes\"]=>\n              array(1) {\n                [\"model_loading\"]=>\n                string(12) \"conservative\"\n              }\n            }\n            [2]=>\n            array(2) {\n              [\"name\"]=>\n              string(3) \"Acl\"\n              [\"store\"]=>\n              string(7) \"session\"\n            }\n            [3]=>\n            array(1) {\n              [\"name\"]=>\n              string(6) \"Locale\"\n            }\n            [4]=>\n            array(2) {\n              [\"name\"]=>\n              string(4) \"Mail\"\n              [\"transport\"]=>\n              string(8) \"sendmail\"\n            }\n            [5]=>\n            array(1) {\n              [\"name\"]=>\n              string(5) \"Cache\"\n            }\n            [6]=>\n            array(1) {\n              [\"name\"]=>\n              string(12) \"DoctrineAuth\"\n            }\n            [\"name\"]=>\n            string(4) \"Mail\"\n            [\"dsn\"]=>\n            string(39) \"mysql:\/\/******@localhost\/beta_foobarred\"\n            [\"transport\"]=>\n            string(4) \"smtp\"\n            [\"host\"]=>\n            string(5) \"*****\"\n            [\"options\"]=>\n            array(4) {\n              [\"auth\"]=>\n              string(4) \"****\"\n              [\"username\"]=>\n              string(5) \"*****\"\n              [\"password\"]=>\n              string(5) \"*****\"\n              [\"port\"]=>\n              string(5) \"*****\"\n            }\n            [\"system\"]=>\n            array(3) {\n              [\"name\"]=>\n              string(13) \"foobarred.net\"\n              [\"email\"]=>\n              string(18) \"info@foobarred.net\"\n              [\"template\"]=>\n              string(48) \"modules\/default\/views\/helpertemplates\/mail.phtml\"\n            }\n          }\n        }\n        [\"view-helpers\"]=>\n        array(1) {\n          [\"prefix\"]=>\n          string(15) \"Foo_View_Helper\"\n        }\n        [\"view-filters\"]=>\n        array(1) {\n          [\"prefix\"]=>\n          string(15) \"Foo_View_Filter\"\n        }\n      }\n      [\"zend\"]=>\n      array(1) {\n        [\"view-helpers\"]=>\n        array(1) {\n          [\"prefix\"]=>\n          string(21) \"Zend_Dojo_View_Helper\"\n        }\n      }\n    }\n  }\n}\n{noformat}\n\nNote how the 'plugin' config of the different sections don't properly override."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4369\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User"
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10240",
                    "id": 10240,
                    "description": "Minor Release",
                    "name": "1.6.0",
                    "userReleaseDate": "02\/Sep\/08",
                    "archived": false,
                    "releaseDate": "2008-09-02",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10010",
                    "id": 10010,
                    "name": "Zend_Config",
                    "description": "property based interface to an array",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24753",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=448191",
                        "name": "448191",
                        "displayName": "John Kleijn",
                        "active": true
                    },
                    "body": "Is anyone going to pick this up? Do I need to it myself?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=448191",
                        "name": "448191",
                        "displayName": "John Kleijn",
                        "active": true
                    },
                    "created": "2008-10-02T05:06:23.000+0000",
                    "updated": "2008-10-02T05:06:23.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24755",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rob",
                        "name": "rob",
                        "displayName": "Rob Allen",
                        "active": true
                    },
                    "body": "I started trying to create a reduced test case XML file, but had hard disk problems and haven't had a chance to pick it up again. \n\nI will get to it at some point, though if you can create the most minimal XML file that exhibits the problem, that'd be a big help.  Assuming you've signed the CLA, feel free to create a patch and test :)\n\nRegards,\n\nRob...",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rob",
                        "name": "rob",
                        "displayName": "Rob Allen",
                        "active": true
                    },
                    "created": "2008-10-02T06:00:14.000+0000",
                    "updated": "2008-10-02T06:00:14.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24768",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=448191",
                        "name": "448191",
                        "displayName": "John Kleijn",
                        "active": true
                    },
                    "body": "Well, you can probably fix a lot quicker than I can. If you try this file:\n\n<?xml version=\"1.0\"?>\n<root>\n    <production>\n        <foo>\n\t\t\t<doh name=\"Ugh\">\n\t\t\t\t<prop>val1<\/prop>\n\t\t\t<\/doh>\n\t\t\t<doh name=\"Agh\">\n\t\t\t\t<prop>val2<\/prop>\n\t\t\t<\/doh>\n        <\/foo>\n    <\/production>\n    <development extends=\"production\">\n        <foo>\n\t\t\t<doh name=\"Ugh\">\n\t\t\t\t<prop>val3<\/prop>\n\t\t\t<\/doh>\n        <\/foo>\n    <\/development>\n<\/root>\n\nWith this unit test:\n\n    public function testZF4369()\n    {\n        $config = new Zend_Config_Xml(dirname(__FILE__) . '\/_files\/application.xml', 'development');\n\n        $this->assertEquals($config->foo->doh->count(), 3);\n    }\n\nI think you'll be able to fix it.\n\nA dirty dump reveils this:\n\narray(1) {\n  [\"foo\"]=>\n  array(1) {\n    [\"doh\"]=>\n    array(4) {\n      [0]=>\n      array(2) {\n        [\"name\"]=>\n        string(3) \"Ugh\"\n        [\"prop\"]=>\n        string(4) \"val1\"\n      }\n      [1]=>\n      array(2) {\n        [\"name\"]=>\n        string(3) \"Agh\"\n        [\"prop\"]=>\n        string(4) \"val2\"\n      }\n      [\"name\"]=>\n      string(3) \"Ugh\"\n      [\"prop\"]=>\n      string(4) \"val3\"\n    }\n  }\n}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=448191",
                        "name": "448191",
                        "displayName": "John Kleijn",
                        "active": true
                    },
                    "created": "2008-10-02T15:43:52.000+0000",
                    "updated": "2008-10-02T15:43:52.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/25949",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=idaf_1er",
                        "name": "idaf_1er",
                        "displayName": "Davide Mendolia",
                        "active": true
                    },
                    "body": "I started to work on it, during the phpbunghuntingday",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=idaf_1er",
                        "name": "idaf_1er",
                        "displayName": "Davide Mendolia",
                        "active": true
                    },
                    "created": "2008-11-08T04:06:54.000+0000",
                    "updated": "2008-11-08T04:06:54.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29647",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rob",
                        "name": "rob",
                        "displayName": "Rob Allen",
                        "active": true
                    },
                    "body": "Duplicate of ZF-5800.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rob",
                        "name": "rob",
                        "displayName": "Rob Allen",
                        "active": true
                    },
                    "created": "2009-03-21T13:16:52.000+0000",
                    "updated": "2009-03-21T13:16:52.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4369\/transitions"
}