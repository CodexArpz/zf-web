{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11029",
    "key": "ZF-11029",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Cannot load translations if the path contains a dot "
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11029\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2011-02-06T13:48:49.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ithier",
                "name": "ithier",
                "displayName": "Ithier de Lestrange",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2011-02-03T08:56:48.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-02-16T03:21:00.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "When I try to load translations with the GetText adapter (only one I have tested) if the path of the translations contains a dot then no translation is loaded.\r\n\r\nI have created a simple index.php page (see below) that only load .po files. When this page (and the directories that contains the translations) are in c:\\dev\\toto\\project then all is fine, but if I rename the directory 'toto' to '.toto', then I get two notices:\r\n{code:title=Notice|borderStyle=solid}\r\nNotice: The language 'fr_FR' has to be added before it can be used. in C:\\Travail\\Netbeans\\Zend\\ZendFramework\\library\\Zend\\Translate\\Adapter.php on line 430\r\n\r\nCall Stack:\r\n    0.0004     321728   1. {main}() C:\\Travail\\Tmp\\.toto\\index.php:0\r\n    0.0058    1064824   2. Zend_Translate->__construct() C:\\Travail\\Tmp\\.toto\\index.php:16\r\n    0.0058    1064824   3. Zend_Translate->setAdapter() C:\\Travail\\Netbeans\\Zend\\ZendFramework\\library\\Zend\\Translate.php:93\r\n    0.0079    1121296   4. Zend_Translate_Adapter->__construct() C:\\Travail\\Netbeans\\Zend\\ZendFramework\\library\\Zend\\Translate.php:140\r\n    0.0094    1152104   5. Zend_Translate_Adapter->setLocale() C:\\Travail\\Netbeans\\Zend\\ZendFramework\\library\\Zend\\Translate\\Adapter.php:180\r\n    0.0094    1152632   6. trigger_error() C:\\Travail\\Netbeans\\Zend\\ZendFramework\\library\\Zend\\Translate\\Adapter.php:430\r\n\r\n\r\n\r\nNotice: No translation for the language 'fr' available. in C:\\Travail\\Netbeans\\Zend\\ZendFramework\\library\\Zend\\Translate\r\n\\Adapter.php on line 443\r\n\r\nCall Stack:\r\n    0.0004     321728   1. {main}() C:\\Travail\\Tmp\\.toto\\index.php:0\r\n    0.0058    1064824   2. Zend_Translate->__construct() C:\\Travail\\Tmp\\.toto\\index.php:16\r\n    0.0058    1064824   3. Zend_Translate->setAdapter() C:\\Travail\\Netbeans\\Zend\\ZendFramework\\library\\Zend\\Translate.php:93\r\n    0.0079    1121296   4. Zend_Translate_Adapter->__construct() C:\\Travail\\Netbeans\\Zend\\ZendFramework\\library\\Zend\\Translate.php:140\r\n    0.0094    1152104   5. Zend_Translate_Adapter->setLocale() C:\\Travail\\Netbeans\\Zend\\ZendFramework\\library\\Zend\\Translate\\Adapter.php:180\r\n    0.0226    1152712   6. trigger_error() C:\\Travail\\Netbeans\\Zend\\ZendFramework\\library\\Zend\\Translate\\Adapter.php:443\r\n{code}\r\n\r\n\r\n{code:title=index.php|borderStyle=solid}\r\n<?php\r\n\r\n\/\/ Ensure library\/ is on include_path\r\nset_include_path(implode(PATH_SEPARATOR, array(\r\n    'c:\/Travail\/Netbeans\/Zend\/ZendFramework\/library\/',\r\n    get_include_path(),\r\n)));\r\n\r\nrequire_once 'Zend\/Translate.php';\r\n$dir_lang = realpath(dirname(__FILE__)) . '\/langues';\r\n\r\n\/\/Load a translation\r\n$zt = new Zend_Translate(array('adapter' => Zend_Translate::AN_GETTEXT,\r\n                               'content' => $dir_lang,\r\n                               'locale'  => 'fr_FR',\r\n                               'scan'    => Zend_Translate::LOCALE_FILENAME));\r\n\r\n{code}\r\n\r\nTo test this code, just copy index.php in a directory with a dot, create a langues directory with one or two *.mo files and then execute 'php index.php'.\r\n\r\nI didn't understand all the code, but I think the problem lies in line 260 of the file Translate\/adapter.php:\r\n\r\n{code:title=index.php|borderStyle=solid}\r\n                } else {\r\n                    if (strpos($directory, DIRECTORY_SEPARATOR . $options['ignore']) !== false) {\r\n                        \/\/ ignore files matching first characters from option 'ignore' and all files below\r\n                        continue;\r\n                    }\r\n{code}\r\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11029\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10530",
                    "id": 10530,
                    "description": "Mini Release",
                    "name": "1.11.3",
                    "userReleaseDate": "01\/Feb\/11",
                    "archived": false,
                    "releaseDate": "2011-02-01",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10099",
                    "id": 10099,
                    "name": "Zend_Translate",
                    "description": "Provides translation functionality, based on standards such as TMX and Gettext.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44293",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Closing as non-issue.\r\n\r\nZend_Translate provides an option \"ignore\" which is per default set to \".\".\r\nThis means any file or directory beginning with \".\" is ignored.\r\n\r\nWhen you want to use another ignore pattern you just have to set it.\r\nNormally \".\" files are hidden directories like those from SVN or the OS.\r\n\r\nSet your own pattern to get it working in your environment.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2011-02-06T13:48:49.000+0000",
                    "updated": "2011-02-06T13:48:49.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44305",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ithier",
                        "name": "ithier",
                        "displayName": "Ithier de Lestrange",
                        "active": true
                    },
                    "body": "OK, I understand my problem and I have modified my environment. But isn't it a little bit strange that this ignore option applies to the whole path and not only to the part after the content option passed as an argument to the Zend_Translate constructor.\r\n\r\nFor example if the directory structure is as follow:\r\n{code}\r\nC:\\proj\\toto\\application\\configs\\langues\\.dir\\xxx\r\nC:\\proj\\toto\\application\\configs\\langues\\fr\\fr.mo\r\n{code}\r\nIt is normal that the xxx file will not be loaded but the fr.mo will.\r\n\r\nBut if the directory structure is as follow :\r\n{code}\r\nc:\\proj\\.hudson\\Jobs\\toto\\application\\configs\\langues\\.dir\\xxx\r\nc:\\proj\\.hudson\\Jobs\\toto\\application\\configs\\langues\\fr\\fr.mo\r\n{code}\r\nIs it normal that no translation file is loaded because there is a directory with a dot (.hudson) somewhere in my path?\r\n\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ithier",
                        "name": "ithier",
                        "displayName": "Ithier de Lestrange",
                        "active": true
                    },
                    "created": "2011-02-07T07:01:38.000+0000",
                    "updated": "2011-02-07T07:01:38.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44384",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "This behaviour of hudson was already reported 2 weeks ago with ZF-10941.\r\nTherefor this issue will not be reopened.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2011-02-16T03:21:00.000+0000",
                    "updated": "2011-02-16T03:21:00.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11029\/transitions"
}