{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8624",
    "key": "ZF-8624",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "setErrors doesn't function correctly or documentation is incorrect"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8624\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frenkel",
                "name": "frenkel",
                "displayName": "Frank Groeneveld",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-12-24T00:19:19.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-11-20T21:37:27.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "From the apidocs of Zend_Form_Element:\r\n\r\nsetErrors (line 1509)\r\n\r\nOverwrite any previously set error messages and flag as failed validation\r\n\r\nFrom the actual source code:\r\n\r\n        $this->clearErrorMessages();\r\n        return $this->addErrors($messages);\r\n\r\nSo, the $messages don't replace the old error messages, they are just added to the array. I think that the correct working would be something like:\r\n\r\n        $this->clearErrors(); \/* not that this doesn't exist yet *\/\r\n        return $this->addErrors($messages);"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8624\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User"
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10390",
                    "id": 10390,
                    "description": "Mini Release",
                    "name": "1.9.6",
                    "userReleaseDate": "24\/Nov\/09",
                    "archived": false,
                    "releaseDate": "2009-11-24",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10029",
                    "id": 10029,
                    "name": "Zend_Form",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37196",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mycroes",
                        "name": "mycroes",
                        "displayName": "Michael Croes",
                        "active": true
                    },
                    "body": "The documentation is correct. Any previously set errorMessages ($_errorMessages) will be unset, the new message will be set as $_errorMessages. You can use getErrorMessages() to verify that the result is as expected.\r\n\r\nHowever, if you called validation first and validation failed, then $_messages will contain the validation messages and getMessages() (not getErrorMessages()) will also return those.\r\n\r\nThus the difference between setErrors and setErrorMessages is only that a call is made to markAsError(), which will append the content of $_errorMessages to $_messages. Still the documentation is valid (because $_errorMessages still contains what is expected).\r\n\r\nThe weird thing is the function name though, because it does suggest what the reporter thought it should be.\r\n\r\nsetErrors() seems only to be useful when not used in conjunction with isValid, because when used together with isValid() will always result in the same result as calling setErrorMessages(), which is probably not what most people expect... (and this doesn't depend on the order of setError(Message)s() and isValid()).\r\n\r\nMy suggestion would be to make clear in the documentation that the function is useless in combination with isValid(), and will probably result in undesired behaviour.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mycroes",
                        "name": "mycroes",
                        "displayName": "Michael Croes",
                        "active": true
                    },
                    "created": "2009-12-28T04:00:38.000+0000",
                    "updated": "2009-12-28T04:00:38.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37197",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mycroes",
                        "name": "mycroes",
                        "displayName": "Michael Croes",
                        "active": true
                    },
                    "body": "Actually I am wrong on the last part. If $_errorMessages is set, isValid will do all the validation steps, but never add the validation messages... In other words, isValid is fairly inefficient when errors where manually set.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mycroes",
                        "name": "mycroes",
                        "displayName": "Michael Croes",
                        "active": true
                    },
                    "created": "2009-12-28T04:04:10.000+0000",
                    "updated": "2009-12-28T04:04:10.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/39267",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alab",
                        "name": "alab",
                        "displayName": "Christian Albrecht",
                        "active": true
                    },
                    "body": "Ups, i mean except \"flag as failed validation\".\r\nIs this desired to flag as failed when setErros() is called manually?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alab",
                        "name": "alab",
                        "displayName": "Christian Albrecht",
                        "active": true
                    },
                    "created": "2010-03-16T03:33:31.000+0000",
                    "updated": "2010-03-16T03:33:31.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/39725",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alab",
                        "name": "alab",
                        "displayName": "Christian Albrecht",
                        "active": true
                    },
                    "body": "Currently this Unit Test passes, please change it according to your expectations\r\n{code}\r\n    public function testSetErrorsOnElement()\r\n    {\r\n        $this->form->addElement('text','foo')\r\n                   ->foo->setErrors(array('foo Error'));\r\n\r\n        $this->assertFalse($this->form->foo->isValid('foo'));\r\n        $this->assertTrue($this->form->isValid(array('foo' => null)));\r\n\r\n        $this->assertSame($this->form->foo->getErrorMessages(), array('foo Error'));\r\n        $this->assertSame($this->form->foo->getMessages(),      array());\r\n        $this->assertSame($this->form->foo->getErrors(),        array());\r\n\r\n        $this->assertSame($this->form->getErrorMessages(), array());\r\n        $this->assertSame($this->form->getMessages(),      array());\r\n        $this->assertSame($this->form->getErrors(),        array('foo' => array()));\r\n    }\r\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alab",
                        "name": "alab",
                        "displayName": "Christian Albrecht",
                        "active": true
                    },
                    "created": "2010-04-02T03:48:00.000+0000",
                    "updated": "2010-04-02T03:48:00.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/39726",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alab",
                        "name": "alab",
                        "displayName": "Christian Albrecht",
                        "active": true
                    },
                    "body": "At least the Form Validation should fail with $foo->setErrors(), should it not?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alab",
                        "name": "alab",
                        "displayName": "Christian Albrecht",
                        "active": true
                    },
                    "created": "2010-04-02T03:51:04.000+0000",
                    "updated": "2010-04-02T03:51:04.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8624\/transitions"
}