{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4204",
    "key": "ZF-4204",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend Form Method \"getValues()\" does not maintain subform names"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4204\/votes",
                "votes": 1,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/2",
                "name": "Won't Fix"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2008-09-10T20:51:34.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=travisjryan",
                "name": "travisjryan",
                "displayName": "Travis J Ryan",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-09-05T09:02:59.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-04-29T17:28:33.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "{code:title=function getValues() [1.6.0RC2 - 1.6.0] [LINE: 1286]}$values = array_merge($values, $fValues);{code}\n\n\n\nNaming a SubForm with a numeric value results in loss of that name when calling $form->getValues();\n\nSince the storage of Subforms uses an associative array, it seems ZF should maintain those keys regardless of type. Using array_merge() will rekey any arrays with numeric values as keys resulting in the loss of that SubForm name.  \n\n\n\n{code:title=Example}\n$form = new Zend_Form;\n$form->addElement( new Zend_Form_Element_Text('username') );\n\n$subform = new Zend_Form_SubForm();\n$subform->addElement( new Zend_Form_Element_Text('subform_name') );\n\n$form->addSubForm($subform, '12345'); \/\/ Naming it with a string that happens to be numeric\n\n$simulated_request = array('username'=>'JoeTest', \n\t\t\t\t\t\t\t'12345'=>array('subform_name'=>'FredTest')\n\t\t\t\t\t\t\t);\n$form->populate($simulated_request);\n$form_values = $form->getValues();\necho \"<pre>\".print_r($form_values, true);\n{code}\n\n{code:title=Result}\nArray\n(\n    [username] => JoeTest\n    [0] => Array\n        (\n            [subform_name] => FredTest\n        )\n\n)\n{code}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4204\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10240",
                    "id": 10240,
                    "description": "Minor Release",
                    "name": "1.6.0",
                    "userReleaseDate": "02\/Sep\/08",
                    "archived": false,
                    "releaseDate": "2008-09-02",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10029",
                    "id": 10029,
                    "name": "Zend_Form",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24433",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "For a variety of reasons, we decided that element, sub form, and display group names must be valid variable names. This means that numeric names are not compatible with the design. We have no plans to alter that support.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-09-10T20:51:34.000+0000",
                    "updated": "2008-09-10T20:51:34.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43320",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=_sims_",
                        "name": "_sims_",
                        "displayName": "Simon",
                        "active": true
                    },
                    "body": "I can confirm this. Having a bit of memory, I do remember that PHP does not allow var names to start with digits. However, perhaps this \"element, sub form, and display group names must be valid variable names\" can be added to the docs somewhere. It helps save time. I'll add it as a comment for now.\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=_sims_",
                        "name": "_sims_",
                        "displayName": "Simon",
                        "active": true
                    },
                    "created": "2010-11-24T19:33:01.000+0000",
                    "updated": "2010-11-24T19:33:01.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43321",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=_sims_",
                        "name": "_sims_",
                        "displayName": "Simon",
                        "active": true
                    },
                    "body": "(A side note as to why integers as subform's names)\r\n\r\nOne subform per row.\r\n\r\nYou can get what you want by doing this:\r\n$data = $this->getRequest()->getPost();\r\n\r\nRather than:\r\n\r\n$data = $form->getValues()\r\n\r\nBut that of course is not validated. It works for me since for scafolding, as I want my subform's name to be the id of a row. Otherwise I need to use hidden elements or setName('id' . $rowid) and then substr($subformname, 2). Ugly. I guess a hidden element might be the correct way to do that.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=_sims_",
                        "name": "_sims_",
                        "displayName": "Simon",
                        "active": true
                    },
                    "created": "2010-11-24T19:53:49.000+0000",
                    "updated": "2010-11-24T19:53:49.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/46209",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jsheth",
                        "name": "jsheth",
                        "displayName": "Jayesh Sheth",
                        "active": true
                    },
                    "body": "Hi,\r\n\r\nit seems that using dashes in element values creates unexpected results.\r\n\r\nFor example, imagine that I'm creating a multi-select element using the following ini configuration:\r\n\r\n;Section\r\nelements.section.type = \"multiselect\"\r\nelements.section.options.class = \"field\"\r\nelements.section.options.label = \"Section\"\r\nelements.section.options.multiOptions.city-guide = \"City Guide\"\r\nelements.section.options.multiOptions.citystreets = \"City Streets\"\r\nelements.section.options.multiOptions.cityroads = \"City Roads\"\r\nelements.section.options.value.cityroads = \"cityroads\"\r\nelements.section.options.value.city-guide = \"city-guide\"\r\n\r\nIt won't work as expected. Only the \"City Roads\" option will be selected.\r\n\r\nThis is because when the config is converted into a PHP array, it cuts off the \"city-\" part of \"city-guide\":\r\n\r\nArray\r\n(\r\n    [class] => field\r\n    [label] => Section\r\n    [multiOptions] => Array\r\n        (\r\n            [guide] => City Guide\r\n            [citystreets] => City Streets\r\n            [cityroads] => City Roads\r\n        )\r\n\r\n    [value] => Array\r\n        (\r\n            [cityroads] => cityroads\r\n            [guide] => city-guide\r\n        )\r\n\r\n)\r\n\r\nThen it calls Zend_Form_Element_Multiselect->setValue(Array\r\n(\r\n    [cityroads] => cityroads\r\n    [guide] => city-guide\r\n)\r\n)\r\n\r\nWhich would fail for the city-guide option.\r\n\r\nI would prefer that it do either of the following (in order of preference):\r\n\r\n* replace dashes with an empty string, so that city-guide becomes 'cityguide' internally, and so setValue still works\r\n* throws an Exception whenever it encounters an invalid option name, with instructions on how to format it correctly\r\n\r\nAdditionally, the official documentation should have a bold note explain how this works.\r\nThanks!\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jsheth",
                        "name": "jsheth",
                        "displayName": "Jayesh Sheth",
                        "active": true
                    },
                    "created": "2011-04-29T17:28:33.000+0000",
                    "updated": "2011-04-29T17:28:33.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4204\/transitions"
}