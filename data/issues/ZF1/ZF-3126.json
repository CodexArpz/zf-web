{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3126",
    "key": "ZF-3126",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "When using add() to add Zend_Date::MONTH the day becomes reset"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3126\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2008-04-19T13:45:12.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jasoneisen",
                "name": "jasoneisen",
                "displayName": "Jason Eisenmenger",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-04-17T08:41:37.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2008-04-19T14:26:07.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "{code}\n$date = new Zend_Date('2008-01-15');\n$date->add('1', Zend_Date::MONTH);\necho $date->toString();\n{code}\nExpected result:\n{code}\nFeb 15, 2008 12:00:00 AM\n{code}\nActual result:\n{code}\nFeb 1, 2008 12:00:00 AM\n{code}\n\nWhen adding Zend_Date::YEAR it works fine."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3126\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10174",
                    "id": 10174,
                    "description": "Mini Release",
                    "name": "1.5.1",
                    "userReleaseDate": "25\/Mar\/08",
                    "archived": true,
                    "releaseDate": "2008-03-25",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10072",
                    "id": 10072,
                    "name": "Zend_Date",
                    "description": "Zend_Date is the basic library for the handling of all date, time and calendar-related issues.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/21198",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "When I run your code I retrieve \n\n{code}\n15.02.2008 00:00:00\n{code}\n\nAs you did not set your locale and also did not set a proper format Zend_Date will use the default format from the locale which is automatically detected by your browser or environment.\n\nI am sure the class does all correct.\n\nLook what is the default format for your locale and look if there is any difference to your input format. Also you could set the input format manually if you know how it looks like.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2008-04-19T06:34:34.000+0000",
                    "updated": "2008-04-19T06:34:34.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/21205",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jasoneisen",
                        "name": "jasoneisen",
                        "displayName": "Jason Eisenmenger",
                        "active": true
                    },
                    "body": "It is detecting the right format and locale before I add the month.  I don't understand what is different in your setup and why it works with year but not month.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jasoneisen",
                        "name": "jasoneisen",
                        "displayName": "Jason Eisenmenger",
                        "active": true
                    },
                    "created": "2008-04-19T11:36:01.000+0000",
                    "updated": "2008-04-19T11:36:01.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/21206",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "And how should we understand ?\nWe have tried with 'de_AT', 'en' and 'ar' and also with different timezones.\n\nIf you do not give us any data for reproduction we will have to close this issue as unreproducable.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2008-04-19T12:10:51.000+0000",
                    "updated": "2008-04-19T12:10:51.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/21207",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jasoneisen",
                        "name": "jasoneisen",
                        "displayName": "Jason Eisenmenger",
                        "active": true
                    },
                    "body": "I have made a simple test script that I am using outside of any zend application:\n\n{code}\n<?php\n\ndate_default_timezone_set('America\/New_York');\nrequire_once '\/Users\/jason\/Sites\/ZendFramework\/library\/Zend\/Date.php';\n\n$date = new Zend_Date('2008-01-15 00:00:00', null, 'en_US');\n$firstDate = $date->toString() .' -> ';\n\n$date2 = new Zend_Date();\n$secondDate = $date2->toString() .' -> ';\n\n$date->add('1', Zend_Date::MONTH);\n$date2->add('1', Zend_Date::MONTH);\n\necho $firstDate . $date->toString() .'<br \/>';\necho $secondDate . $date2->toString();\n\n?>\n{code}\n\nThis outputs the following:\n{code}\nJan 15, 2008 12:00:00 AM -> Feb 1, 2008 12:00:00 AM\nApr 19, 2008 2:11:38 PM -> May 1, 2008 2:11:38 PM\n{code}\n\nI don't know what else there is to set. Or what I am missing.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jasoneisen",
                        "name": "jasoneisen",
                        "displayName": "Jason Eisenmenger",
                        "active": true
                    },
                    "created": "2008-04-19T13:14:17.000+0000",
                    "updated": "2008-04-19T13:14:17.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/21208",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "When adding \/ substracting months you should set the \"extend_month\" option.\nThis is described within the manual :\n\nSee http:\/\/framework.zend.com\/manual\/en\/zend.date.overview.html\nZend_Date Options -> Month Calculations",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2008-04-19T13:44:58.000+0000",
                    "updated": "2008-04-19T13:44:58.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/21209",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jasoneisen",
                        "name": "jasoneisen",
                        "displayName": "Jason Eisenmenger",
                        "active": true
                    },
                    "body": "{code}\nZend_Date::setOptions(array('extend_month' => true));\n{code}\n\nThis fixed it.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jasoneisen",
                        "name": "jasoneisen",
                        "displayName": "Jason Eisenmenger",
                        "active": true
                    },
                    "created": "2008-04-19T13:49:07.000+0000",
                    "updated": "2008-04-19T13:49:07.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/21210",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jasoneisen",
                        "name": "jasoneisen",
                        "displayName": "Jason Eisenmenger",
                        "active": true
                    },
                    "body": "Per the documentation, though:\n{code}\nFor example, when adding one month to January 31st, people familiar with SQL will expect February 28th as the result.  On the other side, people familiar with Excel and OpenOffice will expect March 3rd as the result.\n{code}\n\nA simple test.  Notice the year 2007, as 2008 is a leap year.\n{code}\n<?php\n\ndate_default_timezone_set('America\/New_York');\nrequire_once '\/Users\/jason\/Sites\/ZendFramework\/library\/Zend\/Date.php';\n\n$date = new Zend_Date('2007-01-31 00:00:00', null, 'en_US');\n$outDate = $date->toString() .' -> ';\n$date->add('1', Zend_Date::MONTH);\n\necho $outDate . $date->toString() .'<br \/>';\n\nZend_Date::setOptions(array('extend_month' => true));\n\n$date = new Zend_Date('2007-01-31 00:00:00', null, 'en_US');\n$outDate = $date->toString() .' -> ';\n$date->add('1', Zend_Date::MONTH);\n\necho $outDate . $date->toString() .'<br \/>';\n\n?>\n{code}\nThis returns:\n{code}\nJan 31, 2007 12:00:00 AM -> Mar 1, 2007 12:00:00 AM\nJan 31, 2007 12:00:00 AM -> Mar 3, 2007 12:00:00 AM\n{code}\n\nThe first result is not the expected Feb 28th.\n\nAnother interesting thing I found, adding a month to Jan 1:\n{code}\n<?php\n\ndate_default_timezone_set('America\/New_York');\nrequire_once '\/Users\/jason\/Sites\/ZendFramework\/library\/Zend\/Date.php';\n\n$date = new Zend_Date('2007-01-01 00:00:00', null, 'en_US');\n$outDate = $date->toString() .' -> ';\n$date->add('1', Zend_Date::MONTH);\n\necho $outDate . $date->toString();\n\n?>\n{code}\n\nWill return:\n{code}\nJan 1, 2007 12:00:00 AM -> Jan 1, 2007 12:00:00 AM\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jasoneisen",
                        "name": "jasoneisen",
                        "displayName": "Jason Eisenmenger",
                        "active": true
                    },
                    "created": "2008-04-19T14:13:19.000+0000",
                    "updated": "2008-04-19T14:13:19.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/21211",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jasoneisen",
                        "name": "jasoneisen",
                        "displayName": "Jason Eisenmenger",
                        "active": true
                    },
                    "body": "Note on adding the month to Jan 1, it works with the extend_month set, but not without it.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jasoneisen",
                        "name": "jasoneisen",
                        "displayName": "Jason Eisenmenger",
                        "active": true
                    },
                    "created": "2008-04-19T14:17:10.000+0000",
                    "updated": "2008-04-19T14:17:10.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/21212",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "You forgot the DST change (summer\/wintertime) in your first example.\nAlso in your second example you did not set a timezone which results in the date having 5 hours\nsubstracted due to your default timezone and your given UTC date.\n\nThis is not a problem... when you have problems with date maths please use the mailing lists and not the issue tracker.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2008-04-19T14:26:07.000+0000",
                    "updated": "2008-04-19T14:26:07.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3126\/transitions"
}