{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8145",
    "key": "ZF-8145",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Broken test case, Zend_Translate_Adapter_IniTest:testCreate() causes fatal error"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/13",
                "name": "Unit Tests: Problem",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8145\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10380",
                    "id": 10380,
                    "description": "Mini Release",
                    "name": "1.9.5",
                    "userReleaseDate": "27\/Oct\/09",
                    "archived": false,
                    "releaseDate": "2009-10-27",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-10-26T09:21:15.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gnanderson",
                "name": "gnanderson",
                "displayName": "Graham Anderson",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-10-25T13:20:58.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-10-26T09:21:16.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Running Zend_Tranlsate_Adapter AllTests or the full test suite for release-1.9 branch and 1.9.x tagged releases fails with a fatal error\r\n\r\nPHP Fatal error:  Unsupported operand types in \/data\/php5\/ZendFramework\/library\/Zend\/Translate\/Adapter.php on line 482\r\n\r\nThe Zend_Tranlsate_Adapter tests do not appear to be broken in trunk, but having spoken to Thomas on IRC there may be a BC issue with the changes in Zend\/Translate\/Adapter.php currently in trunk. If there are issues with merging the code from trunk would it be possible to mark the test skipped or incomplete? Broken test suite is the same as no test suite imo."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8145\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10350",
                    "id": 10350,
                    "description": "Mini Release",
                    "name": "1.9.1",
                    "userReleaseDate": "11\/Aug\/09",
                    "archived": false,
                    "releaseDate": "2009-08-11",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10361",
                    "id": 10361,
                    "description": "Mini Release",
                    "name": "1.9.2",
                    "userReleaseDate": "25\/Aug\/09",
                    "archived": false,
                    "releaseDate": "2009-08-25",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10362",
                    "id": 10362,
                    "description": "Mini Release",
                    "name": "1.9.3",
                    "userReleaseDate": "22\/Sep\/09",
                    "archived": false,
                    "releaseDate": "2009-09-22",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10370",
                    "id": 10370,
                    "description": "Mini Release",
                    "name": "1.9.4",
                    "userReleaseDate": "13\/Oct\/09",
                    "archived": false,
                    "releaseDate": "2009-10-13",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10099",
                    "id": 10099,
                    "name": "Zend_Translate",
                    "description": "Provides translation functionality, based on standards such as TMX and Gettext.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35534",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Not reproducable, please give additional infos:\r\n\r\nOS, php release, ZF release (I don't expect that you've really tested with 5 different releases the same time), the complete error\/exception which is thrown\/returned\r\n\r\nAnd no, trunk has no BC issue, but new features are not allowed to be integrated into branch. Only bugs are allowed to be branched. The changeset you pointed to is no bug fix but a feature enhancement and this could lead to a BC breaking behaviour as features must not change between mini releases.\r\n\r\nAnd no, unit test problems are not intentionally fatal problems. Especially when there is one error within 400 tests of one component.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-10-25T16:01:27.000+0000",
                    "updated": "2009-10-25T16:01:27.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35540",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gnanderson",
                        "name": "gnanderson",
                        "displayName": "Graham Anderson",
                        "active": true
                    },
                    "body": "\r\nActually I did test with all of the 1.9 releases including the release-1.9 branch, although I was mistaken about the issue existing in 1.9.0 (I don't expect that *you've* really tried to reproduce this against different versions).\r\n\r\n{quote}(I don't expect that you've really tested with 5 different releases the same time){quote}\r\n\r\nThomas, please comment on the issue rather than on whether or  not you think the reporter is being dishonest. Issue reporters will mostly not bother posting again if you have an attitude problem.\r\n\r\nHere is your further info:\r\n\r\n{code}\r\n Zend_Translate_Adapter_IniTest::testCreate()\r\n\r\nPHP Fatal error:  Unsupported operand types in \/data\/php5\/ZendFramework\/library\/Zend\/Translate\/Adapter.php on line 482\r\nPHP Stack trace:\r\nPHP   1. {main}() \/usr\/bin\/phpunit:0\r\nPHP   2. require() \/usr\/bin\/phpunit:44\r\nPHP   3. PHPUnit_TextUI_Command::main() \/usr\/share\/php5\/PEAR\/PHPUnit\/TextUI\/Command.php:718\r\nPHP   4. PHPUnit_TextUI_TestRunner->doRun() \/usr\/share\/php5\/PEAR\/PHPUnit\/TextUI\/Command.php:131\r\nPHP   5. PHPUnit_Framework_TestSuite->run() \/usr\/share\/php5\/PEAR\/PHPUnit\/TextUI\/TestRunner.php:324\r\nPHP   6. PHPUnit_Framework_TestSuite->run() \/usr\/share\/php5\/PEAR\/PHPUnit\/Framework\/TestSuite.php:636\r\nPHP   7. PHPUnit_Framework_TestSuite->runTest() \/usr\/share\/php5\/PEAR\/PHPUnit\/Framework\/TestSuite.php:673\r\nPHP   8. PHPUnit_Framework_TestCase->run() \/usr\/share\/php5\/PEAR\/PHPUnit\/Framework\/TestSuite.php:692\r\nPHP   9. PHPUnit_Framework_TestResult->run() \/usr\/share\/php5\/PEAR\/PHPUnit\/Framework\/TestCase.php:375\r\nPHP  10. PHPUnit_Framework_TestCase->runBare() \/usr\/share\/php5\/PEAR\/PHPUnit\/Framework\/TestResult.php:609\r\nPHP  11. PHPUnit_Framework_TestCase->runTest() \/usr\/share\/php5\/PEAR\/PHPUnit\/Framework\/TestCase.php:401\r\nPHP  12. ReflectionMethod->invoke() \/usr\/share\/php5\/PEAR\/PHPUnit\/Framework\/TestCase.php:486\r\nPHP  13. Zend_Translate_Adapter_IniTest->testCreate() \/data\/php5\/ZendFramework\/tests\/Zend\/Translate\/Adapter\/IniTest.php:0\r\nPHP  14. Zend_Translate_Adapter_Ini->__construct() \/data\/php5\/ZendFramework\/tests\/Zend\/Translate\/Adapter\/IniTest.php:67\r\nPHP  15. Zend_Translate_Adapter->__construct() \/data\/php5\/ZendFramework\/library\/Zend\/Translate\/Adapter\/Ini.php:48\r\nPHP  16. Zend_Translate_Adapter->addTranslation() \/data\/php5\/ZendFramework\/library\/Zend\/Translate\/Adapter.php:117\r\nPHP  17. Zend_Translate_Adapter->_addTranslationData() \/data\/php5\/ZendFramework\/library\/Zend\/Translate\/Adapter.php:212\r\n{code}\r\n\r\n{code}\r\nOS        | PHP Release | ZF Release  | Issue occurs\r\n----------+-------------+-------------+-------------\r\nGNU\/Linux | 5.2.11      | 1.9.1-1.9.4 | No\r\nGNU\/Linux | 5.3.0       | 1.9.1-1.9.4 | Yes\r\nGNU\/Linux | 5.3.0       | Trunk       | No\r\n{code}\r\n\r\nThe problem lies in the structure of the two arrays being merged, here is the statement where the issue occurs.\r\n\r\n{code}\r\n$this->_translate[$key] = $temp[$key] + $this->_translate[$key];\r\n{code}\r\n\r\nIn PHP 5.3.0 the value of $temp[$key] is null whereas in PHP 5.2.x it is an empty array. This is a result of the differing return value of parse_ini_file() between PHP versions.\r\n\r\n{quote}\r\nAnd no, trunk has no BC issue, but new features are not allowed to be integrated into branch. Only bugs are allowed to be branched. The changeset you pointed to is no bug fix but a feature enhancement and this could lead to a BC breaking behaviour as features must not change between mini releases.\r\n{quote}\r\n\r\nI'm confused, there is no BC issue but the changeset can't be merged because there *is* a BC issue? \r\n\r\nThe changeset is http:\/\/framework.zend.com\/code\/browse\/Standard_Library\/standard\/trunk\/library\/Zend\/Translate\/Adapter.php?r1=17760&r2=17784\r\n\r\nThe conditional check made against the array operation in the _addTranslationData() method in this changeset addresses the broken test case when using PHP 5.3. I don't understand why this code change was added in the same commit as the other changes which address #ZF-7508, the changes are entirely unrelated.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gnanderson",
                        "name": "gnanderson",
                        "displayName": "Graham Anderson",
                        "active": true
                    },
                    "created": "2009-10-26T04:12:46.000+0000",
                    "updated": "2009-10-26T04:12:46.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35541",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "When it's your opinion that my request for further information is nonsense then please think before you write in such a manner.\r\n\r\nI could also have closed the issue as not-reproducable as I was not able to reproduce it which I definetly wrote. And as you wrote in your second reply the issue is related to a special php version which was not available at the time 1.9 was released.\r\n\r\nThis would have been a very important information in my opinion as reading your reply it seems to me that you had it already before you wrote the issue.\r\n\r\nThe other discussion points are useless in my eyes as you are picking out one commit of multiple commits which adressed new features. Just because you don't understand the commits, it does not mean that they are allowed to be branched. As already stated, only bug fixes are allowed to be merged. No features and no improvements.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-10-26T04:55:29.000+0000",
                    "updated": "2009-10-26T04:55:29.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35543",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gnanderson",
                        "name": "gnanderson",
                        "displayName": "Graham Anderson",
                        "active": true
                    },
                    "body": "{quote}\r\nWhen it's your opinion that my request for further information is nonsense then please think before you write in such a manner.\r\n{quote}\r\n\r\nYour request for further information is valid and I have not stated otherwise. Your suggestion that i was being dishonest by apparently pulling out of thin air the versions that I found to be affected is what I have a problem with.\r\n\r\n{quote}\r\nThe other discussion points are useless in my eyes as you are picking out one commit of multiple commits which adressed new features. Just because you don't understand the commits, it does not mean that they are allowed to be branched. As already stated, only bug fixes are allowed to be merged. No features and no improvements.\r\n{quote}\r\n\r\n*Sigh*. I'm picking commit r17784 because, gasp, this commit is the one that stops the issue from happening when running the tests against trunk. I'm not asking for a feature to be merged but again; I will say that some of the code changes in that commit are *unrelated* to the issue it is resolving. Specifically the following changes.\r\n\r\n{code}\r\n<>\t482\t \t-\t            $this->_translate[$key] = $temp[$key] + $this->_translate[$key];\r\n \t \t482\t+\t            if (array_key_exists($key, $temp) && is_array($temp[$key])) {\r\n \t \t483\t+\t                $this->_translate[$key] = $temp[$key] + $this->_translate[$key];\r\n \t \t484\t+\t            }\r\n{code}\r\n\r\nThe obvious solution would be to separate those changes from the other ones affecting the return values that were for #ZF-7508.\r\n\r\nIf you don't wish to deal with this issue please say so and I'll re-assign it to someone else.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gnanderson",
                        "name": "gnanderson",
                        "displayName": "Graham Anderson",
                        "active": true
                    },
                    "created": "2009-10-26T05:24:49.000+0000",
                    "updated": "2009-10-26T05:24:49.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35544",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "{quote}\r\nIf you don't wish to deal with this issue please say so and I'll re-assign it to someone else.\r\n{quote}\r\n\r\nYou are not allowed to reassign and I am the component maintainer, so I must know how to deal with this issue.\r\n\r\nYou may not read it within the mailing list, but we have a code freeze for branch already before you reported this issue. So actually no one is allowed to commit to branch, not even me.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-10-26T05:39:33.000+0000",
                    "updated": "2009-10-26T05:39:33.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8145\/transitions"
}