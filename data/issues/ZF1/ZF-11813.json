{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11813",
    "key": "ZF-11813",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Cache_Backend_TwoLevels -> auto_refresh_fast_cache causes problems with cleaning by tag(s)"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11813\/votes",
                "votes": 1,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=flytony",
                "name": "flytony",
                "displayName": "Anton St\u00f6ckl",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2011-10-11T10:23:05.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-08-24T21:11:20.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "Zend_Cache_Backend_TwoLevels",
                "auto_refresh_fast_cache",
                "flush",
                "tags"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "The default for \"auto_refresh_fast_cache\" option in the TwoLevels Cache is true.\r\nImho this is a bad idea as it causes problems when the flushing by tags is used.\r\nIn my scenario the fast backend is memcached and the slow backend is file (but should be the same with all other backend combinations).\r\n\r\nLet's assume the cache timeout is one hour.\r\nLet's further assume the website has at least some requests every couple of minues.\r\nWith the \"auto_refresh_fast_cache\" option all hit cache items in the fast cache get their lifetime extended (endlessly, unless there is no cache hit for one hour).\r\nTo the contrary the corresponding slow cache item expires after one hour.\r\nIf there is a cleaning done by tags (e.g.: Zend_Cache::CLEANING_MODE_MATCHING_ANY_TAG) then the item in memcache will not be removed as expired items geet ignored:\r\n\r\n{code:title=File.php \/ Zend_Cache_Backend_File - function _get() |borderStyle=solid}\r\nif (time() > $metadatas['expire']) {\r\n    continue;\r\n}\r\n{code}\r\n\r\nSo we end up with a not deleted, not deletable (by tags) zombie item in memcache.\r\n\r\nI don't see any good reason for the \"auto_refresh_fast_cache\" option to be true but in any case there should be a warning in the documentation (and also in the Class file) that this will cause problems when cleaning by tags is used! Imho the default should also be changed to \"false\" for this option.\r\n\r\nBest regards, Anton"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11813\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [
                "cache",
                "zf-crteam-review"
            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alexander",
                "name": "alexander",
                "displayName": "Alexander Veremyev",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10981",
                    "id": 10981,
                    "description": "Mini Release",
                    "name": "1.11.11",
                    "userReleaseDate": "29\/Sep\/11",
                    "archived": false,
                    "releaseDate": "2011-09-29",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10028",
                    "id": 10028,
                    "name": "Zend_Cache",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48685",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=flytony",
                        "name": "flytony",
                        "displayName": "Anton St\u00f6ckl",
                        "active": true
                    },
                    "body": "Any reason why this fix: http:\/\/framework.zend.com\/issues\/browse\/ZF-11524\r\nhast not made it into 1.11.11 (or before), by the way?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=flytony",
                        "name": "flytony",
                        "displayName": "Anton St\u00f6ckl",
                        "active": true
                    },
                    "created": "2011-10-13T15:30:58.000+0000",
                    "updated": "2011-10-13T15:30:58.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51716",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gomox",
                        "name": "gomox",
                        "displayName": "Gonzalo Sainz-Trapaga",
                        "active": true
                    },
                    "body": "This bit us real hard, please merge the above fix as it turns into a major headache in an impossible-to-reproduce way.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gomox",
                        "name": "gomox",
                        "displayName": "Gonzalo Sainz-Trapaga",
                        "active": true
                    },
                    "created": "2012-08-24T21:11:20.000+0000",
                    "updated": "2012-08-24T21:11:20.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11813\/transitions"
}