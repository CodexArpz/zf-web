{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11802",
    "key": "ZF-11802",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Dojo_View_Helper_Dijitt Improvement"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11802\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dprince87",
                "name": "dprince87",
                "displayName": "Daniel T Prince",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2011-10-07T00:00:51.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-10-28T18:05:47.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "dojo"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Currently Zend_Dojo_View_Helper_Dijit::setDijitParam() does not allow Javascript objects to be passed as parameters. I propose we add support for Zend_Json_Expr to be passed. Many parameters require objects to be passed to have the dijit work properly.\r\n\r\nA direct result of this change will require the Elements to support more than strings being passed to them.\r\n\r\n\r\nLine 241 of Zend_Dojo_View_Helper_Dijit only allows scalar values to be passed.\r\n{code}\r\n\r\n                    foreach ($params[$param] as $key => $value) {\r\n                        if (!is_scalar($value)) {\r\n                            continue;\r\n                        }\r\n                        $values[$key] = $value;\r\n                    }\r\n{code}\r\nto\r\n{code}\r\n                    foreach ($params[$param] as $key => $value) {\r\n                        if (!is_scalar($value)) {\r\n                        \tif(!($value instanceof Zend_Json_Expr))\r\n                            \tcontinue;\r\n                        \t\r\n                        }\r\n                        $values[$key] = $value;\r\n                    }\r\n\r\n{code}\r\n\r\nOne we allow Zend_Json_Expr we need to have Zend_Json look for the expressions on line 252:\r\n\r\n{code}\r\n\r\n                $values = Zend_Json::encode($values);\r\n{code}\r\nto \r\n{code}\r\n                 $values = Zend_Json::encode($values, false, array('enableJsonExprFinder' => true) );\r\n{code}\r\n\r\n\r\n\r\nIssue came up because I was trying to load additional plugins with Zend_Dojo_Form_Element_Editor. The plugin required more then a string to configure. Additional changes needed were in Zend_Dojo_Form_Element_Editor::addPlugin(). Has to remove the $plugin being cast to a string.\r\n\r\n{code}\r\n  public function addPlugin($plugin)\r\n    {\r\n        $plugin = (string) $plugin;\r\n        $plugins = $this->getPlugins();\r\n        if (in_array($plugin, $plugins) && $plugin !== '|') {\r\n            return $this;\r\n        }\r\n\r\n        $plugins[] = (string) $plugin;\r\n        $this->setDijitParam('plugins', $plugins);\r\n        return $this;\r\n    }\r\n\r\n{code}\r\n\r\nto \r\n\r\n{code}\r\n  public function addPlugin($plugin)\r\n    {\r\n        $plugin = $plugin;\r\n        $plugins = $this->getPlugins();\r\n        if (in_array($plugin, $plugins) && $plugin !== '|') {\r\n            return $this;\r\n        }\r\n\r\n        $plugins[] = $plugin;\r\n        $this->setDijitParam('plugins', $plugins);\r\n        return $this;\r\n    }\r\n{code}\r\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11802\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10980",
                    "id": 10980,
                    "description": "Mini Release",
                    "name": "1.11.10",
                    "userReleaseDate": "04\/Aug\/11",
                    "archived": false,
                    "releaseDate": "2011-08-04",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10311",
                    "id": 10311,
                    "name": "Zend_Dojo",
                    "description": "Dojo integration with Zend Framework",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48854",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "body": "You will need to sign and submit a CLA before we can review and possibly implement your proposed solution.\r\nSee here: http:\/\/framework.zend.com\/wiki\/display\/ZFPROP\/Contributor+License+Agreement",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "created": "2011-10-28T18:05:47.000+0000",
                    "updated": "2011-10-28T18:05:47.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11802\/transitions"
}