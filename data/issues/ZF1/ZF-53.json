{
    "expand": "html",
    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-53",
    "key": "ZF-53",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "quote() quotes numeric values inappropriately."
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-53\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/version\/10021",
                    "id": 10021,
                    "description": "Preview release; DB, Filter, Log",
                    "name": "0.8.0",
                    "userReleaseDate": "21\/Feb\/07",
                    "archived": true,
                    "releaseDate": "2007-02-21",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2007-02-18T15:38:18.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=zend_framework",
                "name": "zend_framework",
                "displayName": "Zend Framework",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2006-06-20T01:06:10.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2007-07-05T14:43:08.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I notice the quote() method quotes even numeric values which is not necessary.\n\nIts strange this problem is manifest only with scalars. With an array as an argument, it works as expected: quote( '123' ); RESULT: '123'\n\nquote( array( '1', 2, 3, 'a', 'b' )); RESULT: 1, 2, 3, 'a', 'b'\n\nthe problem is only with the quote(numeric-scalar). Doing an is_numeric() validation in the quote() method should do the trick.\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-53\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                "name": "bkarwin",
                "displayName": "Bill Karwin",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/version\/10010",
                    "id": 10010,
                    "description": "Preview Release",
                    "name": "0.1.3",
                    "userReleaseDate": "18\/Apr\/06",
                    "archived": true,
                    "releaseDate": "2006-04-18",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/component\/10012",
                    "id": 10012,
                    "name": "Zend_Db",
                    "description": "interfaces, APIs, and adapters for various third-party data stores",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10077",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=zend_framework",
                        "name": "zend_framework",
                        "displayName": "Zend Framework",
                        "active": true
                    },
                    "body": "05\/22\/06 11:52:28: Modified by jayson\n\n    * component changed from Documentation to Zend_Db.\n\n05\/22\/06 15:50:20: Modified by rob.nospam@akrabat.com\n\nFor the PDO drivers, if this is a bug, then it is in PDO rather than in the framework code.\n\nZend_Db_Adapter_Pdo_Abstract::quote() calls the PDO drivers quote() function to do the work.\n\nhttp:\/\/uk.php.net\/manual\/en\/function.pdo-quote.php clearly shows that it takes a string, not a mixed, so I suspect that it is by design.\n\nHaving said that, the manual page also says: \"PDO::quote() places quotes around the input string (if required) and escapes special characters within the input string, using a quoting style appropriate to the underlying driver.\" The \"if required\" bit makes me wonder if the PDO drivers are supposed to be cleverer than they are.\n\nIncidentally, I'm seeing quoted numbers in all cases for PDO drivers:\n{code}\n        \/\/ test numeric\n        $value = $this->_db->quote('1');\n        $this->assertEquals(\"'1'\", $value);\n\n        $value = $this->_db->quote(1);\n        $this->assertEquals(\"'1'\", $value);\n\n        $value = $this->_db->quote(array(1,'2',3));\n        $this->assertEquals(\"'1', '2', '3'\", $value);\n{code}\nall pass.\n",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=zend_framework",
                        "name": "zend_framework",
                        "displayName": "Zend Framework",
                        "active": true
                    },
                    "created": "2006-06-20T01:06:29.000+0000",
                    "updated": "2006-06-20T01:06:29.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10588",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "body": "Yields reasonable output, as expected according to PHP's PDO documentation:\n\n{code}\n<?\n$include_path = ini_get('include_path')   . PATH_SEPARATOR . \".\/zf\/library\";\nini_set('include_path',  $include_path); \n\nrequire 'zf\/library\/Zend\/Db.php';\n\n$adapt = Zend_Db::factory('PDO_Sqlite',array('dsnprefix'=>'sqlite','dbname'=>'foo.sq3'));\nvar_dump($adapt);\n$adapt->beginTransaction();\nvar_dump($adapt);\n\n$vals = array( '1', 2, 3, 'a', 'b' );\nforeach ( $vals as &$val)\n\n    $val = $adapt->quote($val);\n\nvar_dump(implode(', ', $vals));\n?>\n{code}\n\nAt some point, integers, strings, dates, and such must be converted from PHP's data types to the database's types.  Usually, programmers try to minimize the number of conversions for various reasons.  PDO's choice of normalizing to strings enables developers to see *exactly* what will be sent to the database, making it easy to test and debug.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "created": "2006-07-24T18:09:45.000+0000",
                    "updated": "2006-07-24T18:09:45.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10589",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "body": "\"PDO is deliberately somewhat type agnostic in that it prefers to represent data as strings instead of converting to integer or double types. You might wonder at this, but the reasoning is quite simple: the string type is the type that is most precise and has the largest range available in PHP; prematurely converting data into integers or doubles can lead to either truncation or rounding errors. By pulling the data out as strings, PDO gives your script control over how and when the conversion happens using the usual PHP type juggling facilities (such as casting and implicitly during mathematical operations).\"",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "created": "2006-07-24T18:43:09.000+0000",
                    "updated": "2006-07-24T18:43:09.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12833",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "This actually is an issue, for example for DB2 and MySQL.\n\nAn expression like \"columnName = '12'\" fails on DB2 because it has no implicit way of converting a string to an integer. \n\nThis is also an issue on MySQL, because a comparison of an integer column to a string spoils the optimizer.  It can't use an index on the column because it thinks it's comparing against an expression, not a constant of the matching type.  So it results in very bad performance.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2007-02-18T15:37:12.000+0000",
                    "updated": "2007-02-18T15:37:12.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12834",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "Fixed in revision 3520.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2007-02-18T15:38:18.000+0000",
                    "updated": "2007-02-18T15:38:18.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12835",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "Note that I used is_int(), not is_numeric().  is_int() returns true only for actual PHP integer scalars, but is_numeric() returns true for strings that contain characters valid for a numeric value.  I want strings to continue to be quoted even if they appear numeric, so that strings like '000123' where the leading zeroes are significant can be inserted (this is not an unusual case). ",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2007-02-18T15:43:43.000+0000",
                    "updated": "2007-02-18T15:43:43.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12836",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "Unit tests updated in revision 3521.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2007-02-18T15:52:47.000+0000",
                    "updated": "2007-02-18T15:52:47.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/15682",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bruno",
                        "name": "bruno",
                        "displayName": "Bruno CHALOPIN",
                        "active": true
                    },
                    "body": "Since version 1.0.0 production release, it raise un issue on MS SQL server.\nWhen inserting data in a string field, if the data is numeric, it raise un SQL error.\nThere should have an optional boolean parameter in the quote function wich enable or not the is_numeric test.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bruno",
                        "name": "bruno",
                        "displayName": "Bruno CHALOPIN",
                        "active": true
                    },
                    "created": "2007-07-03T15:27:42.000+0000",
                    "updated": "2007-07-03T15:27:42.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-53\/transitions"
}