{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9672",
    "key": "ZF-9672",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "setDispatched() documentation suggests actions can be aborted"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/8",
                "name": "Docs:  Problem",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9672\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mjs",
                "name": "mjs",
                "displayName": "Michael Stillwell",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-04-13T10:43:49.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-11-20T21:38:06.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I think there's some terminology issues relating to the way setDispatched()is documented in relation to Zend Controller Plugins.  I think it should be modified to make it clear that: (a) plugins typically cannot prevent a controller action from being invoked; and (b) setting the \"dispatched\" flag on a request via the setDispatched() method affects the preDispatch() process of plugins only, not whether the a controller action itself is invoked.\r\n\r\npreDispatch() is described at http:\/\/framework.zend.com\/manual\/en\/zend.controller.plugins.html as:\r\n\r\npreDispatch() is called before an action is dispatched by the dispatcher. This callback allows for proxy or filter behavior. By altering the request and resetting its dispatched flag (via Zend_Controller_Request_Abstract::setDispatched(false)), the current action may be skipped and\/or replaced.\r\n\r\nThis passage suggests that plugins can prevent a controller action from being dispatched, but in fact fiddling with the dispatched status via setDispatched() typically cannot prevent a controller action from being invoked.\r\n\r\nThe relevant section of code (from Zend_Controller_Front) is:\r\n\r\n{code}\r\n            do {\r\n                $this->_request->setDispatched(true);\r\n\r\n                \/**\r\n                 * Notify plugins of dispatch startup\r\n                 *\/\r\n                $this->_plugins->preDispatch($this->_request);\r\n\r\n                \/**\r\n                 * Skip requested action if preDispatch() has reset it\r\n                 *\/\r\n                if (!$this->_request->isDispatched()) {\r\n                    continue;\r\n                }\r\n\r\n                \/**\r\n                 * Dispatch request\r\n                 *\/\r\n                try {\r\n                    $dispatcher->dispatch($this->_request, $this->_response);\r\n                } catch (Exception $e) {\r\n                    if ($this->throwExceptions()) {\r\n                        throw $e;\r\n                    }\r\n                    $this->_response->setException($e);\r\n                }\r\n\r\n                \/**\r\n                 * Notify plugins of dispatch completion\r\n                 *\/\r\n                $this->_plugins->postDispatch($this->_request);\r\n            } while (!$this->_request->isDispatched());\r\n{code}\r\n\r\n$this->_plugins->preDispatch($this->_request) loops over all plugins within a try ... catch block--if the front controller is not set to throw exceptions, there is no way to prevent all registered plugins from running.  (i.e. throwing an exception will not prevent it, nor will calling methods on the request or response objects.)\r\n\r\nIn addition, not only is it impossible to prevent plugins from running, it's impossible for them to prevent\r\n\r\n{code}\r\n    $dispatcher->dispatch($this->_request, $this->_response);\r\n{code}\r\n\r\nfrom being called.  Even though setDispatched() includes the word \"dispatched\", it does not affect whether the \"dispatch()\" method itself is called.  I suggest that the documentation be changed to:\r\n\r\n\"This callback allows for proxy or filter behavior. By altering the request and resetting its dispatched flag (via Zend_Controller_Request_Abstract::setDispatched(false)), the loaded plugins are re-invoked.  (Note that it is not possible for plugins to prevent controller actions from being executed.)\""
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9672\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "customfield_10000": {
            "name": "Language",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/customFieldOption\/10000",
                "value": "English"
            }
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User"
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10011",
                    "id": 10011,
                    "name": "Zend_Controller",
                    "description": "front controller, including router and dispatcher",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/39960",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mjs",
                        "name": "mjs",
                        "displayName": "Michael Stillwell",
                        "active": true
                    },
                    "body": "Fixed formatting.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mjs",
                        "name": "mjs",
                        "displayName": "Michael Stillwell",
                        "active": true
                    },
                    "created": "2010-04-13T10:46:18.000+0000",
                    "updated": "2010-04-13T10:46:18.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9672\/transitions"
}