{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6980",
    "key": "ZF-6980",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Add support to validate cretid card numbers by provider"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/2",
                "name": "New Feature",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6980\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/7",
                "name": "Needs Proposal"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10360",
                    "id": 10360,
                    "description": "Minor Release",
                    "name": "1.10.0",
                    "userReleaseDate": "27\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-27",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-09-28T11:04:44.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mben",
                "name": "mben",
                "displayName": "Marc Bennewitz (GIATA mbH)",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-06-11T01:32:58.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-09-28T11:04:43.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Hi\n\nThe credit card providers have some more restrictions on they're card numbers.\n\ne.g.:\n- VISA:\n  * All Numbers starts with: 4\n  * The length is 16\n\n- MASTERCARD:\n  * All numbers starts with: 5[1-5]\n  * The length is 16\n\n- AMERICANEXPRESS:\n  * All numbers starts with: 3[4|7]\n  * The length is 15\n\n- JBC\n  * The length is 15 or 16\n\nI think this can be implement like this:\n{code}\n$ccNumValidator = new Zend_Validate_Ccnum();\n$ccNumValidator->useProviderRestriction(Zend_Validate_Ccnum::VISA);\n$ccVumValidator->isValid($myCcNum);\n\n\/\/ or\n$ccNumValidator = new Zend_Validate_Ccnum();\n$ccNumValidator->addProviderRestriction(\"visa\", \"4[0-9]{15}\"); \/\/ RegExp of VISA validator\n$ccNumValidator->useProviderRestriction(\"visa\");\n$ccVumValidator->isValid($myCcNum);\n{code}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6980\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10140",
                    "id": 10140,
                    "name": "Zend_Validate",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31738",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "No, this does not work.\nA correct validation for credit cards also include a checksum and probably a online-check.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-06-11T02:12:39.000+0000",
                    "updated": "2009-06-11T02:12:39.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31739",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mben",
                        "name": "mben",
                        "displayName": "Marc Bennewitz (GIATA mbH)",
                        "active": true
                    },
                    "body": "The checksum calculation is already implemented in Zend_Validate_Ccnum but this doesn't check restrictions for a specific provider.\n\nYou are right, the best check is the online check, but this doesn't work with every provider and the service request needn't be called if the check fails before.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mben",
                        "name": "mben",
                        "displayName": "Marc Bennewitz (GIATA mbH)",
                        "active": true
                    },
                    "created": "2009-06-11T02:30:58.000+0000",
                    "updated": "2009-06-11T02:30:58.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31743",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "CCnum does only a Luhn validation. Not sure if all credit cards are using this algorithm.\nAlso the length is nit correct with 13 to 16 chars.\n\nIn my eyes, CCNum is NO valid credit card check.\nIt only checks if the provided number COULD BE A CREDIT CARD, but it does no deeper check.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-06-11T03:07:57.000+0000",
                    "updated": "2009-06-11T03:07:57.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31751",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mben",
                        "name": "mben",
                        "displayName": "Marc Bennewitz (GIATA mbH)",
                        "active": true
                    },
                    "body": "http:\/\/en.wikipedia.org\/wiki\/Bank_card_number\n\nYou see that if a checksum validation than it is the luhn algorithm but some card types doesn't have a validation algorithm :( ???\n\nTherefor it could be better to implement it like this:\n{code}\n$myNumber = \"1234567\";\n\n$luhn = new Zend_Validate_Luhn();\n$luhn->isValid($mNumber); \/\/ does the luhn algorighm match this number\n\nZend_Validate_Ccnum::addCardType(\"visa\", array(\n    'algorithm' => 'luhn', \/\/ or new Zend_Validate_Luhn ???\n    'length' => array(13, 16), \/\/ valid lengths or if string only one length is valid\n    'prefix' => '4', \/\/ prefix pattern\n));\n$ccnum = new Zend_Validate_Ccnum();\n$ccnum->cardTypes(array(\"visa\", Zend_Validate_Ccnum::MASTERCARD));\n$ccnum->isValid($myNumber); \/\/ matches only if one of the given card types match\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mben",
                        "name": "mben",
                        "displayName": "Marc Bennewitz (GIATA mbH)",
                        "active": true
                    },
                    "created": "2009-06-11T03:34:06.000+0000",
                    "updated": "2009-06-11T03:34:06.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31755",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mben",
                        "name": "mben",
                        "displayName": "Marc Bennewitz (GIATA mbH)",
                        "active": true
                    },
                    "body": "or configure this only with validators than you can check every card types by different validators:\n{code}\nclass myVisaValidator implements Zend_Validate_Interface {\n    \/\/ ...\n}\nZend_Validate_Ccnum::addCardType(\"visa\", new myVisaValidator());\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mben",
                        "name": "mben",
                        "displayName": "Marc Bennewitz (GIATA mbH)",
                        "active": true
                    },
                    "created": "2009-06-11T03:39:30.000+0000",
                    "updated": "2009-06-11T03:39:30.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32490",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Proposal waiting for recommendation by the devteam since 19.06.2009",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-07-09T04:46:35.000+0000",
                    "updated": "2009-07-09T04:46:35.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34947",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Closing as \"Needs proposal\".\n\nNote that the related proposal has already been accepted for incubator development.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-09-28T11:04:43.000+0000",
                    "updated": "2009-09-28T11:04:43.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6980\/transitions"
}