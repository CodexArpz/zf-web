{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6077",
    "key": "ZF-6077",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend Soap Wsdl Strategy ArrayOfComplexType fails to generate JAX importable descriptions"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6077\/votes",
                "votes": 3,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=emartinez",
                "name": "emartinez",
                "displayName": "Erick Martinez",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-03-20T13:35:25.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-11-20T21:37:46.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "array",
                "arrayofcomplextype",
                "enc",
                "jax",
                "sequence",
                "soap",
                "strategy",
                "wsdl",
                "wsimport"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Zend_Soap_Wsdl_Strategy_ArrayOfTypeComplex makes use of soap enc array currently unsupported by many if not all JAX tools. I currently solved this by modifying Zend_Soap_Wsdl_Strategy_ArrayOfTypeComplex; instead I use a sequence of objects, so I changed from:\n\n{code}\n            $complexType = $dom->createElement('xsd:complexType');\n            $complexType->setAttribute('name', $xsdComplexTypeName);\n\n            $complexContent = $dom->createElement(\"xsd:complexContent\");\n            $complexType->appendChild($complexContent);\n\n            $xsdRestriction = $dom->createElement(\"xsd:restriction\");\n            $xsdRestriction->setAttribute('base', 'soap-enc:Array');\n            $complexContent->appendChild($xsdRestriction);\n\n            $xsdAttribute = $dom->createElement(\"xsd:attribute\");\n            $xsdAttribute->setAttribute(\"ref\", \"soap-enc:arrayType\");\n            $xsdAttribute->setAttribute(\"wsdl:arrayType\", sprintf(\"tns:%s[]\", $singularType));\n            $xsdRestriction->appendChild($xsdAttribute);\n\n            $this->getContext()->getSchema()->appendChild($complexType);\n            $this->getContext()->addType($xsdComplexTypeName);\n{code}\n\nto \n\n{code}\n            $complexType = $dom->createElement('xsd:complexType');\n            $complexType->setAttribute('name', sprintf('%s',$xsdComplexTypeName));\n\n            $complexContent = $dom->createElement(\"xsd:sequence\");\n            $complexType->appendChild($complexContent);\n\n            $xsdRestriction = $dom->createElement(\"xsd:element\");\n            $xsdRestriction->setAttribute('name', $singularType);\n            $xsdRestriction->setAttribute('type', sprintf('tns:%s',$singularType));\n            $xsdRestriction->setAttribute('minOccurs','0');\n            $xsdRestriction->setAttribute('maxOccurs','unbounded');\n            $complexContent->appendChild($xsdRestriction);\n\n            $this->getContext()->getSchema()->appendChild($complexType);\n            $this->getContext()->addType($xsdComplexTypeName);\n{code}\n\nSo the generated wsdl changes from:\n\n{code}\n                        <xsd:complexType name=\"ArrayOfObject\">\n\t\t\t\t<xsd:complexContent>\n\t\t\t\t\t<xsd:restriction base=\"soap-enc:Array\">\n\t\t\t\t\t\t<xsd:attribute ref=\"soap-enc:arrayType\"\n\t\t\t\t\t\t\twsdl:arrayType=\"tns:Object[]\" \/>\n\t\t\t\t\t<\/xsd:restriction>\n\t\t\t\t<\/xsd:complexContent>\n\t\t\t<\/xsd:complexType>\n{code}\n\nto:\n\n{code}\n                        <xsd:complexType name=\"ArrayOfObject\">\n\t\t\t\t<xsd:sequence>\n\t\t\t\t\t<xsd:element name=\"Object\"\n\t\t\t\t\t\ttype=\"tns:Object\" minOccurs=\"0\"\n\t\t\t\t\t\tmaxOccurs=\"unbounded\" \/>\n\t\t\t\t<\/xsd:sequence>\n\t\t\t<\/xsd:complexType>\n{code}\n\nWorks for me and can be imported using JAX wsimport"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6077\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User"
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10291",
                    "id": 10291,
                    "description": "Mini Release",
                    "name": "1.7.7",
                    "userReleaseDate": "16\/Mar\/09",
                    "archived": false,
                    "releaseDate": "2009-03-16",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10098",
                    "id": 10098,
                    "name": "Zend_Soap_Wsdl",
                    "description": "Class for accessing SOAP WSDL documents.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30146",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jpieper",
                        "name": "jpieper",
                        "displayName": "Jan Pieper",
                        "active": true
                    },
                    "body": "Two weeks ago Benjamin and I talked about exactly this way how to solve the problem with other clients than php's SoapClient. I'll take a look at it to check if my problems will be solved by changing the code like mentioned.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jpieper",
                        "name": "jpieper",
                        "displayName": "Jan Pieper",
                        "active": true
                    },
                    "created": "2009-04-15T07:45:53.000+0000",
                    "updated": "2009-04-15T07:45:53.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30162",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jpieper",
                        "name": "jpieper",
                        "displayName": "Jan Pieper",
                        "active": true
                    },
                    "body": "@Erick: seems to work fine. i've sent Benjamin my test environment in hope he can test it :-) didn't you need to add the \"namespace\"-attribute to <soap:body>? my wsimport cannot create java sources\/binaries without having this attribute.\n\n@Benjamin: do we now need junit tests? we should check if we need the \"namespace\"-attribute for all <soap:body> elements.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jpieper",
                        "name": "jpieper",
                        "displayName": "Jan Pieper",
                        "active": true
                    },
                    "created": "2009-04-15T14:00:15.000+0000",
                    "updated": "2009-04-15T14:00:15.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30179",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jpieper",
                        "name": "jpieper",
                        "displayName": "Jan Pieper",
                        "active": true
                    },
                    "body": "h2. Stable (using Zend_Soap_Wsdl_Strategy_ArrayOfTypeComplex)\n\nh3. Java [automated class generation]\n\n{code}# wsimport -keep -verbose http:\/\/zend.flabben.net\/service.php?stable\nparsing WSDL...\n\n\n[WARNING] src-resolve.4.2: Error resolving component 'soap-enc:Array'. It was detected that 'soap-enc:Array' is in\nnamespace 'http:\/\/schemas.xmlsoap.org\/soap\/encoding\/', but components from this namespace are not referenceable\nfrom schema document 'http:\/\/zend.flabben.net\/service.php?stable#types?schema1'. If this is the incorrect namespace,\nperhaps the prefix of 'soap-enc:Array' needs to be changed. If this is the correct namespace, then an appropriate\n'import' tag should be added to 'http:\/\/zend.flabben.net\/service.php?stable#types?schema1'.  line 2 of\nhttp:\/\/zend.flabben.net\/service.php?stable#types?schema1\n\n[ERROR] undefined simple or complex type 'soap-enc:Array'\n  line 2 of http:\/\/zend.flabben.net\/service.php?stable\n\n[ERROR] undefined attribute 'soap-enc:arrayType'\n  line 2 of http:\/\/zend.flabben.net\/service.php?stable\n\nException in thread \"main\" java.lang.NullPointerException\n        at com.sun.tools.internal.xjc.reader.internalizer.SCDBasedBindingSet.apply(SCDBasedBindingSet.java:201)\n        at com.sun.tools.internal.xjc.ModelLoader.createXSOM(ModelLoader.java:502)\n        at com.sun.tools.internal.xjc.api.impl.s2j.SchemaCompilerImpl.bind(SchemaCompilerImpl.java:216)\n        at com.sun.tools.internal.xjc.api.impl.s2j.SchemaCompilerImpl.bind(SchemaCompilerImpl.java:69)\n        at com.sun.tools.internal.ws.processor.modeler.wsdl.JAXBModelBuilder.bind(JAXBModelBuilder.java:120)\n        at com.sun.tools.internal.ws.processor.modeler.wsdl.WSDLModeler.buildJAXBModel(WSDLModeler.java:2173)\n        at com.sun.tools.internal.ws.processor.modeler.wsdl.WSDLModeler.internalBuildModel(WSDLModeler.java:173)\n        at com.sun.tools.internal.ws.processor.modeler.wsdl.WSDLModeler.buildModel(WSDLModeler.java:119)\n        at com.sun.tools.internal.ws.wscompile.WsimportTool.run(WsimportTool.java:170)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at com.sun.tools.internal.ws.Invoker.invoke(Invoker.java:100)\n        at com.sun.tools.internal.ws.WsImport.main(WsImport.java:38){code}\n\nh3. Python (ZSI)\n\n{code:title=Client}from ZSI import ServiceProxy\nfp = open('logfile.dat', 'a')\nproxy = ServiceProxy.ServiceProxy('http:\/\/zend.flabben.net\/service.php?unstable')\nprint proxy.getDynamicString('hallo')\nfp.close(){code}\n\n{code:title=Result}C:\\Server\\workspace\\Zoap>python client.py\nC:\\Server\\python\\lib\\site-packages\\ZSI\\resolvers.py:7: DeprecationWarning: the multifile module has been deprecated since Python 2.5\n  import multifile, mimetools, urllib\nC:\\Server\\python\\lib\\site-packages\\ZSI\\wstools\\XMLSchema.py:3072: DeprecationWarning: object.__init__() takes no parameters\n  tuple.__init__(self, args)\nTraceback (most recent call last):\n  File \"client.py\", line 3, in <module>\n    proxy = ServiceProxy.ServiceProxy('http:\/\/zend.flabben.net\/service.php?stable')\n  File \"C:\\Server\\python\\lib\\site-packages\\ZSI\\ServiceProxy.py\", line 100, in __init__\n    commands.wsdl2py(['-u', wsdl,'-o', cachedir, '-t', types])\n  File \"C:\\Server\\python\\lib\\site-packages\\ZSI\\generate\\commands.py\", line 223, in wsdl2py\n    wsm.writeClient(fd)\n  File \"C:\\Server\\python\\lib\\site-packages\\ZSI\\generate\\wsdl2python.py\", line 212, in writeClient\n    sd.write(fd,msg_fd)\n  File \"C:\\Server\\python\\lib\\site-packages\\ZSI\\generate\\wsdl2python.py\", line 319, in write\n    print >>fd, m\n  File \"C:\\Server\\python\\lib\\site-packages\\ZSI\\generate\\wsdl2python.py\", line 340, in __str__\n    return self.content.getvalue()\n  File \"C:\\Server\\python\\lib\\site-packages\\ZSI\\generate\\containers.py\", line 272, in getvalue\n    self._setContent()\n  File \"C:\\Server\\python\\lib\\site-packages\\ZSI\\generate\\containers.py\", line 999, in _setContent\n    raise WSInteropError, WSISpec.R2717\nZSI.generate.WSInteropError: An rpc-literal binding in a DESCRIPTION MUST have the namespace attribute specified, the value of which MUST be\n an absolute URI, on contained  soapbind:body elements.{code}\n\nh2. Unstable (using Zoap_Wsdl_Strategy_ArrayOfTypeComplex)\n\nh3. Java [automated class generation]\n\n{code}# wsimport -keep -verbose http:\/\/zend.flabben.net\/service.php?unstable\nparsing WSDL...\n\n\ngenerating code...\nnet\\flabben\\zend\\service\\ArrayOfZoapServiceResult.java\nnet\\flabben\\zend\\service\\ObjectFactory.java\nnet\\flabben\\zend\\service\\ZoapServicePort.java\nnet\\flabben\\zend\\service\\ZoapServiceResult.java\nnet\\flabben\\zend\\service\\ZoapServiceService.java\nnet\\flabben\\zend\\service\\package-info.java{code}\n\nh3. Java [call all methods]\n\n{code:title=Client}package net.flabben.zend.client;\nimport net.flabben.zend.service.*;\n\n\/\/ wsimport -keep <wsdl-file>\n\npublic class ZoapClient\n{\n\t\/**\n\t * @param args\n\t *\/\n\tpublic static void main(String[] args)\n\t{\n\t\tString result = new ZoapServiceService().getZoapServicePort().getStaticString();\n\t\tif (result != null) {\n\t\t\tSystem.out.println(\"Result: \" + result);\n\t\t} else {\n\t\t\tSystem.out.println(\"Result is NULL\");\n\t\t}\n\n\t\tresult = new ZoapServiceService().getZoapServicePort().getDynamicString(\"Test\");\n\t\tif (result != null) {\n\t\t\tSystem.out.println(\"Result: \" + result);\n\t\t} else {\n\t\t\tSystem.out.println(\"Result is NULL\");\n\t\t}\n\n\t\tresult = new ZoapServiceService().getZoapServicePort().getFrameworkVersion();\n\t\tif (result != null) {\n\t\t\tSystem.out.println(\"Result: \" + result);\n\t\t} else {\n\t\t\tSystem.out.println(\"Result is NULL\");\n\t\t}\n\n\t\tArrayOfZoapServiceResult array =new ZoapServiceService().getZoapServicePort().getArray();\n\t\tif (array != null) {\n\t\t\tSystem.out.println(\"Result: \" + array);\n\t\t} else {\n\t\t\tSystem.out.println(\"Result is NULL\");\n\t\t}\n\t}\n}{code}\n\n{code:title=Result}Result: Hello world!\nResult: Test\nResult: 1.8.0alpha\nResult: net.flabben.zend.service.ArrayOfZoapServiceResult@ca470{code}\n\nh3. Python (ZSI)\n\n{code:title=Result}C:\\Server\\workspace\\Zoap>python client.py\nC:\\Server\\python\\lib\\site-packages\\ZSI\\resolvers.py:7: DeprecationWarning: the multifile module has been deprecated since Python 2.5\n  import multifile, mimetools, urllib\nC:\\Server\\python\\lib\\site-packages\\ZSI\\wstools\\XMLSchema.py:3072: DeprecationWarning: object.__init__() takes no parameters\n  tuple.__init__(self, args)\nTraceback (most recent call last):\n  File \"client.py\", line 4, in <module>\n    print proxy.getDynamicString('hello')\n  File \"C:\\Server\\python\\lib\\site-packages\\ZSI\\ServiceProxy.py\", line 413, in __call__\n    return self.parent()._call(self.__name__, *args, **kwargs)\n  File \"C:\\Server\\python\\lib\\site-packages\\ZSI\\ServiceProxy.py\", line 193, in _call\n    encodingStyle=callinfo.encodingStyle)\n  File \"C:\\Server\\python\\lib\\site-packages\\ZSI\\client.py\", line 226, in Send\n    sw.serialize(obj, requesttypecode)\n  File \"C:\\Server\\python\\lib\\site-packages\\ZSI\\writer.py\", line 117, in serialize\n    elt = typecode.serialize(self.body, self, pyobj, **kw)\n  File \"C:\\Server\\python\\lib\\site-packages\\ZSI\\TCcompound.py\", line 273, in serialize\n    self.cb(elt, sw, pyobj, name=name, **kw)\n  File \"C:\\Server\\python\\lib\\site-packages\\ZSI\\TCcompound.py\", line 348, in cb\n    raise TypeError(\"Classless struct didn't get dictionary\")\nTypeError: Classless struct didn't get dictionary{code}\n\nh2. Resources\n\nhttp:\/\/zend.flabben.net\/service.php?stable\nhttp:\/\/zend.flabben.net\/service.php?unstable\nhttp:\/\/zend.flabben.net\/sources\/service.phps\nhttp:\/\/zend.flabben.net\/sources\/Zoap_Service.phps\nhttp:\/\/zend.flabben.net\/sources\/Zoap_Service_Result.phps\nhttp:\/\/zend.flabben.net\/sources\/Zoap_Wsdl_Strategy_ArrayOfTypeComplex.phps",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jpieper",
                        "name": "jpieper",
                        "displayName": "Jan Pieper",
                        "active": true
                    },
                    "created": "2009-04-16T13:12:42.000+0000",
                    "updated": "2009-04-16T13:15:54.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30422",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=emartinez",
                        "name": "emartinez",
                        "displayName": "Erick Martinez",
                        "active": true
                    },
                    "body": "Jan: I'm not sure but I think I grabbed a version of Zend_Soap_Autodiscover from SVN trunk that can set namespace as you say. I'll check this later. About the wsimport you posted, which version of Zoap_Wsdl_Strategy_ArrayOfTypeComplex are you using? did you add namespace attribute?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=emartinez",
                        "name": "emartinez",
                        "displayName": "Erick Martinez",
                        "active": true
                    },
                    "created": "2009-04-25T11:24:37.000+0000",
                    "updated": "2009-04-25T11:24:37.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31499",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=beberlei",
                        "name": "beberlei",
                        "displayName": "Benjamin Eberlei",
                        "active": true
                    },
                    "body": "Is the problem that Zend_Soap_Wsdl_Strategy_ArrayOfTypeSequence does not support complex types?\n\nI guess the whole fun of strategies was to fix these problems to their specific kinds.\n\nDoes this issue go if ArrayOfTypeSequence supports complex types as suggested in ZF-6742? Would this patch fix your problem?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=beberlei",
                        "name": "beberlei",
                        "displayName": "Benjamin Eberlei",
                        "active": true
                    },
                    "created": "2009-05-30T15:47:20.000+0000",
                    "updated": "2009-05-30T15:47:20.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40098",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mreverman",
                        "name": "mreverman",
                        "displayName": "mark reverman",
                        "active": true
                    },
                    "body": "I am trying to implement this fix it is needed for our workflow engine to work since it uses JAX.  I have made the code change from above and still no luck. I am running latest version of ZF.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mreverman",
                        "name": "mreverman",
                        "displayName": "mark reverman",
                        "active": true
                    },
                    "created": "2010-04-16T20:24:37.000+0000",
                    "updated": "2010-04-16T20:24:37.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6077\/transitions"
}