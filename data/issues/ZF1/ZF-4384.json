{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4384",
    "key": "ZF-4384",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Alternative count method for DbSelect"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4384\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/2",
                "name": "Won't Fix"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2008-09-26T04:11:36.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=denis.baklikov",
                "name": "denis.baklikov",
                "displayName": "Denis Baklikov",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-09-26T03:23:29.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2008-09-26T04:11:36.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Currently count method does not work with multiply fields in GROUP BY section\n\n{noformat} \n\/**\n * The DISTINCT and GROUP BY queries only work when selecting one column.\n * The question is whether any RDBMS supports DISTINCT for multiple columns, without workarounds.\n *\/\n{noformat} \n\nI want to suggest another implementation of count method.\n\n{noformat} \npublic function count()\n    {\n        if ($this->_rowCount === null) {\n             $rowCount   = clone $this->_select;\n\n\t     $rowCount->reset(Zend_Db_Select::COLUMNS)\n\t\t\t->reset(Zend_Db_Select::FROM)\n\t\t\t->reset(Zend_Db_Select::WHERE)\n\t\t\t->reset(Zend_Db_Select::HAVING)\n                        ->reset(Zend_Db_Select::ORDER)\n                        ->reset(Zend_Db_Select::LIMIT_OFFSET)\n\t\t\t->reset(Zend_Db_Select::LIMIT_COUNT)\n                        ->reset(Zend_Db_Select::GROUP)\n                        ->reset(Zend_Db_Select::DISTINCT);\n            \n            $countPart  = 'COUNT(*)';\n\t    $rowCount->from($this->_select, array());\n            $expression = new Zend_Db_Expr($countPart . ' AS ' . self::ROW_COUNT_COLUMN);  \n            \n            $rowCount->__toString(); \/\/ Workaround for ZF-3719 and related\n            $rowCount->columns($expression);\n            \n            $this->setRowCount($rowCount);\n        }\n\n        return $this->_rowCount;\n    }\n{noformat} "
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4384\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=norm2782",
                "name": "norm2782",
                "displayName": "Jurrien Stutterheim",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10201",
                    "id": 10201,
                    "description": "Mini Release",
                    "name": "1.6.1",
                    "userReleaseDate": "15\/Sep\/08",
                    "archived": false,
                    "releaseDate": "2008-09-15",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10315",
                    "id": 10315,
                    "name": "Zend_Paginator",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24661",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=norm2782",
                        "name": "norm2782",
                        "displayName": "Jurrien Stutterheim",
                        "active": true
                    },
                    "body": "Could you elaborate on this proposal? Why would you reset FROM, only to re-set it again? How would you deal with DISTINCT queries? How exactly does this solve the issues mentioned in the comment? Is this backwards compatible with the current implementation?\n\nNot trying to bash or anything, I just want to get a better understanding of what you're proposing =)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=norm2782",
                        "name": "norm2782",
                        "displayName": "Jurrien Stutterheim",
                        "active": true
                    },
                    "created": "2008-09-26T03:32:59.000+0000",
                    "updated": "2008-09-26T03:32:59.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24663",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=denis.baklikov",
                        "name": "denis.baklikov",
                        "displayName": "Denis Baklikov",
                        "active": true
                    },
                    "body": "My solution based on counting of returned rows.\n\nI create this code quickly (to force my application ot work). Cloning needed only for copy database connection.\nResetting FROM need for remove FROM clause from previous \"select\" object, otherwise it add INNER JOIN clause to query. \n\nin SQL result query will look like this:\n\nSELECT \n   COUNT(*) \nFROM\n(\n  SELECT A1,A2,A3 FROM T1 WHERE ......\n)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=denis.baklikov",
                        "name": "denis.baklikov",
                        "displayName": "Denis Baklikov",
                        "active": true
                    },
                    "created": "2008-09-26T03:53:04.000+0000",
                    "updated": "2008-09-26T03:53:04.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24664",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=norm2782",
                        "name": "norm2782",
                        "displayName": "Jurrien Stutterheim",
                        "active": true
                    },
                    "body": "Ah, right. This one uses subqueries, I overlooked that bit. Using subqueries was used in a pre-release version of Paginator, but it got dropped in favor of modified normal queries. There were two reasons for this: normal queries are more compatible with older RDBMS and they're way faster than subqueries. In short, I'm going to have to say no to your suggestion as-is. If you come across a better solution that solves the problem, please share it!\n\nIn the mean time you should use a custom count query instead of rewriting the adapter. You can do this by calling setRowCount() on the adapter.\nExample:\n{code}\n$adapter = new Zend_Paginator_Adapter_DbSelect($myOriginalQueryObject);\n$adapter->setRowCount($myCustomCountQueryObject);\n\n$paginator = new Zend_Paginator($adapter);\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=norm2782",
                        "name": "norm2782",
                        "displayName": "Jurrien Stutterheim",
                        "active": true
                    },
                    "created": "2008-09-26T04:11:36.000+0000",
                    "updated": "2008-09-26T04:11:36.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4384\/transitions"
}