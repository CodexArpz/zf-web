{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1065",
    "key": "ZF-1065",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "New setOptions('date_format' => ...) created a conflict with using the default format for a locale."
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1065\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10070",
                    "id": 10070,
                    "description": "Beta Release; bug fixes",
                    "name": "0.9.2",
                    "userReleaseDate": "06\/Apr\/07",
                    "archived": true,
                    "releaseDate": "2007-04-06",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2007-03-25T17:03:23.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                "name": "gavin",
                "displayName": "Gavin",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2007-03-16T11:53:03.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2007-07-05T14:43:56.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "-------- Original Message --------\nSubject: \tRe: [fw-i18n] setOptions() - format option, opinions wanted\nDate: \tTue, 13 Mar 2007 23:25:05 +0100\nFrom: \tThomas Weidner <thomas.weidner@gmx.at>\nTo: \tGavin Vess <gavin@zend.com>, ZF I18n <fw-i18n@lists.zend.com>\n\n> Yup, I purposely committed the code allowing the existing class-wide \n> default 'format' to be set, and promptly posted an example of the \n> related issue to the list.  This gives others a chance to participate in \n> design and API changes and easily test.  Usually we post these \n> discussions directly to Jira issues for the i18n components.\n> \n> From the feedback so far, it sounds like splitting 'format' into \n> 'dateFormat' and 'numberFormat' is agreeable to all.\n\nThis is already in work by me, additionally with other small tweaks.\n\n> Ok, so far I like Thomas' version of Option 2 best :) .. with one minor \n> tweak to the naming of the constants:\n> \n> Use Case A\n> ============\n> Zend_Locale_Format::setOptions(array('dateFormat' => 'YmD'));\n> \n> \/\/ use default date format specifier for locale \"de\"\n> Zend_Locale_Format::getDate('2007-04-05', array('dateFormat' => \n> Zend_Locale_Format::LOCALE, 'locale' => 'de'));\n> \n> \/\/ use the class-wide default date format \"YmD\", but use \"en\" for \n> recognizing any day or month names in the input string:\n> Zend_Locale_Format::getDate('2007-April-05', array('dateFormat' => \n> Zend_Locale_Format::DEFAULT, 'locale' => 'en'));\n> \n> \/\/ throws an error, since class-wide default 'dateFormat' of \"YmD\" makes \n> the following ambiguous:\n> Zend_Locale_Format::getDate('2007-April-05', array('locale' => 'en');\n> \n> Use Case B\n> ============\n> Zend_Locale_Format::setOptions(array('locale' => 'de'));\n> \n> \/\/ use the default date format specifier for locale \"de\"\n> Zend_Locale_Format::getDate('2007-04-05', array('dateFormat' => \n> Zend_Locale_Format::DEFAULT));\n> \n> \/\/ use the user-supplied date format specifier \"YmD\" with the locale \n> \"de\" to recognize any day or month names in the input string:\n> Zend_Locale_Format::getDate('2007-Mai-05', array('dateFormat' => 'YmD'));\n\nThis is what I have in mind and what I am actually working on :-)\n\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1065\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10073",
                    "id": 10073,
                    "name": "Zend_Locale",
                    "description": "Zend_Locale is a basic wrapper for all I18N and L10N issues for the Zend Framework. It provides the userbasically with access to translation functionality. It can handle different source file types for translation.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/13442",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "body": "With the new $options arrays, and the above, I think we can eliminate toNumberFormat() from the public API of this component by making the same functionality available through toNumber(), selectable using options in the $options array.  There is no documentation for toNumberFormat(), so I don't see a problem with this method becoming protected visibility.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "created": "2007-03-16T12:05:37.000+0000",
                    "updated": "2007-03-16T12:05:37.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/13456",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "I added a new constant Zend_Locale_Format::STANDARD which does what we wrote before...\nI also added some unit tests.\nCould u add some docu for this feature please ?? ;-)\n\nEliminating the \"toNumberFormat\" is not so easy.... I am working on it, but it will take some days to act as expected.\nProtected visible is not possible bcause users actualy use toNumberFormat to give a self defined format... toNumber takes automatically the locale standard number format. I am changing this...",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2007-03-17T13:13:14.000+0000",
                    "updated": "2007-03-17T13:13:14.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/13458",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Hard work... but I got it running ;-)\n\ntoNumberFormat has been integrated into toNumber.\nI will write some Unit tests... docu by gavin ??",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2007-03-17T18:49:33.000+0000",
                    "updated": "2007-03-17T18:49:33.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/13462",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "body": "Thomas, post example use cases in code here, and I will work them into the docu :)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "created": "2007-03-17T22:17:27.000+0000",
                    "updated": "2007-03-17T22:17:27.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/13464",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "body": "Hmmm.  I suggested simply making toNumberFormat \"protected visibility\" (i.e. calling toNumberFormat() from toNumber()), which would have been less difficult than a complete refactor\/rewrite\/merge of these two functions.  However, it looks like the merger is done already :)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "created": "2007-03-17T22:49:29.000+0000",
                    "updated": "2007-03-17T22:49:29.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/13473",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Rework had to be done by me:\n\ntoNumber format only accepted the standard number format of this locale.\nBut with toNumberFormat a user can give a self defined number format.\n\nNow both cases are handled by toNumber.\n\nWe should make this clear in the docu...\nRelated useage can be seen by the unit tests which are actually here.\n\ntoNumber(array('number_format' => '#,#0.###'));\nfor example.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2007-03-18T04:16:24.000+0000",
                    "updated": "2007-03-18T04:16:24.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/13479",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "I just fixed the last problems with self defined number formats.\nWe have 100% code coverage and all actual unit tests pass.\n\nExample:\n{code}\nZend_Locale_Format::toNumber(-123456.1234, array('number_format' => '#0.00-'));\n\/\/ self defined format -> output: \"123456.12-\"\n\nZend_Locale_Format::toNumber(-1234.123, array('precision' => 2, 'locale' => 'de'));\n\/\/ precision 2, standard number format -> output \"-1.234,12\"\n{code}\n\nMany many others can be found in the unit test bed.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2007-03-18T05:37:51.000+0000",
                    "updated": "2007-03-18T05:37:51.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/13490",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Assigned to gavin as only the docu is missing",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2007-03-18T10:40:52.000+0000",
                    "updated": "2007-03-18T10:40:52.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/13700",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Added documentation for Zend_Locale_Format::STANDARD\nand for self defined number formats.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2007-03-25T17:03:22.000+0000",
                    "updated": "2007-03-25T17:03:22.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1065\/transitions"
}