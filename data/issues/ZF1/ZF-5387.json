{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5387",
    "key": "ZF-5387",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "If there is  a validation error, the Editor doesn't show its value again."
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5387\/votes",
                "votes": 2,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10411",
                    "id": 10411,
                    "description": "Security release",
                    "name": "1.7.9",
                    "userReleaseDate": "11\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-11",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10410",
                    "id": 10410,
                    "description": "Security release",
                    "name": "1.8.5",
                    "userReleaseDate": "11\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-11",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10400",
                    "id": 10400,
                    "description": "Mini Release",
                    "name": "1.9.7",
                    "userReleaseDate": "11\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-11",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2010-01-21T04:53:37.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ezdevelop",
                "name": "ezdevelop",
                "displayName": "Wenlong Wu",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-12-30T21:35:27.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-01-21T04:53:38.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Here is the form:\n$this->addElement(\n\t'TextBox',\n\t'Title',\n\tarray(\n\t\t'label'\t=> 'News Title:',\n\t\t'required' => true,\n\t\t'validators' => array(\n\t\t\tarray('NotEmpty', true),\n\t\t),\n\t)\n);\n\n$this->addElement(\n\t'Editor',\n\t'Content',\n\tarray(\n\t\t'label'\t=> 'News Content:',\n\t\t'required' => true,\n\t\t'height' => '150px',\n\t\t'focusOnLoad' => true,\n\t\t'validators' => array(\n\t\t\tarray('NotEmpty', true),\n\t\t),\n\t)\n);\n\nIf there is a validation error, the Editor will set the value to \"Array\".\n\nBecause there are two elements named \"Content\", see the following html code:\n<input id=\"Content\" name=\"Content\" value=\"\" type=\"hidden\" \/><textarea id=\"Content[Editor]\" name=\"Content[Editor]\" type=\"text\" height=\"150px\" focusOnLoad=\"1\" required=\"1\" dojoType=\"dijit.Editor\"><\/textarea>\n\nAnd the solution is change the textarea element's id and name.\n\nOpen the Zend\/Dojo\/View\/Helper\/Editor.php:\nchange the following code:\nprotected function _normalizeEditorName($name)\n    {\n        if ('[]' == substr($name, -2)) {\n            $name = substr($name, 0, strlen($name) - 2);\n            $name .= '[Editor][]';\n        } else {\n            $name .= '[Editor]';\n        }\n        return $name;\n    }\n\nto:\n\nprotected function _normalizeEditorName($name)\n    {\n        if ('[]' == substr($name, -2)) {\n            $name = substr($name, 0, strlen($name) - 2);\n\t    $name .= '-Editor[]';\n        } else {\n\t    $name .= '-Editor';\n        }\n        return $name;\n    }\n\nHope that helps.\n\nRegard,\nJustin"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5387\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-8127",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8127",
                    "type": {
                        "name": "Related",
                        "direction": "OUTBOUND",
                        "description": "is related to"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10271",
                    "id": 10271,
                    "description": "Mini Release",
                    "name": "1.7.2",
                    "userReleaseDate": "23\/Dec\/08",
                    "archived": false,
                    "releaseDate": "2008-12-23",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10311",
                    "id": 10311,
                    "name": "Zend_Dojo",
                    "description": "Dojo integration with Zend Framework",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/27711",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ezdevelop",
                        "name": "ezdevelop",
                        "displayName": "Wenlong Wu",
                        "active": true
                    },
                    "body": "Another solution is:\nOpen the Zend\/Dojo\/View\/Helper\/Editor.php file:\n\nchange the following code:\n$html = '<input' . $this->_htmlAttribs($hiddenAttribs) . $this->getClosingBracket()\n              . $this->textarea($textareaName, $value, $params, $attribs);\n\nto:\n\n$html = $this->textarea($textareaName, $value, $params, $attribs)\n\t\t\t.'<input' . $this->_htmlAttribs($hiddenAttribs) . $this->getClosingBracket();\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ezdevelop",
                        "name": "ezdevelop",
                        "displayName": "Wenlong Wu",
                        "active": true
                    },
                    "created": "2008-12-30T21:39:53.000+0000",
                    "updated": "2008-12-30T21:39:53.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28847",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=karan.tandon@gmail.com",
                        "name": "karan.tandon@gmail.com",
                        "displayName": "K",
                        "active": true
                    },
                    "body": "Neither of the solutions work.\n\nI am facing the same problem and am unable to capture the value type inside Editor.\n\nIf I hard code the value, like to 'something' below, then the server is able to capture the value correctly, on a valid post.\nusing the following code:\n$form->editortab->getValue('content')\n######################### DOJO EDITOR ELEMENT #################################\n        $editorForm->addElement(\n            'Editor',\n            'content',\n            array(\n                'label'        \t=> 'Content',\n                'inheritWidth' \t=> 'true',\n            \t'height'\t\t=> '230px',\n            \t'width'\t\t\t=> '200px',\n            \t'focusOnLoad'  \t=> true,\n            \t'required'\t\t=> $required,\n            \t'value'\t\t\t=> 'some',\n            \n            )",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=karan.tandon@gmail.com",
                        "name": "karan.tandon@gmail.com",
                        "displayName": "K",
                        "active": true
                    },
                    "created": "2009-02-16T00:05:01.000+0000",
                    "updated": "2009-02-16T00:05:01.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28854",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=karan.tandon@gmail.com",
                        "name": "karan.tandon@gmail.com",
                        "displayName": "K",
                        "active": true
                    },
                    "body": "Forgot to mention that when I hard-code, the value captured is only the text that I hard-coded (i.e. 'something') irrespective of what is actually typed on the UI",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=karan.tandon@gmail.com",
                        "name": "karan.tandon@gmail.com",
                        "displayName": "K",
                        "active": true
                    },
                    "created": "2009-02-16T08:24:47.000+0000",
                    "updated": "2009-02-16T08:24:47.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28855",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=karan.tandon@gmail.com",
                        "name": "karan.tandon@gmail.com",
                        "displayName": "K",
                        "active": true
                    },
                    "body": "SOLVED :)\n\nTo make Zend Dojo Editor work do following to ...\/Zend\/Dojo\/View\/Helper\/Dijit.php\n\n1- Inside _createGetParentFormFunction()\n return elementNode.domNode;\ninstead of\nreturn elementNode;\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=karan.tandon@gmail.com",
                        "name": "karan.tandon@gmail.com",
                        "displayName": "K",
                        "active": true
                    },
                    "created": "2009-02-16T12:21:04.000+0000",
                    "updated": "2009-02-16T12:21:04.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29012",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=karan.tandon@gmail.com",
                        "name": "karan.tandon@gmail.com",
                        "displayName": "K",
                        "active": true
                    },
                    "body": "However this solution only works for Firefox and not with the creepy Internet Explorer and the new kid called Google Crome\n\n:(",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=karan.tandon@gmail.com",
                        "name": "karan.tandon@gmail.com",
                        "displayName": "K",
                        "active": true
                    },
                    "created": "2009-02-22T12:28:00.000+0000",
                    "updated": "2009-02-22T12:28:00.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37314",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vladar",
                        "name": "vladar",
                        "displayName": "Vladimir Razuvaev",
                        "active": true
                    },
                    "body": "This issue appears because \"textarea\" tag is used as base for editor. Dojo doesn't recommend this for several reasons (including XSS vulnerability). It is much better to use \"div\" tag as a base for editor. \r\n\r\nHere is a helper subclass, which replaces \"textarea\" tag to \"div\". Solution automatically fixes this bug and several other issues caused by same reason.\r\n\r\n{code}\r\nclass MyEditor extends Zend_Dojo_View_Helper_Editor\r\n{\r\n    public function textarea($id, $value = null, array $params = array(), array $attribs = array())\r\n    {\r\n        \/\/ it is a trivial copy-paste of Zend_Dojo_View_Helper_Textarea::textarea method\r\n        \/\/ with replaced \"textarea\" tag to \"div\"\r\n\r\n        if (!array_key_exists('id', $attribs)) {\r\n            $attribs['id']    = $id;\r\n        }\r\n        $attribs['name']  = $id;\r\n        $attribs['type']  = $this->_elementType;\r\n\r\n        $attribs = $this->_prepareDijit($attribs, $params, 'textarea');\r\n\r\n        $html = '<div' . $this->_htmlAttribs($attribs) . '>'\r\n              . $value\r\n              . \"<\/div>\\n\";\r\n\r\n        return $html;\r\n    }\r\n}\r\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vladar",
                        "name": "vladar",
                        "displayName": "Vladimir Razuvaev",
                        "active": true
                    },
                    "created": "2010-01-02T17:13:41.000+0000",
                    "updated": "2010-01-02T17:13:41.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5387\/transitions"
}