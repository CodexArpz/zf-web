{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4281",
    "key": "ZF-4281",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Various Issues with Zend_Form_Element_File"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField",
            "value": {
                "timeestimate": 0,
                "timespent": 360
            }
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4281\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10251",
                    "id": 10251,
                    "description": "Mini Release",
                    "name": "1.6.2",
                    "userReleaseDate": "13\/Oct\/08",
                    "archived": false,
                    "releaseDate": "2008-10-13",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2008-09-21T05:30:29.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=loic.bistuer",
                "name": "loic.bistuer",
                "displayName": "Loic Bistuer",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-09-13T07:13:07.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2008-10-10T14:41:45.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Zend_Form_Element_File delegates to the Zend_File_Transfer_Adapter all the validation effort.\n\nThe problem is while Zend_File_Transfer_Adapter have a validation process that mostly mimics validation in Zend_Form, the two processes remain different.\n\nHere is what we lose compared to the validation offered by Zend_Form_Element:\n\n\t- no support for the breakChainOnFailure feature. (this is a big one)\n\n\t- can't add custom messages unless you are instantiating the validators by hand and calling their setMessages method. (not convenient)\n\n\t- the syntax of the array passed to setValidators is different than the one of the other Zend_Form_Element(s). (breaks consistency which is never good)\n\nI attached the file 'validation.php' that highlights the difference of syntax between Zend_Form_Element_File and the one of the other Zend_Form_Elememt(s).\n\nAnother issue with Zend_Form_Element_File: unlike other elements derived from Zend_Form_Element it doesn't seem to honor paths defined by a call to addElementPrefixPath on its parent form. Found that out when I tried to overload the 'Errors' decorator, Zend_Form_Element_File was the only element to still use the default one.\n\nI also attached the Form_Element_File that I use for now to overcome all the problems above until they are fixed. It doesn't have all the bells and whistles of Zend_File_Transfer_Adapter but it does the job. (I don't recommend people using it since it hasn't been much tested but if someone does: don't forget to manually add the 'Upload' validator to the list of validators). Just like the original one, it won't work if used in a form where isArray is true or inside of a subform.\n\nI hope that helps\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4281\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/worklog\/21685",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4281",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "comment": "Reproduction and dividing issues to existing ones.",
                    "created": "2008-09-21T05:31:31.000+0000",
                    "updated": "2008-09-21T05:31:31.000+0000",
                    "started": "2008-09-21T05:30:00.000+0000",
                    "minutesSpent": 360
                }
            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/11541",
                    "filename": "File.php",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=loic.bistuer",
                        "name": "loic.bistuer",
                        "displayName": "Loic Bistuer",
                        "active": true
                    },
                    "created": "2008-09-13T07:37:57.000+0000",
                    "size": 2786,
                    "mimeType": "application\/octet-stream",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/11541\/File.php"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/11540",
                    "filename": "validation.php",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=loic.bistuer",
                        "name": "loic.bistuer",
                        "displayName": "Loic Bistuer",
                        "active": true
                    },
                    "created": "2008-09-13T07:37:57.000+0000",
                    "size": 1599,
                    "mimeType": "application\/octet-stream",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/11540\/validation.php"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10240",
                    "id": 10240,
                    "description": "Minor Release",
                    "name": "1.6.0",
                    "userReleaseDate": "02\/Sep\/08",
                    "archived": false,
                    "releaseDate": "2008-09-02",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10320",
                    "id": 10320,
                    "name": "Zend_File_Transfer",
                    "isAssigneeTypeValid": false
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10029",
                    "id": 10029,
                    "name": "Zend_Form",
                    "isAssigneeTypeValid": false
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10321",
                    "id": 10321,
                    "name": "Zend_Validate_File",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24531",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "* breakChainOnFailure is an existing feature request and not a bug. See ZF-4205.\n\n* custom messages is an existing feature request and not a bug. See ZF-4150.\n\n* File validators act completly different than string validators like used in all other elements. This is its nature because files can not act as content.\n\nZend_File_Transfer does not mimic Zend_Form validation. Zend_File_Transfer was built with completly other targets than Zend_Form. Zend_Form does only use a small part of what Zend_File_Transfer was meant for. The reason is that Zend_File_Transfer has it's own needs, and any subcomponent using it has to match the requisists of it and look to add it's own requisists itself.\n\nRegarding of your complete issue, it's never a good idea to add multi issues, in your case 5 completly different ones, in a single issue. And always look if there is already a existing issue before adding a new one.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2008-09-14T04:40:29.000+0000",
                    "updated": "2008-09-14T04:40:29.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24535",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=loic.bistuer",
                        "name": "loic.bistuer",
                        "displayName": "Loic Bistuer",
                        "active": true
                    },
                    "body": "Thomas, I understand your points, I however grouped those issues because to me they all relate to delegating validation for file elements to Zend_File_Transfer, which as you say has been built with completely other targets than Zend_Form.\n\nAnd indeed, not using Zend_File_Transfer does solve all of them at once.\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=loic.bistuer",
                        "name": "loic.bistuer",
                        "displayName": "Loic Bistuer",
                        "active": true
                    },
                    "created": "2008-09-14T07:04:30.000+0000",
                    "updated": "2008-09-14T07:04:30.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24538",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "The system just eaten my complete answer so I have to shorten my comment:\n\nFirst:\nWe know that the component is far away from being finished. We have had to hurry to get it ready for 1.6 so much things are missing and will be added. Each release will add new features. We are aware of this and know the problematic.\n\nSecond:\nYour implementation is a security headache. I must strictly warn about using it. By using a manual implementation you first loose all benefits of Zend_File_Transfer, for example validators and filters.\nAnd, this is the greater neg, you will have massive security problems with your solution. Do not use such an implementation in productive environment.\n\nZend_Form handles Form creation.\nZend_File_Transfer handles file uploads and downloads, and it knows the security problems and handles them for you.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2008-09-14T10:09:11.000+0000",
                    "updated": "2008-09-14T10:09:11.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24575",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "The breakChainOnFailure feature has been added. See ZF-4205 and r11430.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2008-09-19T02:31:16.000+0000",
                    "updated": "2008-09-19T02:31:16.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24593",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "All described issue are eigther solved or already filed by other issues.\n\nThe only open this is what you've mentioned with addElementPrefixPath.\nPlease give some code for reproduction so we can see and test the problem.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2008-09-21T02:15:27.000+0000",
                    "updated": "2008-09-21T02:15:27.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24594",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=loic.bistuer",
                        "name": "loic.bistuer",
                        "displayName": "Loic Bistuer",
                        "active": true
                    },
                    "body": "Thomas, I couldn't reproduce the addElementPrefixPath bug; I can't remember exactly what I did to get this outcome. We can close this issue, I'll submit another one along with sample code if I come across this problem again.\n\nConcerning my implementation of Zend_Form_Element_File above, it was indeed not ready for production and was a simple proof of concept to illustrate what I was saying. Though, unlike what you said it does handle most of the validation done in the current Zend_Form_Element_File implementation (granted that you don't forget to add manually Zend_Validate_File_Upload to the list of validators).\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=loic.bistuer",
                        "name": "loic.bistuer",
                        "displayName": "Loic Bistuer",
                        "active": true
                    },
                    "created": "2008-09-21T05:02:45.000+0000",
                    "updated": "2008-09-21T05:02:45.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24595",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "I will then close this issue.\nAll other mentioned problems or features have already be integrated to trunk.\n\nThanks for your report.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2008-09-21T05:28:40.000+0000",
                    "updated": "2008-09-21T05:28:40.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24596",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Problems resolved, eighter in seperate issues, or by independend enhencements of the components.\n\nPlease fill in a new issue if something is not fixed.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2008-09-21T05:30:29.000+0000",
                    "updated": "2008-09-21T05:30:29.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4281\/transitions"
}