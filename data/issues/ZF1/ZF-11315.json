{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11315",
    "key": "ZF-11315",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Dojo_View_Helper_Editor submit problem with Chrome"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11315\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10580",
                    "id": 10580,
                    "description": "Mini Release",
                    "name": "1.11.6",
                    "userReleaseDate": "05\/May\/11",
                    "archived": false,
                    "releaseDate": "2011-05-05",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2011-05-02T20:14:56.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas+deyhle",
                "name": "thomas deyhle",
                "displayName": "Thomas Deyhle",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2011-04-22T09:21:54.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-08-01T11:34:23.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "Zend_Form",
                "dojo",
                "form"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Hi,\r\n\r\nI create a Editor-Element in a form with the start value \"Hello\"\r\nThen I change this value on the page to \"Hello world\" and submit the form.\r\nNow the server should recive the value \"Hello world\", but if you try this in chrome I recive always the start value \"Hello\".\r\n\r\nThis problem apears only with the Chrome browser. The editor works fine with other browser.\r\n\r\n\r\nExcample:\r\nI create the editor with the id 'comments' then you get the following html:\r\n\r\n{code:xml}\r\n<input id=\"comments\" name=\"comments\" value=\"\" type=\"hidden\">\r\n<div style=\"width: 500px;\" id=\"comments-Editor\" tabIndex=\"3\" required=\"true\" height=\"200px\" dojoType=\"dijit.Editor\">\r\n<\/div>\r\n<noscript><textarea name=\"comments\" id=\"comments-Editor\" style=\"width: 500px;\" tabIndex=\"3\" required=\"true\" height=\"200px\" dojoType=\"dijit.Editor\" rows=\"24\" cols=\"80\"><\/textarea><\/noscript>\r\n{code}\r\n\r\nHere you can see that the input and the textarea tag have the same name \"comments\".\r\nIf you change the name of the textarea from \"comments\" to \"comments-Editor\" like the id, then it works fine also in chrome.\r\n\r\nIn the function editor in Zend_Dojo_View_Helper_Editor you can see, that the textare is bild with the name of the id from the hidden field instead of the id from the textarea:\r\n\r\n{code}\r\n$html .= '<noscript>'\r\n      . $this->view->formTextarea($hiddenId, $value, $attribs)\r\n      . '<\/noscript>';\r\n{code}\r\n\r\nIf you change it to\r\n\r\n{code}\r\n$html .= '<noscript>'\r\n      . $this->view->formTextarea($textareaId, $value, $attribs)\r\n      . '<\/noscript>';\r\n{code}\r\n\r\nit will work in chrome.\r\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11315\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [
                "View_Helper"
            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=robertbasic",
                "name": "robertbasic",
                "displayName": "Robert Basic",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/13877",
                    "filename": "ZF-11315.diff",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=robertbasic",
                        "name": "robertbasic",
                        "displayName": "Robert Basic",
                        "active": true
                    },
                    "created": "2011-04-25T16:15:16.000+0000",
                    "size": 762,
                    "mimeType": "text\/x-patch",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/13877\/ZF-11315.diff"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10550",
                    "id": 10550,
                    "description": "Mini Release",
                    "name": "1.11.5",
                    "userReleaseDate": "07\/Apr\/11",
                    "archived": false,
                    "releaseDate": "2011-04-07",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10311",
                    "id": 10311,
                    "name": "Zend_Dojo",
                    "description": "Dojo integration with Zend Framework",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/45956",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=robertbasic",
                        "name": "robertbasic",
                        "displayName": "Robert Basic",
                        "active": true
                    },
                    "body": "Could you please provide the PHP code you're using to create the form\/element?\r\n\r\nAnd Chrome's version number and the OS you're using. Thanks!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=robertbasic",
                        "name": "robertbasic",
                        "displayName": "Robert Basic",
                        "active": true
                    },
                    "created": "2011-04-22T09:56:03.000+0000",
                    "updated": "2011-04-22T09:56:31.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/45963",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas+deyhle",
                        "name": "thomas deyhle",
                        "displayName": "Thomas Deyhle",
                        "active": true
                    },
                    "body": "I simplified it to the basic to show it. I'm using Smarty as template. \r\n\r\nhere the code\r\n{code} \r\n$html=$view->editor(\r\n    $this->id, \r\n    '', \r\n    array(\r\n        'tabIndex' => 3,\r\n        'required' => 1,\r\n        'height' => '200px'\r\n    ), \r\n    array (\r\n        'style' => 'width: 500px;'\r\n    )\r\n);\r\n$view->assign('comments',$html);\r\n{code} \r\n\r\nand here the templete\r\n{code:xml}\r\n<form action=\"\/blog\/sub\/adddo\/new\/0\" id=\"form\" method=\"post\" dojoType=\"dijit.form.Form\"'>\r\n{$comments}<br \/>\r\n<input type=\"submit\" value=\"OK\">\r\n<\/form>\r\n{code} \r\n\r\nIm using:\r\nChrome 10.0.648.205\r\nAppears on my local dev with win 7 an on my productiv system with openSuse\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas+deyhle",
                        "name": "thomas deyhle",
                        "displayName": "Thomas Deyhle",
                        "active": true
                    },
                    "created": "2011-04-22T11:28:03.000+0000",
                    "updated": "2011-04-22T11:28:03.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/45964",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=robertbasic",
                        "name": "robertbasic",
                        "displayName": "Robert Basic",
                        "active": true
                    },
                    "body": "I can't reproduce the issue with zf 1.11.5 and Dojo 1.5.0 or Dojo 1.6.0 loaded from Google's CDN.\r\n\r\nChrome 10.0.648.205 on Ubuntu.\r\n\r\nWhat versions of ZF and Dojo are you using?\r\n\r\nCould you please try the same, but with using Zend_View and not Smarty?\r\n\r\nThanks!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=robertbasic",
                        "name": "robertbasic",
                        "displayName": "Robert Basic",
                        "active": true
                    },
                    "created": "2011-04-22T12:35:37.000+0000",
                    "updated": "2011-04-22T12:35:37.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/45989",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas+deyhle",
                        "name": "thomas deyhle",
                        "displayName": "Thomas Deyhle",
                        "active": true
                    },
                    "body": "I made a big mistake in testig. Sorry. The content of my testpage is loaded by dojo.\r\n\r\nIt seems that when there are 2 tags with the same name, in this case the input and textarea tag, the browser should return the content of the firt tag he can find. This works fine on normal loaded pages in every browser I testet.\r\n\r\nIf the content of the page is loaded per ajax it seems to be different in Chrome. If I look on the elements in debuging in Chrome, the order and everything else is in the same way as at normal loaded pages. But the result is different.\r\n\r\nI don't know why there are the same names for these two tags. If you have a look at the code, there is a separate definition for the name of the textarea in $textareaName and for the id in $textareaId. But the $textareaName will be never used. The definition of $textareaName is \"name[Editor]\" instead of the \"name-Editor\" like in the ID. I think it isn't a good solution to use an array at this place, so this could be the reason that someone change from $this->view->formTextarea($textareaName, $value, $attribs) to $this->view->formTextarea($hiddenId, $value, $attribs) what is a working solution but I thing isn't totaly correct, because of the double use of the same name in two tags.\r\n\r\nI'm using zf 1.11.5 and tested with Dojo 1.5.0 and Dojo 1.6.0 and can reproduce it with a dojo dialog which load the form with the editor in it.\r\n\r\nSorry to cause inconvenience.\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas+deyhle",
                        "name": "thomas deyhle",
                        "displayName": "Thomas Deyhle",
                        "active": true
                    },
                    "created": "2011-04-23T14:29:31.000+0000",
                    "updated": "2011-04-23T14:29:31.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/46041",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=robertbasic",
                        "name": "robertbasic",
                        "displayName": "Robert Basic",
                        "active": true
                    },
                    "body": "Think I narrowed down the problem, will try to explain it as better as I can what's going on.\r\n\r\nWhen Zend_Dojo_Form_Element_Editor is loaded \"normally\", e.g. is just simply rendered to the view, when submitting the form with that Editor every browser takes note about the noscript tag around the textarea and doesn't submit that value, only the value from the hidden input field.\r\n\r\nBut! When loading a Zend_Dojo_Form via ajax into the current view and submitting that form, looks like Chrome is submitting the textarea value from within the noscript tag too, whereas Firefox is not doing that (not sure about IE\/Safari\/Opera). Thus we end up with submitting 2 elements with the same name in Chrome and as the hidden input tag is first by order in the DOM, Chrome picks up that value.\r\n\r\nPoking around with the code, will try to come up with a fix.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=robertbasic",
                        "name": "robertbasic",
                        "displayName": "Robert Basic",
                        "active": true
                    },
                    "created": "2011-04-25T15:37:22.000+0000",
                    "updated": "2011-04-25T15:37:22.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/46042",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=robertbasic",
                        "name": "robertbasic",
                        "displayName": "Robert Basic",
                        "active": true
                    },
                    "body": "Patch for this issue.\n\nThe fix is easy, but ugly. Reordered how the Editor elements are generated: the textarea in the noscript tag should be rendered before the hidden input tag so that when doing a submit, Chrome picks up the value from the textarea first if noscript is in effect. Also, the div for the dijit should be rendered before the textarea or the editor won't be created in Chrome due to a dojo warning.\n\nI didn't rename the textarea tag name as suggested by the reporter because then upon submitting we'd have 2 different names in the POST data, which is again cumbersome.\n\nI'd really appreciate some feedback on this.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=robertbasic",
                        "name": "robertbasic",
                        "displayName": "Robert Basic",
                        "active": true
                    },
                    "created": "2011-04-25T16:15:16.000+0000",
                    "updated": "2011-04-25T16:15:16.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/46044",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas+deyhle",
                        "name": "thomas deyhle",
                        "displayName": "Thomas Deyhle",
                        "active": true
                    },
                    "body": "I've tested in the way you recommended and it works in the following browsers on Win7:\t\r\nIE 8.0.7600, FF 3.6.16, Opera 11.10, Chrome 10.0.648, Safari 5.0.5",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas+deyhle",
                        "name": "thomas deyhle",
                        "displayName": "Thomas Deyhle",
                        "active": true
                    },
                    "created": "2011-04-25T19:14:39.000+0000",
                    "updated": "2011-04-25T19:14:39.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/46292",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Reviewed the patch -- looked straight-forward, and based on feedback from functional testers, appropriate. I've added a unit test to ensure that the <input> is generated following the <noscript>, which effectively unit tests the functionality from the server-side.\n\nPatch applied to trunk and 1.11 release branch.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2011-05-02T20:14:56.000+0000",
                    "updated": "2011-05-02T20:14:56.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/47826",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=robertbasic",
                        "name": "robertbasic",
                        "displayName": "Robert Basic",
                        "active": true
                    },
                    "body": "Pull request for porting the patch in ZF2 is sent: https:\/\/github.com\/zendframework\/zf2\/pull\/303",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=robertbasic",
                        "name": "robertbasic",
                        "displayName": "Robert Basic",
                        "active": true
                    },
                    "created": "2011-08-01T11:34:23.000+0000",
                    "updated": "2011-08-01T11:34:23.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11315\/transitions"
}