{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2925",
    "key": "ZF-2925",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Problem using join in Zend_Db_Table"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2925\/votes",
                "votes": 5,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10330",
                    "id": 10330,
                    "description": "Mini Release",
                    "name": "1.8.2",
                    "userReleaseDate": "27\/May\/09",
                    "archived": false,
                    "releaseDate": "2009-05-27",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-05-18T15:46:03.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=oetting",
                "name": "oetting",
                "displayName": "Jacob Oettinger",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-03-19T11:53:57.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-05-19T10:54:36.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "The functionality described in example 10.96 in the reference guide does not work.\nThe code:\n<?php\n$table = new Bugs();\n\n$select = $table->select();\n$select->where('bug_status = ?', 'NEW')\n       ->join('accounts', 'accounts.account_id = bugs.reported_by')\n       ->where('accounts.account_name = ?', 'Bob');\n\n$rows = $table->fetchAll($select);\n\nResults in a simple select * from the accounts table where account_name = \"Bob\", the join is ignored. \n\nA possible workaround is to use an explicit ->from() call on the select object. Like this:\n$select->from('bugs');\n\nThe query is now correctly formatted as a join query but it selects all columns from both bugs and accounts. This seems like a reasonable default behavior for the select object, but in the above usage it is required that only columns from bugs is returned to create a writable row object. The ->setIntegrityCheck(false) method to allow creation of read only rows with columns from both tables, but this is not the very useful behavior described in the reference guide.\n\nPossible solution:\n* Make the select object returned from a table object contain a from part by default.\n* Alter the documentation-code so that no columns are added from the joined table (how is this is done?)\n\n\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/customFieldOption\/10039",
                "value": "  Should Have"
            }
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2925\/watchers",
                "isWatching": false,
                "watchCount": 6
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                "name": "ralph",
                "displayName": "Ralph Schindler",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-2546",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2546",
                    "type": {
                        "name": "Dependency",
                        "direction": "OUTBOUND",
                        "description": "depends on"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10172",
                    "id": 10172,
                    "description": "Minor Release",
                    "name": "1.5.0",
                    "userReleaseDate": "17\/Mar\/08",
                    "archived": true,
                    "releaseDate": "2008-03-17",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10132",
                    "id": 10132,
                    "name": "Zend_Db_Select",
                    "description": "OO interface to building a SELECT SQL query.",
                    "isAssigneeTypeValid": false
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10133",
                    "id": 10133,
                    "name": "Zend_Db_Table",
                    "description": "Lightweight OO interface to database tables and rowsets.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/20336",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "Please categorize\/fix as needed.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2008-03-25T20:43:57.000+0000",
                    "updated": "2008-03-25T20:43:57.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/27794",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "No action on this issue for too long. I'm reassigning to Ralph for re-evaluation and categorization.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2009-01-06T10:47:59.000+0000",
                    "updated": "2009-01-06T10:47:59.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28002",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "Is this still an issue, it appears it might have been solved by ZF-2546",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2009-01-10T11:36:57.000+0000",
                    "updated": "2009-01-10T11:36:57.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28025",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=oetting",
                        "name": "oetting",
                        "displayName": "Jacob Oettinger",
                        "active": true
                    },
                    "body": "Hi,\nAs far as I can see the problem remains. The example in the documentation is now located in example 13.99 and 13.100.\n\nWhen trying to run the code in example 13.99 on the example database the code fails with:\n{{'Zend_Db_Table_Select_Exception' with message 'Select query cannot join with another table'}}\n\nI think it is new that it is the select statement that detects that there is a problem. But the original issue, that the code in the reference guide can not be run, remains.\n\nExample 13.100 also fails to run:\n{{'Zend_Db_Statement_Exception' with message 'SQLSTATE[42S22]: Column not found: 1054 Unknown column 'bug_status' in 'where clause''}}\nThis fails be cause the generated query does not select from the bugs table.\n\nCode to reproduce:\n{{<?php\nset_include_path('library');\nrequire 'Zend\/Db\/Table\/Abstract.php';\n\n$db = Zend_Db::factory('pdo_mysql',array('host'=>'localhost','username'=>'dbuser','password'=>'dbpass','dbname'=>'dbname'));\nZend_Db_Table_Abstract::setDefaultAdapter($db);\n\nclass Bugs extends Zend_Db_Table_Abstract {\n\t\n\t\n}\n$table = new Bugs();\n$select = $table->select()->setIntegrityCheck(false);\n$select->where('bug_status = ?', 'NEW')\n       ->join('accounts', 'accounts.account_name = bugs.reported_by')\n       ->where('accounts.account_name = ?', 'Bob');\n$rows = $table->fetchAll($select);}}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=oetting",
                        "name": "oetting",
                        "displayName": "Jacob Oettinger",
                        "active": true
                    },
                    "created": "2009-01-10T13:27:34.000+0000",
                    "updated": "2009-01-15T08:05:36.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28400",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zimnyx",
                        "name": "zimnyx",
                        "displayName": "Piotr Czachur",
                        "active": true
                    },
                    "body": "I'm running ZF 1.7.3.\n\nCode from  \"Example 13.99. Using a lookup table to refine the results of fetchAll()\" yelds \"exception 'Zend_Db_Table_Select_Exception' with message 'Select query cannot join with another table'\". \n\nExample is wrong, or code is wrong.\n\nSome other folks have found this too: http:\/\/www.zfforums.com\/zend-framework-components-13\/databases-20\/zend_db_select-join-1461.html\n\nThis is serious issue, it's very simple JOIN that doesn't work at all.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zimnyx",
                        "name": "zimnyx",
                        "displayName": "Piotr Czachur",
                        "active": true
                    },
                    "created": "2009-01-22T06:01:08.000+0000",
                    "updated": "2009-01-22T06:01:08.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29302",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dmuir",
                        "name": "dmuir",
                        "displayName": "David Muir",
                        "active": true
                    },
                    "body": "Ralph, ZF-2546 was never solved. It was marked as Won't Fix.\nUsing the patch supplied should fix it, but will probably break things that are expecting the buggy behaviour.\nCould the documentation at least be updated to show a work-around?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dmuir",
                        "name": "dmuir",
                        "displayName": "David Muir",
                        "active": true
                    },
                    "created": "2009-03-05T22:14:26.000+0000",
                    "updated": "2009-03-05T22:14:26.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31119",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "This issue has been resolved by the solution (new feature) put in place by issue ZF-2546.\n\nTo use this feature, call $table->select(true); to retrieve a select object that contains the from part",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2009-05-18T15:46:03.000+0000",
                    "updated": "2009-05-18T15:46:03.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31123",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lightflowmark",
                        "name": "lightflowmark",
                        "displayName": "Mark",
                        "active": true
                    },
                    "body": "Hi Ralph - ZF2546 is marked as \"won't fix\" and there's no mention of the resolution you outline.  Can you clarify which version this new feature appeared \/ will appear in?\nThanks,\nMark",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lightflowmark",
                        "name": "lightflowmark",
                        "displayName": "Mark",
                        "active": true
                    },
                    "created": "2009-05-19T00:09:13.000+0000",
                    "updated": "2009-05-19T00:09:13.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31130",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "Oh, I am sorry, I marked the wrong issue number, this is related to ZF-2798\n\n-ralph",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2009-05-19T06:18:38.000+0000",
                    "updated": "2009-05-19T06:18:38.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31137",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=oetting",
                        "name": "oetting",
                        "displayName": "Jacob Oettinger",
                        "active": true
                    },
                    "body": "If this new functionality is to resolve this issue the required changes to the documentation example 15.101 is to add a 'true' param to the call to select() and add a call to setIntegrityCheck(false)\n\nOtherwise the original issue, that the code in, what is now, example 15.101 can not be run.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=oetting",
                        "name": "oetting",
                        "displayName": "Jacob Oettinger",
                        "active": true
                    },
                    "created": "2009-05-19T07:56:35.000+0000",
                    "updated": "2009-05-19T07:56:35.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31139",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "I've updated both the manual to reflect the new features, as well as added constants to Zend_Db_Table_Abstract to better identify the features when they are used.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2009-05-19T09:25:56.000+0000",
                    "updated": "2009-05-19T09:25:56.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31141",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=oetting",
                        "name": "oetting",
                        "displayName": "Jacob Oettinger",
                        "active": true
                    },
                    "body": "Just looked at the altered documentation. Good job.\n\nNice work on closing a long standing issue. \n\nThanks\n\n(I know it wasn't that important - I just reported it because I happened to come across it)\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=oetting",
                        "name": "oetting",
                        "displayName": "Jacob Oettinger",
                        "active": true
                    },
                    "created": "2009-05-19T10:54:25.000+0000",
                    "updated": "2009-05-19T10:54:25.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2925\/transitions"
}