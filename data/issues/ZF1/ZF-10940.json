{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10940",
    "key": "ZF-10940",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Loader_PluginLoader adds realpath values to the $classFileIncCache"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10940\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/2",
                "name": "Won't Fix"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2011-01-12T05:06:44.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lowtower",
                "name": "lowtower",
                "displayName": "Timo Fehsenfeld",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2011-01-12T01:38:33.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-01-12T05:50:06.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Hello,\r\n\r\nI guess this is a bug.\r\n\r\nI have enabled caching in my application and also use the {noformat}Zend_Loader_PluginLoader::setIncludeFileCache($classFileIncCache){noformat} feature.\r\n\r\nWhen I have a look at the generated file {{$classFileIncCache}} I see that some of the {{include_once}} calls have an absolute path, some others have not.\r\nAll classes that are loaded with {noformat}new Zend_Loader_Autoloader_Resource(array(\r\n    'basePath'      => realpath(dirname($path)),\r\n    ...{noformat} have an absolute path.\r\n\r\nMy application crashes when including this generated file {{$classFileIncCache}} because of the absolute paths.\r\n\r\nI think all the paths must take the php include_path into account (must not be absolute paths) to make this work properly.\r\n\r\nThanks in advance,\r\nLT."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/2",
                "name": "Critical"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10940\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10520",
                    "id": 10520,
                    "description": "Mini Release",
                    "name": "1.11.2",
                    "userReleaseDate": "30\/Dec\/10",
                    "archived": false,
                    "releaseDate": "2010-12-30",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10001",
                    "id": 10001,
                    "name": "Zend_Loader",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44004",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "It is intended that you would clear the cache and generate it in your production environment -- so that the paths will be specific to the machine. The rationale is two-fold:\r\n\r\n* Plugins are often _not_ on the include_path (consider view helpers -- they're often in application\/modules\/<module name>\/views\/helpers).\r\n* Even for those on the include_path, using the include_path is magnitudes slower than using a realpath.\r\n\r\nOne change we could potentially make use of paths relative to the application root when resolving, but this is going to be problematic to determine, and introduces its own issues (what if the application root is not defined?) -- whereas the realpath *is* known during resolution.\r\n\r\nSo, the solution at this point is to (a) ensure you don't check in a cached version of the file into your repository, and (b) have a deployment task that checks for and removes it so it may be regenerated on the target machine.\r\n\r\nIn ZF2, this approach is no longer necessary, due to the class map generation tools available, so I'm marking this as \"won't fix\", due to the complexities of introducing an alternate approach, and since the approach is obsoleted in ZF2.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2011-01-12T05:06:22.000+0000",
                    "updated": "2011-01-12T05:06:22.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44006",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lowtower",
                        "name": "lowtower",
                        "displayName": "Timo Fehsenfeld",
                        "active": true
                    },
                    "body": "Hello Matthew,\r\n\r\nI am sorry, but I am afraid You didn't get exactly my problem.\r\n\r\n{quote}So, the solution at this point is to (a) ensure you don't check in a cached version of the file into your repository, and (b) have a deployment task that checks for and removes it so it may be regenerated on the target machine.{quote}\r\nI have a fresh and new application with no cache at all - no leftovers from any repositories or a different machine.\r\n\r\nOn my specific machine (web-server), Zend creates a file that contains lines such as:{noformat}include_once 'Zend\/Form\/Decorator\/DtDdWrapper.php';\r\ninclude_once 'Custom\/View\/Filter\/Translate.php';\r\ninclude_once '\/srv\/www\/htdocs\/test\/html\/test\/application\/modules\/test\/library\/View\/Helper\/Internationalization\/GetCurrentLanguage.php';{noformat}\r\n\r\nThe first and second line seems to be okay whereas lines as the third one are valid paths to files on the machine, but the application (php?) crashes with white screen in the browser and no meaningful error log.\r\nThe first two lines are on the include_path while the third one is defined with _Zend_Loader_Autoloader_Resource_.\r\n\r\nCheers,\r\nLT.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lowtower",
                        "name": "lowtower",
                        "displayName": "Timo Fehsenfeld",
                        "active": true
                    },
                    "created": "2011-01-12T05:50:06.000+0000",
                    "updated": "2011-01-12T05:50:06.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10940\/transitions"
}