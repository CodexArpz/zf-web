{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3741",
    "key": "ZF-3741",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "make Zend Log handle more than just strings"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3741\/votes",
                "votes": 1,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2008-08-06T09:43:24.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=antych",
                "name": "antych",
                "displayName": "Karol Grecki",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-07-24T08:21:55.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2008-08-06T09:43:24.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Newly added FirePHP works great and it handles more than strings, so a nicely formatted array or exception can be printed in firebug console.\nUnfortunately standard zend log writer\/formatter don't support anything else than a string and if multiple writers are used it's causing notices eg.\n\n{code}\n$logger = new Zend_Log();\n\n$fireWriter = new Zend_Wildfire_FirebugLogWriter();\n$logger->addWriter($fireWriter);\n        \n$streamWriter = new Zend_Log_Writer_Stream(\"\/dev\/null\");\n$logger->addWriter($streamWriter);\n        \n$logger->info(range(1,10));\n{code}\n\ntriggers Notice: Array to string conversion in \/home\/sites\/shared\/library\/Zend\/Log\/Formatter\/Simple.php on line 72\n\nIt would be nice if the formatter ignored variables that are not strings and objects that does not implement __toString() method avoiding this notice.\nAlternatively arrays or objects could be passed through print_r() or similar so they can be displayed."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3741\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cadorn",
                "name": "cadorn",
                "displayName": "Christoph Dorn",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/11455",
                    "filename": "patch.txt",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cadorn",
                        "name": "cadorn",
                        "displayName": "Christoph Dorn",
                        "active": true
                    },
                    "created": "2008-08-04T13:17:51.000+0000",
                    "size": 533,
                    "mimeType": "text\/plain",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/11455\/patch.txt"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10050",
                    "id": 10050,
                    "description": "Minor Release Candidate",
                    "name": "1.6.0RC2",
                    "userReleaseDate": "11\/Aug\/08",
                    "archived": true,
                    "releaseDate": "2008-08-11",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10017",
                    "id": 10017,
                    "name": "Zend_Log",
                    "description": "classic logging utility functions",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/23283",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cadorn",
                        "name": "cadorn",
                        "displayName": "Christoph Dorn",
                        "active": true
                    },
                    "body": "Possible solution for \"simple\" writer. Rather than running variable through print_r it simply converts it to a string calling __toString() on the object if it exists.\n\nIf this is an acceptable solution I can commit along with unit tests.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cadorn",
                        "name": "cadorn",
                        "displayName": "Christoph Dorn",
                        "active": true
                    },
                    "created": "2008-08-04T13:17:51.000+0000",
                    "updated": "2008-08-04T13:17:51.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/23290",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=antych",
                        "name": "antych",
                        "displayName": "Karol Grecki",
                        "active": true
                    },
                    "body": "__toString()  is already called automatically, the problem are objects that don't implement it and arrays, they need to be ignored or converted to strings manually",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=antych",
                        "name": "antych",
                        "displayName": "Karol Grecki",
                        "active": true
                    },
                    "created": "2008-08-04T14:08:28.000+0000",
                    "updated": "2008-08-04T14:08:28.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/23292",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cadorn",
                        "name": "cadorn",
                        "displayName": "Christoph Dorn",
                        "active": true
                    },
                    "body": "Right. My patch effectively ignores them (by printing the variable type) if the __toString() method is not implemented.\n\nWe could convert them to a string but in which format? print_r() is not really suited for single line logging nor is serialize().\n\nMy patch may not be the final solution, but it eliminates the notice for now and does not change the logic otherwise.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cadorn",
                        "name": "cadorn",
                        "displayName": "Christoph Dorn",
                        "active": true
                    },
                    "created": "2008-08-04T15:12:27.000+0000",
                    "updated": "2008-08-04T15:12:27.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/23296",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=antych",
                        "name": "antych",
                        "displayName": "Karol Grecki",
                        "active": true
                    },
                    "body": "Provided patch won't help if objects don't implement __toString() \n{code}\nCatchable fatal error: Object of class Foo could not be converted to string in...\n{code}\nAlternative solution could be to silence that function \n{code}\n$output = @str_replace(\"%$name%\", $value, $output);\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=antych",
                        "name": "antych",
                        "displayName": "Karol Grecki",
                        "active": true
                    },
                    "created": "2008-08-05T01:13:46.000+0000",
                    "updated": "2008-08-05T01:13:46.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/23312",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cadorn",
                        "name": "cadorn",
                        "displayName": "Christoph Dorn",
                        "active": true
                    },
                    "body": "You are right. Don't know how I missed that.\n\nSilencing would work for me too.\n\nOr how about this:\n\n{code}\nif ((is_object($value) && !method_exists($value,'__toString'))\n    || is_array($value)) {\n\n    $value = gettype($value);  \n}\n          \n$output = str_replace(\"%$name%\", $value, $output);\n{code}\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cadorn",
                        "name": "cadorn",
                        "displayName": "Christoph Dorn",
                        "active": true
                    },
                    "created": "2008-08-05T09:30:19.000+0000",
                    "updated": "2008-08-05T09:30:19.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/23313",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=antych",
                        "name": "antych",
                        "displayName": "Karol Grecki",
                        "active": true
                    },
                    "body": "Looks good to me.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=antych",
                        "name": "antych",
                        "displayName": "Karol Grecki",
                        "active": true
                    },
                    "created": "2008-08-05T09:36:14.000+0000",
                    "updated": "2008-08-05T09:36:14.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/23321",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Chrisoph -- can you apply this to trunk and 1.6 branch prior to 6 Aug 2008, 6pm PDT? If not, I'll apply. Is there a test for it?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-08-05T13:11:37.000+0000",
                    "updated": "2008-08-05T13:11:37.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/23328",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cadorn",
                        "name": "cadorn",
                        "displayName": "Christoph Dorn",
                        "active": true
                    },
                    "body": "I'll apply it tomorrow along with a test.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cadorn",
                        "name": "cadorn",
                        "displayName": "Christoph Dorn",
                        "active": true
                    },
                    "created": "2008-08-05T21:17:52.000+0000",
                    "updated": "2008-08-05T21:17:52.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/23349",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cadorn",
                        "name": "cadorn",
                        "displayName": "Christoph Dorn",
                        "active": true
                    },
                    "body": "Applied changes and added test to trunk, merged to 1.6 release branch.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cadorn",
                        "name": "cadorn",
                        "displayName": "Christoph Dorn",
                        "active": true
                    },
                    "created": "2008-08-06T09:43:23.000+0000",
                    "updated": "2008-08-06T09:43:23.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3741\/transitions"
}