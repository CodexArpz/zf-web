{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10891",
    "key": "ZF-10891",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Filter_StringTrim does not work correctly with a multibyte string (e.g. Fullwidth Space)"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/11",
                "name": "Patch",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10891\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10160",
                    "id": 10160,
                    "description": "Major Release",
                    "name": "Next Major Release",
                    "archived": false,
                    "released": false
                }
            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akitsukada",
                "name": "akitsukada",
                "displayName": "Akihiro TSUKADA",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2011-01-02T06:26:02.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-06-24T06:15:46.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Zend_Filter_StringTrim::_unicodeTrim has a problem with multibyte string.\r\n# This problem is fixed in Related issue [ZF-7023|http:\/\/framework.zend.com\/issues\/browse\/ZF-7023], but incomplete.\r\n\r\nWhen the multibyte character string of UTF8 is used, it is necessary to specify \"u\" qualifier in the preg_replace function of PHP. \r\nSo it works correctly by adding \"u\" to 1st parameter of preg_replace. \r\n\r\n{noformat}\r\ndiff --git a\/library\/Zend\/Filter\/StringTrim.php b\/library\/Zend\/Filter\/StringTrim.php\r\nindex f9a2bb7..b786f8b 100644\r\n--- a\/library\/Zend\/Filter\/StringTrim.php\r\n+++ b\/library\/Zend\/Filter\/StringTrim.php\r\n@@ -119,6 +119,6 @@ class Zend_Filter_StringTrim implements Zend_Filter_Interface\r\n         );  \r\n \r\n         $pattern = '^[' . $chars . ']*|[' . $chars . ']*$';\r\n-        return preg_replace(\"\/$pattern\/sSD\", '', $value);\r\n+        return preg_replace(\"\/$pattern\/sSDu\", '', $value);\r\n     }   \r\n }\r\n{noformat}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10891\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/4",
                "name": "Reopened"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-11223",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11223",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                },
                {
                    "issueKey": "ZF-11533",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11533",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                },
                {
                    "issueKey": "ZF-11551",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11551",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10520",
                    "id": 10520,
                    "description": "Mini Release",
                    "name": "1.11.2",
                    "userReleaseDate": "30\/Dec\/10",
                    "archived": false,
                    "releaseDate": "2010-12-30",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10013",
                    "id": 10013,
                    "name": "Zend_Filter",
                    "description": "methods for filtering data",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44530",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=satoruyoshida",
                        "name": "satoruyoshida",
                        "displayName": "Satoru Yoshida",
                        "active": true
                    },
                    "body": "This issue seems to happen only in Japanese for me.\r\n\r\nAkihiro, do you confirm to happen on other languages?\r\nFor example, Chinese, Korean.\r\n\r\n( And Thai also might have same problem)\r\n\r\nIf Chinese and Korean have same solution, we could make a model of Zend_filter_Alpha for changing several expressions and using them.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=satoruyoshida",
                        "name": "satoruyoshida",
                        "displayName": "Satoru Yoshida",
                        "active": true
                    },
                    "created": "2011-02-20T19:21:21.000+0000",
                    "updated": "2011-02-20T19:21:21.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44580",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Fixed with GH-107",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2011-02-25T14:32:30.000+0000",
                    "updated": "2011-02-25T14:32:30.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44585",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akitsukada",
                        "name": "akitsukada",
                        "displayName": "Akihiro TSUKADA",
                        "active": true
                    },
                    "body": "Certainly, it happens in Japanese. In Korean and Chinese, the same problem was not able to be confirmed (Though the confirmation might be not enough). \r\n\r\nHowever, I was embarrassed as a Japanese user, and I am glad of fix. \r\n\r\nThank you. ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akitsukada",
                        "name": "akitsukada",
                        "displayName": "Akihiro TSUKADA",
                        "active": true
                    },
                    "created": "2011-02-26T09:44:21.000+0000",
                    "updated": "2011-02-26T09:44:21.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/50279",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=volhovec",
                        "name": "volhovec",
                        "displayName": "Leonid",
                        "active": true
                    },
                    "body": "Zend Framework minimal version 1.11.11\r\nSame error.\r\nVersion of the StringTrim.php yonger than the message about fix - * @version $Id: StringTrim.php 23775 2011-03-01 17:25:24Z ralph $\r\n\r\nPreg_replace - return preg_replace(\"\/$pattern\/sSD\", '', $value); - without latter u\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=volhovec",
                        "name": "volhovec",
                        "displayName": "Leonid",
                        "active": true
                    },
                    "created": "2012-04-11T14:00:15.000+0000",
                    "updated": "2012-04-11T14:00:15.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51007",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sasezaki",
                        "name": "sasezaki",
                        "displayName": "Kazusuke Sasezaki",
                        "active": true
                    },
                    "body": "Reopen, because this fix is not applied to ZF1 trunk & 1.11.11.\r\nAnd \"u\" qualifier patch is not correct.Please see ZF2-170\r\nhttp:\/\/framework.zend.com\/issues\/browse\/ZF2-170",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sasezaki",
                        "name": "sasezaki",
                        "displayName": "Kazusuke Sasezaki",
                        "active": true
                    },
                    "created": "2012-06-06T13:12:52.000+0000",
                    "updated": "2012-06-06T13:12:52.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51195",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=satoruyoshida",
                        "name": "satoruyoshida",
                        "displayName": "Satoru Yoshida",
                        "active": true
                    },
                    "body": "I do not think \/u switch resolves this issue, because the \"Fullwidth Space\" is not based on international rule, but Japanese specific rule.\r\n\r\nI think if we would make this filter fit for Japanese,\r\nIt will be necessary to make conditional branching by locale as following,\r\nor to make new inherited class.\r\n\r\n{code}\r\n$this->_locale = new Zend_Locale('auto');\r\n\r\nswitch ($this->_locale->getLanguage()) {\r\n    case 'ja':\r\n        \/\/Japanese specific rule\r\n        $chars = preg_replace...;\r\n        $pattern = ...;\r\n        return preg_replace...;\r\n    break;\r\n\/*\r\n if there would exist another character system, it would fall on here in future.\r\n  case 'xx':\r\n      ...;\r\n    break;\r\n*\/\r\n  default:\r\n      \/\/original statement\r\n        $chars = preg_replace...;\r\n        $pattern = ...;\r\n        return preg_replace...;\r\n    break;\r\n}\r\n{code}\r\n\r\nThanks.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=satoruyoshida",
                        "name": "satoruyoshida",
                        "displayName": "Satoru Yoshida",
                        "active": true
                    },
                    "created": "2012-06-24T06:14:53.000+0000",
                    "updated": "2012-06-24T06:15:46.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10891\/transitions"
}