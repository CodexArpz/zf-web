{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7347",
    "key": "ZF-7347",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Validate_Db_Abstract can't be used with postgresql schemas"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7347\/votes",
                "votes": 1,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-07-26T12:47:56.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=snipercze",
                "name": "snipercze",
                "displayName": "Ondrej Flidr",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-07-22T03:37:41.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-07-28T00:14:24.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "postgresql",
                "zend_validate_db_abstract"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I'm using PostgreSQL and grouping tables in schemas. Unfortunatelly, Zend_Validate_Db_Abstract in __construct accepts only table a column, not schema. When I try use tablename as schema.table, Zend_Db_Select don't accept it as valid table name and throw Zend_Db_Select_Exception: No table has been specified for the FROM clause. \n\nExample of my using of validator\n$usernameElement = new Zend_Form_Element_Text('username');\n$usernameElement->addValidator(new Zend_Validate_Db_RecordExists('user.account', 'username'));\n\nFixing should be very easy:\n1) add schema parameter into __construct of Zend_Validate_Db_Abstract\n2) modify _query() line 114 like this: $select->from($this->_table, $this->_field, $this->_schema) and delete line 115 $select->columns($this->_field)"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7347\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                "name": "bittarman",
                "displayName": "Ryan Mauger",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/12104",
                    "filename": "RecordExists.php",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sirshurf",
                        "name": "sirshurf",
                        "displayName": "Alex Frenkel",
                        "active": true
                    },
                    "created": "2009-07-26T04:39:16.000+0000",
                    "size": 2784,
                    "mimeType": "application\/octet-stream",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/12104\/RecordExists.php"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10331",
                    "id": 10331,
                    "description": "Mini Release",
                    "name": "1.8.3",
                    "userReleaseDate": "09\/Jun\/09",
                    "archived": false,
                    "releaseDate": "2009-06-09",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10140",
                    "id": 10140,
                    "name": "Zend_Validate",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32839",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                        "name": "bittarman",
                        "displayName": "Ryan Mauger",
                        "active": true
                    },
                    "body": "Some more consideration will be needed to maintain BC here than the suggested solution. \nThe third param is currently the exclude field to be used, and the fourth is to take an adapter in case no default is set. \n\nI will probably change the table parameter to also accept an array with keys schema and table, which would resolve this, and maintain BC.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                        "name": "bittarman",
                        "displayName": "Ryan Mauger",
                        "active": true
                    },
                    "created": "2009-07-22T05:30:00.000+0000",
                    "updated": "2009-07-22T05:30:00.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32941",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sirshurf",
                        "name": "sirshurf",
                        "displayName": "Alex Frenkel",
                        "active": true
                    },
                    "body": "The problem allsow exists in using this class in DB2\/400\n\n I have fixed it...\n\nAttached a file, it's an extention from the Zend_Validate_Db_RecordExists, but the 2 classes I have changed are from the Zend_Validate_Db_Abstract and should be added there...\n\nI have mantained BC by changing the parameter to accept array allsow (as you stated). \n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sirshurf",
                        "name": "sirshurf",
                        "displayName": "Alex Frenkel",
                        "active": true
                    },
                    "created": "2009-07-26T04:38:28.000+0000",
                    "updated": "2009-07-26T04:38:28.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32942",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sirshurf",
                        "name": "sirshurf",
                        "displayName": "Alex Frenkel",
                        "active": true
                    },
                    "body": "BTW, if I would be able to work on this issue, I can submit a fix to the SVN.\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sirshurf",
                        "name": "sirshurf",
                        "displayName": "Alex Frenkel",
                        "active": true
                    },
                    "created": "2009-07-26T04:47:37.000+0000",
                    "updated": "2009-07-26T04:47:37.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32945",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                        "name": "bittarman",
                        "displayName": "Ryan Mauger",
                        "active": true
                    },
                    "body": "There is a little more work to be considered than just the code attached.\n\nThere also needs to be documentation and testing changes.\n\nThe current test suite uses the sqlite adapter, and so this fix cannot be tested correctly, so the tests also need to be re-factored to use a mock adapter to allow this to be tested correctly.\n\nI will be submitting a fix for all of these points shortly.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                        "name": "bittarman",
                        "displayName": "Ryan Mauger",
                        "active": true
                    },
                    "created": "2009-07-26T06:22:17.000+0000",
                    "updated": "2009-07-26T06:22:17.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32948",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sirshurf",
                        "name": "sirshurf",
                        "displayName": "Alex Frenkel",
                        "active": true
                    },
                    "body": "Now you rased a point here....\n\nThe test adapter is sqllite? Now I know why most of the code does not consider DB2... :((( well more bug fixes...\n\nI do know that there is more to consider than simply posting a fix, I have created it for my project since I am billing a client for it. \n\nAs you can see my fix is an extention to the finale work class, so when you will get a fix up I will gladly test it. \n\nBut I dont have the time now to create a fix I can document, change PHPTestUnits and submit it.\n\nI would most probably do it, if you would not post a fix in a couple of day's, becouse I would need it for another client,  since the database I am working on is not SQLLite or MySQL.\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sirshurf",
                        "name": "sirshurf",
                        "displayName": "Alex Frenkel",
                        "active": true
                    },
                    "created": "2009-07-26T08:01:36.000+0000",
                    "updated": "2009-07-26T08:01:36.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32955",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                        "name": "bittarman",
                        "displayName": "Ryan Mauger",
                        "active": true
                    },
                    "body": "Fixed on trunk in r17157\nMerged to 1.9 release branch in r17160",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                        "name": "bittarman",
                        "displayName": "Ryan Mauger",
                        "active": true
                    },
                    "created": "2009-07-26T12:47:50.000+0000",
                    "updated": "2009-07-26T12:47:50.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32972",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sirshurf",
                        "name": "sirshurf",
                        "displayName": "Alex Frenkel",
                        "active": true
                    },
                    "body": "only 1 comment...\n\n\t \t56\t+\t    \/**\n \t \t57\t+\t     * @var string\n53\t58\t \t     *\/    \n \t54\t59\t \t    protected $_table = ''; \n\nTable can accept Array (\"t\"=>\"table\"), and not only string.\n\n10x!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sirshurf",
                        "name": "sirshurf",
                        "displayName": "Alex Frenkel",
                        "active": true
                    },
                    "created": "2009-07-27T07:19:15.000+0000",
                    "updated": "2009-07-27T07:19:15.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32973",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                        "name": "bittarman",
                        "displayName": "Ryan Mauger",
                        "active": true
                    },
                    "body": "Actually, there is no purpose in accepting an array for the table name, as the alias would never be used. \nThis would only increase overhead, for a completely pointless reason.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                        "name": "bittarman",
                        "displayName": "Ryan Mauger",
                        "active": true
                    },
                    "created": "2009-07-27T07:23:36.000+0000",
                    "updated": "2009-07-27T07:23:36.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32993",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sirshurf",
                        "name": "sirshurf",
                        "displayName": "Alex Frenkel",
                        "active": true
                    },
                    "body": "Unfortunately incorrect, (I have wasted about an hour to find THAT out...)\n\nwhen you are working with DB2\/400 (as I am doing...) you will find that you mast have it. \n\nExample: Lets say that I have a Schema, Table, Field that I want to check.\nWithout using alias:\nSELECT Table.Field from Schema.Table where (Table.Field='...')\n\nThis SQL would not work on DB2\/400 (I have not checked on another versions)\nIf I am adding aliases:\n\nSELECT a.Field FROM SCHEMA.TABLE as a WHERE...\n\nThat SQL will work, so what  I am pointing is that there is a case when you do need\/mast have aliases...\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sirshurf",
                        "name": "sirshurf",
                        "displayName": "Alex Frenkel",
                        "active": true
                    },
                    "created": "2009-07-27T23:46:35.000+0000",
                    "updated": "2009-07-27T23:46:35.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32994",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                        "name": "bittarman",
                        "displayName": "Ryan Mauger",
                        "active": true
                    },
                    "body": "Thank you for bringing this to my attention,\n\nBut I believe that this is an underlying problem with the select object. There still would serve no purpose to the component to specify an alias that will not be used.\n\nThis is however related to this issue http:\/\/framework.zend.com\/issues\/browse\/ZF-4553. (the select should actually read \"SELECT Schema.Table.Field FROM\"...\"WHERE (Schema.Table.Field = \"..\")\n\nI will chase this up and find out if this is to be fixed shortly.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                        "name": "bittarman",
                        "displayName": "Ryan Mauger",
                        "active": true
                    },
                    "created": "2009-07-28T00:14:23.000+0000",
                    "updated": "2009-07-28T00:14:23.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7347\/transitions"
}