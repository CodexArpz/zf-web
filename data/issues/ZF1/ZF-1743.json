{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1743",
    "key": "ZF-1743",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Session_Namespace does not persist new slice data"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1743\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2008-02-04T11:06:16.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zendfw",
                "name": "zendfw",
                "displayName": "Shekar Reddy",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2007-07-20T00:35:28.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2008-02-04T11:06:16.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I'm having an issue with Zend_Session on PHP 5.1.6:\n\n{code}\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n$auth = new Zend_Session_Namespace( 'auth' );\n...\n...\n...\n{code}\n \nThe Auth namespace above works well and so far, so good. Its values get reloaded on subsequent page loads. Session is setup properly and it works.\n \nHowever, getting another slice (page) of the session does not persist the new slice on the next page load (the auth slice still works fine). Hence, a new value is getting generated for each page-load: \n \n{code}\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\nif ( ! $value = getPage( $key ))      \/\/ Always fails\n{ \n   $value = generatePageValue();      \/\/ And a new value is generated\n   setPage( $key, $value );           \/\/ Save to session (but it does not get saved as it does not reload on next page)\n}\n \n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\nfunction getPage( $key )\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n{\n   $page =  new Zend_Session_Namespace( 'page' );\n   \/\/\n   if ( isset( $page->$key ))\n   {\n      $key = $page->$key;\n      \/\/\n      if ( isset( $key[ 'value' ] )\n           return $key[ 'value' ]\n   }\n   \/\/\n   return '';\n}\n \n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\nfunction setPage( $key, $value )\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n{\n   $page = new Zend_Session_Namespace( 'page' );\n   $data = ( isset( $page->$key ) ? $page->$key : array()); \n   \/\/\n   $data[ 'value' ] = $value;\n   $page->$key = $data;\n}\n{code}\n \n \nIn the above 'page' namespace, it is always returning an empty value on getPage() and hence saving a new value to the session on every page load. We even tried the Zend_Session_Namespace::SINGLE_INSTANCE mode, too but no luck. Here is the old code that used to work well without a problem: \n\n \n{code}\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\nfunction getPage( $key )\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n{\n   if ( isset( $_SESSION[ 'page' ][ $key ][ 'value' ] ))\n        return $_SESSION[ 'page' ][ $key ][ 'value' ];\n   \/\/\n   return '';\n}\n \n \n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\nfunction setPage( $key, $value )\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n{\n   $_SESSION[ 'page' ][ $key ][ 'value' ] = $value;\n}\n{code}\n\n\nI guess I used a version-safe syntax on namespace component. The updated documentation reads the issue with PHP version, like so:\n \nVersion Pre-5.2 syntax (works on all versions):\n \n{code}\nif ( isset( $page->$key )) \n{\n   $key = $page->$key;\n   \/\/\n   if ( isset( $key[ 'value' ] )\n        return $key[ 'value' ]\n}\n{code}\n \n \nVersion 5.2+ syntax (does not work under 5.2):\n \n{code}\nif ( isset( $page->$key[ 'value' ] )) \n{\n     return $page->$key[ 'value' ]\n}\n{code}\n\n \nI used the version pre-5.2 syntax on both - auth and page slices. It works on auth slice gracefully but fails on the page slice.\n\nI tested it on a temporary installation of PHP 5.2.3 (another machine) and it works fine. But I really need to make this work on 5.1.6 as our dev environment would take ages to upgrade to 5.2.x. I don't see why this should not work on 5.1.6 given that I am using pre-5.2 syntax that is supposed to work on all versions.\n\nOn another note, I've noticed if I set the option as under:\n \n{code}\n    Zend_Session::setOptions( array(\n      'name'    => 'MySID' )\n    );\n{code}\n\nbut not set the session.name inside php.ini, the first session name is generated as PHPSESSID and subsequent names are generated as per the above setting (MySID). I was able to see the session_name for each namespace object created by doing: \n \necho session_name();\n \nHowever, if I set the value in php.ini, session name is generated properly for each namespace. And so, I ended up setting the name in the ini file. Don't know if this is an issue with 5.1.6 or Zend_Session and thought you might like to take a look at this one, too.\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1743\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                "name": "ralph",
                "displayName": "Ralph Schindler",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-800",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-800",
                    "type": {
                        "name": "Related",
                        "direction": "OUTBOUND",
                        "description": "is related to"
                    }
                },
                {
                    "issueKey": "ZF-1385",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1385",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                },
                {
                    "issueKey": "ZF-1828",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1828",
                    "type": {
                        "name": "Related",
                        "direction": "INBOUND",
                        "description": "is related to"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10031",
                    "id": 10031,
                    "description": "Major Release",
                    "name": "1.0.0",
                    "userReleaseDate": "30\/Jun\/07",
                    "archived": true,
                    "releaseDate": "2007-06-30",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10096",
                    "id": 10096,
                    "name": "Zend_Session",
                    "description": "A standardized interface to common functionality found in or indigenous to site session implementations. ",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/16092",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "Shekar,\n  I am trying to build a testable testcase for this so that i can apply it to all verisons of php supported by zend framework.. does this look like it describes the problem well?\n\n{code}\n<?\n\n\/\/ set path for all php versions\nset_include_path('.:\/usr\/share\/php5:\/usr\/share\/php');\n\n\/\/ e-strict it\nerror_reporting(E_ALL | E_STRICT);\n\n\/\/ start the bug\nrequire_once 'Zend\/Session.php';\n\n$s = new Zend_Session_Namespace('blah');\n$s->someArray['foo'] = 'bar';\n\nvar_dump($_SESSION);\n{code}\n\n\ncan you confirm this produces the problem on your version?\n\n-ralph\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2007-07-31T13:51:26.000+0000",
                    "updated": "2007-07-31T13:51:26.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/16119",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zendfw",
                        "name": "zendfw",
                        "displayName": "Shekar Reddy",
                        "active": true
                    },
                    "body": "Hi Ralph,\n \nThe following test-cases work well on v5.2.3 but fail on v5.1.6:\n \n{code}\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\necho PHP_VERSION;\n\nerror_reporting(E_ALL | E_STRICT);   \/\/ e-strict it\n\n \n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\/\/ Pre-v5.2 syntax\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\necho 'BEFORE: ' . Zend_Debug::dump($_SESSION);\n$b = new Zend_Session_Namespace('blah');\n$s = $b->someArray;\n\nZend_Debug::dump($s);     \/\/ Always empty on v5.1.6 - does not persist :(\n\nif ( ! isset( $s[ 'foo' ] ))\n{\n   $s['foo'] = 'bar';\n   $b->someArray = $s;\n}\n \necho 'AFTER: ' . Zend_Debug::dump($_SESSION);   \/\/ [blah][someArray][foo] exists now but does not persist\n \n\n \n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\/\/ v5.2 syntax\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n \necho 'BEFORE: ' . Zend_Debug::dump($_SESSION);\n$b = new Zend_Session_Namespace('blah');\n \nif ( ! isset( $b->someArray[ 'foo' ] ))\n{\n   echo 'Boo-Boo!';     \/\/ Always echoes this on 5.1.6 - does not persist :(\n   $b->someArray['foo'] = 'bar';\n}\n \necho 'AFTER: ' . Zend_Debug::dump($_SESSION);   \/\/ [blah][someArray][foo] exists now but does not persist\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n{code}\n \n\nYou marked my issue 1743 as a duplicate of http:\/\/framework.zend.com\/issues\/browse\/ZF-1385  but I'm not sure if it is. Furthermore, my issue comprises of two problems; one being the above, and the other pertaining to setOptions('name') for session-name at its bottom.\n \nHTH\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zendfw",
                        "name": "zendfw",
                        "displayName": "Shekar Reddy",
                        "active": true
                    },
                    "created": "2007-08-01T13:55:29.000+0000",
                    "updated": "2007-08-01T13:55:29.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/16131",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zendfw",
                        "name": "zendfw",
                        "displayName": "Shekar Reddy",
                        "active": true
                    },
                    "body": "Hi Ralph,\n\nForgot to mention that ideally, the pre-v5.2 syntax should work on all versions as expected.\n\nOn another note, I consider it double-standards to advise the developers to use one syntax for pre-v5.2 and another syntax for v5.2 - unless the ZF raises the minimum PHP version to 5.2. Its more confusing and there will be frequent questions on the list why the Zend_Session logic is not working even if its documented clearly and even if its an issue with the version of PHP they are using. I suggest that we simplify the session component and offer Zend_Session out of the box without dependency on the namespace subcomponent. However, those who wish to use the namespace subcomponent may still use it if their version of PHP is compatible with the syntax they're going to use. Here is my suggestion that supports optional namespaces and multi-dimensional nodes that should suffice most applications - including even the complex ones:\n\n\n{code}\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\nclass Zend_Session ...\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n{\n   \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n   static function get( $key, $namespace = '', $node = '' )\n   \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n   {\n      if ( $namespace && $node )      \/\/ Namespace and node\n         return $_SESSION[ $namespace ][ $node ][ $key ];\n      elseif ( $namespace )           \/\/ Just the namespace\n         return $_SESSION[ $namespace ][ $key ];\n      \/\/\n      return $_SESSION[ $key ];       \/\/ No namespace or node\n   }\n   \/\/\n   \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n   static function set( $key, $value, $namespace = '', $node = '' )\n   \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n   {\n      if ( $namespace && $node )        \/\/ Namespace and node\n         $_SESSION[ $namespace ][ $node ][ $key ] = $value;\n      elseif ( $namespace )             \/\/ Just the namespace\n         $_SESSION[ $namespace ][ $key ] = $value;\n      else\n         $_SESSION[ $key ] = $value;    \/\/ No namespace or node\n   }\n   \/\/\n   \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n   static function has( $key, $namespace = '', $node = '' )\n   \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n   {\n      if ( $namespace && $node )\n      {\n         if ( isset( $_SESSION[ $namespace ][ $node ][ $key ] ))\n            return true;          \/\/ Namespace and node\n      }\n      elseif ( $namespace )\n      {\n         if ( isset( $_SESSION[ $namespace ][ $key ] ))\n            return true;          \/\/ Just the namespace\n      }\n      else\n      {\n         if ( isset( $_SESSION[ $key ] ))\n            return true;         \/\/ No namespace or node\n      }\n      \/\/\n      return false;              \/\/ No data found\n   }\n}\n\n\n\nUSAGE\n-----\nif ( Zend_Session::has( 'user', 'auth' ))\n   $user = Zend_Session::get( 'user', 'auth' );\nelse\n   ...\n\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n{code}\n\n\nWhat do you think of the above...?\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zendfw",
                        "name": "zendfw",
                        "displayName": "Shekar Reddy",
                        "active": true
                    },
                    "created": "2007-08-02T13:51:05.000+0000",
                    "updated": "2007-08-02T13:51:05.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/16132",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "Shekar, Ive done some digging and using a standard suggested test script, was able to identify the problem to only 5.2.0\n\nhere is the code i used:\n{code}\nwebdeveloper@webdevelopment ~\/testing $ cat test_zsession.php \n<?\n\n\/\/ set path for all php versions\nset_include_path('.:\/usr\/share\/php5:\/usr\/share\/php');\n\n\/\/ e-strict it\nerror_reporting(E_ALL | E_STRICT);\n\n\/\/ start the bug\nrequire_once 'Zend\/Session.php';\n\nZend_Session::setId('1234');\nZend_Session::start();\n\necho PHP_VERSION . PHP_EOL;\n\n$s = new Zend_Session_Namespace('blah');\n\nif (isset($s->someArray)) {\n  echo 'OLD VALUE: ' . serialize($s->someArray) . PHP_EOL;\n}\n\n$new_value = 'bar' . rand(1,5);\n\n$s->someArray['foo'] = $new_value;\n\necho 'NEW VALUE: ' . serialize($s->someArray) . PHP_EOL;\n{code}\n\nAnd the output of runs:\n{code}\nwebdeveloper@webdevelopment ~\/testing $ cat \/dev\/null > \/tmp\/sess_1234 \nwebdeveloper@webdevelopment ~\/testing $ ~\/bin\/php514 test_zsession.php \n5.1.4\nNEW VALUE: a:1:{s:3:\"foo\";s:4:\"bar2\";}\nwebdeveloper@webdevelopment ~\/testing $ ~\/bin\/php514 test_zsession.php \n5.1.4\nOLD VALUE: a:1:{s:3:\"foo\";s:4:\"bar2\";}\nNEW VALUE: a:1:{s:3:\"foo\";s:4:\"bar3\";}\nwebdeveloper@webdevelopment ~\/testing $ ~\/bin\/php514 test_zsession.php \n5.1.4\nOLD VALUE: a:1:{s:3:\"foo\";s:4:\"bar3\";}\nNEW VALUE: a:1:{s:3:\"foo\";s:4:\"bar4\";}\nwebdeveloper@webdevelopment ~\/testing $ cat \/dev\/null > \/tmp\/sess_1234 \nwebdeveloper@webdevelopment ~\/testing $ ~\/bin\/php516 test_zsession.php \n5.1.6\nNEW VALUE: a:1:{s:3:\"foo\";s:4:\"bar1\";}\nwebdeveloper@webdevelopment ~\/testing $ ~\/bin\/php516 test_zsession.php \n5.1.6\nOLD VALUE: a:1:{s:3:\"foo\";s:4:\"bar1\";}\nNEW VALUE: a:1:{s:3:\"foo\";s:4:\"bar5\";}\nwebdeveloper@webdevelopment ~\/testing $ ~\/bin\/php516 test_zsession.php \n5.1.6\nOLD VALUE: a:1:{s:3:\"foo\";s:4:\"bar5\";}\nNEW VALUE: a:1:{s:3:\"foo\";s:4:\"bar4\";}\nwebdeveloper@webdevelopment ~\/testing $ cat \/dev\/null > \/tmp\/sess_1234 \nwebdeveloper@webdevelopment ~\/testing $ ~\/bin\/php520 test_zsession.php \n5.2.0\n\nNotice: Indirect modification of overloaded property Zend_Session_Namespace::$someArray has no effect in \/home\/webdeveloper\/testing\/test_zsession.php on line 25\nNEW VALUE: N;\nwebdeveloper@webdevelopment ~\/testing $ ~\/bin\/php520 test_zsession.php \n5.2.0\n\nNotice: Indirect modification of overloaded property Zend_Session_Namespace::$someArray has no effect in \/home\/webdeveloper\/testing\/test_zsession.php on line 25\nNEW VALUE: N;\nwebdeveloper@webdevelopment ~\/testing $ cat \/dev\/null > \/tmp\/sess_1234 \nwebdeveloper@webdevelopment ~\/testing $ ~\/bin\/php521 test_zsession.php \n5.2.1\nNEW VALUE: a:1:{s:3:\"foo\";s:4:\"bar5\";}\nwebdeveloper@webdevelopment ~\/testing $ ~\/bin\/php521 test_zsession.php \n5.2.1\nOLD VALUE: a:1:{s:3:\"foo\";s:4:\"bar5\";}\nNEW VALUE: a:1:{s:3:\"foo\";s:4:\"bar5\";}\nwebdeveloper@webdevelopment ~\/testing $ ~\/bin\/php521 test_zsession.php \n5.2.1\nOLD VALUE: a:1:{s:3:\"foo\";s:4:\"bar5\";}\nNEW VALUE: a:1:{s:3:\"foo\";s:4:\"bar4\";}\nwebdeveloper@webdevelopment ~\/testing $ cat \/dev\/null > \/tmp\/sess_1234 \nwebdeveloper@webdevelopment ~\/testing $ php test_zsession.php \n5.2.2-pl1-gentoo\nNEW VALUE: a:1:{s:3:\"foo\";s:4:\"bar3\";}\nwebdeveloper@webdevelopment ~\/testing $ php test_zsession.php \n5.2.2-pl1-gentoo\nOLD VALUE: a:1:{s:3:\"foo\";s:4:\"bar3\";}\nNEW VALUE: a:1:{s:3:\"foo\";s:4:\"bar3\";}\nwebdeveloper@webdevelopment ~\/testing $ php test_zsession.php \n5.2.2-pl1-gentoo\nOLD VALUE: a:1:{s:3:\"foo\";s:4:\"bar3\";}\nNEW VALUE: a:1:{s:3:\"foo\";s:4:\"bar2\";}\nwebdeveloper@webdevelopment ~\/testing $ \n{code}\n\nAgain, right now we are only talking about modification of Namespace variables, (not the \"name\" issue you also mentioned above)\n\nSee if this demonstrates the problem, my run output is right above.\n-ralph\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2007-08-02T14:02:53.000+0000",
                    "updated": "2007-08-02T14:02:53.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/16133",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "As a 5.2.0 only workaround:\n\n{code}\n<?\n\n\/\/ set path for all php versions\nset_include_path('.:\/usr\/share\/php5:\/usr\/share\/php');\n\n\/\/ e-strict it\nerror_reporting(E_ALL | E_STRICT);\n\n\/\/ start the bug\nrequire_once 'Zend\/Session.php';\n\nZend_Session::setId('1234');\nZend_Session::start();\n\necho PHP_VERSION . PHP_EOL;\n\n$s = new Zend_Session_Namespace('blah');\n\nif (isset($s->someArray)) {\n  echo 'OLD VALUE: ' . serialize($s->someArray) . PHP_EOL;\n}\n\n$new_value = 'bar' . rand(1,5);\n\n$tmp['foo'] = $new_value;\n$s->someArray = $tmp;\n\necho 'NEW VALUE: ' . serialize($s->someArray) . PHP_EOL;\n{code}\n\n{code}\nwebdeveloper@webdevelopment ~\/testing $ cat \/dev\/null > \/tmp\/sess_1234\nwebdeveloper@webdevelopment ~\/testing $ ~\/bin\/php516 test_zsession.php \n5.1.6\nNEW VALUE: a:1:{s:3:\"foo\";s:4:\"bar1\";}\nwebdeveloper@webdevelopment ~\/testing $ ~\/bin\/php516 test_zsession.php \n5.1.6\nOLD VALUE: a:1:{s:3:\"foo\";s:4:\"bar1\";}\nNEW VALUE: a:1:{s:3:\"foo\";s:4:\"bar2\";}\nwebdeveloper@webdevelopment ~\/testing $ cat \/dev\/null > \/tmp\/sess_1234\nwebdeveloper@webdevelopment ~\/testing $ ~\/bin\/php520 test_zsession520.php \n5.2.0\nNEW VALUE: a:1:{s:3:\"foo\";s:4:\"bar4\";}\nwebdeveloper@webdevelopment ~\/testing $ ~\/bin\/php520 test_zsession520.php \n5.2.0\nOLD VALUE: a:1:{s:3:\"foo\";s:4:\"bar4\";}\nNEW VALUE: a:1:{s:3:\"foo\";s:4:\"bar3\";}\nwebdeveloper@webdevelopment ~\/testing $ cat \/dev\/null > \/tmp\/sess_1234\nwebdeveloper@webdevelopment ~\/testing $ ~\/bin\/php521 test_zsession.php    \n5.2.1\nNEW VALUE: a:1:{s:3:\"foo\";s:4:\"bar4\";}\nwebdeveloper@webdevelopment ~\/testing $ ~\/bin\/php521 test_zsession.php \n5.2.1\nOLD VALUE: a:1:{s:3:\"foo\";s:4:\"bar4\";}\nNEW VALUE: a:1:{s:3:\"foo\";s:4:\"bar1\";}\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2007-08-02T14:14:47.000+0000",
                    "updated": "2007-08-02T14:14:47.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/16134",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=darby",
                        "name": "darby",
                        "displayName": "Darby Felton",
                        "active": true
                    },
                    "body": "I get results consistent with Ralph's - success for versions 5.1.4 (WinXP), 5.2.1 (Ubuntu), and 5.2.3 (RHEL 3).",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=darby",
                        "name": "darby",
                        "displayName": "Darby Felton",
                        "active": true
                    },
                    "created": "2007-08-02T15:12:38.000+0000",
                    "updated": "2007-08-02T15:12:38.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/16137",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zendfw",
                        "name": "zendfw",
                        "displayName": "Shekar Reddy",
                        "active": true
                    },
                    "body": "Hi Ralph\/Darby,\n\nI work on v5.1.6 on XP where the script did not work. It worked on 5.2.3 on XP, too. Regret, I have no way of testing it on other versions.\n\nIt's strange it works on 5.1.4, 5.1.6 but not on 5.2. Does it mean PHP was fine on 5.1.4 and 5.1.6 but broken in 5.2 in this respect? Is there a guarantee it would not be broken in future versions of PHP? It wouldn't be graceful for the session component if it does!\n\nIn any case, the methods I suggested above for the Zend_Session component to make it independent of the namespace subcomponent are backwards compatible and are meant to be in addition to the ones that already exist in the session component.\n\nRegards,\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zendfw",
                        "name": "zendfw",
                        "displayName": "Shekar Reddy",
                        "active": true
                    },
                    "created": "2007-08-02T15:58:55.000+0000",
                    "updated": "2007-08-02T15:58:55.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/16138",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "Shekar,\n  I just downloaded php 5.1.6 for xp and was able to sucessfully run this script:\n\n{code}\n<?\n\n\/\/ set path for all php versions\nset_include_path('.');\n\n\/\/ e-strict it\nerror_reporting(E_ALL | E_STRICT);\n\n\/\/ start the bug\nrequire_once 'Zend\/Session.php';\n\nZend_Session::setId('1234');\nZend_Session::start();\n\necho PHP_VERSION . PHP_EOL;\n\n$s = new Zend_Session_Namespace('blah');\n\nif (isset($s->someArray)) {\n  echo 'OLD VALUE: ' . serialize($s->someArray) . PHP_EOL;\n}\n\n$new_value = 'bar' . rand(1,5);\n\n$s->someArray['foo'] = $new_value;\n\necho 'NEW VALUE: ' . serialize($s->someArray) . PHP_EOL;\n\n{code}\n\nAnd get these expected results:\n\n{code}\nC:\\Documents and Settings\\Nobody Special\\Desktop\\php-5.1.6-win32\\test_zsession>less \"C:\\Documents and Settings\\Nobody Special\\Local Settings\\Temp\\sess_1234\"\n\nC:\\Documents and Settings\\Nobody Special\\Desktop\\php-5.1.6-win32\\test_zsession>rm \"C:\\Documents and Settings\\Nobody Special\\Local Settings\\\nTemp\\sess_1234\"\n\nC:\\Documents and Settings\\Nobody Special\\Desktop\\php-5.1.6-win32\\test_zsession>..\\php test_zsession.php\n5.1.6\nNEW VALUE: a:1:{s:3:\"foo\";s:4:\"bar5\";}\n\nC:\\Documents and Settings\\Nobody Special\\Desktop\\php-5.1.6-win32\\test_zsession>..\\php test_zsession.php\n5.1.6\nOLD VALUE: a:1:{s:3:\"foo\";s:4:\"bar5\";}\nNEW VALUE: a:1:{s:3:\"foo\";s:4:\"bar5\";}\n\nC:\\Documents and Settings\\Nobody Special\\Desktop\\php-5.1.6-win32\\test_zsession>..\\php test_zsession.php\n5.1.6\nOLD VALUE: a:1:{s:3:\"foo\";s:4:\"bar5\";}\nNEW VALUE: a:1:{s:3:\"foo\";s:4:\"bar1\";}\n{code}\n\n\nAre you using this test script or the one you posted above?  B\/c i notice the one you post above does not explicitly call Zend_Session::start() even though you are printing $_SESSION before the first namespace object is created (which implicitly calls start).\n\nOverall, before discussing code changes, we really need to identify the problem, and to which version of php it pertains to.  Once we figure that out, then we can talk about what changes to the codebase need to happen in order to fix outstanding problems.\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2007-08-02T16:39:35.000+0000",
                    "updated": "2007-08-02T16:39:35.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/16139",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "Note: other projects have also come across this problem and have fixed and suggested to move up to 5.2.1.  5.2.0 is simply broken when it comes to __get() behavior, and forcing a referenced return does not work for that version..  This should be taken into consideration when a decision needs to be made about whether or not fix's need to be applied to the codebase..\n\nReferences:\n\nhttp:\/\/trac.symfony-project.com\/trac\/ticket\/1376\nhttp:\/\/weierophinney.net\/matthew\/archives\/131-Overloading-arrays-in-PHP-5.2.0.html\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2007-08-02T16:55:05.000+0000",
                    "updated": "2007-08-02T16:55:05.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/16200",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zendfw",
                        "name": "zendfw",
                        "displayName": "Shekar Reddy",
                        "active": true
                    },
                    "body": "Hi Ralph,\n\nYes, Zend_Session::start() is called elsewhere BEFORE the script is executed. It's the same script that is run on 5.1.6 and 5.2.3 without any changes; otherwise, code on 5.2.3 would not succeed, either (I'm getting results as desired on 5.2.3)! But I'm not sure why my PHP 5.1.6 is failing - maybe something wrong with my installation\/configuration. It could be a DLL mismatch or a corrupted download or something that I'm not sure.\n\nI'm gonna have to re-download\/re-install\/re-try it. I'll let you know soon...\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zendfw",
                        "name": "zendfw",
                        "displayName": "Shekar Reddy",
                        "active": true
                    },
                    "created": "2007-08-06T09:18:07.000+0000",
                    "updated": "2007-08-06T09:18:07.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/16240",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "Modified my test script to include unnamed array modification and creation:\n\n\nScript and test run below:\n{code}\nwebdeveloper@webdevelopment ~\/testing $ cat test_zsession.php \n<?\n\n\/\/ set path for all php versions\nset_include_path('.:\/usr\/share\/php5:\/usr\/share\/php');\n\n\/\/ e-strict it\nerror_reporting(E_ALL | E_STRICT);\n\n\/\/ start the bug\nrequire_once 'Zend\/Session.php';\n\nZend_Session::setId('1234');\nZend_Session::start();\n\necho PHP_VERSION . PHP_EOL;\n\n$s = new Zend_Session_Namespace('blah');\n\nif (isset($s->someArray)) {\n  echo 'OLD VALUE: ' . serialize($s->someArray) . PHP_EOL;\n}\n\n$s->someArray[] = 'bar' . rand(1,5);\n\necho 'NEW VALUE: ' . serialize($s->someArray) . PHP_EOL;\n\n\n\n\nwebdeveloper@webdevelopment ~\/testing $ ~\/bin\/php514 test_zsession.php \n5.1.4\nNEW VALUE: a:1:{i:0;s:4:\"bar5\";}\n\nwebdeveloper@webdevelopment ~\/testing $ ~\/bin\/php514 test_zsession.php \n5.1.4\nOLD VALUE: a:1:{i:0;s:4:\"bar5\";}\nNEW VALUE: a:2:{i:0;s:4:\"bar5\";i:1;s:4:\"bar1\";}\n\nwebdeveloper@webdevelopment ~\/testing $ cat \/dev\/null > \/tmp\/sess_1234 \n\nwebdeveloper@webdevelopment ~\/testing $ ~\/bin\/php516 test_zsession.php \n5.1.6\nNEW VALUE: a:1:{i:0;s:4:\"bar3\";}\n\nwebdeveloper@webdevelopment ~\/testing $ ~\/bin\/php516 test_zsession.php \n5.1.6\nOLD VALUE: a:1:{i:0;s:4:\"bar3\";}\nNEW VALUE: a:2:{i:0;s:4:\"bar3\";i:1;s:4:\"bar1\";}\n\nwebdeveloper@webdevelopment ~\/testing $ cat \/dev\/null > \/tmp\/sess_1234 \n\nwebdeveloper@webdevelopment ~\/testing $ ~\/bin\/php520 test_zsession.php \n5.2.0\n\nNotice: Indirect modification of overloaded property Zend_Session_Namespace::$someArray has no effect in \/home\/webdeveloper\/testing\/test_zsession.php on line 23\nNEW VALUE: N;\n\nwebdeveloper@webdevelopment ~\/testing $ ~\/bin\/php520 test_zsession.php \n5.2.0\n\nNotice: Indirect modification of overloaded property Zend_Session_Namespace::$someArray has no effect in \/home\/webdeveloper\/testing\/test_zsession.php on line 23\nNEW VALUE: N;\n\nwebdeveloper@webdevelopment ~\/testing $ cat \/dev\/null > \/tmp\/sess_1234 \n\nwebdeveloper@webdevelopment ~\/testing $ ~\/bin\/php521 test_zsession.php \n5.2.1\nNEW VALUE: a:1:{i:0;s:4:\"bar5\";}\n\nwebdeveloper@webdevelopment ~\/testing $ ~\/bin\/php521 test_zsession.php \n5.2.1\nOLD VALUE: a:1:{i:0;s:4:\"bar5\";}\nNEW VALUE: a:2:{i:0;s:4:\"bar5\";i:1;s:4:\"bar2\";}\n\nwebdeveloper@webdevelopment ~\/testing $ cat \/dev\/null > \/tmp\/sess_1234 \n\nwebdeveloper@webdevelopment ~\/testing $ php test_zsession.php \n5.2.2-pl1-gentoo\nNEW VALUE: a:1:{i:0;s:4:\"bar4\";}\n\nwebdeveloper@webdevelopment ~\/testing $ php test_zsession.php \n5.2.2-pl1-gentoo\nOLD VALUE: a:1:{i:0;s:4:\"bar4\";}\nNEW VALUE: a:2:{i:0;s:4:\"bar4\";i:1;s:4:\"bar4\";}\n\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2007-08-08T10:53:42.000+0000",
                    "updated": "2007-08-08T10:53:42.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/17430",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zendfw",
                        "name": "zendfw",
                        "displayName": "Shekar Reddy",
                        "active": true
                    },
                    "body": "I re-downloaded PHP 5.1.6 and did a binary diff on all the files with those installed on my machine and found all of them to be identical. I guess this is just an isolated case - the reasons for which are unknown for now. Since you and Darby are stating it works on 5.1.6, let safely assume that 5.1.6 does not have any issues except for my isolated case.\n\nThanks,\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zendfw",
                        "name": "zendfw",
                        "displayName": "Shekar Reddy",
                        "active": true
                    },
                    "created": "2007-11-07T01:12:42.000+0000",
                    "updated": "2007-11-07T01:12:42.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/18816",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "Closing as not an issue right now, have done due diligence in finding the core of the issue, but it seems it only affects a 'bad' version of php.\n\n-ralph",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2008-02-04T11:06:16.000+0000",
                    "updated": "2008-02-04T11:06:16.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1743\/transitions"
}