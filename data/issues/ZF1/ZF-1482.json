{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1482",
    "key": "ZF-1482",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Gettext adapter doesn't work on 64 bit computer"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1482\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10090",
                    "id": 10090,
                    "description": "Release Candidate 2",
                    "name": "1.0.0 RC2",
                    "userReleaseDate": "08\/Jun\/07",
                    "archived": true,
                    "releaseDate": "2007-06-08",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2007-06-07T06:13:22.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=noplay",
                "name": "noplay",
                "displayName": "Julien Duponchelle",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2007-06-04T05:40:20.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-05-31T10:10:20.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "The gettext adpater doesn't work on 64 bit computer. When we try to use translation file we see that kind of errors:\n{{'\/var\/www\/html\/usvn\/locale\/fr_FR\/messages.mo' is not a gettext file.}}\n\nI wrote a fix:\n{code} \nIndex: www\/Zend\/Translate\/Adapter\/Gettext.php\n===================================================================\n--- www\/Zend\/Translate\/Adapter\/Gettext.php      (revision 5096)\n+++ www\/Zend\/Translate\/Adapter\/Gettext.php      (working copy)\n@@ -93,7 +93,7 @@\n\n         \/\/ get Endian\n         $input = $this->_readMOData(1);\n-        if (dechex($input[1]) == \"950412de\") {\n+        if (substr(dechex($input[1]), -8) == \"950412de\") {\n             $this->_bigEndian = FALSE;\n         } else if (dechex($input[1]) == \"de120495\") {\n             $this->_bigEndian = TRUE;\n{code} \n\nI think that gettext adpter should not work on Big Endian 64 bit computer but i'm not sure."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1482\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/10521",
                    "filename": "messages.mo",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=noplay",
                        "name": "noplay",
                        "displayName": "Julien Duponchelle",
                        "active": true
                    },
                    "created": "2007-06-04T16:17:29.000+0000",
                    "size": 11966,
                    "mimeType": "application\/octet-stream",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/10521\/messages.mo"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/10520",
                    "filename": "messages.po",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=noplay",
                        "name": "noplay",
                        "displayName": "Julien Duponchelle",
                        "active": true
                    },
                    "created": "2007-06-04T09:15:44.000+0000",
                    "size": 23371,
                    "mimeType": "application\/octet-stream",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/10520\/messages.po"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10023",
                    "id": 10023,
                    "description": "Release Candidate 1",
                    "name": "1.0.0 RC1",
                    "userReleaseDate": "28\/May\/07",
                    "archived": true,
                    "releaseDate": "2007-05-28",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10099",
                    "id": 10099,
                    "name": "Zend_Translate",
                    "description": "Provides translation functionality, based on standards such as TMX and Gettext.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/14930",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "When PHP does not act as described in the documentation also for 64bit machines we have a problem.\n\nActually the first 4 bytes from the file are read by the gettext adapter.\nThis must always be the same for 32 and 64bit machines. See line 65\/67\n\nThen with unpack the input is converted to a long with 'V' or 'N'.\nDocumentation states that 'V' and 'N' always return 32bit even on 64bit machines.\n\nAs you describe it, your problem would mean that we do not get 32bit but a 64bit long value.\n\nBut this could also mean that the adapter itself can not work on 64bit machines.\nHave you created the mo file on a 64bit machine or on a 32bit machine ??\n\nCan you attach your mo file so we can check the mo file ?\n\nCan you verify if the translations are working with your changed code ?\n\nWe will wait for your response.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2007-06-04T07:50:43.000+0000",
                    "updated": "2007-06-04T07:50:43.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/14936",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=noplay",
                        "name": "noplay",
                        "displayName": "Julien Duponchelle",
                        "active": true
                    },
                    "body": "Yes get a 64 bit value like this:\nfffffffffffff950412de\n\nRead the comment on:\nhttp:\/\/php.net\/dechex\n\n\nI join my .mo file\n\nI have not check if translation in deep but my unit test work. The test check if a particular string is translate into french.\n\n\n\n\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=noplay",
                        "name": "noplay",
                        "displayName": "Julien Duponchelle",
                        "active": true
                    },
                    "created": "2007-06-04T09:33:42.000+0000",
                    "updated": "2007-06-04T09:33:42.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/14951",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Actually what you sent was not the mo file...\n\nPlease check out the latest SVN 5108 or later.\nIssue should be fixed now for 64bit machines.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2007-06-04T16:09:22.000+0000",
                    "updated": "2007-06-04T16:09:22.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/14952",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=noplay",
                        "name": "noplay",
                        "displayName": "Julien Duponchelle",
                        "active": true
                    },
                    "body": "Sorry for .po \n\nI send the .mo\n\nI will test the latest svn version tomorrow.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=noplay",
                        "name": "noplay",
                        "displayName": "Julien Duponchelle",
                        "active": true
                    },
                    "created": "2007-06-04T16:18:30.000+0000",
                    "updated": "2007-06-04T16:18:30.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/14964",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=noplay",
                        "name": "noplay",
                        "displayName": "Julien Duponchelle",
                        "active": true
                    },
                    "body": "That's works\n\nThanks for the reaction time",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=noplay",
                        "name": "noplay",
                        "displayName": "Julien Duponchelle",
                        "active": true
                    },
                    "created": "2007-06-05T09:04:40.000+0000",
                    "updated": "2007-06-05T09:04:40.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/14979",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Fixed as with SVN 5108",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2007-06-07T06:13:22.000+0000",
                    "updated": "2007-06-07T06:13:22.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/50890",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sieira",
                        "name": "sieira",
                        "displayName": "Luis Sieira Garc\u00eda",
                        "active": true
                    },
                    "body": "I know this is a very old issue, but I'm experiencing the same error using apache2 under an Ubuntu64bits machine (AMD64).\r\n\r\n[Thu May 31 11:48:10 2012] [error] [client 127.0.0.1] PHP Fatal error:  Uncaught exception 'Zend_Translate_Exception' with message ''http:\/\/localhost\/TeleMarcom\/TeleMarcomPartners\/locale\/es_ES.mo' is not a gettext file'\r\n\r\nI was moving from gettext since it randomly failed while reloading multiple divs at a time using jQuery, returning untranslated or mistranslated strings (see this post http:\/\/stackoverflow.com\/questions\/10508305\/gettext-works-sometime). Gettext could successfully find and use my .mo files, but Zend_translator keeps insisting saying my files are not .mo\r\n\r\nI wonder if this could be related to this thread. THe zend version I'm using is:\r\n\r\nVersi\u00f3n: 1.11.11-0ubuntu1\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sieira",
                        "name": "sieira",
                        "displayName": "Luis Sieira Garc\u00eda",
                        "active": true
                    },
                    "created": "2012-05-31T10:10:20.000+0000",
                    "updated": "2012-05-31T10:10:20.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1482\/transitions"
}