{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4762",
    "key": "ZF-4762",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Date calculates unexpected results with some dates"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4762\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/2",
                "name": "Won't Fix"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2008-12-03T01:29:46.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akkie",
                "name": "akkie",
                "displayName": "Christian Kaps",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-10-31T08:20:49.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2008-12-04T08:44:27.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "With some dates, Zend_Date calculates unexpected results. Dates are 23.09.2008 20:00:00 or 14.10.2008 16:00:00\n\n{code}\nini_set('date.timezone', 'UTC');\n\n$date = new Zend_Date(mktime(20, 0, 0, 9, 23, 2008));\n$date->set(0, Zend_Date::MINUTE);\nvar_dump($date->get(Zend_Date::TIMESTAMP)); #string '1.2222E+9' (length=9)\n{code}\n\n{code}\nini_set('date.timezone', 'UTC');\n\n$date = new Zend_Date(mktime(16, 0, 0, 10, 14, 2008));\n$date->set(0, Zend_Date::MINUTE);\nvar_dump($date->get(Zend_Date::TIMESTAMP)); #string '1.224E+9' (length=8)\n{code}\n\nGreetings,\nChristian"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4762\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10252",
                    "id": 10252,
                    "description": "Minor Preview Release",
                    "name": "1.7 Preview Release",
                    "userReleaseDate": "13\/Oct\/08",
                    "archived": true,
                    "releaseDate": "2008-10-13",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10072",
                    "id": 10072,
                    "name": "Zend_Date",
                    "description": "Zend_Date is the basic library for the handling of all date, time and calendar-related issues.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/25556",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "I see no problem...\nRunning mktime on the given dates gives the same result as using Zend_Date.\n\n23.09.2008 20:00:00 is 1222200000 which is also returned by Zend_Date",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2008-10-31T15:10:48.000+0000",
                    "updated": "2008-10-31T15:10:48.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/25646",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akkie",
                        "name": "akkie",
                        "displayName": "Christian Kaps",
                        "active": true
                    },
                    "body": "Whit the same code?\n\nI can reproduce it on 2 machines. One running REHL4 and one running Gentoo 2.6.25-r7.\n\nGreetings,\nChristian",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akkie",
                        "name": "akkie",
                        "displayName": "Christian Kaps",
                        "active": true
                    },
                    "created": "2008-11-04T02:53:41.000+0000",
                    "updated": "2008-11-04T02:53:41.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/26910",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Your PHP or OS version converts given inputs to float when a cast to string is done.\n\nmktime outputs a integer.\nInternally the timestamp is stored as is.\n\nWhen you calculate something the only check is that, if the given number exceeds integer it switches to float calculation.\n\nWhen outputting a timestamp it is checked if it fits in integer (intval) and then the value is casted to an integer. So it seems that intval does not work as needed in your environment.\n\nYou could cast the value back to integer.\nThere is no way to handle such an situation within ZF.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2008-12-03T01:29:44.000+0000",
                    "updated": "2008-12-03T01:29:44.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/26952",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akkie",
                        "name": "akkie",
                        "displayName": "Christian Kaps",
                        "active": true
                    },
                    "body": "I think, I have found the problem. \n\nI doesn`t use the bcmath functions so Zend_Date use the class Zend_Locale_Math_PhpMath. This class uses PHP`s round function. \n\nThe round function returns values as float in different formats:\n{code}\necho round(1222200000, 0);  # 1.2222E+9\necho round(1900000000, 0);  # 1900000000\n{code}\n\nThis should be a normal behaviour. \n{quote}\nhttp:\/\/bugs.php.net\/bug.php?id=46297\n\nFloating point values have a limited precision. Hence a value might \nnot have the same string representation after any processing. That also\nincludes writing a floating point value in your script and directly \nprinting it without any mathematical operations.\n{quote}\n\nThe Zend_Locale_Math::normalize method which will be used in this construct, converts the float to a string. And it is impossible to convert the string 1.2222E+9 to the correct integer.\n\nGreetings,\nChristian",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akkie",
                        "name": "akkie",
                        "displayName": "Christian Kaps",
                        "active": true
                    },
                    "created": "2008-12-04T08:44:26.000+0000",
                    "updated": "2008-12-04T08:44:26.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4762\/transitions"
}