{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1175",
    "key": "ZF-1175",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Support adding parent(s) to existing Role"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/22",
                "name": "Community Driven Feature",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1175\/votes",
                "votes": 9,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=philippe.levan",
                "name": "philippe.levan",
                "displayName": "Philippe Le Van",
                "active": false
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2007-03-30T07:34:58.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-08-31T09:12:48.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "For performance reasons, I can't load all the acls when a user sign in my website.\r\nI load my access rights from my database when I need it and my Zend_Acl instance is filled according to these new informations. (note my Zend_Acl instance is saved in session).\r\n\r\nIf a new role is loaded, and my current user (which is a role) should be a child of this new role, I can't add a parent to my current user.\r\n\r\nIn this case, I need a new method in Zend_Acl like\r\n{code}\/**\r\n * @param  Zend_Acl_Role_Interface|string       $role\r\n * @param  Zend_Acl_Role_Interface|string|array $newParents\r\n * @return Zend_Acl Provides a fluent interface\r\n *\/\r\npublic function addParentToRole(Zend_Acl_Role_Interface $role, $newParents = null)\r\n{code}\r\n\r\nRegards,\r\nPhilippe"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/5",
                "name": "Trivial"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/customFieldOption\/10040",
                "value": " Nice to Have"
            }
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1175\/watchers",
                "isWatching": false,
                "watchCount": 9
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                "name": "ralph",
                "displayName": "Ralph Schindler",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10060",
                    "id": 10060,
                    "description": "Beta Release; bug fixes",
                    "name": "0.9.1",
                    "userReleaseDate": "23\/Mar\/07",
                    "archived": true,
                    "releaseDate": "2007-03-23",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10070",
                    "id": 10070,
                    "name": "Zend_Acl",
                    "description": "Access control list authorization component",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/13828",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=darby",
                        "name": "darby",
                        "displayName": "Darby Felton",
                        "active": true
                    },
                    "body": "Updated summary and example method signature, changed type to \"new feature\"",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=darby",
                        "name": "darby",
                        "displayName": "Darby Felton",
                        "active": true
                    },
                    "created": "2007-03-30T07:52:14.000+0000",
                    "updated": "2007-03-30T07:52:14.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/19873",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=octavian",
                        "name": "octavian",
                        "displayName": "Marc Jakubowski",
                        "active": true
                    },
                    "body": "More generally, it should be possible to add parent\/child references after roles were set. Otherwise it\u00b4s almost impossible to setup an ACL from DB when you have a \"roles\" table and a \"role_subrole\" table. The addRole() method would always throw \"role already exists\" when called more than once on a role or \"parent role doesn\u00b4t exist\" exceptions when the parent role hasn\u00b4nt been added yet. So the multiple inheritence can not be designed dynamically with the existing methods.\n\n{code:java}\n\/\/ Zend_Acl_Role_Registry:\n    public function inherit($child, $parent)\n    {\n        $child = $this->get($child);\n        $child_id = $child->getRoleId();\n\n        $parent = $this->get($parent);\n        $parent_id = $parent->getRoleId();\n\n        $this->_roles[$child_id]['parents'][$parent_id] = $parent;\n        $this->_roles[$parent_id]['children'][$child_id] = $child;\n\n        return $this;\n   }\n\n\/\/ Zend_Acl:\n    public function inheritRole($childRole, $parentRole)\n    {\n        $this->_getRoleRegistry()->inherit($childRole, $parentRole);\n\n        return $this;\n    }\n{code}\n\nRegards,\nMarc Jakubowski",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=octavian",
                        "name": "octavian",
                        "displayName": "Marc Jakubowski",
                        "active": true
                    },
                    "created": "2008-03-12T10:17:54.000+0000",
                    "updated": "2008-03-12T10:17:54.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/20171",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "Darby, can you evaluate and see if this makes sense for 1.6. Please also assign a release priority to it according to your judgement. If you want to keep it assigned to you, that's OK. If not, that's OK too. :)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2008-03-21T19:00:01.000+0000",
                    "updated": "2008-03-21T19:00:01.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/20403",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "Resetting 'fix version priority' and 'fix version' to be re-evaluated for next release.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2008-03-25T22:02:49.000+0000",
                    "updated": "2008-03-25T22:02:49.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/20596",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=octavian",
                        "name": "octavian",
                        "displayName": "Marc Jakubowski",
                        "active": true
                    },
                    "body": "If this issue should be accepted, the same issue could\/should be applied to Resources.\n\nImplementation notes:\n- Implementation for resources should be the same as for roles, except that resources only support single inheritance and should throw an exception when there is already a parent defined.\n- For both, an exception should also be thrown when the parent role\/resource already inherits from the child role\/resource to prevent circular inheritance, that isn't allowed for DAGs.\n\nRegards,\nMarc Jakubowski",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=octavian",
                        "name": "octavian",
                        "displayName": "Marc Jakubowski",
                        "active": true
                    },
                    "created": "2008-04-01T05:57:17.000+0000",
                    "updated": "2008-04-01T05:57:17.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28216",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "Assigning to Ralph as he is the new Zend_Acl component lead.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2009-01-14T14:48:42.000+0000",
                    "updated": "2009-01-14T14:48:42.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33495",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "Given the recent improvements in assertions: (http:\/\/ralphschindler.com\/2009\/08\/13\/dynamic-assertions-for-zend_acl-in-zf), can you re-think this and let me know if its still something you'd like to see?\n\nIf so, can you give me a script that would demonstrate the api you are talking about?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2009-08-16T18:35:30.000+0000",
                    "updated": "2009-08-16T18:35:30.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33509",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=octavian",
                        "name": "octavian",
                        "displayName": "Marc Jakubowski",
                        "active": true
                    },
                    "body": "Yes, the use case still exists and has effectively nothing to do with your assertion improvements.\nThe use case is pretty simple: Loading ACL from DB\n\n- given tables \"roles\" and \"role_subroles\"\n- load all roles and add them to acl (without parents)\n- load role subrole definitions and add those parent assignments by calling $acl->inheritRole($child, $parent);\n\nI implemented it when this ticket was created for my own ACL-DB-Factory and it works like a charm, so I'm curious why this was not resolved within the past 2 years.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=octavian",
                        "name": "octavian",
                        "displayName": "Marc Jakubowski",
                        "active": true
                    },
                    "created": "2009-08-17T01:43:10.000+0000",
                    "updated": "2009-08-17T01:43:10.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33523",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "Marked as trivial as a code snippet was attached.\nMarked as \"nice to have\" for this \"new feature\" for the next mini release.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2009-08-17T08:15:00.000+0000",
                    "updated": "2009-08-17T08:15:00.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34376",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "While this is a worthwhile feature, the ZF team will not develop this feature, but if a community member would like to pick up and develop it, they may make an assignment of it.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2009-09-10T08:50:48.000+0000",
                    "updated": "2009-09-10T08:50:48.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/39438",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Reassigned to component maintainer",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2010-03-21T10:31:20.000+0000",
                    "updated": "2010-03-21T10:31:20.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1175\/transitions"
}