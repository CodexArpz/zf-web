{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1512",
    "key": "ZF-1512",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "loadClass() fails when $dirs contains '.'"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1512\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10031",
                    "id": 10031,
                    "description": "Major Release",
                    "name": "1.0.0",
                    "userReleaseDate": "30\/Jun\/07",
                    "archived": true,
                    "releaseDate": "2007-06-30",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2007-06-28T19:04:49.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=belgattitude",
                "name": "belgattitude",
                "displayName": "S\u00e9bastien Vanvelthem",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2007-06-07T11:37:31.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2007-07-05T14:44:16.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Very minor bug, it can happen if zend framework is in the include path and when using (.) in the directories that loader will have to search.\n\nPlease ignore if you consider it as not important.\n\nExample :\n--------------\nPut framework in your include path\n\n{code}\n$zend_path   = '\/home\/seb\/lib';\nini_set('include_path', ini_get('include_path') . PATH_SEPARATOR . $zend_path);\n{code}\n\nJust add to the array of directories a . (point meaning current dir). \n\nZend framework is in {{\/home\/seb\/lib\/Zend}}\n\n{code}\n$dirs = array('.', '\/home\/seb\/lib');      <=== current directory : '.' at the beginning.\nZend_Loader::loadClass('Zend_Db', $dirs);\n{code}\n\n  ----->  warning : Zend_Loader::include_once('.\/Zend\/Db.php') : failed to open stream: No such file or directory...\n   ---->  Fails with  Exception(\"File DB.php was loaded but class \\\"$class\\\" was not found in the file\");\n\nbut? that  works :\n\n{code}\n$dirs = array('\/home\/seb\/lib', '.');         <=== current directory : '.' at the end.\nZend_Loader::loadClass('Zend_Db', $dirs);\n{code}\n\nReason the method {{Zend_Loader::loadClass()}} will try first to test the existence of the first possible file.  For this it relies on {{Zend_Loader::isReadable()}}\n\nLook at the code in loadFile method:\n\n{code}\nforeach ($dirs as $dir) {\n    $filespec = rtrim($dir, '\\\\\/') . DIRECTORY_SEPARATOR . $filename;\n    if (self::isReadable($filespec)) {\n        return self::_includeFile($filespec, $once);\n    }\n}\n\n{code}\n\nIn the first example, the first dir that will be tested is\n\n{code}\nself::isReadable('.\/Zend\/Db.php'); \n{code}\n\nDoes it exists? No, but the method isReadable will answer yes which is not expected.\n    \nLook at the code of {{Zend_Loader::isReadable('.\/Zend\/Db.php')}}\n\n{code}\n$path = get_include_path();\n$dirs = explode(PATH_SEPARATOR, $path);\n\nforeach ($dirs as $dir) {\n    if ('.' == $dir) {\n        continue;\n    }\n    if (is_readable($dir . DIRECTORY_SEPARATOR . $filename)) {\n        return true;\n    }\n}\n\n{code}\n\nBecause of Zend Framework is in include_path, the file will be added to ZF path like :\n     \n{code}\nis_readable( '\/home\/seb\/lib' . DIRECTORY_SEPARATOR . '.\/Zend\/Db.php') ---> Yes !!!\n{code}\n\nAnd the method {{isReadable('.\/Zend\/Db.php')}}  answers yes but {{include_once('.\/Zend\/Db.php') }}will fail !!!.\n    \n{code}\ninclude_once('.\/Zend\/Db.php');\n{code}\n\nWhen it tests \n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1512\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                "name": "bkarwin",
                "displayName": "Bill Karwin",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10023",
                    "id": 10023,
                    "description": "Release Candidate 1",
                    "name": "1.0.0 RC1",
                    "userReleaseDate": "28\/May\/07",
                    "archived": true,
                    "releaseDate": "2007-05-28",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10001",
                    "id": 10001,
                    "name": "Zend_Loader",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/15013",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "Reformat description.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2007-06-07T13:14:00.000+0000",
                    "updated": "2007-06-07T13:14:00.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/15577",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "Fixed in revision 5488.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2007-06-28T19:04:49.000+0000",
                    "updated": "2007-06-28T19:04:49.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1512\/transitions"
}