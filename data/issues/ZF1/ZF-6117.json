{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6117",
    "key": "ZF-6117",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Form_Element_Submit, htmltag decorator does not overwrite dtddwrapper like other Zend_Form_Element_*"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6117\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-03-24T09:41:31.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=radalin",
                "name": "radalin",
                "displayName": "roy simkes",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-03-24T09:27:40.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-03-24T09:58:33.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "decorators",
                "dtddwrapper",
                "zend_form_element_submit"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Hi,\n\nI'm currently having an issue with Zend_Form_Element_Submit class. The problem occurs during it's rendering. I'm not pretty sure if this is a bug or not.\n\nI'm setting a new instance like this:\n\n$loginButton = new Zend_Form_Element_Submit(\"loginButton\");\n$loginButton->setAttrib(\"class\", \"loginButton\")\n                    ->setValue(\"\")\n                    ->addDecorator(\"HtmlTag\", array('tag' => \"span\", \"id\" => \"foo\"))\n                    ->addDecorator(\"Label\", array('tag' => null))\n                    ->setLabel(null);\n\nOnce this element is rendered the given output is:\n\n<span id=\"foo\"><dt> <\/dt><dd>\n<input type=\"submit\" class=\"loginButton\" value=\"\" id=\"loginButton\" name=\"loginButton\"\/><\/dd><\/span>\n\nYou might think this is how it must be as you have not unset DtDdWrapper decorator, so the form element is wrapped with both your htmltag and the dtddwrapper decorators. The Incosistent part is, If I create a password field (or a text field) like this:\n\n$password = new Zend_Form_Element_Password(\"password\");\n$password->setAttrib(\"class\", 'txtField')\n                 ->setAttrib(\"size\", 10)\n                 ->addDecorator(\"Label\", array('tag' => null))\n                 ->addDecorator('HtmlTag', array('tag' => \"span\"))\n                 ->setLabel(null)\n                 ->setValue('password')\n                 ->setRequired(true);\n\nand the output was:\n\n<span>\n<input type=\"password\" name=\"password\" id=\"password\" value=\"\" class=\"txtField\" size=\"10\"><\/span>\n\n\ndtddwrapper decorator is not used and the input is only wrapped by htmltag. The htmltag decorator does overwrite the dtddwrapper. This case is not true for the submit element (or in the button element the same thing exists).\n\nSo I looked around the code and found out to clear all the decorators and set them a new without dtddwrapper, as it comes by default:\n\n$loginButton = new Zend_Form_Element_Submit(\"loginButton\");\n$loginButton->setAttrib(\"class\", \"loginButton\")\n                    ->setValue(\"\")\n                    ->setDecorators(array(array(\"decorator\" =>\"HtmlTag\", \"options\" => array('tag' => \"span\", \"id\" =>\"foo\")),\n                                          array(\"decorator\" =>\"Label\", \"options\" => array('tag' => \"span\", \"id\" => \"loginButton\")),\n                                          array(\"decorator\" => \"ViewHelper\")))\n                    ->setLabel(\"bar\");\n\nAnd the ouput was:\n\n<span><label class=\"optional\" for=\"loginButton\">bar<\/label><\/span>\n<span id=\"foo\"><\/span>\n<input type=\"submit\" class=\"loginButton\" value=\"bar\" id=\"loginButton\" name=\"loginButton\"\/>\n\nThe input element was not wrapped by the span element. The expected output should have been:\n\n<span id=\"foo\">\n<input type=\"submit\" name=\"loginButton\" id=\"loginButton\" value=\"\" class=\"loginButton\"><\/span>\n\n\nI guess that's a bug. Even if the dtddwrapper overwriting thing is not, The htmltag decorator does not wrap the actual input element, so that's a problem too I guess.\n\nThank you for your time.\n\nPS: If I did not set a ViewHelper decorator on the setDecorators() method the button is not rendered at all, but I guess that's what it should be and not a bug.\nPS2: There was no newline character at the end of the input element just like there was for span elements. Don't think that's a huge problem but I just wanted to mention it.\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6117\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10290",
                    "id": 10290,
                    "description": "Mini Release",
                    "name": "1.7.6",
                    "userReleaseDate": "02\/Mar\/09",
                    "archived": false,
                    "releaseDate": "2009-03-02",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10029",
                    "id": 10029,
                    "name": "Zend_Form",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29693",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "setDecorators() overwrites the existing decorators. addDecorators() appends to them. If you call setDecorators(), you need to provide all decorators you want\/need to render the final element. \n\nYou can also call removeDecorator() with a named decorator if there are specific ones you want to remove.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2009-03-24T09:39:15.000+0000",
                    "updated": "2009-03-24T09:39:15.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29694",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Regarding your setDecorators() call, the order of decorators is important. Decorators are rendered in order, as a FIFO stack; you want your innermost content first, and then you will gradually layer outwards. In your example, you have them in exactly the opposite order of what you're intending to occur.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2009-03-24T09:41:13.000+0000",
                    "updated": "2009-03-24T09:41:13.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29695",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=radalin",
                        "name": "radalin",
                        "displayName": "roy simkes",
                        "active": true
                    },
                    "body": "Hmm, Ok thatis solved. \n\nSorry for the inconveniance I should have check the default decorators for password\/text elements where I would have seen that dtddwrapper was not put on them as default unlike submit element.\n\nThanks",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=radalin",
                        "name": "radalin",
                        "displayName": "roy simkes",
                        "active": true
                    },
                    "created": "2009-03-24T09:58:33.000+0000",
                    "updated": "2009-03-24T09:58:33.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6117\/transitions"
}