{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3927",
    "key": "ZF-3927",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Read process: Enable the configuration of a \"max attachment size\""
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3927\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/2",
                "name": "Won't Fix"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-11-18T01:20:38.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=saeven",
                "name": "saeven",
                "displayName": "Alexandre Lemaire",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-08-11T12:21:28.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-11-19T08:28:35.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I've found on some customer machines, that email attachments read through Zend_Mail's mailbox reading features, that larger attachments quickly explode and bust the PHP max memory limit (php.ini) at Zend_Mime without any catchable error.  PHP simply \"dies\" with its \"memory busted\" error.\r\n\r\nIt would be handy, if we could specify an attachment size ceiling to prevent this type of behavior."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3927\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=satoruyoshida",
                "name": "satoruyoshida",
                "displayName": "Satoru Yoshida",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10074",
                    "id": 10074,
                    "name": "Zend_Mail_Storage",
                    "description": "Facilitates reading mail from any of several common mail storage formats.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36083",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=satoruyoshida",
                        "name": "satoruyoshida",
                        "displayName": "Satoru Yoshida",
                        "active": true
                    },
                    "body": "Hi, Alexandre.\r\n\r\nIt is necessary to be able change value of the *upload_max_filesize* and the *post_max_size* to satisfy your demand.\r\n\r\nHowever, We can not change the values on PHP script because they are defined as *PHP_INI_PERDIR*.\r\n\r\nBut, you could use some HTML tags instead, I think;\r\n\r\n{code}\r\n<input type=\"hidden\" name=\"MAX_FILE_SIZE\" value=\"1000000\">\r\n<input type=\"file\">\r\n{code}\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=satoruyoshida",
                        "name": "satoruyoshida",
                        "displayName": "Satoru Yoshida",
                        "active": true
                    },
                    "created": "2009-11-18T01:20:40.000+0000",
                    "updated": "2009-11-18T01:20:40.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36099",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=saeven",
                        "name": "saeven",
                        "displayName": "Alexandre Lemaire",
                        "active": true
                    },
                    "body": "I believe that the feedback may have been misunderstood.\r\n\r\nThis is to do with pre-detection of email object attachment size based on the information made available by Zend_Mail and downloaded mail headers, and has nothing to do with forms, their encoding, or limitations imposed by PHP's max allowable upload filesize.\r\n\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=saeven",
                        "name": "saeven",
                        "displayName": "Alexandre Lemaire",
                        "active": true
                    },
                    "created": "2009-11-18T06:25:27.000+0000",
                    "updated": "2009-11-18T06:25:27.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36122",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=satoruyoshida",
                        "name": "satoruyoshida",
                        "displayName": "Satoru Yoshida",
                        "active": true
                    },
                    "body": "Oh, I am sorry that I misunderstood it, Alexandre.\r\n\r\nYou might mean files that already exist on Web server when Zend_Mail runs.\r\nIs it right?\r\n\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=satoruyoshida",
                        "name": "satoruyoshida",
                        "displayName": "Satoru Yoshida",
                        "active": true
                    },
                    "created": "2009-11-18T14:27:34.000+0000",
                    "updated": "2009-11-18T14:27:34.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36163",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mkliewe",
                        "name": "mkliewe",
                        "displayName": "Michael Kliewe",
                        "active": true
                    },
                    "body": "I think the idea is to \"protect\" the script against such big mails.\r\n\r\nLets say we have a script that is reading mails and parsing them. The script works fine.\r\nThen a person sends a mail to the mailbox that has a size of 100MB. Zend_Mail cannot detect this and tries to read that mail into memory for parsing mime parts and so on. But if memory usage of php is limited to 64MB, the script dies unexpectedly.\r\n\r\nSo the idea is to check the memory limit, and if Zend_Mail sees a Mail that is 100MB in size (by Content-Length header or via IMAP RFC822.SIZE), Zend_Mail should not receive this mail (because php memory limit would be reached and php would exit).\r\n\r\nAlexandre would like to have a function or setting for that, e.g. \r\n$mail->setParseMaxMessageSize(50000000);\r\nZend_Mail_Storage_Imap::ParseMaxMessageSize = 50000000\r\nso mails > 50MB should not be parsed.\r\n\r\nI don't know if this is possible, but it would be very nice.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mkliewe",
                        "name": "mkliewe",
                        "displayName": "Michael Kliewe",
                        "active": true
                    },
                    "created": "2009-11-19T08:04:29.000+0000",
                    "updated": "2009-11-19T08:04:29.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36164",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=nico",
                        "name": "nico",
                        "displayName": "Nico Edtinger",
                        "active": true
                    },
                    "body": "So do you mean Zend_Mail or Zend_Mail_Storage? In Zend_Mail your script controls, what's added as attachment ant it's easy to check before you do so. Thus I've changed the component of this issue.\r\n\r\nIf you have a Content-Length header you don't need anything new. Zend_Mail_Storage only fetches the headers and doesn't load the content or any part until you fetch them.\r\n\r\nA different problem is reading a chunk that can't be parsed, because of memory limitations (as in splitting the message in its parts). Maildir and Mbox shouldn't have a problem as they both use Zend_Mail_[Message|Part]_File. In POP3 and IMAP we'd need to stop loading at a defined limit, which makes the storage class not usable anymore (it'd be stuck in the reading state).\r\n\r\nThe best thing to do is use more of the IMAP features, but keeping compatibility to the other storage classes in mind.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=nico",
                        "name": "nico",
                        "displayName": "Nico Edtinger",
                        "active": true
                    },
                    "created": "2009-11-19T08:28:35.000+0000",
                    "updated": "2009-11-19T08:28:35.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3927\/transitions"
}