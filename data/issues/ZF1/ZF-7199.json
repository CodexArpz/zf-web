{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7199",
    "key": "ZF-7199",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Objects are never removed from S3"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/5",
                "name": "Sub-task",
                "subtask": true
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7199\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/5",
                "name": "Cannot Reproduce"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-07-15T17:11:53.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=pinopinelli",
                "name": "pinopinelli",
                "displayName": "Peter Ritter",
                "active": true
            }
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "AWS",
                "Amazon",
                "S3",
                "Zend_Service"
            ]
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-07-06T01:56:41.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-07-15T17:11:50.000+0000"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I am not sure if this is really a sub-task. But when I try to DELETE objects from one of my buckets (that are all located in the EU), then I get a positive response-message from S3. But the objects are still there.\nI guess the problem is that the function first tries to DELETE the object from my bucket (assuming that it is located in the US). But Amazon's API even returns a positive response when you try to delete an object that does not even exist (in this location). \nAnd that is why the DELETE does never reach the correct location (in EU). \nI did not test other operations, yet. But wouldn't it be better to give the location to Zend_Service_Amazon_S3 as a parameter?"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7199\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=stas",
                "name": "stas",
                "displayName": "Stanislav Malyshev",
                "active": false
            }
        },
        "parent": {
            "name": "parent",
            "type": "issuelinks",
            "value": {
                "issueKey": "ZF-6477",
                "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6477",
                "type": {
                    "name": "Parent",
                    "direction": "INBOUND"
                }
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10340",
                    "id": 10340,
                    "description": "Mini Release",
                    "name": "1.8.4",
                    "userReleaseDate": "23\/Jun\/09",
                    "archived": false,
                    "releaseDate": "2009-06-23",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10022",
                    "id": 10022,
                    "name": "Zend_Service_Amazon",
                    "description": "utility functions for using Amazon web services",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32412",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Assigning to Stas.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2009-07-06T05:31:45.000+0000",
                    "updated": "2009-07-06T05:31:45.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32420",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=stas",
                        "name": "stas",
                        "displayName": "Stanislav Malyshev",
                        "active": false
                    },
                    "body": "You can specify the location when creating the bucket. But Amazon API doesn't have any means to specify location on deletion. \nCould you provide the exact sequence of actions (since the bucket creation) that you performed to lead to this problem?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=stas",
                        "name": "stas",
                        "displayName": "Stanislav Malyshev",
                        "active": false
                    },
                    "created": "2009-07-06T10:00:33.000+0000",
                    "updated": "2009-07-06T10:00:33.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32431",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=pinopinelli",
                        "name": "pinopinelli",
                        "displayName": "Peter Ritter",
                        "active": true
                    },
                    "body": "Well, first I created the bucket using the Firefox extension S3Fox.\nThen I have an upload-method in my code, that looks like this:\n\n{code:php}\n\n if(is_file($media_file) && is_readable($media_file)){\n$s3 = new Zend_Service_Amazon_S3(AWS_KEY, AWS_SEC_KEY);\n\t        $sucess = $s3->putFile($media_file, 'ictv\/'.$this->getClientid().'\/media\/'.$this->getMediatype().'\/'.$this->getPath(), \n\t\t\t\t\t\t    array(Zend_Service_Amazon_S3::S3_ACL_HEADER =>\n\t\t\t\t\t\t          Zend_Service_Amazon_S3::S3_ACL_PUBLIC_READ));\n\t\t\t$logger->info(Zend_Debug::dump($sucess, 'ret', false));\n\t\t\t\/\/jetzt das urspr\u00fcngliche medium im temp-ordner l\u00f6schen:\n\t\t\t@unlink($media_file);\n\t\t\t\n\t    } \n\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=pinopinelli",
                        "name": "pinopinelli",
                        "displayName": "Peter Ritter",
                        "active": true
                    },
                    "created": "2009-07-07T00:34:16.000+0000",
                    "updated": "2009-07-07T00:34:16.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32432",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=pinopinelli",
                        "name": "pinopinelli",
                        "displayName": "Peter Ritter",
                        "active": true
                    },
                    "body": "(Sorry for the double-post...)\n\nWell, first I created the bucket using the Firefox extension S3Fox.\nThen I have an upload-method in my code, that looks like this:\n\n{code}\n$media_file = 'path\/to\/my\/file';\nif(is_file($media_file) && is_readable($media_file)){\n$s3 = new Zend_Service_Amazon_S3(AWS_KEY, AWS_SEC_KEY);\n      $sucess = $s3->putFile($media_file, $bucket_name.'\/media\/'.$media_file_name, \n\tarray(Zend_Service_Amazon_S3::S3_ACL_HEADER => Zend_Service_Amazon_S3::S3_ACL_PUBLIC_READ));\n\t@unlink($media_file);\t\t\t\n}\n{code}\n\nAfter that my file is at the right place in my bucket and it is public readable and I can use it.\nBut when I want to delete it, I do the following in my deleting-method:\n\n{code}\n$s3_media_file = $bucket_name.'\/media\/'.$media_file_name;\n$s3 = new Zend_Service_Amazon_S3(AWS_KEY, AWS_SEC_KEY);\n$response = $s3->removeObject($s3_media_file);\n{code}\n\nThen I get the right response from S3 but my object is still there...\n\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=pinopinelli",
                        "name": "pinopinelli",
                        "displayName": "Peter Ritter",
                        "active": true
                    },
                    "created": "2009-07-07T00:45:15.000+0000",
                    "updated": "2009-07-07T00:45:15.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32435",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=stas",
                        "name": "stas",
                        "displayName": "Stanislav Malyshev",
                        "active": false
                    },
                    "body": "Does it happen with any objects at all or just specific ones (i.e. if you just create $bucket_name.\"\/test\" is it deleted)?  Does it happen for you only with EU-based buckets?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=stas",
                        "name": "stas",
                        "displayName": "Stanislav Malyshev",
                        "active": false
                    },
                    "created": "2009-07-07T00:59:29.000+0000",
                    "updated": "2009-07-07T00:59:29.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32468",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=pinopinelli",
                        "name": "pinopinelli",
                        "displayName": "Peter Ritter",
                        "active": true
                    },
                    "body": "I am now a little bit confused....\nMy buckets were not available for about one hour or more yesterday and now it all works fine. \nCan it be, that this could have been an amazon-error or something? \nDoes anybody else have a similar problem?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=pinopinelli",
                        "name": "pinopinelli",
                        "displayName": "Peter Ritter",
                        "active": true
                    },
                    "created": "2009-07-08T02:26:20.000+0000",
                    "updated": "2009-07-08T02:26:20.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7199\/transitions"
}