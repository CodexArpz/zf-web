{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9124",
    "key": "ZF-9124",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "JQuery auto-enables if ZendX_Application_Resource_Jquery is used"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9124\/votes",
                "votes": 3,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10480",
                    "id": 10480,
                    "description": "Mini Release",
                    "name": "1.10.7",
                    "userReleaseDate": "28\/Jul\/10",
                    "archived": false,
                    "releaseDate": "2010-07-28",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2010-07-16T05:14:25.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ixti",
                "name": "ixti",
                "displayName": "Aleksey V. Zapparov",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-02-09T07:56:18.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-07-16T05:14:26.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "When you add JQuery support via resources, e.g. in config.ini:\r\n{code}\r\nresources.jquery.stylesheet = \"\/styles\/blitzer\/jquery-ui.css\"\r\n{code}\r\n\r\nIt becomes always enabled. The problem is located inside\r\nZendX_Application_Resource_Jquery::_parseOptions() method.\r\nOptions are pared inside foreach loop:\r\n\r\n{code}\r\n109         foreach ($options as $key => $value) {\r\n...         ...\r\n156         }\r\n{code}\r\n\r\nBut somebody put code for uienable parameter outside that loop:\r\n\r\n{code}\r\n158         if ((isset($key['uienable']) && (bool) $key['uienable'])\r\n159             || (isset($key['ui_enable']) && (bool) $key['ui_enable'])\r\n160             || (!isset($key['ui_enable']) && !isset($key['uienable'])))\r\n161         {\r\n162             $this->_view->JQuery()->uiEnable();\r\n163         } else {\r\n164             $this->_view->JQuery()->uiDisable();\r\n165         }\r\n{code}\r\n\r\nThere are two ways of solving this:\r\nFirst is to put code back into foreach loop, so the case will look like:\r\n\r\n{code}\r\ncase 'uienable':\r\ncase 'ui_enable':\r\n    if ((bool) $value) {\r\n        $this->_view->JQuery()->uiEnable();\r\n    } else {\r\n        $this->_view->JQuery()->uiDisable();\r\n    }\r\n    break;\r\n{code}\r\n\r\nI also propose to include new option:\r\n\r\n{code}\r\ncase 'enable':\r\n    if ((bool) $value) {\r\n        $this->_view->JQuery()->enable();\r\n    } else {\r\n        $this->_view->JQuery()->disable();\r\n    }\r\n    break;\r\n{code}\r\n\r\n\r\nBut to keep less lines of code and to keep somebody's idea\r\nto move logic of `uienable` option parsing out from that loop,\r\nI have prepared a patch which I will attach to this report.\r\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9124\/watchers",
                "isWatching": false,
                "watchCount": 5
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                "name": "freak",
                "displayName": "Dolf Schimmel (Freeaqingme)",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-9980",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9980",
                    "type": {
                        "name": "Duplicate",
                        "direction": "OUTBOUND",
                        "description": "duplicates"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/12729",
                    "filename": "Jquery.php.diff",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ixti",
                        "name": "ixti",
                        "displayName": "Aleksey V. Zapparov",
                        "active": true
                    },
                    "created": "2010-02-09T07:58:15.000+0000",
                    "size": 1067,
                    "mimeType": "text\/x-diff",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/12729\/Jquery.php.diff"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10360",
                    "id": 10360,
                    "description": "Minor Release",
                    "name": "1.10.0",
                    "userReleaseDate": "27\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-27",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10460",
                    "id": 10460,
                    "name": "Zend_Application_Resource",
                    "description": "Plugin resources for Zend_Application",
                    "isAssigneeTypeValid": false
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10360",
                    "id": 10360,
                    "name": "ZendX_JQuery",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38376",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ixti",
                        "name": "ixti",
                        "displayName": "Aleksey V. Zapparov",
                        "active": true
                    },
                    "body": "My proposed patch",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ixti",
                        "name": "ixti",
                        "displayName": "Aleksey V. Zapparov",
                        "active": true
                    },
                    "created": "2010-02-09T07:58:18.000+0000",
                    "updated": "2010-02-09T07:58:18.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38411",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=localheinz",
                        "name": "localheinz",
                        "displayName": "Andreas M\u00f6ller",
                        "active": true
                    },
                    "body": "I believe this is just an error, as in ZendX_Application_Resource_Jquery it says\r\n\r\n{noformat} \r\n\r\n\/**\r\n *   resources.Jquery.uienable = true;\r\n *   resources.Jquery.ui_enable = true;\r\n *\/\r\n\r\n{noformat} \r\n\r\nShould be fixed, though,because there's no way to disable JQuery UI unless you put the \"uienable\" option last in the specified options, and even then, it will only work when you have specified a \"cdn_ssl\" option, as otherwise, the \"cdn_ssl\" option is appended to the specified options and will be the last value in the iteration.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=localheinz",
                        "name": "localheinz",
                        "displayName": "Andreas M\u00f6ller",
                        "active": true
                    },
                    "created": "2010-02-11T10:50:47.000+0000",
                    "updated": "2010-02-11T10:50:47.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38442",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ixti",
                        "name": "ixti",
                        "displayName": "Aleksey V. Zapparov",
                        "active": true
                    },
                    "body": "Yes, it's an error. And that was what I said.\r\nBug == error. Or what did you tried to say?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ixti",
                        "name": "ixti",
                        "displayName": "Aleksey V. Zapparov",
                        "active": true
                    },
                    "created": "2010-02-13T11:32:32.000+0000",
                    "updated": "2010-02-13T11:32:32.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38443",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "body": "Benjamin, I think this is an issue with zendx_jquery, cause imho it shouldn't enable the ui part unless uiEnable() got called. If you disagree, please elaborate and reassign to me.\r\n\r\n{quote}But to keep less lines of code and to keep somebody's idea to move logic of `uienable` option parsing out from that loop,{quote}\r\n\r\nThat 'somebody' would be me. So if you have any questions about that, feel free to ask.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "created": "2010-02-13T11:41:08.000+0000",
                    "updated": "2010-02-13T11:41:08.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38449",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ixti",
                        "name": "ixti",
                        "displayName": "Aleksey V. Zapparov",
                        "active": true
                    },
                    "body": "Hello,\r\n\r\nI don't have any questions.\r\n\r\nI found a bug, fixed it (at least in my project) and shared patch with you. If you'll look into the code (at least at the part that I showed) you'll see that this code is totally unpredictable. Using variables from the loop outside it - is not good idea at all.\r\n\r\nThis is not an issue with ZendX_JQuery, it's an issue with ZendX_Application_Resource_Jquery. ZendX_Jquery doesn't enabled by default, but it get's if you'll use ZendX_Application_Resource_Jquery, as the last auto-enables jQuery UI because of small bug (or one may call it a \"feature\"). And enabling of jQuery UI in it's turn enables jQuery.\r\n\r\nSo, NO! This is not an issue with ZendX_JQuery.\r\n\r\n\r\nPS In fact, you can resolve this issue with \"not a bug\" and pretend that it should be as it is. All I wanted is to point out the bug someone can mess with (as I did) and share a solution. Will you fix it or not - I don't care. :))\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ixti",
                        "name": "ixti",
                        "displayName": "Aleksey V. Zapparov",
                        "active": true
                    },
                    "created": "2010-02-14T04:52:47.000+0000",
                    "updated": "2010-02-14T04:52:47.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/41362",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tigerman",
                        "name": "tigerman",
                        "displayName": "Igor Bekrenyov",
                        "active": false
                    },
                    "body": "Version 1.10.6\r\nStill the same problem. :(\r\nApply the patch.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tigerman",
                        "name": "tigerman",
                        "displayName": "Igor Bekrenyov",
                        "active": false
                    },
                    "created": "2010-07-06T21:45:14.000+0000",
                    "updated": "2010-07-06T21:45:14.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/41513",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cgraefe",
                        "name": "cgraefe",
                        "displayName": "Christian Gr\u00e4fe",
                        "active": true
                    },
                    "body": "This is definitely an issue with ZendX_Application_Resource_Jquery. Without even considering any jQuery plugin semantics: $key['uienable'] is currently used in a scope that $key is not even defined in. At least it wouldn't be if we were using a \"real\" programming language. ;-)\r\n\r\nSo please, fix this issue in the next release.\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cgraefe",
                        "name": "cgraefe",
                        "displayName": "Christian Gr\u00e4fe",
                        "active": true
                    },
                    "created": "2010-07-16T02:57:17.000+0000",
                    "updated": "2010-07-16T02:57:17.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/41515",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "body": "This issue was fixed with ZF-9980, committed with r22499 and merged with the release branch in r22500. Unfortunately 1.10.6 was packaged around r 22482, so it just missed it. You can either use trunk, apply the patch yourself, or wait for August. Usually in the first week of each month a new mini release is released.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "created": "2010-07-16T05:12:44.000+0000",
                    "updated": "2010-07-16T05:12:44.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9124\/transitions"
}