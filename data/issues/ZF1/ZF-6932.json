{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6932",
    "key": "ZF-6932",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend Loader trying to instantiate wrong class"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6932\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2011-02-18T07:52:22.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akzincdig",
                "name": "akzincdig",
                "displayName": "Ashley Kitson",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-06-05T05:32:17.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-02-18T07:52:22.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Since upgrading from ZF 1.7.5 -> 1.8.2 and implementing the new Zend_Loader I'm getting strange compile errors\ne.g. Compile Error: \/usr\/local\/ZWare\/lib\/Zend\/Log.php line 223 - Cannot redeclare class ZWare_Service_Log\n\nI see these through Zend Studio debugger.\n\nThis is happening with a lot of my classes that have similar names to existing Zend classes.  The failure line is always the last line in the file.\n\nIt seems that Zend_Loader is confusing names.\n\nMy loader initialisation lines in bootstrap are:\nrequire_once 'Zend\/Loader\/Autoloader.php';\n$autoloader = Zend_Loader_Autoloader::getInstance();\n$autoloader->setFallbackAutoloader(true);\n\nwhere previously (in 1.7.5) I used to simply have\nrequire_once 'Zend\/Loader.php';\nZend_Loader::registerAutoload();\n\nThis is really messing up my ability to debug code as I rarely get to the target page before one of these errors gets thrown.  I don't really want to have to go writing my own autoloaders 'cus the old style one worked just fine. \n\nCan you suggest some testing I can do to try and narrow down the problem?\n\nBTW, If I run the app without going through the debugger, all appears fine (assuming of course I have no other issues stopping execution.)\n\n\nTIA\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/2",
                "name": "Critical"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6932\/watchers",
                "isWatching": false,
                "watchCount": 3
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                "name": "ralph",
                "displayName": "Ralph Schindler",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10330",
                    "id": 10330,
                    "description": "Mini Release",
                    "name": "1.8.2",
                    "userReleaseDate": "27\/May\/09",
                    "archived": false,
                    "releaseDate": "2009-05-27",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10001",
                    "id": 10001,
                    "name": "Zend_Loader",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31617",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "The error you're getting, \"Cannot redeclare class ZWare_Service_Log\", is indicative of one of two issues.  First, as the error suggest, PHP may be trying to include the same class file twice. This causes PHP to error as it's attempting to redefine an existing class. This could be happening if you have a call to \"include 'ZWare\/Service\/Log.php';\" That said, Zend_Loader::loadClass() (which is still used internally in Zend_Loader_Autoloader) does a class_exists() check prior to calling include() -- which could mean there's a circular dependency happening in the included class file.\n\nThe second possibility is that you're using an opcode cache, and the realpath cache is stale. This would also result in the same error. The easy way to test this theory is to flush your opcode cache or disable it to see if the issue goes away.\n\nFinally, instead of using setFallbackAutoloader(), register your namespace with\nit instead:\n{code}\n$autoloader->registerNamespace('Zware_');\n{code}\nThis is the more appropriate and intended way of using the autoloader, as it will then ignore namespaces it does not know about.\n\n(BTW, as of 1.8.2, Zend_Loader::registerAutoload() now uses Zend_Loader_Autoloader and sets it as a fallback autoloader -- but also emits a deprecation warning.)\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2009-06-05T05:55:11.000+0000",
                    "updated": "2009-06-05T05:55:11.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31622",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akzincdig",
                        "name": "akzincdig",
                        "displayName": "Ashley Kitson",
                        "active": true
                    },
                    "body": "Matthew - thanks.\n\nre: trying to include same class file twice.  I thought that, but it is the underlying Zend Framework code that is throwing the error - it knows nothing about my stuff above it. I don't use 'include\/require' statements anywhere in my code apart from the one line that includes the loader in the bootstrap.\n\nre: circular references.  Nope, ZWare_Service_Log extends a simpleton factory class.  It does instantiate Zend_Log and stores it to do the actual work.  Zend_Log of course knows nothing about ZWare_Service_Log\n\nre: opcode cache.  Not knowingly using one of them unless Zend Core implements one that I don't know about.\n\nre: using $autoloader->registerNamespace('Zware_');  Tried that as suggested.  Now I get errors along lines of Class 'ZWare_...' not found (doesn't even get out of the bootstrap.)  I guess 'cus the autoloader now doesn't know what to do with it.\n\nre: Zend_Loader::registerAutoload(). It was the deprecation notices that prompted me to use the new form.  Going back to use Zend_Loader::registerAutoload() form is not a starter 'cus as you say, it is really a wrapper for the new functionality (and yes, I get the original error as reported if I do.)\n\nThanks for suggestions, I'll take another look.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akzincdig",
                        "name": "akzincdig",
                        "displayName": "Ashley Kitson",
                        "active": true
                    },
                    "created": "2009-06-05T07:52:10.000+0000",
                    "updated": "2009-06-05T07:52:10.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35841",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vipsoft",
                        "name": "vipsoft",
                        "displayName": "Anthon Pang, VIP Software Technologies Inc.",
                        "active": true
                    },
                    "body": "APC and eAccelerator would be examples of opcode caches.\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vipsoft",
                        "name": "vipsoft",
                        "displayName": "Anthon Pang, VIP Software Technologies Inc.",
                        "active": true
                    },
                    "created": "2009-11-07T10:24:53.000+0000",
                    "updated": "2009-11-07T10:24:53.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44479",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "If this is still an issue, please reopen with new information and\/or reproduction case.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2011-02-18T07:52:22.000+0000",
                    "updated": "2011-02-18T07:52:22.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6932\/transitions"
}