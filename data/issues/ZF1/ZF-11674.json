{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11674",
    "key": "ZF-11674",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "InArray validator saying \"not found in haystack\" even though it is"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11674\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2011-08-16T19:21:19.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=misbehavens",
                "name": "misbehavens",
                "displayName": "Andrew Havens",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2011-08-16T19:06:11.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-08-16T20:01:36.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I have a form with a select element:\r\n\r\n{code:php}\r\n<?php\r\n\r\nclass Form_MyForm extends Zend_Form\r\n{\r\n    public function init()\r\n    {\r\n        $arrayOfOptions = array(1 => 'One');\r\n        $this->addElement('select', 'myselect', array('multiOptions' => $arrayOfOptions));\r\n\r\n        \/\/ Later on, I add an option that should be part of the select options:\r\n        if ($optionShouldBeAdded) {\r\n            $this->myselect->addMultiOption(2, 'Two');\r\n        }\r\n    }\r\n}\r\n{code}\r\n\r\nIn my controller, I have code like this:\r\n\r\n{code:php}\r\n$form = new Form_MyForm();\r\n\r\nif (!$this->_request->isPost()) {\r\n    $this->view->form = $form;\r\n    return;\r\n}\r\nif (!$form->isValid($_POST)) {\r\n    \/\/display errors\r\n    $this->view->form = $form;\r\n    return;\r\n}\r\n\/\/form is now valid, save the data\r\n{code}\r\n\r\nWhen I submit my form with the added option, I get the validation error: '2' was not found in the haystack, even though it is a valid option.\r\n\r\nAlso, I tried removing the InArray validator (which I should not be doing since my option should not be invalid):\r\n\r\n{code:php}\r\n<?php\r\n\r\nclass Form_MyForm extends Zend_Form\r\n{\r\n    public function init()\r\n    {\r\n        \/\/...\r\n\r\n        $this->myselect->setRegisterInArrayValidator(false);\r\n    }\r\n}\r\n{code}\r\n\r\n...but this did not work. Only passing it as an option upon element creation was I able to remove the InArray validator:\r\n\r\n{code:php}\r\n$this->addElement('select', 'myselect', array('registerInArrayValidator' => false, 'multiOptions' => $arrayOfOptions));\r\n{code}\r\n\r\nSo this seems like a bug also."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11674\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                "name": "bittarman",
                "displayName": "Ryan Mauger",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [

            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/47975",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                        "name": "bittarman",
                        "displayName": "Ryan Mauger",
                        "active": true
                    },
                    "body": "This appears to be a non-issue.\n\nIt looks like you are adding the MultiOption after the isValid call, which would mean that the value is not present when the InArray validator is run.\n\nI'm going to close this because as it stands, it appears to be purely a support request, for support please use the fw-general mailing list, of #zftalk on freenode irc.\n\nIf you can supply a reproduce case which can prove this is not the case, then please re-open.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                        "name": "bittarman",
                        "displayName": "Ryan Mauger",
                        "active": true
                    },
                    "created": "2011-08-16T19:21:19.000+0000",
                    "updated": "2011-08-16T19:21:19.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/47976",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=misbehavens",
                        "name": "misbehavens",
                        "displayName": "Andrew Havens",
                        "active": true
                    },
                    "body": "You are incorrect in your assumption that I am adding the multiOption after the isValid call. I updated my code sample to explain more fully the actual scenario.\r\n\r\nPlease re-open this ticket, since it is an actual bug, not a support request. =]",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=misbehavens",
                        "name": "misbehavens",
                        "displayName": "Andrew Havens",
                        "active": true
                    },
                    "created": "2011-08-16T19:55:10.000+0000",
                    "updated": "2011-08-16T19:55:10.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/47977",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                        "name": "bittarman",
                        "displayName": "Ryan Mauger",
                        "active": true
                    },
                    "body": "Given the information you supplied, it was a perfectly reasonable assumption, and a very common mistake.\r\n\r\nand please, make further updates in comments, rather than updating the description. it makes it very hard for anyone to follow whats changing.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bittarman",
                        "name": "bittarman",
                        "displayName": "Ryan Mauger",
                        "active": true
                    },
                    "created": "2011-08-16T19:56:48.000+0000",
                    "updated": "2011-08-16T19:56:48.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/47978",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=misbehavens",
                        "name": "misbehavens",
                        "displayName": "Andrew Havens",
                        "active": true
                    },
                    "body": "Bah! Nevermind. I figured out my problem. There was a bug in my code. I was instantiating the parent form, not the subclassed form which contained the addMultiOption code. Sorry to bother you!!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=misbehavens",
                        "name": "misbehavens",
                        "displayName": "Andrew Havens",
                        "active": true
                    },
                    "created": "2011-08-16T20:01:36.000+0000",
                    "updated": "2011-08-16T20:01:36.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11674\/transitions"
}