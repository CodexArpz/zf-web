{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3868",
    "key": "ZF-3868",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Form validation does not work properly for selects with optgroups"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3868\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/2",
                "name": "Won't Fix"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10240",
                    "id": 10240,
                    "description": "Minor Release",
                    "name": "1.6.0",
                    "userReleaseDate": "02\/Sep\/08",
                    "archived": false,
                    "releaseDate": "2008-09-02",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2008-08-06T07:51:06.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vladev",
                "name": "vladev",
                "displayName": "Emil Ivanov",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-08-06T04:49:00.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2008-09-02T10:39:15.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Since the addition of the InArray validator for select elements in Zend_Form forms do not validate when using selects with optgroups.\nTesting against current trunk.\n\nThe couple of tests pass before r10646, but the first one fails with the latest trunk.\n{code}\n<?php\n    class Carutoo_Form_InArrayTest extends PHPUnit_Framework_TestCase\n    {\n        public function testSelectWithOptionGroupDoesNotValidateCorrectly()\n        {\n            $data = array (\n                'Ford' => array (\n                    '1' => 'Focus',\n                    '2' => 'Mondeo'\n                ),\n                'Mazda' => array (\n                    '3' => '3',\n                    '4' => '6'\n                )\n            );\n\n            $form = new Zend_Form();\n            $form->addElement('select', 'brand', array (\n                'label' => 'Brand',\n                'multiOptions' => $data,\n                'required' => true\n            ));\n\n            $this->assertTrue($form->isValid(array ('brand' => 3)));\n        }\n\n        public function testSelectWithoutOptionGroupValidatesCorrectly()\n        {\n            $data = array (\n                '1' => 'Ford Focus',\n                '2' => 'Ford Mondeo',\n                '3' => 'Mazda 3',\n                '4' => 'Mazda 6'\n            );\n\n            $form = new Zend_Form();\n            $form->addElement('select', 'brand', array (\n                'label' => 'Brand',\n                'multiOptions' => $data,\n                'required' => true\n            ));\n\n            $this->assertTrue($form->isValid(array ('brand' => 3)));\n        }\n    }\n{code}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/customFieldOption\/10040",
                "value": " Nice to Have"
            }
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3868\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10029",
                    "id": 10029,
                    "name": "Zend_Form",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/23339",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Just a note: you can disable the auto-registration of the InArray validator:\n{code}\n$element->setRegisterInArrayValidator(false);\n\n\/\/ or, at creation time:\n$form->addElement('select', 'brand', array(\n    'label'                    => 'Brand',\n    'multiOptions'             => $data,\n    'required'                 => true,\n    'registerInArrayValidator' => false,\n));\n{code}\n\nHow were you registering validators previously?\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-08-06T06:31:32.000+0000",
                    "updated": "2008-08-06T06:31:32.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/23340",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Degrading to minor and scheduling as nice-to-have fix for 1.6.0... assuming I can get the original use case.\n\nIn the meantime, disabling the validator is possible and provides a BC solution for select elements.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-08-06T06:33:01.000+0000",
                    "updated": "2008-08-06T06:33:01.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/23341",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vladev",
                        "name": "vladev",
                        "displayName": "Emil Ivanov",
                        "active": true
                    },
                    "body": "> How were you registering validators previously?\n\nThe normal way!?! The test cases are extracts from a real application. \n\nI think the problem is with the retrieval of possible values.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vladev",
                        "name": "vladev",
                        "displayName": "Emil Ivanov",
                        "active": true
                    },
                    "created": "2008-08-06T06:41:51.000+0000",
                    "updated": "2008-08-06T06:41:51.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/23343",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "What I mean is, before current trunk, we did not auto register the InArray validator. So, if you weren't registering any validators previously, then the solution is to simply disable registration of the InArray validator; otherwise, I need to know what validator you _were_ using, and how you were instantiating and\/or registering it.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-08-06T07:02:53.000+0000",
                    "updated": "2008-08-06T07:02:53.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/23345",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vladev",
                        "name": "vladev",
                        "displayName": "Emil Ivanov",
                        "active": true
                    },
                    "body": "Thanks Matthew,\n\ndisabling the InArray validator did the trick.\n\nI still, however, consider this a low priority bug.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vladev",
                        "name": "vladev",
                        "displayName": "Emil Ivanov",
                        "active": true
                    },
                    "created": "2008-08-06T07:14:55.000+0000",
                    "updated": "2008-08-06T07:14:55.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/23347",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "There were three different requests for having InArray validation provided by default, each of which had multiple watchers. At this point, we have decided that this should be standard behavior.\n\nThe new functionality is well documented, and this documentation will be available on-line with RC2.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-08-06T07:50:56.000+0000",
                    "updated": "2008-08-06T07:50:56.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/23372",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vladev",
                        "name": "vladev",
                        "displayName": "Emil Ivanov",
                        "active": true
                    },
                    "body": "But the first test on the top is still failing, despite 3 being a valid value for the select.\nWhat I'm saying is that the InArray validator does not work for selects with optgroups.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vladev",
                        "name": "vladev",
                        "displayName": "Emil Ivanov",
                        "active": true
                    },
                    "created": "2008-08-06T23:26:43.000+0000",
                    "updated": "2008-08-06T23:26:43.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/23374",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "I understand that the InArray validator does not work for selects with optgroups -- and this is because InArray is for flat arrays, not nested arrays; one that works recursively would need a much different architecture. If you would like a validator that works for nested arrays, please file a separate issue requesting one.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-08-07T05:24:50.000+0000",
                    "updated": "2008-08-07T05:24:50.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/23375",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vladev",
                        "name": "vladev",
                        "displayName": "Emil Ivanov",
                        "active": true
                    },
                    "body": "Thank you for the replies.\nHere it is ZF-3882.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vladev",
                        "name": "vladev",
                        "displayName": "Emil Ivanov",
                        "active": true
                    },
                    "created": "2008-08-07T05:30:43.000+0000",
                    "updated": "2008-08-07T05:30:43.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24051",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "Updating for the 1.6.0 release.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2008-09-02T10:39:15.000+0000",
                    "updated": "2008-09-02T10:39:15.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3868\/transitions"
}