{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9823",
    "key": "ZF-9823",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Rest_Route#assemble does not properly build new|edit urls"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9823\/votes",
                "votes": 4,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10501",
                    "id": 10501,
                    "description": "Mini Release",
                    "name": "1.11.1",
                    "userReleaseDate": "30\/Nov\/10",
                    "archived": false,
                    "releaseDate": "2010-11-30",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2010-11-21T02:07:21.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rosstuck",
                "name": "rosstuck",
                "displayName": "Ross Tuck",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-05-10T14:13:05.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-11-21T02:07:23.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "The assemble() method in Zend_Rest_Route can not create a url for the \"new\" action. Instead, it provides a link to the index action (\"\/products\" instead of \"\/products\/new\"). This is not the same as the match() method which makes allowances for the \"index\" and \"new\" actions. \r\n\r\nThis may also be the root issue behind ZF-7753. Included patch is against trunk.\r\n\r\nThe fix is small, but it may create a (very small) BC-break\/bug if the $params['index'] is also set as this also tries to generate a url for the index action. That said, the $params['index'] behavior may be a bug that should instead become $params['action] == 'index'. Please let me know if I should file this under another ticket."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9823\/watchers",
                "isWatching": false,
                "watchCount": 5
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wilmoore",
                "name": "wilmoore",
                "displayName": "Wil Moore III (wilmoore)",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-10117",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10117",
                    "type": {
                        "name": "Related",
                        "direction": "OUTBOUND",
                        "description": "is related to"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10451",
                    "id": 10451,
                    "description": "Mini Release",
                    "name": "1.10.4",
                    "userReleaseDate": "28\/Apr\/10",
                    "archived": false,
                    "releaseDate": "2010-04-28",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10460",
                    "id": 10460,
                    "description": "Mini Release",
                    "name": "1.10.5",
                    "userReleaseDate": "26\/May\/10",
                    "archived": false,
                    "releaseDate": "2010-05-26",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10470",
                    "id": 10470,
                    "description": "Mini Release",
                    "name": "1.10.6",
                    "userReleaseDate": "22\/Jun\/10",
                    "archived": false,
                    "releaseDate": "2010-06-22",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10480",
                    "id": 10480,
                    "description": "Mini Release",
                    "name": "1.10.7",
                    "userReleaseDate": "28\/Jul\/10",
                    "archived": false,
                    "releaseDate": "2010-07-28",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10490",
                    "id": 10490,
                    "description": "Mini Release",
                    "name": "1.10.8",
                    "userReleaseDate": "25\/Aug\/10",
                    "archived": false,
                    "releaseDate": "2010-08-25",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10420",
                    "id": 10420,
                    "description": "Minor Release",
                    "name": "1.11.0",
                    "userReleaseDate": "02\/Nov\/10",
                    "archived": false,
                    "releaseDate": "2010-11-02",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10422",
                    "id": 10422,
                    "name": "Zend_Rest_Route",
                    "description": "Includes both Zend_Rest_Route and Zend_Rest_Controller",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40424",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rosstuck",
                        "name": "rosstuck",
                        "displayName": "Ross Tuck",
                        "active": true
                    },
                    "body": "Added reproduction script and sample patch.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rosstuck",
                        "name": "rosstuck",
                        "displayName": "Ross Tuck",
                        "active": true
                    },
                    "created": "2010-05-10T14:15:57.000+0000",
                    "updated": "2010-05-10T14:15:57.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/41369",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wilmoore",
                        "name": "wilmoore",
                        "displayName": "Wil Moore III (wilmoore)",
                        "active": true
                    },
                    "body": "I have verified this as an issue. A co-worker reported this issue to me yesterday and after a quick search, I found this issue.\r\n\r\nUnit tests verifying the issue are attached.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wilmoore",
                        "name": "wilmoore",
                        "displayName": "Wil Moore III (wilmoore)",
                        "active": true
                    },
                    "created": "2010-07-07T00:23:44.000+0000",
                    "updated": "2010-07-07T00:23:44.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/41371",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wilmoore",
                        "name": "wilmoore",
                        "displayName": "Wil Moore III (wilmoore)",
                        "active": true
                    },
                    "body": "Changed to major as not being able to consistently build urls is likely a deal-breaker for many users wanting to use this component.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wilmoore",
                        "name": "wilmoore",
                        "displayName": "Wil Moore III (wilmoore)",
                        "active": true
                    },
                    "created": "2010-07-07T00:33:53.000+0000",
                    "updated": "2010-07-07T00:33:53.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/41375",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wilmoore",
                        "name": "wilmoore",
                        "displayName": "Wil Moore III (wilmoore)",
                        "active": true
                    },
                    "body": "*>> BC-break\/bug if the $params['index'] is also set as this also tries to generate a url for the index action.*\r\n\r\nThere is no problem here because 'index' is checked for as a key (see example):\r\n\r\n$this->url(array('id' => 1, 'key' => 'value', 'action' => 'edit', 'index' => true));\r\n\r\nThe TRUE constant is only needed so that some positive (evaluates to true) value is given. The Zend_Rest_Route#assemble method\r\nwill find 'index' to be set and it's value evaluates to true (so 1 or '1' or true would work equally well as it doesn't check for === TRUE). The 'index' value is this removed from the parameters array and the remaining parameters (id, key) are added to the resulting URL string.\r\n\r\n'action' has already been removed from the parameters array by this point so it will not accidentally be added to the string.\r\n\r\nHaving 'index' => true also negates having 'action' => 'edit' or 'action' => 'new'. In other words, if 'index' => true, then 'action' is ignored.\r\n\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wilmoore",
                        "name": "wilmoore",
                        "displayName": "Wil Moore III (wilmoore)",
                        "active": true
                    },
                    "created": "2010-07-07T12:53:31.000+0000",
                    "updated": "2010-07-07T12:53:31.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/41376",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wilmoore",
                        "name": "wilmoore",
                        "displayName": "Wil Moore III (wilmoore)",
                        "active": true
                    },
                    "body": "FYI, removed old diffs after getting the original poster's permission to do so.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wilmoore",
                        "name": "wilmoore",
                        "displayName": "Wil Moore III (wilmoore)",
                        "active": true
                    },
                    "created": "2010-07-07T12:55:56.000+0000",
                    "updated": "2010-07-07T12:55:56.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/41377",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rosstuck",
                        "name": "rosstuck",
                        "displayName": "Ross Tuck",
                        "active": true
                    },
                    "body": "The BC-break only occured (as I recall) with the now removed patches. Your newer patch fixes a few more things and does not suffer from the same problem. All good. :)\r\n\r\nHowever, my main question about the index key was exactly what you point out. Why does it search for \"index\" => true, and not \"action\" => \"index\" like all other routes do? If I pass in array(\"action\" => \"edit\", \"index\" => true), I expect it not to ignore action but instead treat index as a named parameter.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rosstuck",
                        "name": "rosstuck",
                        "displayName": "Ross Tuck",
                        "active": true
                    },
                    "created": "2010-07-07T13:34:05.000+0000",
                    "updated": "2010-07-07T13:34:05.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/41378",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wilmoore",
                        "name": "wilmoore",
                        "displayName": "Wil Moore III (wilmoore)",
                        "active": true
                    },
                    "body": "*If I pass in array(\"action\" => \"edit\", \"index\" => true), I expect it not to ignore action but instead treat index as a named parameter.*\r\n\r\nI see what you mean. Good point.\r\nSo, if you did this:\r\n\r\n$this->url(array('id' => 1, 'action' => 'index', 'another' => 'parameter'));\r\n\r\nwould you want it to generate this:\r\n\r\n\/index\/1\/another\/parameter\r\n\r\nor this:\r\n\r\n\/index\/id\/1\/another\/parameter\r\n\r\nor something completely different?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wilmoore",
                        "name": "wilmoore",
                        "displayName": "Wil Moore III (wilmoore)",
                        "active": true
                    },
                    "created": "2010-07-07T13:45:52.000+0000",
                    "updated": "2010-07-07T13:45:52.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/41379",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rosstuck",
                        "name": "rosstuck",
                        "displayName": "Ross Tuck",
                        "active": true
                    },
                    "body": "Personally I would prefer the former. ID is a special param in Zend_Rest_Route, it makes sense for it to remain invisible.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rosstuck",
                        "name": "rosstuck",
                        "displayName": "Ross Tuck",
                        "active": true
                    },
                    "created": "2010-07-07T13:53:12.000+0000",
                    "updated": "2010-07-07T13:53:12.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/41386",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wilmoore",
                        "name": "wilmoore",
                        "displayName": "Wil Moore III (wilmoore)",
                        "active": true
                    },
                    "body": "Diff updated to include three new unit tests which are now passing.\r\n\r\nAllows:\r\n\r\n# \/users\/new\r\n# \/users\/1\/edit\r\n# \/users\/index\/1\/another\/parameter",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wilmoore",
                        "name": "wilmoore",
                        "displayName": "Wil Moore III (wilmoore)",
                        "active": true
                    },
                    "created": "2010-07-08T00:44:18.000+0000",
                    "updated": "2010-07-08T00:44:18.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/41994",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wilmoore",
                        "name": "wilmoore",
                        "displayName": "Wil Moore III (wilmoore)",
                        "active": true
                    },
                    "body": "Assigning this issue to myself. If I don't hear anything negative about the patch within the next few days, I'm going to commit it so it gets into the next release.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wilmoore",
                        "name": "wilmoore",
                        "displayName": "Wil Moore III (wilmoore)",
                        "active": true
                    },
                    "created": "2010-08-16T12:08:44.000+0000",
                    "updated": "2010-08-16T12:08:44.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/42786",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=merrix",
                        "name": "merrix",
                        "displayName": "Grayson Koonce",
                        "active": true
                    },
                    "body": "did you commit this patch? im having this issue with 1.10.8 still.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=merrix",
                        "name": "merrix",
                        "displayName": "Grayson Koonce",
                        "active": true
                    },
                    "created": "2010-10-30T19:05:12.000+0000",
                    "updated": "2010-10-30T19:05:12.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43229",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wilmoore",
                        "name": "wilmoore",
                        "displayName": "Wil Moore III (wilmoore)",
                        "active": true
                    },
                    "body": "fixed in revision 23420.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wilmoore",
                        "name": "wilmoore",
                        "displayName": "Wil Moore III (wilmoore)",
                        "active": true
                    },
                    "created": "2010-11-21T01:44:41.000+0000",
                    "updated": "2010-11-21T01:44:41.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43230",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wilmoore",
                        "name": "wilmoore",
                        "displayName": "Wil Moore III (wilmoore)",
                        "active": true
                    },
                    "body": "Merged r23420 to release branch 1.11.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wilmoore",
                        "name": "wilmoore",
                        "displayName": "Wil Moore III (wilmoore)",
                        "active": true
                    },
                    "created": "2010-11-21T02:05:34.000+0000",
                    "updated": "2010-11-21T02:05:34.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9823\/transitions"
}