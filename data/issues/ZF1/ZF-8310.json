{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8310",
    "key": "ZF-8310",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Setting new error message don't work when a translated version have been set"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8310\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/2",
                "name": "Won't Fix"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10360",
                    "id": 10360,
                    "description": "Minor Release",
                    "name": "1.10.0",
                    "userReleaseDate": "27\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-27",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-11-16T13:35:41.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=primolan",
                "name": "primolan",
                "displayName": "Rodrigo Novelo Primolan",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-11-16T03:41:37.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-03-04T11:12:02.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "If you specify a translated version of messages for errors in {{setDefaultTranslator($translator = null)}} (line 361), then it's impossible to overwrite it in execution's time.\r\n\r\nThe function {{_createMessage($messageKey, $value)}} (line 210) checks if there's a translated version of error message, but should also check if user has set an error's message during execution's time.\r\n\r\n{code}\r\n$validateStringLength = new Zend_Validate_StringLength();\r\n$validateStringLength->setMin(1000)->setMessages(array(\r\n    Zend_Validate_StringLength::TOO_SHORT => \"Testing new error message\"\r\n));\r\n{code}\r\n\r\nThe code above won't work if you have specified a translated version in Bootstrap.\r\n\r\nAll functions listed here are on file {{Zend_Validate_Abstract}}."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8310\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10380",
                    "id": 10380,
                    "description": "Mini Release",
                    "name": "1.9.5",
                    "userReleaseDate": "27\/Oct\/09",
                    "archived": false,
                    "releaseDate": "2009-10-27",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10140",
                    "id": 10140,
                    "name": "Zend_Validate",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36039",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "This can not work and will not be implemented.\r\n\r\nExample:\r\nYou set an english error message.\r\nYou have activated translation\/I18n.\r\nYour user requests french translation.\r\n\r\nBut in your case the returned message is ALWAYS english as there would be no way to know which message has the same language as the requesting user and which has not and should be translated.\r\n\r\nThe solution:\r\nWhen you activate translation then you must also set a translation for the validator which overrides the default\/generic translation.\r\nThis will return the proper language, because when you don't set a new message, then the old default translation for this language will be returned.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-11-16T13:35:09.000+0000",
                    "updated": "2009-11-16T13:35:09.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36040",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Closing as won't fix according to previous mentioned reasons.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-11-16T13:35:41.000+0000",
                    "updated": "2009-11-16T13:35:41.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36052",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=primolan",
                        "name": "primolan",
                        "displayName": "Rodrigo Novelo Primolan",
                        "active": true
                    },
                    "body": "I used {{setDefaultTranslator()}} only to customize my errors' messages. Is there another way (a better method)?\r\n\r\nCya!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=primolan",
                        "name": "primolan",
                        "displayName": "Rodrigo Novelo Primolan",
                        "active": true
                    },
                    "created": "2009-11-17T02:53:13.000+0000",
                    "updated": "2009-11-17T02:53:13.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36092",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "But in your example you are using setMessage to customize your error messages additionally to translation.\r\n\r\nAs explained before: Eighter use one way or the other. Both ways can not work properly as there are always racing conditions.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-11-18T03:43:52.000+0000",
                    "updated": "2009-11-18T03:43:52.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36095",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=primolan",
                        "name": "primolan",
                        "displayName": "Rodrigo Novelo Primolan",
                        "active": true
                    },
                    "body": "I used translation because I customized all error's messages.\r\n\r\nHow to customize all messages, without using translation's way or setMessage (one-by-one) ?\r\n\r\nTy",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=primolan",
                        "name": "primolan",
                        "displayName": "Rodrigo Novelo Primolan",
                        "active": true
                    },
                    "created": "2009-11-18T05:19:20.000+0000",
                    "updated": "2009-11-18T05:19:20.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38946",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mindexpander",
                        "name": "mindexpander",
                        "displayName": "Erik Wijdemans",
                        "active": true
                    },
                    "body": "I would like to comment on this one because it's in my opinion not possible to set a different translator for a validator when used in a form.\r\n\r\nIf the form is validated, the translator of the form will be passed through all elements and all validators of the elements.\r\n\r\nSpecifying a different translator will therefor be overridden and will only work if you set one for the form and will result in the translator being discarded for individual validators and form-elements.\r\n\r\nIn my opinion there should be a check to determine if a translator has been set for individual validators or formelements rather than just \"blindly\" passing the validator of the form onto it's children.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mindexpander",
                        "name": "mindexpander",
                        "displayName": "Erik Wijdemans",
                        "active": true
                    },
                    "created": "2010-03-03T03:54:51.000+0000",
                    "updated": "2010-03-03T03:54:51.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38956",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "This issue is not related to \"Zend_Form\" but to Zend_Validate itself.\r\n\r\nWhen a form overrides the translator of Zend_Validate and you see this as false behaviour then the problem is within Zend_Form.\r\n\r\nIn Zend_Validate you can set a default translator for all validators and override it with a validator-specific translator.\r\n\r\nWhen a form element set's it's own translator to the validators which are attached to the element it's on the form and not on the validator to check this.\r\n\r\nKeep in mind that the validator itself has no way to determinate on which element he is connected. So the validator has no way to inject his own translator within the form element, or to get the translator which is set on the element.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2010-03-03T12:10:34.000+0000",
                    "updated": "2010-03-03T12:10:34.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38967",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mindexpander",
                        "name": "mindexpander",
                        "displayName": "Erik Wijdemans",
                        "active": true
                    },
                    "body": "In this line\r\n{quote}\r\nWhen a form element set's it's own translator to the validators which are attached to the element it's on the form and not on the validator to check this.\r\n{quote}\r\nyou say way i mean. In my opinion the form should check if an element already has a translator and the element should check if a validator already has a translator.\r\n\r\nOn a side-note referring to the original post, your solution regarding setting a translator for the validator will not work in combination with a form due to the mentioned reasons.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mindexpander",
                        "name": "mindexpander",
                        "displayName": "Erik Wijdemans",
                        "active": true
                    },
                    "created": "2010-03-04T08:00:38.000+0000",
                    "updated": "2010-03-04T08:00:38.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38970",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=primolan",
                        "name": "primolan",
                        "displayName": "Rodrigo Novelo Primolan",
                        "active": true
                    },
                    "body": "Please enlighten this to me:\r\n\r\nThe Translator has always priority over Zend_Validator (in this case, setting new error message through method setMessage)?\r\n\r\nIf so, shouldn't be different?\r\n\r\nThank you for yours patience",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=primolan",
                        "name": "primolan",
                        "displayName": "Rodrigo Novelo Primolan",
                        "active": true
                    },
                    "created": "2010-03-04T08:30:33.000+0000",
                    "updated": "2010-03-04T08:30:33.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38972",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "@Erik:\r\nAs said before... the form must check if it wants to set a different translator... the validator can not check if the form which uses the validator has a translator set.\r\n\r\nEven if I would agree to you (which I can not before looking into Zend_Form) this issue is still related to Zend_Validate and not Zend_Form.\r\n\r\nWhen you have a problem with Zend_Form then please add a new issue to Zend_Form and not to Zend_Validate. Mixing different issues into a single one makes things just irritating for others.\r\n\r\n@Rodrigo:\r\nSetting a message manually you override all other things.\r\nThink the other way round... when you set a own message, how should Zend_Translate translate this message? It does not know about it, so it can not be translated.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2010-03-04T10:24:05.000+0000",
                    "updated": "2010-03-04T10:24:05.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38974",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mindexpander",
                        "name": "mindexpander",
                        "displayName": "Erik Wijdemans",
                        "active": true
                    },
                    "body": "Excuse me for the misplaced comment about zend_form, I recreated it at http:\/\/framework.zend.com\/issues\/browse\/ZF-9330",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mindexpander",
                        "name": "mindexpander",
                        "displayName": "Erik Wijdemans",
                        "active": true
                    },
                    "created": "2010-03-04T11:12:02.000+0000",
                    "updated": "2010-03-04T11:12:02.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8310\/transitions"
}