{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10169",
    "key": "ZF-10169",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Currency::getCurrencyList( $myRegion ) returns all currencies and all regions, not the currencies for the regions specified."
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10169\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10420",
                    "id": 10420,
                    "description": "Minor Release",
                    "name": "1.11.0",
                    "userReleaseDate": "02\/Nov\/10",
                    "archived": false,
                    "releaseDate": "2010-11-02",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2010-07-28T00:29:16.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=marcwren",
                "name": "marcwren",
                "displayName": "marc wren",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-07-16T10:35:52.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-07-28T00:29:23.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "According to the documentation for Zend_Currency:\r\ngetCurrencyList(): Returns a list of all currencies which are used in the given region as array. Defaults to the objects locale when no region has been given.\r\n\r\nGiven this description, I would expect the code snippet \"$oCurrency = new Zend_Currency(); $aAvailableCurrencies = $oCurrency->getCurrencyList();\" to return a list of currencies used in the region specified by the user's browser. However, this code is instead returning the list of all currencies and the regions associated with each currency.\r\n\r\nLooking at the Zend_Currency::getCurrencyList() method, either the line \"Zend_Locale_Data::getList('', 'regiontocurrency', $region);\" is not returning the expected data or additional processing must be done before returning a value."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10169\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10470",
                    "id": 10470,
                    "description": "Mini Release",
                    "name": "1.10.6",
                    "userReleaseDate": "22\/Jun\/10",
                    "archived": false,
                    "releaseDate": "2010-06-22",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10071",
                    "id": 10071,
                    "name": "Zend_Currency",
                    "description": "Zend_Currency is a Class which handles all Currency related functions and is locale aware.",
                    "isAssigneeTypeValid": false
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10073",
                    "id": 10073,
                    "name": "Zend_Locale",
                    "description": "Zend_Locale is a basic wrapper for all I18N and L10N issues for the Zend Framework. It provides the userbasically with access to translation functionality. It can handle different source file types for translation.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/41549",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "You are missing one thing.\r\n\r\nTo which locale has Zend_Currency been set?\r\nThis information in not available by the snippet you gave.\r\n\r\nIt can be the users locale, the environment locale, a registry locale or a locale which is set within the bootstrap.\r\n\r\nAdditionally, when you've set only a language without a region this method is unable to return proper data because when no region is given, region specific informations can not be retrieved.\r\n\r\nThe main question which only you can answer is: Which region is requested by Zend_Currency within the subcall.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2010-07-16T15:17:43.000+0000",
                    "updated": "2010-07-16T15:17:43.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/41602",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=marcwren",
                        "name": "marcwren",
                        "displayName": "marc wren",
                        "active": true
                    },
                    "body": "I reproduced this issue for the regions US and FR. I tested a few different ways: \r\n  \r\n1. I Initialize the Zend_Locale object by detecting the user's region from their browser settings. I tested with my browser's language preference to \"fr-FR\" and again with it set to \"en-US\" using the following code: \r\nZend_Registry::set( 'Zend_Locale', new Zend_Locale() ); \r\n\/\/ Later in my code, I allowed Zend_Currency to pull the Zend_Locale I had set in the registry as follows: \r\n$oCurrency = new Zend_Currency(); \r\n$aAvailableCurrencies = $oCurrency->getCurrencyList(); \r\n\r\n2. I also tried using the ZFDEFAULT region but this is set to \"en\" and so results in an exception saying that the region could not be deteremined: \r\nZend_Registry::set( 'Zend_Locale', new Zend_Locale( Zend_Locale::ZFDEFAULT ) ); \r\n\r\n3. I also tried passing the expected region directly to the Zend_Currency component. For both \"en_US\" and \"fr_FR\" I did the following: \r\n$oCurrency = new Zend_Currency( \"en_US\" ); \r\n$aAvailableCurrencies = $oCurrency->getCurrencyList(); \r\n\r\n4. Lastly, I tried passing the expected region directly to the getCurrencyList method for both FR and US: \r\n$oCurrency = new Zend_Currency(); \r\n$aAvailableCurrencies = $oCurrency->getCurrencyList( \"US\" ); \r\n\r\nDigging a little deeper into the Zend_Locale_Data::getList() method, I'm seeing the following strings generated as the $id value being loaded from cache (line 316 in Zend_Locale_Data for framework version 1.10.6): \r\n\"Zend_LocaleL_fr_FR_regiontocurrency_FR\" (browser set to fr_FR and Zend_Currency initialized to fr_FR) \r\n\"Zend_LocaleL_fr_FR_regiontocurrency_US\" (browser set to fr_FR and Zend_Currency initialized to en_US) \r\n\"Zend_LocaleL_en_regiontocurrency_US\" (browser language not specified and Zend_Currency initialized to en_US) \r\n\"Zend_LocaleL_en_regiontocurrency_FR\" (browser language not specified and Zend_Currency initialized to fr_FR) \r\n\r\nHowever, all of these cache indexes return the exact same array of 167 currency => region pairs. I'm assuming that the expected result from the above cache requests should be an array of currency names associated with the region specified at the end of the cache index string. \r\n\r\nI hope that answers your question.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=marcwren",
                        "name": "marcwren",
                        "displayName": "marc wren",
                        "active": true
                    },
                    "created": "2010-07-19T09:04:28.000+0000",
                    "updated": "2010-07-19T09:04:28.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/41765",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Fixed with r22708",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2010-07-28T00:29:18.000+0000",
                    "updated": "2010-07-28T00:29:18.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10169\/transitions"
}