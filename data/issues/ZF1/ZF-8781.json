{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8781",
    "key": "ZF-8781",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "31.40. Converting numerals from Latin script to Eastern Arabic script won't work"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/8",
                "name": "Docs:  Problem",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8781\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/3",
                "name": "Duplicate"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10360",
                    "id": 10360,
                    "description": "Minor Release",
                    "name": "1.10.0",
                    "userReleaseDate": "27\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-27",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2010-01-12T13:09:40.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=moosh",
                "name": "moosh",
                "displayName": "Christophe Gesch\u00e9",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-01-11T22:27:15.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-01-12T13:21:04.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Priority low, I search also myself.\r\nbut I try  the example 31.40. Converting numerals from Latin script to Eastern Arabic script.\r\n\r\n\r\nconverted value = null\r\n\r\nsee my script test here. http:\/\/www.xp-dev.com\/sc\/browse\/66067\/%2Ftrunk%2FZend_Locale%2FExemple.31.40.ConvertingNumeralsScriptLatin2EasternArabic.php\r\n\r\n\r\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/5",
                "name": "Trivial"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8781\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "customfield_10000": {
            "name": "Language",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/customFieldOption\/10002",
                "value": "French"
            }
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-7279",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7279",
                    "type": {
                        "name": "Duplicate",
                        "direction": "OUTBOUND",
                        "description": "duplicates"
                    }
                },
                {
                    "issueKey": "ZF-7278",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7278",
                    "type": {
                        "name": "Duplicate",
                        "direction": "OUTBOUND",
                        "description": "duplicates"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10390",
                    "id": 10390,
                    "description": "Mini Release",
                    "name": "1.9.6",
                    "userReleaseDate": "24\/Nov\/09",
                    "archived": false,
                    "releaseDate": "2009-11-24",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10073",
                    "id": 10073,
                    "name": "Zend_Locale",
                    "description": "Zend_Locale is a basic wrapper for all I18N and L10N issues for the Zend Framework. It provides the userbasically with access to translation functionality. It can handle different source file types for translation.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37597",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "I can't reproduce your problems.\r\n\r\nThe given code is not from the manual and example 31.40 works and returns arabic script.\r\n\r\nTried by using \"de_AT\" which returns 18 scripts and also by using \"en\" which also returns 18 scripts.\r\n\r\nCan you provide us with a screenshot ?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2010-01-11T23:39:10.000+0000",
                    "updated": "2010-01-11T23:39:10.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37622",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=moosh",
                        "name": "moosh",
                        "displayName": "Christophe Gesch\u00e9",
                        "active": true
                    },
                    "body": "ok so  I've retry.\r\n\r\n{code:none}\r\n\r\n<h1>Zend_Locale::convertNumerals()<\/h1>\r\n<p>Zf : <?php echo Zend_Version::VERSION;?><\/p>\r\n\r\n$locale = new Zend_Locale();\r\nZend_Debug::dump($locale->toString(), 'Locale');\r\n\r\necho '<h2>Original script<\/h2>';\r\n\r\n$latinScript = '123';\r\n$arabicScript = Zend_Locale_Format::convertNumerals($latinScript,\r\n                                                    'Latn',\r\n                                                    'Arab');\r\n\r\nprint \"\\nOriginal:  \" . $latinScript;\r\nprint \"\\nLocalized: \" . $arabicScript;\r\n{code}\r\n\r\n{quote}\r\nZend_Locale::convertNumerals()\r\n\r\nZf : 1.9.6\r\n\r\nLocale string(2) \"fr\"\r\n\r\nOriginal script\r\n\r\nOriginal: 123 Localized: \r\n{quote}\r\n\r\n\r\nI continue to test myself.\r\n\r\nPrecision I use Windows. I would make check on iconv and preg_replace",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=moosh",
                        "name": "moosh",
                        "displayName": "Christophe Gesch\u00e9",
                        "active": true
                    },
                    "created": "2010-01-12T11:02:51.000+0000",
                    "updated": "2010-01-12T11:02:51.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37623",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=moosh",
                        "name": "moosh",
                        "displayName": "Christophe Gesch\u00e9",
                        "active": true
                    },
                    "body": "{quote}\r\niconv\r\niconv support \tenabled\r\niconv implementation \t\"libiconv\"\r\niconv library version \t1.9\r\n\r\nDirective\tLocal Value\tMaster Value\r\niconv.input_encoding\tISO-8859-1\tISO-8859-1\r\niconv.internal_encoding\tISO-8859-1\tISO-8859-1\r\niconv.output_encoding\tISO-8859-1\tISO-8859-1\r\n\r\n\r\n----\r\n\r\npcre\r\nPCRE (Perl Compatible Regular Expressions) Support \tenabled\r\nPCRE Library Version \t7.9 2009-04-11\r\n\r\nDirective\tLocal Value\tMaster Value\r\npcre.backtrack_limit\t100000\t100000\r\npcre.recursion_limit\t100000\t100000\r\n{quote}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=moosh",
                        "name": "moosh",
                        "displayName": "Christophe Gesch\u00e9",
                        "active": true
                    },
                    "created": "2010-01-12T11:11:41.000+0000",
                    "updated": "2010-01-12T11:11:41.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37624",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=moosh",
                        "name": "moosh",
                        "displayName": "Christophe Gesch\u00e9",
                        "active": true
                    },
                    "body": "\r\n\r\nproblem is in both.\r\n\r\n{code}\r\nfor ($x = 0; $x < 10; ++$x) {\r\n\t\t    \r\n            $asource[$x] = \"\/\" . iconv_substr($source, $x, 1) . \"\/u\";\r\n            $atarget[$x] = iconv_substr($target, $x, 1);\r\n        }\r\n\r\n\t\t\r\n        return preg_replace($asource, $atarget, $input);\r\n{code}\r\n\r\n\r\n{code}\r\n  $asource[] = \"\/\u0664\/u\";\r\n  $asource[] = \"\/\u0663\/u\";\r\n  $atarget[] = \"x\";\r\n  $atarget[] = \"y\";\r\n\r\n$input = '\u0663\u0664\u0665\u0666';\r\n$z = preg_replace($asource, $atarget, $input);\r\nZend_Debug::dump($asource, '$asource');\r\nZend_Debug::dump($atarget, '$atarget');\r\nZend_Debug::dump($z, 'preg_replace');\r\n\r\n$a = iconv_substr('1\u0663\u06642\u0665\u0666  Tests', 2, 1);\r\nZend_Debug::dump($a, 'iconv');\r\necho ord($a);\r\n{code}\r\n\r\n\r\n{quote}\r\n$asource array(2) {\r\n  [0] => string(5) \"\/\u0664\/u\"\r\n  [1] => string(5) \"\/\u0663\/u\"\r\n}\r\n\r\n$atarget array(2) {\r\n  [0] => string(1) \"x\"\r\n  [1] => string(1) \"y\"\r\n}\r\n\r\npreg_replace string(6) \"yx\u0665\u0666\"\r\n\r\niconv string(1) \"\ufffd\" <-- \r\n\r\nord -> 163\r\n\r\n{quote}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=moosh",
                        "name": "moosh",
                        "displayName": "Christophe Gesch\u00e9",
                        "active": true
                    },
                    "created": "2010-01-12T12:11:27.000+0000",
                    "updated": "2010-01-12T12:11:27.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37625",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "I still don't know where your problems are, nor what you are getting for an output from the manual example, nor what you want to show with this code snippets.\r\n\r\nPS: I also used Windows for reproduction. Default installation",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2010-01-12T12:23:35.000+0000",
                    "updated": "2010-01-12T12:23:35.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37626",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=moosh",
                        "name": "moosh",
                        "displayName": "Christophe Gesch\u00e9",
                        "active": true
                    },
                    "body": "I found  a solution but it's in ZF code\r\n\r\nin \r\n\r\n{code}\r\n  public static function convertNumerals($input, $from, $to = null)\r\n    {\r\n\t\r\n        $from   = strtolower($from);\r\n        $source = Zend_Locale_Data::getContent('en', 'numberingsystem', $from);\r\n\t\tif (empty($source)) {\r\n            require_once 'Zend\/Locale\/Exception.php';\r\n            throw new Zend_Locale_Exception(\"Unknown script '$from'. Use 'Latn' for digits 0,1,2,3,4,5,6,7,8,9.\");\r\n        }\r\n\r\n        if ($to !== null) {\r\n            $to     = strtolower($to);\r\n            $target = Zend_Locale_Data::getContent('en', 'numberingsystem', $to);\r\n            if (empty($target)) {\r\n                require_once 'Zend\/Locale\/Exception.php';\r\n                throw new Zend_Locale_Exception(\"Unknown script '$to'. Use 'Latn' for digits 0,1,2,3,4,5,6,7,8,9.\");\r\n            }\r\n        } else {\r\n            $target = '0123456789';\r\n        }\r\n\r\n\t\tfor ($x = 0; $x < 10; ++$x) {\r\n\t\t    \r\n            $asource[$x] = \"\/\" . iconv_substr($source, $x, 1) . \"\/u\";\r\n            $atarget[$x] = iconv_substr($target, $x, 1);\r\n        }\r\n\r\n\t\t\r\n        return preg_replace($asource, $atarget, $input);\r\n    }\r\n\r\n{code}\r\n\r\nI just add 'UTF-8' as 4st param of iconv_substr\r\n\r\nand all works fine.\r\n\r\n{code}\r\n\r\n  $asource[$x] = \"\/\" . iconv_substr($source, $x, 1, 'UTF-8') . \"\/u\";\r\n            $atarget[$x] = iconv_substr($target, $x, 1, 'UTF-8');\r\n\r\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=moosh",
                        "name": "moosh",
                        "displayName": "Christophe Gesch\u00e9",
                        "active": true
                    },
                    "created": "2010-01-12T12:37:37.000+0000",
                    "updated": "2010-01-12T12:37:37.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37627",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=moosh",
                        "name": "moosh",
                        "displayName": "Christophe Gesch\u00e9",
                        "active": true
                    },
                    "body": "{quote}\r\nI still don't know where your problems are, nor what you are getting for an output from the manual example, nor what you want to show with this code snippets.\r\n{quote}\r\n\r\nOK, sorry.\r\n\r\nI just want  to show than on my Zend server install on winows \r\n\r\nZend_Locale_Format::convertNumerals return  NULL\r\n\r\nuntil I add , 'UTF-8' on 4st param of iconv_substr function. in Zend_Locale_Format::convertNumerals \r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=moosh",
                        "name": "moosh",
                        "displayName": "Christophe Gesch\u00e9",
                        "active": true
                    },
                    "created": "2010-01-12T12:42:14.000+0000",
                    "updated": "2010-01-12T12:42:14.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37631",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=moosh",
                        "name": "moosh",
                        "displayName": "Christophe Gesch\u00e9",
                        "active": true
                    },
                    "body": "Ok I just  start my brain. \r\n\r\n{code}\r\nini_set('iconv.internal_encoding', 'UTF-8');\r\n{code}\r\n\r\nbefore the sample and it's work. without change anything in zend framework. \r\nBut  I think it's better to change it.\r\n\r\nI tell to continue to test most of example and complete them in my shared project. ZF_Experiences.\r\n\r\n* http:\/\/www.xp-dev.com\/sc\/browse\/66067\/\r\n* http:\/\/trac.xp-dev.com\/ZF_Experiences\r\n\r\n\r\n\r\n\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=moosh",
                        "name": "moosh",
                        "displayName": "Christophe Gesch\u00e9",
                        "active": true
                    },
                    "created": "2010-01-12T13:09:36.000+0000",
                    "updated": "2010-01-12T13:09:36.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37632",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "This clearifies why it does not work in your environment.\r\n\r\nIn my installation UTF-8 is set as default.\r\nIt seems that within the server installation it is NOT default.\r\n\r\nThis issue was already fixed for the next minor release (1.10) a few months ago. See the linked issues.\r\n\r\nClosing as duplicate.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2010-01-12T13:09:40.000+0000",
                    "updated": "2010-01-12T13:09:40.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37633",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "You can use 1.10pre or trunk to have a fixed version.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2010-01-12T13:10:49.000+0000",
                    "updated": "2010-01-12T13:10:49.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37637",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Christophe:\r\nAs said... this has already been fixed in past and it will be released with the next release. We can't throw out releases each two weeks ;-)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2010-01-12T13:21:04.000+0000",
                    "updated": "2010-01-12T13:21:04.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8781\/transitions"
}