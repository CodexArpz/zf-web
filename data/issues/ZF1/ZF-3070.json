{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3070",
    "key": "ZF-3070",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Check Filename scanning"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField",
            "value": {
                "timeestimate": 0,
                "timespent": 180
            }
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3070\/votes",
                "votes": 1,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10240",
                    "id": 10240,
                    "description": "Minor Release",
                    "name": "1.6.0",
                    "userReleaseDate": "02\/Sep\/08",
                    "archived": false,
                    "releaseDate": "2008-09-02",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2008-05-23T15:00:06.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-04-08T10:49:07.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2008-09-02T10:39:31.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Investigate possible problem with filename search.\n\nFrom Rob L.\nUPDATE:\n\nAfter a message from Robert Castley (thanks), I tried directory scan instead\nof filename scan. It seemed to work. Here is an example of what works and\nwhat doesn't work for me:\n\n-------------\nWORKS:\n($dir contains folders zh_CN\/ zh_TW\/ en\/ and de\/ with translation files\ninside)\n\n$translate = new Zend_Translate('my_custom_adapter', $dir, null,\narray('scan' => Zend_Translate::LOCALE_DIRECTORY));\nprint_r($translate->getList());\n\nprints: Array ( [en] => en [zh_TW] => zh_TW [zh_CN] => zh_CN [de] => de )\n\n-------------\nDOESN'T WORK:\n($dir contains files zh_CN.txt zh_TW.txt en.txt and de.txt)\n\n$translate = new Zend_Translate('my_custom_adapter', $dir, null,\narray('scan' => Zend_Translate::LOCALE_FILENAME));\nprint_r($translate->getList());\n\nprints: Array ( [en] => en [de] => de [zh] => zh )\n\n\nI will continue with DIRECTORY, but I would prefer to use FILENAME, but what\nam I doing wrong that it combines zh_CN and zh_TW into a single locale?\n\nRob\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3070\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/worklog\/21588",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3070",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "comment": "Added testbed for file and directory scanning\nIncreased scanning of degraded locales f.e. \"zh\" + \"zh_CN\" + \"zh_TW\"",
                    "created": "2008-05-23T15:01:21.000+0000",
                    "updated": "2008-05-23T15:01:21.000+0000",
                    "started": "2008-05-23T15:00:00.000+0000",
                    "minutesSpent": 180
                }
            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/11287",
                    "filename": "Zend_Translate_Adapter.diff",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=haggy",
                        "name": "haggy",
                        "displayName": "Ralf Barth",
                        "active": true
                    },
                    "created": "2008-05-08T06:47:33.000+0000",
                    "size": 955,
                    "mimeType": "application\/octet-stream",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/11287\/Zend_Translate_Adapter.diff"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10174",
                    "id": 10174,
                    "description": "Mini Release",
                    "name": "1.5.1",
                    "userReleaseDate": "25\/Mar\/08",
                    "archived": true,
                    "releaseDate": "2008-03-25",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10099",
                    "id": 10099,
                    "name": "Zend_Translate",
                    "description": "Provides translation functionality, based on standards such as TMX and Gettext.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/20809",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Possible cause (from the german zfforum):\n-----------------------------------\nIch habe das Ganze dann mit dem Debugger durchlaufen und das Problem liegt meiner Meinung nach im Code von Zend\/Translate\/Adapter.php in den Zeilen 124-127:\n\nWieso wird hier (string) $info anstatt einfach $info->getFilename() verwendet? Durch (string) $info steht bei mir der komplette Pfadname (application\/languages\/default\/de.mo) in $filename, wodurch die \u00dcberpr\u00fcfung Zend_Locale::isLocale($filename) logischerweise false zur\u00fcckliefert. Dadurch wird dann die Standardsprache gew\u00e4hlt und die messageIds werden immer durch die, der zuletzt verarbeiteten Datei \u00fcberschrieben.\n\nIn der englischen Dokumentation habe ich ausserdem gelesen, dass sich die Sprache auch anhand der Dateiendung identifizieren l\u00e4sst. Im obenstehenden Code jedoch wird die Dateiendung einfach entfernt ohne diese zu beachten.\n-----------------------------------\n\nWill be reviewed...",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2008-04-11T05:19:07.000+0000",
                    "updated": "2008-04-11T05:19:07.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/21609",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=haggy",
                        "name": "haggy",
                        "displayName": "Ralf Barth",
                        "active": true
                    },
                    "body": "UPDATE:\n\nDirectory scanning also seems to be broken. My directory structure is as follows:\n\n{noformat}\nlanguages\/\nlanguages\/de_DE\nlanguages\/de_DE\/LC_MESSAGES\nlanguages\/de_DE\/LC_MESSAGES\/MailAdmin.mo\nlanguages\/de_DE\/LC_MESSAGES\/MailAdmin.po\nlanguages\/en_US\nlanguages\/en_US\/LC_MESSAGES\nlanguages\/en_US\/LC_MESSAGES\/MailAdmin.mo\nlanguages\/en_US\/LC_MESSAGES\/MailAdmin.po\n{noformat}\n\nZend_Translate failes to retrieve locales in scan path. I'm invoking Zend_Translate this way:\n{code}\n$translate = new Zend_Translate('gettext', \n    '..\/application\/languages', null, array('scan' => Zend_Translate::LOCALE_DIRECTORY));\n{code}\n\nDebugging paths while scanning gives the following paths:\n{noformat}\nstring(30) \"..\/application\/languages\/de_DE\"\nstring(42) \"..\/application\/languages\/de_DE\/LC_MESSAGES\"\nstring(30) \"..\/application\/languages\/en_US\"\nstring(42) \"..\/application\/languages\/en_US\/LC_MESSAGES\"\n{noformat}\n\nwhich obviously don't match any locales. This happens in line 116 of Zend_Translate_Adapter.\n(string)$info is tested against Zend_Locale::isLocale() which returns false. Also there's the somewhat\n'suspicious' line 114:\n{code}\n$directory = $info->getPath();\n{code}\n\nfor which i do not find any use since $directory is not used in throughout the whole method.\n\nI don't know if this issue is related to PHP or Zend_Translate. I'm using PHP 5.2.6\n{noformat}\nPHP 5.2.6-0.dotdeb.1 with Suhosin-Patch 0.9.6.2 (cli) (built: May  2 2008 09:37:37) \nCopyright (c) 1997-2008 The PHP Group\nZend Engine v2.2.0, Copyright (c) 1998-2008 Zend Technologies\n    with Suhosin v0.9.23, Copyright (c) 2007, by SektionEins GmbH\n{noformat}\nand Zend Framework v.1.5.1\n\nHope this helps a bit - Thanks!\nRalf.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=haggy",
                        "name": "haggy",
                        "displayName": "Ralf Barth",
                        "active": true
                    },
                    "created": "2008-05-08T05:49:07.000+0000",
                    "updated": "2008-05-08T05:49:07.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/21610",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=haggy",
                        "name": "haggy",
                        "displayName": "Ralf Barth",
                        "active": true
                    },
                    "body": "Proposed patch for Zend\/Translate\/Adapter.php (solves the directory scan issue).\n\nBeware of your php version - 5.2.2 introduced a new method SPLFileInfo::getBasename() \nwhich is used in the patch. A fallback for versions < 5.2.2 is included but commented out.\n\nThis is a *quick hack* which is not tested thoroughly, but worksforme :-)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=haggy",
                        "name": "haggy",
                        "displayName": "Ralf Barth",
                        "active": true
                    },
                    "created": "2008-05-08T06:47:34.000+0000",
                    "updated": "2008-05-08T06:47:34.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/21811",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Ralf, the problem you have, has nothing to do with the mentioned issue.\n\nYour problem was already fixed on 08.April and duplicates a closed issue.\nYour patch is not relevant to this problem.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2008-05-18T09:53:12.000+0000",
                    "updated": "2008-05-18T09:53:12.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/21862",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=haggy",
                        "name": "haggy",
                        "displayName": "Ralf Barth",
                        "active": true
                    },
                    "body": "So would you please be so kind to point me to the right issue - because i simply can't find it.\nIf you meant ZF-3215, this simply does not solve the issue because resetting the internal file\nstack is not my problem...",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=haggy",
                        "name": "haggy",
                        "displayName": "Ralf Barth",
                        "active": true
                    },
                    "created": "2008-05-21T03:16:52.000+0000",
                    "updated": "2008-05-21T03:16:52.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/21863",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=haggy",
                        "name": "haggy",
                        "displayName": "Ralf Barth",
                        "active": true
                    },
                    "body": "After a quick check in ZF 1.5.2, the directory scanning is still broken - has your mentioned issue\nbeen merged with 1.5.2 ?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=haggy",
                        "name": "haggy",
                        "displayName": "Ralf Barth",
                        "active": true
                    },
                    "created": "2008-05-21T03:30:35.000+0000",
                    "updated": "2008-05-21T03:30:35.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/21904",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Increased scanning on degraded locales\nAdded tests for file and directory scanning",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2008-05-23T15:00:03.000+0000",
                    "updated": "2008-05-23T15:00:03.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24134",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "Updating for the 1.6.0 release.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2008-09-02T10:39:31.000+0000",
                    "updated": "2008-09-02T10:39:31.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3070\/transitions"
}