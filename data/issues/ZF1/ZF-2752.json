{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2752",
    "key": "ZF-2752",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Registry needs an unset method."
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2752\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/2",
                "name": "Won't Fix"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2008-03-07T16:57:30.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bouzafr",
                "name": "bouzafr",
                "displayName": "Roberto Bouza",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-02-28T08:29:02.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2008-03-07T16:57:30.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Zend_Registry has it's own set method which uses \"offsetSet\". There is a need to sometimes delete a reference on the Registry and just assigning \"null\" to it doesn't do it.\n\nSo I think that creating a simple very basic method \"delete\" - because unset is a reserved word for PHP - we can accomplish this. I did the changes on my local code and it's working wonderful here is the little piece of code I added to Zend_Registry.php\n\n{code}\n\/**\n     * Unsetter method, basically same as offsetUnset().\n     *\n     * This method can be called from an object of type Zend_Registry, or it\n     * can be called statically.  In the latter case, it uses the default\n     * static instance stored in the class.\n     *\n     * @param string $index The location in the ArrayObject in which to unset\n     *   the value.\n     * @return void\n     *\/\n    public static function delete($index)\n    {\n        $instance = self::getInstance();\n        $instance->offsetUnset($index);\n    }\n{code}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/customFieldOption\/10040",
                "value": " Nice to Have"
            }
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2752\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=doctorrock83",
                "name": "doctorrock83",
                "displayName": "julien PAULI",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10171",
                    "id": 10171,
                    "description": "Minor Release Candidate",
                    "name": "1.5.0RC1",
                    "userReleaseDate": "26\/Feb\/08",
                    "archived": true,
                    "releaseDate": "2008-02-26",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10076",
                    "id": 10076,
                    "name": "Zend_Registry",
                    "description": "Zend_Registry uses a dynamic object to provide a means of sharing other objects between different portions of an application.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/19478",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=darby",
                        "name": "darby",
                        "displayName": "Darby Felton",
                        "active": true
                    },
                    "body": "It may be worth noting that the [Registry pattern, according to Martin Fowler|http:\/\/www.martinfowler.com\/eaaCatalog\/registry.html], does not provide the ability to remove items from the Registry. That may not mean much to us, but having a use case to explain why it's needed might help.\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=darby",
                        "name": "darby",
                        "displayName": "Darby Felton",
                        "active": true
                    },
                    "created": "2008-02-28T10:42:33.000+0000",
                    "updated": "2008-02-28T10:42:33.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/19480",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=doctorrock83",
                        "name": "doctorrock83",
                        "displayName": "julien PAULI",
                        "active": true
                    },
                    "body": "Have you tried that use case ?\n\npublic function testUnsetValueInRegistry()\n    {\n        $registry = Zend_Registry::getInstance();\n        $registry->set('foo','bar');\n        $this->assertNotNull($registry->offsetGet('foo'));\n        unset($registry['foo']);\n        $this->assertFalse($registry->offsetExists('foo'));\n    }\n\nIt actually works for me, as Zend_Registry extends ArrayObject ...",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=doctorrock83",
                        "name": "doctorrock83",
                        "displayName": "julien PAULI",
                        "active": true
                    },
                    "created": "2008-02-28T11:06:31.000+0000",
                    "updated": "2008-02-28T11:06:31.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/19487",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bouzafr",
                        "name": "bouzafr",
                        "displayName": "Roberto Bouza",
                        "active": true
                    },
                    "body": "Julien,\n\nJust to answer both comments:\n\n1.- No I haven't. Your solution is good. It works, but don't you think we should be accessing the object methods per se instead of the ArrayObject? Just to keep the abstraction level as it is. - just a thought -\n\n2.- To answer Darby, I think is worth it. Look a this example (which is the problem we are having):\n\nI'm creating a Zend_Registry and storing there a few generic objects that I need through all the application. One of this object is a Zend_Db and a Zend_Log implementation. On top of this we have a Zend_Cache object which is storing on the filesystem this registry - as a serialized item -.\n\nAs we know the Db and Log cannot be serialized because they have open descriptors to the filesystem or the DB. So this two objects on particular they need to be removed from the registry so it can be stored on the cache.\n\nNow I tried to set the variable to 'null' for my key let say $resgistry->set('db', null) and still doing this I get an error from the PDO saying it cannot be serialized (So i'm guessing some reference is being made on the ArrayObject that the null is not getting rid of) , but changing the code using offsetUnset I was able to remove that entry and the object gets stored.\n\nI hope this helps.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bouzafr",
                        "name": "bouzafr",
                        "displayName": "Roberto Bouza",
                        "active": true
                    },
                    "created": "2008-02-28T14:25:02.000+0000",
                    "updated": "2008-02-28T14:25:02.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/19490",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=doctorrock83",
                        "name": "doctorrock83",
                        "displayName": "julien PAULI",
                        "active": true
                    },
                    "body": "That's strange.\nWhen you set a null value to a named index in the registry, it will put null in it ...\n\nI just tested that and it worked. No copies are made anywhere, Zend_Registry acts by reference (and we like that behavior).\n\nThe only difference between setting null and unsetting, is that when you set null, the key word still stays in the registry with the associated value of NULL.\nWhen you unset, then both the key and the value are destroyed.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=doctorrock83",
                        "name": "doctorrock83",
                        "displayName": "julien PAULI",
                        "active": true
                    },
                    "created": "2008-02-29T02:46:55.000+0000",
                    "updated": "2008-02-29T02:46:55.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/19749",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bouzafr",
                        "name": "bouzafr",
                        "displayName": "Roberto Bouza",
                        "active": true
                    },
                    "body": "Julien,\n\nI think you can close this issue. I'm using your approach:\n\nunset($registry['db'])\n\nThis one is the one that is working fine for me.\n\nThank you.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bouzafr",
                        "name": "bouzafr",
                        "displayName": "Roberto Bouza",
                        "active": true
                    },
                    "created": "2008-03-07T15:22:25.000+0000",
                    "updated": "2008-03-07T15:22:25.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2752\/transitions"
}