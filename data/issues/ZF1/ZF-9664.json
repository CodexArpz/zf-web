{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9664",
    "key": "ZF-9664",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "ByteArray does not serialize to Zend_Amf_Value_ByteArray. Instead a string is given"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9664\/votes",
                "votes": 3,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=captaincode",
                "name": "captaincode",
                "displayName": "Josh Jensen",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-04-12T14:53:40.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-01-12T17:28:32.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I am attempting to write a flash.utils.ByteArray to a database. However, I am unable to get the ByteArray into php. All I get is a String. See the example code provided for an example. In the example I have provided, I am attempting to write an encoded jpg to a database by sending the ByteArray from flash to PHP. I have two separate functions in my service file that you can call by pressing the buttons (labels match service functions). The first savePhoto attempts to send only the ByteArray. The second (the methodology I was using when I discovered this issue) uses a custom data type that encapsulates the ByteArray as a property.\r\n\r\nEither methodology results in a string in place of the ByteArray in PHP. The first function will completely fail because I have told it to expect Zend_Amf_Value_ByteArray. The second function will fail with an error about trying to access the getData() method on a non-object (because it thinks it is a string).\r\n\r\n*Update*\r\nLoooking through the code a bit more, it appears that in Zend\/Amf\/Parse\/Deserializer.php the case for Zend_Amf_Constants::AMF3_BYTEARRAY is returning $this->readString();\r\nWhich seems to explain why strings are being returned to the php functions. Prior to revision 11731 it seems to be that case called a function that no longer exists. It used to call \"return $this->readByteArray();\". Perhaps this might be an accidental injection as the notes on that revision seem to only be about converting Dates."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9664\/watchers",
                "isWatching": false,
                "watchCount": 3
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wadearnold",
                "name": "wadearnold",
                "displayName": "Wade Arnold",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/12989",
                    "filename": "ByteArrayTest.mxml",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=captaincode",
                        "name": "captaincode",
                        "displayName": "Josh Jensen",
                        "active": true
                    },
                    "created": "2010-04-12T14:55:47.000+0000",
                    "size": 2394,
                    "mimeType": "application\/octet-stream",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/12989\/ByteArrayTest.mxml"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/12990",
                    "filename": "ComplexBARequest.as",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=captaincode",
                        "name": "captaincode",
                        "displayName": "Josh Jensen",
                        "active": true
                    },
                    "created": "2010-04-12T14:55:47.000+0000",
                    "size": 517,
                    "mimeType": "application\/octet-stream",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/12990\/ComplexBARequest.as"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/12992",
                    "filename": "ComplexBARequest.php",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=captaincode",
                        "name": "captaincode",
                        "displayName": "Josh Jensen",
                        "active": true
                    },
                    "created": "2010-04-12T14:56:38.000+0000",
                    "size": 300,
                    "mimeType": "application\/x-httpd-php",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/12992\/ComplexBARequest.php"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/13081",
                    "filename": "Deserializer.php",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=steamshift",
                        "name": "steamshift",
                        "displayName": "Andy Bennett",
                        "active": true
                    },
                    "created": "2010-05-17T08:00:23.000+0000",
                    "size": 16635,
                    "mimeType": "text\/php",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/13081\/Deserializer.php"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/12993",
                    "filename": "gateway.php",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=captaincode",
                        "name": "captaincode",
                        "displayName": "Josh Jensen",
                        "active": true
                    },
                    "created": "2010-04-12T14:56:38.000+0000",
                    "size": 276,
                    "mimeType": "application\/x-httpd-php",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/12993\/gateway.php"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/12991",
                    "filename": "j-cubed-flames2.jpg",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=captaincode",
                        "name": "captaincode",
                        "displayName": "Josh Jensen",
                        "active": true
                    },
                    "created": "2010-04-12T14:55:47.000+0000",
                    "size": 289538,
                    "mimeType": "image\/jpeg",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/12991\/j-cubed-flames2.jpg",
                    "thumbnail": "http:\/\/fw02.zend.com\/issues\/secure\/thumbnail\/12991\/_thumb_12991.png"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/12994",
                    "filename": "TestService.php",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=captaincode",
                        "name": "captaincode",
                        "displayName": "Josh Jensen",
                        "active": true
                    },
                    "created": "2010-04-12T14:56:38.000+0000",
                    "size": 2530,
                    "mimeType": "application\/x-httpd-php",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/12994\/TestService.php"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10440",
                    "id": 10440,
                    "description": "Mini Release",
                    "name": "1.10.3",
                    "userReleaseDate": "01\/Apr\/10",
                    "archived": false,
                    "releaseDate": "2010-04-01",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10350",
                    "id": 10350,
                    "name": "Zend_Amf",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/39945",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=captaincode",
                        "name": "captaincode",
                        "displayName": "Josh Jensen",
                        "active": true
                    },
                    "body": "The AS class for the custom object, the MXML file for the test application, and the image (place in a folder called assets in the root of the project folder)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=captaincode",
                        "name": "captaincode",
                        "displayName": "Josh Jensen",
                        "active": true
                    },
                    "created": "2010-04-12T14:55:47.000+0000",
                    "updated": "2010-04-12T14:55:47.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/39946",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=captaincode",
                        "name": "captaincode",
                        "displayName": "Josh Jensen",
                        "active": true
                    },
                    "body": "The matching datatype to map the complex object to, the gateway, and also the service file.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=captaincode",
                        "name": "captaincode",
                        "displayName": "Josh Jensen",
                        "active": true
                    },
                    "created": "2010-04-12T14:56:38.000+0000",
                    "updated": "2010-04-12T14:56:38.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/39948",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=captaincode",
                        "name": "captaincode",
                        "displayName": "Josh Jensen",
                        "active": true
                    },
                    "body": "Provided more clarification after some additional research.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=captaincode",
                        "name": "captaincode",
                        "displayName": "Josh Jensen",
                        "active": true
                    },
                    "created": "2010-04-12T15:18:01.000+0000",
                    "updated": "2010-04-12T15:18:01.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40505",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=steamshift",
                        "name": "steamshift",
                        "displayName": "Andy Bennett",
                        "active": true
                    },
                    "body": "I have added a readByteArray function;its just really just a copy of the readString method but wrapping wrapping the data in a Zend_Amf_Value_ByteArray object. It seems to work correctly ... ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=steamshift",
                        "name": "steamshift",
                        "displayName": "Andy Bennett",
                        "active": true
                    },
                    "created": "2010-05-17T08:00:34.000+0000",
                    "updated": "2010-05-17T08:00:34.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/49484",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rcfrias",
                        "name": "rcfrias",
                        "displayName": "Roberto Frias",
                        "active": true
                    },
                    "body": "Is there any workaround for this issue?, I am having the same problem.  There is the \"Deserializer.php\" file, but what should be done?, override another file or make some kind of reference or place it somewhere?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rcfrias",
                        "name": "rcfrias",
                        "displayName": "Roberto Frias",
                        "active": true
                    },
                    "created": "2012-01-12T17:28:32.000+0000",
                    "updated": "2012-01-12T17:28:32.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9664\/transitions"
}