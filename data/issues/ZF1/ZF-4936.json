{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4936",
    "key": "ZF-4936",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "multiple paginator instances with the same view script"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4936\/votes",
                "votes": 1,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=klassicd",
                "name": "klassicd",
                "displayName": "michael depetrillo",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-11-12T12:27:15.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-06-18T02:51:02.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "You currently have to create a new view script for every paginator instance you want to use on a single page.\n\nThis is caused by the paginator view script setting the url page parameter.   If each paginator instance uses the same view script then when you paginate one  you will paginate all.\n\nHere is the code to fix this.\n\nI would like to commit it to the trunk but I wanted someone else to review this first.\n\n{code}\nclass Paginator extends Zend_Paginator\n{\n\tpublic $pageName = 'page';\n\t\n\tpublic function getPages($scrollingStyle = null)\n\t{\n\t\t$pages = parent::getPages($scrollingStyle);\n\t\t\n\t\t$pages->pageName = $this->pageName;\n\t\t\n\t\treturn $pages;\n\t\t\n\t}\n\t\n\tpublic function setPageName($pageName)\n\t{\n\t\t$this->pageName = $pageName;\n\t}\n}\n{code}\n\n{code}\n<?php if (isset($this->previous)): ?> \n  <a href=\"<?= $this->url(array($this->pageName => $this->previous)); ?>\">&lt; Previous<\/a> | \n<?php else: ?> \n  <span class=\"disabled\">&lt; Previous<\/span> | \n<?php endif; ?> \n{code}\n\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4936\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/10000",
                "name": "Postponed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mratzloff",
                "name": "mratzloff",
                "displayName": "Matthew Ratzloff",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10251",
                    "id": 10251,
                    "description": "Mini Release",
                    "name": "1.6.2",
                    "userReleaseDate": "13\/Oct\/08",
                    "archived": false,
                    "releaseDate": "2008-10-13",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10252",
                    "id": 10252,
                    "description": "Minor Preview Release",
                    "name": "1.7 Preview Release",
                    "userReleaseDate": "13\/Oct\/08",
                    "archived": true,
                    "releaseDate": "2008-10-13",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10315",
                    "id": 10315,
                    "name": "Zend_Paginator",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/27177",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mratzloff",
                        "name": "mratzloff",
                        "displayName": "Matthew Ratzloff",
                        "active": true
                    },
                    "body": "{quote}\nThis is caused by the paginator view script setting the url page parameter. If each paginator instance uses the same view script then when you paginate one you will paginate all.\n{quote}\n\nRight. and this intentional; say you have two pagination controls, one at the top of the results and another at the bottom.  Both advance the same.\n\nI'm curious how in your scenario you would have two pagination controls controlling different data but with identical URLs.  Or maybe I'm misunderstanding.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mratzloff",
                        "name": "mratzloff",
                        "displayName": "Matthew Ratzloff",
                        "active": true
                    },
                    "created": "2008-12-09T13:23:41.000+0000",
                    "updated": "2008-12-09T13:23:41.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/27180",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=klassicd",
                        "name": "klassicd",
                        "displayName": "michael depetrillo",
                        "active": true
                    },
                    "body": "I have a page to view a user profile at \/user\/view\/id\/1\n\nOn this page I have multiple sets of data like Comments, Articles, Pictures and Friends.  \n\nIn my UserController I have code to create an sql statement for each data set.  For each sql statement I create a new instance of Zend_Paginator using the modifications above.  I give each pagination instance a unique page name.\n\nI can choose to paginate Articles to the next page at \/user\/view\/id\/1\/articlePage\/2.  This will  paginate the article data set only.\n\nI can then choose to paginate pictures to the last page at \/user\/view\/id\/1\/articlePage\/2\/picturePage\/999.  This keeps the articles on page 2 and the pictures on page 999. \n\nThe class Zend_View_Helper_Url handles all of this for me.  I can use the same view script for each pagination instance giving my site a more consistent look and feel. \n\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=klassicd",
                        "name": "klassicd",
                        "displayName": "michael depetrillo",
                        "active": true
                    },
                    "created": "2008-12-09T13:44:27.000+0000",
                    "updated": "2008-12-09T13:44:27.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/27292",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=raistlin",
                        "name": "raistlin",
                        "displayName": "Adam Kusmierz",
                        "active": true
                    },
                    "body": "You can also do it by:\n\nin Controller:\n{code}\n$sth = getPages()->pageName = 'page2';\n{code}\n\nwhere $sth is instance of Zend_Paginator\n\nNow you have $this->pageName  in you paginator view, you can only add ie.:\n{code}\n<?php if (empty($this->pageName)) $this->pageName = 'page' ?>\n{code}\nand as above:\n{code}\n<?php if (isset($this->previous)): ?> \n  <a href=\"<?= $this->url(array($this->pageName => $this->previous)); ?>\">&lt; Previous<\/a> | \n<?php else: ?> \n  <span class=\"disabled\">&lt; Previous<\/span> | \n<?php endif; ?>\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=raistlin",
                        "name": "raistlin",
                        "displayName": "Adam Kusmierz",
                        "active": true
                    },
                    "created": "2008-12-14T13:46:32.000+0000",
                    "updated": "2008-12-14T13:46:32.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/41038",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=erubyr",
                        "name": "erubyr",
                        "displayName": "Chris Schaatsbergen",
                        "active": true
                    },
                    "body": "{quote}in Controller:\r\n\r\n{code}$sth = getPages()->pageName = 'page2';{code}{quote}\r\n\r\nI assume you meant\r\n{code}$sth->getPages()->pageName = 'page2';{code}\r\nwhich actually works quite well.\r\n\r\nThe correct items are subtracted from the set, but for some reason the pagination controls seem to disagree. As yet I am unable to convince them it is not first page any more....\r\n\r\n{code}\r\nEmployees\r\nLast name \tFirst name \tType \t\tLocation\r\nTest \t\tTwentyeight \tNon Admin \tOldenburg \tdelete\r\nTest \t\tSixtynine \tNon Admin \tOldenburg \tdelete\r\nTest \tThirty \tNon Admin \tOldenburg \tdelete\r\nadd\r\n1 - 10 of 33 First | < Previous | Next > | Last\r\n{code}\r\nThose are the final 3 records (after having clicked on last) but the paginator controls still think the first 10 are shown, so first and previous are disabled, next and last are enabled. Will continue to look into it.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=erubyr",
                        "name": "erubyr",
                        "displayName": "Chris Schaatsbergen",
                        "active": true
                    },
                    "created": "2010-06-18T02:29:30.000+0000",
                    "updated": "2010-06-18T02:29:30.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/41041",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=erubyr",
                        "name": "erubyr",
                        "displayName": "Chris Schaatsbergen",
                        "active": true
                    },
                    "body": "And I found where I went wrong, getPages() uses the currentpagenumber, which I set after calling the getPages function....... Now it works brilliantly, thanks!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=erubyr",
                        "name": "erubyr",
                        "displayName": "Chris Schaatsbergen",
                        "active": true
                    },
                    "created": "2010-06-18T02:51:02.000+0000",
                    "updated": "2010-06-18T02:51:02.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4936\/transitions"
}