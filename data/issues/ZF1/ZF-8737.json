{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8737",
    "key": "ZF-8737",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "UTF-8 characters mangled"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8737\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2010-05-25T13:35:21.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bt903",
                "name": "bt903",
                "displayName": "Bob Thomas",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-01-07T04:58:11.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-05-25T13:35:22.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "UTF-8 characters get mangled\r\n\r\n-------------------------------------------------------------------------\r\nDirect URL to status:\r\n      http:\/\/twitter.com\/jamonpodcast\/status\/7245855505\r\n      \r\n      Shows a non-english post with UTF-8 characters (the upside down exclaimation and the N with tidle over)\r\n      \r\n-------------------------------------------------------------------------\r\n\r\nDirect curl request correct shows &# represenation of UTF-8 characters\r\n\r\n\r\n# curl -u username:password  http:\/\/twitter.com\/statuses\/show\/7245855505.xml\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<status>\r\n  <created_at>Thu Dec 31 20:03:04 +0000 2009<\/created_at>\r\n  <id>7245855505<\/id>\r\n  <text>&#161;&#161;&#161;&#161;&#161;&#161;&#161;&#161;&#161;&#161;   FELIZ A&#209;O 2010 !!!!!!!!!! http:\/\/fb.me\/3V83Gdr<\/text>\r\n  <source>&lt;a href=&quot;http:\/\/www.facebook.com\/twitter&quot; rel=&quot;nofollow&quot;&gt;Facebook&lt;\/a&gt;<\/source>\r\n  <truncated>false<\/truncated>\r\n  <in_reply_to_status_id><\/in_reply_to_status_id>\r\n  <in_reply_to_user_id><\/in_reply_to_user_id>\r\n  <favorited>false<\/favorited>\r\n  <in_reply_to_screen_name><\/in_reply_to_screen_name>\r\n  <user>\r\n...user info...\r\n  <\/user>\r\n  <geo\/>\r\n<\/status>\r\n\r\n\r\n------------------------------------------------------------------------\r\nThe following script shows the manged UTF-8 characters in [text] \r\n\r\n================ twitter.php =================\r\n<?php\r\n\r\nrequire \"Zend\/Service\/Twitter.php\";\r\n$twitter = new Zend_Service_Twitter('username', 'password');\r\n$response = $twitter->status->show(7245855505);\r\nprint_r($response);\r\n\r\n==============================================\r\n\r\n\r\n# php twitter.php\r\nZend_Rest_Client_Result Object\r\n(\r\n    [_sxml:protected] => SimpleXMLElement Object\r\n        (\r\n            [created_at] => Thu Dec 31 20:03:04 +0000 2009\r\n            [id] => 7245855505\r\n            [text] => \u00c2\u00a1\u00c2\u00a1\u00c2\u00a1\u00c2\u00a1\u00c2\u00a1\u00c2\u00a1\u00c2\u00a1\u00c2\u00a1\u00c2\u00a1\u00c2\u00a1   FELIZ A\u00c3O 2010 !!!!!!!!!! http:\/\/fb.me\/3V83Gdr\r\n            [source] => <a href=\"http:\/\/www.facebook.com\/twitter\" rel=\"nofollow\">Facebook<\/a>\r\n            [truncated] => false\r\n            [in_reply_to_status_id] => SimpleXMLElement Object\r\n                (\r\n                )\r\n\r\n            [in_reply_to_user_id] => SimpleXMLElement Object\r\n                (\r\n                )\r\n\r\n            [favorited] => false\r\n            [in_reply_to_screen_name] => SimpleXMLElement Object\r\n                (\r\n                )\r\n\r\n            [user] => SimpleXMLElement Object\r\n                (\r\n            ... user info...                )\r\n\r\n            [geo] => SimpleXMLElement Object\r\n                (\r\n                )\r\n        )\r\n)"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8737\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/6",
                "name": "Closed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sidhighwind",
                "name": "sidhighwind",
                "displayName": "Jon Whitcraft",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/12589",
                    "filename": "post.jpg",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bt903",
                        "name": "bt903",
                        "displayName": "Bob Thomas",
                        "active": true
                    },
                    "created": "2010-01-07T05:04:19.000+0000",
                    "size": 67986,
                    "mimeType": "image\/jpeg",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/12589\/post.jpg",
                    "thumbnail": "http:\/\/fw02.zend.com\/issues\/secure\/thumbnail\/12589\/_thumb_12589.png"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10390",
                    "id": 10390,
                    "description": "Mini Release",
                    "name": "1.9.6",
                    "userReleaseDate": "24\/Nov\/09",
                    "archived": false,
                    "releaseDate": "2009-11-24",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10370",
                    "id": 10370,
                    "name": "Zend_Service_Twitter",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37477",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "body": "Are you on trunk?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "created": "2010-01-07T05:01:11.000+0000",
                    "updated": "2010-01-07T05:01:11.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37478",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bt903",
                        "name": "bt903",
                        "displayName": "Bob Thomas",
                        "active": true
                    },
                    "body": "Image shows original posting with correct UTF-8 character display",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bt903",
                        "name": "bt903",
                        "displayName": "Bob Thomas",
                        "active": true
                    },
                    "created": "2010-01-07T05:04:19.000+0000",
                    "updated": "2010-01-07T05:04:19.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37479",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bt903",
                        "name": "bt903",
                        "displayName": "Bob Thomas",
                        "active": true
                    },
                    "body": "No",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bt903",
                        "name": "bt903",
                        "displayName": "Bob Thomas",
                        "active": true
                    },
                    "created": "2010-01-07T05:05:40.000+0000",
                    "updated": "2010-01-07T05:05:40.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37481",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bt903",
                        "name": "bt903",
                        "displayName": "Bob Thomas",
                        "active": true
                    },
                    "body": "I have run the process using the latest trunk and confirm the issue is NOT fixed.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bt903",
                        "name": "bt903",
                        "displayName": "Bob Thomas",
                        "active": true
                    },
                    "created": "2010-01-07T05:54:03.000+0000",
                    "updated": "2010-01-07T05:54:03.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37553",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bt903",
                        "name": "bt903",
                        "displayName": "Bob Thomas",
                        "active": true
                    },
                    "body": "Any thoughts - happy to do some debugging with some guidance\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bt903",
                        "name": "bt903",
                        "displayName": "Bob Thomas",
                        "active": true
                    },
                    "created": "2010-01-11T02:05:59.000+0000",
                    "updated": "2010-01-11T02:05:59.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37559",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=hellonearthis",
                        "name": "hellonearthis",
                        "displayName": "Brett Cooper",
                        "active": true
                    },
                    "body": "It works for me.\r\n\r\nCheck your browser and server are doing utf-8\r\n\r\nI can view #twitterart no worries",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=hellonearthis",
                        "name": "hellonearthis",
                        "displayName": "Brett Cooper",
                        "active": true
                    },
                    "created": "2010-01-11T05:54:41.000+0000",
                    "updated": "2010-01-11T05:54:41.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37565",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bt903",
                        "name": "bt903",
                        "displayName": "Bob Thomas",
                        "active": true
                    },
                    "body": "Hi Brett,\r\n\r\nAre you seeing #twitterart in your browser directly or via the Zend_Service_Twitter PHP library output as described above?\r\n\r\nRegards\r\nBob",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bt903",
                        "name": "bt903",
                        "displayName": "Bob Thomas",
                        "active": true
                    },
                    "created": "2010-01-11T08:42:10.000+0000",
                    "updated": "2010-01-11T08:42:10.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37567",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=hellonearthis",
                        "name": "hellonearthis",
                        "displayName": "Brett Cooper",
                        "active": true
                    },
                    "body": "Hi Bob,\r\n\r\nI use the zend_Service_Twitter calls and after authenticating I do this\r\n\r\n$id =7245855505;\r\n$timeline = $twitter->statusShow($id);\r\nprint $timeline->text;\r\n\r\n\r\nwhen I do a print_r ($timeline);\r\nI don't see deformed utf-8 text.\r\n\r\nMy page html header  has this meta tag \r\n<meta http-equiv=\"Content-Type\" content=\"text\/html;charset=UTF-8\" \/>\r\n\r\nAnd on my xampp server I have changed the php.ini file to use UTF-8 by default\r\n\r\n; PHP's built-in default is text\/html\r\ndefault_mimetype = \"text\/html\"\r\ndefault_charset = \"UTF-8\"",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=hellonearthis",
                        "name": "hellonearthis",
                        "displayName": "Brett Cooper",
                        "active": true
                    },
                    "created": "2010-01-11T10:43:29.000+0000",
                    "updated": "2010-01-11T10:43:29.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37577",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sidhighwind",
                        "name": "sidhighwind",
                        "displayName": "Jon Whitcraft",
                        "active": true
                    },
                    "body": "I don't see where the problem is.  Currently all that is done is the result object is returned with what ever encoding is set and I think that's the way it should be as pointed out by Brett Cooper.\r\n\r\nI'll run this by Matthew to get Zend view on it.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sidhighwind",
                        "name": "sidhighwind",
                        "displayName": "Jon Whitcraft",
                        "active": true
                    },
                    "created": "2010-01-11T14:26:02.000+0000",
                    "updated": "2010-01-11T14:26:02.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37672",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bt903",
                        "name": "bt903",
                        "displayName": "Bob Thomas",
                        "active": true
                    },
                    "body": "Hello all,\r\n\r\nFirstly, thank you for checking this.\r\n\r\nI must apologize as I have found the problem and its now fixed, so no issue with the libraries.\r\n\r\nThere were two problems:\r\n1. Internally, I was using htmlentities on the text field before saving the data to the database, but without specifying the character set, so essentially I was using the default charset of ISO-8859-1.  This caused the original corruption I was seeing in the database itself (not shown here).\r\n\r\n2. In my efforts in putting the above case together (and you'll note not using htmlentities at all), I was echoing the result in a putty ssh window, which unfortunately also defaults to ISO-8859-1, so I was seeing the corruption again which made me think it was the library processing of the twitter status.  Rechecking the tests above from your feedback, I just happened to be using an iMac whose shell terminal defaults to UTF8 and the problem magically disappeared - it was then just a matter of debugging the difference between putty and mac.\r\n\r\nThanks for your efforts - this case can be closed as a non-issue.\r\n\r\nRegards\r\nBob",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bt903",
                        "name": "bt903",
                        "displayName": "Bob Thomas",
                        "active": true
                    },
                    "created": "2010-01-13T08:14:39.000+0000",
                    "updated": "2010-01-13T08:14:39.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8737\/transitions"
}