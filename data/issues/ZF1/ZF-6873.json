{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6873",
    "key": "ZF-6873",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Dijit parsing before store creation results in FilteringSelect and ComboBox dijits not working properly."
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6873\/votes",
                "votes": 1,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=denis.baklikov",
                "name": "denis.baklikov",
                "displayName": "Denis Baklikov",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-06-01T07:16:17.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-05-09T16:12:22.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "If a ComboBox or FilteringSelect element is parsed before its store has been instantiated, it won't use the store.  In previous versions of ZF, the ordering of dojo.addOnLoad functions put store creation before dijit parsing.  In 1.7.6, dijits are parsed first (I believe this is because of [#ZF-4587]).  This means forms using ComboBoxes and FilteringSelects which used to work in 1.7.5 no longer work correctly.\r\n\r\nThe following code, produced by 1.7.6 does _not_ work:\r\n\r\n{code}\r\ndojo.require(\"custom.AutocompleteReadStore\");\r\ndojo.require(\"dijit.form.FilteringSelect\");\r\ndojo.require(\"dijit.form.Form\");\r\ndojo.require(\"dojo.parser\");\r\ndojo.addOnLoad(function() {\r\n    dojo.forEach(zendDijits, function(info) {\r\n        var n = dojo.byId(info.id);\r\n        if (null != n) {\r\n            dojo.attr(n, dojo.mixin({ id: info.id }, info.params));\r\n        }\r\n    });\r\n    dojo.parser.parse();\r\n});\r\ndojo.addOnLoad(function() {\r\n    autocompleter = new custom.AutocompleteReadStore({\"url\":\"http:\\\/\\\/foo.com\\\/userautocomplete\",\"requestMethod\":\"get\"});\r\n});\r\nvar autocompleter;\r\nvar zendDijits = [{\"id\":\"author_id\",\"params\":{\"store\":\"autocompleter\",\"dojoType\":\"dijit.form.FilteringSelect\"}},{\"id\":\"the_form\",\"params\":{\"dojoType\":\"dijit.form.Form\"}}];\r\n{code}\r\n\r\nThe following, created by 1.7.5, however, _does_ work:\r\n\r\n{code}\r\ndojo.require(\"custom.AutocompleteReadStore\");\r\ndojo.require(\"dijit.form.FilteringSelect\");\r\ndojo.require(\"dijit.form.Form\");\r\ndojo.require(\"dojo.parser\");\r\ndojo.addOnLoad(function() {\r\n    autocompleter = new custom.AutocompleteReadStore({\"url\":\"http:\\\/\\\/foo.com\\\/userautocomplete\",\"requestMethod\":\"get\"});\r\n});\r\ndojo.addOnLoad(function() {\r\n    dojo.forEach(zendDijits, function(info) {\r\n        var n = dojo.byId(info.id);\r\n        if (null != n) {\r\n            dojo.attr(n, dojo.mixin({ id: info.id }, info.params));\r\n        }\r\n    });\r\n    dojo.parser.parse();\r\n});\r\nvar autocompleter;\r\nvar zendDijits = [{\"id\":\"author_id\",\"params\":{\"store\":\"autocompleter\",\"dojoType\":\"dijit.form.FilteringSelect\"}},{\"id\":\"the_form\",\"params\":{\"dojoType\":\"dijit.form.Form\"}}];\r\n{code}\r\n\r\nBoth examples result from the following addition to a Zend_Dojo_Form:\r\n\r\n{code}\r\n$author_fld = new Zend_Dojo_Form_Element_FilteringSelect( \r\n\t\t\t\t'author_id',\r\n\t\t\t\tarray(\r\n\t\t\t\t    'label'     => 'Author:',\r\n\t\t\t\t\r\n\t\t\t\t    \/\/ The javascript identifier for the data store:\r\n\t\t\t\t    'storeId'   => 'autocompleter',\r\n\t\t\t\t\r\n\t\t\t\t    \/\/ The class type for the data store:\r\n\t\t\t\t    'storeType' => 'custom.AutocompleteReadStore',\r\n\t\t\t\t\r\n\t\t\t\t    \/\/ Parameters to use when initializing the data store:\r\n\t\t\t\t    'storeParams' => array(\r\n\t\t\t\t        'url'           => 'http:\/\/foo.com\/userautocomplete',\r\n\t\t\t\t        'requestMethod' => 'get',\r\n\t\t\t\t    ),\r\n\t\t\t));\r\n\t\t\t\r\n$form->addElement( $author_fld );\r\n{code}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6873\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-6018",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6018",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10290",
                    "id": 10290,
                    "description": "Mini Release",
                    "name": "1.7.6",
                    "userReleaseDate": "02\/Mar\/09",
                    "archived": false,
                    "releaseDate": "2009-03-02",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10311",
                    "id": 10311,
                    "name": "Zend_Dojo",
                    "description": "Dojo integration with Zend Framework",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31526",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=denis.baklikov",
                        "name": "denis.baklikov",
                        "displayName": "Denis Baklikov",
                        "active": true
                    },
                    "body": "Hello,\n\nI have found out that issue appears when DOJO loads from CDN.\nIt works OK, if we are using local version.\n\nI have modified code, by adding to store initialization to addOnLoad method, and my website start to work properly.\n\nCould you please check it?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=denis.baklikov",
                        "name": "denis.baklikov",
                        "displayName": "Denis Baklikov",
                        "active": true
                    },
                    "created": "2009-06-01T07:38:14.000+0000",
                    "updated": "2009-06-01T07:38:14.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6873\/transitions"
}