{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5949",
    "key": "ZF-5949",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "When connectivity is down, it fails with fatal non-object error"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5949\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10310",
                    "id": 10310,
                    "description": "Mini Release",
                    "name": "1.8.1",
                    "userReleaseDate": "12\/May\/09",
                    "archived": false,
                    "releaseDate": "2009-05-12",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-04-02T16:09:03.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=peter.kehl",
                "name": "peter.kehl",
                "displayName": "Peter Kehl",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-03-05T05:36:35.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-04-02T16:09:02.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "In short: If network connectivity is down *after* you got Zend_Gdata_Gapps service with valid authentication credentials, then the next Google request fails and throws a fatal error rather than a nice Zend exception.\n\nThat can happen e.g. in batch processing, when you use Zend_Gdata_Gapps over several actions, and suddenly your comms go down.\n\nHow to duplicate the problem:\n<?php\nset_include_path( get_include_path() . PATH_SEPARATOR . dirname(__FILE__). \"\/..\/library\" );\nrequire_once 'Zend\/Loader.php';\nZend_Loader::loadClass('Zend_Gdata_ClientLogin');\nZend_Loader::loadClass('Zend_Gdata_Gapps');\n\n$client = Zend_Gdata_ClientLogin::getHttpClient(\"GOOGLE_SERVICE_EMAIL\", \"GOOGLE_SERVICE_PASS\", Zend_Gdata_Gapps::AUTH_SERVICE_NAME);\necho \"\\nAuthenticated ok. NOW DISCONNECT the network cable\";\nsleep( 20 );\n$service = new Zend_Gdata_Gapps($client, \"GOOGLE_DOMAIN\");\n\n$service->createUser(\n\t'sleepy.smallelephant',\n\t'Small Elephant', 'Sleepy', 'very secret password', null\n);\n?>\n\nTrace:\nFatal error: Call to a member function getBody() on a non-object in \/Users\/peterk\/google.mytbwa.com\/trunk\/google_gateway\/library\/Zend\/Gdata\/Gapps.php on line 151\n\nCall Stack:\n    0.0051     239216   1. {main}() \/Users\/peterk\/google.mytbwa.com\/trunk\/google_gateway\/action\/process.php:0\n    0.0901    3633944   2. process_action_set_status() \/Users\/peterk\/google.mytbwa.com\/trunk\/google_gateway\/action\/process.php:745\n    0.0901    3634496   3. process_action() \/Users\/peterk\/google.mytbwa.com\/trunk\/google_gateway\/action\/process.php:307\n   10.0916    3643920   4. Zend_Gdata_Gapps->retrieveUser() \/Users\/peterk\/google.mytbwa.com\/trunk\/google_gateway\/action\/process.php:427\n   10.0952    3761512   5. Zend_Gdata_Gapps->getUserEntry() \/Users\/peterk\/google.mytbwa.com\/trunk\/google_gateway\/library\/Zend\/Gdata\/Gapps.php:754\n   10.0953    3761784   6. Zend_Gdata->getEntry() \/Users\/peterk\/google.mytbwa.com\/trunk\/google_gateway\/library\/Zend\/Gdata\/Gapps.php:465\n   10.0953    3762072   7. Zend_Gdata_App->getEntry() \/Users\/peterk\/google.mytbwa.com\/trunk\/google_gateway\/library\/Zend\/Gdata.php:186\n   10.0953    3762072   8. Zend_Gdata_App->importUrl() \/Users\/peterk\/google.mytbwa.com\/trunk\/google_gateway\/library\/Zend\/Gdata\/App.php:219\n   10.0953    3763024   9. Zend_Gdata_Gapps->get() \/Users\/peterk\/google.mytbwa.com\/trunk\/google_gateway\/library\/Zend\/Gdata\/App.php:718\n   10.1105    4222608  10. Zend_Gdata_Gapps::throwServiceExceptionIfDetected() \/Users\/peterk\/google.mytbwa.com\/trunk\/google_gateway\/library\/Zend\/Gdata\/Gapps.php:205\n\nProposed solution:\nIn library\/Zend\/Gdata\/Gapps.php modify throwServiceExceptionIfDetected($e) to use something like following:\n\t$response= $e->getResponse();\n            if( $response ) {\n\t\t\t\t$error = new Zend_Gdata_Gapps_ServiceException();\n\t\t\t\t$error->importFromString( $response->getBody() );\n\t\t\t\t\/\/var_dump(debug_backtrace());\n\t\t\t\t\/\/debug_print_backtrace();\n\t\t\t\tthrow $error;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthrow new Exception( \"Google connection is down or some other serious error.\" );\n\t\t\t}\n\n\nThis is in version 1.7.4 but throwServiceExceptionIfDetected() is same in 1.7.6 so most likely there's the same problem in 1.7.6 and the fix should work for 1.7.6 too.\n\nI've signed the contributor's agreement so it's OK for you to use any of the above. Thx"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5949\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tjohns",
                "name": "tjohns",
                "displayName": "Trevor Johns",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10280",
                    "id": 10280,
                    "description": "Mini Release",
                    "name": "1.7.4",
                    "userReleaseDate": "02\/Feb\/09",
                    "archived": false,
                    "releaseDate": "2009-02-02",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10088",
                    "id": 10088,
                    "name": "Zend_Gdata",
                    "description": "Class interface to Google Data API's.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29325",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tjohns",
                        "name": "tjohns",
                        "displayName": "Trevor Johns",
                        "active": true
                    },
                    "body": "Patch sent to [~jhartmann] for review:\n\nhttp:\/\/codereview.appspot.com\/24079\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tjohns",
                        "name": "tjohns",
                        "displayName": "Trevor Johns",
                        "active": true
                    },
                    "created": "2009-03-07T11:38:44.000+0000",
                    "updated": "2009-03-07T11:38:44.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29891",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tjohns",
                        "name": "tjohns",
                        "displayName": "Trevor Johns",
                        "active": true
                    },
                    "body": "Committed to trunk as r14612.\nCommitted to release-1.7 as r14613.\nMarking as fixed as of the next mini release.\n\n{noformat}\ncommit e882d1eb739c7a77dfbaa28bcea7254bae715ef6\nAuthor: tjohns <tjohns@44c647ce-9c0f-0410-b52a-842ac1e357ba>\nDate:   Thu Apr 2 22:52:29 2009 +0000\n\n    ZF-5949: Update Zend_Gdata_Gapps to throw an exception (rather than a fatal\n    error) when connectivity is lost.\n    \n    Review URL: http:\/\/codereview.appspot.com\/24079\n    \n    git-svn-id: http:\/\/framework.zend.com\/svn\/framework\/standard\/trunk@14612 44c647ce-9c0f-0410-b52a-842ac1e357ba\n\ncommit ac3147eb8d9be1928ffb2bbfb4f1ef3586105cf2\nAuthor: tjohns <tjohns@44c647ce-9c0f-0410-b52a-842ac1e357ba>\nDate:   Thu Apr 2 23:04:12 2009 +0000\n\n    Merging r14612 from trunk to release-1.7.\n    \n    ZF-5949: Update Zend_Gdata_Gapps to throw an exception (rather than a fatal\n    error) when connectivity is lost.\n    \n    Review URL: http:\/\/codereview.appspot.com\/24079\n    \n    git-svn-id: http:\/\/framework.zend.com\/svn\/framework\/standard\/branches\/release-1.7@14613 44c647ce-9c0f-0410-b52a-842ac1e357ba\n{noformat}\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tjohns",
                        "name": "tjohns",
                        "displayName": "Trevor Johns",
                        "active": true
                    },
                    "created": "2009-04-02T16:08:49.000+0000",
                    "updated": "2009-04-02T16:08:49.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5949\/transitions"
}