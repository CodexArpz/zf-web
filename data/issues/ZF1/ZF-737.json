{
    "expand": "html",
    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-737",
    "key": "ZF-737",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "add*(), sub*() yield inconsistent results"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-737\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/version\/10020",
                    "id": 10020,
                    "description": "Preview Release; I18N, Acl, Auth, Session",
                    "name": "0.7.0",
                    "userReleaseDate": "18\/Jan\/07",
                    "archived": true,
                    "releaseDate": "2007-01-18",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2007-01-15T14:47:15.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                "name": "gavin",
                "displayName": "Gavin",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2007-01-10T15:44:29.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2007-07-05T14:43:39.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "The code below results in the timestamp of $date returning to its original value (i.e. no change after the 3 methods following instantiation):\n{code}\n$date = new Zend_Date(null,null,false,'en_US');\n$date->addMonth(1);\n$date->addMonth(0);\n$date->subMonth(1);\n{code}\n\nHowever, nearly identical code for other units, such as weeks, produce surprising results:\n{code}\n$date = new Zend_Date(null,null,false,'en_US');\n$date->addWeek(1);\n$date->addWeek(0);\n$date->subWeek(1);\n{code}\n\nFor more inconsistencies with add*(), and sub*() methods for other units, like days and hours, see the tests in:\n incubator\/tests\/Zend\/DatePretest.php\n\nand the output below for SVN revision 2698:\n{code}\nphpunit Zend_DatePreTest\nX-Powered-By: PHP\/5.1.6\nContent-type: text\/html\n\nPHPUnit 3.0.0 by Sebastian Bergmann.\n\nTimestamp = 0 new Zend_Date(0, Zend_Date::TIMESTAMP, true)\nLine#:68 1969 12 31 16:00:00\nTimestamp (GMT) = 0 new Zend_Date(0, null, false)\ntoString(null, GMT -i.e. true) = 1970 1 1 00:00:00\nTimestamp = 0 new Zend_Date(0, Zend_Date::TIMESTAMP, false)\nLine#:74 1969 12 31 16:00:00\nTimestamp (GMT) = 0 new Zend_Date(0, null, false)\ntoString(null, GMT -i.e. true) = 1970 1 1 00:00:00\nTimestamp = 0 new Zend_Date(0)\nLine#:80 1969 12 31 16:00:00\nTimestamp = 0 new Zend_Date(0, null, true)\nLine#:84 1969 12 31 16:00:00\nTimestamp = 0 new Zend_Date(0, null, false)\nLine#:88 1969 12 31 16:00:00\nTimestamp (GMT) = 0 new Zend_Date(0, null, false)\ntoString(null, GMT -i.e. true) = 1970 1 1 00:00:00\nTimestamp = -32400 new Zend_Date('7',Zend_Date::HOUR, null, false)\nLine#:95 1969 12 31 07:00:00\nTimestamp = -32400 new Zend_Date('7',Zend_Date::HOUR, null, true)\nLine#:99 1969 12 31 07:00:00\nTimestamp = 1136160000 new Zend_Date('01.01.2006', Zend_Date::DATES, Object id #71)\nLine#:104 Jan 1, 2006 4:00:00 PM\n.object(Zend_Date)#71 (4) {\n  [\"_Fractional:private\"]=>\n  int(0)\n  [\"_Precision:private\"]=>\n  int(3)\n  [\"_Date\"]=>\n  object(Zend_Date_DateObject)#69 (2) {\n    [\"_unixtimestamp:private\"]=>\n    int(1168547879)\n    [\"_timezone:private\"]=>\n    int(28800)\n  }\n  [\"_Locale:private\"]=>\n  object(Zend_Locale)#70 (2) {\n    [\"_Locale:private\"]=>\n    string(5) \"en_US\"\n    [\"_Codeset:private\"]=>\n    NULL\n  }\n}\nTimestamp date1 new Zend_Date(null,null,false,'en_US')= 1168547879\nTimestamp date4 new Zend_Date(null,null,true,'en_US') = 1168547879\nStart Time date1 new Zend_Date(null,null,false,'en_US') - toString()          : Jan 11, 2007 12:37:59 PM\nStart Time date1 new Zend_Date(null,null,false,'en_US') - toString(null,false): Jan 11, 2007 12:37:59 PM\nStart Time date1 new Zend_Date(null,null,false,'en_US') - toString(null,true) : Jan 11, 2007 8:37:59 PM\n\nStart Time date4 new Zend_Date(null,null,true,'en_US') - toString()           : Jan 11, 2007 12:37:59 PM\nStart Time date4 new Zend_Date(null,null,true,'en_US') - toString(null,false) : Jan 11, 2007 12:37:59 PM\nStart Time date4 new Zend_Date(null,null,true,'en_US') - toString(null,true)  : Jan 11, 2007 8:37:59 PM\n\nAfter addWeek(1):\nTimestamp 1 = 1169181479 ->addWeek(1)\nLine#:132 Jan 18, 2007 8:37:59 PM\nTimestamp 2 = 1169181479 ->addWeek(1,false)\nLine#:136 Jan 18, 2007 8:37:59 PM\nTimestamp 3 = 1169152679 ->addWeek(1,true)\nLine#:140 Jan 18, 2007 12:37:59 PM\n\nAfter addWeek(0):\nTimestamp 1 = 1169210279 ->addWeek(0) - should not change from above\nLine#:146 Jan 19, 2007 4:37:59 AM\nTimestamp 2 = 1169210279 ->addWeek(0,false) - should not change from above\nLine#:150 Jan 19, 2007 4:37:59 AM\nTimestamp 3 = 1169152679 ->addWeek(0,true) - should not change from above\nLine#:154 Jan 18, 2007 12:37:59 PM\n\nAfter subWeek(1):\nTimestamp 1 = 1168576679 ->subWeek(1) - should be same as start time\nLine#:160 Jan 11, 2007 8:37:59 PM\nTimestamp 2 = 1168576679 ->subWeek(1,false) - should be same as start time\nLine#:164 Jan 11, 2007 8:37:59 PM\nTimestamp 3 = 1168547879 ->subWeek(1,true) - should be same as start time\nLine#:168 Jan 11, 2007 12:37:59 PM\n\nAfter addWeek(4):\nTimestamp 1 = 1171024679 ->addWeek(4) - should be exactly start time + 4 weeks\nLine#:174 Feb 9, 2007 4:37:59 AM\nTimestamp 2 = 1171024679 ->addWeek(4,false) - should be exactly start time + 4 weeks\nLine#:178 Feb 9, 2007 4:37:59 AM\nTimestamp 3 = 1170967079->addWeek(4,true) - should be exactly start time + 4 weeks\nLine#:182 Feb 8, 2007 12:37:59 PM\n.\n------------------------------------------\nTimestamp date1 new Zend_Date(null,null,false,'en_US')= 1168547879\nTimestamp date4 new Zend_Date(null,null,true,'en_US') = 1168547879\nStart Time date1 new Zend_Date(null,null,false,'en_US') - toString()          : Jan 11, 2007 12:37:59 PM\nStart Time date1 new Zend_Date(null,null,false,'en_US') - toString(null,false): Jan 11, 2007 12:37:59 PM\nStart Time date1 new Zend_Date(null,null,false,'en_US') - toString(null,true) : Jan 11, 2007 8:37:59 PM\n\nStart Time date4 new Zend_Date(null,null,true,'en_US') - toString()           : Jan 11, 2007 12:37:59 PM\nStart Time date4 new Zend_Date(null,null,true,'en_US') - toString(null,false) : Jan 11, 2007 12:37:59 PM\nStart Time date4 new Zend_Date(null,null,true,'en_US') - toString(null,true)  : Jan 11, 2007 8:37:59 PM\n\nAfter addDay(1):\nTimestamp 1 = 1168634279 ->addDay(1)\nLine#:210 Jan 12, 2007 12:37:59 PM\nTimestamp 2 = 1168663079 ->addDay(1,false)\nLine#:214 Jan 12, 2007 8:37:59 PM\nTimestamp 3 = 1168634279 ->addDay(1,true)\nLine#:218 Jan 12, 2007 12:37:59 PM\n\nAfter addDay(0):\nTimestamp 1 = 1168634279 ->addDay(0) - should not change from above\nLine#:224 Jan 12, 2007 12:37:59 PM\nTimestamp 2 = 1168691879 ->addDay(0,false) - should not change from above\nLine#:228 Jan 13, 2007 4:37:59 AM\nTimestamp 3 = 1168634279 ->addDay(0,true) - should not change from above\nLine#:232 Jan 12, 2007 12:37:59 PM\n\nAfter subDay(1):\nTimestamp 1 = 1168547879 ->subDay(1) - should be same as start time\nLine#:238 Jan 11, 2007 12:37:59 PM\nTimestamp 2 = 1168576679 ->subDay(1,false) - should be same as start time\nLine#:242 Jan 11, 2007 8:37:59 PM\nTimestamp 3 = 1168547879 ->subDay(1,true) - should be same as start time\nLine#:246 Jan 11, 2007 12:37:59 PM\n\nAfter addDay(4):\nTimestamp 1 = 1168893479 ->addDay(4) - should be exactly start time + 4 weeks\nLine#:252 Jan 15, 2007 12:37:59 PM\nTimestamp 2 = 1168951079 ->addDay(4,false) - should be exactly start time + 4 weeks\nLine#:256 Jan 16, 2007 4:37:59 AM\nTimestamp 3 = 1168893479->addDay(4,true) - should be exactly start time + 4 weeks\nLine#:260 Jan 15, 2007 12:37:59 PM\n.\n------------------------------------------\nTimestamp date1 new Zend_Date(null,null,false,'en_US')= 1168547879\nTimestamp date4 new Zend_Date(null,null,true,'en_US') = 1168547879\nStart Time date1 new Zend_Date(null,null,false,'en_US') - toString()          : Jan 11, 2007 12:37:59 PM\nStart Time date1 new Zend_Date(null,null,false,'en_US') - toString(null,false): Jan 11, 2007 12:37:59 PM\nStart Time date1 new Zend_Date(null,null,false,'en_US') - toString(null,true) : Jan 11, 2007 8:37:59 PM\n\nStart Time date4 new Zend_Date(null,null,true,'en_US') - toString()           : Jan 11, 2007 12:37:59 PM\nStart Time date4 new Zend_Date(null,null,true,'en_US') - toString(null,false) : Jan 11, 2007 12:37:59 PM\nStart Time date4 new Zend_Date(null,null,true,'en_US') - toString(null,true)  : Jan 11, 2007 8:37:59 PM\n\nAfter addHour(1):\nTimestamp 1 = 1168580279 ->addHour(1)\nLine#:288 Jan 11, 2007 9:37:59 PM\nTimestamp 2 = 1168580279 ->addHour(1,false)\nLine#:292 Jan 11, 2007 9:37:59 PM\nTimestamp 3 = 1168551479 ->addHour(1,true)\nLine#:296 Jan 11, 2007 1:37:59 PM\n\nAfter addHour(0):\nTimestamp 1 = 1168609079 ->addHour(0) - should not change from above\nLine#:302 Jan 12, 2007 5:37:59 AM\nTimestamp 2 = 1168609079 ->addHour(0,false) - should not change from above\nLine#:306 Jan 12, 2007 5:37:59 AM\nTimestamp 3 = 1168551479 ->addHour(0,true) - should not change from above\nLine#:310 Jan 11, 2007 1:37:59 PM\n\nAfter subHour(1):\nTimestamp 1 = 1168576679 ->subHour(1) - should be same as start time\nLine#:316 Jan 11, 2007 8:37:59 PM\nTimestamp 2 = 1168576679 ->subHour(1,false) - should be same as start time\nLine#:320 Jan 11, 2007 8:37:59 PM\nTimestamp 3 = 1168547879 ->subHour(1,true) - should be same as start time\nLine#:324 Jan 11, 2007 12:37:59 PM\n\nAfter addHour(4):\nTimestamp 1 = 1168619879 ->addHour(4) - should be exactly start time + 4 weeks\nLine#:330 Jan 12, 2007 8:37:59 AM\nTimestamp 2 = 1168619879 ->addHour(4,false) - should be exactly start time + 4 weeks\nLine#:334 Jan 12, 2007 8:37:59 AM\nTimestamp 3 = 1168562279->addHour(4,true) - should be exactly start time + 4 weeks\nLine#:338 Jan 11, 2007 4:37:59 PM\n.\n------------------------------------------\nTimestamp date1 new Zend_Date(null,null,false,'en_US')= 1168547880\nTimestamp date4 new Zend_Date(null,null,true,'en_US') = 1168547880\nStart Time date1 new Zend_Date(null,null,false,'en_US') - toString()          : Jan 11, 2007 12:38:00 PM\nStart Time date1 new Zend_Date(null,null,false,'en_US') - toString(null,false): Jan 11, 2007 12:38:00 PM\nStart Time date1 new Zend_Date(null,null,false,'en_US') - toString(null,true) : Jan 11, 2007 8:38:00 PM\n\nStart Time date4 new Zend_Date(null,null,true,'en_US') - toString()           : Jan 11, 2007 12:38:00 PM\nStart Time date4 new Zend_Date(null,null,true,'en_US') - toString(null,false) : Jan 11, 2007 12:38:00 PM\nStart Time date4 new Zend_Date(null,null,true,'en_US') - toString(null,true)  : Jan 11, 2007 8:38:00 PM\n\nAfter addMonth(1):\nTimestamp 1 = 1171226280 ->addMonth(1)\nLine#:366 Feb 11, 2007 12:38:00 PM\nTimestamp 2 = 1171226280 ->addMonth(1,false)\nLine#:370 Feb 11, 2007 12:38:00 PM\nTimestamp 3 = 1171226280 ->addMonth(1,true)\nLine#:374 Feb 11, 2007 12:38:00 PM\n\nAfter addMonth(0):\nTimestamp 1 = 1171226280 ->addMonth(0) - should not change from above\nLine#:380 Feb 11, 2007 12:38:00 PM\nTimestamp 2 = 1171226280 ->addMonth(0,false) - should not change from above\nLine#:384 Feb 11, 2007 12:38:00 PM\nTimestamp 3 = 1171226280 ->addMonth(0,true) - should not change from above\nLine#:388 Feb 11, 2007 12:38:00 PM\n\nAfter subMonth(1):\nTimestamp 1 = 1168547880 ->subMonth(1) - should be same as start time\nLine#:394 Jan 11, 2007 12:38:00 PM\nTimestamp 2 = 1168547880 ->subMonth(1,false) - should be same as start time\nLine#:398 Jan 11, 2007 12:38:00 PM\nTimestamp 3 = 1168547880 ->subMonth(1,true) - should be same as start time\nLine#:402 Jan 11, 2007 12:38:00 PM\n\nAfter addMonth(4):\nTimestamp 1 = 1178915880 ->addMonth(4) - should be exactly start time + 4 weeks\nLine#:408 May 11, 2007 1:38:00 PM\nTimestamp 2 = 1178915880 ->addMonth(4,false) - should be exactly start time + 4 weeks\nLine#:412 May 11, 2007 1:38:00 PM\nTimestamp 3 = 1178915880->addMonth(4,true) - should be exactly start time + 4 weeks\nLine#:416 May 11, 2007 1:38:00 PM\n.\n\nTime: 00:01\n\n\nOK (5 tests)\n{code}\n\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-737\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/version\/10040",
                    "id": 10040,
                    "description": "Preview Release; MVC maturation, HTTP client, Gdata",
                    "name": "0.6.0",
                    "userReleaseDate": "16\/Dec\/06",
                    "archived": true,
                    "releaseDate": "2006-12-16",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/component\/10072",
                    "id": 10072,
                    "name": "Zend_Date",
                    "description": "Zend_Date is the basic library for the handling of all date, time and calendar-related issues.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12196",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=shreef",
                        "name": "shreef",
                        "displayName": "Ahmed Shreef",
                        "active": true
                    },
                    "body": "{code}\nAfter addWeek(1):\nTimestamp 1 = 1169191377 ->addWeek(1)\nLine#:149 Jan 18, 2007 11:22:57 PM\nTimestamp 2 = 1169191377 ->addWeek(1,false)\nLine#:153 Jan 18, 2007 11:22:57 PM\nTimestamp 3 = 1169162577 ->addWeek(1,true)\nLine#:157 Jan 18, 2007 3:22:57 P\n{code}\n\nall the last calls for addWeek() should have the same effect. \nbut you can notice in the last call for addWeek() we set the 2nd param [$gmt] to TRUE , which results of a different effect.\n\nanother thing, adding week is just adding 7 days [ 604800 seconds ] to the saved timestamp. so the use of the 2nd param [ $gmt ] isn't known.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=shreef",
                        "name": "shreef",
                        "displayName": "Ahmed Shreef",
                        "active": true
                    },
                    "created": "2007-01-11T18:20:32.000+0000",
                    "updated": "2007-01-11T18:20:32.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12247",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "After reworking the API and changing the tests to be API conform, all tests pass\n\nIf you expect problems please add new unit tests showing the problems and create an new issue.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2007-01-15T14:47:15.000+0000",
                    "updated": "2007-01-15T14:47:15.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-737\/transitions"
}