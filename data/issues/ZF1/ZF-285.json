{
    "expand": "html",
    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-285",
    "key": "ZF-285",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "PDO: Allow definition of attributes to pass to the PDO object, upon creation of Zend_DB object."
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issueType\/2",
                "name": "New Feature",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-285\/votes",
                "votes": 4,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/version\/10023",
                    "id": 10023,
                    "description": "Release Candidate 1",
                    "name": "1.0.0 RC1",
                    "userReleaseDate": "28\/May\/07",
                    "archived": true,
                    "releaseDate": "2007-05-28",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2007-05-15T16:06:39.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=richard",
                "name": "richard",
                "displayName": "Richard Ingham",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2006-07-25T11:46:28.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2007-07-05T14:43:16.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "The PDO object allows you to pass \"driver_options\" in its constructor. These include options like PDO::ATTR_EMULATE_PREPARES (See http:\/\/netevil.org\/node.php?nid=795), which is currently required for some operations with the PDO mysql driver. Obviously there are other options which may be useful as well.\n\nIt is possible set these options with code such as:\n{code:none}\n$db = Zend_Db::factory('pdo_mysql', array(\n\t'dbname' => 'dbname',\n\t'username' => 'username',\n\t'password' => 'password'\n));\n\n$db->quote(''); \/\/ Dummy thing to force a connection.\n$db->getConnection()->setAttribute(PDO::ATTR_EMULATE_PREPARES, true);\n{code}\nBut this involves forcing a connection which defeats the object behind delaying the creation of a connection.\n\nIt would be preferable to be able to do the following:\n{code:none}\n$db = Zend_Db::factory('pdo_mysql', array(\n\t'dbname' => 'dbname',\n\t'username' => 'username',\n\t'password' => 'password',\n\t'driver_options' => array(\n\t\tPDO::ATTR_EMULATE_PREPARES => true\n\t)\n));\n{code}\n\nand the driver options would be passed into PDO::__construct().\n(See http:\/\/uk.php.net\/manual\/en\/function.pdo-construct.php)\n\nThis relates to ZF-147\n\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-285\/watchers",
                "isWatching": false,
                "watchCount": 4
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=darby",
                "name": "darby",
                "displayName": "Darby Felton",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-1163",
                    "issue": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1163",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                },
                {
                    "issueKey": "ZF-423",
                    "issue": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-423",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/attachment\/10096",
                    "filename": "Zend_Db_Adapter_Pdo_Abstract-driver-option.diff",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=lars",
                        "name": "lars",
                        "displayName": "Lars Strojny",
                        "active": true
                    },
                    "created": "2006-08-28T11:08:51.000+0000",
                    "size": 553,
                    "mimeType": "text\/x-patch",
                    "content": "http:\/\/framework.zend.com\/issues\/secure\/attachment\/10096\/Zend_Db_Adapter_Pdo_Abstract-driver-option.diff"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/version\/10002",
                    "id": 10002,
                    "description": "Preview Release; MVC refactoring and other enhancements and fixes",
                    "name": "0.2.0",
                    "userReleaseDate": "29\/Oct\/06",
                    "archived": true,
                    "releaseDate": "2006-10-29",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/component\/10012",
                    "id": 10012,
                    "name": "Zend_Db",
                    "description": "interfaces, APIs, and adapters for various third-party data stores",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10624",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=indygreg",
                        "name": "indygreg",
                        "displayName": "Gregory Szorc",
                        "active": true
                    },
                    "body": "This is also needed for setting the PDO::MYSQL_ATTR_MAX_BUFFER_SIZE attribute, which cannot be set using PDO::setAttribute().  See PHP bug 38015 (http:\/\/bugs.php.net\/bug.php?id=38015).  Although it is possible to sub-class the adapter to pass additional parameters, this is really hacky.  Unfortunately, until this issue is corrected, that will be the only solution for MySQL users to use queries larger than 1048576 bytes.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=indygreg",
                        "name": "indygreg",
                        "displayName": "Gregory Szorc",
                        "active": true
                    },
                    "created": "2006-07-28T15:44:52.000+0000",
                    "updated": "2006-07-28T15:44:52.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10720",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "body": "-------- Original Message --------\nSubject: \tRe: [fw-general] Zend_Db and SET NAMES utf8\nDate: \tMon, 24 Jul 2006 18:30:54 +0200\nFrom: \tGunar Scholz <zf@felixdd.de>\n\nMartin Vium schrieb:\n\n> I use utf8 in my mysql database and for this i need to use the SET\n> NAMES utf8 in my bootstrap. But by doing this i loose the advantage\n> of Zend_Db not starting a connection until needed, is there a generic\n> directive for this or do i need to extend the pdo adapter?\n\nMartin,\n\nAs far as I know, there is currently no other way than to extend\nZend_Db_Adapter_Pdo_Mysql.\n\nMy solution looks like this:\n{code}\nclass Fx_Db_Adapter_PdoMysql extends Zend_Db_Adapter_Pdo_Mysql {\n  protected function _connect() {\n    if ($this->_connection)\n      return;\n\t\t\n    parent::_connect();\n\t\t\n    \/\/ please do not touch names if I don't tell you to do so\n    $this->_connection->setAttribute(PDO::ATTR_CASE, PDO::CASE_NATURAL);\n\t\t\n    $this->query('SET NAMES utf8');\n  }\n}\n{code}\nNext issue: If you don't want to name your class Zend_Db_Adapter_Pdo_...\nor Zend_Db_Adapter_..., because it's not a class provided by Zend, you\ncan't use Zend_Db::factory(). Instead you have to instantiate your\nadapter, i.e.: $db = new Fx_Db_Adapter_PdoMysql($config);",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "created": "2006-08-18T19:30:25.000+0000",
                    "updated": "2006-08-18T19:30:25.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10752",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=lars",
                        "name": "lars",
                        "displayName": "Lars Strojny",
                        "active": true
                    },
                    "body": "This is a fix for this issue. At least for the Pdo_Abstract. I'm not sure if I have to sign the legendary contribution-agreement for such a simple patch, but if it is needed I'm willing to do. Also I'm not sure if it is needed to test first with array_key_exists() if the property is given?",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=lars",
                        "name": "lars",
                        "displayName": "Lars Strojny",
                        "active": true
                    },
                    "created": "2006-08-28T11:08:51.000+0000",
                    "updated": "2006-08-28T11:08:51.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10759",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "body": "Hi Lars, yes a CLA would be most welcome, as would be additional help bug fixing the Db classes.   Whatever fix we apply, it should avoid causing \"Notice: Undefined index:  driver_options\", whenever the developer does not provide that array of driver options to the factory method.\n\nSo now we need to test if a null value for this parameter or an empty array can be used, if the developer does not include \"driver_options\".  For example,\n\n{code}\n$this->_connection = new PDO(\n     $this->_dsn(),\n     $this->_config['username'],\n     $this->_config['password'],\n     (isset($this->_config['driver_options']) ? $this->_config['driver_options'] : array())\n);\n{code}                     ",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "created": "2006-08-31T16:03:58.000+0000",
                    "updated": "2006-08-31T16:03:58.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10961",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "body": "This problem surfaces a more serious flaw in the design of the Zend_Db::factory() method.\n\nThe entire process of configuring an adapter should not be compressed into an artificial PHP array, $options, passed to the factory constructor.  Instead, a normal, object-oriented factory with real methods should provide the necessary mechanisms to configure and initialize an adapter instance.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "created": "2006-10-04T17:20:23.000+0000",
                    "updated": "2006-10-04T17:20:23.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/11082",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=lars",
                        "name": "lars",
                        "displayName": "Lars Strojny",
                        "active": true
                    },
                    "body": "OK, signed the CLA. Are there any plans to commit the patch (please use the version of Gavin Vess)?",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=lars",
                        "name": "lars",
                        "displayName": "Lars Strojny",
                        "active": true
                    },
                    "created": "2006-10-31T04:08:25.000+0000",
                    "updated": "2006-10-31T04:08:25.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/11440",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "Changing fix version to 0.8.0.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2006-11-13T15:22:37.000+0000",
                    "updated": "2006-11-13T15:22:37.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12738",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=indygreg",
                        "name": "indygreg",
                        "displayName": "Gregory Szorc",
                        "active": true
                    },
                    "body": "What's the status of this issue?  I have signed the CLA and am willing to contribute a patch.\n\nIt looks like Zend_Db_Adapter_Pdo_Abstract::_connect() needs modified to look in $_config for an array of parameters.  To me, it makes little sense for derived classes to be forced to override _connect().  PDO::__construct() takes 4 parameters.  ZF only supports 3.  It doesn't make sense for ZF, or any framework, to limit the options the end-user has.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=indygreg",
                        "name": "indygreg",
                        "displayName": "Gregory Szorc",
                        "active": true
                    },
                    "created": "2007-02-14T22:34:55.000+0000",
                    "updated": "2007-02-14T22:34:55.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12820",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "Hi Gregory, yes this issue is on the schedule for implementation in Zend Framework 0.9.  We ran out of time to implement it in ZF 0.8.  Keep in mind that implementation includes writing unit tests and documentation, so it's not as simple as just adding a line of code.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2007-02-16T17:38:05.000+0000",
                    "updated": "2007-02-16T17:38:05.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/14622",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=darby",
                        "name": "darby",
                        "displayName": "Darby Felton",
                        "active": true
                    },
                    "body": "Resolved with [SVN r4808|http:\/\/framework.zend.com\/fisheye\/changelog\/Zend_Framework\/?cs=4808].",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=darby",
                        "name": "darby",
                        "displayName": "Darby Felton",
                        "active": true
                    },
                    "created": "2007-05-15T16:06:39.000+0000",
                    "updated": "2007-05-15T16:06:39.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-285\/transitions"
}