{
    "expand": "html",
    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-881",
    "key": "ZF-881",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Validate_Hostname - UTF-8 hostnames valid?"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issueType\/3",
                "name": "Task",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-881\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/version\/10022",
                    "id": 10022,
                    "description": "Beta Release; all components feature complete for 1.0",
                    "name": "0.9.0",
                    "userReleaseDate": "17\/Mar\/07",
                    "archived": true,
                    "releaseDate": "2007-03-17",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2007-03-14T11:31:41.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=darby",
                "name": "darby",
                "displayName": "Darby Felton",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2007-02-08T14:23:36.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2007-07-05T14:43:48.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Unit tests for Zend_Validate_Hostname contain an entry for 'b\u00fcrger.de' that is considered valid (the test fails with the current default regular expressions). Either UTF-8 hostnames must be considered invalid, or we should change the default regular expressions for Zend_Validate_Hostname to allow for such hostnames as 'b\u00fcrger.de' to be considered valid."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-881\/watchers",
                "isWatching": false,
                "watchCount": 3
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                "name": "studio24",
                "displayName": "Simon R Jones",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-84",
                    "issue": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-84",
                    "type": {
                        "name": "Dependency",
                        "direction": "OUTBOUND",
                        "description": "depends on"
                    }
                },
                {
                    "issueKey": "ZF-1083",
                    "issue": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1083",
                    "type": {
                        "name": "Related",
                        "direction": "INBOUND",
                        "description": "is related to"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/attachment\/10320",
                    "filename": "Hostname.tgz",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2007-03-13T14:21:36.000+0000",
                    "size": 5753,
                    "mimeType": "application\/x-stuffit",
                    "content": "http:\/\/framework.zend.com\/issues\/secure\/attachment\/10320\/Hostname.tgz"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/attachment\/10322",
                    "filename": "HostnameTest.php",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2007-03-13T15:31:34.000+0000",
                    "size": 6472,
                    "mimeType": "application\/octet-stream",
                    "content": "http:\/\/framework.zend.com\/issues\/secure\/attachment\/10322\/HostnameTest.php"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/attachment\/10324",
                    "filename": "HostnameTestForm.php",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2007-03-14T11:37:15.000+0000",
                    "size": 3925,
                    "mimeType": "application\/octet-stream",
                    "content": "http:\/\/framework.zend.com\/issues\/secure\/attachment\/10324\/HostnameTestForm.php"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/attachment\/10323",
                    "filename": "HostnameTestStandalone.php",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2007-03-14T11:36:51.000+0000",
                    "size": 2048,
                    "mimeType": "application\/octet-stream",
                    "content": "http:\/\/framework.zend.com\/issues\/secure\/attachment\/10323\/HostnameTestStandalone.php"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/component\/10140",
                    "id": 10140,
                    "name": "Zend_Validate",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12600",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "body": "Both of the options above would produce erroneous behavior.\n\nThe correct set of permitted characters and the correct regular expression to properly identify valid and invalid hostnames depends on the TLD.\n\nIn summary, I think supporting the precise character set (and correct regular expression) permitted by each registry is a large task.  Unless we find an organization maintaining these tables of information (similar to the CLDR), I think this is currently beyond our scope for ZF 1.0.  Additionally, I would urge anyone creating an international website to consider the implications for foreigners regarding spoofing concerns, where visually identical (or almost indistinguishable) domain names might exist.\n\nFor example, consider the supported characters for the \".de\" TLD:\nhttp:\/\/www.denic.de\/en\/domains\/idns\/liste.html\n\nMore information on IDNA:\nhttp:\/\/en.wikipedia.org\/wiki\/Internationalized_domain_name\n\nBefore IDNA was adopted, we only had the following:\n\nhttp:\/\/www.icann.org\/tlds\/org\/applications\/isoc\/AppendixJ.html#JE\n\n{quote}\nE. Domain Name Character Set\n\n1. Usage\n\nThis character set will be used in places where a domain name is to be specified. It does not govern the specification of internationalised domain names, which are not authorized by the current specification.\n\n2. Definition\n\nThe rules for the format and character set of domain names are defined by the following:\n\ndot = %x2E ; \".\"\n\nalpha = %x41-5A | %x61-7A ; A-Z | a-z\n\ndigit = %x30-39 ; 0-9\n\ndash = %x2D ; \"-\"\n\ndns-char = alpha | digit | dash\n\nid-prefix = alpha | digit\n\nlabel = id-prefix [*61dns-char id-prefix]\n\nsldn = label dot label ; not to exceed 254 characters\n\nhostname = 1*(label dot) sldn; not to exceed 254 characters\n{quote}\n\nCheers,\nGavin",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "created": "2007-02-08T15:04:06.000+0000",
                    "updated": "2007-02-08T15:04:06.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12602",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=darby",
                        "name": "darby",
                        "displayName": "Darby Felton",
                        "active": true
                    },
                    "body": "[Original message|http:\/\/www.nabble.com\/forum\/ViewPost.jtp?post=8874153&framed=y&skin=16154] by [~thomas]:\n\nWell... Denic changed some months ago the hostname supported signs...\nsince then also hostnames like www.kettenz\u00fcge.de are regular hostnames.\n\nSo from this view Zend_Validate_Hostname should also support those characters.\nThere are 92 new characters which are supported....\n\nThis means DNS names with for example chinese or UTF8 charsets are not supported.\nBut all characters like \"\u00e4 \u00f6 \u00fc \u00df \u00e9 \u00ed \u00e1 \u00f3 \u00e0 \u00e8 \u00ec \u00f2\" and much more.\n\nHere is a list of all new supported chars...\nhttp:\/\/www.denic.de\/de\/domains\/idns\/liste.html\n\nGreetings\nThomas\n(I18N Team Leader) ",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=darby",
                        "name": "darby",
                        "displayName": "Darby Felton",
                        "active": true
                    },
                    "created": "2007-02-08T15:16:13.000+0000",
                    "updated": "2007-02-08T15:16:13.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12603",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "body": "{quote}So from this view Zend_Validate_Hostname should also support those characters.{quote}\n\n.. only for the \".de\" TLD.  Also, the regular expression for this TLD would not be the same as used by ICANN (see my first comment).",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "created": "2007-02-08T15:22:31.000+0000",
                    "updated": "2007-02-08T15:22:31.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12609",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Well... ICAN defines that all unicode characters can be supported.\n\n\n2. In implementing the IDN standards, top-level domain registries will employ an \"inclusion-based\" approach (meaning that code points that are not explicitly permitted by the registry are prohibited) for identifying permissible code points from among the full Unicode repertoire.\n\n3. In implementing the IDN standards, top-level domain registries will (a) associate each registered internationalized domain name with one language or set of languages, (b) employ language-specific registration and administration rules that are documented and publicly available, such as the reservation of all domain names with equivalent character variants in the languages associated with the registered domain name, and, (c) where the registry finds that the registration and administration rules for a given language would benefit from a character variants table, allow registrations in that language only when an appropriate table is available.\n\n\nSo the question is if we get a list of supported unicode charsets for each IDN registar or if we should accept all unicode characters.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2007-02-08T15:55:07.000+0000",
                    "updated": "2007-02-08T15:55:07.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12612",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=shreef",
                        "name": "shreef",
                        "displayName": "Ahmed Shreef",
                        "active": true
                    },
                    "body": "ok, just accept any Unicode characters. I found that there is some host names like \" http:\/\/www.\u062c\u0647\u064a\u0646\u0629.com\/ \" .\n\nI read minutes ago an Arabic forum post about this type of domains. one of the guys said that you can just get a domain like this from any domains registrar . for example, if you want to register the domain \" http:\/\/www.\u062c\u0647\u064a\u0646\u0629.com\/ \" just register the domain \" http:\/\/www.xn--ogbf2fdp.com\/ \". if the user types the Arabic domain, the browser will translate the Arabic characters to a mix of English ones and will take the user to the website. \n\nso if we can do this in Arabic, there will be possibility to create Japanese and Chinese ones too . \n\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=shreef",
                        "name": "shreef",
                        "displayName": "Ahmed Shreef",
                        "active": true
                    },
                    "created": "2007-02-08T17:10:18.000+0000",
                    "updated": "2007-02-08T17:10:18.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12613",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "body": "http:\/\/www.iana.org\/cctld\/specifications-policies-cctlds-01apr02.htm",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "created": "2007-02-08T17:28:07.000+0000",
                    "updated": "2007-02-08T17:28:07.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12616",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "body": "I expect the managers of TLDs would heavily frown on permitting illegal characters in domain names for their TLDs.\n\nFor example, using a non-Icelandic approved characters for a \".is\" domain would open the door to a form of spoofing attacks, by allowing other characters that look similar or identical to the special characters added by the \".is\" TLD to the permitted list of characters for their domain names.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "created": "2007-02-08T19:24:08.000+0000",
                    "updated": "2007-02-08T19:24:08.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12638",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "We have a French member of staff here, French domains (.fr) do not use special characters - the official site indicates tthe following characters are only allowed: \"a-z\", \"0-9\" and \"-\"\n\nAs of 2004 Belgium domains (.be) can include special characters as defined by the IDN. I am not sure how widely used this is, however.\n\nI agree with Thomas it is useful to support these character sets. A sensible approach would be to accept a restrictive set of characters for all domains, then extend this on a tld by tld basis. Each tld should then allow additional character sets as defined by the relevant authority. \n\nI don't see how we can hope to cover all domains, but at least a core number can be achieved and as long as users can extend the system to add their own characters for other domains that should be workable.\n\nOf course all of this is different for local hostnames. I think there was talk that the Hostname validator should allow local name validations. Is this right?",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2007-02-09T03:40:46.000+0000",
                    "updated": "2007-02-09T03:40:46.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12649",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Well, for DE such a list exists...\n\nI am sure that also for other IDNs such a list can be found.\nSo if we dont accept all unicode characters we should only include the IDN's from which we have the extended charset.\n\nOthers would only have ToAscii instead of ToUnicode.\n\n@Ahmed:\nWhat you've mentioned does not what's meant here.\n\nNot all IDNs accept unicode.\nhttp:\/\/www.xn--ogbf2fdp.com\/  is only what a IDN does after receiving unicode characters.\n\nhttp:\/\/www.\u062c\u0647\u064a\u0646\u0629.com\/  is the unicode which we have to parse\/validate.\nThe unicode letters are then changed by the ToAscii function in the browser\/IDN to Ascii letters, where xn-- (and also others) are defining which unicode charset to use.\n\nBut an arabic IDN would not accept xd-- because it's not arabic.\nLook at the links which gavin placed for further explanation.\n",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2007-02-09T12:34:10.000+0000",
                    "updated": "2007-02-09T12:34:10.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12677",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "My suggested approach (which I am now testing) involves having a more basic regex (as per the IANA spec mentioned above) for standard domains which matches up with that specified at iana.org\n\nI will also match against a known TLD for DNS-based domains. If a special regex exists for a TLD, then this is used. I'll set up .de and .be as a test to start with\n\nI will have a large array for the known TLDs (generated from ftp:\/\/data.iana.org\/TLD\/tlds-alpha-by-domain.txt) and custom regexes for each TLD that we set up for. I will store these as properties in Zend_Validate_Hostname. \n\nI did think about seperating them out into different files in something like Zend_Validate_Hostname\/Data but the benefit of such organisation seems outweighed by the speed hit such an act will inpact and the fact the data will be so small.\n\nI have a script to generate the TLD array. Should this be stored somewhere within the ZF folder structure?\n\nDarby, I'll probably have to drop your regex constant organisation since the DNS regex will be too complex to fit into one line and will require further checks (i.e. against the tld). Hope that's ok!",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2007-02-11T16:56:16.000+0000",
                    "updated": "2007-02-11T16:56:16.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12695",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "I've added support for the following countries: Austria (.AT),  Switzerland (.CH), Liechtenstein (.LI),  Germany (.DE), Finland (.FE),  Hungary (.HU), Norway (.NO), and Sweden (.SE). Seems Belgium doesn't accept IDN at present.\n\nSo far I've placed the additional characters regex in Zend_Validate_Hostname but this isn't going to work for Far East languages such as Japan (which has 6534 additional characters available for IDN domains according to http:\/\/www.iana.org\/assignments\/idn\/jp-japanese.html ). May have to rethink how the country regexes are stored. \n\nAny objections to storing these in a Zend_Validate_Hostname\/Data folder as straightforward PHP arrays? I could encapsulate these in a class such as Zend_Validate_Hostname_Data_Jp if this is considered better practise.\n\nI also notice exceptions are raised in the current Zend_Validate_Hostname, seemingly to detect whether a preg_match fails. This seems different from all other Validator classes and gets a bit messy now I've extended the validation somewhat for domains. Is it OK to just set messages wherever there's a failure?\n\nAny input appreciated, otherwise I'll go ahead and commit these changes in the next day or two.\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2007-02-12T15:39:35.000+0000",
                    "updated": "2007-02-12T15:39:35.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12696",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "body": "{quote}I have a script to generate the TLD array. Should this be stored somewhere within the ZF folder structure?{quote}\nYes, see the  build-tools\/ directory.\n\nEventually, some will use a configuration scripts for installing the ZF and\/or ZF apps.\nThis will some day affect how developers and users want to deal with the bloat associated with supporting all locales, TLDs, and other optional code in the ZF.\n\nIdeally, using isHostname() would not force all TLD regex's into RAM ;)\nI personally like the efficient approach of storing appropriate data into PHP arrays in *.php files, ready for inclusion, if needed.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "created": "2007-02-12T16:37:31.000+0000",
                    "updated": "2007-02-12T16:37:31.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12717",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "Having a issue matching UTF-8 characters within a preg_match using hex characters. From the docs \\x{XXXX} should match a UTF-8 character, however the following two tests return false (when they should return true)\n\n{code}\nvar_dump(preg_match(\"\/\\x{00E4}\/u\", '\u00e4'));\n\nvar_dump(preg_match(\"\/^[a-zA-Z0-9\\x{00E0}\\x{00E1}\\x{00E2}\\x{00E3}\\x{00E4}\\x{00E5}\\x{00E6}\\x{00E7}\\x{00E8}\\x{00E9}\\x{00EA}\\x{00EB}\\x{00EC}\\x{00ED}\\x{00EE}\\x{00EF}\\x{00F0}\\x{00F1}\\x{00F2}\\x{00F3}\\x{00F4}\\x{00F5}\\x{00F6}\\x{00F8}\\x{00F9}\\x{00FA}\\x{00FB}\\x{00FC}\\x{00FD}\\x{00FE}\\x{00FF}\\x{0153}\\x{0161}\\x{017E}]{1,63}$\/u\", \"b\u00e4cher\"));\n{code}\n\nIf I remove the \/u modifier the first example works, but the second fails on the preg_match with a warning:   preg_match(): Compilation failed: character value in \\x{...} sequence is too large at offset 266 in C:\\wamp\\www\\zf-test\\mb_test.php on line 7\n\nThis seems to indicate the character \\x{0153} but that is valid\n\nAnyone have experience in this?",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2007-02-13T17:17:43.000+0000",
                    "updated": "2007-02-13T17:17:43.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12718",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "sorry about the long line length, if someone can edit the code example to go across multiple lines that would be good :-)",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2007-02-13T17:19:09.000+0000",
                    "updated": "2007-02-13T17:19:09.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12757",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "Revision 3429, which will be released with 0.8, has a rewrite of DNS hostname matching which is accurate for all normal domain names including a check for a current valid TLD.\n\nI have developed test scripts for IDN support for a number of country TLDs but due to the complexity of testing UTF-8 characters this isn't ready for release at this time. I will continue testing with the aim to have this complete for 0.9\n\nSo far I have placed arrays for TLD additional characters in separate files within Zend\/Validate\/Hostname\/ with files named in the format De.php and the class name Zend_Validate_Hostname_De - these classes are based on an interface which describes their usage.\n\nIDN characters are stored as 4-char hex codes, ie {code}\\x{00E3}{code}\n\nWhile this is fine for regexes, I've had problems including UTF-8 characters in the Unit tests. I believe this to be to do with the Byte-Order-Mark of the actual file. Zend_Validate_Hostname will likely be used in the real world for validating data from POST or a database such as MySQL so BOMs may be less important. I will be undertaking some tests to see what needs to be done to ensure real-world  IDN domain name matching works with UTF-8 characters.\n\nI've changed the default behaviour of Zend_Validate_Hostname to only match DNS hostnames since after discussion with my co-developers in the office I believe this is the most common practical usage of Zend_Validate_Hostname. Other options can be set as normal via the contstructor. The ability to change the regex for local domains has been kept, but this may be deprecated by 0.9\n\nUsage documentation for the current version has been added to the end-user manual.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2007-02-15T08:37:58.000+0000",
                    "updated": "2007-02-15T08:37:58.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12938",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=iezzip",
                        "name": "iezzip",
                        "displayName": "Philip Iezzi",
                        "active": true
                    },
                    "body": "Why should we take the complexity of validating UTF-8 characters in Zend_Validate_Hostname?\nDoesn't it make more sense to just allow punycoded IDNA hostnames? I guess this regex would be much easier to implement.\n\n'kettenz\u00fcge.de' would result in 'xn--kettenzge-w9a.de' which currently does not validate in Zend_Validate_Hostname.\nTo make such a hostname available for other applications (e.g. zonefiles in Bind or Apache's VirtualHosts) anyway we need to convert them to punycode. Why not just do this prior to validation to simplify life?\nI'm using PEAR's Net_IDNA, e.g.:\n\n{code}\n$idna = Net_IDNA::getInstance();\n$encodedHostname = $idna->encode(utf8_encode($hostname));\n\n$validator = new Zend_Validate_Hostname();\nif (!$validator->isValid($encodedHostname)) {\n    \/\/ would be nice if this would validate!\n}\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=iezzip",
                        "name": "iezzip",
                        "displayName": "Philip Iezzi",
                        "active": true
                    },
                    "created": "2007-02-25T05:16:09.000+0000",
                    "updated": "2007-02-25T05:16:09.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/13289",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "I have added IDN domain support to Zend_Validate_Hostname to match a domain such as b\u00fcrger.de \n\nHowever I've had some real problems getting the actual Unit Tests to run and validate an IDN domain. Most of these seem to be due to UTF-8 characters in the test file getting mucked up (encoding is great fun!). \n\nSo far I cannot actually run my Unit Tests successfully (I am on Windows with WAMP and so far have not managed to get PHPUnit running on a Unix box here) but if I copy the code into standalone test scripts using the actual Zend Framework validate functions they pass fine. Test scripts which validate a hostname via POST also work fine (given form encoding is working OK).\n\nI would like someone with more experience of PHPUnit to run my tests to see if they pass OK. If so, I'll submit the code into the repository and hopefully all will be well.\n\nOtherwise is it OK to commit this new feature without a Unit Test? I rather suspect even if we can sort out encoding in one file Subversion may muck up the encoding and thus make it impossible to get a stable Unit test for this in the trunk.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2007-03-13T14:21:36.000+0000",
                    "updated": "2007-03-13T14:21:36.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/13302",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "sorry, forgot - Hostname unit test file attached. This file should be encoded as UTF-8",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2007-03-13T15:31:34.000+0000",
                    "updated": "2007-03-13T15:31:34.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/13305",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "Final comment today.. I am using mb_strtolower() to reliably force hostnames to lower-case for matching against IDN characters.\n\nLooking at comments on ZF-269 this seems not to be the ideal way to do things? If this is so, I can look at adding all the upper-case versions of the allowed characters though it may take a while..",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2007-03-13T15:56:54.000+0000",
                    "updated": "2007-03-13T15:56:54.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/13310",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "only one small point:\n\nWhy do you use the mb-extension ?\nI thought that it is depreciated and instead iconv should be used ?\n\nBtw:\nInstead of Zend_Locale_UTF8 (ZF-269) we use the iconv library for localization. :-)",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2007-03-13T17:17:26.000+0000",
                    "updated": "2007-03-13T17:17:26.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/13317",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "Thomas: can I convert to lower case with iconv? From looking over the manual I can't find a solution to that with iconv",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2007-03-14T03:55:01.000+0000",
                    "updated": "2007-03-14T03:55:01.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/13319",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "{code}\npublic function iconv_strtolower($value)\n{\n    return iconv(strtolower(iconv($value, \"UTF-8\", \"windows-1251\")), \"windows-1251\", \"UTF-8\");\n}\n{code}\n\nSo simple that sometimes you dont see the tree within the wood ;-)",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2007-03-14T05:03:36.000+0000",
                    "updated": "2007-03-14T05:03:36.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/13320",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "For linux an other encoding should be selected of course. ;-)",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2007-03-14T05:08:09.000+0000",
                    "updated": "2007-03-14T05:08:09.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/13322",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "Thanks Thomas!\n\nAm testing with the i modifier in preg which seems to be UTF-8 safe if I'm in UTF-8 mode",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2007-03-14T06:27:38.000+0000",
                    "updated": "2007-03-14T06:27:38.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/13323",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "Silly me, using the i and u modifier works fine for UTF-8 safe lower-casing regexes. Thanks for the advice though Thomas :-)\n\nI have had to create two standalone test scripts in the tests\/Zend\/Validate folder since I can't get the Unit Test to work with IDN characters. \n\nThe first is tests\/Zend\/Validate\/HostnameTestStandalone.php which is designed to be run on  the command line. \n \nThe second is tests\/Zend\/Validate\/HostnameTestForm.php which is designed to be run via HTML  to allow users to test entering UTF-8 characters in a form.\n\nIs it OK to commit these to SVN or is this not really the place for non-unit tests?\n\nFinally, I had some issues trying to filter incoming POST data with UTF-8 characters. Bar stripping tags, any advice on how to make use of Zend_Filter on wider character sets?",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2007-03-14T06:43:20.000+0000",
                    "updated": "2007-03-14T06:43:20.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/13329",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "Fixed in version 3927\n\nIDN support is described in Zend_Validate_Hostname and Zend_Validate_Hostname_Interface. Documentation to be updated shortly.\n\nInitially supported TLDs are: .at, .ch, .li, .de, .fi, .hu, .no, .se\n\nI have a script to create a .jp character list but since it weighs in over 6000 characters I want to test this on smaller character set IDNs as mentioned above",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2007-03-14T11:31:41.000+0000",
                    "updated": "2007-03-14T11:31:41.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/13331",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "In case of any issues with testing the Unit test for Hostname, please try this standalone script - HostnameTestStandalone.php",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2007-03-14T11:36:51.000+0000",
                    "updated": "2007-03-14T11:36:51.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/13332",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "In case of any issues with testing the Unit test for Hostname, please try this standalone script intended for testing IDN domains via a form - HostnameTestForm.php",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2007-03-14T11:37:15.000+0000",
                    "updated": "2007-03-14T11:37:15.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/13739",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "body": "Summarizing from historical threads:\n- the mbstring extension is not deprecated and is the *recommended* way to fully UTF-8 enable an entire PHP application\n- the mbstring extension should *not* be required in ZF \/library core code (the extension is not a ZF requirement)\n- the \/u modifier for PCRE does not work in all conditions and situations (see past topic threads and pcre.org for details)\n- test suites might make use of more \"tools\" (e.g. mbstring) than are available in ZF \/library core, but the tests then need to be optional",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "created": "2007-03-27T13:31:31.000+0000",
                    "updated": "2007-03-27T13:31:31.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-881\/transitions"
}