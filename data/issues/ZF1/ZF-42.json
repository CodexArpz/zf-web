{
    "expand": "html",
    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-42",
    "key": "ZF-42",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Validate::isEmail() implementation (TRAC#34)"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-42\/votes",
                "votes": 11,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/version\/10022",
                    "id": 10022,
                    "description": "Beta Release; all components feature complete for 1.0",
                    "name": "0.9.0",
                    "userReleaseDate": "17\/Mar\/07",
                    "archived": true,
                    "releaseDate": "2007-03-17",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2007-03-14T11:33:33.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=zend_framework",
                "name": "zend_framework",
                "displayName": "Zend Framework",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2006-06-19T23:12:36.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2007-07-05T14:43:07.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "in accordance with sections 3.2.4 , 3.4, 3.4.1 of the RFC .\n{code}\n\n public static function isEmail($value)\n    {\n        \/**\n         * @todo RFC 2822 (http:\/\/www.ietf.org\/rfc\/rfc2822.txt)\n         *\/\n\t\t$atom = '[-a-z0-9!#$%&\\'*+\/=?^_`{|}~]';\n\t\t$domain = '([a-z0-9]([-a-z0-9]*[a-z0-9]+)?)';\n\t\t$regex = '^' . $atom . '+' . '(\\.' . $atom . '+)*\\@(' . $domain . '{1,63}\\.)+' . $domain . '{2,63}$';\n\n    \tif (eregi($regex, $value))\n    \t{\n        \treturn $value;\n    \t}\n\n    \treturn false;\n    }\n\n{code}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-42\/watchers",
                "isWatching": false,
                "watchCount": 10
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                "name": "studio24",
                "displayName": "Simon R Jones",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-258",
                    "issue": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-258",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                },
                {
                    "issueKey": "ZF-318",
                    "issue": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-318",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/attachment\/10321",
                    "filename": "EmailAddress.php",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2007-03-13T14:26:17.000+0000",
                    "size": 6212,
                    "mimeType": "application\/octet-stream",
                    "content": "http:\/\/framework.zend.com\/issues\/secure\/attachment\/10321\/EmailAddress.php"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/attachment\/10210",
                    "filename": "Zend_Filter_isEmail.php",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2007-01-16T03:17:21.000+0000",
                    "size": 2720,
                    "mimeType": "application\/x-php",
                    "content": "http:\/\/framework.zend.com\/issues\/secure\/attachment\/10210\/Zend_Filter_isEmail.php"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/version\/10010",
                    "id": 10010,
                    "description": "Preview Release",
                    "name": "0.1.3",
                    "userReleaseDate": "18\/Apr\/06",
                    "archived": true,
                    "releaseDate": "2006-04-18",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/component\/10140",
                    "id": 10140,
                    "name": "Zend_Validate",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10071",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=zend_framework",
                        "name": "zend_framework",
                        "displayName": "Zend Framework",
                        "active": true
                    },
                    "body": "***** patch on trac\n\n\n\n05\/07\/06 14:28:55: Modified by mike\n\n    * owner changed from zend to jim2012@gmail.com.\n\nPOSIX regexp support (ereg) is moving to PECL per the Paris PDM (see http:\/\/www.php.net\/~derick\/meeting-notes.html#move-ereg-to-pecl). Please refactor to use PCRE and send unit tests.\n05\/08\/06 14:49:31: Modified by jim2012@gmail.com\n\nHere's a new version of this function. Using preg_match() now. Adherence to RFC 2822 has been lowered to provide \"good enough\" matching for emails that an end-user might actually try to send emails to and not emails that are valid for _display_ in Outlook Express *eeeek*. This validates emails like 'john.doe@example.museum.uk' and not \"John O'Donnell (my friend) <john!O'Donnell!@ex.museum.uk>\" which the RFC says are valid.\n{code}\n public static function isEmail($value)\n    {\n        \/**\n         * @todo RFC 2822 (http:\/\/www.ietf.org\/rfc\/rfc2822.txt)\n         *\/\n\t\t$atom = '[-a-z0-9_]';\n\t\t$domain = '([a-z0-9]([-a-z0-9]*[a-z0-9]+)?)';\n\t\t$regex = '\/^' . $atom . '+' . '(\\.' . $atom . '+)*\\@(' . $domain . '{1,63}\\.)+' . $domain . '{2,63}$\/i';\n\n    \tif (preg_match($regex, $value))\n    \t{\n        \treturn $value;\n    \t}\n\n    \treturn false;\n    }\n{code}\ni'll attach a patch for FilterTest?.php\n05\/08\/06 14:50:04: Modified by jim2012@gmail.com\n\n    * attachment filtertest.patch added.\n\n05\/16\/06 11:05:58: Modified by zend@caomhin.demon.co.uk\n\nThe patched regex doesn't catch email addresses which use + which a lot of people use so something like bob+sitename@example.com gets delivered to bob@example.com when they give their email address out.\n\nThe following amended $atom variable catches these addresses too\n\n$atom = '[-a-z0-9_+]';\n05\/27\/06 15:11:17: Modified by karim79@gmail.com\n\nFor those of you who might be interested, this function first checks if the input string is a correctly formatted email. Passing that, the code checks the existence of the domain using checkdnsrr() then if an MX exists at that domain. \/**\n\n    *\n          o\n                + Returns value if it is a valid email format, FALSE otherwise. \n\n            *\n\n    *\n          o\n                + @param mixed $value\n                + @return mixed \n\n            *\/\n\n        public static function isEmail($value) {\n\n    if (preg_match('\/[a-zA-Z0-9\\._-]+\\@(\\[?)[a-zA-Z0-9\\-\\.]+'.\n\n                '\\.([a-zA-Z]{2,4}|[0-9]{1,3})(\\]?)$\/', $value)) {\n\n        if ($domainCheck && function_exists('checkdnsrr')) { list (, $domain) = explode('@', $value);\n\nif (checkdnsrr($domain, 'MX') checkdnsrr($domain, 'A')) {\n\n            return true;\n\n        } return false; } return true;\n\n    } return false;\n\n        }\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=zend_framework",
                        "name": "zend_framework",
                        "displayName": "Zend Framework",
                        "active": true
                    },
                    "created": "2006-06-19T23:13:17.000+0000",
                    "updated": "2006-06-19T23:13:17.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10159",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=regulate",
                        "name": "regulate",
                        "displayName": "jim kovalchuk",
                        "active": true
                    },
                    "body": "\"Zend_Filter provides a library of static methods for filtering data.\"  \nLets not make it do any more than that.  Email validation should be done elsewhere.  \n",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=regulate",
                        "name": "regulate",
                        "displayName": "jim kovalchuk",
                        "active": true
                    },
                    "created": "2006-06-23T12:35:11.000+0000",
                    "updated": "2006-06-23T12:35:11.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10326",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=toocan",
                        "name": "toocan",
                        "displayName": "Andr\u00e9 Schade",
                        "active": true
                    },
                    "body": "public static function isEmail($value,$domcheck = true)\n    {\n        if\t( (preg_match('\/(@.*@)|(\\.\\.)|(@\\.)|(\\.@)|(^\\.)\/', $value)) ||\n\t\t\t(preg_match('\/^.+\\@(\\[?)[a-zA-Z0-9\\-\\.]+\\.([a-zA-Z]{2,3}|[0-9]{1,3})(\\]?)$\/',$value)) )\n\t\t{\n\t\t\tif ($domcheck === true)\n\t\t\t{\n\t\t\t\t$dom = substr($value, strpos($value, '@') +1);\n\t\t\t\tif ( checkdnsrr($dom.'.', 'MX'\t ) ) return TRUE;\n\t\t\t\tif ( checkdnsrr($dom.'.', 'A'\t ) ) return TRUE;\n\t\t\t\tif ( checkdnsrr($dom.'.', 'CNAME') ) return TRUE;\n\t\t\t}\n\t\t\telse \n\t\t\t{\n\t\t\t\treturn TRUE;\n\t\t\t}\t\n\t\t}\n\t\treturn FALSE;\n    }",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=toocan",
                        "name": "toocan",
                        "displayName": "Andr\u00e9 Schade",
                        "active": true
                    },
                    "created": "2006-07-07T14:29:30.000+0000",
                    "updated": "2006-07-07T14:29:30.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10580",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=darby",
                        "name": "darby",
                        "displayName": "Darby Felton",
                        "active": true
                    },
                    "body": "Original comment by Markus Wolff:\n\nWhile Zend_Filter_Input::testEmail() is already advertised in the manual, said method relies on Zend_Filter::isEmail(), which currently contains nothing more than a TODO marker. I don't know what kind of mega-super-duper email validation stuff was originally planned for this, but considering the method is needed by methods that are documented as if they were working, wouldn't it be nice to at least put a simple RegEx in place here, so that the method at least works in 95% of all cases?\n\nIf nothing else, it saves first-time users from having to backtrack the source of the problem throughout the ZF source.\n\nHere's a regex that works for me:\n\/^[a-zA-Z]([.]?([[:alnum:]_-])*)?@([[:alnum:]-_]\\.)+[a-zA-Z]{2,4}$\/",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=darby",
                        "name": "darby",
                        "displayName": "Darby Felton",
                        "active": true
                    },
                    "created": "2006-07-24T11:21:43.000+0000",
                    "updated": "2006-07-24T11:21:43.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10587",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=rinaldi",
                        "name": "rinaldi",
                        "displayName": "David Rinaldi",
                        "active": true
                    },
                    "body": "I like a default validation without a domain check for speed, and with a generic enough regex to allow all valid tlds (many regex fail to match the .museum tld for example).\n\nThe problem with the domain check added by Andre (see 07\/Jul\/06) is that 'checkdnsrr' is not implemented for Windows servers.  I'm developing on Windows running Apache, but plan to release on Linux.... All such implementations of this type of framework, especially here, need to be platform independent.  A complete domain check would also connect to the domain and start writing a pseudo email to actually validate the address itself as existing and valid.  This gets expensive on large operations, however it can be helpful for true validity tests.\n\nThe regex trade-off of course lies in how many false positives can be allowed vs. false negatives... I generally lean toward limiting false negatives because the users suffer.  The further email check can reduce error rates even more at the expense of network resources.\n\nAt a minimum, this should be released with a very basic regex check with a todo for upgrading (hopefully adding domain checks), not leaving it blank.  In addition, leaving it clean enough to easily extend with such domain checks and pseudo-email checks I think is essential.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=rinaldi",
                        "name": "rinaldi",
                        "displayName": "David Rinaldi",
                        "active": true
                    },
                    "created": "2006-07-24T14:48:01.000+0000",
                    "updated": "2006-07-24T14:48:01.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10611",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "body": "I think the driving need for something like isEmail() requires more than a simple function accepting a string and returning a boolean.  For most applications I've worked on over the years, we needed something closer to:\n\nhttp:\/\/search.cpan.org\/~rjbs\/Email-Valid-0.175\/lib\/Email\/Valid.pm\n\nI think comparing the implementations of known \"robust\" solutions will highlight some surprising differences.  I would also like to hear the 3 authors critique each other's implementations, if they are so inclined.\n\nsee file named RFC822.php (the author of the related PEAR class)\nhttp:\/\/www.phpguru.org\/static\/mime.mail.html\n\nUsed by Horde CVS v3.2 (not in stable yet)\nhttp:\/\/www.iamcal.com\/publish\/articles\/php\/parsing_email\/\n\nNote the \"strict\" flag that allows bypassing extensive checks in favor of something more basic\nhttp:\/\/java.sun.com\/j2ee\/1.4\/docs\/api\/javax\/mail\/internet\/InternetAddress.html\n\nMislav Marohnic wrote:\n> isEmail development should start with an extensive test case\n> - only after that real function has a chance to start rolling.\n\nI think we should review the approaches above, and approach the authors, asking if they would like to contribute their code to the ZF, instead of us trying to re-invent such a common, but difficult wheel.\n\n\nFrom Pascal's email (linked below), we are reminded that not everyone wants or needs an exacting RFC822-compliant validation.  Sometime a weird character in an email address is much more likely to be an accident, even if the address validates to RFC822.  In fact, given the complexity of code to perform strict validation of RFC822, I like David's suggestion (see his comments for [ZF-42] http:\/\/framework.zend.com\/issues\/browse\/ZF-42 ).  Having a validator optimized for speed that doesn't return false positives could be useful for batch processing as the first pass over a set of email addresses with a high percentage of bad addresses.  However, that is probably overkill for the ZF.\n\nhttp:\/\/www.nabble.com\/isEmail-filter.-tf1907194.html#a5222983\n\n[1] RFC 2822, 3.4.1. Addr-spec specification:\n    http:\/\/www.ietf.org\/rfc\/rfc2822.txt\n\n[2] RFC 1035, 2.3.1. Preferred name syntax:\n    http:\/\/www.ietf.org\/rfc\/rfc1035.txt\n\n[3] List of Top Level Domains:\n    http:\/\/data.iana.org\/TLD\/tlds-alpha-by-domain.txt",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "created": "2006-07-26T17:50:22.000+0000",
                    "updated": "2006-07-26T17:50:22.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10712",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=rros",
                        "name": "rros",
                        "displayName": "Robert Ros",
                        "active": true
                    },
                    "body": "I think it is very confusing to have the isEmail() method in the specification but in practise it won't work.\nIt took me about half an hour to understand what went wrong.\nI think validation of user input (and output) is very important, and this issue should be solved soon.\n\nI found the following implentation\/explaination of all the things the RFC describes.\n\nhttp:\/\/www.ilovejackdaniels.com\/php\/email-address-validation\n\nI hope this would be usefull.\n\n--\nRobert Ros",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=rros",
                        "name": "rros",
                        "displayName": "Robert Ros",
                        "active": true
                    },
                    "created": "2006-08-16T12:06:16.000+0000",
                    "updated": "2006-08-16T12:06:16.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10746",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=brunofriedmann",
                        "name": "brunofriedmann",
                        "displayName": "Bruno Friedmann",
                        "active": true
                    },
                    "body": "Ok for what's about Robert give as link.\n\nBut it miss completely IDN domain like schl\u00fcmberger.de or h\u00e4gi.ch which could be regexp valid as this 2 tld authorize them\n:-)))\n\nAnd I don't speak about all other language where IDN are in use.\n\nIf extended characters are in use, what about the utf-8 and + trouble ?\nWill primitive used utf aware ? \n\n",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=brunofriedmann",
                        "name": "brunofriedmann",
                        "displayName": "Bruno Friedmann",
                        "active": true
                    },
                    "created": "2006-08-26T11:25:49.000+0000",
                    "updated": "2006-08-26T11:25:49.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10796",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=kevin",
                        "name": "kevin",
                        "displayName": "Kevin McArthur",
                        "active": true
                    },
                    "body": "This updates one of the earlier patches submitted.\n\nIndex: library\/Zend\/Filter.php\n===================================================================\n--- library\/Zend\/Filter.php     (revision 849)\n+++ library\/Zend\/Filter.php     (working copy)\n@@ -239,6 +239,16 @@\n         \/**\n          * @todo RFC 2822 (http:\/\/www.ietf.org\/rfc\/rfc2822.txt)\n          *\/\n+       $atom = '[-a-z0-9_\\+\\!\\#\\$\\%\\&\\'\\*\\\/\\=\\?\\^\\`\\{\\|\\}\\~]';\n+       $domain = '([a-z0-9]([-a-z0-9]*[a-z0-9]+)?)';\n+       $regex = '\/^' . $atom . '+' . '(\\.' . $atom . '+)*\\@(' . $domain . '{1,63}\\.)+' . $domain . '{2,63}$\/i';\n+\n+       if (preg_match($regex, $value))\n+       {\n+               return $value;\n+       }\n+\n+       return false;\n     }\n\n     \/**\n\nNote the chaned $atom line. http:\/\/tools.ietf.org\/html\/rfc2822 allows many more characters in the local part than were allowed in the first patch.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=kevin",
                        "name": "kevin",
                        "displayName": "Kevin McArthur",
                        "active": true
                    },
                    "created": "2006-09-08T16:01:36.000+0000",
                    "updated": "2006-09-08T16:01:36.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10932",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "body": "Changed to \"bug\", since documentation and API implies isEmail() and testEmail() work.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "created": "2006-10-01T23:57:44.000+0000",
                    "updated": "2006-10-01T23:57:44.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/11470",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "Changing fix version to 0.9.0.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2006-11-13T15:23:34.000+0000",
                    "updated": "2006-11-13T15:23:34.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/11669",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=mratzloff",
                        "name": "mratzloff",
                        "displayName": "Matthew Ratzloff",
                        "active": true
                    },
                    "body": "If it won't be implemented partially, the documentation should be at least be changed.\n\nIf we're waiting for PHP 5.2 to become the minimum requirement (re: the push to 0.9.0), it won't help, since filter_var() is only RFC 822-compliant (or is it?  I don't know, the regular expression it uses seems a bit on the simple side).  On that note, all of Gavin's implementations posted above are RFC 822-only also.\n\nI agree with Gavin's idea of contacting the people behind other robust e-mail validation routines and asking them to update their code for RFC 2822 and contribute it to the framework.\n\nIt seems to me at first blush that any real validation is outside the scope of the Zend_Filter class.  My first inclination would be to tokenize the string and go through it bit by bit, and many of the implementations I'm glancing at look like they do just that.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=mratzloff",
                        "name": "mratzloff",
                        "displayName": "Matthew Ratzloff",
                        "active": true
                    },
                    "created": "2006-11-27T19:38:09.000+0000",
                    "updated": "2006-11-27T19:38:09.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12030",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "I did a bit of preliminary work over Xmas on this, and came up with the following. The method splits up the email address and uses Zend_Filter::isHostname to match the domain (which I think may need checking against the RFC). \n\nthe local part is then checked against first the dot-atom characters, which should form the majority of valid local email addresses. There is also the quoted string format and obsolete formats, however, these should not be used for modern email addresses so it seems overkill to write a single regex to check for all possible formats.\n\nSo my approach is to do a check against dot-atom, and if that fails try quoted string, then try the obsolete format. I haven't got around to the latter two formats yet. I believe that should be a faster match 99% of the time.\n\npublic static function isEmail($value)\n{\n    \/\/ Split email address up\n    if (preg_match('\/^([^@]+)@([^@]+)$\/', $value, $matches)) {\n        $localPart = $matches[1];\n        $domain = $matches[2];\n\n        \/\/ Match domain part (allow hostnames and IP addresses)\n        $domainResult = self::isHostname($domain, 3);\n\n        \/\/ First try to match the local part on dot-atom characters\n        \/\/ since this is the most common format\n        $localResult = false;\n\n        \/\/ Dot-atom characters\n        \/\/ ALPHA \/ DIGIT \/ and \"!\", \"#\", \"$\", \"%\", \"&\", \"'\", \"*\", \"+\",\n        \/\/ \"-\", \"\/\", \"=\", \"?\", \"^\", \"_\", \"`\", \"{\", \"|\", \"}\", \"~\", \".\"\n        \/\/ Dot character \".\" must be surrounded by other non-dot characters\n        $dotAtom = '[a-zA-Z0-9\\x21\\x23\\x24\\x25\\x26\\x27\\x2a\\x2b\\x2d\\x2f\\x3d';\n        $dotAtom .= '\\x3f\\x5e\\x5f\\x60\\x7b\\x7c\\x7d\\x7e\\x2e]';\n\n        \/\/ TODO: speed test strpos instead of preg_match for dot in start and end of string\n        if ( (preg_match('\/^' . $dotAtom . '+$\/', $localPart)) &&\n        (!preg_match('\/^\\x2e\/', $localPart)) && (!preg_match('\/\\x2e$\/',\n$localPart)) ) {\n            $localResult = true;\n        }\n\n        \/\/ If not matched, try quoted string format\n        if (!$localResult) {\n            \/\/ TODO\n        }\n\n        \/\/ if not matched, try obsolete format\n        if (!$localResult) {\n            \/\/ TODO\n        }\n\n        if ($localResult && $domainResult) {\n            return true;\n        }\n    }\n    return $false;\n}\n\nThere was also some mention of this method checking the network to see if the email address actually is valid. I don't think this method is the best place for that for time delay issues. Personally, I'd prefer to check real email addresses via the network asynchronously via a separate cron script.\n\n------------------------------------\nIn reply, Bruno Friedman wrote:\n\nAvailable real tld are:  http:\/\/data.iana.org\/TLD\/tlds-alpha-by-domain.txt\n\nAnd in my case I check the hostname with checkdnsrr to see if there one record or more. (I've a special case for windows os with a system call to dig and\/or nslookup). But as always this impose network connection, but for the dns is took only 2 to 4 seconds fi there's not a plenty of resolver inside the web server.\n\nChecking about the domain part (without the tld) wouldn't be easy, because differents rules applies to each tld authority.\nFor example in Switzerland your domain should be 26 max length, but now they accept IDN domain (think to m\u00fcller ) and the domain max length is 64.\n\nI'm not really agree with your asynchrone checking. Because how to says to a anonymous user behind is browser that's the email he entered is some kind of wrong.\n\nBefore the massive usage of greylisting, i've used a network method to directly speak with the mailers founds in DNS. To see if I've a mail to this user would be accepted. And it works very nice ! And 100% email are true. But I've no time to adapt it to greylisting error message.\n\n------------------------------------\nIn reply I wrote:\n\nEssentially I believe this to be an application design decision. Zend_Filter::isEmail should, in my opinion, be just a character format check. If required then a network checker for emails could exist as a separate function. Then developers can use both at once, or one after the other.\n\nA suggested method to check via the network would be:\n\n# dig MX yourdomain.com\n\n- returns mail.yourdomain.com as the answer to this DNS query\n\n# telnet mail.yourdomain.com 25\n# HELO mydomain.com\n# MAIL FROM:name@mydomain.com\n# RCPT TO:name@yourdomain.com\n\nThis would usually return a status of 250 if the email address is valid.\n\n------------------------------------\nIn reply Bruno Friedman wrote:\n\nYes the modular approach is the best one ... Syntax check, Network check.\n\nFor what you explain at the end is the most difficult part. Think about greylisting ( receiver mailer send a error first and a delay for coming back usually 180 sec ) Or what about mailer that's just couldn't be reache at the time we check ... It's not a trouble for a real mailer it will retry some time later, but our script it is ... :-))\n",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2007-01-02T09:19:10.000+0000",
                    "updated": "2007-01-02T09:19:10.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12174",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "body": "Without going into great detail, attempting to verify that an email address actually works without having a business relationship to the owner of the domain is a bad idea.  Eons ago, spammers realized this actually worked sometimes.  Soon, administrators that knew what they were doing closed this loophole.  Yahoo, AOL, and many others now have an API and system for business partners to validate email addresses effectively and efficiently.  Everyone else probing for deliverable email addresses are normally blocked by these admins, and possibly black-listed or tar-pitted.\n\nHowever, verifying that a DNS record (either MX or A) exists for the domain is helpful.  I've used dns_get_record() with good results, although various complications might arise that introduce unpredictable results -e.g. not all libresolv's are created equal, nor are all systems configured reliably, such as multiple DNS servers, reasonable timeouts, etc.  Even with a nicely tuned and configured bind install, with caching enabled, I find my web pages still \"hiccup\" sometimes with unpleasant delays noticeable to the end user, if I make the page wait for completion of dns_get_record() - obviously simply a byproduct of the nature of DNS lookups.\n\nI still believe the API for http:\/\/search.cpan.org\/~rjbs\/Email-Valid-0.175\/lib\/Email\/Valid.pm is vastly superior for most web applications to the overly simplistic isEmail() returning a boolean. ",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "created": "2007-01-08T00:48:51.000+0000",
                    "updated": "2007-01-08T00:48:51.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12249",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "I've attached a proposed stop-gap for 0.7 if this is considered useful for the community. I'll continue to look into the full character matching the domain MX matching. Am also talking to Darby on the new Zend_Filter proposal at http:\/\/framework.zend.com\/wiki\/display\/ZFPROP\/Zend_Filter+Design+Proposal+-+Darby+Felton which seems to affect this",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2007-01-16T03:17:21.000+0000",
                    "updated": "2007-01-16T03:17:21.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12250",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=yogel",
                        "name": "yogel",
                        "displayName": "Andrew Yager",
                        "active": true
                    },
                    "body": "I think it would be useful to have this function implemented for 0.7. I feel that this is an obvious gaping hole in the framework that can be easily fixed - even if we do have to replace it with the new Zend_Filter in an upcoming release.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=yogel",
                        "name": "yogel",
                        "displayName": "Andrew Yager",
                        "active": true
                    },
                    "created": "2007-01-16T03:25:11.000+0000",
                    "updated": "2007-01-16T03:25:11.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12251",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "Gavin, or anyone else at Zend, would it be acceptable to push this into Zend_Filter for 0.7 with the understand it will continue to be developed under the new Zend_Filter system?\n\nIf so, how do I go about this? Do you want an updated full Zend\/Filter.php file uploaded to this page - I presume I cannot commit anything to the SVN repository..",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2007-01-16T08:14:11.000+0000",
                    "updated": "2007-01-16T08:14:11.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12258",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "Have added basic functionality via the new Zend_Filter_EmailAddress in the lab - http:\/\/framework.zend.com\/fisheye\/browse\/Zend_Framework_Laboratory\/Zend_Filter\/library\/Zend\/Validate\/EmailAddress.php\n\nAnd will continue to develop this functionality there",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2007-01-16T12:56:38.000+0000",
                    "updated": "2007-01-16T12:56:38.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12543",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=darby",
                        "name": "darby",
                        "displayName": "Darby Felton",
                        "active": true
                    },
                    "body": "Development has moved to the [incubator|http:\/\/framework.zend.com\/svn\/framework\/trunk\/incubator\/library\/Zend\/Validate\/EmailAddress.php]. Currently basic [unit tests|http:\/\/framework.zend.com\/svn\/framework\/trunk\/incubator\/tests\/Zend\/Validate\/EmailAddressTest.php] have 100% code coverage, and some @todos remain in the code. Thank you everyone for your contributions as we continue to strive for improvements! :)",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=darby",
                        "name": "darby",
                        "displayName": "Darby Felton",
                        "active": true
                    },
                    "created": "2007-02-06T14:06:55.000+0000",
                    "updated": "2007-02-06T14:06:55.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12756",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "Revision 3429, which will be released with 0.8, validates the common email formats dot-atom and quoted-string. There may be some obsolete local-part formats that the validator doesn't currently pass though I believe these will rarely be required and it's more useful to release Zend_Validate_EmailAddress now which covers 90% of the RFC and probably 99.9% of all real-world usage.\n\nI will continue to look at the character matching for 0.9 so if anyone has any direct comments on things I've missed please let me know\n\nAlso, I'll look at the MX lookup for the hostname for 0.9 - the character matching for the hostname is entirely within Zend_Validate_Hostname\n\nUsage documentation has also been added to the end-user manual.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2007-02-15T08:28:19.000+0000",
                    "updated": "2007-02-15T08:28:19.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12758",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "changed component to Zend_Validate (was Zend_Filter)",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2007-02-15T08:40:17.000+0000",
                    "updated": "2007-02-15T08:40:17.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/13290",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "MX checking is now supported for EmailAddress validation (see attached file). This is done by passing a second parameter in the constructor, i.e.\n\n{code}$validator = new Zend_Validate_EmailAddress(Zend_Validate_Hostname::ALLOW_DNS, true);{code}\n\nThe following method can be used publically (if you so wish) to see if MX checking is available:\n\n{code}$localValidator->mxSupported(){code}\n\nAt present this functionality depends on dns_get_mx() which is UNIX only. \n\nIs this acceptable since this won't work with Windows? Looking into it PEAR has functions that do the same thing and do support Windows but these are far more complex and would probably require a seperate class to organise.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2007-03-13T14:26:17.000+0000",
                    "updated": "2007-03-13T14:26:17.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/13330",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "body": "Fixed in version 3927\n\nDocumentation to be updated shortly\n\nIf you try to use MX checking on a Windows system this will throw an exception because at present this feature is only supported on UNIX machines via dns_get_mx\n\nit would be worth looking into Windows support via another method, but I suspect this will be rather complex and may make sense to be encapsulated within another network type library class",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=studio24",
                        "name": "studio24",
                        "displayName": "Simon R Jones",
                        "active": true
                    },
                    "created": "2007-03-14T11:33:33.000+0000",
                    "updated": "2007-03-14T11:33:33.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-42\/transitions"
}