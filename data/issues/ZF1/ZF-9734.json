{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9734",
    "key": "ZF-9734",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Rewrite Router Makes Named Routes Sticky"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9734\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/2",
                "name": "Won't Fix"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2010-04-22T09:51:45.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=eskwayrd",
                "name": "eskwayrd",
                "displayName": "Ewan Edwards",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-04-22T09:44:13.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-04-22T11:42:28.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "If I create a named route, and pass its name to Zend_Controller_Router_Rewrite's assemble(), all subsequent calls to assemble (such as via the url view helper, or any of Zend_Navigation's view helpers) will continue to use the named route; making it akin to being 'sticky'.\r\n\r\nThis means that ANY URL generation without a named route needs to be explicit about using the 'default' route, which is entirely unexpected; I would expect the default route to be used when a name is not specified.\r\n\r\nThe first block of logic in assemble dealing with the name parameter certainly looks intentional:\r\n\r\n{code}\r\n        if ($name == null) {\r\n            try {\r\n                $name = $this->getCurrentRouteName();\r\n            } catch (Zend_Controller_Router_Exception $e) {\r\n                $name = 'default';\r\n            }\r\n        }\r\n{code}\r\n\r\nHowever, I cannot figure out how that logic is at all useful.\r\n\r\nSubclassing Z_C_R_Rewrite to solve this is fairly straightforward, but I believe it would be an improvement if assemble() behaved like:\r\n\r\n{code}\r\n        if ($name == null) {\r\n            $name = 'default';\r\n        }\r\n{code}\r\n\r\nOr perhaps a more compatible change:\r\n\r\n{code}\r\n        if ($name == null) {\r\n            try {\r\n                $name = $this->getCurrentRouteName();\r\n            } catch (Zend_Controller_Router_Exception $e) {\r\n                $name = 'default';\r\n            }\r\n            if ($reset) {\r\n                $name = 'default';\r\n            }\r\n        }\r\n{code}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9734\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10440",
                    "id": 10440,
                    "description": "Mini Release",
                    "name": "1.10.3",
                    "userReleaseDate": "01\/Apr\/10",
                    "archived": false,
                    "releaseDate": "2010-04-01",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [

            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40183",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Your expectations are wrong, unfortunately. The url() helpers use whatever route was matched in the current request by default -- this is to simplify generating links that return to the same route. (In many cases, you can simply call $this->url() or $this->url($someParams) and it will \"just work\").\r\n\r\nAs a rule of thumb, you should always pass the route name to the helper to ensure the appropriate route is used to assemble the URL.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2010-04-22T09:51:31.000+0000",
                    "updated": "2010-04-22T09:51:31.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40186",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=stewartlord",
                        "name": "stewartlord",
                        "displayName": "Stewart Lord",
                        "active": true
                    },
                    "body": "I think this behaviour is surprising and can have some unexpected side-effects. For example, if I use Zend_Nav to compose menus, the hrefs will change based on which route matched for the current request (unless the route is explicitly specified for each menu item).\r\n\r\nI can see that the router is behaving as designed, but I do question the assertion that this simplifies link generation. Perhaps the router should offer an option to disable this behaviour and always use the default route when no route is given to assemble().",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=stewartlord",
                        "name": "stewartlord",
                        "displayName": "Stewart Lord",
                        "active": true
                    },
                    "created": "2010-04-22T11:42:28.000+0000",
                    "updated": "2010-04-22T11:42:28.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9734\/transitions"
}