{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7227",
    "key": "ZF-7227",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Reflection_Parameter::getType() method doesn't work properly"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7227\/votes",
                "votes": 1,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10362",
                    "id": 10362,
                    "description": "Mini Release",
                    "name": "1.9.3",
                    "userReleaseDate": "22\/Sep\/09",
                    "archived": false,
                    "releaseDate": "2009-09-22",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-09-17T05:25:21.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zailic",
                "name": "zailic",
                "displayName": "Ionut Zailic",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-07-08T08:07:17.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-09-19T14:09:06.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "Zend_Reflection"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Looking to following block code:\n{code: title=Foo.php }\nclass Foo {\n\t\/**\n\t * @param integer $a\n         * @param boolean $b\n\t * @return boolean\n\t *\/\n\tpublic function bar($a, $b) {\n            $r = new Zend_Reflection_Class($this);\n            $p = $r->getMethod('bar')->getParameters();\n            $t = $p[0]->getType();\n            \/\/...\n\t}\n}\n{code}\n\n,the value of $t  is null instead of  integer. The problem seems to be  on  111 and 112 lines,  from Reflection\/Parameter.php file ;value of \"$this->getPosition()\" should not decrement:\n\n{code:title=Parameter.php.patch}\n--- Parameter.php       2009-07-08 15:51:53.000000000 +0300\n+++ ParameterFix.php    2009-07-08 17:34:50.000000000 +0300\n@@ -108,8 +108,8 @@\n         if ($docblock = $this->getDeclaringFunction()->getDocblock()) {\n             $params = $docblock->getTags('param');\n\n-            if (isset($params[$this->getPosition() - 1])) {\n-                return $params[$this->getPosition() - 1]->getType();\n+            if (isset($params[$this->getPosition()])) {\n+                return $params[$this->getPosition()]->getType();\n             }\n\n         }\n{code}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/5",
                "name": "Trivial"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/customFieldOption\/10039",
                "value": "  Should Have"
            }
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7227\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=carlton",
                "name": "carlton",
                "displayName": "Carlton Gibson",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/12154",
                    "filename": "ZF-7227.diff",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=carlton",
                        "name": "carlton",
                        "displayName": "Carlton Gibson",
                        "active": true
                    },
                    "created": "2009-08-21T07:19:42.000+0000",
                    "size": 1723,
                    "mimeType": "application\/octet-stream",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/12154\/ZF-7227.diff"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10340",
                    "id": 10340,
                    "description": "Mini Release",
                    "name": "1.8.4",
                    "userReleaseDate": "23\/Jun\/09",
                    "archived": false,
                    "releaseDate": "2009-06-23",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10408",
                    "id": 10408,
                    "name": "Zend_Reflection",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32722",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=shurik239",
                        "name": "shurik239",
                        "displayName": "Alexander Chirkov",
                        "active": true
                    },
                    "body": "i confirm this bag also",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=shurik239",
                        "name": "shurik239",
                        "displayName": "Alexander Chirkov",
                        "active": true
                    },
                    "created": "2009-07-20T06:28:54.000+0000",
                    "updated": "2009-07-20T06:28:54.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33600",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "Changing to \"Trivial\" priority.\n\"Should Have\" in \"Next Mini Release\".\nAssigning to user [~carlton]",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2009-08-18T10:55:15.000+0000",
                    "updated": "2009-08-18T10:55:15.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33724",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=carlton",
                        "name": "carlton",
                        "displayName": "Carlton Gibson",
                        "active": true
                    },
                    "body": "Changes to tests\/ and library\/",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=carlton",
                        "name": "carlton",
                        "displayName": "Carlton Gibson",
                        "active": true
                    },
                    "created": "2009-08-21T07:19:47.000+0000",
                    "updated": "2009-08-21T07:19:47.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34396",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=carlton",
                        "name": "carlton",
                        "displayName": "Carlton Gibson",
                        "active": true
                    },
                    "body": "Should be fixed by revision 18073. (Please Review.)\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=carlton",
                        "name": "carlton",
                        "displayName": "Carlton Gibson",
                        "active": true
                    },
                    "created": "2009-09-11T02:50:07.000+0000",
                    "updated": "2009-09-11T02:50:07.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34507",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=carlton",
                        "name": "carlton",
                        "displayName": "Carlton Gibson",
                        "active": true
                    },
                    "body": "Merged to release branch in r18161",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=carlton",
                        "name": "carlton",
                        "displayName": "Carlton Gibson",
                        "active": true
                    },
                    "created": "2009-09-17T05:25:20.000+0000",
                    "updated": "2009-09-17T05:25:20.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34626",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=beberlei",
                        "name": "beberlei",
                        "displayName": "Benjamin Eberlei",
                        "active": true
                    },
                    "body": "This bugfix breaks Zend_CodeGenerator testsuite, now generating code with primative types in the parameter hints",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=beberlei",
                        "name": "beberlei",
                        "displayName": "Benjamin Eberlei",
                        "active": true
                    },
                    "created": "2009-09-18T07:10:57.000+0000",
                    "updated": "2009-09-18T07:10:57.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34649",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=carlton",
                        "name": "carlton",
                        "displayName": "Carlton Gibson",
                        "active": true
                    },
                    "body": "Benjamin, this is... er... _interesting_.\n\nThe bug fix looks correct to me: the old test case was passing by luck -- it just happened that two params had the same type and so the fact the type for the wrong parameter was being returned wasn't picked up. \n\nThe new test case goes through each of the parameters and so picks up the error (it's not just THAT the old code fails, but HOW it fails that is interesting.) With the bug fix in place the new test passes. I've also been using it heavily and have not NOTICED a problem. \n\nOf course there could be something else going on... :-)\n\nI've not time to pop into the BugHunt today but I'm totally happy to track this one down. (It just so happens I wanted to get into Zend_CodeGenerator anyway.) Which tests were passing at r18072 but fail at r18073? (If you like, you can create a case and assign it to me -- or reopen this one if you think there is a fault with the fix -- sorry I can't help sooner!)\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=carlton",
                        "name": "carlton",
                        "displayName": "Carlton Gibson",
                        "active": true
                    },
                    "created": "2009-09-18T09:55:41.000+0000",
                    "updated": "2009-09-18T09:55:41.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34721",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=beberlei",
                        "name": "beberlei",
                        "displayName": "Benjamin Eberlei",
                        "active": true
                    },
                    "body": "Hey Carlton,\n\nCodeGenerator is the problem, it dependent on this bug ;-) I fixed it already so no problem! :-)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=beberlei",
                        "name": "beberlei",
                        "displayName": "Benjamin Eberlei",
                        "active": true
                    },
                    "created": "2009-09-19T14:09:00.000+0000",
                    "updated": "2009-09-19T14:09:00.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7227\/transitions"
}