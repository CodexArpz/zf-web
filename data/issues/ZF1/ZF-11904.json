{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11904",
    "key": "ZF-11904",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Amazon requires AssociateTag for all API queries since 2011-11-01"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11904\/votes",
                "votes": 2,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yellowhat",
                "name": "yellowhat",
                "displayName": "Mixu Kastelen",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2011-11-21T22:12:23.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-04-09T04:01:08.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "amazon"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Amazon requires an associate tag for all API queries now, see https:\/\/affiliate-program.amazon.com\/gp\/advertising\/api\/detail\/main.html:\r\n\r\n---\r\n\r\nThe changes, described below, will help us continue to provide you with relevant and useful features to advertise Amazon products. The following changes to the API will take effect on November 1, 2011:\r\n\r\n* Associate Tag will be a required and verified input parameter in all requests to the API\r\n\r\n---\r\n\r\nThe sample code at http:\/\/framework.zend.com\/manual\/en\/zend.service.amazon.html does not work any more: \r\n\r\n---\r\n\r\n$query = new Zend_Service_Amazon_Query('AMAZON_API_KEY', 'US', 'AMAZON_SECRET_KEY');\r\n$query->category('Books')->Keywords('PHP');\r\n$results = $query->search();\r\nforeach ($results as $result) {\r\n  echo $result->Title . '<br \/>';\r\n}\r\n\r\n---\r\n\r\nA first step would be to update the documentation to reflect this working usage:\r\n\r\n$query ->category('Books') ->AssociateTag('myassociatetag-21') ->Keywords('PHP');\r\n\r\nBut preferably the constructor would be changed:\r\n\r\n$query = new Zend_Service_Amazon_Query('AMAZON_API_KEY', 'US', 'AMAZON_SECRET_KEY', 'myassociatetag-21');"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11904\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zimuel",
                "name": "zimuel",
                "displayName": "Enrico Zimuel",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10981",
                    "id": 10981,
                    "description": "Mini Release",
                    "name": "1.11.11",
                    "userReleaseDate": "29\/Sep\/11",
                    "archived": false,
                    "releaseDate": "2011-09-29",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10022",
                    "id": 10022,
                    "name": "Zend_Service_Amazon",
                    "description": "utility functions for using Amazon web services",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/50143",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=2ndak",
                        "name": "2ndak",
                        "displayName": "Alex",
                        "active": true
                    },
                    "body": "I am running into this problem with API itemSearch(). There is no way (or i am not aware of) to insert the AssociateTag to the request.\r\n\r\nI am surprise to see no more people are affected by this. Maybe there isn't that many people using the Zend_Service_Amazon APIs. ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=2ndak",
                        "name": "2ndak",
                        "displayName": "Alex",
                        "active": true
                    },
                    "created": "2012-03-25T17:34:53.000+0000",
                    "updated": "2012-03-25T17:34:53.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/50212",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jsilver",
                        "name": "jsilver",
                        "displayName": "Justin Silver",
                        "active": true
                    },
                    "body": "I updated my local code to support the Amazon changes. One required change for me was the xpath namespace - all of the instances of \"2005-10-05\" in the Zend\/Service\/Amazon\/*.php will need to be updated to replace:\r\n    $xpath->registerNamespace('az', 'http:\/\/webservices.amazon.com\/AWSECommerceService\/2005-10-05');\r\nwith :\r\n    $xpath->registerNamespace('az', 'http:\/\/webservices.amazon.com\/AWSECommerceService\/2011-08-01');\r\n\r\nTo modify the constructor as in the example above \"$query = new Zend_Service_Amazon_Query('AMAZON_API_KEY', 'US', 'AMAZON_SECRET_KEY', 'myassociatetag-21')\" you will need to update Zend\/Service\/Amazon.php \r\n\r\n\/\/ Zend\/Service\/Amazon.php - add property\r\n\r\n    \/**\r\n     * @var string\r\n     *\/\r\n    protected $_associateTag = null;\r\n\r\n\/\/ Zend\/Service\/Amazon.php - update constructor\r\n\r\n    public function __construct($appId, $countryCode = 'US', $secretKey = null, $associateTag=null)\r\n    {\r\n        \/\/ ...\r\n        $this->_associateTag = $associateTag;\r\n        \/\/ ...\r\n    }\r\n\r\n\r\n\/\/ Zend\/Service\/Amazon.php - update _prepareOptions()\r\n\r\n     protected function _prepareOptions($query, array $options, array $defaultOptions)\r\n    {\r\n        \/\/ ...\r\n        $options['AssociateTag']   = $this->_associateTag;\r\n        \/\/ ...\r\n    }\r\n\r\nGood luck!\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jsilver",
                        "name": "jsilver",
                        "displayName": "Justin Silver",
                        "active": true
                    },
                    "created": "2012-04-09T04:01:08.000+0000",
                    "updated": "2012-04-09T04:01:08.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11904\/transitions"
}