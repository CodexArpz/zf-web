{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10649",
    "key": "ZF-10649",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Recent fix for Issue ZF-9643 seems to break a critical functionality of Zend_Acl"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10649\/votes",
                "votes": 7,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10501",
                    "id": 10501,
                    "description": "Mini Release",
                    "name": "1.11.1",
                    "userReleaseDate": "30\/Nov\/10",
                    "archived": false,
                    "releaseDate": "2010-11-30",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2010-11-18T08:20:28.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=froz",
                "name": "froz",
                "displayName": "Jerome Coloma",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-11-05T16:53:47.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-01-21T08:57:36.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Seems that the recent fix http:\/\/framework.zend.com\/issues\/browse\/ZF-9643 broke a critical functionality of Zend_Acl\r\n\r\n$acl = new Zend_Acl();\r\n$acl->addRole(new Zend_Acl_Role('administrator'));\r\n$acl->addResource(new Zend_Acl_Resource('administrator'));\r\n        \r\n$acl->allow('administrator');\r\n        \r\n echo $acl->isAllowed('administrator') ? \"allowed\" : \"denied\";\r\n\/\/ denied\r\n\r\n\/\/ In versions 1.10.x 'administrator' role would be allowed to access All resources\r\n\/\/ by $acl->allow('administrator'); or $acl->allow('administrator', null);\r\n\/\/ basically saying to allow Role 'administrator' to Access ALL Resources\r\n\r\n\/\/ Reverting the old code from line 636 of Zend_Acl would fix the issue, but of course would revert ZF-9643 issue\r\n\/\/ $resources = ($resources == null && count($this->_resources) > 0) ? array_keys($this->_resources) : array($resources); \r\n\/\/ revert to\r\n\/\/ array($resources)\r\n\r\n\r\n\r\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/2",
                "name": "Critical"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10649\/watchers",
                "isWatching": false,
                "watchCount": 8
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                "name": "ralph",
                "displayName": "Ralph Schindler",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-9643",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9643",
                    "type": {
                        "name": "Related",
                        "direction": "OUTBOUND",
                        "description": "is related to"
                    }
                },
                {
                    "issueKey": "ZF-10743",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10743",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                },
                {
                    "issueKey": "ZF-10879",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10879",
                    "type": {
                        "name": "Related",
                        "direction": "INBOUND",
                        "description": "is related to"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/13431",
                    "filename": "ZF-10649.patch",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2010-11-12T12:24:46.000+0000",
                    "size": 12278,
                    "mimeType": "text\/plain",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/13431\/ZF-10649.patch"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10420",
                    "id": 10420,
                    "description": "Minor Release",
                    "name": "1.11.0",
                    "userReleaseDate": "02\/Nov\/10",
                    "archived": false,
                    "releaseDate": "2010-11-02",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10070",
                    "id": 10070,
                    "name": "Zend_Acl",
                    "description": "Access control list authorization component",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/42913",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=afx114",
                        "name": "afx114",
                        "displayName": "jsnod",
                        "active": true
                    },
                    "body": "I am experiencing this same issue, it is preventing me from upgrading to 1.11.0.  Reverting as specified by Reporter above fixes it.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=afx114",
                        "name": "afx114",
                        "displayName": "jsnod",
                        "active": true
                    },
                    "created": "2010-11-09T14:33:07.000+0000",
                    "updated": "2010-11-09T14:33:07.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/42940",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=iezzip",
                        "name": "iezzip",
                        "displayName": "Philip Iezzi",
                        "active": true
                    },
                    "body": "Same problem here, prevents me from upgrading to 1.11.0. I've got a default allow permission schema for a site with just 3 resources that need to be restricted.\r\n\r\n{code}\r\n\/\/ default permission is allow\r\n$this->allow();\r\n{code}\r\n\r\nThis won't give permission to any resource that is NOT defined as follows:\r\n\r\n{code}\r\n$this->add(new Zend_Acl_Resource('account'));\r\n{code}\r\n\r\nIn 1.10.8 it worked as expected, gave permission to every other resource.\r\nThanks for fixing soon!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=iezzip",
                        "name": "iezzip",
                        "displayName": "Philip Iezzi",
                        "active": true
                    },
                    "created": "2010-11-11T09:10:44.000+0000",
                    "updated": "2010-11-11T09:10:44.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/42943",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "I've uploaded a patch for this issue. It includes a unit test.\r\n\r\nThe problem is actually pretty interesting.  The fix for ZF-9643 was at the time a good fix, but there is this use case (described in this issue) that was not covered by our existing unit tests.  Regardless, this use case is indeed pretty common, so we need to find a way to ensure that all common use cases work.\r\n\r\nIn this solution, we actually need to handle (in setRule()) the special case of what happens when 'null' is passed in for resources.  The concept of \"all resources\" is handled by a special \"global\" ruleset.  This solution attempts to modify the global ruleset instead of iterating and applying a rule to all resources.  Consequently, when removing rules globally, this patch iterates all resources to do a full \"cleanup\".\r\n\r\nThe solution provided is completely backwards compatible for as far as all the use cases described in old and the new unit tests.\r\n\r\nPlease test this.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2010-11-12T12:24:51.000+0000",
                    "updated": "2010-11-12T12:24:51.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/42954",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=goten4",
                        "name": "goten4",
                        "displayName": "Emmanuel Bouton",
                        "active": true
                    },
                    "body": "I had the same problem and the patch fixed it ! Thanks Ralph",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=goten4",
                        "name": "goten4",
                        "displayName": "Emmanuel Bouton",
                        "active": true
                    },
                    "created": "2010-11-13T13:22:21.000+0000",
                    "updated": "2010-11-13T13:22:21.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/42973",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jacekkobus.com",
                        "name": "jacekkobus.com",
                        "displayName": "Jacek Kobus",
                        "active": true
                    },
                    "body": "Had the same problem after upgrade. Path worked as expected. Thanks.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jacekkobus.com",
                        "name": "jacekkobus.com",
                        "displayName": "Jacek Kobus",
                        "active": true
                    },
                    "created": "2010-11-14T17:06:36.000+0000",
                    "updated": "2010-11-14T17:06:36.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/42974",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=froz",
                        "name": "froz",
                        "displayName": "Jerome Coloma",
                        "active": true
                    },
                    "body": "The patch worked as expected. Thank you for fixing the issue.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=froz",
                        "name": "froz",
                        "displayName": "Jerome Coloma",
                        "active": true
                    },
                    "created": "2010-11-14T17:10:59.000+0000",
                    "updated": "2010-11-14T17:10:59.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43074",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "Fixed in trunk at r23357 and release branch 1.11 at 23358",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2010-11-18T08:20:28.000+0000",
                    "updated": "2010-11-18T08:20:28.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10649\/transitions"
}