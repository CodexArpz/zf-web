{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11973",
    "key": "ZF-11973",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Db_Statement execute alters variables"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11973\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=loconut",
                "name": "loconut",
                "displayName": "The Lone Coder",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2012-01-05T20:46:22.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-06-08T15:45:18.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "Zend_Db_Statement",
                "db"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "This is tested in a ZF 1.11.10 app on Ubuntu 10.04 LTS (with stock PHP and zend-framework package, not Zend Server\/CE)\r\n\r\n{code}\r\n    public function bugTestAction()\r\n    {\r\n        $this->_helper->layout->disableLayout();\r\n        $this->_helper->viewRenderer->setNoRender();\r\n        header('Content-type: text\/plain');\r\n        echo 'Zend Framework version: ' . Zend_Version::VERSION . PHP_EOL;\r\n        $foo = (int)3;\r\n        echo 'Type before stmt: ' . gettype($foo) . PHP_EOL;\r\n        $db = new Application_Model_DbTable_Clients();\r\n        $stmt = $db->getAdapter()->prepare('SELECT * FROM `client` WHERE 3 = :bound');\r\n        $stmt->bindParam(':bound', $foo);\r\n        echo 'Type after bind: '  . gettype($foo) . PHP_EOL;\r\n        $stmt->execute();\r\n        echo 'Type after execute: '  . gettype($foo) . PHP_EOL;\r\n    }\r\n\r\noutput:\r\nZend Framework version: 1.11.10\r\nType before stmt: integer\r\nType after bind: integer\r\nType after execute: string\r\n{code}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11973\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                "name": "ralph",
                "displayName": "Ralph Schindler",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10980",
                    "id": 10980,
                    "description": "Mini Release",
                    "name": "1.11.10",
                    "userReleaseDate": "04\/Aug\/11",
                    "archived": false,
                    "releaseDate": "2011-08-04",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10012",
                    "id": 10012,
                    "name": "Zend_Db",
                    "description": "interfaces, APIs, and adapters for various third-party data stores",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/49424",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=loconut",
                        "name": "loconut",
                        "displayName": "The Lone Coder",
                        "active": true
                    },
                    "body": "While I realize it is passed by reference (perhaps to save copying\/memory), I'm not sure I understand why the variable needs to be altered, especially to change types.\r\n\r\nIn the case I ran into this- I have a variable that if you pass in an integer it uses a fixed record id, and if you pass in a string it does a fuzzy search. After doing ->execute and ->fetchAll, if we did a fixed id, we're only going to get one record so rather than return the array of one result, I'd return the one result. To do this I checked again whether the variable was still is_int and of course it no longer was. In practice, I could probably replace is_int with is_numeric, but I'm left curious about the variable being altered.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=loconut",
                        "name": "loconut",
                        "displayName": "The Lone Coder",
                        "active": true
                    },
                    "created": "2012-01-05T20:56:33.000+0000",
                    "updated": "2012-01-05T20:56:33.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/49425",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=loconut",
                        "name": "loconut",
                        "displayName": "The Lone Coder",
                        "active": true
                    },
                    "body": "from the PDO manual \"Most parameters are input parameters, that is, parameters that are used in a read-only fashion to build up the query. Some drivers support the invocation of stored procedures that return data as output parameters, and some also as input\/output parameters that both send in data and are updated to receive it.\"\r\n\r\nThis seems to imply it should be read only as in this case it is not receiving data?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=loconut",
                        "name": "loconut",
                        "displayName": "The Lone Coder",
                        "active": true
                    },
                    "created": "2012-01-05T20:58:11.000+0000",
                    "updated": "2012-01-05T20:58:11.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/49426",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=loconut",
                        "name": "loconut",
                        "displayName": "The Lone Coder",
                        "active": true
                    },
                    "body": "I guess this is a PDO \"Bug\" noted at least 3 years back.\r\nhttp:\/\/www.php.net\/manual\/en\/pdostatement.bindparam.php#94711",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=loconut",
                        "name": "loconut",
                        "displayName": "The Lone Coder",
                        "active": true
                    },
                    "created": "2012-01-05T20:59:39.000+0000",
                    "updated": "2012-01-05T20:59:39.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/49427",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=loconut",
                        "name": "loconut",
                        "displayName": "The Lone Coder",
                        "active": true
                    },
                    "body": "Even manually specifying the type as int does not help.\r\n\r\n    public function bugTestAction()\r\n    {\r\n        $this->_helper->layout->disableLayout();\r\n        $this->_helper->viewRenderer->setNoRender();\r\n        header('Content-type: text\/plain');\r\n        echo 'Zend Framework version: ' . Zend_Version::VERSION . PHP_EOL;\r\n        $foo = (int)3;\r\n        echo 'Type before stmt: ' . gettype($foo) . PHP_EOL;\r\n        $db = new Application_Model_DbTable_Clients();\r\n        $stmt = $db->getAdapter()->prepare('SELECT * FROM `client` WHERE 3 = :bound');\r\n        $stmt->bindParam(':bound', $foo, PDO::PARAM_INT);\r\n        echo 'Type after bind: '  . gettype($foo) . PHP_EOL;\r\n        $stmt->execute(); \/\/ $foo becomes string!\r\n        echo 'Type after execute: '  . gettype($foo) . PHP_EOL;\r\n    }\r\n\r\nZend Framework version: 1.11.10\r\nType before stmt: integer\r\nType after bind: integer\r\nType after execute: string\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=loconut",
                        "name": "loconut",
                        "displayName": "The Lone Coder",
                        "active": true
                    },
                    "created": "2012-01-05T21:10:03.000+0000",
                    "updated": "2012-01-05T21:10:03.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11973\/transitions"
}