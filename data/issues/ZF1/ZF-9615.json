{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9615",
    "key": "ZF-9615",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "getDbAdapter() on Zend_Application_Resource_Db incorrect behaviour "
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9615\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/11182",
                    "id": 11182,
                    "description": "Mini Release",
                    "name": "1.12.1",
                    "userReleaseDate": "18\/Dec\/12",
                    "archived": false,
                    "releaseDate": "2012-12-18",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2012-11-13T21:38:37.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=hardcoded",
                "name": "hardcoded",
                "displayName": "Giuseppe Roberti",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-04-04T18:56:25.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-12-18T20:08:27.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "From [Zend Application Available Resources Db|http:\/\/framework.zend.com\/manual\/en\/zend.application.available-resources.html#zend.application.available-resources.db] Documentation:\r\n\r\n{quote}\r\nBelow is an example INI configuration that can be used to initialize the DB resource.\r\n{code:none}\r\n[production]\r\nresources.db.adapter = \"pdo_mysql\"\r\nresources.db.params.host = \"localhost\"\r\nresources.db.params.username = \"webuser\"\r\nresources.db.params.password = \"XXXXXXX\"\r\nresources.db.params.dbname = \"test\"\r\nresources.db.isDefaultTableAdapter = true\r\n{code}\r\n\r\nNote: Retrieving the Adapter instance\r\nIf you choose not to make the adapter instantiated with this resource the default table adapter, how do you retrieve the adapter instance?\r\nAs with any resource plugin, you can fetch the DB resource plugin from your bootstrap:\r\n{code}\r\n$resource = $bootstrap->getPluginResource('db');\r\n{code}\r\n\r\nOnce you have the resource object, you can fetch the DB adapter using the getDbAdapter() method:\r\n{code}\r\n$db = $resource->getDbAdapter();\r\n{code}\r\n{quote}\r\n\r\nSo i expect when i override the Application Bootstrap _initDb() function with those:\r\n{code}\r\nfunction _initDb() {\r\n    if ($this->hasPluginResource('db')) {\r\n        $resource = $this->getPluginResource('db');\r\n        $db = $resource->getDbAdapter();\r\n        return $db;\r\n    }\r\n}\r\n{code}\r\nthat everything works fine.\r\nBut it doesn't because getDbAdapter() does not set the default table adapter; it is acctually setted on init().\r\nImho, this is the wrong place.\r\n\r\nThe attached patch should fix this problem.\r\n\r\nHere a workaround:\r\n{code}\r\nfunction _initDb() {\r\n    if ($this->hasPluginResource('db')) {\r\n        $resource = $this->getPluginResource('db');\r\n        $db = $resource->init();\r\n        return $db;\r\n    }\r\n}\r\n{code}\r\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9615\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [
                "FixForZF1.12",
                "zf-caretaker-adamlundrigan"
            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-12466",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-12466",
                    "type": {
                        "name": "Related",
                        "direction": "INBOUND",
                        "description": "is related to"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/12976",
                    "filename": "zend-application-resource-db.patch",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=hardcoded",
                        "name": "hardcoded",
                        "displayName": "Giuseppe Roberti",
                        "active": true
                    },
                    "created": "2010-04-04T19:40:26.000+0000",
                    "size": 765,
                    "mimeType": "text\/x-patch",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/12976\/zend-application-resource-db.patch"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10440",
                    "id": 10440,
                    "description": "Mini Release",
                    "name": "1.10.3",
                    "userReleaseDate": "01\/Apr\/10",
                    "archived": false,
                    "releaseDate": "2010-04-01",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10460",
                    "id": 10460,
                    "name": "Zend_Application_Resource",
                    "description": "Plugin resources for Zend_Application",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/39802",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "body": "What exactly is the problem?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "created": "2010-04-04T19:00:07.000+0000",
                    "updated": "2010-04-04T19:00:07.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/39803",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=hardcoded",
                        "name": "hardcoded",
                        "displayName": "Giuseppe Roberti",
                        "active": true
                    },
                    "body": "Sorry, clicked on Create before i had finished writing.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=hardcoded",
                        "name": "hardcoded",
                        "displayName": "Giuseppe Roberti",
                        "active": true
                    },
                    "created": "2010-04-04T19:42:41.000+0000",
                    "updated": "2010-04-04T19:42:41.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/41185",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "body": "Reassigning to Matthew.\r\n\r\nMatthew, I assume you originally wrote this class? The issue at hand seems legit, but I'm unsure if there's anything I'm missing and\/or why you chose to did it the way you did when you wrote it.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "created": "2010-06-24T18:15:05.000+0000",
                    "updated": "2010-06-24T18:15:05.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/52244",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Merged to trunk and 1.12 branch.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2012-11-13T21:38:37.000+0000",
                    "updated": "2012-11-13T21:38:37.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/52248",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=razorblade",
                        "name": "razorblade",
                        "displayName": "Sergio Rinaudo",
                        "active": true
                    },
                    "body": "After the update this exception is thrown in an application of the company where I work\r\n\r\nUncaught exception 'Zend_Exception' with message 'No entry is registered for key 'pdo_mysql'' \r\n\r\nIt seems to look for a pdo_mysql key inside Zend_Registry.\r\nUse temporarily multidb resource instead of db solved the problem.\r\n\r\nIs only me with this problem?\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=razorblade",
                        "name": "razorblade",
                        "displayName": "Sergio Rinaudo",
                        "active": true
                    },
                    "created": "2012-11-14T10:53:08.000+0000",
                    "updated": "2012-11-14T10:53:08.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/52251",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=arnoldpistorius",
                        "name": "arnoldpistorius",
                        "displayName": "Arnold Pistorius",
                        "active": true
                    },
                    "body": "@Sergio\r\n\r\nAt my company we have this problems too, I found a work around at http:\/\/framework.zend.com\/issues\/browse\/ZF-12466",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=arnoldpistorius",
                        "name": "arnoldpistorius",
                        "displayName": "Arnold Pistorius",
                        "active": true
                    },
                    "created": "2012-11-14T17:32:50.000+0000",
                    "updated": "2012-11-14T17:32:50.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/52254",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Sergio, Arnold -- I've committed a fix that should correct this; let me know if you are still experiencing issues.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2012-11-14T18:31:58.000+0000",
                    "updated": "2012-11-14T18:31:58.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/52259",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=razorblade",
                        "name": "razorblade",
                        "displayName": "Sergio Rinaudo",
                        "active": true
                    },
                    "body": "Hello Matthew,\r\neverything it's fine with this fix, \r\nthank you!\r\n\r\nAlso thank you Arnold for the workaround advice. \r\n\r\n\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=razorblade",
                        "name": "razorblade",
                        "displayName": "Sergio Rinaudo",
                        "active": true
                    },
                    "created": "2012-11-15T09:31:46.000+0000",
                    "updated": "2012-11-15T09:31:46.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9615\/transitions"
}