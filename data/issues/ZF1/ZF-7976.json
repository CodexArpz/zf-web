{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7976",
    "key": "ZF-7976",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Notice at Zend\/File\/Transfer\/Adapter\/Http.php"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7976\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10360",
                    "id": 10360,
                    "description": "Minor Release",
                    "name": "1.10.0",
                    "userReleaseDate": "27\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-27",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-09-29T14:27:28.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=brunitto",
                "name": "brunitto",
                "displayName": "Bruno Piraj\u00e1 Moyle",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-09-29T13:27:52.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-09-30T15:54:10.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "adapter",
                "file",
                "http",
                "notice",
                "transfer",
                "zend"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I got the following warning when working with a Zend_Form_Element_File in a trivial form:\n{code}\nNotice: Undefined index: CONTENT_LENGTH in \/usr\/local\/php\/share\/Zend\/File\/Transfer\/Adapter\/Http.php on line 124\n{code}\n\nThe line 124 we have:\n{code}\n\/\/ Workaround for a PHP error returning empty $_FILES when form data exceeds php settings\nif (empty($this->_files) && ($_SERVER['CONTENT_LENGTH'] > 0)) {\n{code}\n\nMaybe a simple *array_key_exists()* or *isset()* before the *if* might solve this notice."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7976\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10362",
                    "id": 10362,
                    "description": "Mini Release",
                    "name": "1.9.3",
                    "userReleaseDate": "22\/Sep\/09",
                    "archived": false,
                    "releaseDate": "2009-09-22",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10320",
                    "id": 10320,
                    "name": "Zend_File_Transfer",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34977",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "When there is no CONTENT_LENGTH available then you have a web-server problem.\nIt should always be available as long as $_POST is here and you received data from a form.\n\nAnd when POST does not exist you can not have a active upload.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-09-29T13:37:59.000+0000",
                    "updated": "2009-09-29T13:37:59.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34981",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Feature added.\n\nThe HTTP protocol defines that CONTENT_LENGTH must be available in POST requests.Note that a missing CONTENT_LENGTH shows a broken web server.\nSo you should install the newest release of your webserver to get rid of this problem.\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-09-29T14:29:52.000+0000",
                    "updated": "2009-09-29T14:29:52.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34983",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=brunitto",
                        "name": "brunitto",
                        "displayName": "Bruno Piraj\u00e1 Moyle",
                        "active": true
                    },
                    "body": "The notice did not appeared  when trying to submit the form, but after the form was rendered.\n\nI created a form using a class:\n\n{code}\nclass Form_Upload extends Zend_Form\n{\n    public function init()\n    {\n        $this->addElement('file', 'upload', array(\n            'required'    => true,\n            'filters'         => array(...),\n            'validators' => array(...)\n        );\n\n        $this->addElement('submit', 'submit', array('label' => 'Upload it!'));\n    }\n}\n{code}\n\nThen I just created a form object in controller and injected in view:\n\n{code}\nclass UploadController extends Zend_Controller_Action\n{\n...\n    public function indexAction()\n    {\n        $this->view->form = new Form_Upload();\n    }\n...\n}\n{code}\n\nFinally, I just rendered in my view...\n\n{code}\n...\necho $this->form;\n...\n{code}\n\n... and got the notice as described above.\n\nThanks",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=brunitto",
                        "name": "brunitto",
                        "displayName": "Bruno Piraj\u00e1 Moyle",
                        "active": true
                    },
                    "created": "2009-09-29T16:09:20.000+0000",
                    "updated": "2009-09-29T16:09:20.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35008",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Which means that you are calling receive() when you just display the form.\n\nReceive must only be called when a form has been provided, not when it's being displayed.\nThe manual describes how the correct usage is.\n\nNormally you have to do something like:\n{code}\nif ($form->isPost($_POST)) {\n    $element->reveice();\n}\n{code}\n\nWhen you are having problems with form itself then please write into the mailing list.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-09-30T11:32:39.000+0000",
                    "updated": "2009-09-30T11:32:39.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35016",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=brunitto",
                        "name": "brunitto",
                        "displayName": "Bruno Piraj\u00e1 Moyle",
                        "active": true
                    },
                    "body": "_Which means that you are calling receive() when you just display the form._\nI am not calling {{receive()}} - as showed in the code above.\n\nA deeper look at my code and I noticed that I am calling {{isValid()}} without POST data in the request, generating the notice as described.\n\nAnyway, as defined in PHP manual [section|http:\/\/br2.php.net\/manual\/en\/errorfunc.configuration.php#ini.error-reporting]:\n\n{quote}\n...NOTICE messages will warn you about possible bugs in your code. For example, use of unassigned values is warned. It is extremely useful to find typos and to save time for debugging. NOTICE messages will warn you about bad style.\n{quote}\n\nIn my opinion, the component might handle this notice.\n\nJust for the records, the Zend_Form doesn't have a {{isPost()}} method. I believe you mean:\n{code}\nif ($this->getRequest()->isPost()) {\n    $element->receive();\n}\n{code}\n\nThis verification might be defined within the component as well.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=brunitto",
                        "name": "brunitto",
                        "displayName": "Bruno Piraj\u00e1 Moyle",
                        "active": true
                    },
                    "created": "2009-09-30T12:35:20.000+0000",
                    "updated": "2009-09-30T12:35:20.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35018",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "*) The code above does not show anything... there is no file upload done you just gave the code for rendering... not more not less.\n\n*) The component does handle the notice. Otherwise this issue would not have been fixed for the next release.\n\n*) Why and how should Zend_File_Transfer verify if the controller is called by post or not ? There is no connection between this components. Additionally Zend_File_Transfer can be called with Put, Delete, Ftp, Webdav or any other protocol. It is not fixed to Post. So this would not work.\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-09-30T13:00:53.000+0000",
                    "updated": "2009-09-30T13:00:53.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35020",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=brunitto",
                        "name": "brunitto",
                        "displayName": "Bruno Piraj\u00e1 Moyle",
                        "active": true
                    },
                    "body": "*) Precisely, it shows that nothing has been done than creating and rendering the form.\n\n*) Cool.\n\n*) Any component can introspect the request through Zend_Controller_Front:\n{code}\n\/\/ Gets a front controller singleton instance\n$front       = Zend_Controller_Front::getInstance();\n\n\/\/ Now you have the request\n$request = $front->getRequest();\n{code}\n\nIn my opinion, there is a connection between Zend_File_Transfer_Adapter_Http and Zend_Controller_Request_Http, as *Zend_File_Transfer_Adapter_Http* uses an HTTP request as data source. Additionally, you can use the Zend_Controller_Request_Http {{isGet()}}, {{isPost()}}, {{isDelete()}} and {{isPut()}} methods ensure that the request holds the correct data - *only for HTTP adapters*.\n\nThanks.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=brunitto",
                        "name": "brunitto",
                        "displayName": "Bruno Piraj\u00e1 Moyle",
                        "active": true
                    },
                    "created": "2009-09-30T13:31:43.000+0000",
                    "updated": "2009-09-30T13:31:43.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35022",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Line 124 you gave as error is from the isValid method.\nThis method is only called when you call isValid on the form.\n\nYour code does not call this method, so there are things missing which you did not gave. That's what I mean with missing parts. The code you gave does not call isValid, so the notice itself is not thrown just by the code you gave.\n\n\nAnd no, we will not limit Zend_File to Zend_Controller_Request_Http. Beside of the BC break this would mean, it would also add a limitation which is not necessary.\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-09-30T14:04:06.000+0000",
                    "updated": "2009-09-30T14:04:06.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35026",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=brunitto",
                        "name": "brunitto",
                        "displayName": "Bruno Piraj\u00e1 Moyle",
                        "active": true
                    },
                    "body": "Actually I didn't proposed a _limitation_, I proposed just an _additional validation_, to handle a potential problem explicitly and avoid wrong usage. I don't see how this verification could limit others adapters.\n\nAnyway, the subject of the issue was the notice message and it seems to be solved, thanks for your time.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=brunitto",
                        "name": "brunitto",
                        "displayName": "Bruno Piraj\u00e1 Moyle",
                        "active": true
                    },
                    "created": "2009-09-30T15:54:10.000+0000",
                    "updated": "2009-09-30T15:54:10.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7976\/transitions"
}