{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8419",
    "key": "ZF-8419",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "_isPartialRendering in Zend_Form_Element can break Zend_Form_Element_File::render()"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8419\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-11-30T03:55:22.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jasonhutchens",
                "name": "jasonhutchens",
                "displayName": "Jason Hutchens",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-11-29T19:07:36.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-11-30T21:28:06.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "We have just updated to 1.9.6 to find that our file upload forms no longer work.\r\n\r\nThis is due to a bug that was introduced when ZF-7404 was fixed.\r\n\r\nThis causes the render() method of Zend_Form_Element_File to be called from renderViewHelper() and renderErrors(). Unfortunately, Zend_Form_Element_File::render() throws an exception, as there are no file decorators.\r\n\r\nWe have worked around the problem locally by returning early from Zend_Form_Element_File::render() if $this->_isPartialRendering is true, but this doesn't seem ideal. Instead of _isPartialRendering, I would recommend that Zend_Form_Element introduces partialRender(), with an empty implementation by default. Zend_Form_Element_Hash could then implement partialRender to fix ZF-7404."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8419\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-7404",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7404",
                    "type": {
                        "name": "Related",
                        "direction": "OUTBOUND",
                        "description": "is related to"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10390",
                    "id": 10390,
                    "description": "Mini Release",
                    "name": "1.9.6",
                    "userReleaseDate": "24\/Nov\/09",
                    "archived": false,
                    "releaseDate": "2009-11-24",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10029",
                    "id": 10029,
                    "name": "Zend_Form",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36568",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jasonhutchens",
                        "name": "jasonhutchens",
                        "displayName": "Jason Hutchens",
                        "active": true
                    },
                    "body": "The introduction of _isPartialRendering causes Zend_Form_Element_File::render() to be called from Zend_Form_Element_File::renderViewHelper(), which raises an exception when the form element has no decorators. This breaks the file upload form on our site.\r\n\r\nA better solution would be to implement Zend_Form_Element::partialRender(), with an empty default implementation, and for Zend_Form_Element_Hash to implement this to fix ZF-7404.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jasonhutchens",
                        "name": "jasonhutchens",
                        "displayName": "Jason Hutchens",
                        "active": true
                    },
                    "created": "2009-11-29T19:11:09.000+0000",
                    "updated": "2009-11-29T19:11:09.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36575",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "You could add the needed decorator 'File' to the file element. It seems that you are eighter overwriting the default decorators or deleted them.\r\n\r\nActually the exception was added because many people tried to render the file element and wondered why things don't work without this decorator. This change has been made around ZF 1.7.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-11-29T23:36:59.000+0000",
                    "updated": "2009-11-29T23:36:59.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36576",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jasonhutchens",
                        "name": "jasonhutchens",
                        "displayName": "Jason Hutchens",
                        "active": true
                    },
                    "body": "Yes, we considered adding a decorator to suppress the exception. We've been using the file element in forms without an issue until 1.9.6; it seems that render() wasn't being called until the fix to ZF-7404 was introduced? At least, we never hit the assertion in the past.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jasonhutchens",
                        "name": "jasonhutchens",
                        "displayName": "Jason Hutchens",
                        "active": true
                    },
                    "created": "2009-11-29T23:54:19.000+0000",
                    "updated": "2009-11-29T23:54:19.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36578",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jasonhutchens",
                        "name": "jasonhutchens",
                        "displayName": "Jason Hutchens",
                        "active": true
                    },
                    "body": "We're adding the element with $this->addElement( 'file' ), which doesn't add the File decorator, but we've never hit the exception until now. I'm guessing that we're doing a bunch of non-standard stuff that works fine for us without the decorator being there?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jasonhutchens",
                        "name": "jasonhutchens",
                        "displayName": "Jason Hutchens",
                        "active": true
                    },
                    "created": "2009-11-30T00:13:53.000+0000",
                    "updated": "2009-11-30T00:13:53.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36579",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "According to documentation there are some ways how this could occur:\r\n\r\n* using setDisableLoadDefaultDecorators(true)\r\n* extending the file element\r\n* using removeDecorator() on the file element\r\n* using setDecorator() without giving the file decorator\r\n* using clearDecorators()\r\n\r\nNote that this exception is raised when no \"file\" decorator is given. It is raised as soon as the element should be rendered\/displayed within your view.\r\n\r\nThere is no way to have no exception when the decorator is missing from the element.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-11-30T00:30:59.000+0000",
                    "updated": "2009-11-30T00:30:59.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36580",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Note that you also did not state from which release you updated to 1.9.6. This could also be a usefull information for those trying to reproduce this bug.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-11-30T00:32:38.000+0000",
                    "updated": "2009-11-30T00:32:38.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36581",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jasonhutchens",
                        "name": "jasonhutchens",
                        "displayName": "Jason Hutchens",
                        "active": true
                    },
                    "body": "We upgraded from 1.9.5, and have deployed every Zend upgrade since 1.7, which is the version we started development with.\r\n\r\nI understand that there is no way that the exception could not be raised if the decorator is missing, provided that Zend_Form_Element_File::render() gets called. The fact that we've never seen it before therefore seems to be because Zend_Form_Element_File::render() wasn't being called before 1.9.6 with our codebase.\r\n\r\nI'm guessing that this is because we're not actually rendering the form in it's entirity; our view just renders the individual decorators that we're interested in. With 1.9.6, rendering ANY decorator will cause the exception to be thrown, whereas I'm guessing in 1.9.5 and previous it was only thrown when rendering the form as a whole? I'm not sure why we're using this pattern. It's along the lines of what is described here: http:\/\/weierophinney.net\/matthew\/archives\/215-Rendering-Zend_Form-decorators-individually.html\r\n\r\nWe have an image upload form with a view that calls $this->form->file->renderViewHelper() and $this->form->file->renderErrors(), where $this->form->file is a Zend_Form_Element_File instance (we don't extend it; we just create it with addElement( 'file' )).",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jasonhutchens",
                        "name": "jasonhutchens",
                        "displayName": "Jason Hutchens",
                        "active": true
                    },
                    "created": "2009-11-30T00:58:37.000+0000",
                    "updated": "2009-11-30T00:58:37.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36583",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "ViewHelper does not support decoration of the file element.\r\n\r\nI think you should call renderFile() on the file element rather than renderViewHelper().",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-11-30T01:35:31.000+0000",
                    "updated": "2009-11-30T01:35:31.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36585",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Thomas is correct. When you call render*(), __call() intercepts the method call and dispatches the decorator specified. Since the file form elements do not use ViewHelper, but instead use the File decorator, the appropriate method call would be renderFile(), not renderViewHelper().",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2009-11-30T03:55:22.000+0000",
                    "updated": "2009-11-30T03:55:22.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36604",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jasonhutchens",
                        "name": "jasonhutchens",
                        "displayName": "Jason Hutchens",
                        "active": true
                    },
                    "body": "Thanks - although this really only addresses my misunderstanding of renderViewHelper(). I guess my original report was querying the change that means that calling render*() for any decorator on any form element will call render() on the form element itself. I was worried that this was not acceptable behaviour, and may be unsafe in some circumstances.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jasonhutchens",
                        "name": "jasonhutchens",
                        "displayName": "Jason Hutchens",
                        "active": true
                    },
                    "created": "2009-11-30T21:28:05.000+0000",
                    "updated": "2009-11-30T21:28:05.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8419\/transitions"
}