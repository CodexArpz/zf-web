{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6486",
    "key": "ZF-6486",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Using Zend_Navigation combined with a route href problem"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6486\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-05-01T12:57:55.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cmodijk",
                "name": "cmodijk",
                "displayName": "Deleted",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-05-01T11:55:52.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-04-05T07:39:32.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I'm using the Zend_Navigation to build a menu, this is build in the bootstrap file.\nOne of the pages go's to a route, when i'm in that routed page al href's of the pages into my menu go's to that route and not the right module \/ controller \/ view.. \n\nHere's the code\n{code}\n$pages = array(\n\tarray(\n\t\t'label' => 'Company',\n\t\t'title' => 'About us',\n\t\t'module' => 'newmodule',\n\t\t'controller' => 'index',\n\t\t'action' => 'index',\n\t\t'pages' => array(\n\t\t\tarray(\n\t\t\t\t'label' => 'News',\n\t\t\t\t'class' => 'rss', \/\/ class\n\t\t\t\t'module' => 'newmodule',\n\t\t\t\t'controller' => 'index',\n\t\t\t\t'action' => 'index',\n\t\t\t\t'pages' => array(\n\t\t\t\t\tarray(\n\t\t\t\t\t\t'label' => 'Archive',\n\t\t\t\t\t\t'route' => 'blaat', \/\/ route\n\t\t\t\t\t\t'module' => 'newmodule',\n\t\t\t\t\t\t'controller' => 'index',\n\t\t\t\t\t\t'action' => 'hallow',\n\t\t\t\t\t\t'params' =>array(\"year\"=>\"2009\")\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t)\n\t\t)\n\t),\n);\n$view->navigation()->addPages($pages);\n\n\n$router = $frontController->getRouter();\n$router->addDefaultRoutes();\n$router->addRoute(\n\t'blaat',\n\tnew Zend_Controller_Router_Route(\n\t\t'\/archive\/:year',\n\t\tarray(\n\t\t\t'module' => 'newmodule',\n\t\t\t'controller' => 'index',\n\t\t\t'action' => 'hallow',\n\t\t\t'year' => (int) date('Y') - 1\n\t\t),\n\t\tarray('year' => '\\d+')\n\t)\n);\n{code}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6486\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=robinsk",
                "name": "robinsk",
                "displayName": "Robin Skoglund",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-11261",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11261",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                },
                {
                    "issueKey": "ZF-11255",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11255",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10241",
                    "id": 10241,
                    "description": "Minor Release",
                    "name": "1.8.0",
                    "userReleaseDate": "30\/Apr\/09",
                    "archived": false,
                    "releaseDate": "2009-04-30",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10011",
                    "id": 10011,
                    "name": "Zend_Controller",
                    "description": "front controller, including router and dispatcher",
                    "isAssigneeTypeValid": false
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10406",
                    "id": 10406,
                    "name": "Zend_Navigation",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30593",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cmodijk",
                        "name": "cmodijk",
                        "displayName": "Deleted",
                        "active": true
                    },
                    "body": "I have the problem with the  $this->navigation()->menu(); function\nWhen I first call $page1->getHref(); and then the menu function the problem don't appears",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cmodijk",
                        "name": "cmodijk",
                        "displayName": "Deleted",
                        "active": true
                    },
                    "created": "2009-05-01T12:14:39.000+0000",
                    "updated": "2009-05-01T12:14:39.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30594",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=robinsk",
                        "name": "robinsk",
                        "displayName": "Robin Skoglund",
                        "active": true
                    },
                    "body": "This is probably because you haven't specified any route for the other pages. If I recall correctly, the Zend_Controller_Action_Helper_Url (which the component uses to generate URLs) will use the currently active route if null is given as $route in the call to $helper->url($params, $route, ...).\n\nDoes it work as expected if you specify 'default' as module for the other pages?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=robinsk",
                        "name": "robinsk",
                        "displayName": "Robin Skoglund",
                        "active": true
                    },
                    "created": "2009-05-01T12:16:55.000+0000",
                    "updated": "2009-05-01T12:16:55.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30595",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cmodijk",
                        "name": "cmodijk",
                        "displayName": "Deleted",
                        "active": true
                    },
                    "body": "Yes this work's thanks! \n\nBut... It is a little strange because the code I uses is  from the documentation @ http:\/\/framework.zend.com\/manual\/en\/zend.view.helpers.html#zend.view.helpers.initial.navigation.setup\n\nMaybe it's a idee if the 'route' is not specified the value automatic is default?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cmodijk",
                        "name": "cmodijk",
                        "displayName": "Deleted",
                        "active": true
                    },
                    "created": "2009-05-01T12:46:47.000+0000",
                    "updated": "2009-05-01T12:46:47.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30596",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=robinsk",
                        "name": "robinsk",
                        "displayName": "Robin Skoglund",
                        "active": true
                    },
                    "body": "That was the case originally, but it was changed to null because many users reported that they did not use the 'default' route, or changed it to something else.\n\nI'll try and add a note about this in the manual for the next mini release.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=robinsk",
                        "name": "robinsk",
                        "displayName": "Robin Skoglund",
                        "active": true
                    },
                    "created": "2009-05-01T12:57:53.000+0000",
                    "updated": "2009-05-01T12:57:53.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30597",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cmodijk",
                        "name": "cmodijk",
                        "displayName": "Deleted",
                        "active": true
                    },
                    "body": "Oke, thank you for this information",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cmodijk",
                        "name": "cmodijk",
                        "displayName": "Deleted",
                        "active": true
                    },
                    "created": "2009-05-01T13:16:44.000+0000",
                    "updated": "2009-05-01T13:16:44.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34733",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=igorsf",
                        "name": "igorsf",
                        "displayName": "Igor Fridman",
                        "active": true
                    },
                    "body": "I have exactly the same problem. Why is this \"Not an Issue\"? Can someone please explain?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=igorsf",
                        "name": "igorsf",
                        "displayName": "Igor Fridman",
                        "active": true
                    },
                    "created": "2009-09-20T12:18:26.000+0000",
                    "updated": "2009-09-20T12:18:26.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34734",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=robinsk",
                        "name": "robinsk",
                        "displayName": "Robin Skoglund",
                        "active": true
                    },
                    "body": "Because this is the way the routing system works. If you don't specify a route to the URL helper (which uses router's assemble() method), it will use assume the currently active route should be used for assembling the URL.\n\nAs a concequence of this -- if you use more than one module in your application -- you have to specify which route each page in Zend_Navigation should be using, because it has no way of knowing itself.\n\nIn the earliest versions of Zend_Navigation (when it was still Zym_Navigation), pages used 'default' as a default route.  This \"solved\" the issue described here, but it causes problems for people not using a default route, or has a default route that is not named 'default'. That's why the default route was dropped from pages in Zend_Navigation, to be true to the ZF spirit of not imposing restrictions or lay assumptions on application structure.\n\nHope this helped clarify. If not, just ask. It should also be said that I _do_ see how it would be useful to have the default route specified, since it would mean less configuration. This is something we have to discuss in the community, and get feedback from the zenders (Matthew).",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=robinsk",
                        "name": "robinsk",
                        "displayName": "Robin Skoglund",
                        "active": true
                    },
                    "created": "2009-09-20T12:44:19.000+0000",
                    "updated": "2009-09-20T12:44:19.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34736",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=igorsf",
                        "name": "igorsf",
                        "displayName": "Igor Fridman",
                        "active": true
                    },
                    "body": "Specifing <route>default<\/route> for all the other pages worked for me. What is the difference between null and 'default' route and why Zend_Controller_Action_Helper_Url uses the currently active route?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=igorsf",
                        "name": "igorsf",
                        "displayName": "Igor Fridman",
                        "active": true
                    },
                    "created": "2009-09-20T12:59:32.000+0000",
                    "updated": "2009-09-20T12:59:32.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34737",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=robinsk",
                        "name": "robinsk",
                        "displayName": "Robin Skoglund",
                        "active": true
                    },
                    "body": "null means \"use the currently active route\"\n'default' means \"use the actual route instance named 'default'\"\n\n...as it should be, really.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=robinsk",
                        "name": "robinsk",
                        "displayName": "Robin Skoglund",
                        "active": true
                    },
                    "created": "2009-09-20T13:02:28.000+0000",
                    "updated": "2009-09-20T13:02:28.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34738",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=igorsf",
                        "name": "igorsf",
                        "displayName": "Igor Fridman",
                        "active": true
                    },
                    "body": "Thanks for answering my questions. It would be very useful to add a note under \"Example 37.4. Using routes\" describing this issue. \nhttp:\/\/framework.zend.com\/manual\/en\/zend.navigation.pages.html\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=igorsf",
                        "name": "igorsf",
                        "displayName": "Igor Fridman",
                        "active": true
                    },
                    "created": "2009-09-20T13:18:50.000+0000",
                    "updated": "2009-09-20T13:18:50.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36133",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vlatkobasic",
                        "name": "vlatkobasic",
                        "displayName": "Vlatko Basic",
                        "active": true
                    },
                    "body": "I don't think it is a good idea to change the behavior so much. There should have been made a solution to specify a \"default\" route. This way, neither the \"Default\" route can be used without much configuration, neither some other differently named default route.\r\n\r\nHere is a simple solution that reverts the old behavior, for \"menu\" and \"url\" helpers.\r\n\r\n{code}\r\nclass Old_Controller_Router_Rewrite extends Zend_Controller_Router_Rewrite {\r\n\r\n  public function assemble($userParams,$name=null,$reset=false,$encode=true){\r\n    if ($name == null) {\r\n      $name = 'default';\r\n    }\r\n    return parent::assemble($userParams, $name, $reset, $encode);\r\n  }\r\n\r\n}\r\n{code} \r\n\r\nSomething similar should be done in next ZF release (before 2.0 :-) )",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vlatkobasic",
                        "name": "vlatkobasic",
                        "displayName": "Vlatko Basic",
                        "active": true
                    },
                    "created": "2009-11-19T01:43:03.000+0000",
                    "updated": "2009-11-19T01:43:03.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6486\/transitions"
}