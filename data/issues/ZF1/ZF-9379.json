{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9379",
    "key": "ZF-9379",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_View_Helper_Navigation_Menu::renderSubMenu() should not display the active page if theres no <pages> Array"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9379\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/3",
                "name": "Duplicate"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2013-01-22T10:40:34.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thom-",
                "name": "thom-",
                "displayName": "Thomas Dobrowolski",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-03-09T05:49:00.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2013-01-22T10:40:35.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "If there is no <pages> member in the current active navigation point renderSubMenu() will render the current active point itself.\r\n\r\nExample:\r\nNavigation:\r\n\r\n1. Dashboard    => \/\r\n 1.1 Reports    => \/Reports\/index\r\n  1.1.1 Daily Turnover \/Reports\/dailyturnover\/index\r\n    1.1.1.1 Display current month \/Reports\/dailyturnover\/display\r\n  1.1.2 Monthly Turnover \/Reports\/monthlyturnover\/index\r\n\r\n\r\nProblem:\r\nRight now I'm using $this->navigation()->menu()->renderSubMenu(); to display the submenus.\r\nAt 1. I'm getting: \r\n1.1 Reports\r\n\r\nAt 1.1 I'm getting:\r\n1.1.1 Daily Turnover\r\n1.1.2 Monthly Turnover\r\n\r\nAt 1.1.1 I'm getting:\r\n1.1.1.1 Display current month\r\n\r\nBut:\r\nAt 1.1.2 I'm getting:\r\n1.1.2 Monthly Turnover.\r\n\r\n\r\nHow should it be:\r\nAt 1.1.2 I should get:\r\nNothing, because there is no more submenu.\r\n\r\n\r\nrenderSubMenu() displays the active Navigationpoint if there is no more submenu found. (in my navigation.xml there are no more <pages> under 1.1.2)\r\n\r\n\r\nIn my mind that's incorrect or there should be an option to avoid this behaviour. I'm using this in combination with breadcrumbs. My user will get all informations about \"what did i click\" from the breadcrumbs, and the renderSubMenu() should give him information about \"what can i do next\".\r\n\r\nI think this issue might be the same like ZF-6673. The suggested fix with setMinDepth does not work (same behaviour). I've tried this with:\r\n $this->navigation()->menu()->renderMenu(null, array(\r\n'minDepth'         => 1,\r\n'maxDepth'         => null,\r\n'onlyActiveBranch' => true,\r\n'renderParents'    => false\r\n));\r\n\r\n\r\n\r\nGreetings\r\n-Thomas"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/5",
                "name": "Trivial"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9379\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/6",
                "name": "Closed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                "name": "frosch",
                "displayName": "Frank Br\u00fcckner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-6673",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6673",
                    "type": {
                        "name": "Related",
                        "direction": "OUTBOUND",
                        "description": "is related to"
                    }
                },
                {
                    "issueKey": "ZF-8773",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8773",
                    "type": {
                        "name": "Duplicate",
                        "direction": "OUTBOUND",
                        "description": "duplicates"
                    }
                },
                {
                    "issueKey": "ZF-9311",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9311",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10430",
                    "id": 10430,
                    "description": "Mini Release",
                    "name": "1.10.2",
                    "userReleaseDate": "24\/Feb\/10",
                    "archived": false,
                    "releaseDate": "2010-02-24",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10406",
                    "id": 10406,
                    "name": "Zend_Navigation",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/39138",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thom-",
                        "name": "thom-",
                        "displayName": "Thomas Dobrowolski",
                        "active": true
                    },
                    "body": "Sorry, I just found out, that theres a similar issue. I won't delete mine, because there's some more (hopefully userful) information, but I hope this issue linking will avoid duplicate work.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thom-",
                        "name": "thom-",
                        "displayName": "Thomas Dobrowolski",
                        "active": true
                    },
                    "created": "2010-03-10T00:00:37.000+0000",
                    "updated": "2010-03-10T00:00:37.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48619",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "body": "Works as described:\r\n\r\n{code:title=Excerpt of Zend_View_Helper_Navigation_Menu}\r\nprotected function _renderDeepestMenu(Zend_Navigation_Container $container,\r\n                                      $ulClass,\r\n                                      $indent,\r\n                                      $minDepth,\r\n                                      $maxDepth)\r\n{\r\n    \/\/ special case if active page is one below minDepth\r\n    if ($active['depth'] < $minDepth) {\r\n        if (!$active['page']->hasPages()) {\r\n            return '';\r\n        }\r\n    } else if (!$active['page']->hasPages()) {\r\n        \/\/ found pages has no children; render siblings  <-------\r\n        $active['page'] = $active['page']->getParent();\r\n    } else if (is_int($maxDepth) && $active['depth'] +1 > $maxDepth) {\r\n        \/\/ children are below max depth; render siblings\r\n        $active['page'] = $active['page']->getParent();\r\n    }\r\n}\r\n{code}\r\n\r\nI think we can extend {{Zend_View_Helper_Navigation_Menu::renderSubMenu()}} without BC break:\r\n{code}\r\npublic function renderSubMenu(Zend_Navigation_Container $container = null,\r\n                              $ulClass = null,\r\n                              $indent = null,\r\n                              $renderSiblingsIfNoChildren = true)\r\n{\r\n    return $this->renderMenu($container, array(\r\n        'indent'                     => $indent,\r\n        'ulClass'                    => $ulClass,\r\n        'minDepth'                   => null,\r\n        'maxDepth'                   => null,\r\n        'onlyActiveBranch'           => true,\r\n        'renderParents'              => false,\r\n        'renderSiblingsIfNoChildren' => $renderSiblingsIfNoChildren,\r\n    ));\r\n}\r\n{code}\r\n(A better name for the parameter is needed! ;))",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2011-10-05T23:28:59.000+0000",
                    "updated": "2011-10-05T23:28:59.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9379\/transitions"
}