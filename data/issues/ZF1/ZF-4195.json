{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4195",
    "key": "ZF-4195",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_File throws warning when it comes to validation"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField",
            "value": {
                "timeestimate": 0,
                "timespent": 10
            }
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4195\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2008-09-04T22:28:52.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=milchbazi",
                "name": "milchbazi",
                "displayName": "Tobias Schifftner",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-09-04T19:09:20.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2008-09-06T03:52:59.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Hello,\n\nWhenever a validation of Zend_Form_Element_File fails, Zend_Translate_Adapter \/ PHP throws the following warning:\n\nWarning: Illegal offset type in isset or empty in Zend\\Translate\\Adapter.php on line 497\n\nThis is my example:\n{code}\n        $form = new Zend_Form(array(\n            'action'   => '\/upload',\n            'method'   => 'post',\n            'enctype'  => 'multipart\/form-data',\n            'name'\t   => 'uploadForm',\n            'elements' => array(\n                'submit' => array('submit', array(\n                    'label' => 'Go',\n                    'order' => 10,\n                )),\n            )\n        ));\n        \n        \/\/ Prepage file element\n\t\t$element = new Zend_Form_Element_File('file');\n\t\t$element->setLabel('Upload file')\n\t\t        ->setRequired(true)\n\t\t        ->setDestination($this->getCurrentDirectory())\n\t\t        ->addValidator('Count', false, 1)\n\t\t        ->addValidator('NotExists', $this->getCurrentDirectory())\n\t\t        ->addValidator('Size', false, array($size));\n\n        $form->addElement($element, 'file');\n{code}\nAs you can see, I was not able to add the Zend_Form_Element_File to the array because I just didn't get the validators properly to work. This might be an issue as well. I used the trunk version from today."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4195\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/worklog\/21670",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4195",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "comment": "Inspecting code, giving right usage.",
                    "created": "2008-09-04T22:29:33.000+0000",
                    "updated": "2008-09-04T22:29:33.000+0000",
                    "started": "2008-09-04T22:28:00.000+0000",
                    "minutesSpent": 10
                }
            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10240",
                    "id": 10240,
                    "description": "Minor Release",
                    "name": "1.6.0",
                    "userReleaseDate": "02\/Sep\/08",
                    "archived": false,
                    "releaseDate": "2008-09-02",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10320",
                    "id": 10320,
                    "name": "Zend_File_Transfer",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24275",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Not an issue.\nYou set false properties.\n\nSee here:\n{code}\n->addValidator('Size', false, array($size));\n{code}\n\nBut allowed is only\nnumber, number\nor\narray(number, number)\n\nAnd you set\nnumber, array(number)\n\nSee the failure ?\n\nSimply fix your code to:\n{code}\n->addValidator('Size', false, $size);\n{code}\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2008-09-04T22:28:10.000+0000",
                    "updated": "2008-09-04T22:28:10.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24278",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=milchbazi",
                        "name": "milchbazi",
                        "displayName": "Tobias Schifftner",
                        "active": true
                    },
                    "body": "Hello Thomas,\n\nthank you for the hint. Though, I somewhere read that only the maximum size is required in the array. And the validator seems to work correctly.\n\nWell, I tried your suggestion but unfortunately there wasn't the tinniest improvement to see. The warning still occurs right beneath the error message \"The file 'Whatever.rar' is bigger than allowed\".",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=milchbazi",
                        "name": "milchbazi",
                        "displayName": "Tobias Schifftner",
                        "active": true
                    },
                    "created": "2008-09-05T05:59:56.000+0000",
                    "updated": "2008-09-05T05:59:56.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24279",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Why should there be no improvement ?\n\nBefore you got:\n{code}Warning: Illegal offset type in isset or empty in Zend\\Translate\\Adapter.php on line 497{code}\nNow you got:\n{code}The file 'Whatever.rar' is bigger than allowed{code}\n\nI see this as improvment.\n\nWhat about reading the error message?\nCould it be that the file you want to transfer is bigger than you allowed it ? :-)\n\nBtw: What should \"false\" be for a size or count value ?\nAs parameter is only integer or string allowed.... just read the manual for the proper usage.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2008-09-05T07:23:52.000+0000",
                    "updated": "2008-09-05T07:23:52.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24280",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=milchbazi",
                        "name": "milchbazi",
                        "displayName": "Tobias Schifftner",
                        "active": true
                    },
                    "body": "Nope, I never said the validation wouldn't work. I got the right validation message already before I opened this issue (I only didn't get it to work when I pass it as an array, therefore I did it almost exactly as in the manual). This issue is about the warning only. All I'm saying is, that whenever a file is transfered that isn't completely valid, the expected error message occures and with it a warning.\n\n>> What should \"false\" be for a size or count value ?\n{code}\nclass Zend_Form_Element \n{\n          public function addValidator($validator, $breakChainOnFailure = false, $options = array()) \n          { }\n}\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=milchbazi",
                        "name": "milchbazi",
                        "displayName": "Tobias Schifftner",
                        "active": true
                    },
                    "created": "2008-09-05T08:07:14.000+0000",
                    "updated": "2008-09-05T08:07:14.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24282",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "So you are using the form element... but why have you set this here ?\n{code}->addValidator('NotExists', $this->getCurrentDirectory()){code}\n\nWhat should getCurrentDirectory do here when a boolean is expected in the form helper ?\n{code} public function addValidator($validator, $breakChainOnFailure = false, $options = array()) {code}\n\nShouldn't it be \n{code}->addValidator('NotExists', false, $this->getCurrentDirectory()){code}\nregarding to your example and the method header you gave ?\n\nI would expect that giving an empty array as parameter if a file exists throws an warning about illegal offset...",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2008-09-05T08:52:45.000+0000",
                    "updated": "2008-09-05T08:52:45.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24286",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=milchbazi",
                        "name": "milchbazi",
                        "displayName": "Tobias Schifftner",
                        "active": true
                    },
                    "body": "This might be true. So I removed all validators but the size validator (otherwise I wouldn't get an error at all). \n\nWarning remains:\n{code}\n\t\t$element = new Zend_Form_Element_File('file');\n\t\t$element->setLabel('Upload file')\n\t\t        ->setRequired(true)\n\t\t        ->setDestination($this->getCurrentDirectory())\n\t\t        ->addValidator('Size', false, 2097152); \/\/ 2MB\n{code}\n\nWarning remains:\n{code}\n...->addValidator('Size', 2097152);\n{code}\n\nWarning remains:\n{code}\n...->addValidator('Size', false, array('0kB', '2097152kB', 'fileupload'));\n{code}\n\nNo warning because there is no validation at all ?!?:\n{code}\n...->setRequired(false)\n{code}\n\nMay be it IS an issue? ;-)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=milchbazi",
                        "name": "milchbazi",
                        "displayName": "Tobias Schifftner",
                        "active": true
                    },
                    "created": "2008-09-05T09:33:03.000+0000",
                    "updated": "2008-09-05T09:33:03.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24287",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "So let's clearify some things:\n\nsetRequired can not be false. This is a known problem.\nHave you set minimum and maxium for all files ?\n{code}...->addValidator('Size', false, array('0kB', '2097152kB'));{code}\n\nThis one will NOT work:\n{code}...->addValidator('Size', false, array('0kB', '2097152kB', 'fileupload'));{code}\nbecause you named you element 'file' and not 'fileupload'.\n\nAnd related to your warning:\n{code}Warning: Illegal offset type in isset or empty in Zend\\Translate\\Adapter.php on line 497{code}\nThis warning is thrown by Zend_Translate and not Zend_File_Transfer.\nIt seems as you tried to translate a array into another language.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2008-09-05T09:44:26.000+0000",
                    "updated": "2008-09-05T09:44:26.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24291",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=milchbazi",
                        "name": "milchbazi",
                        "displayName": "Tobias Schifftner",
                        "active": true
                    },
                    "body": ">>setRequired can not be false. This is a known problem.\nYes, I read that already\n\n{code}\n...->addValidator('Size', false, array('0kB', '2097152kB', 'fileupload'));\n{code}\nworks, because I changed it to make sure it has nothing to do with the name (should have mentioned)\n\n>>This warning is thrown by Zend_Translate and not Zend_File_Transfer.\nWell, this might be true. But as I have not defined a string to translate, Zend_File_Transfer does it for me (or tries). So I think, may be I'm wrong, that it is a Zend_File_Transfer problem, because it does not pass the strings\/arrays correctly to Zend_Translate.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=milchbazi",
                        "name": "milchbazi",
                        "displayName": "Tobias Schifftner",
                        "active": true
                    },
                    "created": "2008-09-05T10:43:55.000+0000",
                    "updated": "2008-09-05T10:43:55.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24292",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=milchbazi",
                        "name": "milchbazi",
                        "displayName": "Tobias Schifftner",
                        "active": true
                    },
                    "body": "\n>>Have you set minimum and maxium for all files ?\n\nAh, forgot to mention, that I only upload one file at a time with only one Zend_Form_Element_File.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=milchbazi",
                        "name": "milchbazi",
                        "displayName": "Tobias Schifftner",
                        "active": true
                    },
                    "created": "2008-09-05T10:45:48.000+0000",
                    "updated": "2008-09-05T10:45:48.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24295",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": ">>>>This warning is thrown by Zend_Translate and not Zend_File_Transfer.\n>>Well, this might be true. But as I have not defined a string to translate, Zend_File_Transfer does it for me (or\n>>tries). So I think, may be I'm wrong, that it is a Zend_File_Transfer problem, because it does not pass the\n>>strings\/arrays correctly to Zend_Translate.\n\nSomewhere in your code you have defined a translation object.\nZend_File_Transfer has no relation to Zend_Translate, no line which allows to call it.\nNor does Zend_File_Transfer define any strings to be translated.\n\nCan it be that you defined a translation for Zend_Form and not for Zend_File_Transfer ?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2008-09-05T11:12:41.000+0000",
                    "updated": "2008-09-05T11:12:41.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24302",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=milchbazi",
                        "name": "milchbazi",
                        "displayName": "Tobias Schifftner",
                        "active": true
                    },
                    "body": "\nYes, that's definite... But shouldn't Zend_Translate be supported by all Zend_Form_Element_* classes? So it is an issue ;-)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=milchbazi",
                        "name": "milchbazi",
                        "displayName": "Tobias Schifftner",
                        "active": true
                    },
                    "created": "2008-09-05T15:33:13.000+0000",
                    "updated": "2008-09-05T15:33:13.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24311",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Probably...\nGenerally Zend_Form_Element which is the parent of all Zend_Form_Elements handles all translations.\n\nBut why is this then a problem of Zend_File_Transfer ???\nThis is where I don't get the clue of your issue.\n\nAnd just to mention:\nA warning of Zend_Translate does not stop validation. It is thrown after validation has occured.\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2008-09-06T01:48:51.000+0000",
                    "updated": "2008-09-06T01:48:51.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24313",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=milchbazi",
                        "name": "milchbazi",
                        "displayName": "Tobias Schifftner",
                        "active": true
                    },
                    "body": "I see what you mean. That's true, I do not know, I only assume it has something to do with Zend_File. Otherwise all other forms would throw a warning as well... May be I can figure out tonight what really happends right before the warning. ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=milchbazi",
                        "name": "milchbazi",
                        "displayName": "Tobias Schifftner",
                        "active": true
                    },
                    "created": "2008-09-06T03:52:58.000+0000",
                    "updated": "2008-09-06T03:52:58.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4195\/transitions"
}