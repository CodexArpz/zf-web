{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8375",
    "key": "ZF-8375",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Properly handle upper case language name in TMX "
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8375\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10360",
                    "id": 10360,
                    "description": "Minor Release",
                    "name": "1.10.0",
                    "userReleaseDate": "27\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-27",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-11-26T11:06:21.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akshah123",
                "name": "akshah123",
                "displayName": "Ankit Shah",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-11-23T11:35:06.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-11-26T11:06:22.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "At present, tmx file adapter simply puts whatever language name provided in the array, keeping the case of the language in the tmx file as a key in the array. \r\n\r\nTherefore, if the file contains \"EN\", it will have $_data['EN']['test message'] = \"test message - english\";\r\n\r\nHowever, a proper locale string must be \"en\".  So, if the xml file contains \"EN\", adapter does not find the message for query against locale \"en\".\r\n\r\nIt will return \"test message\" instead of \"test message - english\".  It is not efficient to change \"EN\" in xml to \"en\" as this file is generated by an editor which keeps the language as upper case.  \r\n\r\nZF should do one of the following:\r\n\r\n1. Convert locale to lower case for user.\r\n2. Error out the xml file as it is not a valid file.  (As you cannot set locate to \"EN\")."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8375\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10380",
                    "id": 10380,
                    "description": "Mini Release",
                    "name": "1.9.5",
                    "userReleaseDate": "27\/Oct\/09",
                    "archived": false,
                    "releaseDate": "2009-10-27",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10099",
                    "id": 10099,
                    "name": "Zend_Translate",
                    "description": "Provides translation functionality, based on standards such as TMX and Gettext.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36434",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "1. can not be done... it would disallow en_US as it would convert it to en_us making the same problems for region as before for language.\r\n\r\n2. can not be done as invalid files are ignored while processing a directory search",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-11-23T11:47:53.000+0000",
                    "updated": "2009-11-23T11:47:53.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36435",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akshah123",
                        "name": "akshah123",
                        "displayName": "Ankit Shah",
                        "active": true
                    },
                    "body": "For 1. it makes sense that the last two are upper cased.  However, is it not possible to make sure that we store en_us as en_US by simply splitting the string and making sure that first part is always lower cased and second part is always upper cased?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akshah123",
                        "name": "akshah123",
                        "displayName": "Ankit Shah",
                        "active": true
                    },
                    "created": "2009-11-23T11:50:22.000+0000",
                    "updated": "2009-11-23T11:50:22.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36436",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akshah123",
                        "name": "akshah123",
                        "displayName": "Ankit Shah",
                        "active": true
                    },
                    "body": "So, to elaborate, how about if we change line # 114 on Tmx.php from:\r\n\r\n$this->_tuv = $attrib['xml:lang'];\r\n\r\nto:\r\n\r\n$tuv_array = explode(\"_\", $attrib['xml:lang']);\r\n$this->_tuv = strtolower($tuv_array[0]). (($tuv_array[1])?\"_\".strtoupper($tuv_array[1]):\"\");",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akshah123",
                        "name": "akshah123",
                        "displayName": "Ankit Shah",
                        "active": true
                    },
                    "created": "2009-11-23T11:57:00.000+0000",
                    "updated": "2009-11-23T11:57:00.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36437",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akshah123",
                        "name": "akshah123",
                        "displayName": "Ankit Shah",
                        "active": true
                    },
                    "body": "sorry properly formatted message for to:\r\n{quote}\r\n$tuv_array = explode(\"_\", $attrib['xml:lang']);\r\n$this->_tuv = strtolower($tuv_array[0]). (($tuv_array[1])?\"\".strtoupper($tuv_array[1]):\"\");\r\n{quote}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akshah123",
                        "name": "akshah123",
                        "displayName": "Ankit Shah",
                        "active": true
                    },
                    "created": "2009-11-23T11:59:37.000+0000",
                    "updated": "2009-11-23T11:59:37.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36438",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Does not work as a locale can include also other informations.\r\nAnd we expect that the lang attribut holds the locale information and not only the lang.\r\n\r\nxml:lang could for example look like this:\r\nar_Arab_JE\r\nor\r\nde_DE_Punji",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-11-23T12:04:07.000+0000",
                    "updated": "2009-11-23T12:04:07.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36442",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akshah123",
                        "name": "akshah123",
                        "displayName": "Ankit Shah",
                        "active": true
                    },
                    "body": "Hi Thomas,\r\n\r\nThanks for your quick reply and attention.  I apologize if I am totally missing the point. \r\n\r\nIn any case, how about just simply changing the language part \"EN\" to lower case \"en\":\r\n\r\n{quote}\r\n$this->_tuv = strtolower($tuv_array[0]). (($tuv_array[1])?\"_\".implode(\"_\", array_slice($tuv_array,1) ):\"\");\r\n{quote}\r\n\r\nI think the code definately needs to change one way or the other. If the case cannot be changed to lowercase, then xml should not be preocessed.  In my opinion, it does not make sense to process and store XML data if it cannot be accessed. ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akshah123",
                        "name": "akshah123",
                        "displayName": "Ankit Shah",
                        "active": true
                    },
                    "created": "2009-11-23T15:19:37.000+0000",
                    "updated": "2009-11-23T15:19:37.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36450",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "I agree with xml:lang being an locale identifier.\r\nThat's the reason why I did not close this issue.\r\n\r\nBut, and this is more important for you, a locale is never uppercased.\r\n\r\nThis means that EN will also not be recognised afterwards.\r\nen-us, en_us, en-US, en_US, en-us-Latn, en-us-ISO8859 and so on would then be recognised and switched to en_US.\r\n\r\nIn future an notice will be raised when an unidentified locale has been found. But the data will still be added. You could be in need of this feature when you extend the base class. And you could turn off the notice by an already existing option.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-11-23T23:57:47.000+0000",
                    "updated": "2009-11-23T23:57:47.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36464",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akshah123",
                        "name": "akshah123",
                        "displayName": "Ankit Shah",
                        "active": true
                    },
                    "body": "Thanks, Thomas.  That makes sense.  If at all possible, it would be great if you can keep the update to the class such that a person extending the tmx adapter can override behavior for matching locale by overriding a method.  \r\n\r\nEither way, I appreciate your time and please keep up the good work.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akshah123",
                        "name": "akshah123",
                        "displayName": "Ankit Shah",
                        "active": true
                    },
                    "created": "2009-11-24T07:29:33.000+0000",
                    "updated": "2009-11-24T07:29:33.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36526",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "New feature implemented with r19261 as described before.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-11-26T11:06:21.000+0000",
                    "updated": "2009-11-26T11:06:21.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8375\/transitions"
}