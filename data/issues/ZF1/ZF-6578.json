{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6578",
    "key": "ZF-6578",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Tag: Bug in Zend_Tag_Cloud_Decorator_HtmlTag->setClassList()"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6578\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10310",
                    "id": 10310,
                    "description": "Mini Release",
                    "name": "1.8.1",
                    "userReleaseDate": "12\/May\/09",
                    "archived": false,
                    "releaseDate": "2009-05-12",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-05-08T09:47:59.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=codeswitch",
                "name": "codeswitch",
                "displayName": "Canio Sileo",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-05-08T09:12:57.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-05-08T11:50:46.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "Zend_Tag",
                "Zend_Tag_Cloud_Decorator_HtmlTag"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "When using Zend_Tag_Cloud_Decorator_HtmlTag->setClassList(), instead of assigning the className, I'm getting the weightValue of a Zend_Tag_Item.\n\nI have this code in my viewscript:\n\n\/\/ Create the item list\n$list = new Zend_Tag_ItemList();\n\n\/\/ Assign tags to it\n$list[] = new Zend_Tag_Item(array('title' => 'Code', 'weight' => 50, 'params' => array('url' => WEBHOST)));\n$list[] = new Zend_Tag_Item(array('title' => 'Zend Framework', 'weight' => 1));\n$list[] = new Zend_Tag_Item(array('title' => 'PHP', 'weight' => 5));\n\n\/\/ Spread absolute values on the items\n$list->spreadWeightValues(array(1, 2, 3, 4, 5, 6, 7, 8, 9, 10));\n\n$cloud = new Zend_Tag_Cloud();\n$cloud->setItemList($list);\n\/\/ Cloud-Decorator\n$cloudDecorator = new Zend_Tag_Cloud_Decorator_HtmlCloud();\n$cloudDecorator->setHtmlTags(array('div' => array('class' => 'tagcloud')));\n$cloud->setCloudDecorator($cloudDecorator);\n\/\/ Tag-Decorator\n$tagDecorator = new Zend_Tag_Cloud_Decorator_HtmlTag();\n$tagDecorator->setHtmlTags(array());\n$tagDecorator->setMaxFontSize(26);\n$tagDecorator->setMinFontSize(10);\n$tagDecorator->setFontSizeUnit('px');\n$tagDecorator->setClassList(array('text-color-theme'));\n$cloud->setTagDecorator($tagDecorator);\n\nBy using $tagDecorator->setClassList(array('text-color-theme')); I get this html-code:\n\n<div class=\"tagcloud\">\n      <a class=\"10\" href=\"http:\/\/localhost\/aboutpixel\">Code<\/a>\n      <a class=\"text-color-theme\" href=\"\">Zend Framework<\/a>\n      <a class=\"2\" href=\"\">PHP<\/a>\n<\/div>\n\nAs you see, the second a-tag is correct, but the other two have numbers as classNames. \n\nI tracked it down to Zend\\Tag\\Cloud\\Decorator\\HtmlTag.php in Line 251, where the className should be assigned, not the weightValue.\n\nHere is a var_dump of one tag-item:\n\nobject(Zend_Tag_Item)[434]\n  protected '_title' => string 'Code' (length=4)\n  protected '_weight' => float 50\n  protected '_params' => \n    array\n      'url' => string 'http:\/\/localhost\/testpage' (length=27)\n      'weightValue' => int 10\n  protected '_skipOptions' => \n    array\n      0 => string 'options' (length=7)\n      1 => string 'param' (length=5)"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6578\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dasprid",
                "name": "dasprid",
                "displayName": "Ben Scholzen",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10241",
                    "id": 10241,
                    "description": "Minor Release",
                    "name": "1.8.0",
                    "userReleaseDate": "30\/Apr\/09",
                    "archived": false,
                    "releaseDate": "2009-04-30",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10405",
                    "id": 10405,
                    "name": "Zend_Tag",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30773",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dasprid",
                        "name": "dasprid",
                        "displayName": "Ben Scholzen",
                        "active": true
                    },
                    "body": "This is actually no bug of the decorator but of Zend_Tag_ItemList. I currently generates a \"division by zero\"-warning when just a single value is supplied. By the way:\n\na) you don't have to spread weight values yourself when using a standard decorator\nb) When you set font-size settings first and then a class list, the font size settings are overriden.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dasprid",
                        "name": "dasprid",
                        "displayName": "Ben Scholzen",
                        "active": true
                    },
                    "created": "2009-05-08T09:37:54.000+0000",
                    "updated": "2009-05-08T09:37:54.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30774",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=codeswitch",
                        "name": "codeswitch",
                        "displayName": "Canio Sileo",
                        "active": true
                    },
                    "body": "Thanks for the fix.\n\nBut isn't what you wrote to *b)* in your comment another bug?\n\nI know that font-size settings are overwritten by setClassList(), but exactly the same happens vice versa. That means, I can either set font-size settings without being able to set classes (_example 1_), or I can use classes overwriting my font-size settings (_example 2_). :(\n\n_example 1_\n$tagDecorator->setClassList(array('text-color-theme'));\n$tagDecorator->setMaxFontSize(26);\n$tagDecorator->setMinFontSize(10);\n$tagDecorator->setFontSizeUnit('px');\n\n_example 2_\n$tagDecorator->setMaxFontSize(26);\n$tagDecorator->setMinFontSize(10);\n$tagDecorator->setFontSizeUnit('px');\n$tagDecorator->setClassList(array('text-color-theme'));\n\nOr did I miss something?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=codeswitch",
                        "name": "codeswitch",
                        "displayName": "Canio Sileo",
                        "active": true
                    },
                    "created": "2009-05-08T10:33:05.000+0000",
                    "updated": "2009-05-08T10:33:05.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30775",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dasprid",
                        "name": "dasprid",
                        "displayName": "Ben Scholzen",
                        "active": true
                    },
                    "body": "Yes, you are missing the fact, that it is about spreading *either* font-sizes *or* css-classes for the relative values ;)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dasprid",
                        "name": "dasprid",
                        "displayName": "Ben Scholzen",
                        "active": true
                    },
                    "created": "2009-05-08T11:50:44.000+0000",
                    "updated": "2009-05-08T11:50:44.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6578\/transitions"
}