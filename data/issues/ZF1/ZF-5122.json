{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5122",
    "key": "ZF-5122",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Required flag set to true doesn't work for checkbox element."
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5122\/votes",
                "votes": 5,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/2",
                "name": "Won't Fix"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-10-15T09:19:48.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zimnyx",
                "name": "zimnyx",
                "displayName": "Piotr Czachur",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-12-01T07:12:41.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-09-14T13:46:46.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Following code:\n==========\n        $form = new Zend_Form;\n        $form->setMethod('post');\n        $form->addElement('checkbox', 'identityVerified', array('required' => true, 'value' => 'confirmed'));\n        var_dump($form->identityVerified->getValue());\n        var_dump($form->isValid(array()));\n==========\nprints\n==========\n        string '0' (length=1)\n        boolean true\n==========\n\n\nbut isValid() should be false when no value was passed an required flag=true, like docs suggests:\n\"By default, if an element is required, but does not contain a 'NotEmpty' validator, isValid() will add one to the top of the stack, with the breakChainOnFailure flag set. This makes the required flag have semantic meaning: if no value is passed, we immediately invalidate the submission and notify the user, and prevent other validators from running on what we already know is invalid data.\"\n\nI understand that  checkbox element evaluates to 0 when it's not checked, an that's why required=true doesn't trigger validation error. If so, what's the point of using \"required\"  param for checkbox element? Maybe using \"required\" flag for this form element should throw an excepion \"No such flag\".\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5122\/watchers",
                "isWatching": false,
                "watchCount": 7
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10260",
                    "id": 10260,
                    "description": "Minor Release",
                    "name": "1.7.0",
                    "userReleaseDate": "17\/Nov\/08",
                    "archived": false,
                    "releaseDate": "2008-11-17",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10029",
                    "id": 10029,
                    "name": "Zend_Form",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/27832",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jsorgalla",
                        "name": "jsorgalla",
                        "displayName": "Jan Sorgalla",
                        "active": true
                    },
                    "body": "I also discovered this bug. This is due to Zend_Validate_NotEmpty changed its handling for strings in 1.5.3. Since it does not use empty() any more on strings, the default $_uncheckedValue (\"0\") validates to true.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jsorgalla",
                        "name": "jsorgalla",
                        "displayName": "Jan Sorgalla",
                        "active": true
                    },
                    "created": "2009-01-07T00:10:42.000+0000",
                    "updated": "2009-01-07T00:10:42.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30068",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zimnyx",
                        "name": "zimnyx",
                        "displayName": "Piotr Czachur",
                        "active": true
                    },
                    "body": "Any plans about this issue?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zimnyx",
                        "name": "zimnyx",
                        "displayName": "Piotr Czachur",
                        "active": true
                    },
                    "created": "2009-04-10T04:06:33.000+0000",
                    "updated": "2009-04-10T04:06:33.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31337",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tracer",
                        "name": "tracer",
                        "displayName": "Marius M\u00fchlberger",
                        "active": true
                    },
                    "body": "Because '0' is the default value which is passed, that means that the user did not enter anything. So if this element is required, isValid() should return false in my opinion, instead of throwing an exception as suggested above.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tracer",
                        "name": "tracer",
                        "displayName": "Marius M\u00fchlberger",
                        "active": true
                    },
                    "created": "2009-05-25T16:18:21.000+0000",
                    "updated": "2009-05-25T16:18:21.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32150",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=digitalstruct",
                        "name": "digitalstruct",
                        "displayName": "Mike Willbanks",
                        "active": true
                    },
                    "body": "I don't believe this to be a bug so to speak.  If you are looking for it to be checked (which required would ensure there is a value) you should use an InArray validator or even checking if the value is equal to something.  Changing this may break a lot of production code.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=digitalstruct",
                        "name": "digitalstruct",
                        "displayName": "Mike Willbanks",
                        "active": true
                    },
                    "created": "2009-06-24T06:29:50.000+0000",
                    "updated": "2009-06-24T06:29:50.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35233",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "I agree with Mike Willbanks here. Marking a checkbox as \"required\" indicates that you want it checked. If that's not the case, and you want to simply make sure that the value is valid, then you should use an InArray validator.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2009-10-15T09:19:33.000+0000",
                    "updated": "2009-10-15T09:19:33.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35239",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jsorgalla",
                        "name": "jsorgalla",
                        "displayName": "Jan Sorgalla",
                        "active": true
                    },
                    "body": "{quote}\r\nMarking a checkbox as \"required\" indicates that you want it checked.\r\n{quote}\r\n\r\nAnd that is exactly what is not working.\r\n\r\n{code}\r\n$form->addElement('checkbox', 'confirm', array('required' => true));\r\nvar_dump($form->isValid(array()));\r\n{code}\r\n\r\nThat always returns true, also if the checkbox is not checked because the $_uncheckedValue is a string \"0\" by default. The changed bevahiour in 1.5.3 for Zend_Validate_NotEmpty returns true in this case.\r\n\r\nThat broke my application after upgrading ZF to 1.5.3 and i had to add a\r\n{code}\r\narray('uncheckedValue' => \"\")\r\n{code}\r\noption to all my checkbox elements.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jsorgalla",
                        "name": "jsorgalla",
                        "displayName": "Jan Sorgalla",
                        "active": true
                    },
                    "created": "2009-10-15T11:34:45.000+0000",
                    "updated": "2009-10-15T11:34:45.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/41606",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gutostraube",
                        "name": "gutostraube",
                        "displayName": "Gustavo Straube",
                        "active": true
                    },
                    "body": "I'm using ZF 1.10 and this issue continues to be unfixed.\r\n\r\nThere is some workaround to turn a checbox required?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=gutostraube",
                        "name": "gutostraube",
                        "displayName": "Gustavo Straube",
                        "active": true
                    },
                    "created": "2010-07-19T11:06:47.000+0000",
                    "updated": "2010-07-19T11:06:47.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48428",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=chrisweb",
                        "name": "chrisweb",
                        "displayName": "Weber Chris",
                        "active": true
                    },
                    "body": "You can use $myFormElement->setUncheckedValue(''); then setRequired will throw an error if box is unchecked, i use this for our Terms and Conditions checkbox.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=chrisweb",
                        "name": "chrisweb",
                        "displayName": "Weber Chris",
                        "active": true
                    },
                    "created": "2011-09-14T13:46:46.000+0000",
                    "updated": "2011-09-14T13:46:46.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5122\/transitions"
}