{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9082",
    "key": "ZF-9082",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "autoload behaviour is broken when using __autoload function as only autoload mechanism"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9082\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/5",
                "name": "Cannot Reproduce"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2010-02-05T05:29:55.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=schlimmer",
                "name": "schlimmer",
                "displayName": "Johannes Schlimm",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-02-04T06:48:23.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-02-16T20:03:57.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I'm not sure wether it's a general problem or only ocurres in conjunction with Zend_Validate::is().\r\n\r\nSince ZF 1.9.7 the following did work:\r\n{noformat}\r\n<?php\r\nini_set('include_path', [Path to ZF library folder]);\r\n\r\nfunction __autoload($class) {\r\n  require(str_replace('_', '\/', $class) . '.php');\r\n}\r\n\r\necho Zend_Validate::is('1', 'Int');\r\n{noformat}\r\n\r\nThis is no longer working when using ZF 1.10.0. All I get is a 'Failed opening required 'Int.php'' message.\r\n\r\nBut it's working this way:\r\n{noformat}\r\n<?php\r\nini_set('include_path', [Path to ZF library folder]);\r\n\r\nrequire_once(\"Zend\/Loader.php\");\r\nrequire_once(\"Zend\/Loader\/Autoloader.php\");\r\n$autoloader = Zend_Loader_Autoloader::getInstance();\r\necho Zend_Validate::is('1', 'Int');\r\n{noformat}\r\n\r\nBecause I can't find any hint describing this modified behaviour I guess it's a bug introduced in ZF 1.10.0"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9082\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10360",
                    "id": 10360,
                    "description": "Minor Release",
                    "name": "1.10.0",
                    "userReleaseDate": "27\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-27",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [

            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38251",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "You shouldn't be defining __autoload(); the recommended method for autoloading (both by the PHP project as well as ZF) is to register functions with spl_autoload. You _will_ get unpredictable and unexpected results if you define __autoload() and also have spl_autoload in play (which is what Zend_Loader_Autoloader registers with).",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2010-02-04T08:21:23.000+0000",
                    "updated": "2010-02-04T08:21:23.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38262",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=schlimmer",
                        "name": "schlimmer",
                        "displayName": "Johannes Schlimm",
                        "active": true
                    },
                    "body": "Please have a look at line 200 of Zend\/Validate.php:\r\n{noformat}\r\nif (!class_exists($className)) {\r\n{noformat}\r\n\r\nThe documentation at http:\/\/www.php.net\/manual\/en\/function.class-exists.php says:\r\n{noformat}\r\nbool class_exists  ( string $class_name  [, bool $autoload = true  ] )\r\n...\r\nsince PHP 5.0.0\r\n{noformat}\r\n\r\nThe second parameter defaults to true! So the call to class_exists() on line 200 in Zend\/Validate.php tries to load the class although it's obvious it shouldn't! Second problem: At that point $className is 'Int' (not 'Zend_Validate_Int'). So it won't succeed. Imho the lines above line 200 in Zend\/Validate.php are not correct ($className should be 'Zend_Validate_Int' on line 200) and also class_exists() should be called with explicitly set second parameter with a value of false.\r\n\r\nBtw.: Changing\r\n{noformat}\r\nif (!class_exists($className)) {\r\n{noformat}\r\nto\r\n{noformat}\r\nif (!class_exists($className, false)) {\r\n{noformat}\r\nsolved the problem for me.\r\nBut still imho it's no correct, that $className has the value 'Int' on that line.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=schlimmer",
                        "name": "schlimmer",
                        "displayName": "Johannes Schlimm",
                        "active": true
                    },
                    "created": "2010-02-04T13:45:30.000+0000",
                    "updated": "2010-02-04T13:45:30.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38263",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=schlimmer",
                        "name": "schlimmer",
                        "displayName": "Johannes Schlimm",
                        "active": true
                    },
                    "body": "Sorry, should be \"class_exists\"",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=schlimmer",
                        "name": "schlimmer",
                        "displayName": "Johannes Schlimm",
                        "active": true
                    },
                    "created": "2010-02-04T14:00:18.000+0000",
                    "updated": "2010-02-04T14:00:18.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38272",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Actually, it's doing exactly what it should be -- it attempts to autoload first, in the event that the short name, 'Int', is autoloadable. If the class is not found by the autoloader, it then falls back to looping over registered prefix paths, prepending prefix paths to the passed name and attempting to load the class via Zend_Loader::loadClass() if a matching file is detected via Zend_Loader::isReadable().\r\n\r\nThis logic has not changed for many, many months.\r\n\r\nThe real issue is that your __autoload() function is doing a require() instead of an include() or include_once(). Autoloaders should not throw exceptions or result in fatal errors; they should return boolean false if unable to resolve the class, and the classname otherwise.\r\n\r\nOddly, I've tried your exact setup in both PHP 5.2.12 and PHP 5.3.1, and it echoes \"1\" in both cases -- I get no failure. \r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2010-02-05T05:29:02.000+0000",
                    "updated": "2010-02-05T05:29:02.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38280",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=schlimmer",
                        "name": "schlimmer",
                        "displayName": "Johannes Schlimm",
                        "active": true
                    },
                    "body": "Guess what? It's again an issue related to [http:\/\/framework.zend.com\/manual\/en\/performance.classloading.html], section \"Strip require_once calls with find and sed\". That's also the reason why i had to require_once(\"Zend\/Loader.php\"); in my second example: I'm using a version of ZF 1.10.0 that has those require_once calls commented out. \r\n\r\nIt's not the first time I fall into this trap. There were issues with it in the past too. I just didn't think about it, because for some time there was no problem caused by it.\r\n\r\nSo maybe it's a documentation fault. In other words: The documentation of the above mentioned part of the performance guide is not correct for ZF 1.10.0, because if one follows the instructions, also *all* require_once calls for Zend_Loader get commented out. And that is at least one time too much.\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=schlimmer",
                        "name": "schlimmer",
                        "displayName": "Johannes Schlimm",
                        "active": true
                    },
                    "created": "2010-02-05T11:40:01.000+0000",
                    "updated": "2010-02-05T11:40:01.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38505",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dmuir",
                        "name": "dmuir",
                        "displayName": "David Muir",
                        "active": true
                    },
                    "body": "I had the same issue as Johannes (was using require in my autoloader), but changing to include still throws warnings. It also still had the same issue when registering my autoloader with spl_autoload. So I tried using Zend_Loader_Autoload, and it loads the validator without throwing any errors\/warnings. But it can't find my model classes (which aren't namespaced).\r\nSo I set fallbackAutloader = true. Now it finds my models, but throws warnings whenever Zend_Validate::is() is used.\r\n\r\nThe problem existed prior to 1.10.0 if you added a default namespace and the class didn't exist under that namespace (and the namespace hadn't been explicitly added to the autoloader).\r\nZend_Filter::filterStatic() uses Zend_Validate::is()'s old behaviour, so works fine unless namespaces are added.\r\n\r\nto reproduce:\r\n{code}\r\nrequire 'Zend\/Loader\/Autoloader.php';\r\n$autoloader = Zend_Loader_Autoloader::getInstance();\r\n\r\n\/\/works\r\nZend_Filter::addDefaultNamespaces('Foo');\r\necho Zend_Filter::filterStatic('1', 'Int');\r\n\r\n\/\/works\r\necho Zend_Validate::is('1', 'Int');\r\n\r\n\/\/fails to load Foo\/Int.php\r\n$autoloader->registerNamespace('Foo');\r\necho Zend_Filter::filterStatic('1', 'Int');\r\n\r\n$autoloader->unregisterNamespace('Foo');\r\n\r\n\/\/fails to load Foo\/Int.php\r\n$autoloader->setFallbackAutoloader(true);\r\necho Zend_Filter::filterStatic('1', 'Int');\r\n\r\n\/\/fails to load Int.php \r\necho Zend_Validate::is('1', 'Int');\r\n{code}\r\n\r\nEssentially, Zend_Validate::is() and Zend_Filter::filterStatic() are not fully compatible with Zend_Loader_Autoload.\r\nNot sure what other classes have the problem.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dmuir",
                        "name": "dmuir",
                        "displayName": "David Muir",
                        "active": true
                    },
                    "created": "2010-02-16T20:03:56.000+0000",
                    "updated": "2010-02-16T20:03:56.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9082\/transitions"
}