{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10473",
    "key": "ZF-10473",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Enable\/disable referentical contraint checking"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/2",
                "name": "New Feature",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10473\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/2",
                "name": "Won't Fix"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2011-03-15T09:58:51.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rrafal",
                "name": "rrafal",
                "displayName": "Rafal Radulski",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-09-19T14:52:01.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-03-15T09:58:51.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I suggest to add one or two methods to Zend_Db_Adapter. They would enable and disable referential constraint checking (or foreign key checking). This is a common feature in databases, but it requires different SQL calls. For example:\r\n\r\nMsSQL: ALTER TABLE ? NOCHECK CONSTRAINT ALL\r\nMySQL: SET foreign_key_checks = 0\r\nSQLite: PRAGMA foreign_keys = OFF\r\nPgSQL: SET CONSTRAINTS ALL DEFERRED (?)\r\n\r\nThis feature would be useful was setting up database tables during testing, importing data, and dropping multiple tables. It would be used by Zend_Test_PHPUnit_Db_Operation_* classes. I know that it will be difficult or impossible to implement this consistently across all databases. However, I think it would be much worth it.\r\n\r\nI suggest the following methods:\r\nenableReferentialConstraints()\r\ndisableReferentialConstraints()\r\nor:\r\nenableReferentialConstraints(boolean)\r\n\r\nusage:\r\n$connection->enableReferentialConstriants(true);\r\ntry{\r\n    \/\/ execute SQL statments\r\n    \/\/\r\n    $connection->enableReferentialConstriants(false);\r\n} catch(Exception ex) {\r\n    $connection->enableReferentialConstriants(false);\r\n    \/\/ handle or re-throw exception\r\n}\r\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10473\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                "name": "freak",
                "displayName": "Dolf Schimmel (Freeaqingme)",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10012",
                    "id": 10012,
                    "name": "Zend_Db",
                    "description": "interfaces, APIs, and adapters for various third-party data stores",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/45490",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sosy",
                        "name": "sosy",
                        "displayName": "Shawn Ostler",
                        "active": true
                    },
                    "body": "For SQLite, I am currently extending the Db_Adapter simply to turn on foreign keys. This should be added, at least for SQLite, since foreign keys are disabled.\r\n\r\n-application.ini\r\n\r\nresources.db.adapter = \"pdo_sqlite\"\r\nresources.db.params.dbname = APPLICATION_PATH \"\/..\/database\/production.sqlite3\"\r\nresources.db.params.adapterNamespace = 'My_Db_Adapter'\r\nresources.db.params.enable_foreign_keys = 1\r\n\r\n<?php\r\n\r\nclass My_Db_Adapter_Pdo_Sqlite extends Zend_Db_Adapter_Pdo_Sqlite {\r\n\t\r\n\tprotected function _connect() {\r\n\t\t\r\n\t\t\/**\r\n         * if we already have a PDO object, no need to re-connect.\r\n         *\/\r\n        if ($this->_connection) {\r\n            return;\r\n        }\r\n\t\t\r\n\t\tparent::_connect();\r\n\t \r\n\t\tif (isset($this->_config['enable_foreign_keys'])  && $this->_config['enable_foreign_keys']) {\r\n\t\t\t$q = $this->_profiler->queryStart('enable_foreign_keys');\r\n\t\t\t\r\n\t\t\t$retval = $this->_connection->exec('PRAGMA foreign_keys=1');\r\n\t        if ($retval === false) {\r\n\t            $error = $this->_connection->errorInfo();\r\n\t            \/** @see Zend_Db_Adapter_Exception *\/\r\n\t            require_once 'Zend\/Db\/Adapter\/Exception.php';\r\n\t            throw new Zend_Db_Adapter_Exception($error[2]);\r\n\t        }\r\n\t        \r\n\t\t\t$this->_profiler->queryEnd($q);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sosy",
                        "name": "sosy",
                        "displayName": "Shawn Ostler",
                        "active": true
                    },
                    "created": "2011-03-11T12:48:26.000+0000",
                    "updated": "2011-03-11T12:48:26.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/45491",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "body": "Why would you want to have this feature implemented? If it's something you use regularly (or anywhere) you're doing something wrong. If you don't want referential integrity, then I'd suggest you simply don't enable it in  your RDBMS in the first place.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "created": "2011-03-12T09:30:02.000+0000",
                    "updated": "2011-03-12T09:30:02.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/45511",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sosy",
                        "name": "sosy",
                        "displayName": "Shawn Ostler",
                        "active": true
                    },
                    "body": "You are absolutely right and thank you for pointing this out. I have created another issue, http:\/\/framework.zend.com\/issues\/browse\/ZF-11176, where I ask for enabling, only in sqlite and also to deny disabling.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sosy",
                        "name": "sosy",
                        "displayName": "Shawn Ostler",
                        "active": true
                    },
                    "created": "2011-03-15T09:50:50.000+0000",
                    "updated": "2011-03-15T09:50:50.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/45512",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "body": "Resolving issue as wont fix.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "created": "2011-03-15T09:58:51.000+0000",
                    "updated": "2011-03-15T09:58:51.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10473\/transitions"
}