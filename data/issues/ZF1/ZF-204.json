{
    "expand": "html",
    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-204",
    "key": "ZF-204",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Properly supporting table aliases in Zend_Db_Select"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-204\/votes",
                "votes": 3,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/version\/10021",
                    "id": 10021,
                    "description": "Preview release; DB, Filter, Log",
                    "name": "0.8.0",
                    "userReleaseDate": "21\/Feb\/07",
                    "archived": true,
                    "releaseDate": "2007-02-21",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2007-02-08T20:48:14.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=mislav",
                "name": "mislav",
                "displayName": "Mislav Marohni?",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2006-07-07T05:03:47.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2007-07-05T14:43:13.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "In SQL queries tables are almost always joined to another. Sometimes they are aliased to improve readability or to allow subsequent joins of the same table or self-joins. Zend_Db_Select doesn't really support or understand table aliases, but this patch makes it right.\n\nh2. Examples\n\nGetting columns from a self-join:\n\n{noformat}$select->from('foo', 'name')->from('foo AS bar', 'name,description')->where('some conditions...'){noformat}\n\nwould result in:\n\n{noformat}SELECT name,name,description FROM foo, foo AS bar [...]{noformat}\n\nThis patch makes the result become:\n\n{noformat}SELECT foo.name, bar.name, bar.description FROM foo, foo AS bar [...]{noformat}\n\nIt also allows for an alias be specified with an array of [table => alias] form (result is same as previous):\n\n{noformat}$select->from('foo', 'name')->from(array('foo' => 'bar'), 'name,description'){noformat}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-204\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                "name": "bkarwin",
                "displayName": "Bill Karwin",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-121",
                    "issue": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-121",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/attachment\/10034",
                    "filename": "Select-patch.diff",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=mislav",
                        "name": "mislav",
                        "displayName": "Mislav Marohni?",
                        "active": true
                    },
                    "created": "2006-07-07T05:05:30.000+0000",
                    "size": 6451,
                    "mimeType": "application\/octet-stream",
                    "content": "http:\/\/framework.zend.com\/issues\/secure\/attachment\/10034\/Select-patch.diff"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/attachment\/10284",
                    "filename": "zend-db.patch",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=jollytoad",
                        "name": "jollytoad",
                        "displayName": "Mark Gibson",
                        "active": true
                    },
                    "created": "2007-02-26T12:21:28.000+0000",
                    "size": 4940,
                    "mimeType": "text\/plain",
                    "content": "http:\/\/framework.zend.com\/issues\/secure\/attachment\/10284\/zend-db.patch"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/version\/10010",
                    "id": 10010,
                    "description": "Preview Release",
                    "name": "0.1.3",
                    "userReleaseDate": "18\/Apr\/06",
                    "archived": true,
                    "releaseDate": "2006-04-18",
                    "released": true
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/version\/10000",
                    "id": 10000,
                    "description": "Preview Release",
                    "name": "0.1.4",
                    "userReleaseDate": "29\/Jun\/06",
                    "archived": true,
                    "releaseDate": "2006-06-29",
                    "released": true
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/version\/10001",
                    "id": 10001,
                    "description": "Preview Release",
                    "name": "0.1.5",
                    "userReleaseDate": "11\/Jul\/06",
                    "archived": true,
                    "releaseDate": "2006-07-11",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/component\/10132",
                    "id": 10132,
                    "name": "Zend_Db_Select",
                    "description": "OO interface to building a SELECT SQL query.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10320",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=mislav",
                        "name": "mislav",
                        "displayName": "Mislav Marohni?",
                        "active": true
                    },
                    "body": "This patch modifies some internals to make Zend_Db_Select a little bit smarter",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=mislav",
                        "name": "mislav",
                        "displayName": "Mislav Marohni?",
                        "active": true
                    },
                    "created": "2006-07-07T05:05:30.000+0000",
                    "updated": "2006-07-07T05:05:30.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10333",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "body": "Also see [ZF-121].",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "created": "2006-07-07T17:31:03.000+0000",
                    "updated": "2006-07-07T17:31:03.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/11362",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "Changing fix version to 0.8.0.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2006-11-13T15:14:33.000+0000",
                    "updated": "2006-11-13T15:14:33.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12122",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "Recategorize in Zend_Db_Select component.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2007-01-05T17:02:21.000+0000",
                    "updated": "2007-01-05T17:02:21.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12431",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "Comment: we need to use an additional optional parameter to the from() clause for the correlation name.  The string 'foo AS bar' is actually a legal SQL identifier if one uses delimited identifiers.  \n\nThat is:\n\n{code}\nSELECT *\nFROM \"foo AS bar\"\n{code}\n\nis legal and has different meaning from:\n\n{code}\nSELECT *\nFROM foo AS bar\n{code}\n",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2007-01-29T11:57:10.000+0000",
                    "updated": "2007-01-29T11:57:10.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12432",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "Ah, now I understand the patch.  Never mind, using an associative array is fine with me. ",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2007-01-29T11:59:14.000+0000",
                    "updated": "2007-01-29T11:59:14.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12622",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "Implemented in revision 3320.\n\nTables are now tracked by their correlation name, not their physical name.  The correlation name must be unique in a query, but the table name can be duplicated, e.g. for self-joins.\n\nColumns in the select-list are prepended by their correlation name.\n\nYou can specify correlation names by passing a one-element associative array in place of a string for the table name:\n{code}\n$select->from( array('table1' => 'alias') );\n{code}\n\nIf you pass a simple string for the table name, Zend_Db_Select generates a correlation name for you, and tries to make sure it is unique in this query, to support self-joins.\n\nIf you have a column that shouldn't be prepended by a correlation name, use '' as the name.  For example:\n{code}\n$select->from( '', 'count(*)');\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2007-02-08T20:48:14.000+0000",
                    "updated": "2007-02-08T20:48:14.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12979",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=jollytoad",
                        "name": "jollytoad",
                        "displayName": "Mark Gibson",
                        "active": true
                    },
                    "body": "I've just upgraded the framework to v0.8.0, and this concept is causing me issues.\n(I'm using PostgreSQL, and make a lot of use of it's schema facility)\n\nI think the associative array (table => correlation) would be much more useful the other way round,\nie (correlation => table), otherwise we cannot use Zend_Db_Expr() as a table name.\n\nFor example, previously I was using schema qualified tables and aliases in the following manner:\n\n$adapter->select()->from(\"myschema.mytable t\", array('t.mycol1','t.mycol2'))\n\nNow to continue doing this and take advantage of the correlation feature, whilst avoiding my\nqualified table name from being quoted, i'd have to do:\n\n->from(array(new Zend_Db_Expr(\"myschema.mytable\") => 't'), array('mycol1', 'mycol2'))\n\nOnly, this wont work because PHP doesn't allow the object as the key.\n\nAlso, PostgreSQL supports table returning functions, so statements like:\n   SELECT t.* FROM myfunc('stuff') t;\nare not unusual in that database system. Which would require use of Zend_Db_Expr().\n\nFor further details see:\nhttp:\/\/www.postgresql.org\/docs\/8.2\/interactive\/functions-srf.html\nhttp:\/\/www.postgresql.org\/docs\/8.2\/interactive\/xfunc-sql.html#AEN36424\n\nNow I know this is probably not portable anyway, portability between dbms' isn't my concern.\nYet I still find select() very useful for building up dynamic queries, and this is making it less\nuseful for me.\n\nI'd like to suggest switching to ($correlationName => $tableName), but it's probably too late for this.\n(or is it?)\nSo how about a two value array ($tableName, $correlationName) - this would allow use of\nZend_Db_Expr() as a table name.\n\nIf we can agree on something, I can do the work and supply the patch.\n",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=jollytoad",
                        "name": "jollytoad",
                        "displayName": "Mark Gibson",
                        "active": true
                    },
                    "created": "2007-02-26T10:01:19.000+0000",
                    "updated": "2007-02-26T10:01:19.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12981",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "Hi Mark, yes I think it's worthwhile to swap the order of the associative array.  I regret that we released ZF 0.8 and this will cause some headache, but we're still in Preview Release after all.\n\nIt's even more important to make the alias first in the case of array(\"alias\" => \"column\"), which I haven't implemented yet.\n\nThe issue of supporting schema names has come up, and also many people want to be able to specify \"table.column\" without using a Zend_Db_Expr.  My proposal is that Zend_Db_Select parse any identifier as \"[[schema.]table.]column]\" and quote each one separately.  \n\nIt would mean if anyone has an identifier in their database containing a dot, they would have to use Zend_Db_Expr to override the quoting behavior, but this should be an extremely rare case.\n\nI'll probably implement both solutions above soon.  I'll log separate JIRA issues for them so I can track them.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2007-02-26T11:00:48.000+0000",
                    "updated": "2007-02-26T11:00:48.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12982",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "In the meantime, the workaround is that you have to write SQL queries yourself as strings, and then use $db->query() to run them.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2007-02-26T11:02:23.000+0000",
                    "updated": "2007-02-26T11:02:23.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12986",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=jollytoad",
                        "name": "jollytoad",
                        "displayName": "Mark Gibson",
                        "active": true
                    },
                    "body": "This patch swaps the table and correlation names,\nand quotes qualified identifiers properly.\nIt's fixed my problems anyway. Hope it may be of use.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=jollytoad",
                        "name": "jollytoad",
                        "displayName": "Mark Gibson",
                        "active": true
                    },
                    "created": "2007-02-26T12:21:28.000+0000",
                    "updated": "2007-02-26T12:21:28.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-204\/transitions"
}