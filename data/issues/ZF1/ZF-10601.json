{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10601",
    "key": "ZF-10601",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Application_Bootstrap loads not used Classes"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/21",
                "name": "Performance Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10601\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2011-08-05T08:51:03.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=croensch",
                "name": "croensch",
                "displayName": "Christoph Roensch",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-10-26T07:46:18.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-08-05T08:51:03.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "When requesting the Application to bootstrap only one resource,\r\n{code}$application->bootstrap('MultiDb');{code}\r\nall of the plugin resources referenced in application.ini will be loaded but not executed.\r\n{code}get_declared_classes(){code} lists them for example Frontcontroller.\r\nI dont think that is necessary.\r\n\\\\\r\n\\\\\r\n*[UPDATE]*\r\nThe application.ini holds configuration values for more than one resource, lets call them \"one\" and \"two\". When we only bootstrap resource \"one\" we expect that only the resource class for \"one\" is loaded.\r\n{noformat}\r\nZend_Application_Bootstrap_BootstrapAbstract\r\n  bootstrap('one')\r\n    _bootstrap('one')\r\n      _executeResource('one')\r\n        _getClassResources()\r\n        _hasPluginResource('one')\r\n          _getPluginResource('one')\r\n{noformat}\r\nthe calls go down to *getPluginResource()* wich will lookup if the ONE resource has been loaded and instantiated. If not it will trigger a loop to load ALL resources.\r\n{code:title=Zend_Application_Bootstrap_BootstrapAbstract::_getPluginResource()}\r\n...\r\n  foreach ($this->_pluginResources as $plugin => $spec) {\r\n    if (false !== $pluginName = $this->_loadPluginResource($plugin, $spec)) {\r\n      if (0 === strcasecmp($resource, $pluginName)) {\r\n        return $this->_pluginResources[$pluginName];\r\n      }\r\n      continue;\r\n    }\r\n  ...\r\n  }\r\n...\r\n{code}\r\nwich will lead to unneccesary includes.\r\n{noformat}\r\n            $this->_loadPluginResource('one')\r\n            $this->_loadPluginResource('two')\r\n            ...\r\n{noformat}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10601\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10501",
                    "id": 10501,
                    "description": "Mini Release",
                    "name": "1.11.1",
                    "userReleaseDate": "30\/Nov\/10",
                    "archived": false,
                    "releaseDate": "2010-11-30",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10390",
                    "id": 10390,
                    "name": "Zend_Application",
                    "isAssigneeTypeValid": false
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10460",
                    "id": 10460,
                    "name": "Zend_Application_Resource",
                    "description": "Plugin resources for Zend_Application",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/42740",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Zend_Application_Bootstrap always loads the Frontcontroller resource, unless you override this functionality, so it's a bad test. Are there resource classes other than the Multidb and Frontcontroller resources being loaded? If so, can you share your configuration, as well as how you're calling Zend_Application?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2010-10-26T12:51:58.000+0000",
                    "updated": "2010-10-26T12:51:58.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/42752",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=croensch",
                        "name": "croensch",
                        "displayName": "Christoph Roensch",
                        "active": true
                    },
                    "body": "I don't use the 'Standard' one, i extended the abstract class to create a generic bootstrap. Other resources are loaded too. This generic bootstrap has some extended features it would be cumbersome to explain it all. Instead i will update the description with details to what i think is the root cause in the abstract class.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=croensch",
                        "name": "croensch",
                        "displayName": "Christoph Roensch",
                        "active": true
                    },
                    "created": "2010-10-27T00:05:58.000+0000",
                    "updated": "2010-10-27T00:05:58.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/42817",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=croensch",
                        "name": "croensch",
                        "displayName": "Christoph Roensch",
                        "active": true
                    },
                    "body": "Actually, the updated description is uncool too. I've found a work-right-around by using only lowercase identifiers, thats what _getPluginResource expects. However, if you follow the documentation youre pretty much left with the default behaviour of a monolithic startup.\r\n\r\nresources.*multidb*...\r\n$application->bootstrap(array('*multidb*'))",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=croensch",
                        "name": "croensch",
                        "displayName": "Christoph Roensch",
                        "active": true
                    },
                    "created": "2010-11-03T02:39:46.000+0000",
                    "updated": "2010-11-03T02:39:46.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/47867",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=croensch",
                        "name": "croensch",
                        "displayName": "Christoph Roensch",
                        "active": true
                    },
                    "body": "I am currently converting an pre-application project to Zend_Application, plus our own extensions. I got curious if this issue is still a problem. Now i got a unit test for it, wich one could just add to the test case.\n\n{code:title=ApplicationTest.php}\n    public function testZF10601()\n    {\n        \/\/ set options\n        $this->application->setOptions(array(\n            'resources' => array(\n                \/\/ notice the lower c\n                'Frontcontroller' => array(),\n                'Db' => array(\n                    'adapter' => 'Pdo_Sqlite',\n                    'params' => array(\n                        'dbname' => ':memory:'\n                    )\n                )\n            )\n        ));\n        \/\/ notice the capital C and that Db is missing\n        $this->application->bootstrap(array('FrontController'));\n        \/\/ test\n        $this->assertFalse(\n            in_array('Zend_Application_Resource_Db', get_declared_classes()),\n            'Db Resource loaded'\n        );\n    }\n{code}\n\nI tested Zend_Application as well as _Our__Application, both worked as expected, no unwanted classes are loaded.\n\nSo i'd like this issue to be closed.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=croensch",
                        "name": "croensch",
                        "displayName": "Christoph Roensch",
                        "active": true
                    },
                    "created": "2011-08-05T08:51:03.000+0000",
                    "updated": "2011-08-05T08:51:03.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10601\/transitions"
}