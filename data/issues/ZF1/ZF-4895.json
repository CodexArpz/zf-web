{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4895",
    "key": "ZF-4895",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Layout fails to render directly assigned variables"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4895\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-08-03T15:23:51.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tporter",
                "name": "tporter",
                "displayName": "Terre Porter",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-11-10T09:47:29.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-08-03T15:23:51.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I am using the 1.6.2 version and have also checked the 1.7Pr and didn't see the render function accessing the assigned variables. I could not find any reference of the stored variables being used other than their being created. I've posted to the mailing list and send mail directly asking for confirmation and received no response. I figured this would get some kind of response.\n\nThanks, Terre\n\nFile and functions in question :\n- Zend\\Layout.php\n--- assign($spec, $value = null)\n--- __set($key, $value)\n--- render($name = null)\n\nTask:\nAssign a variable directly from actionController code to the zend_layout component instead of using a placeholder tag in the action's template. \n\nSimilar to Zend_Layout::getMvcInstance()->setLayout(tplnamehere) or Zend_Layout::getMvcInstance()->setLayoutPath(newpath), kinda.\n\nUsage :\nZend_Layout::getMvcInstance()->assign(VARIABLENAME,true);\n\nProblem :\nVariables assigned to the Zend_Layout directly do not get passed to the layout view when it is rendered. \n\n-->assign = variable stored in $this->_container  ($this->_container[$spec] = $value;)\n-->render = does not access $this->_container - Even though comment in render function says, \"assigns layout variables to view\".\n\n-- original render function --\n \/**\n     * Render layout\n     *\n     * Sets internal script path as last path on script path stack, assigns\n     * layout variables to view, determines layout name using inflector, and\n     * renders layout view script.\n     *\n     * $name will be passed to the inflector as the key 'script'.\n     *\n     * @param  mixed $name\n     * @return mixed\n     *\/\n    public function render($name = null)\n    {\n        if (null === $name) {\n            $name = $this->getLayout();\n        }\n\n        if ($this->inflectorEnabled() && (null !== ($inflector = $this->getInflector())))\n        {\n            $name = $this->_inflector->filter(array('script' => $name));\n        }\n\n        $view = $this->getView();\n\n        if (null !== ($path = $this->getViewScriptPath())) {\n            if (method_exists($view, 'addScriptPath')) {\n                $view->addScriptPath($path);\n            } else {\n                $view->setScriptPath($path);\n            }\n        } elseif (null !== ($path = $this->getViewBasePath())) {\n            $view->addBasePath($path, $this->_viewBasePrefix);\n        }\n\n        return $view->render($name);\n    }\n--------------------------------------------\n\nFix:\n\nin zend\/layout.php render function\n--- Add after : $view = $this->getView();\n\n\t\/\/ quick and dirty assign stored vars to view\n\tforeach ($this->_container as $k => $v) {\n        \t$view->$k = $v;\n      }\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4895\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10251",
                    "id": 10251,
                    "description": "Mini Release",
                    "name": "1.6.2",
                    "userReleaseDate": "13\/Oct\/08",
                    "archived": false,
                    "releaseDate": "2008-10-13",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10252",
                    "id": 10252,
                    "description": "Minor Preview Release",
                    "name": "1.7 Preview Release",
                    "userReleaseDate": "13\/Oct\/08",
                    "archived": true,
                    "releaseDate": "2008-10-13",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10270",
                    "id": 10270,
                    "name": "Zend_Layout",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33165",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tporter",
                        "name": "tporter",
                        "displayName": "Terre Porter",
                        "active": true
                    },
                    "body": "\nZend_Layout::getMvcInstance()->assign('testvar', 'testvalue');\n\nWorks without layout.php modification in 1.9.0\n\nI don't know how mark it as fixed though.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tporter",
                        "name": "tporter",
                        "displayName": "Terre Porter",
                        "active": true
                    },
                    "created": "2009-08-03T12:06:43.000+0000",
                    "updated": "2009-08-03T12:06:43.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33171",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Marking as resolved per user input.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2009-08-03T15:23:49.000+0000",
                    "updated": "2009-08-03T15:23:49.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4895\/transitions"
}