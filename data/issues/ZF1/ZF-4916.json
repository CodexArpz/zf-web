{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4916",
    "key": "ZF-4916",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Invalid bind-variable position ':P''"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4916\/votes",
                "votes": 1,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-07-17T12:23:42.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=inprogs",
                "name": "inprogs",
                "displayName": "Piotr M?sior",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-11-11T17:25:25.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-07-17T12:23:42.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "{code}\nFatal error: Uncaught exception 'Zend_Db_Statement_Exception' with message 'Invalid bind-variable position ':P'' in C:\\wamp\\www\\zf161\\library\\Zend\\Db\\Statement.php:143 Stack trace: \n#0 C:\\wamp\\www\\zf161\\library\\Zend\\Db\\Statement.php(108): Zend_Db_Statement->_parseParameters('UPDATE `pages` ...') \n#1 C:\\wamp\\www\\zf161\\library\\Zend\\Db\\Adapter\\Mysqli.php(343): Zend_Db_Statement->__construct(Object(Zend_Db_Adapter_Mysqli), 'UPDATE `pages` ...') \n#2 C:\\wamp\\www\\zf161\\library\\Zend\\Db\\Adapter\\Abstract.php(429): Zend_Db_Adapter_Mysqli->prepare('UPDATE `pages` ...') \n#3 C:\\wamp\\www\\zf161\\app\\models\\Pages.php(41): Zend_Db_Adapter_Abstract->query('UPDATE `pages` ...') \n#4 C:\\wamp\\www\\zf161\\app\\controllers\\WebasController.php(157): Pages->updatePage('1', '&lt;blockquote&...') \n#5 C:\\wamp\\www\\zf161\\library\\Zend\\Controller\\Action.php(502): WebasController->editpageAction() \n#6 C:\\wamp\\www\\zf161\\library\\Zend\\Controller\\Dispatcher\\Standard.php(293): Zend_Controller_Action->dispatch('editpageAction') \n#7 C:\\wamp\\www\\zf161\\library\\Zend\\Controller\\ in C:\\wamp\\www\\zf161\\library\\Zend\\Db\\Statement.php on line 143\n{code}\n\nI have found on this tracker that Kamil Grecki has applied patch for this problem. But STILL it doesn't work for me.... If i would pass string like {code}\" :p \" or  \"?o\"{code}... exception is rised. I have to comment off line 143 and 135 at library\\Zend\\Db\\Statement.php to be able of continue project...\n\nRegards\nPeter"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4916\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/6",
                "name": "Closed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                "name": "ralph",
                "displayName": "Ralph Schindler",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10201",
                    "id": 10201,
                    "description": "Mini Release",
                    "name": "1.6.1",
                    "userReleaseDate": "15\/Sep\/08",
                    "archived": false,
                    "releaseDate": "2008-09-15",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10012",
                    "id": 10012,
                    "name": "Zend_Db",
                    "description": "interfaces, APIs, and adapters for various third-party data stores",
                    "isAssigneeTypeValid": false
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10131",
                    "id": 10131,
                    "name": "Zend_Db_Adapter_Mysqli",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31084",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yoshida@zend.co.jp",
                        "name": "yoshida@zend.co.jp",
                        "displayName": "old of Satoru Yoshida",
                        "active": true
                    },
                    "body": "This issue is still active at 1.8 ?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yoshida@zend.co.jp",
                        "name": "yoshida@zend.co.jp",
                        "displayName": "old of Satoru Yoshida",
                        "active": true
                    },
                    "created": "2009-05-16T18:52:19.000+0000",
                    "updated": "2009-05-16T18:52:19.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31223",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=risingphoenix",
                        "name": "risingphoenix",
                        "displayName": "Marco",
                        "active": true
                    },
                    "body": "At every launch of every query with a \":\" followed by a character inside and mysqli like adapter,  the ZF launch the exception, because the regluar expression at line 123 of Zend\/Db\/Statement.php split the query in chunk of possibly parameters and the mysqli doesn't support the named parameters.\nSo every query with a time in the 'HH:MM:SS\" format, or with a comment, or with a regexp that specifies a \":\" the query falls in a exception.\n\nI think that the problem is in the logical of _parseParameters()\nIf an adapter, lile mysqli, doesn't support the named parameters, why there's the need of testing the existence any parameters?\n\nI humbly suggest the solution of change the conditions placements or, obviously, change the regular expression at 123 to avoid the problem.\n\nmany many many thanks of all your works\nps. excuse me for my poor english\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=risingphoenix",
                        "name": "risingphoenix",
                        "displayName": "Marco",
                        "active": true
                    },
                    "created": "2009-05-21T09:46:47.000+0000",
                    "updated": "2009-05-21T09:46:47.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32090",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=neraath",
                        "name": "neraath",
                        "displayName": "Christopher Weldon",
                        "active": true
                    },
                    "body": "I can attest that it doesn't seem to be a particular adapter problem, as this issue is occurring for me using the PostgreSQL adapter. \n\n{code}\nobject(Zend_Db_Statement_Exception)[281]\n  protected 'message' => string 'Invalid bind-variable position ':days'' (length=38)\n  private 'string' => string '' (length=0)\n  protected 'code' => int 0\n  protected 'file' => string '\/home\/neraath\/Development\/Workspace\/cfegroup\/library\/Zend\/Db\/Statement.php' (length=74)\n  protected 'line' => int 250\n{code}\n\nThe specific query is:\n\n{code}\nUPDATE cfegroup.payment_item_training_module SET start_date = now(), end_date = now + interval ':days days' WHERE payment_id = :paymentId and group_id IS NULL\n{code}\n\nSame version as mentioned above. ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=neraath",
                        "name": "neraath",
                        "displayName": "Christopher Weldon",
                        "active": true
                    },
                    "created": "2009-06-22T21:23:51.000+0000",
                    "updated": "2009-06-22T21:23:51.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32205",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=pfrischmuth",
                        "name": "pfrischmuth",
                        "displayName": "Philipp Frischmuth",
                        "active": true
                    },
                    "body": "Hi,\nwe encounter this issue, too.\nWe have a lot of SQL queries that contain URIs. HTTP URIs are no problem, for they contain a '\/' after the ':'.\nBut e.g. mailto: URIs lead to the above error message. Do you see a chance that this issue will be fixed in the  not to distant future?\n\nRegards,\nPhilipp Frischmuth",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=pfrischmuth",
                        "name": "pfrischmuth",
                        "displayName": "Philipp Frischmuth",
                        "active": true
                    },
                    "created": "2009-06-26T00:39:21.000+0000",
                    "updated": "2009-06-26T00:39:21.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32672",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "I am inclined to close this as not an issue.  It seems like you are attempting to use bound parameters inside of quoted literals.  How is the database suppose to know whether you want ':days days' or the parameritized version if its a literally quoted value?\n\nEven without ZF this does not work:\n\n{code}\n<?php\n$x = $pdo->prepare('SELECT * FROM foo WHERE interval = \":days days\"');\n$y = $x->execute(array('days' => 30));\n{code}\n\nThe above will fail with:\nWarning: PDOStatement::execute(): SQLSTATE[HY093]: Invalid parameter number: :days in \/Users\/ralphschindler\/tmp\/test-pdopgsql.php on line xxx\n\nIf you want to use parameritized queries, the whole value needs to be parameritized, not part of it.\n\n-ralph",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2009-07-17T12:23:33.000+0000",
                    "updated": "2009-07-17T12:23:33.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4916\/transitions"
}