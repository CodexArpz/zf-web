{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10608",
    "key": "ZF-10608",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Label decorators do not allow modification of the wrapping tag."
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10608\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/3",
                "name": "Duplicate"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2012-07-27T11:34:03.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=fumanchu182",
                "name": "fumanchu182",
                "displayName": "Anthony W.",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-10-28T08:40:11.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-07-27T11:34:03.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "When working with the Label decorator in a decorator stack you are not allowed to modify a wapper tag that is specified, for example if you use:\r\n{code}\r\n    public $basicElementDecorators = array(\r\n        'ViewHelper',\r\n        'Errors',\r\n        array('HtmlTag', array('tag'=>'div', 'class'=>'form_element_wrapper')),\r\n        array('Label', array('tag'=>'div', 'class'=>'applytowrapper')),\r\n        array(array('wrapper'=>'HtmlTag'), array('tag'=>'div', 'class'=>'form_element_container'))\r\n    );\r\n{code}\r\n\r\nThis does not move the attribute to the wrapper instead it generates:\r\n{code}\r\n<div class=\"form_element_container\">\r\n    <div id=\"date_of_birth-label\">\r\n        <label for=\"date_of_birth\" class=\"applytowrapper required\">Date of Birth<\/label>\r\n    <\/div>\r\n<\/div>\r\n{code}\r\n\r\nI noticed that there is no configurable way to modify the attributes of the wrapping tag of the Label decorator due to the way it calls the render(); function of the wrapping tag:\r\n{code}\r\n        if (null !== $tag) {\r\n            require_once 'Zend\/Form\/Decorator\/HtmlTag.php';\r\n            $decorator = new Zend_Form_Decorator_HtmlTag();\r\n            $decorator->setOptions(array('tag' => $tag,\r\n                                         'id'  => $this->getElement()->getName() . '-label'));\r\n\r\n            $label = $decorator->render($label);\r\n        }\r\n{code}\r\n\r\nMy proposal is to allow a special key in the options array of the Label decorator called 'tag_options'.  If this key is found it is merged with the above segment but also removed from the label tag's options array as we do not want to render attributes in the tag that are invalid.  Patch:\r\n{code}\r\n--- Label.php\t2010-10-28 11:09:22.677596859 -0400\r\n+++ MyLabel.php\t2010-10-28 11:09:18.333231838 -0400\r\n@@ -300,7 +300,12 @@ class Zend_Form_Decorator_Label extends \r\n         $id        = $this->getId();\r\n         $class     = $this->getClass();\r\n         $options   = $this->getOptions();\r\n+        $tag_options = null;\r\n \r\n+        if(isset($options['tag_options'])) {\r\n+                $tag_options = $options['tag_options'];\r\n+                unset($options['tag_options']);\r\n+        }\r\n \r\n         if (empty($label) && empty($tag)) {\r\n             return $content;\r\n@@ -314,10 +319,15 @@ class Zend_Form_Decorator_Label extends \r\n         }\r\n \r\n         if (null !== $tag) {\r\n+            if($tag_options === null) {\r\n+                $tag_options = array('tag' => $tag,'id'  => $this->getElement()->getName() . '-label');\r\n+            } else {\r\n+                $tag_options = array_merge(array('tag'=> $tag, 'id' => $this->getElement()->getName() . '-label'), $tag_options);\r\n+            }\r\n+\r\n             require_once 'Zend\/Form\/Decorator\/HtmlTag.php';\r\n             $decorator = new Zend_Form_Decorator_HtmlTag();\r\n-            $decorator->setOptions(array('tag' => $tag,\r\n-                                         'id'  => $this->getElement()->getName() . '-label'));\r\n+            $decorator->setOptions($tag_options);\r\n \r\n             $label = $decorator->render($label);\r\n         }\r\n{code}\r\n\r\nI think this is an important improvement over the existing way on how it renders the wrapping tag.  Extending the Label decorator class may also be a viable means of doing this but overwriting render() to provide functionality from the beginning did not seem intuitive to me.  Therefore if I know specify:\r\n{code}\r\n    public $basicElementDecorators = array(\r\n        'ViewHelper',\r\n        'Errors',\r\n        array('HtmlTag', array('tag'=>'div', 'class'=>'form_element_wrapper')),\r\n        array('Label', array('tag'=>'div', 'tag_options'=>array('class'=>'applytowrapper'))),\r\n        array(array('wrapper'=>'HtmlTag'), array('tag'=>'div', 'class'=>'form_element_container'))\r\n    );\r\n{code}\r\n\r\nThis generates:\r\n{code}\r\n<div class=\"applytowrapper\" id=\"date_of_birth-label\">\r\n    <label class=\"required\" for=\"date_of_birth\">Date of Birth<\/label>\r\n<\/div>\r\n{code}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10608\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/6",
                "name": "Closed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                "name": "frosch",
                "displayName": "Frank Br\u00fcckner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-7182",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7182",
                    "type": {
                        "name": "Duplicate",
                        "direction": "OUTBOUND",
                        "description": "duplicates"
                    }
                },
                {
                    "issueKey": "ZF-9953",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9953",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10490",
                    "id": 10490,
                    "description": "Mini Release",
                    "name": "1.10.8",
                    "userReleaseDate": "25\/Aug\/10",
                    "archived": false,
                    "releaseDate": "2010-08-25",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10029",
                    "id": 10029,
                    "name": "Zend_Form",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/42769",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "May I offer an alternate solution? Create an alternate, custom decorator for labels, and use that. The more options we provide, the harder it is to understand precedence and specificity.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2010-10-28T08:58:39.000+0000",
                    "updated": "2010-10-28T08:58:39.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/42770",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=fumanchu182",
                        "name": "fumanchu182",
                        "displayName": "Anthony W.",
                        "active": true
                    },
                    "body": "For a default decorator that ships with ZF, not allowing the ability to apply attributes to a wrapping tag element makes that element useless.  Especially if you are trying to change the look and feel of a form through CSS.  If I cannot specify the id of the class then I have to select it via a parent or child DOM element which may not always be available.  Since it is the default decorator that ships with the library this is a 100% improvement.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=fumanchu182",
                        "name": "fumanchu182",
                        "displayName": "Anthony W.",
                        "active": true
                    },
                    "created": "2010-10-28T09:54:53.000+0000",
                    "updated": "2010-10-28T09:54:53.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/50379",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "body": "There is already a solution: [{{Zend_Form_Decorator_Label::setTagClass()}}|http:\/\/framework.zend.com\/apidoc\/core\/db_Form_Decorator_Label.html#\\Zend_Form_Decorator_Label::setTagClass%28%29]\r\n\r\nYou can find an example here: [zfforum.de|http:\/\/www.zfforum.de\/faq-howto\/7813-zend_form-setzen-einer-klasse-fuer-das-umschliessende-html-element-eines-labels-1-11-4-a.html] (in German)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2012-04-26T12:31:49.000+0000",
                    "updated": "2012-04-26T12:31:49.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10608\/transitions"
}