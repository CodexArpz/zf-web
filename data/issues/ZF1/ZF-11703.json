{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11703",
    "key": "ZF-11703",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend tool can't manage controllers with phpdoc"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11703\/votes",
                "votes": 2,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2011-09-11T13:33:09.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=keici",
                "name": "keici",
                "displayName": "Karol Ciba",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2011-08-28T13:26:57.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-09-25T14:11:38.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "Zend_CodeGenerator",
                "Zend_Tool"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I think there's bug in creating new action in controller with class php doc. Zend tools mangles controller code.\r\n\r\nFor example, i have class:\r\n{code}\r\n<?php\r\n\/**\r\n * For manipulating files.\r\n * \r\n * @author Karol Ciba\r\n *\/\r\nclass Admin_FileController extends Zend_Controller_Action\r\n{\r\n\r\n    public function init()\r\n    {\r\n    }\r\n\r\n    public function indexAction()\r\n    {\r\n        \/\/ action body\r\n    }\r\n}\r\n{code}\r\n\r\nwhen i try to create new action with: zf create action list file 1 admin, then controller class looks like this:\r\n\r\n{code}\r\n\/**\r\n * For manipulating files.\r\n *\r\n * @author Karol Ciba\r\n *\r\n *\/\r\n\r\n\r\n\/**\r\n * For manipulating files.\r\n *\r\n * @author Karol Ciba\r\n *\r\n *\/\r\nclass Admin_FileController extends Zend_Controller_Action\r\n{\r\n\r\n    public function init()\r\n    {\r\n    }\r\n\r\n    public function indexAction()\r\n    {\r\n        \/\/ action body\r\n    }\r\n\r\n    public function listAction()\r\n    {\r\n        \/\/ action body\r\n    }\r\n\r\n\r\n}\r\n\r\n<?php\r\n\/* Zend_CodeGenerator_Php_File-DocblockMarker *\/ \r\n{code}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11703\/watchers",
                "isWatching": false,
                "watchCount": 4
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/6",
                "name": "Closed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jaguarnet7",
                "name": "jaguarnet7",
                "displayName": "Raphael de Almeida",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/14642",
                    "filename": "zf11703.r24451.patch",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jaguarnet7",
                        "name": "jaguarnet7",
                        "displayName": "Raphael de Almeida",
                        "active": true
                    },
                    "created": "2011-09-08T01:08:34.000+0000",
                    "size": 4685,
                    "mimeType": "text\/x-patch",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/14642\/zf11703.r24451.patch"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10520",
                    "id": 10520,
                    "description": "Mini Release",
                    "name": "1.11.2",
                    "userReleaseDate": "30\/Dec\/10",
                    "archived": false,
                    "releaseDate": "2010-12-30",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10980",
                    "id": 10980,
                    "description": "Mini Release",
                    "name": "1.11.10",
                    "userReleaseDate": "04\/Aug\/11",
                    "archived": false,
                    "releaseDate": "2011-08-04",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10407",
                    "id": 10407,
                    "name": "Zend_CodeGenerator",
                    "isAssigneeTypeValid": false
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10380",
                    "id": 10380,
                    "name": "Zend_Tool",
                    "description": "Zend_Tool component",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48370",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jaguarnet7",
                        "name": "jaguarnet7",
                        "displayName": "Raphael de Almeida",
                        "active": true
                    },
                    "body": "The problem is with Zend_CodeGenerator\r\n\r\nI create a UnitTest for this.\r\n{code} \r\n    \/**\r\n    * @group ZF-11703\r\n    *\/\r\n    public function testNewMethodKeepPHPDoc(){\r\n        $codeGenFile = Zend_CodeGenerator_Php_File::fromReflectedFileName(dirname(__FILE__).'\/_files\/zf-11703.php', true, true);\r\n        $target = <<<EOS\r\n<?php\r\n\/**\r\n * For manipulating files.\r\n * \r\n * @author Karol Ciba\r\n *\/\r\nclass Admin_FileController extends Zend_Controller_Action\r\n{\r\n\r\n    public function init()\r\n    {\r\n    }\r\n\r\n    public function indexAction()\r\n    {\r\n        \/\/ action body\r\n    }\r\n\r\n    public function listAction()\r\n    {\r\n        \/\/ action body\r\n    }\r\n}\r\nEOS;\r\n\r\n        $codeGenFile->getClass()->setMethod(array(\r\n            'name' => 'listAction',\r\n            'body' => '\/\/ action body'\r\n            ));\r\n\r\n        $this->assertEquals($target, $codeGenFile->generate());\r\n    }\r\n{code} \r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jaguarnet7",
                        "name": "jaguarnet7",
                        "displayName": "Raphael de Almeida",
                        "active": true
                    },
                    "created": "2011-09-07T20:32:00.000+0000",
                    "updated": "2011-09-07T20:32:00.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48371",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jaguarnet7",
                        "name": "jaguarnet7",
                        "displayName": "Raphael de Almeida",
                        "active": true
                    },
                    "body": "The bug occurs in php files with only one docblock.\r\nCodeGenerator don't known if one is for file or for class.\r\n\r\nWhen file has docblock and the class too, this bug don't occurs.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jaguarnet7",
                        "name": "jaguarnet7",
                        "displayName": "Raphael de Almeida",
                        "active": true
                    },
                    "created": "2011-09-07T23:20:14.000+0000",
                    "updated": "2011-09-07T23:20:14.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48405",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=padraic",
                        "name": "padraic",
                        "displayName": "P\u00e1draic Brady",
                        "active": true
                    },
                    "body": "Committed in r24456. Thanks for the patch and tests!!!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=padraic",
                        "name": "padraic",
                        "displayName": "P\u00e1draic Brady",
                        "active": true
                    },
                    "created": "2011-09-11T13:33:09.000+0000",
                    "updated": "2011-09-11T13:33:09.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48406",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=keici",
                        "name": "keici",
                        "displayName": "Karol Ciba",
                        "active": true
                    },
                    "body": "Thanks for fixing, I can get much better documented code now!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=keici",
                        "name": "keici",
                        "displayName": "Karol Ciba",
                        "active": true
                    },
                    "created": "2011-09-11T14:11:25.000+0000",
                    "updated": "2011-09-11T14:11:25.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11703\/transitions"
}