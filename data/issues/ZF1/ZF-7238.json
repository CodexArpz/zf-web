{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7238",
    "key": "ZF-7238",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Form_Element_Hash namespace problem"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7238\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2012-03-14T00:25:26.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zimuel",
                "name": "zimuel",
                "displayName": "Enrico Zimuel",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-07-10T03:49:57.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-03-14T00:25:26.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "element",
                "form",
                "hash",
                "name",
                "session"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I notice a difference between the namespace of a Zend_Form_Element_Hash with this two examples:\n\n$token = new Zend_Form_Element_Hash('token');\n$token->setSalt(md5(uniqid(rand(), TRUE)));\n$this->addElement($token);\n\nand this one:\n\n$this->addElement('hash', 'token', array(\n            'salt' => md5(uniqid(rand(), true)),\n));\n\nIf a use the first one in a validation check it works fine. With the second example the validation fails.\nFor instance in the first scenario the namescape is \"Zend_Form_Element_Hash_salt_token\" and in the second is \"Zend_Form_Element_Hash_124b1234e34535_token\". In this example if a use the validation the session name it will be always failed.\n\nFor instance a simple login system into a Controller:\n\npublic function loginAction ()\n{\n        $flash = $this->_helper->getHelper('flashMessenger');\n        if ($flash->hasMessages()) {\n            $this->view->message = $flash->getMessages();\n        }\n        \n        $this->view->form = new App_Form_Login();\n        $this->render('login');\n}\n\npublic function submitAction ()\n{\n        $form = new App_Form_Login();\n        $request = $this->getRequest();\n        if (!$form->isValid($request->getPost())) {\n        ...\n}\n\nThis example doesn't works because in the submitAction the instance of the object $form will have a different namespace, the token is generated each time.\n\nMy proposal is to change the getSessionName method of Zend\/Form\/Element\/Hash.php:\n\npublic function getSessionName()\n{\n        return __CLASS__ . '_' . $this->getSalt() . '_' . $this->getName();\n}\n\nwith this one:\n\npublic function getSessionName()\n{\n        return __CLASS__ .  '_' . $this->getName();\n}\n\nWhat do you think?\n\nEnrico"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7238\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/6",
                "name": "Closed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                "name": "adamlundrigan",
                "displayName": "Adam Lundrigan",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10029",
                    "id": 10029,
                    "name": "Zend_Form",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33585",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=noginn",
                        "name": "noginn",
                        "displayName": "Tom Graham",
                        "active": true
                    },
                    "body": "I think your usage is incorrect, the salt should be consistent for each request. Your method of using \"md5(uniqid(rand(), TRUE))\" means this will never be the case.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=noginn",
                        "name": "noginn",
                        "displayName": "Tom Graham",
                        "active": true
                    },
                    "created": "2009-08-18T06:26:48.000+0000",
                    "updated": "2009-08-18T06:26:48.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35408",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zimuel",
                        "name": "zimuel",
                        "displayName": "Enrico Zimuel",
                        "active": true
                    },
                    "body": "I agree with you, you have to be consistent with the value of the sault and, in fact, it works in the first example.\r\nThe data in POST are consistent with the SESSION value so it should be works.\r\n\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zimuel",
                        "name": "zimuel",
                        "displayName": "Enrico Zimuel",
                        "active": true
                    },
                    "created": "2009-10-19T13:18:30.000+0000",
                    "updated": "2009-10-19T13:18:30.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7238\/transitions"
}