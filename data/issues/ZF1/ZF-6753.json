{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6753",
    "key": "ZF-6753",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Implementation of Dojo_View_Helper_Editor is outdated and insecure"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6753\/votes",
                "votes": 4,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10411",
                    "id": 10411,
                    "description": "Security release",
                    "name": "1.7.9",
                    "userReleaseDate": "11\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-11",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10410",
                    "id": 10410,
                    "description": "Security release",
                    "name": "1.8.5",
                    "userReleaseDate": "11\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-11",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10400",
                    "id": 10400,
                    "description": "Mini Release",
                    "name": "1.9.7",
                    "userReleaseDate": "11\/Jan\/10",
                    "archived": false,
                    "releaseDate": "2010-01-11",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-11-20T14:03:10.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lightflowmark",
                "name": "lightflowmark",
                "displayName": "Mark",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-05-20T12:05:39.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-01-11T12:55:53.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "dojo",
                "editor"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Hi,\r\nI believe that the ZF implementation of the rich text editor dijit.Editor is based on outdated Dojo docs and is apparently insecure.  In use, it logs warnings to the Firebug console about not using it with HTML Textarea tags - from the Dojo comments:\r\n\/\/  Do not use this widget\r\n\/\/  with an HTML &lt;TEXTAREA&gt; tag, since the browser unescapes XML escape characters,\r\n\/\/  like &lt;.  This can have unexpected behavior and lead to security issues\r\n\/\/  such as scripting attacks.\r\n\r\n\r\nThe approved method appears to be to use a div instead; however, I suspect this has the downside of not degrading gracefully in the absence of Javascript.  I don't know whether the claimed security flaw is important enough to sacrifice this principle for.\r\n\r\nThe fix is to alter lines 89-92 of Zend\/Dojo\/View\/Helper\/Editor.php to:\r\n{code:title=Zend_Dojo_View_Helper_Editor}\r\n89        $attribs = $this->_prepareDijit($attribs, $params, 'textarea');\r\n90\r\n91        $html = '<input' . $this->_htmlAttribs($hiddenAttribs) . $this->getClosingBracket() .\r\n92                '<div dojoType=\"' . $this->_module . '\" ' . $this->_htmlAttribs($attribs)  . '>' . $value . '<\/div>';\r\n{code}\r\n\r\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6753\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-8127",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8127",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10310",
                    "id": 10310,
                    "description": "Mini Release",
                    "name": "1.8.1",
                    "userReleaseDate": "12\/May\/09",
                    "archived": false,
                    "releaseDate": "2009-05-12",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10311",
                    "id": 10311,
                    "name": "Zend_Dojo",
                    "description": "Dojo integration with Zend Framework",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32342",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=anton_shevchuk",
                        "name": "anton_shevchuk",
                        "displayName": "Anton Shevchuk",
                        "active": true
                    },
                    "body": "I fix this is issue in my view helper with follow code:\n\n\n{code:title=Zend_Dojo_View_Helper_Editor::editor}\n\n\/**\n * dijit.Editor\n * \n * @param  string $id \n * @param  string $value \n * @param  array $params \n * @param  array $attribs \n * @return string\n *\/\npublic function editor($id, $value = null, $params = array(), $attribs = array())\n{\n    $hiddenName = $id;\n    if (array_key_exists('id', $attribs)) {\n        $hiddenId = $attribs['id'];\n    } else {\n        $hiddenId = $hiddenName;\n    }\n    $hiddenId = $this->_normalizeId($hiddenId);\n\n    $hiddenAttribs = array(\n        'id'    => $hiddenId,\n        'name'  => $hiddenName,\n        'value' => $value,\n        'type'  => 'hidden',\n    );\n    \n    $editorAttribs = array(\n        'id'    => $hiddenId . '-Editor',\n        'name'  => $this->_normalizeEditorName($hiddenName)\n    );\n\n    $editorAttribs = $this->_prepareDijit($editorAttribs, $params, 'textarea');\n    \n    $this->_createGetParentFormFunction();\n    $this->_createEditorOnSubmit($hiddenId, $textareaId);\n\n    $html = '<input' . $this->_htmlAttribs($hiddenAttribs) . $this->getClosingBracket()\n          . '<div dojoType=\"' . $this->_module . '\" ' . $this->_htmlAttribs($editorAttribs) .'>'.$value.'<\/div>';\n\n    return $html;\n}\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=anton_shevchuk",
                        "name": "anton_shevchuk",
                        "displayName": "Anton Shevchuk",
                        "active": true
                    },
                    "created": "2009-07-02T04:01:44.000+0000",
                    "updated": "2009-07-02T04:01:44.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32343",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=anton_shevchuk",
                        "name": "anton_shevchuk",
                        "displayName": "Anton Shevchuk",
                        "active": true
                    },
                    "body": "One mistake\n{code}\n\/\/ change line\n$this->_createEditorOnSubmit($hiddenId, $textareaId);\n\/\/ to \n$this->_createEditorOnSubmit($hiddenId, $hiddenId . '-Editor');\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=anton_shevchuk",
                        "name": "anton_shevchuk",
                        "displayName": "Anton Shevchuk",
                        "active": true
                    },
                    "created": "2009-07-02T04:18:16.000+0000",
                    "updated": "2009-07-02T04:18:16.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33665",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rvdavid",
                        "name": "rvdavid",
                        "displayName": "rv david",
                        "active": true
                    },
                    "body": "This issue causes a previously closed bug report at:\nhttp:\/\/framework.zend.com\/issues\/browse\/ZF-4462;jsessionid=436E62603E0CEB9B3E51E670AC2F723F\n\nAs mentioned in ZF-4462, it only happens in IE. \n\nHappened to me in IE7 - my client was complaining that when they tried change the data in the Editor field, they get the text \"Array\" is saved in place of the content. \nDumping the request data reveals that the data submitted is submitted as an array. Similar to what is displayed below: \n\nArray (\n[title] => bug test 2\n[content] => Array ( [Editor] => bug test 2 )\n[sendlive] => 0\n[id] =>\n[save] => save )",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=rvdavid",
                        "name": "rvdavid",
                        "displayName": "rv david",
                        "active": true
                    },
                    "created": "2009-08-19T23:18:17.000+0000",
                    "updated": "2009-08-19T23:18:17.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36365",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Fixed in trunk, and will release with 1.10. The change is a slight BC break, but justifiable due to the security implications; however, these changes are best to introduce during a minor release when we can message how to upgrade more granularly.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2009-11-20T14:03:10.000+0000",
                    "updated": "2009-11-20T14:03:10.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6753\/transitions"
}