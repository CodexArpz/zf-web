{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6391",
    "key": "ZF-6391",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Inconsistent backtick usage"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField",
            "value": {
                "timeoriginalestimate": 60,
                "timeestimate": 60
            }
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6391\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/2",
                "name": "Won't Fix"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10362",
                    "id": 10362,
                    "description": "Mini Release",
                    "name": "1.9.3",
                    "userReleaseDate": "22\/Sep\/09",
                    "archived": false,
                    "releaseDate": "2009-09-22",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-08-26T13:10:45.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=stefan",
                "name": "stefan",
                "displayName": "Stefan Koopmanschap",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-04-23T06:50:00.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-08-26T13:10:45.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "backticks",
                "mysql",
                "query"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "When creating a query, and then checking the actual query using __toString(), it seems backtick usage is inconsistent. Given the following code:\n\n{code}\n    $select = $db->select()\n                 ->from(array('iv'  => 'indicator_version'))\n                 ->columns(array('type' => new Zend_Db_Expr(\"'\".self::TYPE_VERSION_DATA.\"'\")))\n                 ->join(array('ivc' => 'country_indicator_version'), 'iv.id = ivc.indicator_version_id', array('value' => 'ivc.value', 'show_footnote' => 'ivc.show_footnote', 'footnote_desc' => 'ivc.footnote_desc'))\n                 ->join(array('c'   => 'country'), 'ivc.country_id = c.id', array('country' => 'c.name', 'country_id' => 'c.id' ,'fips_code'=>'c.fips_code'))\n                 ->join(array('i'   => 'indicator'), 'iv.indicator_id = i.id', array('sort' => 'i.sort'))\n                 ->where('iv.id = ?', (int) $version_id)\n                 ->where('ivc.value IS NOT NULL')\n                 ->order('ivc.value desc');\n{code}\n\nI currently get the following query:\n\n{code}\nSELECT \n\t`iv`.*, \n\t'versiondata' AS `type`, \n\t`ivc`.`value`, \n\t`ivc`.`show_footnote`, \n\t`ivc`.`footnote_desc`, \n\t`c`.`name` AS `country`, \n\t`c`.`id` AS `country_id`, \n\t`c`.`fips_code`, \n\t`i`.`sort` \nFROM \n\t`indicator_version` AS `iv` \nINNER JOIN \n\t`country_indicator_version` AS `ivc` \nON \n\tiv.id = ivc.indicator_version_id \nINNER JOIN \n\t`country` AS `c` \nON \n\tivc.country_id = c.id \nINNER JOIN \n\t`indicator` AS `i` \nON \n\tiv.indicator_id = i.id \nWHERE \n\t(iv.id = 2) \nAND \n\t(ivc.value IS NOT NULL) \nORDER BY \n\t`ivc`.`value` desc\n{code}\n\nAs you can notice WHERE clauses and the ON clauses for joins do not have backticks. At first, I thought this to be related to the fact that those strings are literally added in our code, but then I noticed that the value of the ORDER clause does have backticks (even though we didn't add backticks in our code). So it seems in some situations, backticks are added, but in others they aren't. This seems inconsistent and may result in problems when using specific field names."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/5",
                "name": "Trivial"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/customFieldOption\/10040",
                "value": " Nice to Have"
            }
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6391\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lbarton",
                "name": "lbarton",
                "displayName": "Luke Barton",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10271",
                    "id": 10271,
                    "description": "Mini Release",
                    "name": "1.7.2",
                    "userReleaseDate": "23\/Dec\/08",
                    "archived": false,
                    "releaseDate": "2008-12-23",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10131",
                    "id": 10131,
                    "name": "Zend_Db_Adapter_Mysqli",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30902",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yoshida@zend.co.jp",
                        "name": "yoshida@zend.co.jp",
                        "displayName": "old of Satoru Yoshida",
                        "active": true
                    },
                    "body": "This issue also happens on 1.8.0 ?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yoshida@zend.co.jp",
                        "name": "yoshida@zend.co.jp",
                        "displayName": "old of Satoru Yoshida",
                        "active": true
                    },
                    "created": "2009-05-12T07:00:26.000+0000",
                    "updated": "2009-05-12T07:00:26.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30903",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=stefan",
                        "name": "stefan",
                        "displayName": "Stefan Koopmanschap",
                        "active": true
                    },
                    "body": "I have not yet tried this with 1.8.0 but since there was no other ticket describing this issue I believed it would most probably not be fixed yet.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=stefan",
                        "name": "stefan",
                        "displayName": "Stefan Koopmanschap",
                        "active": true
                    },
                    "created": "2009-05-12T07:10:11.000+0000",
                    "updated": "2009-05-12T07:10:11.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31259",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "I dont see this as much of an issue.\n\nThe unquoted parts of that expression are passed in by the user.  They are used raw.  The Zend_Db_Select object simply cannot know whats in the where part of the string, and automagically quote it accordingly.  If the developer wants special quotes on the parts they are supplying, they can use $db->quoteIdentifier().\n\nI am inclined to close as not an issue\n\n-ralph",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2009-05-22T07:12:01.000+0000",
                    "updated": "2009-05-22T07:12:01.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33541",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jimbojsb",
                        "name": "jimbojsb",
                        "displayName": "Josh Butts",
                        "active": true
                    },
                    "body": "Seems like the backticking could be updated based on the params passed to ->join()",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jimbojsb",
                        "name": "jimbojsb",
                        "displayName": "Josh Butts",
                        "active": true
                    },
                    "created": "2009-08-17T12:08:04.000+0000",
                    "updated": "2009-08-17T12:08:04.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33546",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "I am classifying this as an improvement as I see no direct failure of queries due to missing backticks, and since very few people would be using mysql reserved words as identifiers.\nMarked as \"trival\", prob 1h of work, can be introduced in \"next mini release\"",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2009-08-17T12:55:31.000+0000",
                    "updated": "2009-08-17T12:55:31.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33551",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "Assigning to Luke for closure.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2009-08-17T14:03:54.000+0000",
                    "updated": "2009-08-17T14:03:54.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33972",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lbarton",
                        "name": "lbarton",
                        "displayName": "Luke Barton",
                        "active": true
                    },
                    "body": "I am resolving as Won't Fix as the issue is minor and there is no attractive solution.\n\nRalph and I concluded that whilst it _is_ inconsistent to `backtick` raw sql snippets passed to the order() method, the available options are unappealing.\n\nRemoving `backticking` of raw SQL order() strings is not an option we'd like to take; since it would create an issue for those relying upon the existing functionality to quote reserved keywords in table\/column names, and contradicts Zend_Db's ideal of quoting where possible.\n\nAdding automatic `backticking` to *all* raw SQL statements (for consistency) is unrealistic due to the work required compared with the benefit it would bring.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lbarton",
                        "name": "lbarton",
                        "displayName": "Luke Barton",
                        "active": true
                    },
                    "created": "2009-08-26T13:10:45.000+0000",
                    "updated": "2009-08-26T13:10:45.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6391\/transitions"
}