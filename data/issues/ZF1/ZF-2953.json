{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2953",
    "key": "ZF-2953",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Db_Table_Abstract->insert returns empty value"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/11",
                "name": "Patch",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2953\/votes",
                "votes": 4,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10530",
                    "id": 10530,
                    "description": "Mini Release",
                    "name": "1.11.3",
                    "userReleaseDate": "01\/Feb\/11",
                    "archived": false,
                    "releaseDate": "2011-02-01",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2011-01-22T08:02:24.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=marcis",
                "name": "marcis",
                "displayName": "Marcos Gil Fuertes",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-03-24T06:05:20.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-04-28T17:59:12.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "The \"insert\" method from \"Zend_Db_Table_Abstract\" (extended for MySql) doesn't return the value of the \"most recent ID\" when it receives an empty value ('') for this primary key. The register is properly inserted in the db.\n\nIt checks if the value is null:\n\n{code}\n        \/**\n         * If the primary key can be generated automatically, and no value was\n         * specified in the user-supplied data, then omit it from the tuple.\n         *\/\n        if (array_key_exists($pkIdentity, $data) && $data[$pkIdentity] === null) {\n            unset($data[$pkIdentity]);\n        }\n{code}\n\nMaybe, it should check if the value is \"empty\"."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/6",
                "name": "N\/A"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2953\/watchers",
                "isWatching": false,
                "watchCount": 7
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                "name": "ralph",
                "displayName": "Ralph Schindler",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-3837",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3837",
                    "type": {
                        "name": "Duplicate",
                        "direction": "OUTBOUND",
                        "description": "duplicates"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/12046",
                    "filename": "zf-2953.patch",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=digitalstruct",
                        "name": "digitalstruct",
                        "displayName": "Mike Willbanks",
                        "active": true
                    },
                    "created": "2009-06-23T17:55:46.000+0000",
                    "size": 1808,
                    "mimeType": "text\/x-patch",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/12046\/zf-2953.patch"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10170",
                    "id": 10170,
                    "description": "Mini Release",
                    "name": "1.0.4",
                    "userReleaseDate": "26\/Feb\/08",
                    "archived": true,
                    "releaseDate": "2008-02-26",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10133",
                    "id": 10133,
                    "name": "Zend_Db_Table",
                    "description": "Lightweight OO interface to database tables and rowsets.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/20330",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "Please categorize\/fix as needed.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2008-03-25T20:43:56.000+0000",
                    "updated": "2008-03-25T20:43:56.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/20484",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=marcis",
                        "name": "marcis",
                        "displayName": "Marcos Gil Fuertes",
                        "active": true
                    },
                    "body": "Fix Version Priority:    Must Have ?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=marcis",
                        "name": "marcis",
                        "displayName": "Marcos Gil Fuertes",
                        "active": true
                    },
                    "created": "2008-03-27T07:52:30.000+0000",
                    "updated": "2008-03-27T07:52:30.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/27795",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "No action on this issue for too long. I'm reassigning to Ralph for re-evaluation and categorization.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2009-01-06T10:48:23.000+0000",
                    "updated": "2009-01-06T10:48:23.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28003",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "Are you saying that \n\n{code}\nif (array_key_exists($pkIdentity, $data) && $data[$pkIdentity] === null) {\n{code}\n\nshould become:\n\n{code}\nif (array_key_exists($pkIdentity, $data) && $data[$pkIdentity] == null) {\nOR\nif (array_key_exists($pkIdentity, $data) && $data[$pkIdentity] == '') {\n{code}\n\n?\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2009-01-10T11:40:08.000+0000",
                    "updated": "2009-01-10T11:40:08.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28098",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=marcis",
                        "name": "marcis",
                        "displayName": "Marcos Gil Fuertes",
                        "active": true
                    },
                    "body": "Maybe, you could use the \"empty\" function...",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=marcis",
                        "name": "marcis",
                        "displayName": "Marcos Gil Fuertes",
                        "active": true
                    },
                    "created": "2009-01-12T01:54:58.000+0000",
                    "updated": "2009-01-12T01:54:58.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28747",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=fabius",
                        "name": "fabius",
                        "displayName": "Fabio Almeida",
                        "active": true
                    },
                    "body": "I confirm this bug, still alive in ZF 1.7.4, also confirm that the \"empty instead of null\" check works for me. It's frustrating to see such a simple issue being carried over between releases for so long.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=fabius",
                        "name": "fabius",
                        "displayName": "Fabio Almeida",
                        "active": true
                    },
                    "created": "2009-02-10T19:44:30.000+0000",
                    "updated": "2009-02-10T19:44:30.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29241",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=fabius",
                        "name": "fabius",
                        "displayName": "Fabio Almeida",
                        "active": true
                    },
                    "body": "Fix version bumped up to 1.7.5. \nZF 1.7.5 is released. The bug is still there. \n\nFix version bumped up to 1.7.6. \nZF 1.7.6 is released. The bug is still there. \n\nI don't wanna be a whiner, but am I missing something here? It's such an easy fix (just one line of code!) and it's so annoying to have to fix it over and over with each ZF release. Why is it getting so little attention?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=fabius",
                        "name": "fabius",
                        "displayName": "Fabio Almeida",
                        "active": true
                    },
                    "created": "2009-03-02T20:59:25.000+0000",
                    "updated": "2009-03-02T20:59:25.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29470",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=fabius",
                        "name": "fabius",
                        "displayName": "Fabio Almeida",
                        "active": true
                    },
                    "body": "I didn't take the time for a deeper check, but I believe these two issues are related, if not the same.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=fabius",
                        "name": "fabius",
                        "displayName": "Fabio Almeida",
                        "active": true
                    },
                    "created": "2009-03-13T13:08:35.000+0000",
                    "updated": "2009-03-13T13:08:35.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31319",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=marcis",
                        "name": "marcis",
                        "displayName": "Marcos Gil Fuertes",
                        "active": true
                    },
                    "body": "Maybe, I'll become a contributor to solve this \"line of code\"...",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=marcis",
                        "name": "marcis",
                        "displayName": "Marcos Gil Fuertes",
                        "active": true
                    },
                    "created": "2009-05-25T02:18:39.000+0000",
                    "updated": "2009-05-25T02:18:39.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31977",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=digitalstruct",
                        "name": "digitalstruct",
                        "displayName": "Mike Willbanks",
                        "active": true
                    },
                    "body": "Actually using the function empty would cause unpredicted results.  The value of '0' is valid in the auto-incrementing sequence therefore this would not be an adequate fix.  Although the correct fix would be to utilize strlen.  Will work on writing the patch and the test case for this in the next day or so.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=digitalstruct",
                        "name": "digitalstruct",
                        "displayName": "Mike Willbanks",
                        "active": true
                    },
                    "created": "2009-06-18T21:30:50.000+0000",
                    "updated": "2009-06-18T21:30:50.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32128",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=digitalstruct",
                        "name": "digitalstruct",
                        "displayName": "Mike Willbanks",
                        "active": true
                    },
                    "body": "Attached patch and test case for the issue.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=digitalstruct",
                        "name": "digitalstruct",
                        "displayName": "Mike Willbanks",
                        "active": true
                    },
                    "created": "2009-06-23T17:55:47.000+0000",
                    "updated": "2009-06-23T17:55:47.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43858",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=marcis",
                        "name": "marcis",
                        "displayName": "Marcos Gil Fuertes",
                        "active": true
                    },
                    "body": "Almost 3 years later, the issue is still open... solve it or close it, please! It's only one line of code!!!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=marcis",
                        "name": "marcis",
                        "displayName": "Marcos Gil Fuertes",
                        "active": true
                    },
                    "created": "2010-12-30T06:35:03.000+0000",
                    "updated": "2010-12-30T06:35:03.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43903",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=fabius",
                        "name": "fabius",
                        "displayName": "Fabio Almeida",
                        "active": true
                    },
                    "body": "Plus, everytime a new release is out we have to patch it to fix this issue. Annoying to say the least!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=fabius",
                        "name": "fabius",
                        "displayName": "Fabio Almeida",
                        "active": true
                    },
                    "created": "2011-01-03T16:35:24.000+0000",
                    "updated": "2011-01-03T16:35:24.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43939",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "I've added a fix for this issue in r23621 in trunk.\r\n\r\nPlease test your applications against this.  The fix does not use empty() or any other type in-specific routines to determine if a PK was included.  Instead, it uses a smaller subset of valid primary key value types.  For example, '0' and 0 are valid primary keys that would not pass an empty() test.\r\n\r\nIf this works for everyone, I will merge to 1.11.\r\n\r\n-ralph",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2011-01-05T13:57:34.000+0000",
                    "updated": "2011-01-05T13:57:34.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44117",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "Resolved in trunk at r23621 and in branch 1.11 at 23657",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2011-01-22T08:02:24.000+0000",
                    "updated": "2011-01-22T08:02:24.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2953\/transitions"
}