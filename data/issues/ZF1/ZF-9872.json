{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9872",
    "key": "ZF-9872",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "File \"Zend\/Validate\/Hostname\/Com.php\" does not exist or class \"Zend_Validate_Hostname_Com\" was not found in the file"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9872\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/5",
                "name": "Cannot Reproduce"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10460",
                    "id": 10460,
                    "description": "Mini Release",
                    "name": "1.10.5",
                    "userReleaseDate": "26\/May\/10",
                    "archived": false,
                    "releaseDate": "2010-05-26",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2010-05-22T01:37:37.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=hilvar",
                "name": "hilvar",
                "displayName": "Andy Jennings",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-05-21T06:22:45.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-05-24T10:12:58.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Error first occurred with ZF v1.9.4. Upgraded to 1.10.4 and error still persists when attempting to construct a URL to get data from an outside source.\r\nAs has been observed in other tickets there is no class in this file so I disregard that part of the error. The autoloader functions fine on other classes in the lib.\r\nHave added the directory in which this file resides to the include_path of my PHP in order to try and circumvent an autoloader location problem but error persists.\r\n\r\nEnv: Mac OS X Snow Leopard 10.6.3 and built-in Apache, ZF 1.10.4, PHP 5.3.2 (ZE 2.3.0)\r\n\r\nTrace:\r\n#0 \/Users\/andyroo\/Sites\/cdbuyersguide\/dev\/library\/Zend\/Validate\/Hostname.php(331): Zend_Loader::loadClass('Zend_Validate_H...') \r\n#1 \/Users\/andyroo\/Sites\/cdbuyersguide\/dev\/library\/Zend\/Uri\/Http.php(448): Zend_Validate_Hostname->isValid('revex.jumpstart...') \r\n#2 \/Users\/andyroo\/Sites\/cdbuyersguide\/dev\/library\/Zend\/Uri\/Http.php(280): Zend_Uri_Http->validateHost() \r\n#3 \/Users\/andyroo\/Sites\/cdbuyersguide\/dev\/library\/Zend\/Uri\/Http.php(154): Zend_Uri_Http->valid() \r\n#4 \/Users\/andyroo\/Sites\/cdbuyersguide\/dev\/library\/Zend\/Uri.php(132): Zend_Uri_Http->__construct('http', '\/\/revex.jumpsta...') \r\n#5 \/Users\/andyroo\/Sites\/cdbuyersguide\/dev\/library\/Zend\/Http\/Client.php(257): Zend_Uri::factory('http:\/\/revex.ju...') \r\n#6 \/Users\/andyroo\/Sites\/cdbuyersguide\/dev\/library\/Zend\/Http\/Client.php(243): Zend_Http_Client->setUri('http:\/\/revex.ju...') #7 \/Users\/andyroo\/Sites\/cdbuyersguide\/dev\/application\/models\/bg_submodel.php(1021): Zend_Http_Client->__construct('http:\/\/revex.ju...') \r\n#8 \/Users\/andyroo\/Sites\/cdbuyersguide\/dev\/application\/controllers\/BuyersguideController.php(590): Model_bg_submodel->getReviewCount(Array) \r\n#9 \/Users\/andyroo\/Sites\/cdbuyersguide\/dev\/library\/Zend\/Controller\/Action.php(503): BuyersguideController->submodelAction() #10 \/Users\/andyroo\/Sites\/cdbuyersguide\/dev\/library\/Zend\/Controller\/Dispatcher\/Standard.php(285): Zend_Controller_Action->dispatch('submodelAction') \r\n#11 \/Users\/andyroo\/Sites\/cdbuyersguide\/dev\/library\/Zend\/Controller\/Front.php(934): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http)) #12 \/Users\/andyroo\/Sites\/cdbuyersguide\/dev\/public\/index.php(33): Zend_Controller_Front->dispatch() \r\n#13 {main}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9872\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10370",
                    "id": 10370,
                    "description": "Mini Release",
                    "name": "1.9.4",
                    "userReleaseDate": "13\/Oct\/09",
                    "archived": false,
                    "releaseDate": "2009-10-13",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10440",
                    "id": 10440,
                    "description": "Mini Release",
                    "name": "1.10.3",
                    "userReleaseDate": "01\/Apr\/10",
                    "archived": false,
                    "releaseDate": "2010-04-01",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10451",
                    "id": 10451,
                    "description": "Mini Release",
                    "name": "1.10.4",
                    "userReleaseDate": "28\/Apr\/10",
                    "archived": false,
                    "releaseDate": "2010-04-28",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10025",
                    "id": 10025,
                    "name": "Zend_Uri",
                    "description": "URI parsing, creation, and validation",
                    "isAssigneeTypeValid": false
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10140",
                    "id": 10140,
                    "name": "Zend_Validate",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40591",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mfacenet",
                        "name": "mfacenet",
                        "displayName": "Shawn Stratton",
                        "active": true
                    },
                    "body": "Could you attach code to reproduce this error?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mfacenet",
                        "name": "mfacenet",
                        "displayName": "Shawn Stratton",
                        "active": true
                    },
                    "created": "2010-05-21T06:33:10.000+0000",
                    "updated": "2010-05-21T06:33:10.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40609",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "When you are upgrading then you must upgrade the complete framework.\r\n\r\nThe given line 331 from your exception trace is an array_shift() command.\r\nZend_Loader itself is never called within Zend_Validate_Hostname.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2010-05-21T14:53:33.000+0000",
                    "updated": "2010-05-21T14:53:33.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40637",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Closing as not reproduceable.\r\n\r\nZend_Loader is never called within Zend_Validate_Hostname. The files are manually included as they are no classes but only resources.\r\n\r\nFeel free to reopen when you have new informations for reproduction.\r\n\r\nTested against ZF 1.10.4",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2010-05-22T01:37:37.000+0000",
                    "updated": "2010-05-22T01:38:11.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40658",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=hilvar",
                        "name": "hilvar",
                        "displayName": "Andy Jennings",
                        "active": true
                    },
                    "body": "Firstly, Zend Loader was just my guess nothing definitive - I look to you for more detail on what the cause for this can be.\r\n\r\nObviously I upgraded the whole framework, even installed into different path and changed my php.ini to point to it- nothing in my post would suggest otherwise.\r\n\r\nDespite the content of the error message, ZF IS finding the file as evidenced by the fact that when the Com.php file is renamed to XXXCom.php the error is not evident, presumably because the code checks for file existence before taking whatever step throws the error. I would suggest that section of the code that executes when the file is found should be the first point of investigation.\r\n\r\nThis error (or similar) has been bouncing around in several previous versions and while it may not be common, it is also clear that so many disparate people could not have come across this without there being some circumstance under which this occurs, even if it is not common across every setup. It needs to be addressed and not closed as non-reproducable out of hand. For me, in this instance, it is impacting a production website and while renaming the file seems to have little ill effect for now, it is obviously a blatant hack that should not be necessary.\r\n\r\nMy code is not complex and the relevant snippet is below - I cannot provide the precise URL or key as it is an internal web service but I believe that should not make any difference to the error.\r\n\r\nI am more than willing to perform diagnostics or patch the code on the system to collect more information for you as I believe this bug needs squashing once and for all or if there is a simple configuration problem that occurs with an apparent standard install or a certain PHP version on a particular platform that otherwise works perfectly then it needs to be added to the install document.\r\n\r\n---------------------------------\r\n\r\n$uri = Zend_Registry::get('configuration')->reviews->url->development.\"getReviews\/?\";\r\n\t\tforeach($trimIds as $id){\r\n\t\t\t$uri .= 'submodelId='.$id['chrome_id'].'&';\r\n\t\t}\r\n\r\n\t\t$uri .= \"expandSubmodels=true&firstResult={$skip}&max={$count}\";\r\n\t\t$client = new Zend_Http_Client($uri);\r\n\t\t$pubcode = Zend_Registry::get('site')->reviews->code;\r\n\t\t$client->setHeaders('publisher-code', $pubcode);\r\n\r\n\t\ttry {\r\n\t\t\t$response = $client->request('GET');\r\n\t\t} catch (Exception $e) {",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=hilvar",
                        "name": "hilvar",
                        "displayName": "Andy Jennings",
                        "active": true
                    },
                    "created": "2010-05-24T06:30:31.000+0000",
                    "updated": "2010-05-24T06:30:31.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40659",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=hilvar",
                        "name": "hilvar",
                        "displayName": "Andy Jennings",
                        "active": true
                    },
                    "body": "Additonally:\r\n\r\nI have no custom error handling. This is about as standard as a setup can get - ZF was installed from MacPorts if there have been any reported problems with that version.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=hilvar",
                        "name": "hilvar",
                        "displayName": "Andy Jennings",
                        "active": true
                    },
                    "created": "2010-05-24T06:40:12.000+0000",
                    "updated": "2010-05-24T06:40:12.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40661",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=hilvar",
                        "name": "hilvar",
                        "displayName": "Andy Jennings",
                        "active": true
                    },
                    "body": "Tested same codebase on a clean install of Zend Server CE on Windows XP.\r\n\r\nFile used for install downloaded on 5\/21 - ZendServer-CE-php-5.3.2-5.0.1-Windows_x86.exe.\r\n\r\nError occurs in identical manner.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=hilvar",
                        "name": "hilvar",
                        "displayName": "Andy Jennings",
                        "active": true
                    },
                    "created": "2010-05-24T08:52:55.000+0000",
                    "updated": "2010-05-24T08:52:55.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40667",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Take a look at what you posted:\r\n\r\n{quote}\r\nTrace:\r\n#0 \/Users\/andyroo\/Sites\/cdbuyersguide\/dev\/library\/Zend\/Validate\/Hostname.php(331): Zend_Loader::loadClass('Zend_Validate_H...') \r\n{quote}\r\n\r\nAccording to this exception which you added to this issue, Zend_Validate_Hostname throws an exception on line 331 at the comment Zend_Loader::loadClass.\r\n\r\nLine 331 from Zend\/Validate\/Hostname.php is an array_shift command.\r\nAdditionally Zend_Loader is never called from within Zend_Validate_Hostname... Zend_Loader itself is not even used within the complete class.\r\n\r\nSo there must be a old file or framework within the paths you are using.\r\n\r\nWhen you say that you updated your framework from 1.9.4 to 1.10.3 and the exception is still the same then something must be completely wrong on your side because the line numbers have changed between these two releases.\r\n\r\nPlease note the Zend Framework is not Zend Server CE, so I can not say what release they integrated. Fact for me is that Zend_Loader is not used within Zend_Validate_Hostname in all 1.10 releases so the conclusion for me is that you are not using a 1.10 release.\r\n\r\nTake a look into Zend\/Validate\/Hostname and look at the revision number on top of that file. It should note 21063. When it's below then you are not using 1.10.x",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2010-05-24T10:12:55.000+0000",
                    "updated": "2010-05-24T10:12:55.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9872\/transitions"
}