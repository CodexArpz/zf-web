{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6370",
    "key": "ZF-6370",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "HeadStyle view helper produces invalid HTML code when conditional param is set"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6370\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-04-22T06:06:47.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wojciech",
                "name": "wojciech",
                "displayName": "Wojciech Naruniec",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-04-22T05:45:28.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-04-22T13:48:42.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "If 'conditional' param is set for HeadStyle view helper, it produces HTML code with nested comments. Document with nested comments doesn't validate on W3C Markup Validator (http:\/\/validator.w3.org\/).\n\nCode:\n{code}$styles '...';\n$this->headStyle()->appendStyle($styles, array('conditional' => 'lt IE 7');{code}\n\nProduces:\n{code}<!--[lt IE 7]><style type=\"text\/css\" media=\"screen\">\n<!--\n...\n-->\n<\/style><![endif]-->{code}\n\nThis code doesn't validates."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6370\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10300",
                    "id": 10300,
                    "description": "Mini Release",
                    "name": "1.7.8",
                    "userReleaseDate": "30\/Mar\/09",
                    "archived": false,
                    "releaseDate": "2009-03-30",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10026",
                    "id": 10026,
                    "name": "Zend_View",
                    "description": "View portion of the ZF MVC",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30314",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "The whole point of conditional stylesheet support is to create exactly these comments -- which are used by IE to determine which stylesheet to utilize.  Removing the comments would break the functionality. If you don't want the comments, don't pass a value to the conditional stylesheets parameter.\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2009-04-22T06:06:47.000+0000",
                    "updated": "2009-04-22T06:06:47.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30317",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wojciech",
                        "name": "wojciech",
                        "displayName": "Wojciech Naruniec",
                        "active": true
                    },
                    "body": "I understand point of conditional stylesheet support. I think that the problem is that content of style is enclosed by \"<!-- --> \" tag. It isn't defined neither in XHTML 1.0 nor HTML 4.01 specs. I think that the best way to resolve this issue is to delete comment for HTML content and add CDATA tag for XHTML.\n\nCurrent code:\n{code}        $html = '<style type=\"text\/css\"' . $attrString . '>' . PHP_EOL\n              . $indent . '<!--' . PHP_EOL . $indent . $item->content . PHP_EOL . $indent . '-->' . PHP_EOL\n              . '<\/style>';{code}\n\nCould be changed to:\n{code}\n        \/\/ XHTML or HTML?\n        $commentTagStart = '';\n        $commentTagEnd = '';\n        if (($this->view instanceof Zend_View_Abstract) && !$this->view->doctype()->isXhtml()) {\n            $commentTagStart= '<![CDATA[';\n            $commentTagEnd= ']]>';\n        }\n\n        $html = '<style type=\"text\/css\"' . $attrString . '>' . PHP_EOL\n              . $indent . $commentTagStart . PHP_EOL . $indent . $item->content . PHP_EOL . $indent . $commentTagEnd . PHP_EOL\n              . '<\/style>';{code}\n\nNow, by default, framework produces invalid code. I think it lowers quality of framework.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wojciech",
                        "name": "wojciech",
                        "displayName": "Wojciech Naruniec",
                        "active": true
                    },
                    "created": "2009-04-22T07:13:46.000+0000",
                    "updated": "2009-04-22T07:13:46.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30318",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "The problem is that in HTML 4, IE will not see the conditional if there is no comment. This has nothing to do with whether or not the markup is valid, but everything to do with supporting broken browsers. If you need that kind of support, valid HTML is a secondary concern.\n\n(BTW, in the XHTML variant, CDATA *is* used -- it's just in vanilla HTML markup that comments are used.)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2009-04-22T08:04:36.000+0000",
                    "updated": "2009-04-22T08:04:36.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30324",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wojciech",
                        "name": "wojciech",
                        "displayName": "Wojciech Naruniec",
                        "active": true
                    },
                    "body": "Thanks for explanation. Didn't know about this IE bug.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wojciech",
                        "name": "wojciech",
                        "displayName": "Wojciech Naruniec",
                        "active": true
                    },
                    "created": "2009-04-22T13:48:30.000+0000",
                    "updated": "2009-04-22T13:48:30.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6370\/transitions"
}