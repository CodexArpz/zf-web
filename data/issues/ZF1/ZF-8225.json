{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8225",
    "key": "ZF-8225",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Wrong class gets instantiated in Zend_Application_Bootstrap_BootstrapAbstract::getPluginResource()"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8225\/votes",
                "votes": 2,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2011-08-21T13:55:36.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=hendri.smit",
                "name": "hendri.smit",
                "displayName": "Hendri Smit",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-11-05T04:02:19.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-08-21T13:55:36.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Using ZF 1.9.5 with Doctrine 1.1.5 and Dwoo 1.1.0\r\n\r\nIn my application.ini I have the following:\r\n{code}\r\n...\r\nautoloaderNamespaces.Zoul = \"Zoul\"\r\npluginPaths.Zoul_Application_Resource = \"Zoul\/Application\/Resource\"\r\n...\r\nresources.doctrine.connections.cx1.dsn = \"mysql:\/\/user:pass@host\/cx1\"\r\n...\r\n{code}\r\n\r\nThere is a resource plugin class named Zoul_Application_Resource_Doctrine in the Zoul\/Application\/Resource folder.\r\nMy application is running fine with this plugin, except when I include the main file Doctrine.php from the Doctrine library before I bootstrap the application. Then I get the following error:\r\n{color:red}\r\nFatal error: Uncaught exception 'Doctrine_Exception' with message 'Doctrine is static class. No instances can be created.'\r\n{color}\r\n\r\nI've traced it back to line 354 of Zend_Application_Bootstrap_BootstrapAbstract:\r\n{code:title=Zend_Application_Bootstrap_BootstrapAbstract}\r\npublic function getPluginResource($resource)\r\n{\r\n\r\n...\r\n\r\nif (class_exists($plugin)) {\r\n    $spec = (array) $spec;\r\n    $spec['bootstrap'] = $this;\r\n    $instance = new $plugin($spec);\r\n    $pluginName = $this->_resolvePluginResourceName($instance);\r\n    unset($this->_pluginResources[$plugin]);\r\n    $this->_pluginResources[$pluginName] = $instance;\r\n\r\n    if (0 === strcasecmp($resource, $pluginName)) {\r\n        return $instance;\r\n    }\r\n}\r\n\r\n...\r\n\r\n}\r\n{code}\r\nSo what happens is that the main Doctrine class is included and this piece of code tries to instantiate it ($plugin has value 'doctrine'), instead of trying to instantiate the resource plugin!\r\nNot including the main Doctrine class is a solution for now, but I came across this problem while testing my application and putting more than one test in a testcase. I re-bootstrap the app before every testcase and on the second bootstrap the main Doctrine class automatically exists in the php environment.\r\nAs I'm not completely aware of what the above piece of code should do I haven't found a solution yet."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/1",
                "name": "Blocker"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8225\/watchers",
                "isWatching": false,
                "watchCount": 3
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [
                "zf-crteam-padraic",
                "zf-crteam-priority"
            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=padraic",
                "name": "padraic",
                "displayName": "P\u00e1draic Brady",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-9259",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9259",
                    "type": {
                        "name": "Related",
                        "direction": "OUTBOUND",
                        "description": "is related to"
                    }
                },
                {
                    "issueKey": "ZF-8150",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8150",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                },
                {
                    "issueKey": "ZF-8299",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8299",
                    "type": {
                        "name": "Related",
                        "direction": "INBOUND",
                        "description": "is related to"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/13088",
                    "filename": "zf8225.patch",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mfacenet",
                        "name": "mfacenet",
                        "displayName": "Shawn Stratton",
                        "active": true
                    },
                    "created": "2010-05-20T08:47:15.000+0000",
                    "size": 564,
                    "mimeType": "text\/x-patch",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/13088\/zf8225.patch"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10380",
                    "id": 10380,
                    "description": "Mini Release",
                    "name": "1.9.5",
                    "userReleaseDate": "27\/Oct\/09",
                    "archived": false,
                    "releaseDate": "2009-10-27",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10390",
                    "id": 10390,
                    "name": "Zend_Application",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36100",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=hendri.smit",
                        "name": "hendri.smit",
                        "displayName": "Hendri Smit",
                        "active": true
                    },
                    "body": "Upgraded Doctrine to 1.2 branch. They moved class Doctrine to Doctrine_Core which solves the problem for the Doctrine part.\r\n\r\nNow I'm getting the error because the main Dwoo class gets instantitiated instead of Zoul_Application_Resource_Dwoo. I could (and I propably will) ask the guys from Dwoo to move to something like Dwoo_Core but those changes could take a while.\r\n\r\nHowever, looking at the related issues that wouldn't solve the problems of others. Although they propably could rename their main class quite easily.\r\n\r\nAre there any thoughts on how to solve this problem?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=hendri.smit",
                        "name": "hendri.smit",
                        "displayName": "Hendri Smit",
                        "active": true
                    },
                    "created": "2009-11-18T06:54:09.000+0000",
                    "updated": "2009-11-18T06:54:09.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37232",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sandwyrm",
                        "name": "sandwyrm",
                        "displayName": "James Zimmerman",
                        "active": true
                    },
                    "body": "My work-around was to use a different name for the resource class, for example Site_Application_Resource_Doctrinelibrary.  I attempted Site_Application_Resource_DoctrineLibrary and other combinations to no avail, any idea about the formatting necessities for Resource class names to achieve camel casing?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sandwyrm",
                        "name": "sandwyrm",
                        "displayName": "James Zimmerman",
                        "active": true
                    },
                    "created": "2009-12-29T23:13:19.000+0000",
                    "updated": "2009-12-29T23:13:19.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/37409",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=noopable",
                        "name": "noopable",
                        "displayName": "Tomoaki Kosugi",
                        "active": true
                    },
                    "body": "I got the same problem.\r\nI solved it by this code. Check the $plugin is a resource or not.\r\n{code}\r\nIndex: BootstrapAbstract.php\r\n===================================================================\r\n--- BootstrapAbstract.php\t(revision 19975)\r\n+++ BootstrapAbstract.php\t(working copy)\r\n@@ -351,7 +351,8 @@\r\n                 }\r\n             }\r\n \r\n-            if (class_exists($plugin)) { \/\/@SEE ZF-7550\r\n+            if (class_exists($plugin) \/\/{ \/\/@SEE ZF-7550\r\n+                && is_subclass_of($plugin, 'Zend_Application_Resource_Resource')) { \/\/@see ZF-8225\r\n                 $spec = (array) $spec;\r\n                 $spec['bootstrap'] = $this;\r\n                 $instance = new $plugin($spec);\r\n\r\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=noopable",
                        "name": "noopable",
                        "displayName": "Tomoaki Kosugi",
                        "active": true
                    },
                    "created": "2010-01-05T13:58:37.000+0000",
                    "updated": "2010-01-05T13:58:37.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40557",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mfacenet",
                        "name": "mfacenet",
                        "displayName": "Shawn Stratton",
                        "active": true
                    },
                    "body": "Based on the patch submitted by Tomoaki Kosugi, using instanceof operator rather than is_subclass_of() function to avoid autoloading.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mfacenet",
                        "name": "mfacenet",
                        "displayName": "Shawn Stratton",
                        "active": true
                    },
                    "created": "2010-05-20T08:47:18.000+0000",
                    "updated": "2010-05-20T08:47:18.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48029",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=padraic",
                        "name": "padraic",
                        "displayName": "P\u00e1draic Brady",
                        "active": true
                    },
                    "body": "Patched in r24393. Patch modified not to use instanceof since that creates a silent FALSE evaluation in plugin checks.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=padraic",
                        "name": "padraic",
                        "displayName": "P\u00e1draic Brady",
                        "active": true
                    },
                    "created": "2011-08-21T13:55:36.000+0000",
                    "updated": "2011-08-21T13:55:36.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-8225\/transitions"
}