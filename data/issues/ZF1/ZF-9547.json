{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9547",
    "key": "ZF-9547",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Handle 'empty' Amazon book search results"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField",
            "value": {
                "timeestimate": 0,
                "timespent": 45
            }
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9547\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10451",
                    "id": 10451,
                    "description": "Mini Release",
                    "name": "1.10.4",
                    "userReleaseDate": "28\/Apr\/10",
                    "archived": false,
                    "releaseDate": "2010-04-28",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2010-04-16T08:13:10.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tfountain",
                "name": "tfountain",
                "displayName": "Tim Fountain",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-03-26T13:00:29.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-04-16T08:13:10.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I'm using Zend_Service_Amazon to display book information, using itemSearch() to search by ISBN. Every now and then, Amazon seems to return a valid result without any data for these queries, which causes the following fatal PHP error from ZF:\r\n\r\nCatchable fatal error: Argument 1 passed to Zend_Service_Amazon_Item::__construct() must be an instance of DOMElement, null given, called in \/home\/tim\/zend-framework\/ZendFramework-1.10.1\/library\/Zend\/Service\/Amazon\/ResultSet.php on line 111 and defined in \/home\/tim\/zend-framework\/ZendFramework-1.10.1\/library\/Zend\/Service\/Amazon\/Item.php on line 118\r\n\r\nHere's an example script, you'll need to add valid API key data:\r\n\r\n{code}\r\n<?php\r\n$isbn = '0750640162'; \/\/ doesn't work\r\n\/\/$isbn = '0754512673'; \/\/ does work\r\n\r\n$client = new Zend_Service_Amazon('AMAZON_API_KEY', 'UK', 'AMAZON_SECRET_KEY');\r\n\r\n$results = $client->itemSearch(array(\r\n    'SearchIndex' => 'Books',\r\n    'Power' => 'isbn:'.$isbn,\r\n    'ResponseGroup' => 'Large,ItemAttributes,Images,EditorialReview'\r\n));\r\n\r\n$totalResults = $results->totalResults();\r\nif ($totalResults == 1) {\r\n\tvar_dump($results->current()); \/\/ causes PHP fatal\r\n}\r\n{code}\r\n\r\nThere are two ISBN numbers at the top of this script. The first causes the error, the second works fine. Both of these ISBNs are perfectly valid books that are listed on amazon.co.uk.\r\n\r\nUnfortunately the problem is intermittent. I'm getting the error consistently at the moment, but the same search was working fine last week. I have had this problem in the past with other ISBNs though, so this isn't an isolated case specific to this book.\r\n\r\nIt does seem like this is partly a problem on Amazon's side, but it would be nice if ZF  could detect the invalid result and handle it gracefully, as I have no way of catching the PHP fatal."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9547\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/worklog\/21940",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9547",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dragonbe",
                        "name": "dragonbe",
                        "displayName": "Michelangelo van Dam",
                        "active": true
                    },
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dragonbe",
                        "name": "dragonbe",
                        "displayName": "Michelangelo van Dam",
                        "active": true
                    },
                    "comment": "Removed the explicit typecasting of DOMElement in the constructor, but added checks on both null and DOMElement values inside the constructor method (r21883)",
                    "created": "2010-04-16T08:11:19.000+0000",
                    "updated": "2010-04-16T08:11:19.000+0000",
                    "started": "2010-04-16T08:09:00.000+0000",
                    "minutesSpent": 45
                }
            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dragonbe",
                "name": "dragonbe",
                "displayName": "Michelangelo van Dam",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/12951",
                    "filename": "amazon-response-invalid.xml",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tfountain",
                        "name": "tfountain",
                        "displayName": "Tim Fountain",
                        "active": true
                    },
                    "created": "2010-03-26T13:06:03.000+0000",
                    "size": 1520,
                    "mimeType": "text\/xml",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/12951\/amazon-response-invalid.xml"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/12952",
                    "filename": "amazon-response-valid.xml",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tfountain",
                        "name": "tfountain",
                        "displayName": "Tim Fountain",
                        "active": true
                    },
                    "created": "2010-03-26T13:06:06.000+0000",
                    "size": 15414,
                    "mimeType": "text\/xml",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/12952\/amazon-response-valid.xml"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10412",
                    "id": 10412,
                    "description": "Mini Release",
                    "name": "1.10.1",
                    "userReleaseDate": "10\/Feb\/10",
                    "archived": false,
                    "releaseDate": "2010-02-10",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10022",
                    "id": 10022,
                    "name": "Zend_Service_Amazon",
                    "description": "utility functions for using Amazon web services",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/39585",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tfountain",
                        "name": "tfountain",
                        "displayName": "Tim Fountain",
                        "active": true
                    },
                    "body": "Attached are the raw XML responses I'm currently getting from Amazon for the two ISBNs in my example script. You'll see in the failing one that the XML indicates that there was 1 result matching the search, but no <Item>s are included. ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tfountain",
                        "name": "tfountain",
                        "displayName": "Tim Fountain",
                        "active": true
                    },
                    "created": "2010-03-26T13:06:06.000+0000",
                    "updated": "2010-03-26T13:06:06.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40039",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dragonbe",
                        "name": "dragonbe",
                        "displayName": "Michelangelo van Dam",
                        "active": true
                    },
                    "body": "Fixed the issue and merged it with 1.10 branch (r21883)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dragonbe",
                        "name": "dragonbe",
                        "displayName": "Michelangelo van Dam",
                        "active": true
                    },
                    "created": "2010-04-16T08:13:10.000+0000",
                    "updated": "2010-04-16T08:13:10.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-9547\/transitions"
}