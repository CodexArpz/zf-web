{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11865",
    "key": "ZF-11865",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "If a Zend_Navigation_Page_Uri is the active page then Zend_View_Helper_Navigation_Menu::setOnlyActiveBranch(true) renders nothing"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11865\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/2",
                "name": "Won't Fix"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2013-01-22T10:31:55.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bart",
                "name": "bart",
                "displayName": "Bart van der Linden",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2011-11-01T02:02:32.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2013-01-22T10:31:55.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "The isActive() method of Zend_Navigation_Page_Mvc matches its params to the request which works fine! \r\nFor Zend_Navigation_Page_Uri there is no matching. The method is inhereted from Zend_Navigation_Page and implements some basic recursion to check if there are active child pages.\r\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11865\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/6",
                "name": "Closed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                "name": "frosch",
                "displayName": "Frank Br\u00fcckner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10981",
                    "id": 10981,
                    "description": "Mini Release",
                    "name": "1.11.11",
                    "userReleaseDate": "29\/Sep\/11",
                    "archived": false,
                    "releaseDate": "2011-09-29",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10406",
                    "id": 10406,
                    "name": "Zend_Navigation",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48885",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "body": "Simple workaround: use a mvc page.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2011-11-01T10:43:35.000+0000",
                    "updated": "2011-11-01T10:43:35.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48886",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bart",
                        "name": "bart",
                        "displayName": "Bart van der Linden",
                        "active": true
                    },
                    "body": "I do. Because Uri pages don't work. I did report a bug not a problem.\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bart",
                        "name": "bart",
                        "displayName": "Bart van der Linden",
                        "active": true
                    },
                    "created": "2011-11-01T11:15:20.000+0000",
                    "updated": "2011-11-01T11:15:20.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48887",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "body": "{quote}I did report a bug not a problem.{quote}\r\nI've only changed the priority. The issue is still open. :-)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2011-11-01T12:10:10.000+0000",
                    "updated": "2011-11-01T12:10:10.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48888",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bart",
                        "name": "bart",
                        "displayName": "Bart van der Linden",
                        "active": true
                    },
                    "body": "Reading the documentation at http:\/\/framework.zend.com\/manual\/en\/zend.navigation.pages.html \r\n\r\nI found:\r\n\r\noptions: 'active' -> Whether the page should be considered active for the current request. If active is FALSE or not given, MVC pages will check its properties against the request object upon calling $page->isActive().\r\n\r\nIt's a feature! Not a bug. My apologies.\r\n\r\nIs there a reason for this?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bart",
                        "name": "bart",
                        "displayName": "Bart van der Linden",
                        "active": true
                    },
                    "created": "2011-11-01T12:50:34.000+0000",
                    "updated": "2011-11-01T12:50:34.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48889",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bart",
                        "name": "bart",
                        "displayName": "Bart van der Linden",
                        "active": true
                    },
                    "body": "Strike through is not intentional..",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bart",
                        "name": "bart",
                        "displayName": "Bart van der Linden",
                        "active": true
                    },
                    "created": "2011-11-01T12:52:48.000+0000",
                    "updated": "2011-11-01T12:52:48.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48890",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "body": "{quote}It's a feature! Not a bug. My apologies.{quote}\r\nYou are right. \r\n{quote}Is there a reason for this?{quote}\r\nTo use the component alone. (without Zend_Controller_Front, Zend_Controller_Request)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2011-11-01T13:08:08.000+0000",
                    "updated": "2011-11-01T13:08:08.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48891",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bart",
                        "name": "bart",
                        "displayName": "Bart van der Linden",
                        "active": true
                    },
                    "body": "I'm not sure I understand. Do you mean without Zend_View_Helpers?\r\n\r\nisActive is called in Zend_View_Helper_Navigation_HelperAbstract::findActive\r\n\r\nWhat I referred to is: \r\nIs it difficult to implement for Zend_Navigation_Page_Uri?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bart",
                        "name": "bart",
                        "displayName": "Bart van der Linden",
                        "active": true
                    },
                    "created": "2011-11-01T13:52:39.000+0000",
                    "updated": "2011-11-01T13:52:39.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48897",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "body": "{quote}I'm not sure I understand. Do you mean without Zend_View_Helpers?{quote}\r\nI mean without Zend_Controller_Front\/Zend_Controller_Request.\r\n{quote}Is it difficult to implement for Zend_Navigation_Page_Uri?{quote}\r\nNo, it is very easy. But we have to create another dependency to Zend_Controller_Front\/Zend_Controller_Request.\r\n\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2011-11-01T16:00:26.000+0000",
                    "updated": "2011-11-01T16:00:26.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48899",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bart",
                        "name": "bart",
                        "displayName": "Bart van der Linden",
                        "active": true
                    },
                    "body": "OK I'm starting to understand... \r\n\r\nZend_Navigation must be standalone. At least for uri pages. \r\n\r\nThen to remove inconsistencies shouldn't the matching of both uri and mvc pages take place at the View_Helper level?\r\n\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bart",
                        "name": "bart",
                        "displayName": "Bart van der Linden",
                        "active": true
                    },
                    "created": "2011-11-01T16:51:24.000+0000",
                    "updated": "2011-11-01T16:51:24.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48997",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "body": "{quote}Zend_Navigation must be standalone. At least for uri pages.{quote}\r\nYes, this is the point!\r\n{quote}Then to remove inconsistencies shouldn't the matching of both uri and mvc pages take place at the View_Helper level?{quote}\r\nCan you explain what you mean with inconsistencies? Thanks.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2011-11-05T09:24:47.000+0000",
                    "updated": "2011-11-05T09:24:47.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/49032",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bart",
                        "name": "bart",
                        "displayName": "Bart van der Linden",
                        "active": true
                    },
                    "body": "For me the inconsistencies boil down to the implementation Zend_Navigation_Page_Mvc::isActive. It needs Zend_Controller_Request to operate. Zend_Navigation_Page_Uri::isActive may not.\r\n\r\nisActive is called by Zend_View_Helper_Navigation_HelperAbstract::findActive and I don't think the dependency constraints are still an issue there.\r\n\r\nI have been busy working on a solution. It removes all dependencies on Zend_Controller_Request from Zend_Navigation_Page_Mvc.\r\n\r\n\r\nStep 1. remove Zend_Navigation_Page_Mvc::isActive\r\n\r\n\r\nStep 2. In Zend_Navigation_Page replace\r\n\r\n\/**\r\n * Returns whether page should be considered active or not\r\n *\r\n * @param boolean $recursive unused\r\n * @return boolean\r\n *\/\r\npublic function isActive($recursive = false)\r\n{\r\n    if (null !== $this->getParent()) {\r\n        return $this === $this->getParent()->getActivePage();\r\n    }\r\n    return false;\r\n}\r\n\r\n\/**\r\n * Sets whether page should be considered active or not\r\n *\r\n * @param boolean $active\r\n * @return Custom_Navigation_Page\r\n *\/\r\npublic function setActive($active = true)\r\n{\r\n    if (null !== ($parent = $this->getParent())) {\r\n        if (true === $active) {\r\n            $parent->_setActivePage($this);\r\n        }\r\n        else {\r\n            $parent->_setActivePage();\r\n        }\r\n   }\r\n   return $this;\r\n}\r\n\r\n\r\nStep 3. Zend_Navigation_Container add:\r\n\r\n\/**\r\n * Placeholder for the active child\r\n *\r\n * @var Zend_Navigation_Page\r\n *\/\r\nprotected $_activePage;\r\n\r\n\r\n\/**\r\n * Returns the active page for this container.\r\n * If recursive is true then find the deepest active page\r\n *\r\n * @return Zend_Navigation_Page|null\r\n *\/\r\npublic function getActivePage($recursive = false)\r\n{\r\n    $page = $this->_activePage;\r\n    if (true === $recursive) {\r\n        while ($page && $page->_activePage) {\r\n            $page = $page->_activePage;\r\n        }\r\n    }\r\n    return $page;\r\n}\r\n\r\n\r\n\/**\r\n * Set the active page for this container and update the parents and children\r\n *\r\n * @param Zend_Navigation_Page|null $page\r\n * @return Custom_Navigation\r\n *\/\r\nprotected function _setActivePage($page = null)\r\n{\r\n    \/* Page is already the active page *\/\r\n    if ($page === $this->_activePage) {\r\n        return $this;\r\n    }\r\n\r\n    \/* Deactivate the current active page and its children *\/\r\n    if (null !== $this->_activePage) {\r\n        $this->_activePage->_setActivePage();\r\n    }\r\n\r\n    \/* Make page the activePage and activate the parents *\/\r\n    if (null !== $page) {\r\n        if (!$this->hasPage($page)) {\r\n            throw new Exception('Error activating page. Page is not a child');\r\n        }\r\n        $this->_activePage = $page;\r\n        if ($this instanceof Zend_Navigation_Page)\r\n        {\r\n            $this->getParent()->_setActivePage($this);\r\n        }\r\n    }\r\n}\r\n\r\n\r\nUse case: match the request to a navigation page and activate it\r\n\r\n\/\/ Convert the request to a uri\r\n$params = array();\r\n$params['module'] = $this->getRequest()->getModuleName();\r\n$params['controller'] = $this->getRequest()->getControllerName();\r\n$params['action'] = $this->getRequest()->getActionName();\r\n$params = $request + $this->getRequest()->getParams();\r\nforeach ($params as $key => $value) {\r\n    if (empty($value))\r\n    {\r\n        unset($params[$key]);\r\n    }\r\n}\r\n$uri = Zend_Controller_Front::getInstance()->getRouter()\r\n    ->assemble($params, null, false);\r\n\r\n\/\/ Find the page matching the uri\r\n$page = $navigation->findOneByHref($uri);\r\n\/\/ If found activate the page\r\nif ($page) {\r\n    $page->setActive();\r\n}\r\n\r\nTell me what you think.\r\n\r\nMaybe I should implement this on Github but I have no experience there.\r\n\r\n\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bart",
                        "name": "bart",
                        "displayName": "Bart van der Linden",
                        "active": true
                    },
                    "created": "2011-11-08T23:54:52.000+0000",
                    "updated": "2011-11-08T23:54:52.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/49034",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "body": "Hi Bart,\r\nthis is no inconsistencies - this is the required behavior!\r\nThe documentation says:\r\n\r\n*Zend_Navigation_Page_Mvc*\r\n{quote}MVC pages are defined using MVC parameters known from the Zend_Controller component. An MVC page will use Zend_Controller_Action_Helper_Url internally in the getHref() method to generate hrefs, and the isActive() method will intersect the Zend_Controller_Request_Abstract params with the page's params to determine if the page is active.{quote}\r\n*Zend_Navigation_Page_Uri*\r\n{quote}Pages of type Zend_Navigation_Page_Uri can be used to link to pages on other domains or sites, or to implement custom logic for the page. URI pages are simple; in addition to the common page options, a URI page takes only one option \u2014 uri. The uri will be returned when calling $page->getHref(), and may be a String or NULL.{quote}\r\n\r\nWhen you remove all dependencies on Zend_Controller from Zend_Navigation_Page_Mvc - where is the difference between Uri- and MVC-Pages?\r\nIn addition, Zend_Controller is required to generate URLs for MVC-pages.\r\n\r\nIn short:\r\n* a MVC-page link to an action in a controller within a Zend Framework application\r\n* a URI-page link to an other domain or site (it is also required to use Zend_Navigation alone\/without Zend_Controller)\r\n\r\nThis not a error or a problem, it is the normal and required behavior!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2011-11-09T09:43:55.000+0000",
                    "updated": "2011-11-09T17:10:23.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/49046",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bart",
                        "name": "bart",
                        "displayName": "Bart van der Linden",
                        "active": true
                    },
                    "body": "Hello Frenk,\r\n\r\nI must admit the documentation (reading it more thoroughly now) follows the implementation very precise or should I say consistent:). But let's not argue over (in)consistencies. I could state that required cq. documented behavior doesn't rule out inconsistencies but that leads nowhere. So I won't. \r\n\r\nI read my previous post and I really state:\r\n{quote}It removes all dependencies on Zend_Controller_Request from Zend_Navigation_Page_Mvc{quote}.\r\n*Zend_Navigation_Page_Mvc::isActive* is what I meant. For sure! Removing all dependencies is ridiculous. Sorry for the confusion.\r\n\r\nBut that said, running the snippet before using the view helpers is a good workaround for this bug:\r\n\r\n{noformat}\r\n\/\/ Convert the request to a uri \r\n$params = array(); \r\n$params['module'] = $this->getRequest()->getModuleName(); \r\n$params['controller'] = $this->getRequest()->getControllerName(); \r\n$params['action'] = $this->getRequest()->getActionName(); \r\n$params = $request + $this->getRequest()->getParams(); \r\nforeach ($params as $key => $value) {\r\n    if (empty($value)) {\r\n        unset($params[$key]);\r\n    } \r\n} \r\n$uri = Zend_Controller_Front::getInstance()->getRouter() ->assemble($params, null, false);\r\n\/\/ Find the page matching the uri \r\n$page = $navigation->findOneByHref($uri); \r\n\/\/ If found activate the page\r\nif ($page) {\r\n    $page->setActive(); \r\n}\r\n{noformat}\r\n\r\nConclusion: if a Zend_Navigation_Page_Uri is active the Zend_View_Helper_Navigation_Menu::setOnlyActiveBranch(true) will render. Hench the issue as stated doesn't exist or can we rephrase it?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bart",
                        "name": "bart",
                        "displayName": "Bart van der Linden",
                        "active": true
                    },
                    "created": "2011-11-09T22:58:16.000+0000",
                    "updated": "2011-11-09T22:58:16.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/49047",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "body": "Hi Bart,\r\nlet's take a simple example:\r\n{code:title=Example}$container = new Zend_Navigation(array(\r\n    array(\r\n        'label'  => 'Page 1',\r\n        'uri'    => 'page-1',\r\n        'active' => true,\r\n        'pages'  => array(\r\n            array(\r\n                'label' => 'Page 1.1',\r\n                'uri'   => 'page-1.1',\r\n            ),\r\n            array(\r\n                'label' => 'Page 1.2',\r\n                'uri'   => 'page-1.2',\r\n                \r\n            ),\r\n        ),\r\n    ),\r\n    array(\r\n        'label' => 'Page 2',\r\n        'uri'   => 'page-2',\r\n    ),\r\n    array(\r\n        'label' => 'Page 3',\r\n        'uri'   => 'page-3',\r\n    ),\r\n));\r\n\r\necho $view->navigation($container)->menu()->setOnlyActiveBranch(true);{code}\r\n{code:title=Output|borderStyle=solid}<ul class=\"navigation\">\r\n    <li class=\"active\">\r\n        <a href=\"page-1\">Page 1<\/a>\r\n        <ul>\r\n            <li>\r\n                <a href=\"page-1.1\">Page 1.1<\/a>\r\n            <\/li>\r\n            <li>\r\n\r\n                <a href=\"page-1.2\">Page 1.2<\/a>\r\n            <\/li>\r\n        <\/ul>\r\n    <\/li>\r\n<\/ul>{code}\r\nResult: It works!\r\n\r\nThis is the desired and documented behavior - no more and no less.\r\nYou can use it without {{Zend_Controller}} and this is also the goal for the page type \"uri\"!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2011-11-09T23:43:16.000+0000",
                    "updated": "2011-11-09T23:43:16.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/49048",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "body": "{quote}{code}\r\n\/\/ Convert the request to a uri \r\n$params = array(); \r\n$params['module'] = $this->getRequest()->getModuleName(); \r\n$params['controller'] = $this->getRequest()->getControllerName(); \r\n$params['action'] = $this->getRequest()->getActionName(); \r\n$params = $request + $this->getRequest()->getParams(); \r\nforeach ($params as $key => $value) {\r\n    if (empty($value)) {\r\n        unset($params[$key]);\r\n    } \r\n} \r\n$uri = Zend_Controller_Front::getInstance()->getRouter() ->assemble($params, null, false);\r\n{code}{quote}\r\nI'm sorry, but your code snippet shows the same behavior as {{Zend_Navigation_Page_Mvc}}!\r\n\r\nDo you understand what I mean?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2011-11-10T00:05:26.000+0000",
                    "updated": "2011-11-10T00:05:26.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/49049",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bart",
                        "name": "bart",
                        "displayName": "Bart van der Linden",
                        "active": true
                    },
                    "body": "\r\n{quote}This is the desired and documented behavior - no more and no less.{quote}\r\n\r\nThat's why I wondered if the issue should remain open.\r\n\r\n{quote}Do you understand what I mean?{quote}\r\n\r\nYes, it merely injects the request at a different level.\r\n\r\n\r\n\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bart",
                        "name": "bart",
                        "displayName": "Bart van der Linden",
                        "active": true
                    },
                    "created": "2011-11-10T00:56:25.000+0000",
                    "updated": "2011-11-10T00:56:25.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/49050",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "body": "{quote}That's why I wondered if the issue should remain open.{quote}\r\nThe idea is not bad, but we need a solution with a \"soft\" dependency on Zend_Controller and a fallback\/alternative with plain PHP. Maybe $_SERVER['REQUEST_URI']?!\r\n\r\nI will write some unit tests and look for a simple solution without Zend_Controller.\r\n\r\n\r\nThanks for your input!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2011-11-10T11:33:12.000+0000",
                    "updated": "2011-11-10T11:33:12.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/53087",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "body": "This is a task for a new version of Zend_Navigation, maybe in version 2.5 or 3.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2013-01-22T10:31:55.000+0000",
                    "updated": "2013-01-22T10:31:55.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11865\/transitions"
}