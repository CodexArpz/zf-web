{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-12224",
    "key": "ZF-12224",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Json::fromXml creates empty json string"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-12224\/votes",
                "votes": 1,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lindon",
                "name": "lindon",
                "displayName": "lindon",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2012-05-21T22:40:22.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-08-07T13:17:39.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "bug",
                "json",
                "xml"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I have extracted an xml (xmp) string from a jpeg photo and successfully loaded it to create a DOMDocument in php. When I export the xml string from the DOMDocument (using $xmlstring = $xmldocument->saveXML()) and try to create a json string using Zend_Json::fromXml($xmlstring), I get the following \"empty\" json string:\r\n{\"RDF\":\"\"}\r\n\r\nSame thing happens when I use the xml string directly (ie without loading to a DOMDocument first). There aren't many recursion levels in the string (2 or 3) and I'm able to manipulate the DOMDocument in php without any issues."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-12224\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [
                "Zend_Json::fromXml()"
            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10981",
                    "id": 10981,
                    "description": "Mini Release",
                    "name": "1.11.11",
                    "userReleaseDate": "29\/Sep\/11",
                    "archived": false,
                    "releaseDate": "2011-09-29",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10016",
                    "id": 10016,
                    "name": "Zend_Json",
                    "description": "serializes native PHP to JSON and decodes JSON to native PHP",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/50719",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "body": "Can you post the XML string here?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2012-05-22T08:56:31.000+0000",
                    "updated": "2012-05-22T08:56:31.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/50743",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lindon",
                        "name": "lindon",
                        "displayName": "lindon",
                        "active": true
                    },
                    "body": "Here's the xml string:\r\n\r\n<rdf:RDF xmlns:rdf=\"http:\/\/www.w3.org\/1999\/02\/22-rdf-syntax-ns#\">\r\n      <rdf:Description xmlns:tiff=\"http:\/\/ns.adobe.com\/tiff\/1.0\/\" rdf:about=\"\">\r\n         <tiff:Orientation>1<\/tiff:Orientation>\r\n         <tiff:YCbCrPositioning>2<\/tiff:YCbCrPositioning>\r\n         <tiff:XResolution>3000000\/10000<\/tiff:XResolution>\r\n         <tiff:YResolution>3000000\/10000<\/tiff:YResolution>\r\n\r\n         <tiff:ResolutionUnit>2<\/tiff:ResolutionUnit>\r\n         <tiff:Make>NIKON CORPORATION<\/tiff:Make>\r\n         <tiff:Model>NIKON D200<\/tiff:Model>\r\n         <tiff:NativeDigest>256,257,258,259,262,274,277,284,530,531,282,283,296,301,318,319,529,532,306,270,271,272,305,315,33432;B47C241E53ED5D64CA700180D73CEC2B<\/tiff:NativeDigest>\r\n      <\/rdf:Description>\r\n      <rdf:Description xmlns:xap=\"http:\/\/ns.adobe.com\/xap\/1.0\/\" rdf:about=\"\">\r\n         <xap:ModifyDate>2006-09-08T16:55:07-04:00<\/xap:ModifyDate>\r\n\r\n         <xap:CreatorTool>Adobe Photoshop CS2 Windows<\/xap:CreatorTool>\r\n         <xap:CreateDate>2006-08-29T09:42:26-04:00<\/xap:CreateDate>\r\n         <xap:MetadataDate>2006-09-08T16:55:07-04:00<\/xap:MetadataDate>\r\n      <\/rdf:Description>\r\n      <rdf:Description xmlns:exif=\"http:\/\/ns.adobe.com\/exif\/1.0\/\" rdf:about=\"\">\r\n         <exif:ExifVersion>0221<\/exif:ExifVersion>\r\n         <exif:FlashpixVersion>0100<\/exif:FlashpixVersion>\r\n\r\n         <exif:CompressedBitsPerPixel>4\/1<\/exif:CompressedBitsPerPixel>\r\n         <exif:PixelXDimension>800<\/exif:PixelXDimension>\r\n         <exif:PixelYDimension>536<\/exif:PixelYDimension>\r\n         <exif:DateTimeOriginal>2006-08-29T09:42:26-04:00<\/exif:DateTimeOriginal>\r\n         <exif:DateTimeDigitized>2006-08-29T09:42:26-04:00<\/exif:DateTimeDigitized>\r\n         <exif:ExposureTime>10\/1000<\/exif:ExposureTime>\r\n\r\n         <exif:FNumber>56\/10<\/exif:FNumber>\r\n         <exif:ExposureProgram>2<\/exif:ExposureProgram>\r\n         <exif:ExposureBiasValue>0\/6<\/exif:ExposureBiasValue>\r\n         <exif:MaxApertureValue>41\/10<\/exif:MaxApertureValue>\r\n         <exif:MeteringMode>2<\/exif:MeteringMode>\r\n         <exif:LightSource>0<\/exif:LightSource>\r\n\r\n         <exif:FocalLength>520\/10<\/exif:FocalLength>\r\n         <exif:SensingMethod>2<\/exif:SensingMethod>\r\n         <exif:FileSource>3<\/exif:FileSource>\r\n         <exif:SceneType>1<\/exif:SceneType>\r\n         <exif:CustomRendered>0<\/exif:CustomRendered>\r\n         <exif:ExposureMode>0<\/exif:ExposureMode>\r\n\r\n         <exif:WhiteBalance>0<\/exif:WhiteBalance>\r\n         <exif:DigitalZoomRatio>1\/1<\/exif:DigitalZoomRatio>\r\n         <exif:FocalLengthIn35mmFilm>78<\/exif:FocalLengthIn35mmFilm>\r\n         <exif:SceneCaptureType>0<\/exif:SceneCaptureType>\r\n         <exif:GainControl>0<\/exif:GainControl>\r\n         <exif:Contrast>0<\/exif:Contrast>\r\n\r\n         <exif:Saturation>0<\/exif:Saturation>\r\n         <exif:Sharpness>0<\/exif:Sharpness>\r\n         <exif:SubjectDistanceRange>0<\/exif:SubjectDistanceRange>\r\n         <exif:GPSVersionID>0.0.2.2<\/exif:GPSVersionID>\r\n         <exif:ISOSpeedRatings>\r\n            <rdf:Seq>\r\n               <rdf:li>100<\/rdf:li>\r\n\r\n            <\/rdf:Seq>\r\n         <\/exif:ISOSpeedRatings>\r\n         <exif:Flash rdf:parseType=\"Resource\">\r\n            <exif:Fired>False<\/exif:Fired>\r\n            <exif:Return>0<\/exif:Return>\r\n            <exif:Mode>0<\/exif:Mode>\r\n            <exif:Function>False<\/exif:Function>\r\n\r\n            <exif:RedEyeMode>False<\/exif:RedEyeMode>\r\n         <\/exif:Flash>\r\n         <exif:ColorSpace>-1<\/exif:ColorSpace>\r\n         <exif:NativeDigest>36864,40960,40961,37121,37122,40962,40963,37510,40964,36867,36868,33434,33437,34850,34852,34855,34856,37377,37378,37379,37380,37381,37382,37383,37384,37385,37386,37396,41483,41484,41486,41487,41488,41492,41493,41495,41728,41729,41730,41985,41986,41987,41988,41989,41990,41991,41992,41993,41994,41995,41996,42016,0,2,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,20,22,23,24,25,26,27,28,30;47A06DE371320245089B1A1DAA388AC7<\/exif:NativeDigest>\r\n      <\/rdf:Description>\r\n      <rdf:Description xmlns:xapMM=\"http:\/\/ns.adobe.com\/xap\/1.0\/mm\/\" rdf:about=\"\">\r\n         <xapMM:DocumentID>uuid:EABB739A6F3FDB11AB45EE04CB17DD9C<\/xapMM:DocumentID>\r\n\r\n         <xapMM:InstanceID>uuid:8911EA4E7C3FDB11AB45EE04CB17DD9C<\/xapMM:InstanceID>\r\n      <\/rdf:Description>\r\n      <rdf:Description xmlns:dc=\"http:\/\/purl.org\/dc\/elements\/1.1\/\" rdf:about=\"\">\r\n         <dc:format>image\/jpeg<\/dc:format>\r\n         <dc:creator>\r\n            <rdf:Seq>\r\n               <rdf:li>Matt Turner<\/rdf:li>\r\n\r\n            <\/rdf:Seq>\r\n         <\/dc:creator>\r\n         <dc:title>\r\n            <rdf:Alt>\r\n               <rdf:li xml:lang=\"x-default\">maine boat<\/rdf:li>\r\n            <\/rdf:Alt>\r\n         <\/dc:title>\r\n         <dc:subject>\r\n\r\n            <rdf:Bag>\r\n               <rdf:li>boat<\/rdf:li>\r\n               <rdf:li>reflection<\/rdf:li>\r\n               <rdf:li>row<\/rdf:li>\r\n               <rdf:li>wood<\/rdf:li>\r\n            <\/rdf:Bag>\r\n         <\/dc:subject>\r\n\r\n      <\/rdf:Description>\r\n      <rdf:Description xmlns:photoshop=\"http:\/\/ns.adobe.com\/photoshop\/1.0\/\" rdf:about=\"\">\r\n         <photoshop:ColorMode>3<\/photoshop:ColorMode>\r\n         <photoshop:AuthorsPosition>Mr<\/photoshop:AuthorsPosition>\r\n         <photoshop:History\/>\r\n      <\/rdf:Description>\r\n   <\/rdf:RDF>",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lindon",
                        "name": "lindon",
                        "displayName": "lindon",
                        "active": true
                    },
                    "created": "2012-05-24T03:54:50.000+0000",
                    "updated": "2012-05-24T03:54:50.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/50745",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "body": "[This is a {{SimpleXML}} problem.|http:\/\/groups.google.com\/group\/comp.lang.php\/browse_thread\/thread\/d2a9b29ee21f7403\/c6b24b6d398ece2c]",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2012-05-24T08:12:25.000+0000",
                    "updated": "2012-05-24T08:12:25.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/50791",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lindon",
                        "name": "lindon",
                        "displayName": "lindon",
                        "active": true
                    },
                    "body": "Thanks for looking at this. Not too sure about the answer you found though. When I step through the code, the problem seems to be in the _processXml function in Zend\/Json.php. In that function the $children variable doesn't work for the example above (and perhaps anytime namespaces are used?).\r\n\r\nWhen namespaces are used, I think you would need to start with one of the following:\r\n\/\/either get all namespaces used at once\r\n\/\/the below would return an array of 8 namespaces for the above xml: rdf, tiff, xap, exif, xapMM, dc, xml, photoshop\r\n$ns = $simpleXmlElementObject->getNamespaces(true); \r\n\r\n\/\/or to start with just the top level namespace\r\n\/\/the below would return an array with a single namespace for the above xml: rdf\r\n$ns = $simpleXmlElementObject->getNamespaces(); \r\n\r\n\/\/then get children by iterating through the namespaces\r\n\/\/for the above xml, the below would return 6 children for the rdf namespace\r\nforeach($ns as $namespace => $url) {\r\n    $children = $simpleXmlElementObject->children($namespace, true);\r\n}\r\n\r\nWith the existing code, $children is 0, which seems to be the reason an empty string is returned. \r\n\r\nThe answer you linked to suggested the colons in the xml tags caused a problem in SimpleXML. Not sure what problem is being referred to - the colons signify the use of namespaces and SimpleXML can easily return the part before the colon (the namespace), or the part after (the name).\r\nThanks again for your help.\r\nlindon\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=lindon",
                        "name": "lindon",
                        "displayName": "lindon",
                        "active": true
                    },
                    "created": "2012-05-29T01:14:20.000+0000",
                    "updated": "2012-05-29T01:14:20.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/51541",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tamlyn",
                        "name": "tamlyn",
                        "displayName": "Tamlyn Rhodes",
                        "active": true
                    },
                    "body": "I don't think this is a problem with SimpleXML. The comp.lang.php discussion linked above is very old, possibly from before SimpleXML supported namespaced elements which it definitely does do now as explained by @lindon.\r\n\r\nIt would be very useful if Zend_Json could handle namespaces. ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=tamlyn",
                        "name": "tamlyn",
                        "displayName": "Tamlyn Rhodes",
                        "active": true
                    },
                    "created": "2012-08-07T13:17:39.000+0000",
                    "updated": "2012-08-07T13:17:39.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-12224\/transitions"
}