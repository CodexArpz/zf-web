{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2587",
    "key": "ZF-2587",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Issues with calculate dates"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2587\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2008-02-06T14:43:57.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akkie",
                "name": "akkie",
                "displayName": "Christian Kaps",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-02-06T12:00:42.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2008-02-07T03:29:03.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "When i try to calculate dates with the Zend_Date->set() method, i get wrong values.\n\n{code:title=Example 1}\ndate_default_timezone_set('UTC');\n\n$date = new Zend_Date(mktime(1, 1, 1, 1, 22, 2008));\n$date->set(\n    array(\n        'day' => $date->get(Zend_Date::DAY),\n        'month' => $date->get(Zend_Date::MONTH),\n        'year' => $date->get(Zend_Date::YEAR),\n        'hour' => 23,\n        'minute' => 59,\n        'second' => 59\n    )\n);\n\n$date->add(6, Zend_Date::MONTH);\n$date->setTimezone('Europe\/Berlin');\necho $date->get(Zend_Date::DATE_MEDIUM) . ' ' . $date->get(Zend_Date::TIME_MEDIUM);  \n{code}\n\nExample 1 works good. The result is 23.07.2008 01:59:59.\n{code:title=Example 2}\ndate_default_timezone_set('UTC');\n\n$date = new Zend_Date(mktime(1, 1, 1, 1, 22, 2008));\n$date->setTimezone('Europe\/Berlin');\n$date->set(\n    array(\n        'day' => $date->get(Zend_Date::DAY),\n        'month' => $date->get(Zend_Date::MONTH),\n        'year' => $date->get(Zend_Date::YEAR),\n        'hour' => 23,\n        'minute' => 59,\n        'second' => 59\n    )\n);\n\n$date->add(6, Zend_Date::MONTH);\necho $date->get(Zend_Date::DATE_MEDIUM) . ' ' . $date->get(Zend_Date::TIME_MEDIUM);  \n{code}\nExample 2: When i set the timezone first the result is 02.07.2008 00:59:59. \n{code:title=Example 3}\ndate_default_timezone_set('UTC');\n\n$date = new Zend_Date(mktime(1, 1, 1, 1, 22, 2008));\n$date->set(\n    array(\n        'day' => $date->get(Zend_Date::DAY),\n        'month' => $date->get(Zend_Date::MONTH),\n        'year' => $date->get(Zend_Date::YEAR),\n        'hour' => 23,\n        'minute' => 59,\n        'second' => 59\n    )\n);\n$date->setTimezone('Europe\/Berlin');\n$date->add(6, Zend_Date::MONTH);\necho $date->get(Zend_Date::DATE_MEDIUM) . ' ' . $date->get(Zend_Date::TIME_MEDIUM);  \n{code}\nExample 3: When i set the timezone before i add the 6 months the result is 01.07.2008 01:59:59. "
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2587\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10140",
                    "id": 10140,
                    "description": "Mini Release",
                    "name": "1.0.3",
                    "userReleaseDate": "30\/Nov\/07",
                    "archived": true,
                    "releaseDate": "2007-11-30",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10072",
                    "id": 10072,
                    "name": "Zend_Date",
                    "description": "Zend_Date is the basic library for the handling of all date, time and calendar-related issues.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/18891",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "In your case you should set the option \"extended_month\" to true.\nThis option handles how months are calculated.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2008-02-06T14:39:34.000+0000",
                    "updated": "2008-02-06T14:39:34.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/18892",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Sorry, there was an typo.... this is an working example... it has to be set before working with date (set\/add\/sub)\n{code}\nZend_Date::setOptions(array('extend_month' => true));\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2008-02-06T14:43:15.000+0000",
                    "updated": "2008-02-06T14:43:15.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/18907",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akkie",
                        "name": "akkie",
                        "displayName": "Christian Kaps",
                        "active": true
                    },
                    "body": "Hello Thomas\n\nThe code works almost. Example 1 and Example 3 are correct. Example 2 is one hour in the past. Is there anything to note?\n\nI have found an other issue with the add method.\n\n{code}\ndate_default_timezone_set('UTC');\n\n$date = new Zend_Date();\n$date->set(30, Zend_Date::DAY);\n$date->set(7, Zend_Date::MONTH);\n$date->set(2008, Zend_Date::YEAR);\n$date->set(0, Zend_Date::HOUR);\n$date->set(0, Zend_Date::MINUTE);\n$date->set(0, Zend_Date::SECOND);\necho $date->get(Zend_Date::DATE_MEDIUM) . ' ' . $date->get(Zend_Date::TIME_MEDIUM);\n{code}\n\nThis example displays 01.07.2008 00:00:00. When is set 29 as day it works correct.\n\nBest regards\nChristian",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akkie",
                        "name": "akkie",
                        "displayName": "Christian Kaps",
                        "active": true
                    },
                    "created": "2008-02-07T02:52:36.000+0000",
                    "updated": "2008-02-07T02:52:36.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/18908",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Your problem is that UTC does not have summer\/wintertime...\nSo you set CET... and then you set a date... now summer\/wintertime calculation is done, the resulting date has set +1...\nAnd THEN you add 6 months... now we have +2 (summertime)... but the difference from +1 to +2 is only one hour and not 2 hours.\n\nThis is the difference you have seen.\nPlease note that date-calculation differs is you use timezones or UTC\/GMT.\n\nYou second problem is also simple:\nWe have February...\n\nYou are setting the actual date with new Zend_Date()...\nThen you try to set the 30.February... but there is no 30.February... by default Zend_Date corrects dates automatically so what you get is 1.March... \nNormally you would set values from greatest to smallest... so you have to do Year, Month, Day, Hour, Minute, Second... then you will have no problem, or you use array, or you give the date as string... there are several ways.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2008-02-07T03:19:25.000+0000",
                    "updated": "2008-02-07T03:19:25.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/18909",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akkie",
                        "name": "akkie",
                        "displayName": "Christian Kaps",
                        "active": true
                    },
                    "body": "Ok. This is blausible.\n\nThanks a lot!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=akkie",
                        "name": "akkie",
                        "displayName": "Christian Kaps",
                        "active": true
                    },
                    "created": "2008-02-07T03:29:03.000+0000",
                    "updated": "2008-02-07T03:29:03.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2587\/transitions"
}