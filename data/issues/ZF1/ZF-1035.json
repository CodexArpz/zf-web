{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1035",
    "key": "ZF-1035",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Role inheritance not propagating correctly"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1035\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10022",
                    "id": 10022,
                    "description": "Beta Release; all components feature complete for 1.0",
                    "name": "0.9.0",
                    "userReleaseDate": "17\/Mar\/07",
                    "archived": true,
                    "releaseDate": "2007-03-17",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2007-03-12T08:26:08.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=peptolab",
                "name": "peptolab",
                "displayName": "Simon Mundy",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2007-03-11T22:36:54.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2007-07-05T14:43:55.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "In some circumstances role permissions are not returning expected results. This seems to occur when a child has a specific permission rule for a resource that may conflict with its parent, and a 'null' permission is being tested against.\n\nExample ACL:-\n{code}\n        require_once 'Zend\/Acl.php';\n        require_once 'Zend\/Acl\/Role.php';\n        require_once 'Zend\/Acl\/Resource.php';\n        $acl = new Zend_Acl();\n\n        \/\/ The new marketing group inherits permissions from staff\n        $acl->addRole(new Zend_Acl_Role('guest'));\n        $acl->addRole(new Zend_Acl_Role('staff'));\n        $acl->addRole(new Zend_Acl_Role('channel'), 'staff');\n        $acl->addRole(new Zend_Acl_Role('admin'), 'channel');\n        \n        $acl->add(new Zend_Acl_Resource('network'));\n        \n        $acl->allow('guest');\n        $acl->deny('staff', 'network');\n        $acl->allow('channel', 'network');\n        $acl->deny('channel', 'network', array('upload'));\n        $acl->allow('admin', 'network', array('upload'));\n        \n        if ($acl->isAllowed('channel', 'network')) {\n            echo 'Yes';\n        } else {\n            echo 'No';\n        }\n{code}\n\n_Expected result:_\nIf an admin tries to access a 'network' resource without any permissions (i.e. 'null' permissions), they should be allowed, as their parent (channel) has been allowed access to the resource _except_ for 'upload' permissions.\n\n_Actual result:_\nThe rule is disallowed for both 'admin' and 'channel' if no permission is provided to the isAllowed method. See below:-\n{code}\n$acl->isAllowed('channel', 'network') \/\/ Returns false, incorrect result\n$acl->isAllowed('channel', 'network', 'index') \/\/ Returns true, correct result\n$acl->isAllowed('channel', 'network', 'upload') \/\/ Returns false, correct result\n$acl->isAllowed('admin', 'network', 'upload') \/\/ Returns true, correct result\n{code}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/2",
                "name": "Critical"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1035\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=darby",
                "name": "darby",
                "displayName": "Darby Felton",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10021",
                    "id": 10021,
                    "description": "Preview release; DB, Filter, Log",
                    "name": "0.8.0",
                    "userReleaseDate": "21\/Feb\/07",
                    "archived": true,
                    "releaseDate": "2007-02-21",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10070",
                    "id": 10070,
                    "name": "Zend_Acl",
                    "description": "Access control list authorization component",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/13257",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=darby",
                        "name": "darby",
                        "displayName": "Darby Felton",
                        "active": true
                    },
                    "body": "This issue seems to be the result of misunderstanding. From the {{isAllowed()}} docblock:\n\n{code}\n* If a $privilege is not provided, then this method returns false if and only if the\n* Role is denied access to at least one privilege upon the Resource. In other words, this\n* method returns true if and only if the Role is allowed all privileges on the Resource.\n{code}\n\nSince {{'channel'}} has been denied access to at least one privilege ({{'upload'}} upon the Resource {{'network'}}, then {{isAllowed()}} returns {{false}}, which is expected behavior. A {{null}} value for {{$privilege}} basically indicates that you are asking whether the Role has access to \/all\/ privileges upon the Resource. In this case, the Role is denied at least one privilege. Therefore, the Role does not have access to all privileges upon the resource.\n\nMaybe it stands to reason to clarify this point in the manual documentation as well, since it seems to be a point of confusion?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=darby",
                        "name": "darby",
                        "displayName": "Darby Felton",
                        "active": true
                    },
                    "created": "2007-03-12T08:26:08.000+0000",
                    "updated": "2007-03-12T08:26:08.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-1035\/transitions"
}