{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6937",
    "key": "ZF-6937",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Filters for multiple files"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6937\/votes",
                "votes": 6,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=raistlin",
                "name": "raistlin",
                "displayName": "Adam Kusmierz",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-06-05T16:03:08.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-02-22T13:12:31.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "files",
                "filter",
                "multiple",
                "upload"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I want to upload multiple files (for example 2 fields, named formFile1 and formFile2 and sent by HTML Form's Input). Every file should have different name, for example targetFileName1.ext (for formFile1) and targetFileName2.ext (for formFile2). So I wrote in controller:\n{code:title=TestController.php}\n$upload = new Zend_File_Transfer_Adapter_Http();\n$upload\n\t->addFilter('Rename', array(\n\t\t'target' => $path . 'targetFileName1.ext'\n\t\t), 'formFile1')\n\t->addFilter('Rename', array(\n\t\ttarget' => $path . 'targetFileName2.ext'\n\t\t), 'formFile2')\n\nif (!$upload->receive())  {\n\t$messages = $upload->getMessages();\n\techo $messages;\n}\n{code}\nand html:\n{code:html}\n<input type=\"file\" name=\"formFile1\" \/>\n<input type=\"file\" name=\"formFile2\" \/>\n{code}\n\nBut after submit this I've got php error: \"Zend_Filter_Exception: File '\\tmp\\php9914.tmp' could not be renamed. It already exists. in \\var\\www\\test\\library\\Zend\\Filter\\File\\Rename.php on line 160\". Why? Because of it:\n\n{code:title=Zend\/File\/Transfer\/Adapter\/Abstract.php}\n725:        $this->_filters[$class] = $filter;\n726:        $files                  = $this->_getFiles($files, true, true);\n727:        foreach ($files as $file) {\n728:            $this->_files[$file]['filters'][] = $class;\n729:        }\n{code}\n\nIt \"caches\" in some way used filters, so I can't use different filter (precisely same filter with different options) for different files. Why?"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6937\/watchers",
                "isWatching": false,
                "watchCount": 7
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-5126",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5126",
                    "type": {
                        "name": "Duplicate",
                        "direction": "OUTBOUND",
                        "description": "duplicates"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10330",
                    "id": 10330,
                    "description": "Mini Release",
                    "name": "1.8.2",
                    "userReleaseDate": "27\/May\/09",
                    "archived": false,
                    "releaseDate": "2009-05-27",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10320",
                    "id": 10320,
                    "name": "Zend_File_Transfer",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31634",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Duplicates ZF-5126",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-06-05T16:41:32.000+0000",
                    "updated": "2009-06-05T16:41:32.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31636",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "Changed from Bug to Improvement.\nManual clearly states that this is not possible.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2009-06-06T01:10:21.000+0000",
                    "updated": "2009-06-06T01:10:21.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33427",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=huyby",
                        "name": "huyby",
                        "displayName": "Stijn Huyberechts",
                        "active": true
                    },
                    "body": "I'm experiencing the same problem. Trying to rename multiple files using the Rename filter. But as described by Adam, it's not possible to actually add a new filter of the same type more than once. Filters of the same type keep overwriting each other. \n\nI do see the use case where the current behaviour of Zend_File_Transfer_Adapter_Abstract::addFilter() is needed. But it should also cover the use case where you want a unique filter, based on the options parameter, for one or more files.\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=huyby",
                        "name": "huyby",
                        "displayName": "Stijn Huyberechts",
                        "active": true
                    },
                    "created": "2009-08-13T02:01:13.000+0000",
                    "updated": "2009-08-13T02:01:13.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38477",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=timruffles",
                        "name": "timruffles",
                        "displayName": "Tim Ruffles",
                        "active": true
                    },
                    "body": "Far from \"Manual clearly states that this is not possible\"...the manual currently uses the expected, behaviour of multiple filters specified by file as an example:\r\n\r\n$upload->addFilter('Rename', 'C:\\picture\\newjpg', 'file1')\r\n       ->addFilter('Rename', 'C:\\picture\\newgif', 'file2');\r\n\r\nwhich, of course, doesn't work.\r\n\r\nIt comes with the note: 'Note: Note that even though setting the same filter multiple times is allowed, doing so can lead to issues when using different options for the same filter'\r\n\r\nThe manual really should be updated or this should be fixed. Really doesn't make you warm to the framework...",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=timruffles",
                        "name": "timruffles",
                        "displayName": "Tim Ruffles",
                        "active": true
                    },
                    "created": "2010-02-16T02:58:25.000+0000",
                    "updated": "2010-02-16T02:58:25.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/49669",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=avincent",
                        "name": "avincent",
                        "displayName": "Ashleigh Vincent",
                        "active": true
                    },
                    "body": "I second that this is a bug, not an improvement.\r\n\r\nThe ZF documentation linked below shows this should be possible:\r\n\r\nhttp:\/\/framework.zend.com\/manual\/en\/zend.file.transfer.filters.html#zend.file.transfer.filters.rename\r\n\r\nThat is exactly what I want to do, but of course this bug means the final parameter is ignored it seems. \r\n\r\nEven if this was decided that filters should not be called on two separate files in this manner then why does the addFilter not throw some sort of error? Instead it just applies the last rename filter you set to all files in the current transfer, even though you specified the filter should only apply to a particular file.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=avincent",
                        "name": "avincent",
                        "displayName": "Ashleigh Vincent",
                        "active": true
                    },
                    "created": "2012-02-22T13:12:31.000+0000",
                    "updated": "2012-02-22T13:12:31.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6937\/transitions"
}