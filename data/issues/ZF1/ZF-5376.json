{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5376",
    "key": "ZF-5376",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Allow Zend_Paginator to Accept An Infinite Item Count Per Page"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5376\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10420",
                    "id": 10420,
                    "description": "Minor Release",
                    "name": "1.11.0",
                    "userReleaseDate": "02\/Nov\/10",
                    "archived": false,
                    "releaseDate": "2010-11-02",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2010-05-25T18:47:44.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bradley.holt",
                "name": "bradley.holt",
                "displayName": "Bradley Holt",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-12-29T14:40:11.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-05-25T18:47:45.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "It would be nice if Zend_Paginator supported an infinite item count per page by passing in a zero (0) as the argument to the setItemCountPerPage method. This would be useful when one wants allow the user to select the item count per page, e.g. \"show 25, 50, 100, All items per page\". Currently passing a negative one (-1) provides this functionality but is not an intended feature according to this email exchange with Matthew Ratzloff:\n  \n  On Mon, Dec 29, 2008 at 5:18 PM, Matthew Ratzloff <matt@builtfromsource.com> wrote:\n  > Hi Bradley,\n  > Sorry about the confusion, I misread your requirement.  The -1 trick is in\n  > fact not an intended feature (if it were, it would be 0, to be in line with\n  > typical PHP API), but if it works, use it for now.  Whatever fix will just\n  > test for < 1, so your code should be forward-compatible.\n  > I highly encourage you to file an enhancement ticket so that this can be\n  > implemented properly.  If you do, please copy and paste this e-mail exchange\n  > as a comment into the ticket.\n  > Thanks,\n  > -Matt\n  >\n  > On Mon, Dec 29, 2008 at 11:56 AM, Bradley Holt <bradley.holt@foundline.com>\n  > wrote:\n  >>\n  >> Matt,\n  >>\n  >> Taking a closer look at the documentation, the \"All\" scrolling style\n  >> \"returns every page.\" I'm not trying to show every page in the\n  >> paginator control, I'm trying to have an infinite item count *per\n  >> page* (which, of course, will make it so I have only one page of\n  >> items). Like I said, passing a negative one (-1) to the\n  >> setItemCountPerPage method does the job - I just don't know if this is\n  >> an intended feature or something that just happens to work now but may\n  >> not be supported in the future.\n  >>\n  >> Thanks,\n  >> Bradley\n  >>\n  >> On Mon, Dec 29, 2008 at 1:00 PM, Matthew Ratzloff\n  >> <matt@builtfromsource.com> wrote:\n  >> >\n  >> > Hi Bradley,\n  >> > Use the scrolling style \"All\" instead.\n  >> > Please see http:\/\/framework.zend.com\/manual\/en\/zend.paginator.usage.html\n  >> > for more information.\n  >> > -Matt\n  >> >\n  >> > On Sun, Dec 28, 2008 at 6:40 PM, Bradley Holt\n  >> > <bradley.holt@foundline.com> wrote:\n  >> >>\n  >> >> I was looking for a way to have Zend_Paginator show all of the items.\n  >> >> For example, I have a selector that allows a user to show 25, 50, 100,\n  >> >> or all records. I couldn't find any documentation but by experimenting\n  >> >> I found that I could pass a negative one (-1) to setItemCountPerPage\n  >> >> and it would show all items (actually, I think any negative number\n  >> >> will show all items). Since I couldn't find any documentation on this\n  >> >> I'm wondering if this is a supported feature of Zend_Paginator that\n  >> >> just happens to work now but might break in the future.\n  >> >>\n  >> >> Thanks,\n  >> >> Bradley\n  >> >>\n  >> >> --\n  >> >> Bradley Holt\n  >> >> bradley.holt@foundline.com\n  >> >\n  >>\n  >>\n  >>\n  >> --\n  >> Bradley Holt\n  >> bradley.holt@foundline.com\n  >\n  >\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5376\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bradley.holt",
                "name": "bradley.holt",
                "displayName": "Bradley Holt",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/13107",
                    "filename": "ZF-5376.patch",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bradley.holt",
                        "name": "bradley.holt",
                        "displayName": "Bradley Holt",
                        "active": true
                    },
                    "created": "2010-05-25T11:23:37.000+0000",
                    "size": 1367,
                    "mimeType": "text\/plain",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/13107\/ZF-5376.patch"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10271",
                    "id": 10271,
                    "description": "Mini Release",
                    "name": "1.7.2",
                    "userReleaseDate": "23\/Dec\/08",
                    "archived": false,
                    "releaseDate": "2008-12-23",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10315",
                    "id": 10315,
                    "name": "Zend_Paginator",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33409",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mratzloff",
                        "name": "mratzloff",
                        "displayName": "Matthew Ratzloff",
                        "active": true
                    },
                    "body": "This allows a user to use paginator objects throughout an application.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mratzloff",
                        "name": "mratzloff",
                        "displayName": "Matthew Ratzloff",
                        "active": true
                    },
                    "created": "2009-08-12T10:17:44.000+0000",
                    "updated": "2009-08-12T10:17:44.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36023",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=pavarnos",
                        "name": "pavarnos",
                        "displayName": "Steve Pavarno",
                        "active": true
                    },
                    "body": "+1\r\n\r\nLooks like a simple patch?\r\n\r\nPaginator.php line 607\r\n{code}\r\n    public function setCurrentPageNumber($pageNumber)\r\n    {\r\n        $this->_currentPageNumber = (integer) $pageNumber;\r\n        $this->_currentItems      = null;\r\n        $this->_currentItemCount  = null;\r\n\r\n        return $this;\r\n    }\r\n{code}\r\nbecomes\r\n{code}\r\n    public function setCurrentPageNumber($pageNumber)\r\n    {\r\n        $this->_currentPageNumber = (integer) $pageNumber;\r\n        $this->_currentItems      = null;\r\n        $this->_currentItemCount  = null;\r\n        if ($pageNumber <= 0) $this->setItemCountPerPage( $this->getTotalItemCount() );\r\n\r\n        return $this;\r\n    }\r\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=pavarnos",
                        "name": "pavarnos",
                        "displayName": "Steve Pavarno",
                        "active": true
                    },
                    "created": "2009-11-15T15:33:10.000+0000",
                    "updated": "2009-11-15T15:33:10.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40680",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bradley.holt",
                        "name": "bradley.holt",
                        "displayName": "Bradley Holt",
                        "active": true
                    },
                    "body": "I've attached a patch to allow for a negative one to be passed to Zend_Paginator::setItemCountPerPage() which will explicitly allow for an infinite (technically the total item count, but effectively infinite) number of items per page. The patch also includes a new assertion in the unit tests for this component. With some adapters, this may technically be a BC break (but I'm not sure) since all values below one were treated the same before, but now zero will be treated as before, but values below zero will get an item count per page equal to the total item count. If this patch looks good, I will go ahead and commit it.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bradley.holt",
                        "name": "bradley.holt",
                        "displayName": "Bradley Holt",
                        "active": true
                    },
                    "created": "2010-05-25T11:23:43.000+0000",
                    "updated": "2010-05-25T11:23:43.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40682",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mratzloff",
                        "name": "mratzloff",
                        "displayName": "Matthew Ratzloff",
                        "active": true
                    },
                    "body": "PHP is inconsistent in its API, so this method should accept -1, 0, or null as triggers for this behavior.\r\n\r\n0:\r\nhttp:\/\/php.net\/manual\/en\/function.set-time-limit.php (seconds)\r\nhttp:\/\/php.net\/manual\/en\/function.ldap-read.php (sizeLimit)\r\nhttp:\/\/php.net\/manual\/en\/function.ldap-search.php (sizeLimit)\r\n\r\n-1:\r\nhttp:\/\/www.php.net\/manual\/en\/ini.list.php\r\n\r\n-1, 0, null:\r\nhttp:\/\/php.net\/manual\/en\/function.preg-split.php (limit)\r\nhttp:\/\/php.net\/manual\/en\/function.preg-replace.php (limit)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mratzloff",
                        "name": "mratzloff",
                        "displayName": "Matthew Ratzloff",
                        "active": true
                    },
                    "created": "2010-05-25T12:44:42.000+0000",
                    "updated": "2010-05-25T12:44:42.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40683",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bradley.holt",
                        "name": "bradley.holt",
                        "displayName": "Bradley Holt",
                        "active": true
                    },
                    "body": "Values less than one was what the original issue description said the value should be to trigger an infinite item count per page would. However, this caused an existing unit test to break so I didn't feel it was an appropriate change. That's why I went with negative one (well, anything less than zero) instead.\r\n\r\nThis is the existing assertion that fails if we change the behavior to accept zero as the infinite item count per page:\r\n\r\n{code}\r\n$this->_paginator->setItemCountPerPage(0);\r\n$this->assertEquals(10, $this->_paginator->getItemCountPerPage());\r\n{code}\r\n\r\nI didn't feel it was my place to change an existing assertion as I don't know the history behind that expected behavior. If you are confident that assertion can safely be modified, then I can change the behavior to accept -1, 0, or null as triggers for this behavior. The assertion would have to modified as follows for the tests to pass with this new behavior:\r\n\r\n{code}\r\n$this->_paginator->setItemCountPerPage(0);\r\n$this->assertEquals(101, $this->_paginator->getItemCountPerPage());\r\n{code}\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=bradley.holt",
                        "name": "bradley.holt",
                        "displayName": "Bradley Holt",
                        "active": true
                    },
                    "created": "2010-05-25T13:05:59.000+0000",
                    "updated": "2010-05-25T13:05:59.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40689",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mratzloff",
                        "name": "mratzloff",
                        "displayName": "Matthew Ratzloff",
                        "active": true
                    },
                    "body": "That test doesn't make any logical sense to me, anyway; I think it's safe to change.  Passing 0 as an argument has never been a documented use of the API, so I have no BC concerns about this change.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mratzloff",
                        "name": "mratzloff",
                        "displayName": "Matthew Ratzloff",
                        "active": true
                    },
                    "created": "2010-05-25T17:18:52.000+0000",
                    "updated": "2010-05-25T17:18:52.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40690",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mratzloff",
                        "name": "mratzloff",
                        "displayName": "Matthew Ratzloff",
                        "active": true
                    },
                    "body": "Thanks for taking this on, Bradley!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mratzloff",
                        "name": "mratzloff",
                        "displayName": "Matthew Ratzloff",
                        "active": true
                    },
                    "created": "2010-05-25T17:19:39.000+0000",
                    "updated": "2010-05-25T17:19:39.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5376\/transitions"
}