{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2526",
    "key": "ZF-2526",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Form_Element::getAttribs() returns an empty array"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/11",
                "name": "Patch",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2526\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2008-01-30T15:31:16.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mim",
                "name": "mim",
                "displayName": "Mark Maynereid",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-01-30T07:12:16.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2008-01-30T15:31:16.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I can't get Zend_Form's elements to render \"title\" attributes and it appears to be because Zend_Form_Element's getAttribs() method does not return attributes that have been previously set (while getAttrib() works fine). Here's how I reproduce the problem:\n\n{code}\n$options = array(\n    'title' => 'my summary',\n    'name' => 'username',\n    'label' => 'Username',\n);\n$username = new Zend_Form_Element_Text($options);\nvar_dump($username->getAttribs());\n\nProduces:\narray(0) {\n}\n{code}\n\nI suspect this is a new PHP bug (I use PHP 5.2.0-8+etch9), whereby declaring $this->$someprop does not give it any visibility and so this is why the reflection isPublic() test in getAttribs() fails incorrectly.\n\nI've written the following patch which seems to correct the problem:\n{code}\nIndex: incubator\/library\/Zend\/Form\/Element.php\n===================================================================\n--- incubator\/library\/Zend\/Form\/Element.php     (revision 7696)\n+++ incubator\/library\/Zend\/Form\/Element.php     (working copy)\n@@ -493,8 +493,11 @@\n         $properties = $r->getProperties();\n         $attribs = array();\n         foreach ($properties as $property) {\n-            if ($property->isPublic()) {\n-                $attribs[$property->getName()] = $property->getValue($this);\n+            if (! $property->isPrivate() &&\n+                ! $property->isProtected() &&\n+                ! $property->isStatic()\n+            ) {\n+                $attribs[$property->getName()] = $this->getAttrib($property->getName());\n             }\n         }\n{code}\n\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/customFieldOption\/10037",
                "value": "   Must Have"
            }
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2526\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-2518",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2518",
                    "type": {
                        "name": "Duplicate",
                        "direction": "OUTBOUND",
                        "description": "duplicates"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10029",
                    "id": 10029,
                    "name": "Zend_Form",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/18696",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mim",
                        "name": "mim",
                        "displayName": "Mark Maynereid",
                        "active": true
                    },
                    "body": "The code below takes Zend Framework out of the loop, and tests the problem directly.\n\nPlease try the code. Does anyone have the same output as me with myRuntimeProperty missing in the var_dump? If you do, I think Zend_Form_Element::getAttribs() will not work with your PHP version, and maybe I should raise it on bugs.php.net. Any comments appreciated.\n\n\n{code}\n<?php\n\nclass Test\n{\n    public $myDeclaredProperty = 1;\n\n    public function __construct()\n    {\n        $this->myRuntimeProperty = 2;\n    }\n\n    public function getPublicProperties()\n    {\n        $r = new ReflectionObject($this);\n        $properties = $r->getProperties();\n        $publicProperties = array();\n        foreach ($properties as $property) {\n            if ($property->isPublic()) {\n                $publicProperties[$property->getName()] = \n$property->getValue($this);\n            }\n        }\n        return $publicProperties;\n    }\n}\necho 'Running ' . phpversion() . \"\\n\";\n$obj = new Test();\necho \"Dumping object:\\n\";\nvar_dump($obj);\necho \"Dumping public properties according to Reflection object\\n\";\nvar_dump($obj->getPublicProperties());\n{code}\n\nMy output. Note myRuntimeProperty is missing in the second var_dump:\n\n{code}\nRunning 5.2.0-8+etch9\nDumping object:\nobject(Test)#1 (2) {\n  [\"myDeclaredProperty\"]=>\n  int(1)\n  [\"myRuntimeProperty\"]=>\n  int(2)\n}\nDumping public properties according to Reflection object\narray(1) {\n  [\"myDeclaredProperty\"]=>\n  int(1)\n}\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=mim",
                        "name": "mim",
                        "displayName": "Mark Maynereid",
                        "active": true
                    },
                    "created": "2008-01-30T09:22:06.000+0000",
                    "updated": "2008-01-30T09:22:06.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/18712",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Duplicates ZF-2518, already reported.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-01-30T15:30:31.000+0000",
                    "updated": "2008-01-30T15:30:31.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/18713",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Resolved in r7708, using the same logic used in Zend_View_Abstract::getVars() (known to work in PHP >= 5.1.4)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-01-30T15:31:16.000+0000",
                    "updated": "2008-01-30T15:31:16.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2526\/transitions"
}