{
    "expand": "html",
    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-55",
    "key": "ZF-55",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Controller only works at \"root-level\": Zend_Controller_Front::setdispatcherBaseUri(); missing? (TRAC#79)"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-55\/votes",
                "votes": 1,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/version\/10001",
                    "id": 10001,
                    "description": "Preview Release",
                    "name": "0.1.5",
                    "userReleaseDate": "11\/Jul\/06",
                    "archived": true,
                    "releaseDate": "2006-07-11",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2006-07-09T03:47:32.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=zend_framework",
                "name": "zend_framework",
                "displayName": "Zend Framework",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2006-06-20T01:11:13.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2007-07-05T14:44:27.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "http:\/\/framework.zend.com\/developer\/ticket\/79\n\nFILES AVAILABLE\n\nhi guys,\n\ntried out the controller and could not get it to work in a subdirectory on my webroot. (e.g. \"\/testing\/\") Zend_Controller thinks \"testing\" is my controller. i fixed it locally by adding:\n{code}\n2 Methodes: ============================================================================================================================ Zend_Controller_Front::setdispatcherBaseUri() & Zend_Controller_Dispatcher::setdispatcherBaseUri() \/* just sets the given base-uri *\/ ============================================================================================================================\n\nand adding 4 lines to: ============================================================================================================================ Zend_Controller_Router::route() \/* takes the given (if any) base-uri and cuts the base-uri *\/ \/* off the path, so controller & action work well *\/\n\n(..) if ($dispatcher->getDispatcherBaseUri()) {\n\n    $expr = \"\/\" . preg_replace(\"\/\\\/\/\", \"\\\\\\\/\", $dispatcher->getDispatcherBaseUri() ) . \"(.*)\/\"; $path = preg_replace($expr, \"$1\", $path); } (..)\n\n============================================================================================================================\n{code}\nthis is just a quick&dirty solution, but the feature of setting a base-uri for the controller\/dispatcher is essential i think!\n\ngreets,\n\nfalk pauser\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-55\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/status\/6",
                "name": "Closed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=martel",
                "name": "martel",
                "displayName": "Michal Minicki",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/attachment\/10030",
                    "filename": "my_demos.tar.gz",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=mim",
                        "name": "mim",
                        "displayName": "Mark Maynereid",
                        "active": true
                    },
                    "created": "2006-07-05T09:20:09.000+0000",
                    "size": 5930,
                    "mimeType": "application\/gzip",
                    "content": "http:\/\/framework.zend.com\/issues\/secure\/attachment\/10030\/my_demos.tar.gz"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/version\/10010",
                    "id": 10010,
                    "description": "Preview Release",
                    "name": "0.1.3",
                    "userReleaseDate": "18\/Apr\/06",
                    "archived": true,
                    "releaseDate": "2006-04-18",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/component\/10011",
                    "id": 10011,
                    "name": "Zend_Controller",
                    "description": "front controller, including router and dispatcher",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10078",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=zend_framework",
                        "name": "zend_framework",
                        "displayName": "Zend Framework",
                        "active": true
                    },
                    "body": "\n05\/28\/06 03:14:18: Modified by bruno.couleau@the-phocea-experiment.net\n\nHello,\n\nI was a bit worried about this point two. After trying to fix this my self by writing my own Zend_Controller_Router class, I found an article by Rob Allen at http:\/\/www.akrabat.com\/2006\/03\/04\/zend-framework-front-controller\/ which include the source code to address this issue.\n\nThe changes over ZF code are minor, and it would be nice if the team could integrate them in the future.\n\nThanks you guys for all your efforts.\n\nBruno\n06\/12\/06 06:40:23: Modified by Link\nstretch boots skechers shoes motorcycle boots sale buy phentermine keen shoes replica watches vintage luggage free shipping ugg boots stretch boots personalized luggage tag phentermine on line magnum boots pink motorcycle boots luggage locks work shoes citizens watches dansko shoes wholesale coach brand shoes and handbags cartier watches christian dior sunglasses\n06\/17\/06 08:00:57: Modified by tolmi@lazycat.hu\n\n    * attachment Router.php.patch.htm added.\n\nThe patch solving the issue. I have tested it on 2 different webservers.\n06\/17\/06 08:05:09: Modified by tolmi@lazycat.hu\n\nI just now posted a patch against library\/Controller\/Router.php. It fixes the \"root-level\" requirement. Please apply this patch to the HEAD. Thanks for the great work, ZF devs!\n\n-- Mark Tolmacs\n",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=zend_framework",
                        "name": "zend_framework",
                        "displayName": "Zend Framework",
                        "active": true
                    },
                    "created": "2006-06-20T01:11:23.000+0000",
                    "updated": "2006-06-20T01:11:23.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10154",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=martel",
                        "name": "martel",
                        "displayName": "Michal Minicki",
                        "active": true
                    },
                    "body": "With a RewriteRouter located in the incubator you should be able to use the module from within a subdirectory. Please, give it a try.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=martel",
                        "name": "martel",
                        "displayName": "Michal Minicki",
                        "active": true
                    },
                    "created": "2006-06-23T06:55:58.000+0000",
                    "updated": "2006-06-23T06:55:58.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10296",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=mim",
                        "name": "mim",
                        "displayName": "Mark Maynereid",
                        "active": true
                    },
                    "body": "Zend Framework demos in subdirs!\n--------------------------------\n\nThis directory contains Web based, portable, Zend Framework demos I found on the Net and made work in any subdir below docroot!\n\nIMPORTANT - Modify .htaccess in this directory\n\nTo make the demos work in subdirs below docroot, I first put my own quick'n'dirty fix in, but have since replaced this after discovering the RewriteRouter in the incubator of ZendFramework-0.1.4 which addresses this very issue!\n\nThe only pain I found in modifying the demos was, every internal link in a demo needs prepending with the baseUrl value and causes a bit of code clutter to bring the value in where needed.\n\nIn the index.php file I took the following approach:\n\n\/\/ Register the controller because it is the only way I know to get at the RewriteRouter's GetRewriteBase() method from within my controllers\nZend::register('controller', $controller);\n\n\/\/ Use the new RewriteRouter from the incubator (ZendFramework-0.1.4) which allows us to run demos in subdirs below the webserver's docroot.\nrequire_once 'Zend\/Controller\/RewriteRouter.php';\n$router = new Zend_Controller_RewriteRouter();\n$controller->setRouter($router);\n\n$controller->dispatch();\n\n\nI then access the baseUrl value in my controllers with (or similar):\n$baseUrl = Zend::registry('controller')->getRouter()->getRewriteBase();\n\nIs there a better way?\n\nMark Maynereid\n5th July 2006\n\nP.S.\n\nThis subdir below docroot feature is common amongst other frameworks. I've looked at plenty, and my interest in ZF nearly timed out when I found this wasn't supported already.\n\nSurely, for a framework to gain and sustain popularity, you need to showcase what it can do with a whole bunch of 'real-world' ready-to-run demos? I know it's early days for ZF but still! I guess also, there should be some QA on them, before you know it ZF morphs into a CMS, errr... perhaps I shouldn't have said that.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=mim",
                        "name": "mim",
                        "displayName": "Mark Maynereid",
                        "active": true
                    },
                    "created": "2006-07-05T09:20:09.000+0000",
                    "updated": "2006-07-05T09:20:09.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10297",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=mim",
                        "name": "mim",
                        "displayName": "Mark Maynereid",
                        "active": true
                    },
                    "body": "Hi,\n\nI've had a go at using the RewriteRouter. Don't know if I have done right but basically did as follows:\n\nindex.php:\n\n\/\/ Register the controller because it is the only way I know to get at the RewriteRouter's GetRewriteBase() method from within my controllers\nZend::register('controller', $controller);\n\n\/\/ Use the new RewriteRouter from the incubator (ZendFramework-0.1.4) which allows us to run demos in subdirs below the webserver's docroot.\nrequire_once 'Zend\/Controller\/RewriteRouter.php';\n$router = new Zend_Controller_RewriteRouter();\n$controller->setRouter($router);\n$controller->dispatch();\n\n\nI then access the baseUrl value in my controllers with (or similar):\n$baseUrl = Zend::registry('controller')->getRouter()->getRewriteBase();\n\nIs there a better way?\n\nI have made a my_demos directory of subdir-portable ZF demos that uses RewriteRouter (in ZendFramework-0.1.4 incubator) and attached it as a tar file to this Issue. Please download and inspect\/comment on it.\n\nThanks,\nMark Maynereid",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=mim",
                        "name": "mim",
                        "displayName": "Mark Maynereid",
                        "active": true
                    },
                    "created": "2006-07-05T09:28:36.000+0000",
                    "updated": "2006-07-05T09:28:36.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10371",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=jayson",
                        "name": "jayson",
                        "displayName": "Jayson Minard",
                        "active": true
                    },
                    "body": "For you to take a peek at and see if rewrite router solves it.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=jayson",
                        "name": "jayson",
                        "displayName": "Jayson Minard",
                        "active": true
                    },
                    "created": "2006-07-09T00:48:59.000+0000",
                    "updated": "2006-07-09T00:48:59.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10384",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=martel",
                        "name": "martel",
                        "displayName": "Michal Minicki",
                        "active": true
                    },
                    "body": "With the new RewriteRouter it's already possible to run the code from within webserver subdirectory. Subdirectory is automaticaly detected at object construction time so it should work out of the box. \n\nShould the rewriteBase be detected incorrectly, you can override it with your own string by the means of setRewriteBase method of the RewriteRouter object.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=martel",
                        "name": "martel",
                        "displayName": "Michal Minicki",
                        "active": true
                    },
                    "created": "2006-07-09T03:47:32.000+0000",
                    "updated": "2006-07-09T03:47:32.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10414",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=jayson",
                        "name": "jayson",
                        "displayName": "Jayson Minard",
                        "active": true
                    },
                    "body": "Fixed in 0.1.5 with the new RewriteRouter moving to core.  Old router will not allow this and will be replaced by the new router in a future release.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=jayson",
                        "name": "jayson",
                        "displayName": "Jayson Minard",
                        "active": true
                    },
                    "created": "2006-07-10T22:57:48.000+0000",
                    "updated": "2006-07-10T22:57:48.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10426",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=jayson",
                        "name": "jayson",
                        "displayName": "Jayson Minard",
                        "active": true
                    },
                    "body": "0.1.5 released",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=jayson",
                        "name": "jayson",
                        "displayName": "Jayson Minard",
                        "active": true
                    },
                    "created": "2006-07-11T11:54:37.000+0000",
                    "updated": "2006-07-11T11:54:37.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10462",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bado",
                        "name": "bado",
                        "displayName": "Mark Badolato",
                        "active": true
                    },
                    "body": "FYI I just installed 0.1.5, moved Zend.php and Zend\/ over to a test application (replacing the 0.1.4 versions) and this did not work out of the box.\n\nTrying to load in a subdirectory, brought me to IndexController::noRouteAction still.  Unless I'm missing a setting, the above states \"out of the box should work\".\n\nI'm using\n\n$controller = Zend_Controller_Front::getInstance();\n$controller->setControllerDirectory('.\/app\/controllers');\n$controller->dispatch();\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bado",
                        "name": "bado",
                        "displayName": "Mark Badolato",
                        "active": true
                    },
                    "created": "2006-07-11T18:11:29.000+0000",
                    "updated": "2006-07-11T18:11:29.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10463",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=martel",
                        "name": "martel",
                        "displayName": "Michal Minicki",
                        "active": true
                    },
                    "body": "You're not using a RewriteRouter, Mark. You're using the same router as before with that code.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=martel",
                        "name": "martel",
                        "displayName": "Michal Minicki",
                        "active": true
                    },
                    "created": "2006-07-12T02:07:17.000+0000",
                    "updated": "2006-07-12T02:07:17.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10486",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bado",
                        "name": "bado",
                        "displayName": "Mark Badolato",
                        "active": true
                    },
                    "body": "Michael,\n\nThanks for the nudge in the right direction.  \n\nIt took some serious grokage of the Zend_Controller_RewriteRouter document to figure out how to do multiple arguments in the URL.  For those who need the info, this is what I finally came up with:\n\nURL: http:\/\/example.com\/test\/view\/foo\/id\/12\/color\/blue\/name\/me\ntest = subdir\nview = controller\nfoo = action\nid = name of var1\n12 = value of var1\ncolor= name of var2\nblue = value of var2\nname = name of var3\nme = value of var3\n\nIn my case I wanted to create param variables $id, $name, $color ($color = $this->_getParam('color') etc...)\n\n$router = new Zend_Controller_RewriteRouter();\n$router->addRoute('view', 'view\/foo\/id\/:id\/color\/:color\/name\/:name', array('controller' => 'view', 'action' => 'foo'));\n\nSo, essentially defining the entire possible path, and the parameters to assign values to.  This then enables:\n\nURL: http:\/\/example.com\/test\/view\/ (controller = 'view', action = 'foo', $id is not set, $color  is not set, $name is not set)\nURL: http:\/\/example.com\/test\/view\/foo (controller = 'view', action = 'foo', $id is not set, $color  is not set, $name is not set)\nURL: http:\/\/example.com\/test\/view\/foo\/id\/12 (controller = 'view', action = 'foo', $id = 12, $color  is not set, $name is not set)\nURL: http:\/\/example.com\/test\/view\/foo\/id\/12\/color  (controller = 'view', action = 'foo', $id = 12, $color  is not set, $name is not set)\nURL: http:\/\/example.com\/test\/view\/foo\/id\/12\/color\/blue (controller = 'view', action = 'foo', $id = 12, $color = 'blue', $name is not set)\nURL: http:\/\/example.com\/test\/view\/foo\/id\/12\/color\/blue\/name (controller = 'view', action = 'foo', $id = 12, $color = 'blue', $name is not set)\nURL: http:\/\/example.com\/test\/view\/foo\/id\/12\/color\/blue\/name\/me (controller = 'view', action = 'foo', $id = 12, $color = 'blue', $name = 'me')\n\nLeaving out variables in the middle of the url will cause routing back to noRouteAction:\nURL: http:\/\/example.com\/test\/view\/foo\/color\/blue\/name\/me (controller = 'index', action = 'noRoute', $id is not set, $color  is not set, $name is not set)\n\nHopefully that's useful to others\n",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bado",
                        "name": "bado",
                        "displayName": "Mark Badolato",
                        "active": true
                    },
                    "created": "2006-07-12T19:04:13.000+0000",
                    "updated": "2006-07-12T19:04:13.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-55\/transitions"
}