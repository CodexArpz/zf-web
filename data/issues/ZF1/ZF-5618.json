{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5618",
    "key": "ZF-5618",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Plain Text Alternative gets broken if setType->Zend_Mime::MULTIPART_RELATED"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5618\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=melchior",
                "name": "melchior",
                "displayName": "Marco Frank",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-01-23T00:53:13.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-11-20T21:37:34.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "MULTIPART_RELATED",
                "broken",
                "embedded",
                "images",
                "mail",
                "mime",
                "plain",
                "plaintext"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I've noticed that after switching the type of a mail object to\r\n\r\n$mail->setType(Zend_Mime::MULTIPART_RELATED);\r\n\r\nthe received mail does not longer consists the plain text alternative.\r\n\r\nI've tested it with Apple Mail. After switching to MULTIPART_ALTERNATIVE or default,\r\nthe alternative plain text version works again like a charm.\r\n\r\nI think the problem relies to the order of MIME items in the raw mail.\r\n\r\nHere's the beginning of a MULTIPART_RELATED mail\r\n{quote}\r\nReturn-Path: <mail@xxxx.org>\r\nX-Original-To: support@xxxxx.de\r\nDelivered-To: xxxx.de_support@mail.omoo.de\r\nReceived: from localhost (localhost [127.0.0.1])\r\n\t(Authenticated sender: xxxx.org_mail)\r\n\tby mail.omoo.de (Postfix) with ESMTP id 0A5AE4008D\r\n\tfor <support@vitap.de>; Thu, 22 Jan 2009 08:27:29 +0100 (CET)\r\nFrom: xxxxx P <mail@xxxxx.org>\r\nSubject: xxxx: ONE WISH MELDUNG\r\nTo: xxx xx xxxx  <support@xxxx.de>\r\nDate: Thu, 22 Jan 2009 08:27:29 +0100\r\nContent-Type: multipart\/related; charset=\"utf-8\";\r\n boundary=\"=_9b6951eb0bf5eea2d972690bf5245625\"\r\nMIME-Version: 1.0\r\nMessage-Id: <20090122072729.0A5AE4008D@mail.xxxxx.de>\r\n\r\nThis is a message in Mime Format.  If you see this, your mail reader does not support this format.\r\n\r\n--=_9b6951eb0bf5eea2d972690bf5245625\r\nContent-Type: multipart\/alternative;\r\n boundary=\"=_5fec644199e2305f05c0961ba50539f9\"\r\nContent-Transfer-Encoding: 8bit\r\n\r\n\r\n--=_5fec644199e2305f05c0961ba50539f9\r\nContent-Type: text\/plain; charset=\"utf-8\"\r\nContent-Transfer-Encoding: 8bit\r\n\r\nxxxxx\r\n{quote}\r\n\r\nhow you can easily see the Content-Type: text\/plain still exists, but before stands Content-Type: multipart\/alternative which maybe brokes the text\/plain section?\r\n\r\nI'm no pro with MIME and co, but I'm thinking it's a bug. I stripped my code down and removed attachments and co so that I've got only text html and text plain only. Again, the plain version gets broken by using RELATED.\r\n\r\nif more informations are needed I'll post them "
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/2",
                "name": "Critical"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5618\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User"
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/11720",
                    "filename": "Picture 27.png",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=melchior",
                        "name": "melchior",
                        "displayName": "Marco Frank",
                        "active": true
                    },
                    "created": "2009-01-23T00:56:10.000+0000",
                    "size": 51549,
                    "mimeType": "image\/png",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/11720\/Picture+27.png",
                    "thumbnail": "http:\/\/fw02.zend.com\/issues\/secure\/thumbnail\/11720\/_thumb_11720.png"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10271",
                    "id": 10271,
                    "description": "Mini Release",
                    "name": "1.7.2",
                    "userReleaseDate": "23\/Dec\/08",
                    "archived": false,
                    "releaseDate": "2008-12-23",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10018",
                    "id": 10018,
                    "name": "Zend_Mail",
                    "description": "high-level utility to build MIME-compliant messages and send using a mail transport adapter",
                    "isAssigneeTypeValid": false
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10019",
                    "id": 10019,
                    "name": "Zend_Mime",
                    "description": "support class for handling multi-part MIME messages",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/28433",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=melchior",
                        "name": "melchior",
                        "displayName": "Marco Frank",
                        "active": true
                    },
                    "body": "screenshot from Apple Mail.\n\nAdding screenshot by ISSUE tracker (clipboard) didn't work",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=melchior",
                        "name": "melchior",
                        "displayName": "Marco Frank",
                        "active": true
                    },
                    "created": "2009-01-23T00:56:13.000+0000",
                    "updated": "2009-01-23T00:56:13.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30045",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=melchior",
                        "name": "melchior",
                        "displayName": "Marco Frank",
                        "active": true
                    },
                    "body": "hi nico,\n\nno reply yet?\n\ndid you read already this issue??\n\nthx and regards,\nMarco Frank\n(maintainer zfforum.de)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=melchior",
                        "name": "melchior",
                        "displayName": "Marco Frank",
                        "active": true
                    },
                    "created": "2009-04-09T02:42:25.000+0000",
                    "updated": "2009-04-09T02:42:25.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35102",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=satoruyoshida",
                        "name": "satoruyoshida",
                        "displayName": "Satoru Yoshida",
                        "active": true
                    },
                    "body": "I have no evidence yet, but this issue may be related to ZF-7874 .",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=satoruyoshida",
                        "name": "satoruyoshida",
                        "displayName": "Satoru Yoshida",
                        "active": true
                    },
                    "created": "2009-10-06T21:46:13.000+0000",
                    "updated": "2009-10-06T21:46:13.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35650",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=satoruyoshida",
                        "name": "satoruyoshida",
                        "displayName": "Satoru Yoshida",
                        "active": true
                    },
                    "body": "I found this issue is not related to ZF-7874. So, I removed link.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=satoruyoshida",
                        "name": "satoruyoshida",
                        "displayName": "Satoru Yoshida",
                        "active": true
                    },
                    "created": "2009-10-31T06:16:48.000+0000",
                    "updated": "2009-10-31T06:16:48.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/40905",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=satoruyoshida",
                        "name": "satoruyoshida",
                        "displayName": "Satoru Yoshida",
                        "active": true
                    },
                    "body": "Sorry, I have been inactive since last April.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=satoruyoshida",
                        "name": "satoruyoshida",
                        "displayName": "Satoru Yoshida",
                        "active": true
                    },
                    "created": "2010-06-09T00:21:10.000+0000",
                    "updated": "2010-06-09T00:21:10.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/43481",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "body": "Can you please provide the code to reproduce, the current output, and the expected output? Thanks.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "created": "2010-12-06T02:20:40.000+0000",
                    "updated": "2010-12-06T02:20:40.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5618\/transitions"
}