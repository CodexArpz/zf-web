{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3257",
    "key": "ZF-3257",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Attributes or character data lost in Zend_Json::fromXml() in specific circumstances"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3257\/votes",
                "votes": 4,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10680",
                    "id": 10680,
                    "description": "Mini Release",
                    "name": "1.11.7",
                    "userReleaseDate": "02\/Jun\/11",
                    "archived": false,
                    "releaseDate": "2011-06-02",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2011-05-17T09:06:23.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ciaranmcnulty",
                "name": "ciaranmcnulty",
                "displayName": "Ciaran McNulty",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-05-14T01:43:34.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-08-26T23:38:02.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "json",
                "xml"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "*Example 1 - loss of character data*\n\nWhen a node's children are a mixture of character data and xml nodes, the character data is lost\n\n$xml = '<a><b id=\"foo\" \/>bar<\/a>';\necho Zend_Json::fromXml($xml, false);\n\nOutput: {\"a\":{\"b\":{\"@attributes\":{\"id\":\"foo\"}}}} \n\n*Example 2 - loss of attribute data*\n\nWhen a node has a single character data child, any attributes are lost\n\n$xml = '<a><b id=\"foo\">bar<\/b><\/a>';\necho Zend_Json::fromXml($xml, false);\n\nOutput: {\"a\":{\"b\":\"bar\"}}\n\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3257\/watchers",
                "isWatching": false,
                "watchCount": 5
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zimuel",
                "name": "zimuel",
                "displayName": "Enrico Zimuel",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-5417",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5417",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                },
                {
                    "issueKey": "ZF-11385",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11385",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10174",
                    "id": 10174,
                    "description": "Mini Release",
                    "name": "1.5.1",
                    "userReleaseDate": "25\/Mar\/08",
                    "archived": true,
                    "releaseDate": "2008-03-25",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10016",
                    "id": 10016,
                    "name": "Zend_Json",
                    "description": "serializes native PHP to JSON and decodes JSON to native PHP",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/22232",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "Please evaluate and fix\/categorize as necessary.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2008-06-09T12:38:44.000+0000",
                    "updated": "2008-06-09T12:38:44.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/26555",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=edjoon",
                        "name": "edjoon",
                        "displayName": "Eric Johnson",
                        "active": true
                    },
                    "body": "What's the status on this? Seems like a pretty major problem.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=edjoon",
                        "name": "edjoon",
                        "displayName": "Eric Johnson",
                        "active": true
                    },
                    "created": "2008-11-21T08:53:18.000+0000",
                    "updated": "2008-11-21T08:53:18.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31939",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=stas",
                        "name": "stas",
                        "displayName": "Stanislav Malyshev",
                        "active": false
                    },
                    "body": "What output would you expect in this case?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=stas",
                        "name": "stas",
                        "displayName": "Stanislav Malyshev",
                        "active": false
                    },
                    "created": "2009-06-17T15:33:51.000+0000",
                    "updated": "2009-06-17T15:33:51.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35195",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=spcmky",
                        "name": "spcmky",
                        "displayName": "Chris Edwards",
                        "active": true
                    },
                    "body": "I dunno what the output should be, however I would suspect that the conversion should not loose any data. This is a pretty major issue and there needs to be a resolution.   ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=spcmky",
                        "name": "spcmky",
                        "displayName": "Chris Edwards",
                        "active": true
                    },
                    "created": "2009-10-13T17:18:56.000+0000",
                    "updated": "2009-10-13T17:18:56.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35209",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Stas: In Example 1, note that the value of the \"b\" element, \"bar\", is not in the JSON representation. In Example2, the attribute \"id\" found in element \"b\" is not represented in the JSON.\n\nI'm not entirely sure how you represent an XML element that has both attributes and values, but surely we need to be able to do so.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2009-10-14T05:10:20.000+0000",
                    "updated": "2009-10-14T05:10:20.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/35212",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=spcmky",
                        "name": "spcmky",
                        "displayName": "Chris Edwards",
                        "active": true
                    },
                    "body": "One example would be to create a special array index called \"name\" or\"value\" or etc. that would contain the element's info.  This way it can coexist with the attributes index.  This changes the data structure though but it's a special case and would need to be handled when converting back to xml.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=spcmky",
                        "name": "spcmky",
                        "displayName": "Chris Edwards",
                        "active": true
                    },
                    "created": "2009-10-14T09:15:44.000+0000",
                    "updated": "2009-10-14T09:15:44.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/46196",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zimuel",
                        "name": "zimuel",
                        "displayName": "Enrico Zimuel",
                        "active": true
                    },
                    "body": "My suggestion is to store the text value of a XML element using the key \"@text\" in the JSON format.\r\nThe idea is to use the same logic of the @attributes JSON element.\r\nFor instance, the following XML:\r\n<a><b id=\"foo\" \/>bar<\/a>\r\ncan be represented in this JSON structure:\r\n{\"a\":{\"b\":{\"@attributes\":{\"id\":\"foo\"}},\"@text\":\"bar\"}}\r\nThis should be the behaviour only in presence of \"complex\" XML elements (that means elements with attributes or sub-elements).\r\nFor instance the following simple XML:\r\n<a>foo<\/a>\r\nwill continue to be represented with the JSON string: {\"a\":\"foo\"}, instead of {\"a\":{\"@text\":\"foo\"}}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zimuel",
                        "name": "zimuel",
                        "displayName": "Enrico Zimuel",
                        "active": true
                    },
                    "created": "2011-04-29T07:34:44.000+0000",
                    "updated": "2011-04-30T20:54:38.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/46356",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zimuel",
                        "name": "zimuel",
                        "displayName": "Enrico Zimuel",
                        "active": true
                    },
                    "body": "Resolved in branches\/release-1.11 (commit 23971 and 23973)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zimuel",
                        "name": "zimuel",
                        "displayName": "Enrico Zimuel",
                        "active": true
                    },
                    "created": "2011-05-03T16:35:23.000+0000",
                    "updated": "2011-05-03T16:35:23.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/46600",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=billomat",
                        "name": "billomat",
                        "displayName": "Simon St\u00fccher",
                        "active": true
                    },
                    "body": "With your changes in rev23915 $recursionDepth from _processXml is not recursion depth but the number of root-child-elements!\r\nTherefore you are not able to process a xml with more than 25 elements!\r\nThe old one hat a additional $recursionDepth--; in line 331 which is missing in revision 23915",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=billomat",
                        "name": "billomat",
                        "displayName": "Simon St\u00fccher",
                        "active": true
                    },
                    "created": "2011-05-16T15:26:20.000+0000",
                    "updated": "2011-05-16T15:26:20.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/46601",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zimuel",
                        "name": "zimuel",
                        "displayName": "Enrico Zimuel",
                        "active": true
                    },
                    "body": "Simon thanks for the feedback. I used a $recursionDepth++ instead of $recursionDepth+1 in the recursive call (line 280).\r\nResolved in trunk (commit 24039). Please test it and let me know, thanks.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zimuel",
                        "name": "zimuel",
                        "displayName": "Enrico Zimuel",
                        "active": true
                    },
                    "created": "2011-05-16T16:42:18.000+0000",
                    "updated": "2011-05-16T16:42:59.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/46670",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=billomat",
                        "name": "billomat",
                        "displayName": "Simon St\u00fccher",
                        "active": true
                    },
                    "body": "Thanks for the very quick response and bugfix, Enrico! Now it works as expected.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=billomat",
                        "name": "billomat",
                        "displayName": "Simon St\u00fccher",
                        "active": true
                    },
                    "created": "2011-05-17T08:08:58.000+0000",
                    "updated": "2011-05-17T08:08:58.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/46671",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zimuel",
                        "name": "zimuel",
                        "displayName": "Enrico Zimuel",
                        "active": true
                    },
                    "body": "Resolved in branches\/release-1.11 (commit 24040)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=zimuel",
                        "name": "zimuel",
                        "displayName": "Enrico Zimuel",
                        "active": true
                    },
                    "created": "2011-05-17T09:05:40.000+0000",
                    "updated": "2011-05-17T09:05:40.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48227",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "body": "Issued ZF2 pull request [PR-356|https:\/\/github.com\/zendframework\/zf2\/pull\/356] to have changes pulled forward",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "created": "2011-08-26T23:38:02.000+0000",
                    "updated": "2011-08-26T23:38:02.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3257\/transitions"
}