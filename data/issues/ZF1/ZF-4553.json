{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4553",
    "key": "ZF-4553",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "DB2 Adapter with DB2\/400 support -- Several issues when using to connect to i5\/DB2 from Linux"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4553\/votes",
                "votes": 5,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=grutkowski",
                "name": "grutkowski",
                "displayName": "Gil Rutkowski",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-10-10T19:46:40.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-01-20T08:06:09.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "i5"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Just started testing the DB2 adapter with support for DB2\/400 from the Zend Core release of ZFW on my Linux machine and I'm running into issues with SQL statements being constructed incorrectly.  Haven't had a chance to see if these same problems exist when running from ZC on i5, but I'm assuming they will.\n\nAn example:\n{code}\nclass Personnel extends Zend_Db_Table_Abstract\n{\n\tprotected $_name = 'SCHEMA.TABLE';\n}\n\n\t$personnel = new Personnel();\n\t$personnel->fetchAll();\n{code}\n\nThis makes it through the tableDescribe just fine, but errors on the actual fetchAll with the error:\n{code}Zend_Db_Statement_Db2_Exception: [IBM][CLI Driver][AS] SQL5001N \"*N\" does not have the \nauthority to change the database manager configuration file. SQLSTATE=42703{code}\n\nThe sql DB2\/400 is choking on is:\n{code:sql}SELECT \"TABLE\".* FROM \"SCHEMA\".\"TABLE\"{code}\n\nThe following version of this select WILL work:\n{code:sql}SELECT \"SCHEMA\".\"TABLE\".* FROM \"SCHEMA\".\"TABLE\"\nSELECT \"TABLE\".* FROM \"SCHEMA\".\"TABLE\" as TABLE{code}\n\nIf needed, I may be able to make both i5 ZC and Linux -> DB\/400 environments available to aid in the tracking of this and any other DB\/400 issues. "
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/6",
                "name": "N\/A"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4553\/watchers",
                "isWatching": false,
                "watchCount": 5
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                "name": "ralph",
                "displayName": "Ralph Schindler",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-6039",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6039",
                    "type": {
                        "name": "Dependency",
                        "direction": "OUTBOUND",
                        "description": "depends on"
                    }
                },
                {
                    "issueKey": "ZF-5535",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5535",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10201",
                    "id": 10201,
                    "description": "Mini Release",
                    "name": "1.6.1",
                    "userReleaseDate": "15\/Sep\/08",
                    "archived": false,
                    "releaseDate": "2008-09-15",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10133",
                    "id": 10133,
                    "name": "Zend_Db_Table",
                    "description": "Lightweight OO interface to database tables and rowsets.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30837",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yoshida@zend.co.jp",
                        "name": "yoshida@zend.co.jp",
                        "displayName": "old of Satoru Yoshida",
                        "active": true
                    },
                    "body": "I think this issue has big impact on  setTable() method of Zend_Db_Table_Select class.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=yoshida@zend.co.jp",
                        "name": "yoshida@zend.co.jp",
                        "displayName": "old of Satoru Yoshida",
                        "active": true
                    },
                    "created": "2009-05-10T20:48:23.000+0000",
                    "updated": "2009-05-10T20:48:23.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32151",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "There are a couple of unknowns here:\na) is there something specific to the linux client that is not being discussed here?\nb) it seems to me that this code runs fine when run locally on i5\nc) what does the connection settings look like?\n\n-ralph",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2009-06-24T06:36:38.000+0000",
                    "updated": "2009-06-24T06:36:38.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32997",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sirshurf",
                        "name": "sirshurf",
                        "displayName": "Alex Frenkel",
                        "active": true
                    },
                    "body": "couple of addon's.\n\nThe same error I had using LOCAL on i5.\n\nThe only solution was to user an alias for a SCHEMA\/TABLE (last example).\n\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=sirshurf",
                        "name": "sirshurf",
                        "displayName": "Alex Frenkel",
                        "active": true
                    },
                    "created": "2009-07-28T06:20:23.000+0000",
                    "updated": "2009-07-28T06:20:23.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38205",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=christiand",
                        "name": "christiand",
                        "displayName": "Christian Dub\u00e9",
                        "active": true
                    },
                    "body": "as of ZF 1.10, using on local i5, this issue still exist.\r\n\r\n[code]\r\n<?php\r\nclass Model_DbTable_Test extends Zend_Db_Table_Abstract\r\n{\r\n\t\r\n    function getValues()\r\n    {\r\n\t\t$string = \"SELECT MYFILE.* from MYLIB.MYFILE\"; \t\r\n\t\t$result = $this->_db->fetchAll($string);\r\n\t\treturn $result;\r\n    }\r\n\t\r\n}\r\n[\/code]\r\n\r\nWill produce the following:\r\nMessage: Column qualifier or table MYFILE undefined. SQLCODE=-5001\r\n\r\nbut \r\n[code]\r\n<?php\r\nclass Model_DbTable_Test extends Zend_Db_Table_Abstract\r\n{\r\n\t\r\n    function getValues()\r\n    {\r\n\t\t$string = \"SELECT MYFILE.* from MYLIB.MYFILE as MYFILE\"; \t\r\n\t\t$result = $this->_db->fetchAll($string);\r\n\t\treturn $result;\r\n    }\r\n\t\r\n}\r\n[\/code]\r\n\r\nWill work!\r\n\r\nThis also make Zend_Auth_Db_Adapter fail ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=christiand",
                        "name": "christiand",
                        "displayName": "Christian Dub\u00e9",
                        "active": true
                    },
                    "created": "2010-02-02T03:50:42.000+0000",
                    "updated": "2010-02-02T03:50:42.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38206",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=richardnoya",
                        "name": "richardnoya",
                        "displayName": "Richard Noya",
                        "active": true
                    },
                    "body": "I Agree, I have a selfmade fix for months now. But it should be fixed in Zend Framework.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=richardnoya",
                        "name": "richardnoya",
                        "displayName": "Richard Noya",
                        "active": true
                    },
                    "created": "2010-02-02T04:44:47.000+0000",
                    "updated": "2010-02-02T04:44:47.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44066",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jbgisser",
                        "name": "jbgisser",
                        "displayName": "James Pankratz",
                        "active": true
                    },
                    "body": "@Richard - can you share your fix with us?\r\n\r\nI noticed one fix that was shared in the duplicate bug 5535 http:\/\/zendframework.com\/issues\/browse\/ZF-5535",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jbgisser",
                        "name": "jbgisser",
                        "displayName": "James Pankratz",
                        "active": true
                    },
                    "created": "2011-01-19T07:50:06.000+0000",
                    "updated": "2011-01-19T07:50:06.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44068",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jbgisser",
                        "name": "jbgisser",
                        "displayName": "James Pankratz",
                        "active": true
                    },
                    "body": "Hello All. \r\n\r\nWe solved this problem by coding table and schema names in UPPERCASE. \r\n\r\nThis sample code did not work -> got same problem as reported above:\r\n\r\n<?php\r\nclass Application_Model_DbTable_Application extends Zend_Db_Table_Abstract\r\n{\r\n    protected $_name = 'table_name';\r\n    protected $_schema = 'schema';\r\n}\r\n\r\nBut this did work:\r\n\r\n<?php\r\nclass Application_Model_DbTable_Application extends Zend_Db_Table_Abstract\r\n{\r\n    protected $_name = 'TABLE_NAME';\r\n    protected $_schema = 'SCHEMA';\r\n}\r\n\r\nI may not know what I'm talking about as I have only been working with PHP for a month, and just finished ZF training - but hoping this helps. ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jbgisser",
                        "name": "jbgisser",
                        "displayName": "James Pankratz",
                        "active": true
                    },
                    "created": "2011-01-19T09:50:19.000+0000",
                    "updated": "2011-01-19T09:50:19.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/44077",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=richardnoya",
                        "name": "richardnoya",
                        "displayName": "Richard Noya",
                        "active": true
                    },
                    "body": "My fix which I implement in every version for several months now is the following:\r\n\r\nin Zend\\Db\\Adapter\\Abstract.php (see commented lines \"Fix for i5\")\r\n\r\n    protected function _quoteIdentifierAs($ident, $alias = null, $auto = false, $as = ' AS ')\r\n    {\r\n        if ($ident instanceof Zend_Db_Expr) {\r\n            $quoted = $ident->__toString();\r\n        } elseif ($ident instanceof Zend_Db_Select) {\r\n            $quoted = '(' . $ident->assemble() . ')';\r\n        } else {\r\n            if (is_string($ident)) {\r\n                $ident = explode('.', $ident);\r\n            }\r\n            if (is_array($ident)) {\r\n                $segments = array();\r\n                foreach ($ident as $segment) {\r\n                    if ($segment instanceof Zend_Db_Expr) {\r\n                        $segments[] = $segment->__toString();\r\n                    } else {\r\n                        $segments[] = $this->_quoteIdentifier($segment, $auto);\r\n                    }\r\n                }\r\n\/*Fix for i5\r\n                if ($alias !== null && end($ident) == $alias) {\r\n                    $alias = null;\r\n                }\r\n*\/\r\n                $quoted = implode('.', $segments);\r\n            } else {\r\n                $quoted = $this->_quoteIdentifier($ident, $auto);\r\n            }\r\n        }\r\n        if ($alias !== null) {\r\n            $quoted .= $as . $this->_quoteIdentifier($alias, $auto);\r\n        }\r\n        return $quoted;\r\n    }\r\n\r\nSo by never setting the alias to null, it works like a charm for my DB2 database AND MySql.\r\n\r\nregards Richard.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=richardnoya",
                        "name": "richardnoya",
                        "displayName": "Richard Noya",
                        "active": true
                    },
                    "created": "2011-01-20T08:06:06.000+0000",
                    "updated": "2011-01-20T08:06:06.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4553\/transitions"
}