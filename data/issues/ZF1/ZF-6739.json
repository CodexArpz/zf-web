{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6739",
    "key": "ZF-6739",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Connect to a database with trusted connection"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6739\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=janpolsen",
                "name": "janpolsen",
                "displayName": "Jan Olsen",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-05-20T04:08:00.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-11-20T21:37:56.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "mssql",
                "odbc",
                "pdo",
                "secure",
                "trusted"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I am running with \"{{mssql.secure_connections = On}}\" in my \"{{php.ini}}\" file, so I don't have to assign a username and password whenever I make query.\n\nThis works fine with PHP native {{mssql_*}} functions and the ADOdb Framework, but sadly not with the Zend Framework. At least I haven't found out how to connect to a database without assigning a username and a password.\n\nI have found a solution to make it possible, however it is dependant on another \"patch\" (http:\/\/framework.zend.com\/issues\/browse\/ZF-3493) by Bart McLeod.\n\nThe changes are made to the function {{_dsn()}} which should be changed to:\n{code:title=Zend\/Db\/Adapter\/Pdo\/Mssql.php|borderStyle=solid}\n    protected function _dsn()\n    {\n        \/\/ baseline of DSN parts\n        $dsn = $this->_config;\n\n\n        if (isset($dsn['port'])) {\n            $seperator = ':';\n            if (strtoupper(substr(PHP_OS, 0, 3)) === 'WIN') {\n                $seperator = ',';\n            }\n            $dsn['host'] .= $seperator . $dsn['port'];\n            unset($dsn['port']);\n        }\n\n        \/\/ this driver supports multiple DSN prefixes\n        \/\/ @see http:\/\/www.php.net\/manual\/en\/ref.pdo-dblib.connection.php\n        if (isset($dsn['pdoType'])) {\n            switch (strtolower($dsn['pdoType'])) {\n                case 'freetds':\n                case 'sybase':\n                    $this->_pdoType = 'sybase';\n                    break;\n                case 'mssql':\n                    $this->_pdoType = 'mssql';\n                    break;\n                case 'odbc':\n                    $this->_pdoType = 'odbc';\n                    $dsn['DATABASE']    = $dsn['dbname'];\n                    unset($dsn['dbname']);\n                    $dsn['DRIVER']    = '{SQL Server}';\n                    $dsn['SERVER']    = $dsn['host'];\n                    if (!$dsn['username'] && !$dsn['password']) {\n                        $dsn['Trusted_Connection'] = \"yes\";\n                    }\n                    unset($dsn['host']);\n                    break;\n                case 'dblib':\n                default:\n                    $this->_pdoType = 'dblib';\n                    break;\n            }\n            unset($dsn['pdoType']);\n        }\n\n        \/\/ don't pass the username and password in the DSN\n        unset($dsn['username']);\n        unset($dsn['password']);\n        unset($dsn['driver_options']);\n\n        \/\/ use all remaining parts in the DSN\n        foreach ($dsn as $key => $val) {\n            $dsn[$key] = \"$key=$val\";\n        }\n\n        $dsn = $this->_pdoType . ':' . implode(';', $dsn);\n        return $dsn;\n    }\n{code}\n\nI would've loved to not being forced to use ODBC, but couldn't couldn't figure out how to make a trusted connection with PDO_MSSQL :(."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/6",
                "name": "N\/A"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6739\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User"
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-3493",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3493",
                    "type": {
                        "name": "Related",
                        "direction": "OUTBOUND",
                        "description": "is related to"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10310",
                    "id": 10310,
                    "description": "Mini Release",
                    "name": "1.8.1",
                    "userReleaseDate": "12\/May\/09",
                    "archived": false,
                    "releaseDate": "2009-05-12",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10012",
                    "id": 10012,
                    "name": "Zend_Db",
                    "description": "interfaces, APIs, and adapters for various third-party data stores",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38397",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=janpolsen",
                        "name": "janpolsen",
                        "displayName": "Jan Olsen",
                        "active": true
                    },
                    "body": "Crossposted from ZF-3493 since that issue apparently got closed prematurely IMHO.\r\n\r\nPlease someone look into this and let me know if I can help in any way.\r\n\r\n---\r\nI just went through updating ZendFramework from 0.9.3 to 1.10.0 and while it should've been a simple overwrite of all the files then it took a bit longer than that.\r\n\r\nThe reason... I had to manually add the attached mssql-odbc-patch as well as the changes from ZF-6739.\r\n\r\nI can understand that there is the right way of implementing stuff as well as the wrong way, but reading that this issue might get changed to \"wont-fix\" (as well as ZF-905) and the lack of response in issue ZF-6739 (which is depending on this fix) then I fear that I have to manually make changes in all future releases of Zend Framework.\r\n\r\nThis fix doesn't break any functionality and just adds an extra option\/setting, so why is it, that it can't be implemented?\r\n\r\nDo we really have to install Microsofts SQLserver driver and if so, does that then solve the problems in this issue and the related issues (text fields above 4096 bytes, trusted connection and multiple queries).\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=janpolsen",
                        "name": "janpolsen",
                        "displayName": "Jan Olsen",
                        "active": true
                    },
                    "created": "2010-02-11T04:49:42.000+0000",
                    "updated": "2010-02-11T04:49:42.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6739\/transitions"
}