{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2283",
    "key": "ZF-2283",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "View Helper htmlList() needs to escape output (but currently doesn't). "
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField",
            "value": {
                "timeoriginalestimate": 180,
                "timeestimate": 180
            }
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2283\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10172",
                    "id": 10172,
                    "description": "Minor Release",
                    "name": "1.5.0",
                    "userReleaseDate": "17\/Mar\/08",
                    "archived": true,
                    "releaseDate": "2008-03-17",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2008-01-15T04:11:42.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=carlton",
                "name": "carlton",
                "displayName": "Carlton Gibson",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2007-12-07T10:46:53.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2008-03-21T16:25:32.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "-- Carlton Gibson <carlton.gibson@noumenal.co.uk> wrote\n(on Friday, 07 December 2007, 12:18 PM +0000):\nI've been using the Zend_View_Helper htmlList, but from the code it looks like\nit fails to escape values properly. \n\nThe guidelines for writing view helpers state:\n\n\nIn general, the class should not echo or print or otherwise generate output.\nInstead, it should return values to be printed or echoed. The returned values\nshould be escaped appropriately.\n\nI've been using the following construct in my view scripts to get round this:\n\n<?php\nfor ($i=0;$i<count($this->listArray);++$i)\n{\n$this->listArray[$i] = $this->escape($this->listArray[$i]);\n}\necho $this->htmlList($this->listArray);\n?>\n\nObviously this would be better off in a function to start with but I'm thinking\nof writing it into a custom helper. \n\nMy thought though is that this should perhaps go in the standard ZF version.\nDoes anyone know why htmlList() doesn't do the escaping? Do people think this\nis worth doing? \n\nAbsolutely htmlList() should escape values. Could you add an issue to\nthe tracker for this, so we don't forget about it?\n\nThanks!\n\n-- \nMatthew Weier O'Phinney\nPHP Developer            | matthew@zend.com\nZend - The PHP Company   | http:\/\/www.zend.com\/\n\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/customFieldOption\/10039",
                "value": "  Should Have"
            }
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2283\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=martel",
                "name": "martel",
                "displayName": "Michal Minicki",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10140",
                    "id": 10140,
                    "description": "Mini Release",
                    "name": "1.0.3",
                    "userReleaseDate": "30\/Nov\/07",
                    "archived": true,
                    "releaseDate": "2007-11-30",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10026",
                    "id": 10026,
                    "name": "Zend_View",
                    "description": "View portion of the ZF MVC",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/17866",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=carlton",
                        "name": "carlton",
                        "displayName": "Carlton Gibson",
                        "active": true
                    },
                    "body": "I think two relevant cases here: \n\n1) You pass htmlList() an array of values which you want escaping. This could be the default. \n2) You pass htmlList() something like an array of links, which you don't want escaping. \n\nIn the second case you should be able to pass htmlList() FALSE as a second parameter whereby you explicitly take the responsibility of escaping the output elsewhere upon yourself. \n\nAs long as the setView() method was present in the HtmlList class definition, something like the above quick fix could be conditionally placed  at the beginning of the existing htmlList() method and the helper should work as desired...\n\ne.g.\n\npublic function htmlList($inputArray, $escape=TRUE)\n{\n{quote}\nif ($escape=TRUE)\n{\nfor ($i=0;$i<count($inputArray);++$i)\n{\n\/\/Calling Parent View's escape() method, via reference from $this->setVeiw()\n $inputArray[$i] = $this->escape($inputArray[$i]); \n}\n}\n{quote}\n\n\/\/Existing htmlList Code Here...\n\n}\n\n\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=carlton",
                        "name": "carlton",
                        "displayName": "Carlton Gibson",
                        "active": true
                    },
                    "created": "2007-12-12T04:17:32.000+0000",
                    "updated": "2007-12-12T04:17:32.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/17885",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jordanryanmoore",
                        "name": "jordanryanmoore",
                        "displayName": "Jordan Ryan Moore",
                        "active": true
                    },
                    "body": "Proposed patch that doesn't break BC:\n\n{code}\n--- \/library\/Zend\/View\/Helper\/HtmlList.php\t(revision 7096)\n+++ \/library\/Zend\/View\/Helper\/HtmlList.php\t(working copy)\n@@ -44,9 +44,10 @@\n      * @param array   $items   Array with the elements of the list\n      * @param boolean $ordered Specifies ordered\/unordered list; default unordered\n      * @param array   $attribs Attributes for the ol\/ul tag.\n+     * @param boolean $escape  Escape list item contents\n      * @return string The list XHTML.\n      *\/\n-    public function htmlList(array $items, $ordered = false, $attribs = false)\n+    public function htmlList(array $items, $ordered = false, $attribs = false, $escape = false)\n     {\n         if (!is_array($items)) {\n             require_once 'Zend\/View\/Exception.php';\n@@ -57,6 +58,9 @@\n \n         foreach ($items as $item) {\n             if (!is_array($item)) {\n+                if ($escape && $this->view instanceof Zend_View_Abstract) {\n+                    $item = $this->view->escape($item);\n+                }\n                 $list .= '<li>' . $item . '<\/li>';\n             } else {\n                 if (5 < strlen($list)) {\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jordanryanmoore",
                        "name": "jordanryanmoore",
                        "displayName": "Jordan Ryan Moore",
                        "active": true
                    },
                    "created": "2007-12-12T16:41:38.000+0000",
                    "updated": "2007-12-12T16:41:38.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/18326",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=martel",
                        "name": "martel",
                        "displayName": "Michal Minicki",
                        "active": true
                    },
                    "body": "Fixed in revision 7442. Thanks, Carlton.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=martel",
                        "name": "martel",
                        "displayName": "Michal Minicki",
                        "active": true
                    },
                    "created": "2008-01-15T04:11:42.000+0000",
                    "updated": "2008-01-15T04:11:42.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/18327",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=martel",
                        "name": "martel",
                        "displayName": "Michal Minicki",
                        "active": true
                    },
                    "body": "Revision 7743 allows for switching escaping off. \n\nMinor BC break: All Zend Framework view helpers escape output by default so escaping must be switched off if one wants to pass an unmodified value.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=martel",
                        "name": "martel",
                        "displayName": "Michal Minicki",
                        "active": true
                    },
                    "created": "2008-01-15T04:19:10.000+0000",
                    "updated": "2008-01-15T04:19:10.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-2283\/transitions"
}