{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3597",
    "key": "ZF-3597",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Custom Decorators dont work since 9919"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField",
            "value": {
                "timeoriginalestimate": 30,
                "timeestimate": 30
            }
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3597\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/5",
                "name": "Cannot Reproduce"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10240",
                    "id": 10240,
                    "description": "Minor Release",
                    "name": "1.6.0",
                    "userReleaseDate": "02\/Sep\/08",
                    "archived": false,
                    "releaseDate": "2008-09-02",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2008-08-05T06:34:34.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alexl",
                "name": "alexl",
                "displayName": "Alexander Lanin",
                "active": false
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-07-08T07:23:15.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2008-09-02T10:39:35.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "hi,\n\nI dont know whether i'm supposed to use them in a different way now, but up to 9918 (i downgraded to 9918 and its working again) my decorators worked.\n\ni have {code}<?php\n\nclass AlexL_Form_Decorator_TableRow extends Zend_Form_Decorator_Abstract\n{\n\tpublic function render($content)\n\t{\n\t\tZend_Debug::dump($content);{code} and the output with rev 9918 is like {code}string(77) \"\n\t\t\t<input type=\"text\" name=\"userName\" id=\"userName\" value=\"\" maxlength=\"20\" \/>\" {code} and with 9919 it's {code}string(0) \"\"\n{code}\n\nand the output with 9919 is strange. i get my decorator with labels etc and AFTER that the input field. but it's supposed to be inside the decorator's output"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/customFieldOption\/10037",
                "value": "   Must Have"
            }
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3597\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10029",
                    "id": 10029,
                    "name": "Zend_Form",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/22801",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Can you attach the full decorator, and an element that uses it?\n\nIn 9919, I did some refactoring to allow lazy-loading of decorators. While all tests continue to pass, there may have been edge cases that were never tested, and I'll need to see the full code necessary to reproduce the issue to verify.\n\nThanks!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-07-08T08:14:27.000+0000",
                    "updated": "2008-07-08T08:14:27.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/22810",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alexl",
                        "name": "alexl",
                        "displayName": "Alexander Lanin",
                        "active": false
                    },
                    "body": "ok, here a simplifies version. same bug applies:\n{code}<?php\n\nclass AlexL_Form_Decorator_TableRow extends Zend_Form_Decorator_Abstract\n{\n\tpublic function render($content)\n\t{\n\t\t$e = $this->getElement();\n\t\t$r = \"<tr><td>{$e->getLabel()}<td>{$content}<td>{$e->getDescription()}<\/tr>\";\n\t\t\n\t\t\/\/ translation and error messages from zend_form omitted for simplicity\n\t\t\n\t\treturn $r;\n\t}\n}{code}\nthat <\/tr> is important since without it you wont see any error in rendering. problem is as described above that $content is always just an empty string\n\nthe element is a simple Zend_Form_Element_Text('test') with any label\nthen i do:\nZend_Form_Object->setElementDecorators(array('ViewHelper', new AlexL_Form_Decorator_TableRow()));",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alexl",
                        "name": "alexl",
                        "displayName": "Alexander Lanin",
                        "active": false
                    },
                    "created": "2008-07-08T16:23:53.000+0000",
                    "updated": "2008-07-08T16:23:53.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/22816",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "I've run the following against current trunk:\n\n{code}\nclass TestController extends Zend_Controller_Action\n{\n    public function alexAction()\n    {\n        $form = new Zend_Form(array(\n            'decorators' => array(\n                'FormElements',\n                array('HtmlTag', array('tag' => 'table')),\n                'Form',\n            ),\n        ));\n        $form->addElementPrefixPath('AlexL_Form_Decorator', 'AlexL\/Form\/Decorator', 'decorator');\n        $form->addElement('text', 'test', array(\n            'label' => 'Foo',\n            'description' => 'this is the description',\n            \/*\n            'decorators' => array(\n                'ViewHelper',\n                'Errors',\n                'TableRow',\n            ),\n             *\/\n        ));\n        $form->setElementDecorators(array(\n            'ViewHelper',\n            'TableRow',\n        ));\n        $this->view->form = $form;\n    }\n}\n{code}\n\nalternately commenting either the setElementDecorators() call or the element decorators; both work as expected.\n\nWhat _doesn't_ work as expected is using a concrete instance of the decorator, which was the surprise for me. In that particular case, the input was placed _beneath_ the table row:\n\n{code}\n<tr><td>Foo<td><td>this is the description<\/tr>\n<input type=\"text\" name=\"test\" id=\"test\" value=\"\">\n{code}\n\nI'll look into it. For now, try using your custom class as a plugin, and don't instantiate it directly.\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-07-08T18:18:16.000+0000",
                    "updated": "2008-07-08T18:18:16.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/22817",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Scheduling for final release of 1.6.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-07-08T18:19:03.000+0000",
                    "updated": "2008-07-08T18:19:03.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/23301",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "I've added test cases in trunk that attempt to reproduce the issue -- but to no avail. Closing as I believe this issue no longer exists due to other changes that have been pushed to trunk.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2008-08-05T06:34:33.000+0000",
                    "updated": "2008-08-05T06:34:33.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/24157",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "Updating for the 1.6.0 release.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2008-09-02T10:39:35.000+0000",
                    "updated": "2008-09-02T10:39:35.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3597\/transitions"
}