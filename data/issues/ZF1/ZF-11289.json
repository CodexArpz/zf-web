{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11289",
    "key": "ZF-11289",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "add large date parts to zend_date object returns false in mktime function"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11289\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vasylp",
                "name": "vasylp",
                "displayName": "Vasyl",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2011-04-14T15:05:56.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2011-04-14T15:16:28.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "add",
                "addDay",
                "addMoth",
                "addYear",
                "zend_date"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "As I quite understand \"Add\" date method of zend_date object uses \"mktime\" method to convert date parts into timestamp and then uses them in date calculations. For date object with year between 1901 and 1938 this internal \"mktime\" limits the size of any parts to be added to maximum unix timestamp = 2147483647 after part conversion. And in this case the feature with bcmath php extension implemented into date object becomes useless.\r\nFor example, if to add 24856 days to date before 2038 will return false in \"mktime\" when this large part being converted into timestamp because 24856 days = 2147558400 > 2147483647 = 24855 days (max timestamp). With adding months the situation is even worse as internal \"mktime\" uses \"year\" part of date object to convert \"month\" part as opposed to \"day\" part which is converted as timestamp from 1970.\r\nThe problem lies within internal \"mktime\" method of zend_date object (module: Zend\/Date\/DateObject.php) in the following line of code with \"year\" part checking:\r\nprotected function mktime($hour, $minute, $second, $month, $day, $year, $gmt = false)\r\n    {\r\n        \/\/ complete date but in 32bit timestamp - use PHP internal\r\n        if ((1901 < $year) and ($year < 2038)) {...\r\n\r\nWhat I would suggest is to make the following minor changes into this internal \"mktime\" function:\r\nprotected function mktime($hour, $minute, $second, $month, $day, $year, $gmt = false)\r\n    {\r\n\t$year_x = $year + $day\/365+$month\/12+$hour\/(365*24)+$minute\/(365*24*60)+$second\/(365*24*60*60);\r\n        \/\/ complete date but in 32bit timestamp - use PHP internal\r\n        if ((1901 < $year_x) and ($year_x < 2038)) {...\r\nAfter this changes internal \"mktime\" will check the resulting year instead of \"year\" part and use bcmath if any part is larger then maximum timestamp after conversion\r\nThank you\r\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11289\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [
                "add",
                "zend_date"
            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                "name": "thomas",
                "displayName": "Thomas Weidner",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10540",
                    "id": 10540,
                    "description": "Mini Release",
                    "name": "1.11.4",
                    "userReleaseDate": "03\/Mar\/11",
                    "archived": false,
                    "releaseDate": "2011-03-03",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10072",
                    "id": 10072,
                    "name": "Zend_Date",
                    "description": "Zend_Date is the basic library for the handling of all date, time and calendar-related issues.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [

            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11289\/transitions"
}