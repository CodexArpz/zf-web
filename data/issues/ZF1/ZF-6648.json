{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6648",
    "key": "ZF-6648",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Amazon S3 StreamWrapper - is_dir Funktion"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/2",
                "name": "New Feature",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6648\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10330",
                    "id": 10330,
                    "description": "Mini Release",
                    "name": "1.8.2",
                    "userReleaseDate": "27\/May\/09",
                    "archived": false,
                    "releaseDate": "2009-05-27",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-05-14T13:15:17.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vistahr",
                "name": "vistahr",
                "displayName": "vincent",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-05-14T01:55:13.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-01-09T21:33:03.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "S3",
                "StreamWrapper",
                "upload"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Hi,\n\nive tested the Amazon_S3 StreamWrapper and this works fine.\nBut now, i would like to realize a direct Upload to the Amazon Storage, but to Upload a file, Zend_File checks the Destination Directory and this won\u00b4t work with the StreamWrapper.\n\n$s3 = new Zend_Service_Amazon_S3(*****)\n$s3->registerStreamWrapper(\"s3\");\n[...]\n$adapter = new Zend_File_Transfer_Adapter_Http();\n$adapter->setDestination('s3:\/\/test-test-f\/'); \n( The bucket exist, checked with S3Fox. I also grant all rights in the ACL to everyone. )\n\nThis throws an exception, that the destination is not a directory.\n\nDid i make a mistake or it is not implemented yet ?"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6648\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=stas",
                "name": "stas",
                "displayName": "Stanislav Malyshev",
                "active": false
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10310",
                    "id": 10310,
                    "description": "Mini Release",
                    "name": "1.8.1",
                    "userReleaseDate": "12\/May\/09",
                    "archived": false,
                    "releaseDate": "2009-05-12",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10022",
                    "id": 10022,
                    "name": "Zend_Service_Amazon",
                    "description": "utility functions for using Amazon web services",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30962",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vistahr",
                        "name": "vistahr",
                        "displayName": "vincent",
                        "active": true
                    },
                    "body": "I\u00b4ve found the Issue.\n\nThere is a Problem with the backslash in the  \"_getNamePart\" function.\n\nI cant use this: \n\"is_dir('s3:\/\/test-test-f)\"\ncause the index \"path\" is undefined.\n\nBut when i use this:\n\"is_dir('s3:\/\/test-test-f\/')\"\nthe function return 2 slashes.\nstring(12) \"test-test-f\/\/\" and url_stat wont work.\n\nThe main problem, that i cant use is_dir() is, thats the mode is not set. ($stat['mode'] = 0;)\n\nQuote from cellog at php dot net 13-Apr-2005 04:45 :\n\n\"url_stat() must define mode, or is_file()\/is_dir()\/is_executable(), and any of those functions affected by clearstatcache() simply won't work.\nIt's not documented, but directories must be a mode like 040777 (octal), and files a mode like 0100666.  If you wish the file to be executable, use 7s instead of 6s.  The last 3 digits are exactly the same thing as what you pass to chmod.  040000 defines a directory, and 0100000 defines a file. \"",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=vistahr",
                        "name": "vistahr",
                        "displayName": "vincent",
                        "active": true
                    },
                    "created": "2009-05-14T02:36:00.000+0000",
                    "updated": "2009-05-14T02:36:00.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30965",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Assigning to Stas.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2009-05-14T05:25:33.000+0000",
                    "updated": "2009-05-14T05:25:33.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/30980",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=stas",
                        "name": "stas",
                        "displayName": "Stanislav Malyshev",
                        "active": false
                    },
                    "body": "the slash issue should be already fixed and I've checked in the fix for is_dir issue.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=stas",
                        "name": "stas",
                        "displayName": "Stanislav Malyshev",
                        "active": false
                    },
                    "created": "2009-05-14T13:15:04.000+0000",
                    "updated": "2009-05-14T13:15:04.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/49471",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=stephanebrillant",
                        "name": "stephanebrillant",
                        "displayName": "Stephane Brillant",
                        "active": true
                    },
                    "body": "This is still an issue. It look like we are not able to directly upload to S3.\r\n* The url_stat() code to detect folder\/bucket vs. file often mix up:\r\n** Example : 's3:\/\/bucketName\/subfolder\/' result in a file mode\r\n             's3:\/\/bucketName\/file' is converted to 'bucketName\\file' which result in a folder mode because '\/' is not the Windows DIRECTORY_SEPARATOR\r\n\r\nSo query return error 404 most of the time.\r\n\r\nfile_put_contents('s3:\/\/BucketName\/SubFolder\/item.html', $data); work correctly so i will manualy update the file until it is fixed.\r\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=stephanebrillant",
                        "name": "stephanebrillant",
                        "displayName": "Stephane Brillant",
                        "active": true
                    },
                    "created": "2012-01-09T21:33:03.000+0000",
                    "updated": "2012-01-09T21:33:03.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6648\/transitions"
}