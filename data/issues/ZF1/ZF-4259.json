{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4259",
    "key": "ZF-4259",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "zend http client with proxy"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4259\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10320",
                    "id": 10320,
                    "description": "Minor Release",
                    "name": "1.9.0",
                    "userReleaseDate": "31\/Jul\/09",
                    "archived": false,
                    "releaseDate": "2009-07-31",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-07-23T16:15:01.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=core.cure@gmail.com",
                "name": "core.cure@gmail.com",
                "displayName": "John Hopper",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-09-12T00:20:25.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-11-17T22:51:12.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "client",
                "error",
                "http",
                "https",
                "proxy",
                "redirection"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "not working when rediretion occurs on server. (will add more info later).\r\nsame address works when Fireox or Explorer is used with proxy\r\n\r\ni made it works by changing 'write' method in Proxy.php:\r\n\r\n{code}\r\nif($this->negotiated){\r\n    $request = \"{$method} {$uri->getPath()} HTTP\/{$http_ver}\\r\\n\";\r\n}\r\nelse{\r\n    $request = \"{$method} {$uri->__toString()} HTTP\/{$http_ver}\\r\\n\";\r\n}\r\n{code}\r\n\r\ntcpdump:\r\n\r\nCONNECT h1.host.com:443 HTTP\/1.1\r\nHost: 10.10.0.1\r\n\r\n\r\nHTTP\/1.0 200 Connection established\r\n\r\n\r\nCONNECT h5.host.comhttps:443 HTTP\/1.1\r\nHost: 10.10.0.1\r\n\r\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/1",
                "name": "Blocker"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4259\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                "name": "shahar",
                "displayName": "Shahar Evron",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10340",
                    "id": 10340,
                    "description": "Mini Release",
                    "name": "1.8.4",
                    "userReleaseDate": "23\/Jun\/09",
                    "archived": false,
                    "releaseDate": "2009-06-23",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10015",
                    "id": 10015,
                    "name": "Zend_Http_Client",
                    "description": "performs HTTP requests",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/25282",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                        "name": "shahar",
                        "displayName": "Shahar Evron",
                        "active": true
                    },
                    "body": "Hi  -\n\nCan you provide a more clear scenario?\n\nI see you have HTTPS - does it also happen when you use regular HTTP proxy and not HTTPS ?\n\nWhere does the redirection happen? On the proxy server or on the remote server? What is the redirection code?\n\nThanks.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                        "name": "shahar",
                        "displayName": "Shahar Evron",
                        "active": true
                    },
                    "created": "2008-10-21T15:03:43.000+0000",
                    "updated": "2008-10-21T15:03:43.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/27164",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=core.cure@gmail.com",
                        "name": "core.cure@gmail.com",
                        "displayName": "John Hopper",
                        "active": true
                    },
                    "body": "sorry for the delay.\n\ncode + tcp dump follows:\n\n    require_once(\"Zend\/Http\/Client.php\");\n\n    $config = array(\n\n        'adapter'       => 'Zend_Http_Client_Adapter_Proxy',\n        'timeout'       => '15',\n        \/\/'ssltransport'    => 'ssl',\n        'useragent'     => '',\n        'proxy_host'    => '10.3.0.24',\n        'proxy_port'    => '3128',\n        'proxy_user'    => '',\n        'proxy_pass'    => ''\n    );\n\n    $uri = \"https:\/\/www.sf.net\/\";\n\n        try{\n            $client = new Zend_Http_Client($uri, $config);\n            $response = $client->request();\n            $body = $response->getBody();\n            file_put_contents('proxyssl.dump', $body);\n        }\n        catch (Exception $ex){\n            echo $ex->getMessage();\n        }\n\n\nCONNECT www.sf.net:443 HTTP\/1.1.\nHost: 10.3.0.24.\nUser-agent:\n\n\nHTTP\/1.0 200 Connection established.\n\n\nCONNECT sourceforge.nethttps:443 HTTP\/1.1.\nHost: 10.3.0.24.\nUser-agent:\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=core.cure@gmail.com",
                        "name": "core.cure@gmail.com",
                        "displayName": "John Hopper",
                        "active": true
                    },
                    "created": "2008-12-09T03:29:34.000+0000",
                    "updated": "2008-12-09T03:29:34.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/27165",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=core.cure@gmail.com",
                        "name": "core.cure@gmail.com",
                        "displayName": "John Hopper",
                        "active": true
                    },
                    "body": "redirection for http works fine. tested using proxy and the same host (http:\/\/sf.net )",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=core.cure@gmail.com",
                        "name": "core.cure@gmail.com",
                        "displayName": "John Hopper",
                        "active": true
                    },
                    "created": "2008-12-09T03:39:29.000+0000",
                    "updated": "2008-12-09T03:39:29.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32882",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                        "name": "shahar",
                        "displayName": "Shahar Evron",
                        "active": true
                    },
                    "body": "Sorry for delaying with this - I *almost* used your patch to fix this. Please test with trunk after CS-17014.\nBTW this looks like some odd behavior of the sf.net servers because plain Apache works fine (I've been testing this for some time now). \n\nActually the SF.net servers send a pretty malformed redirection header (this is a dump of the response from sf.net):\n{code}\nHTTP\/1.0 302 Found\nLocation: http:\/\/sourceforge.nethttps:\/\/www.sf.net:443\/\nServer: BigIP\nConnection: close\nContent-Length: 0\n{code}\n\nAs you can see something is buggy either in their code, or with their servers.. But since you say this doesn't happen with Firefox, I assumed this is something we can probably do better :)\n\nThanks for reporting!\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                        "name": "shahar",
                        "displayName": "Shahar Evron",
                        "active": true
                    },
                    "created": "2009-07-23T16:15:01.000+0000",
                    "updated": "2009-07-23T16:15:01.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/32907",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                        "name": "shahar",
                        "displayName": "Shahar Evron",
                        "active": true
                    },
                    "body": "This is indeed the difference, and this problem was fixed in SVN trunk. You can test with the latest SVN checkout or wait for the next release which will probably include this fix.\n\nThanks!\n\nShahar.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=shahar",
                        "name": "shahar",
                        "displayName": "Shahar Evron",
                        "active": true
                    },
                    "created": "2009-07-24T06:44:31.000+0000",
                    "updated": "2009-07-24T06:44:31.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/36078",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=satoruyoshida",
                        "name": "satoruyoshida",
                        "displayName": "Satoru Yoshida",
                        "active": true
                    },
                    "body": "I set fix version. I find this at SVN r17118 in 1.9 branch.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=satoruyoshida",
                        "name": "satoruyoshida",
                        "displayName": "Satoru Yoshida",
                        "active": true
                    },
                    "created": "2009-11-17T22:51:11.000+0000",
                    "updated": "2009-11-17T22:51:11.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-4259\/transitions"
}