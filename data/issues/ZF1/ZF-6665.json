{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6665",
    "key": "ZF-6665",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Metadata for tables from a different catalog in MSSQL"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6665\/votes",
                "votes": 1,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alganet",
                "name": "alganet",
                "displayName": "Alexandre Gomes Gaigalas",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-05-14T19:37:32.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2013-02-10T16:18:01.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "catalog",
                "database",
                "metadata",
                "mssql",
                "schema"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "MSSQL servers can handle queries against multiple databases. Also, MSSQL works with schemas, so the tables could be organized in the following manner:\r\n\r\n-Database Foo\r\n-----Schema Bar\r\n---------Table Baz\r\n-Database Sample\r\n-----Schema Zend\r\n---------Table Framework\r\n\r\nUsing any database, presuming you have the appropriate permissions, you can do the following query:\r\n\r\nSELECT\r\n    baz.column\r\nFROM\r\n    foo.bar.baz\r\nINNER JOIN\r\n    sample.zend.framework\r\n    ON baz.some_key = framework.some_key\r\n\r\nNote that it is not possible to do the following:\r\n\r\nsp_columns 'foo.bar.baz'\r\nsp_columns 'sample.zend.framework'\r\n\r\nIn order to obtain a list of columns from a table, you have to be on that table original database, like this:\r\n\r\nUSE foo;\r\nsp_columns 'baz', 'bar';\r\nUSE sample;\r\nsp_columns 'framework', 'zend';\r\n\r\nI'm currently using workarounds in my applications to circumvent this limitation:\r\n\r\n$db->exec('USE foo;'); \/\/Changes current database\r\n$barBazTable->fetchAll(); \/\/Can normally fetch metadata under the right context\r\n$db->exec('USE sample;'); \r\n$zendFrameworkTable->fetchAll();\r\n\r\nMy current approach doesn't work with tables with the same name in different schemas (sales.people, employees.people).\r\n\r\nMy Zend_Db_Table objects also had they \"$_schema\" properties with the whole schema identifier, including database name ('foo.bar', 'sample.zend', etc..). These works fine.\r\n\r\nI think the \"USE\" statements should be called while describing the table (sp_columns, sp_pkeys, etc...) inside Zend_Db_Adapter_Pdo_Mssql, and then restored to the original database (specified on connection)."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/customFieldOption\/10040",
                "value": " Nice to Have"
            }
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6665\/watchers",
                "isWatching": false,
                "watchCount": 2
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                "name": "ralph",
                "displayName": "Ralph Schindler",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/12167",
                    "filename": "Mssql.php.patch",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jaysonsantos",
                        "name": "jaysonsantos",
                        "displayName": "Jayson Santos dos Reis",
                        "active": true
                    },
                    "created": "2009-08-28T06:49:13.000+0000",
                    "size": 1763,
                    "mimeType": "text\/x-patch",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/12167\/Mssql.php.patch"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/12162",
                    "filename": "Mssql.php.patch",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alganet",
                        "name": "alganet",
                        "displayName": "Alexandre Gomes Gaigalas",
                        "active": true
                    },
                    "created": "2009-08-26T14:22:34.000+0000",
                    "size": 1762,
                    "mimeType": "text\/x-patch",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/12162\/Mssql.php.patch"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10300",
                    "id": 10300,
                    "description": "Mini Release",
                    "name": "1.7.8",
                    "userReleaseDate": "30\/Mar\/09",
                    "archived": false,
                    "releaseDate": "2009-03-30",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10241",
                    "id": 10241,
                    "description": "Minor Release",
                    "name": "1.8.0",
                    "userReleaseDate": "30\/Apr\/09",
                    "archived": false,
                    "releaseDate": "2009-04-30",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10310",
                    "id": 10310,
                    "description": "Mini Release",
                    "name": "1.8.1",
                    "userReleaseDate": "12\/May\/09",
                    "archived": false,
                    "releaseDate": "2009-05-12",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10330",
                    "id": 10330,
                    "description": "Mini Release",
                    "name": "1.8.2",
                    "userReleaseDate": "27\/May\/09",
                    "archived": false,
                    "releaseDate": "2009-05-27",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10331",
                    "id": 10331,
                    "description": "Mini Release",
                    "name": "1.8.3",
                    "userReleaseDate": "09\/Jun\/09",
                    "archived": false,
                    "releaseDate": "2009-06-09",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10340",
                    "id": 10340,
                    "description": "Mini Release",
                    "name": "1.8.4",
                    "userReleaseDate": "23\/Jun\/09",
                    "archived": false,
                    "releaseDate": "2009-06-23",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10320",
                    "id": 10320,
                    "description": "Minor Release",
                    "name": "1.9.0",
                    "userReleaseDate": "31\/Jul\/09",
                    "archived": false,
                    "releaseDate": "2009-07-31",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10350",
                    "id": 10350,
                    "description": "Mini Release",
                    "name": "1.9.1",
                    "userReleaseDate": "11\/Aug\/09",
                    "archived": false,
                    "releaseDate": "2009-08-11",
                    "released": true
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10361",
                    "id": 10361,
                    "description": "Mini Release",
                    "name": "1.9.2",
                    "userReleaseDate": "25\/Aug\/09",
                    "archived": false,
                    "releaseDate": "2009-08-25",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10012",
                    "id": 10012,
                    "name": "Zend_Db",
                    "description": "interfaces, APIs, and adapters for various third-party data stores",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33804",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alganet",
                        "name": "alganet",
                        "displayName": "Alexandre Gomes Gaigalas",
                        "active": true
                    },
                    "body": "Changes in the sp_columns syntax",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alganet",
                        "name": "alganet",
                        "displayName": "Alexandre Gomes Gaigalas",
                        "active": true
                    },
                    "created": "2009-08-22T22:48:08.000+0000",
                    "updated": "2009-08-22T22:48:08.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33960",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "I think it would be bad practice to execute a USE during the lifetime of an application.  This would effectively be changing the context of the primary adapter.  When other sections of code attempt to execute with the primary adapter, they might be assuming they are still in fact using the schema\/database that was outlined in the connection information.  That said, I think its important that whatever schema\/database was originally attached to be the adapter's primary context with regard to queries.\n\nSo, is it right to assume that you are talking about Zend_Db_Adapter_Pdo_Mssql::describeTable()?  If so, what benefit do we see when using USE prior to calling our describeTable query?  Is there really no way to get the data about a table in another schema without using USE, for example by crafting a different query?\n\n-ralph",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2009-08-26T07:47:30.000+0000",
                    "updated": "2009-08-26T07:47:30.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33973",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alganet",
                        "name": "alganet",
                        "displayName": "Alexandre Gomes Gaigalas",
                        "active": true
                    },
                    "body": "I did some research, and seems to be pretty simple:\n\nInstead of:\n\nsp_columns @table_name = 'the_table_name', @table_owner = 'the_table_owner'\n\nand\n\nsp_pkeys @table_name = 'the_table_name', @table_owner = 'the_table_owner'\n\nJust prefix it with the catalog name and two dots:\n\ncatalog_name..sp_columns @table_name = 'the_table_name', @table_owner = 'the_table_owner'\ncatalog_name..sp_pkeys @table_name = 'the_table_name', @table_owner = 'the_table_owner'\n\nI tested theses statements in SQL Server 2005. I'm Working on a patch right now...",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alganet",
                        "name": "alganet",
                        "displayName": "Alexandre Gomes Gaigalas",
                        "active": true
                    },
                    "created": "2009-08-26T13:11:17.000+0000",
                    "updated": "2009-08-26T13:11:17.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33975",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alganet",
                        "name": "alganet",
                        "displayName": "Alexandre Gomes Gaigalas",
                        "active": true
                    },
                    "body": "Updating the versions affected",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alganet",
                        "name": "alganet",
                        "displayName": "Alexandre Gomes Gaigalas",
                        "active": true
                    },
                    "created": "2009-08-26T13:27:32.000+0000",
                    "updated": "2009-08-26T13:27:32.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33976",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "body": "excellent, please post patch when you got one, thanks!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ralph",
                        "name": "ralph",
                        "displayName": "Ralph Schindler",
                        "active": true
                    },
                    "created": "2009-08-26T13:37:28.000+0000",
                    "updated": "2009-08-26T13:37:28.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33977",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alganet",
                        "name": "alganet",
                        "displayName": "Alexandre Gomes Gaigalas",
                        "active": true
                    },
                    "body": "Patch attached to the issue. Thanks to [Jayson Reis|http:\/\/framework.zend.com\/issues\/secure\/ViewProfile.jspa?name=jaysonsantos] for the help creating it.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alganet",
                        "name": "alganet",
                        "displayName": "Alexandre Gomes Gaigalas",
                        "active": true
                    },
                    "created": "2009-08-26T14:22:36.000+0000",
                    "updated": "2009-08-26T14:22:36.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33980",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jaysonsantos",
                        "name": "jaysonsantos",
                        "displayName": "Jayson Santos dos Reis",
                        "active": true
                    },
                    "body": "Another good patch which is left a some time is this http:\/\/framework.zend.com\/issues\/browse\/ZF-6666\nI will solve problems between linux and windows drivers.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jaysonsantos",
                        "name": "jaysonsantos",
                        "displayName": "Jayson Santos dos Reis",
                        "active": true
                    },
                    "created": "2009-08-26T14:53:12.000+0000",
                    "updated": "2009-08-26T14:53:12.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34041",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jaysonsantos",
                        "name": "jaysonsantos",
                        "displayName": "Jayson Santos dos Reis",
                        "active": true
                    },
                    "body": "Consider just the second one because the first was missing a \".\" at line 25.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jaysonsantos",
                        "name": "jaysonsantos",
                        "displayName": "Jayson Santos dos Reis",
                        "active": true
                    },
                    "created": "2009-08-28T06:49:14.000+0000",
                    "updated": "2009-08-28T06:49:14.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34046",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jaysonsantos",
                        "name": "jaysonsantos",
                        "displayName": "Jayson Santos dos Reis",
                        "active": true
                    },
                    "body": "Strange, files attachment is not incremental, so, the working patch is the first one.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jaysonsantos",
                        "name": "jaysonsantos",
                        "displayName": "Jayson Santos dos Reis",
                        "active": true
                    },
                    "created": "2009-08-28T07:38:16.000+0000",
                    "updated": "2009-08-28T07:38:16.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6665\/transitions"
}