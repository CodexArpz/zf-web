{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7609",
    "key": "ZF-7609",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_Queue should support serialization"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/2",
                "name": "New Feature",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7609\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cduv",
                "name": "cduv",
                "displayName": "Claude Duvergier",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-08-16T04:59:32.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2009-08-25T17:12:09.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "Zend_Queue",
                "serialization",
                "session"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Serialize a {{Zend_Queue_Adapter_Array}}-{{Zend_Queue}} should be possible.\n\n{{Zend_Queue}} doesn't have a [__sleep() function|http:\/\/www.php.net\/manual\/language.oop5.magic.php#language.oop5.magic.sleep] and {{Zend_Queue_Adapter_Array::__sleep()}} only specify {{_data}} variable.\n\nIf my {{Zend_Queue}} was to be stored in a {{Zend_Session_Namespace}}, with the following code:{code}$sessionNs = new Zend_Session_Namespace('ArrayQueue');\n$sessionNs->queue = new Zend_Queue(\n    'Array', \n    array('name' => 'sessionQueue')\n);\n{code}\nNo problem is to be noticed with {{$sessionNs->queue}} until the next call to the page (for which unserialization runs). Then the following code:{code}$sessionNs = new Zend_Session_Namespace('ArrayQueue');\ncount($sessionNs->queue);{code}would cause a {quote}Fatal error: Call to a member function getName() on a non-object in [...]\\library\\Zend\\Queue\\Adapter\\Array.php on line 145{quote} because {{Zend_Queue_Adapter_Array::_queue}} have not been correctly reset at unserialization."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7609\/watchers",
                "isWatching": false,
                "watchCount": 3
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/10000",
                "name": "Postponed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jplock",
                "name": "jplock",
                "displayName": "Justin Plock",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10320",
                    "id": 10320,
                    "description": "Minor Release",
                    "name": "1.9.0",
                    "userReleaseDate": "31\/Jul\/09",
                    "archived": false,
                    "releaseDate": "2009-07-31",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10421",
                    "id": 10421,
                    "name": "Zend_Queue",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33483",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "body": "Out of curiosity, why do you want to put an instance of Zend_Queue in a session?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "created": "2009-08-16T05:06:00.000+0000",
                    "updated": "2009-08-16T05:06:00.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33485",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=danlo",
                        "name": "danlo",
                        "displayName": "Daniel Lo",
                        "active": true
                    },
                    "body": "A good reason for saving the Zend_Queue, particularly the array queue, is to debug a your application.  Another good reason, is that your application has just received a term signal or you otherwise want to preserve state.  Also unit testing... :)\n\nThere is code in Zend_Queue_Adapter_Array that will do this for you: getData(), setData().\n\n$queue->getAdapter()->getData();  data can also be passed in the options when constructing the Array adapter.\n\n--\n\nI am a bit wary of adding __sleep() to Zend_Queue, because you are then saving connection information to \"session\", which would include the username, host, password.  Also, none of the other adapters can be serialized like Zend_Queue_Adapter_Array.\n\n--\n\nJustin do you have any thoughts?  I can see a good argument here for being able to Serialize an Array queue, however this functionality wouldn't carry over to any of the other adapters.\n\n\n-daniel\n\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=danlo",
                        "name": "danlo",
                        "displayName": "Daniel Lo",
                        "active": true
                    },
                    "created": "2009-08-16T08:43:08.000+0000",
                    "updated": "2009-08-16T08:43:08.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33491",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jplock",
                        "name": "jplock",
                        "displayName": "Justin Plock",
                        "active": true
                    },
                    "body": "I agree.  I think this would work for the Array adapter, but probably not any of the other ones because they deal with external resources.  I think it's cleaner just to not include serialization support at all.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jplock",
                        "name": "jplock",
                        "displayName": "Justin Plock",
                        "active": true
                    },
                    "created": "2009-08-16T10:58:35.000+0000",
                    "updated": "2009-08-16T10:58:35.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33591",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cduv",
                        "name": "cduv",
                        "displayName": "Claude Duvergier",
                        "active": true
                    },
                    "body": "@Dolf Schimmel:\nI run into that \"issue\" when trying to implement some redirection queue for a administration backoffice module.\nThe goal is to resolve the complexity of determine if client should be redirected to \"_\/admin\/add-user_\" after having completing \"_\/admin\/add-company_\" (for example)\nAll \"admin\" actions may add an URL to the common queue and stop worrying about it, changing the \"action-pipeline\".\nThen a common (inherited) method (called by {{Zend_Controller_Action::postDispatch()}}) deals with the Queue: dequeueing, if possible, an URL and redirecting to it.\n\nAs that queue must be persistent between each query I've chosen session.\n\nIn the past I used a simple self-made Queue class (production server is not running PHP 5.3.0 which has {{[SplQueue|http:\/\/www.php.net\/manual\/class.splqueue.php]}}) but as I was code-cleaning the application I wanted to give {{Zend_Queue}} a try (whose Adapter-based approach is quite attractive).\n\nSo my {{Zend_Queue}} is stored in the session but data don't persist.\n\n--\n\n@Daniel Lo:\nAbout {{Zend_Queue_Adapter_Db}}, we could always imagine not to store sensitive informations and add some \"reconnect\" feature (as in {{Zend_Db_Table_Row}}?) but I admit that the main goal of serialization is persistence, which is already offered by databases :)\n\n--\n\n@Justin Plock:\nI understand that, for now, most of {{Zend_Queue_Adapter}} would have few benefits of implementing serialization. But isn't what {{Zend_Queue_Adapter_AdapterInterface::isSupported()}} and {{Zend_Queue_Adapter_AdapterInterface::getCapabilities()}} are for? Dealing with \"implementation\" differences?\nI can't think of any other {{Zend_Queue_Adapter}} that would need serialization but I think building a frame is better than a plain solid wall (that allows extensibility).",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cduv",
                        "name": "cduv",
                        "displayName": "Claude Duvergier",
                        "active": true
                    },
                    "created": "2009-08-18T08:50:23.000+0000",
                    "updated": "2009-08-18T08:50:23.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33820",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=danlo",
                        "name": "danlo",
                        "displayName": "Daniel Lo",
                        "active": true
                    },
                    "body": "@Claude Duvergier\n\nI can see how your request would be an interesting change to the array adapter and I can see how it would be useful.\n\nHowever, I still believe that making Zend_Queue serializ-able is a bad idea.\n\nActiveMQ, Memcacheq, Db, and any probably any other Zend_Queue's added on in the future won't support this feature, making this a kind of \"one\" of solution just for the Array adapter (Justin's argument).\n\nIn regards to your second comment in regards to building a frame, I agree.  This issue came up in: \n\nhttp:\/\/framework.zend.com\/issues\/browse\/ZF-7534, the email to Matthew wasn't included in the ticket (rather lengthy).  The bulk of the issue was how to use the unique features from each adapter, but keep the code generic enough for common usage.\n\nAs a side note, you can also just create your own class an inherit from Zend_Queue class and overload __sleep() to make it serializable.\n\nIf more people comment on this and want this feature, I'll be happy to add it in, but unless there is more community support for a serialiable Zend_Queue, I won't consider this feature until Zend Frameworks 2.0.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=danlo",
                        "name": "danlo",
                        "displayName": "Daniel Lo",
                        "active": true
                    },
                    "created": "2009-08-23T11:35:50.000+0000",
                    "updated": "2009-08-23T11:35:50.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33821",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=danlo",
                        "name": "danlo",
                        "displayName": "Daniel Lo",
                        "active": true
                    },
                    "body": "I dropped this issue from Major & bug to minor priority and a new feature request.\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=danlo",
                        "name": "danlo",
                        "displayName": "Daniel Lo",
                        "active": true
                    },
                    "created": "2009-08-23T11:37:22.000+0000",
                    "updated": "2009-08-23T11:37:22.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/33834",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cduv",
                        "name": "cduv",
                        "displayName": "Claude Duvergier",
                        "active": true
                    },
                    "body": "@Daniel Lo:\nThank you for these informations.\n\nI'll stick with my {{Zend_Queue::__sleep()}} overloading for now and see how that new feature evolves.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=cduv",
                        "name": "cduv",
                        "displayName": "Claude Duvergier",
                        "active": true
                    },
                    "created": "2009-08-24T01:29:52.000+0000",
                    "updated": "2009-08-24T01:29:52.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7609\/transitions"
}