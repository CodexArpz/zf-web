{
    "expand": "html",
    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-341",
    "key": "ZF-341",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend::dump() different charsets support"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-341\/votes",
                "votes": 1,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/resolution\/1",
                "name": "Fixed"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/version\/10021",
                    "id": 10021,
                    "description": "Preview release; DB, Filter, Log",
                    "name": "0.8.0",
                    "userReleaseDate": "21\/Feb\/07",
                    "archived": true,
                    "releaseDate": "2007-02-21",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2007-01-30T16:57:52.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=ixti",
                "name": "ixti",
                "displayName": "Aleksey V. Zapparov",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2006-08-28T03:59:00.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2008-12-19T13:26:46.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I've found an error when was developed utf-8 based project in russian language.\nZend::dump() uses {code}htmlentities($output, ENT_QUOTES);{code} so it's uses default to htmlentities() charset.\nAnd I've added some strings to improve it:\n{code}\n\n    \/\/ ... skipped ...\n\n    \/**\n     * Defines character set used in htmlentities() conversion.\n     * Refer to htmlentities() manual.\n     * @var string\n     *\/\n    static public $dumpCharset = 'UTF-8';\n\n    \/\/ ... skipped ...\n\n    \/**\n     * Debug helper function.  This is a wrapper for var_dump() that adds\n     * the <pre \/> tags, cleans up newlines and indents, and runs\n     * htmlentities() before output.\n     *\n     * @param   mixed   $var The variable to dump.\n     * @param   string  $label (optional) Label.\n     * @param   boolean $echo (optional) Send dump output to browser.\n     * @return  string\n     *\/\n    static public function dump($var, $label=null, $echo=true)\n    {\n        \/\/ format the label\n        $label = ($label===null) ? '' : rtrim($label) . ' ';\n\n        \/\/ var_dump the variable into a buffer and keep the output\n        ob_start();\n        var_dump($var);\n        $output = ob_get_clean();\n\n        \/\/ neaten the newlines and indents\n        $output = preg_replace(\"\/\\]\\=\\>\\n(\\s+)\/m\", \"] => \", $output);\n        if (PHP_SAPI == 'cli') {\n            $output = PHP_EOL . $label\n                    . PHP_EOL . $output \n                    . PHP_EOL;\n        } else {\n            $output = '<pre>'\n                    . $label\n                    . htmlentities($output, ENT_QUOTES, self::$dumpCharset)\n                    . '<\/pre>';\n        }\n\n        if ($echo) {\n            echo($output);\n        }\n        return $output;\n    }\n{code}\n\nso now charset can be easily changed anytime you want:\n{code}\n<?php\n$old_charset = Zend::$dumpCharset;\nZend::$dumpCharset = 'cp-1251';\nZend::dump('some text or opther things');\nZend::$dumpCharset = $old_charset;\n?>\n{code}\n\nThis is the easiest way to fix problem. But right now I think about creating auto-guesting method,\nso Zend::dump will guest charset automatically."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-341\/watchers",
                "isWatching": false,
                "watchCount": 0
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/status\/6",
                "name": "Closed"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                "name": "gavin",
                "displayName": "Gavin",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-339",
                    "issue": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-339",
                    "type": {
                        "name": "Duplicate",
                        "direction": "OUTBOUND",
                        "description": "duplicates"
                    }
                },
                {
                    "issueKey": "ZF-196",
                    "issue": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-196",
                    "type": {
                        "name": "Dependency",
                        "direction": "OUTBOUND",
                        "description": "depends on"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/version\/10001",
                    "id": 10001,
                    "description": "Preview Release",
                    "name": "0.1.5",
                    "userReleaseDate": "11\/Jul\/06",
                    "archived": true,
                    "releaseDate": "2006-07-11",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/component\/10001",
                    "id": 10001,
                    "name": "Zend_Loader",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10773",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "body": "This issue has affected many people.\nUses of both htmlspecialchars() and htmlentities() have the same issue throughout code used in ZF components.\n\nWe need a patch to address all of the occurrences, but the default character set should derive from the same default locale used by the Zend_Locale classes.\n\nAleksey, would you like to contribute a patch?  ",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "created": "2006-09-05T20:05:12.000+0000",
                    "updated": "2006-09-05T20:05:12.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10779",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "body": "I'll do my best to get Zend_Locale ready as soon as possible.\n\nBut there is a small (big?) problem with it :\n\nStandard Locale Data does not include a charset for a region or language.\nSo I would have to do add this additional information per hand.\n\nAnd there are regions and languages where more than 1 charset is avaiable. We would have to decide one charset as \"default\" and give an option\/function to change it or get the avaiable ones...\n\nAdd Comments \/ Additions to my comment\/note pls to the Zend_Locale proposal\/issue tracker",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=thomas",
                        "name": "thomas",
                        "displayName": "Thomas Weidner",
                        "active": true
                    },
                    "created": "2006-09-06T02:54:15.000+0000",
                    "updated": "2006-09-06T02:54:15.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/10780",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=ixti",
                        "name": "ixti",
                        "displayName": "Aleksey V. Zapparov",
                        "active": true
                    },
                    "body": "Gavin Vess, I would like. With great pleasure :)\nJust tell me what to do, and I'll start my work on it :))",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=ixti",
                        "name": "ixti",
                        "displayName": "Aleksey V. Zapparov",
                        "active": true
                    },
                    "created": "2006-09-06T03:07:24.000+0000",
                    "updated": "2006-09-06T03:07:24.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/11423",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "body": "Changing fix version to 0.6.0.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=bkarwin",
                        "name": "bkarwin",
                        "displayName": "Bill Karwin",
                        "active": true
                    },
                    "created": "2006-11-13T15:20:50.000+0000",
                    "updated": "2006-11-13T15:20:50.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/11830",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "body": "Aleksey,\n\nThomas has made superb progress with Zend_Locale.  Would you like to check with Thomas about status for choosing a default locale?\n\nCheers,\nGavin",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "created": "2006-12-08T16:59:35.000+0000",
                    "updated": "2006-12-08T16:59:35.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/11850",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=ixti",
                        "name": "ixti",
                        "displayName": "Aleksey V. Zapparov",
                        "active": true
                    },
                    "body": "Gavin, I can :)) and be proud to help, but I don't clearly understand what I should to do :))\n\nFirst of all, I would like to suggest Thomas to add 'windows-1251' charset to 'ru_R'U and 'ru' and replace 'koi8-r' with 'koi8-u' at 'ru_UA'. And I guess there must be a method to get currently used charset (I haven't found it) so it can be used to autoguess page encoding in Zend::dump() method.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=ixti",
                        "name": "ixti",
                        "displayName": "Aleksey V. Zapparov",
                        "active": true
                    },
                    "created": "2006-12-11T03:00:01.000+0000",
                    "updated": "2006-12-11T03:00:01.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/11851",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=ixti",
                        "name": "ixti",
                        "displayName": "Aleksey V. Zapparov",
                        "active": true
                    },
                    "body": "Sorry if I was unclear. I mean that we have to choose charset based not on accepted charset, but on those which is used in document or sent in headers for example.\n\nSo I' work with Russian projects and using UTF-8 charset... And I didn't found UTF-8 anywhere in Zend_Locale...",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=ixti",
                        "name": "ixti",
                        "displayName": "Aleksey V. Zapparov",
                        "active": true
                    },
                    "created": "2006-12-11T03:03:42.000+0000",
                    "updated": "2006-12-11T03:03:42.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12468",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "body": "We have a very small number of choices for the charset:\n\nhttp:\/\/www.php.net\/htmlspecialchars\n\nSince all the other ZF components hard-code to using UTF-8 with htmlspecialchars() and htmlentities(), we should keep Zend.php consistent.  Also, the dump() function is primarily for ZF developers, not end users of ZF applications.  Thus, the dump() now uses the UTF-8 charset.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=gavin",
                        "name": "gavin",
                        "displayName": "Gavin",
                        "active": true
                    },
                    "created": "2007-01-30T16:57:52.000+0000",
                    "updated": "2007-01-30T16:57:52.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/12470",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=ixti",
                        "name": "ixti",
                        "displayName": "Aleksey V. Zapparov",
                        "active": true
                    },
                    "body": "Yes. I totally agree with you.\nIMHO hard-code to using UTF-8 in projects is a real good solution.\nSo I guess {{htmlentities($output, ENT_QUOTES)}} will be changed to {{htmlentities($output, ENT_QUOTES, 'UTF-8')}} and this will be the solution. And I think UTF-8 has to become developers nomber one charset for it's universality :))",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=ixti",
                        "name": "ixti",
                        "displayName": "Aleksey V. Zapparov",
                        "active": true
                    },
                    "created": "2007-01-31T01:11:46.000+0000",
                    "updated": "2007-01-31T01:11:46.000+0000"
                },
                {
                    "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/comment\/27525",
                    "author": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "body": "Bookkeeping. Closing old issues and assigning them to the person who ultimately resolved the issue.",
                    "updateAuthor": {
                        "self": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/user?username=wil",
                        "name": "wil",
                        "displayName": "Wil Sinclair",
                        "active": true
                    },
                    "created": "2008-12-19T13:26:46.000+0000",
                    "updated": "2008-12-19T13:26:46.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/framework.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-341\/transitions"
}