{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7670",
    "key": "ZF-7670",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Handling \"Unknown Error\" from unregistered soap exceptions"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField",
            "value": {
                "timeestimate": 0,
                "timespent": 60
            }
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/4",
                "name": "Improvement",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7670\/votes",
                "votes": 3,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matt.cockayne@hotmail.co.uk",
                "name": "matt.cockayne@hotmail.co.uk",
                "displayName": "Matt Cockayne",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-08-24T04:09:11.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-11-20T21:37:45.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "When using the soap server in a large multifunctional application and an Exception occurs that is not found in registered Exception types It throw a rather unhelpful \"Unknown Error\".\n\nI have had to edit the Fault method in Zend_Soap_Server. to allow the passing of non registered exceptions. \n\nMy patch is quick and dirty but it may be worth adding an option flag that can be set to allow the use of unregistered Exceptions.\n\nmethod now reads as\n{code}\n    public function fault($fault = null, $code = \"Receiver\")\n    {\n        if ($fault instanceof Exception) {\n            $class = get_class($fault);\n            if (in_array($class, $this->_faultExceptions)) {\n                $message = $fault->getMessage();\n                $eCode   = $fault->getCode();\n                $code    = empty($eCode) ? $code : $eCode;\n            } else {\n                $eCode   = $fault->getCode();\n                $code    = empty($eCode) ? $code : $eCode;\n                $message = 'Unregistered Exception: \"'.$class.'\" '.$fault->getMessage();\n            }\n        } elseif(is_string($fault)) {\n            $message = $fault;\n        } else {\n            $message = 'Unknown error';\n        }\n\n        $allowedFaultModes = array(\n            'VersionMismatch', 'MustUnderstand', 'DataEncodingUnknown',\n            'Sender', 'Receiver', 'Server'\n        );\n        if(!in_array($code, $allowedFaultModes)) {\n            $code = \"Receiver\";\n        }\n\n        return new SoapFault($code, $message);\n    }\n{code}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7670\/watchers",
                "isWatching": false,
                "watchCount": 3
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/worklog\/21927",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7670",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ccorliss",
                        "name": "ccorliss",
                        "displayName": "Curtis Corliss",
                        "active": true
                    },
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ccorliss",
                        "name": "ccorliss",
                        "displayName": "Curtis Corliss",
                        "active": true
                    },
                    "comment": "",
                    "created": "2010-02-28T04:53:34.000+0000",
                    "updated": "2010-02-28T04:53:34.000+0000",
                    "started": "2010-02-28T04:52:00.000+0000",
                    "minutesSpent": 60
                }
            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User"
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/12811",
                    "filename": "Zend_Soap_Server.patch",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ccorliss",
                        "name": "ccorliss",
                        "displayName": "Curtis Corliss",
                        "active": true
                    },
                    "created": "2010-02-28T04:28:17.000+0000",
                    "size": 1088,
                    "mimeType": "text\/plain",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/12811\/Zend_Soap_Server.patch"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10350",
                    "id": 10350,
                    "description": "Mini Release",
                    "name": "1.9.1",
                    "userReleaseDate": "11\/Aug\/09",
                    "archived": false,
                    "releaseDate": "2009-08-11",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10097",
                    "id": 10097,
                    "name": "Zend_Soap_Server",
                    "description": "A server to respond to SOAP requests.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34254",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=beberlei",
                        "name": "beberlei",
                        "displayName": "Benjamin Eberlei",
                        "active": true
                    },
                    "body": "Sounds like a maybe, i'll think about it",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=beberlei",
                        "name": "beberlei",
                        "displayName": "Benjamin Eberlei",
                        "active": true
                    },
                    "created": "2009-09-04T13:25:05.000+0000",
                    "updated": "2009-09-04T13:25:05.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34259",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alienbrain",
                        "name": "alienbrain",
                        "displayName": "Amr Mostafa",
                        "active": true
                    },
                    "body": "Perhaps one simple way of doing that is to check using {{instanceof}} instead of {{get_class}}. That way, if someone wants to allow all exceptions, they can register the base exception class {{Exception}}.\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alienbrain",
                        "name": "alienbrain",
                        "displayName": "Amr Mostafa",
                        "active": true
                    },
                    "created": "2009-09-06T01:11:51.000+0000",
                    "updated": "2009-09-06T01:11:51.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38813",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ccorliss",
                        "name": "ccorliss",
                        "displayName": "Curtis Corliss",
                        "active": true
                    },
                    "body": "I agree with the concept of registering exceptions with the soap server, as opposed to directly returning all exceptions as seen in the description code.  However - I don't think comparing the class name as a string is the best approach.  This can make error handling very cumbersome in more complex applications.\r\n\r\nI have attached a patch to check if the thrown exception is an instance of a registered exception.  ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ccorliss",
                        "name": "ccorliss",
                        "displayName": "Curtis Corliss",
                        "active": true
                    },
                    "created": "2010-02-28T04:28:19.000+0000",
                    "updated": "2010-02-28T04:43:41.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38814",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ccorliss",
                        "name": "ccorliss",
                        "displayName": "Curtis Corliss",
                        "active": true
                    },
                    "body": "Can you review this patch?  I don't have commit privileges yet. ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=ccorliss",
                        "name": "ccorliss",
                        "displayName": "Curtis Corliss",
                        "active": true
                    },
                    "created": "2010-02-28T04:48:20.000+0000",
                    "updated": "2010-02-28T04:48:20.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/39385",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=niterain",
                        "name": "niterain",
                        "displayName": "Levi Stanley",
                        "active": true
                    },
                    "body": "Interesting, I was getting this error last month, ended up just using Zend's autodiscovery, and using php's soap server directly instead.  Since it gave more useful information.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=niterain",
                        "name": "niterain",
                        "displayName": "Levi Stanley",
                        "active": true
                    },
                    "created": "2010-03-19T06:48:13.000+0000",
                    "updated": "2010-03-19T06:48:13.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-7670\/transitions"
}