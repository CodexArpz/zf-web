{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6909",
    "key": "ZF-6909",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Disabling a form element should prevent it from accepting a new value"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6909\/votes",
                "votes": 2,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=philbrown",
                "name": "philbrown",
                "displayName": "Phil Brown",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-06-04T19:43:08.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-02-25T19:19:21.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "Zend_Form",
                "Zend_Form_Element",
                "disabled"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "If a Zend Form element is disabled (server-side), it should not accept a value, even if one is posted.\n\nFor example, given the following form with \"text\" element \"my_text_field\"\n{code}\n$form->my_text_field->disabled = 'disabled';\nif ($form->isValid($_POST)) {\n    \/\/ ...\n}\n{code}\n\nIf a value is sent for \"my_text_field\" in $_POST, the element's value is still updated via the Zend_Form::isValid() call.\n\nI would consider this sort of validation to be on par with a \"select\" element's default ability to only accept values from its \"option\" list.\n\nBefore you ask \"how is a value submitted if the field is disabled\", consider how easy client-side manipulation is.\n\nCheers"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/4",
                "name": "Minor"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6909\/watchers",
                "isWatching": false,
                "watchCount": 4
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-10056",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10056",
                    "type": {
                        "name": "Related",
                        "direction": "OUTBOUND",
                        "description": "is related to"
                    }
                },
                {
                    "issueKey": "ZF-12020",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-12020",
                    "type": {
                        "name": "Related",
                        "direction": "INBOUND",
                        "description": "is related to"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10330",
                    "id": 10330,
                    "description": "Mini Release",
                    "name": "1.8.2",
                    "userReleaseDate": "27\/May\/09",
                    "archived": false,
                    "releaseDate": "2009-05-27",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10029",
                    "id": 10029,
                    "name": "Zend_Form",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31602",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "body": "Against what data would you Zend_Form want to check if it was updated?\n\n{quote}Before you ask \"how is a value submitted if the field is disabled\", consider how easy client-side manipulation is.{quote}\n\nThough that is true, 'disabled' fields are occasionally also used to be changed by javascript, so client-side \"manipulation\" cannot automatically be assumed.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=freak",
                        "name": "freak",
                        "displayName": "Dolf Schimmel (Freeaqingme)",
                        "active": true
                    },
                    "created": "2009-06-04T19:58:02.000+0000",
                    "updated": "2009-06-04T19:58:02.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31603",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=philbrown",
                        "name": "philbrown",
                        "displayName": "Phil Brown",
                        "active": true
                    },
                    "body": "bq. Against what data would you Zend_Form want to check if it was updated? \n\nIt wouldn't have to. What I would propose is some checking in Zend_Form_Element::setValue() or Zend_Form_Element::isValid().\n\nbq. changed by javascript\n\n\"select\" elements may also have their option list altered client-side. I'd consider handling disabled fields in the same ballpark as handling selects in regards to the submitted data they will or will not accept by default.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=philbrown",
                        "name": "philbrown",
                        "displayName": "Phil Brown",
                        "active": true
                    },
                    "created": "2009-06-04T20:06:33.000+0000",
                    "updated": "2009-06-04T20:06:33.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/31612",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Simply mark the element as ignored in addition to disabled; Zend_Form will then not return its value when you request it, nor will it attempt to validate it (which means the value will not be overwritten).",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2009-06-05T05:11:20.000+0000",
                    "updated": "2009-06-05T05:11:20.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/34985",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=philbrown",
                        "name": "philbrown",
                        "displayName": "Phil Brown",
                        "active": true
                    },
                    "body": "Further on this, if the element is disabled, when validated its value is set to null \/ empty as disabled form fields are not included in the submission. Setting the ignore flag appears to do nothing as I can't see it used in either Zend_Form::isValid() or Zend_Form_Element::isValid().",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=philbrown",
                        "name": "philbrown",
                        "displayName": "Phil Brown",
                        "active": true
                    },
                    "created": "2009-09-29T19:20:27.000+0000",
                    "updated": "2009-09-29T19:20:27.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/38086",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=duael",
                        "name": "duael",
                        "displayName": "Edouard Cunibil",
                        "active": true
                    },
                    "body": "I have the same issue than Phil Brown. \r\nI use disabled fields to show contextual data but when the isValid method is called, each one is cleared. I don't really understand the purpose of the current behavior so I hope it could be changed.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=duael",
                        "name": "duael",
                        "displayName": "Edouard Cunibil",
                        "active": true
                    },
                    "created": "2010-01-28T07:26:44.000+0000",
                    "updated": "2010-01-28T07:26:44.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/39114",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alab",
                        "name": "alab",
                        "displayName": "Christian Albrecht",
                        "active": true
                    },
                    "body": "Matthew, while your Statement is true for getValue(s), in the current implementation ZF-ver-1.10.2, ignored is not honored when validating form data.\r\n\r\nWhat would be the expected behaviour when validating an ignored Element?\r\n\r\n1.) Validate true, but do not setValue,\r\n2.) Validate false and do not setValue\r\n\r\nWhen 1.) some might think posted Data is save to process further.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=alab",
                        "name": "alab",
                        "displayName": "Christian Albrecht",
                        "active": true
                    },
                    "created": "2010-03-09T02:30:09.000+0000",
                    "updated": "2010-03-09T02:30:09.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/39521",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=misbehavens",
                        "name": "misbehavens",
                        "displayName": "Andrew Havens",
                        "active": true
                    },
                    "body": "I have been running into the same issue for a while, but I think I just found a solution: use {{isValidPartial()}} instead of {{isValid()}}.\r\n\r\n{noformat}\r\n$form->populate($originalData);\r\n$form->my_text_field->disabled = 'disabled';\r\nif ($form->isValid($_POST)) {\r\n    \/\/form is not valid\r\n    \/\/since my_text_field is disabled, it doesn't get submitted in the request\r\n    \/\/isValid() will clear the disabled field value, so now we have to repopulate the field\r\n    $form->my_text_field->value($originalData['my_text_field']);\r\n    $this->view->form = $form;\r\n    return;\r\n}\r\n\r\n\/\/ if the form is valid, and we call $form->getValues() to save the data, our disabled field value has been cleared!\r\n\r\n\r\n\/\/...however, if we use isValidPartial()...\r\n\r\n$form->populate($originalData);\r\n$form->my_text_field->disabled = 'disabled';\r\nif ($form->isValidPartial($_POST)) {\r\n    \/\/isValidPartial() will NOT clear the disabled field value, so we don't have to repopulate the field!!!\r\n    $this->view->form = $form;\r\n    return;\r\n}\r\n\r\n\/\/ now if we call $form->getValues(), our data is as we expect\r\n{noformat} \r\n\r\nNow that I have found a solution, I am far less frustrated, although I would agree that it doesn't seem right that {{isValid()}} would clear a disabled field's value.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=misbehavens",
                        "name": "misbehavens",
                        "displayName": "Andrew Havens",
                        "active": true
                    },
                    "created": "2010-03-24T11:21:04.000+0000",
                    "updated": "2010-03-24T11:21:04.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/39522",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=misbehavens",
                        "name": "misbehavens",
                        "displayName": "Andrew Havens",
                        "active": true
                    },
                    "body": "Oops, my code sample was supposed to say\r\n\r\n{{if (!$form->isValid($_POST)) { \/\/not valid}}\r\n\r\nnot\r\n\r\n{{if ($form->isValid($_POST)) {}}\r\n\r\nand I can't figure out how to edit my comment. Sorry.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=misbehavens",
                        "name": "misbehavens",
                        "displayName": "Andrew Havens",
                        "active": true
                    },
                    "created": "2010-03-24T11:25:25.000+0000",
                    "updated": "2010-03-24T11:25:25.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/49557",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dgray90",
                        "name": "dgray90",
                        "displayName": "Derek Gray",
                        "active": true
                    },
                    "body": "In response to Matt:\r\n\r\n\"Simply mark the element as ignored in addition to disabled; Zend_Form will then not return its value when you request it, nor will it attempt to validate it (which means the value will not be overwritten).\"\r\n\r\nIsValid does not appear to ignore the elements that are flagged to be ignored. Why is this? You clearly think this is how it is supposed to work (and I agree tremendously) but that is not how it behaves.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dgray90",
                        "name": "dgray90",
                        "displayName": "Derek Gray",
                        "active": true
                    },
                    "created": "2012-01-23T17:52:21.000+0000",
                    "updated": "2012-01-23T17:52:21.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-6909\/transitions"
}