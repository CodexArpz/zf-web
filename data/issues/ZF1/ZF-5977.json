{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5977",
    "key": "ZF-5977",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "setValue not correctly setting value in Zend_Form_Element_Text"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5977\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/5",
                "name": "Cannot Reproduce"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2009-03-09T13:18:54.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=noondaysun",
                "name": "noondaysun",
                "displayName": "Feighen Oosterbroek",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2009-03-09T12:41:28.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2010-06-28T17:40:23.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "Zend_Form",
                "Zend_Form_Element_Text",
                "setValue"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Ok I'm not too sure what type of details you need so I will provide\ncode snippets for you to look at:\n\nmulti-page form:\n$val isset from a foreach loop from the following query:\n$select = $fabrics->select()->setIntegrityCheck(false)\n\t\t->from(array(\"f\"=>\"fabrics\"), array(\"f.*\"))\n\t\t->joinLeft(array(\"fft\"=>\"fabrics_fabrictypes\"), \"f.id=fft.fabric_id\", array())\n\t\t->joinLeft(array(\"ft\"=>\"fabrictypes\"), \"ft.id=fft.fabrictype_id\", array(\"ft.name as type\"))\n\t\t->joinLeft(array('fpt'=>'fabrics_producttypes'), 'f.id=fpt.fabric_id', array('fpt.price'))\n\t\t->where($where)\n\t\t->order(array(\"ft.name desc\", \"f.name asc\"));\n$val->price is set to the value of 52\n\n1st method\n$text = new Zend_Form_Element_Text('pr_'.$val->id);\n$text->setOptions(array('readOnly'=>true, 'label'=>'Price'));\n$text->setValue($val->price);\n$fabs->addElement($text, 'pr_'.$val->id);\nthe outputted form segment is: \n2nd method\n$fabs->addElement('text', 'pr_'.$val->id, array('label'=>'Price', 'readOnly'=>true, 'class'=>'transparent'));\n$this->getElement('pr_'.$val->id)->setValue($val->price);\n\n<dt><label for=\"fabs-pr_1\" class=\"optional\">Price<\/label><\/dt>\n<dd>\n<input type=\"text\" name=\"fabs[pr_1]\" id=\"fabs-pr_1\" value=\"\" readOnly=\"1\" \/><\/dd>\n\nI have tried different values for the name\nusing:  $text->setOptions(array('value'=>$val->price));\n\nI don't know what else to try.\n\nDefinitely not an issue with the variable not being set.:\n\n$text = new Zend_Form_Element_Text('pr_'.$val->id);\n$text->setOptions(array('readOnly'=>true, 'label'=>'Price'));\nprint(\"<pre style='font-family:verdana;font-size:13'>val->price before:\");\nprint_r($val->price);\nprint(\"<\/pre>\");\n$text->setValue(number_format($val->price, 2));\nprint(\"<pre style='font-family:verdana;font-size:13'>val->price after:\");\nprint_r($val->price);\nprint(\"<\/pre>\");\n$fabs->addElement($text, 'pr_'.$val->id);\n\nI have attached a screen shot from my browser to show that the variables are indeed set:\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5977\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                "name": "matthew",
                "displayName": "Matthew Weier O'Phinney",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/13176",
                    "filename": "screenshot-2.jpg",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jahra",
                        "name": "jahra",
                        "displayName": "jah",
                        "active": true
                    },
                    "created": "2010-06-28T17:40:21.000+0000",
                    "size": 108639,
                    "mimeType": "image\/jpeg",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/13176\/screenshot-2.jpg",
                    "thumbnail": "http:\/\/fw02.zend.com\/issues\/secure\/thumbnail\/13176\/_thumb_13176.png"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/11791",
                    "filename": "Screenshot.png",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=noondaysun",
                        "name": "noondaysun",
                        "displayName": "Feighen Oosterbroek",
                        "active": true
                    },
                    "created": "2009-03-09T13:39:42.000+0000",
                    "size": 181271,
                    "mimeType": "image\/png",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/11791\/Screenshot.png",
                    "thumbnail": "http:\/\/fw02.zend.com\/issues\/secure\/thumbnail\/11791\/_thumb_11791.png"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10290",
                    "id": 10290,
                    "description": "Mini Release",
                    "name": "1.7.6",
                    "userReleaseDate": "02\/Mar\/09",
                    "archived": false,
                    "releaseDate": "2009-03-02",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10029",
                    "id": 10029,
                    "name": "Zend_Form",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29346",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "setValue() locally works exactly as intended -- I put in a value, it gets rendered in the corresponding <input> tag. My suspicion is that $val->price is not holding the value you think it is.\n\nI'm closing this issue as I'm unable to reproduce; please open this on one of the mailing lists before re-opening this ticket to see if you can get independent verification of the issue.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2009-03-09T12:54:45.000+0000",
                    "updated": "2009-03-09T12:54:45.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29347",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=noondaysun",
                        "name": "noondaysun",
                        "displayName": "Feighen Oosterbroek",
                        "active": true
                    },
                    "body": "Screen shot attached and issue updated",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=noondaysun",
                        "name": "noondaysun",
                        "displayName": "Feighen Oosterbroek",
                        "active": true
                    },
                    "created": "2009-03-09T13:38:26.000+0000",
                    "updated": "2009-03-09T13:38:26.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29348",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=noondaysun",
                        "name": "noondaysun",
                        "displayName": "Feighen Oosterbroek",
                        "active": true
                    },
                    "body": "Screen shot referred to in the Bug",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=noondaysun",
                        "name": "noondaysun",
                        "displayName": "Feighen Oosterbroek",
                        "active": true
                    },
                    "created": "2009-03-09T13:39:47.000+0000",
                    "updated": "2009-03-09T13:39:47.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/29352",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "body": "Okay, the simplest case possible:\n{code}\n$element = new Zend_Form_Element_Text('foo');\n$element->setValue('bar');\necho $element->render(new Zend_View);\n{code}\n\nresults in the following HTML:\n{code}\n<dt id=\"foo-label\">&nbsp;<\/dt>\n<dd id=\"foo-element\">\n<input type=\"text\" name=\"foo\" id=\"foo\" value=\"bar\"><\/dd>\n{code}\n\nsetValue() is clearly working to expectations. You need to boil your code down to the exact point that it fails -- which means removing dependencies outside the realm of the component (such as database calls). If the problem goes away, then it's in one of your dependencies. If it remains, then paste that in so we can get independent verification.\n\nAs such, this bug remains closed, as I cannot reproduce it with the simplest use case: using setValue().",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=matthew",
                        "name": "matthew",
                        "displayName": "Matthew Weier O'Phinney",
                        "active": true
                    },
                    "created": "2009-03-09T16:14:22.000+0000",
                    "updated": "2009-03-09T16:14:22.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/41234",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jahra",
                        "name": "jahra",
                        "displayName": "jah",
                        "active": true
                    },
                    "body": "I've managed to reproduce this issue; screenshot-2 shows the rendering of a form with html input elements having attributes setValue and setErrors.  \nI can't post the code here at this time, but I've got a User object which has an array containing form instances and when the User is serialized to session storage User::__sleep extracts the values, errors and metadata from the forms and stores that instead of serialized forms. User::__wakeup is where the process is reversed: instantiate the forms and the populate them from the unserialized form data - I iterate over the form elements and call their setValue and setErrors methods.  I'll try and post some code when I have the time.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=jahra",
                        "name": "jahra",
                        "displayName": "jah",
                        "active": true
                    },
                    "created": "2010-06-28T17:40:23.000+0000",
                    "updated": "2010-06-28T17:40:23.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-5977\/transitions"
}