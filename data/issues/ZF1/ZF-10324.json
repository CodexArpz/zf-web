{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10324",
    "key": "ZF-10324",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Additional parameters with ZendAMF-call result in Uncaught exception 'Zend_Amf_Exception' with message 'Undefined string reference:...'"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10324\/votes",
                "votes": 3,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=joeyvandijk",
                "name": "joeyvandijk",
                "displayName": "Joey van Dijk",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2010-08-16T12:05:00.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-11-20T21:38:00.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "Today I found out that ZendAmf does *not* support the use of *more than 1* parameters when using\r\n\r\n     *NetConnection.call('Service.function',responder,new VOPost(), new VOFile());*\r\n\r\nBecause when I use a customVO like:\r\n\r\n{code:title=VOFile.php|borderStyle=solid}\r\n<?php\r\nclass VOFile\r\n{\r\n\tpublic $_explicitType = 'vo.medium.VOFile';\r\n\r\n\tpublic $data;\r\n\tpublic $name;\/\/ + extension\r\n\tpublic $compressed;\r\n\tpublic $type;\r\n\r\n\tpublic function VOFile($name,$data,$type,$compressed = false)\r\n\t{\r\n\t\t$this->name = $name;\r\n\t\t$this->data = $data;\r\n\t\t$this->type = $type;\r\n\t\t$this->compressed = (bool)$compressed;\r\n\t}\r\n\r\n\tpublic function getASClassName()\r\n\t{\r\n\t\treturn $this->$_explicitType;\r\n\t}\r\n}\r\n?>\r\n{code}\r\n\r\nits giving me an error when I send this VO from Flash (with jpg inside data-property) to ZendAMF.\r\n\r\n{code:title=VOFile.as|borderStyle=solid}\r\npackage\r\n{\r\n    import flash.net.registerClassAlias;\r\n    import flash.utils.ByteArray;\r\n    [RemoteClass(alias=\"vo.medium.VOFile\")]\r\n \r\n\tpublic class VOFile\r\n\t{\r\n\t   public var data:ByteArray;\r\n\t   public var name:String;\r\n\t   public var type:String;\r\n\t   public var compressed:Boolean;\t   \r\n\t\t\r\n\t   public function VOFile(){}\r\n\t\t\r\n\t   public static function register():void\r\n\t   {      \r\n\t      registerClassAlias(\"vo.medium.VOFile\", VOFile);\r\n\t   }        \r\n\t}\r\n}\r\n{code}\r\nThe identifiers are exactly the same, but I am getting the following error:\r\n{noformat} \r\n[16-Aug-2010 20:14:27] PHP Fatal error:  Uncaught exception 'Zend_Amf_Exception' with message 'Undefined string reference: 6' in \/Users\/gebruiker\/work\/php\/PH29\/frameworks\/Zend\/Amf\/Parse\/Amf3\/Deserializer.php:186\r\nStack trace:\r\n#0 \/Users\/gebruiker\/work\/php\/PH29\/frameworks\/Zend\/Amf\/Parse\/Amf3\/Deserializer.php(372): Zend_Amf_Parse_Amf3_Deserializer->readString()\r\n#1 \/Users\/gebruiker\/work\/php\/PH29\/frameworks\/Zend\/Amf\/Parse\/Amf3\/Deserializer.php(103): Zend_Amf_Parse_Amf3_Deserializer->readObject()\r\n#2 \/Users\/gebruiker\/work\/php\/PH29\/frameworks\/Zend\/Amf\/Parse\/Amf0\/Deserializer.php(293): Zend_Amf_Parse_Amf3_Deserializer->readTypeMarker()\r\n#3 \/Users\/gebruiker\/work\/php\/PH29\/frameworks\/Zend\/Amf\/Parse\/Amf0\/Deserializer.php(130): Zend_Amf_Parse_Amf0_Deserializer->readAmf3TypeMarker()\r\n#4 \/Users\/gebruiker\/work\/php\/PH29\/frameworks\/Zend\/Amf\/Parse\/Amf0\/Deserializer.php(217): Zend_Amf_Parse_Amf0_Deserializer->readTypeMarker()\r\n#5 \/Users\/gebruiker\/work\/php\/PH29\/frameworks\/Zend\/Amf\/Parse\/Amf0\/Deserializer.php(106): Zend_Amf_Parse_Amf0_Deserializer->readArray()\r\n#6 \/Users\/gebru in \/Users\/gebruiker\/work\/php\/PH29\/frameworks\/Zend\/Amf\/Request.php on line 176\r\n{noformat} \r\nWhich only occurs when I am using two simple custom made VOs (like above) and send them as 2 parameters (like shown above) with my NetConnection.call. If I remove the second parameter I am getting *no* exception\/error!!\r\nAs you can see I am using pure Actionscript 3 projects (no flex) and the latest version of 1.10.7. \r\nAll classes are correctly imported (require_once) and mapped (recognized because 1 parameter with same VO works). \r\n\r\nI am still not sure whats the root cause: *mapping* the VOs or an *deserialization* error in ZendAMF? I am using the same FP10 compiled (Flex SDK3.5a) swf-file from which all above mentioned calls are made without changes to class mappings or paths.\r\nThe strange thing is that the process is not even arriving at my Service.function in PHP\/ZendAMF because when I log (with Zend_Log) I am not seeing anything happening even when I am uncommenting all my code except the return-value.\r\n\r\nSo I have not found posts online or here at zend.com about this kind of issues and I would like to know what could be wrong with adding parameters to AMF-function calls. Let me know if I need to provide more information.\r\n\r\n"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/2",
                "name": "Critical"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10324\/watchers",
                "isWatching": false,
                "watchCount": 3
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/1",
                "name": "Open"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User"
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [

            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10480",
                    "id": 10480,
                    "description": "Mini Release",
                    "name": "1.10.7",
                    "userReleaseDate": "28\/Jul\/10",
                    "archived": false,
                    "releaseDate": "2010-07-28",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10350",
                    "id": 10350,
                    "name": "Zend_Amf",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/42100",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=joeyvandijk",
                        "name": "joeyvandijk",
                        "displayName": "Joey van Dijk",
                        "active": true
                    },
                    "body": "Further research shows me that it gives these errors only when two typed objects are given as parameters. Strings and integers are allowed even with one custom VO but not with multiple custom VOs.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=joeyvandijk",
                        "name": "joeyvandijk",
                        "displayName": "Joey van Dijk",
                        "active": true
                    },
                    "created": "2010-08-25T01:49:49.000+0000",
                    "updated": "2010-08-25T01:49:49.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-10324\/transitions"
}