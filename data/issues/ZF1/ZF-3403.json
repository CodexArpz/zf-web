{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3403",
    "key": "ZF-3403",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Implements plugin system based on Zend_Controller_Plugin"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/2",
                "name": "New Feature",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3403\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2008-10-31T13:18:20.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=diegotremper",
                "name": "diegotremper",
                "displayName": "Diego Tremper",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2008-06-05T21:33:03.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2008-10-31T13:18:20.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels"
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "I suggest an implementation of the plugin system to allows user code to be called when certain events occur in the soap handle process lifetime. \t\nSimilarly, the package Zend_Controller_Plugin\n\nExample code:\n\n\nFile: client.php\n{code}\n<?php\n\n$wsdl = 'http:\/\/'  .$_SERVER['HTTP_HOST'] . str_replace('client', 'server', $_SERVER['SCRIPT_NAME']) . '?wsdl';\n\n$client = new SoapClient($wsdl);\n\ntry {\n\tvar_dump($client->example());\n} catch (Exception $e) {\n\techo $e->getMessage() . \"\\n\";\n\techo $e->getTraceAsString() . \"\\n\";\n}\n{code}\n\nFile: MyPlugin.php\n{code}\n<?php\n\nrequire_once 'Zend\/Soap\/Server\/Plugin\/Abstract.php'; \nrequire_once 'Zend\/Soap\/Server\/Plugin\/Abstract.php';\nrequire_once 'Zend\/Log\/Writer\/Stream.php';\nrequire_once 'Zend\/Log.php';\n\nclass MyPlugin extends Zend_Soap_Server_Plugin_Abstract {\n\t\n\tprivate $_logger;\n\tprivate $start;\n\tprivate $end;\n\t\n\tpublic function __construct()\n\t{\n\t\t$writer = new Zend_Log_Writer_Stream(dirname(__FILE__) .DIRECTORY_SEPARATOR . 'service.log');\n\t\t$logger = new Zend_Log();\n\t\t$logger->addWriter($writer);\n\t\t$this->_logger = $logger;\n\t}\n\t\n    public function preHandle($request)\n    {\n    \t$this->start = microtime();\n    }\n\n    public function postHandle($response)\n    {\n    }\n    \n    public function notifyFault($code, $message)\n    {\n    \t$this->_logger->err('error on response: code=' . $code . ', message=' . $message);\n    }\n    \n    public function __destruct()\n    {\n    \t$this->end = microtime();\n    \t$this->_logger->info('elapsed time: ' . ($this->end - $this->start));\n    }\n}\n\n{code}\n\n\nUse case\nFile: server.php\n{code}\n<?php\n\nrequire \"Zend\/Soap\/AutoDiscover.php\";\nrequire 'Zend\/Soap\/Server.php';\n\nrequire dirname(__FILE__).DIRECTORY_SEPARATOR.'MyPlugin.php';\n\n$wsdl = 'http:\/\/'  .$_SERVER['HTTP_HOST'] . $_SERVER['SCRIPT_NAME'] . '?wsdl';\n\nclass MyFacade {\n\n\t\/**\n\t * example method\n\t *\n\t * @return boolean\n\t *\/\n\tpublic function example() {\n\t\treturn true;\n\t}\n\t\n}\n\nif (array_key_exists('wsdl', $_GET)) {\n\t$server = new Zend_Soap_AutoDiscover();\n\t$server->setClass('MyFacade');\n\t$server->handle();\n} else {\n\t$soap = new Zend_Soap_Server($wsdl);\n\t$soap->setReturnResponse(true);\n\t$soap->setClass('MyFacade');\n\t$soap->registerPlugin(new MyPlugin());\n\techo $soap->handle();\n}\n{code}"
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/6",
                "name": "N\/A"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3403\/watchers",
                "isWatching": false,
                "watchCount": 1
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [

            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=beberlei",
                "name": "beberlei",
                "displayName": "Benjamin Eberlei",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [

            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/11321",
                    "filename": "Soap.tar.gz",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=diegotremper",
                        "name": "diegotremper",
                        "displayName": "Diego Tremper",
                        "active": true
                    },
                    "created": "2008-06-05T21:39:21.000+0000",
                    "size": 184320,
                    "mimeType": "application\/gzip",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/11321\/Soap.tar.gz"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [

            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10097",
                    "id": 10097,
                    "name": "Zend_Soap_Server",
                    "description": "A server to respond to SOAP requests.",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/22153",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=diegotremper",
                        "name": "diegotremper",
                        "displayName": "Diego Tremper",
                        "active": true
                    },
                    "body": "I fix this issue based on review 9619.\nhttp:\/\/framework.zend.com\/svn\/framework\/standard\/incubator\/library\/Zend\/Soap\/",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=diegotremper",
                        "name": "diegotremper",
                        "displayName": "Diego Tremper",
                        "active": true
                    },
                    "created": "2008-06-05T21:39:22.000+0000",
                    "updated": "2008-06-05T21:39:22.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/25554",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=beberlei",
                        "name": "beberlei",
                        "displayName": "Benjamin Eberlei",
                        "active": true
                    },
                    "body": "This is a great feature, but although i have use cases for it myself, its overall usability is very limited and its easy to extend Zend_Soap_Server to provide this, if you need it.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=beberlei",
                        "name": "beberlei",
                        "displayName": "Benjamin Eberlei",
                        "active": true
                    },
                    "created": "2008-10-31T13:18:19.000+0000",
                    "updated": "2008-10-31T13:18:19.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-3403\/transitions"
}