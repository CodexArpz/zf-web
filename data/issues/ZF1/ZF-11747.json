{
    "expand": "html",
    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11747",
    "key": "ZF-11747",
    "fields": {
        "summary": {
            "name": "summary",
            "type": "java.lang.String",
            "value": "Zend_View_Helper_Form omits closing tag when no content is passed"
        },
        "timetracking": {
            "name": "timetracking",
            "type": "com.atlassian.jira.issue.fields.TimeTrackingSystemField"
        },
        "issuetype": {
            "name": "issuetype",
            "type": "com.atlassian.jira.issue.issuetype.IssueType",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issueType\/1",
                "name": "Bug",
                "subtask": false
            }
        },
        "votes": {
            "name": "votes",
            "type": "com.atlassian.jira.issue.fields.VotesSystemField",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11747\/votes",
                "votes": 0,
                "hasVoted": false
            }
        },
        "security": {
            "name": "security",
            "type": "com.atlassian.jira.issue.security.IssueSecurityLevel"
        },
        "resolution": {
            "name": "resolution",
            "type": "com.atlassian.jira.issue.resolution.Resolution",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/resolution\/6",
                "name": "Not an Issue"
            }
        },
        "fixVersions": {
            "name": "fixVersions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10981",
                    "id": 10981,
                    "description": "Mini Release",
                    "name": "1.11.11",
                    "userReleaseDate": "29\/Sep\/11",
                    "archived": false,
                    "releaseDate": "2011-09-29",
                    "released": true
                }
            ]
        },
        "resolutiondate": {
            "name": "resolutiondate",
            "type": "java.util.Date",
            "value": "2011-10-01T23:32:38.000+0000"
        },
        "reporter": {
            "name": "reporter",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=codercrush",
                "name": "codercrush",
                "displayName": "Rocky Koch",
                "active": true
            }
        },
        "created": {
            "name": "created",
            "type": "java.util.Date",
            "value": "2011-09-18T00:16:41.000+0000"
        },
        "updated": {
            "name": "updated",
            "type": "java.util.Date",
            "value": "2012-04-24T07:34:59.000+0000"
        },
        "customfield_10041": {
            "name": "Tags",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
            "value": [
                "Zend_View_Helper_Form"
            ]
        },
        "description": {
            "name": "description",
            "type": "java.lang.String",
            "value": "The closing form tag is set only if the content is passed, so unlike false."
        },
        "priority": {
            "name": "priority",
            "type": "com.atlassian.jira.issue.priority.Priority",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/priority\/3",
                "name": "Major"
            }
        },
        "duedate": {
            "name": "duedate",
            "type": "java.util.Date"
        },
        "customfield_10022": {
            "name": "Fix Version Priority",
            "type": "com.atlassian.jira.plugin.system.customfieldtypes:select"
        },
        "watcher": {
            "name": "watcher",
            "type": "watcher",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11747\/watchers",
                "isWatching": false,
                "watchCount": 4
            }
        },
        "worklog": {
            "name": "worklog",
            "type": "worklog",
            "value": [

            ]
        },
        "status": {
            "name": "status",
            "type": "com.atlassian.jira.issue.status.Status",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/status\/5",
                "name": "Resolved"
            }
        },
        "labels": {
            "name": "labels",
            "type": "com.atlassian.jira.issue.label.Label",
            "value": [
                "zf-caretaker-adamlundrigan"
            ]
        },
        "assignee": {
            "name": "assignee",
            "type": "com.opensymphony.user.User",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                "name": "adamlundrigan",
                "displayName": "Adam Lundrigan",
                "active": true
            }
        },
        "links": {
            "name": "links",
            "type": "issuelinks",
            "value": [
                {
                    "issueKey": "ZF-11800",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11800",
                    "type": {
                        "name": "Related",
                        "direction": "INBOUND",
                        "description": "is related to"
                    }
                },
                {
                    "issueKey": "ZF-12166",
                    "issue": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-12166",
                    "type": {
                        "name": "Duplicate",
                        "direction": "INBOUND",
                        "description": "is duplicated by"
                    }
                }
            ]
        },
        "attachment": {
            "name": "attachment",
            "type": "attachment",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/14670",
                    "filename": "ZF-11747_fixedfiles.tar.gz",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "created": "2011-10-04T12:19:20.000+0000",
                    "size": 2020,
                    "mimeType": "application\/gzip",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/14670\/ZF-11747_fixedfiles.tar.gz"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/attachment\/14669",
                    "filename": "ZF-11747_revert.patch",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "created": "2011-10-04T12:11:16.000+0000",
                    "size": 1396,
                    "mimeType": "text\/x-patch",
                    "content": "http:\/\/fw02.zend.com\/issues\/secure\/attachment\/14669\/ZF-11747_revert.patch"
                }
            ]
        },
        "sub-tasks": {
            "name": "sub-tasks",
            "type": "issuelinks",
            "value": [

            ]
        },
        "versions": {
            "name": "versions",
            "type": "com.atlassian.jira.project.version.Version",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/version\/10980",
                    "id": 10980,
                    "description": "Mini Release",
                    "name": "1.11.10",
                    "userReleaseDate": "04\/Aug\/11",
                    "archived": false,
                    "releaseDate": "2011-08-04",
                    "released": true
                }
            ]
        },
        "project": {
            "name": "project",
            "type": "com.atlassian.jira.project.Project",
            "value": {
                "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/project\/ZF",
                "key": "ZF",
                "name": "Zend Framework",
                "roles": {

                }
            }
        },
        "components": {
            "name": "components",
            "type": "com.atlassian.jira.bc.project.component.ProjectComponent",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/component\/10026",
                    "id": 10026,
                    "name": "Zend_View",
                    "description": "View portion of the ZF MVC",
                    "isAssigneeTypeValid": false
                }
            ]
        },
        "comment": {
            "name": "comment",
            "type": "com.atlassian.jira.issue.fields.CommentSystemField",
            "value": [
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48486",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "body": "Reproducing Unit Test:\r\n{code}\r\nIndex: Zend\/View\/Helper\/FormTest.php\r\n===================================================================\r\n--- Zend\/View\/Helper\/FormTest.php       (revision 24462)\r\n+++ Zend\/View\/Helper\/FormTest.php       (working copy)\r\n@@ -167,6 +167,19 @@\r\n         $form = $this->helper->form('FormName', array('action' => '\/foo', 'method' => 'get'));\r\n         $this->assertNotRegexp('\/<form[^>]*(name=\"FormName\")\/', $form);\r\n     }\r\n+\r\n+    \/**\r\n+     * @group ZF-11747\r\n+     *\/\r\n+    public function testClosingTagIsPrintedWhenContentIsOmitted()\r\n+    {\r\n+        $this->view->doctype('XHTML11');\r\n+        $form = $this->helper->form('FormName');\r\n+        \/\/ Check that opening tag was printed\r\n+        $this->assertContains('<form', $form);\r\n+        \/\/ Check that closing tag was printed\r\n+        $this->assertContains('<\/form>', $form);\r\n+    }\r\n }\r\n\r\n \/\/ Call Zend_View_Helper_FormTest::main() if this source file is executed directly.\r\n{code}\r\n\r\nProposed fix:\r\n{code}\r\nIndex: library\/Zend\/View\/Helper\/Form.php\r\n===================================================================\r\n--- library\/Zend\/View\/Helper\/Form.php   (revision 24462)\r\n+++ library\/Zend\/View\/Helper\/Form.php   (working copy)\r\n@@ -73,10 +73,11 @@\r\n                . '>';\r\n\r\n         if (false !== $content) {\r\n-            $xhtml .= $content\r\n-                   .  '<\/form>';\r\n+            $xhtml .= $content;\r\n         }\r\n\r\n+        $xhtml .= '<\/form>';\r\n+\r\n         return $xhtml;\r\n     }\r\n }\r\n{code}\r\n\r\nI don't see any harm in correcting this (obviously) incorrect behavior.  Unless there are any objections, I will commit to trunk and merge to release-1.11.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "created": "2011-09-23T03:03:01.000+0000",
                    "updated": "2011-09-23T03:03:01.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48538",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "body": "Fixed in trunk r24477\nMerged to release-1.11 in r24478",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "created": "2011-09-26T19:53:03.000+0000",
                    "updated": "2011-09-26T19:53:03.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48576",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=pbijl",
                        "name": "pbijl",
                        "displayName": "piet bijl",
                        "active": true
                    },
                    "body": "I really dont understand this merge as this just broken numerous projects. Why was this implemented in the first place? For what gain? What was the problem? Why is it a \"BUG\" that you can render the form decorator WITH or WITHOUT a closing tag.\r\n\r\nNow there is no way to render the form decorator APART from the other decorators. Now we are forced to buffer the output of custom form, and pass it as content to the form decorator.\r\n\r\nEven when using a custom viewscript, there is no way to render the form now without the closing tag.\r\n\r\nI ended up wrapping all the form decorators in a static function which removes the closing tag. Great decision.\r\n\r\nNo gain, alot of pain. Cool commit",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=pbijl",
                        "name": "pbijl",
                        "displayName": "piet bijl",
                        "active": true
                    },
                    "created": "2011-10-01T10:04:05.000+0000",
                    "updated": "2011-10-01T10:04:05.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48577",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=pbijl",
                        "name": "pbijl",
                        "displayName": "piet bijl",
                        "active": true
                    },
                    "body": "Please re-open, this craves for a revert.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=pbijl",
                        "name": "pbijl",
                        "displayName": "piet bijl",
                        "active": true
                    },
                    "created": "2011-10-01T10:12:24.000+0000",
                    "updated": "2011-10-01T10:12:24.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48580",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "body": "Apologies.  That use case was missed while discussing and producing the fix, and the unit tests for Zend_View don't enforce this use case.  I will add a test to enforce it so the problem doesn't reoccur. \n\nFix backed out from release (r24487) and trunk (r24488). ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "created": "2011-10-01T23:32:38.000+0000",
                    "updated": "2011-10-01T23:32:38.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48599",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=chielsen",
                        "name": "chielsen",
                        "displayName": "Michiel Thalen",
                        "active": true
                    },
                    "body": "Just broke my project as well. Second bugfix release in 2 months that brakes my project :(\r\nRevert please.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=chielsen",
                        "name": "chielsen",
                        "displayName": "Michiel Thalen",
                        "active": true
                    },
                    "created": "2011-10-04T08:31:47.000+0000",
                    "updated": "2011-10-04T08:31:47.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48600",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "body": "@Michiel\r\nPlease show us your code snippet which breaks your project. Thanks!",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=frosch",
                        "name": "frosch",
                        "displayName": "Frank Br\u00fcckner",
                        "active": true
                    },
                    "created": "2011-10-04T10:06:24.000+0000",
                    "updated": "2011-10-04T10:06:24.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48601",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "body": "I imagine it's this use case (from a view script), which I missed when vetting the fix:\n{code}\n<?php echo $this->form('foo'); ?>\n    <!-- Call other form* view helpers in here -->\n<\/form>\n{code}\nIn 1.11.11, this now produces the following HTML:\n{code}\n<form name=\"foo\"><\/form>\n    <!-- Call other form* view helpers in here -->\n<\/form>\n{code}\nAs the committed patch closes the tag regardless of whether or not content was passed into the form helper's third argument.\n",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "created": "2011-10-04T11:54:40.000+0000",
                    "updated": "2011-10-04T11:54:40.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/48602",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "body": "I've attached two methods to fix the v1.11.11 release:\r\n * A tarball (ZF\\-11747_fixedfiles.tar.gz) containing full, fixed versions of both files. Apply:\r\n{code}cd \/your\/zf\/install ; tar -zxvf ZF-11747_fixedfiles.tar.gz{code}\r\n * A patch (ZF\\-11747_revert.patch) which can be used to reverse the changes.  Apply:\r\n{code}patch -p0 -i ZF-11747_revert.patch{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "created": "2011-10-04T12:28:03.000+0000",
                    "updated": "2011-10-04T12:28:27.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/49097",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=chielsen",
                        "name": "chielsen",
                        "displayName": "Michiel Thalen",
                        "active": true
                    },
                    "body": "This bug has been listed Resolved as not an issue? Well it is, and it seems to me that the fixed version is also in the trunk.\r\nSo if that is true, maybe change this status. When is the release coming out?",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=chielsen",
                        "name": "chielsen",
                        "displayName": "Michiel Thalen",
                        "active": true
                    },
                    "created": "2011-11-14T23:53:49.000+0000",
                    "updated": "2011-11-14T23:53:49.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/49175",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=htbaa",
                        "name": "htbaa",
                        "displayName": "Christiaan Kras",
                        "active": true
                    },
                    "body": "I'd like to request this 'fix' to be reverted as well. In a big webapplication I use custom view scripts in which I call (from within the view) $this->form() with only 2 parameters, a form ID and an array with attributes, and later in the template I close the form with a manually inserted <\/form>. I omit the 3rd parameter. Now this suddenly closes the form tag? I've been using this form since ZF 1.5. This release totally breaks my application, so I'll stick to a previous version for now.",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=htbaa",
                        "name": "htbaa",
                        "displayName": "Christiaan Kras",
                        "active": true
                    },
                    "created": "2011-11-27T15:33:17.000+0000",
                    "updated": "2011-11-27T15:33:17.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/49192",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dol",
                        "name": "dol",
                        "displayName": "Dominic Luechinger",
                        "active": true
                    },
                    "body": "+1 for revert this modification.\r\nThis fix\/bug broke all some of our production code. We use a similar rendering to Adam Lundrigan comment. By passing false to the renderer, the closing form tag won't be added.\r\n\r\n{code:html}\r\n<?php echo $this->form->getDecorator('Form')->setElement($this->form)->render(false); ?>\r\n    <!-- Call other form* view helpers in here -->\r\n<\/form>\r\n{code}",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dol",
                        "name": "dol",
                        "displayName": "Dominic Luechinger",
                        "active": true
                    },
                    "created": "2011-11-30T14:49:11.000+0000",
                    "updated": "2011-11-30T14:51:42.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/49193",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "body": "This will be fixed in v1.11.12 and\/or v1.12.0 (not sure if 1.11.12 is axed now that 1.12.x is coming down the pipe soon)\r\nThose who want to upgrade to v1.11.11 can, in the interim, follow my instructions above to revert the botched fix ([here|http:\/\/framework.zend.com\/issues\/browse\/ZF-11747?focusedCommentId=48602&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-48602]).  \r\n\r\nI do sincerely apologize for the inconvenience this has caused to everyone involved. ",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=adamlundrigan",
                        "name": "adamlundrigan",
                        "displayName": "Adam Lundrigan",
                        "active": true
                    },
                    "created": "2011-11-30T14:55:24.000+0000",
                    "updated": "2011-11-30T14:55:24.000+0000"
                },
                {
                    "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/comment\/49195",
                    "author": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dol",
                        "name": "dol",
                        "displayName": "Dominic Luechinger",
                        "active": true
                    },
                    "body": "Sorry, if wasn't reading carefully. It's fixed in r24487 and r24488. Thx for reverting. No problem at all. Was funny to debug. Was looking everywhere (different browser, javascript, ...). ;-)",
                    "updateAuthor": {
                        "self": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/user?username=dol",
                        "name": "dol",
                        "displayName": "Dominic Luechinger",
                        "active": true
                    },
                    "created": "2011-11-30T15:03:38.000+0000",
                    "updated": "2011-11-30T15:03:38.000+0000"
                }
            ]
        }
    },
    "transitions": "http:\/\/fw02.zend.com\/issues\/rest\/api\/latest\/issue\/ZF-11747\/transitions"
}